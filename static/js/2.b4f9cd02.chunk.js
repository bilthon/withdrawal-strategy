/*! For license information please see 2.b4f9cd02.chunk.js.LICENSE.txt */
(this["webpackJsonpwithdrawal-strategy"]=this["webpackJsonpwithdrawal-strategy"]||[]).push([[2],[function(e,t,r){e.exports=r(157)()},function(e,t,r){"use strict";e.exports=r(150)},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},r(t)}e.exports=r},function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}e.exports=function(e,t,i){return t&&r(e.prototype,t),i&&r(e,i),e}},function(e,t,r){var i=r(80);e.exports=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}},function(e,t,r){var i=r(3),n=r(128),a=r(262);e.exports=function(e){var t=n();return function(){var r,n=i(e);if(t){var s=i(this).constructor;r=Reflect.construct(n,arguments,s)}else r=n.apply(this,arguments);return a(this,r)}}},function(e,t,r){var i=r(271);function n(t,r,a){return"undefined"!==typeof Reflect&&Reflect.get?e.exports=n=Reflect.get:e.exports=n=function(e,t,r){var n=i(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}},n(t,r,a||t)}e.exports=n},function(e,t,r){e.exports=r(156)},function(e,t){function r(e,t,r,i,n,a,s){try{var o=e[a](s),c=o.value}catch(u){return void r(u)}o.done?t(c):Promise.resolve(c).then(i,n)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var s=e.apply(t,i);function o(e){r(s,n,a,o,c,"next",e)}function c(e){r(s,n,a,o,c,"throw",e)}o(void 0)}))}}},function(e,t,r){"use strict";var i=r(99),n=r(2),a=r(127),s=r(5),o=r(6),c=r(16),u=r(264);e.exports=function e(t,r){for(var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=function(){var r=c(l[h],2),d=r[0],f=r[1],p=Object.assign(u,i({},d,function(e){s(r,e);var t=o(r);function r(e){var i;return n(this,r),(i=t.call(this,e)).constructor=p,i.__proto__=p.prototype,i.name=d,i.message=e,Object.setPrototypeOf(a(i),p.prototype),i}return r}(t)))[d];e(p,f,u)},h=0,l=Object.entries(r);h<l.length;h++)d();return u}(Error,u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(16),s=r(2),o=r(4),c=r(97),u=c.isNode,d=(c.keys,c.values,c.deepExtend),h=c.extend,l=c.clone,f=c.flatten,p=c.unique,v=c.indexBy,m=c.sortBy,y=c.groupBy,g=c.aggregate,b=(c.uuid,c.unCamelCase),k=(c.precisionFromString,c.throttle),x=c.capitalize,w=(c.now,c.timeout),_=c.TimedOut,O=c.buildOHLCVC,T=c.decimalToPrecision,S=c.defaultFetch,C=r(10),I=C.ExchangeError,M=C.BadSymbol,E=C.InvalidAddress,A=C.NotSupported,F=C.AuthenticationError,P=C.DDoSProtection,B=C.RequestTimeout,R=C.ExchangeNotAvailable,V=C.RateLimitExceeded,L=c.precisionConstants,D=L.TRUNCATE,q=L.ROUND,N=L.DECIMAL_PLACES,G=L.NO_PADDING,j=r(25);e.exports=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),Object.assign(this,c),this.options={},this.fetchOptions={},this.userAgents={chrome:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36",chrome39:"Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.71 Safari/537.36"},this.headers={},this.proxy="",this.origin="*",this.minFundingAddressLength=1,this.substituteCommonCurrencyCodes=!0,this.reduceFees=!0,this.fetchImplementation=S,this.timeout=1e4,this.verbose=!1,this.debug=!1,this.userAgent=void 0,this.twofa=void 0,this.apiKey=void 0,this.secret=void 0,this.uid=void 0,this.login=void 0,this.password=void 0,this.privateKey=void 0,this.walletAddress=void 0,this.token=void 0,this.balance={},this.orderbooks={},this.tickers={},this.orders=void 0,this.trades={},this.transactions={},this.ohlcvs={},this.myTrades=void 0,this.requiresWeb3=!1,this.requiresEddsa=!1,this.precision={},this.enableLastJsonResponse=!0,this.enableLastHttpResponse=!0,this.enableLastResponseHeaders=!0,this.last_http_response=void 0,this.last_json_response=void 0,this.last_response_headers=void 0;var i=function e(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;if(null!==r){for(var i=Object.getOwnPropertyNames(r),n=0;n<i.length;n++){var a=i[n];t[b(a)]=t[a]}e(Object.getPrototypeOf(r))}};i();for(var n=Object.entries(this.describe()).concat(Object.entries(r)),o=0;o<n.length;o++){var h=a(n[o],2),l=h[0],f=h[1];f&&Object.getPrototypeOf(f)===Object.prototype?this[l]=d(this[l],f):this[l]=f}var p={keepAlive:!0};!this.httpAgent&&S.http&&u&&(this.httpAgent=new S.http.Agent(p)),!this.httpsAgent&&S.https&&u&&(this.httpsAgent=new S.https.Agent(p));for(var v=Object.keys(this.has),m=0;m<v.length;m++){var y=v[m];this["has"+x(y)]=!!this.has[y]}this.api&&this.defineRestApi(this.api,"request"),this.initRestRateLimiter(),this.markets&&this.setMarkets(this.markets)}return o(e,[{key:"describe",value:function(){return{id:void 0,name:void 0,countries:void 0,enableRateLimit:!1,rateLimit:2e3,certified:!1,pro:!1,has:{loadMarkets:!0,cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:"emulated",fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchFundingFees:!1,fetchL2OrderBook:!0,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:"emulated",fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!1,fetchOrderTrades:!1,fetchStatus:"emulated",fetchTicker:!0,fetchTickers:!1,fetchTime:!1,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!1,privateAPI:!0,publicAPI:!0,signIn:!1,withdraw:!1},urls:{logo:void 0,api:void 0,www:void 0,doc:void 0,fees:void 0},api:void 0,requiredCredentials:{apiKey:!0,secret:!0,uid:!1,login:!1,password:!1,twofa:!1,privateKey:!1,walletAddress:!1,token:!1},markets:void 0,currencies:{},timeframes:void 0,fees:{trading:{tierBased:void 0,percentage:void 0,taker:void 0,maker:void 0},funding:{tierBased:void 0,percentage:void 0,withdraw:{},deposit:{}}},status:{status:"ok",updated:void 0,eta:void 0,url:void 0},exceptions:void 0,httpExceptions:{422:I,418:P,429:V,404:R,409:R,410:R,500:R,501:R,502:R,520:R,521:R,522:R,525:R,526:R,400:R,403:R,405:R,503:R,530:R,408:B,504:B,401:F,511:F},dontGetUsedBalanceFromStaleCache:!1,commonCurrencies:{XBT:"BTC",BCC:"BCH",DRK:"DASH",BCHABC:"BCH",BCHSV:"BSV"},precisionMode:N,paddingMode:G,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}},{key:"defaults",value:function(){return{}}},{key:"nonce",value:function(){return this.seconds()}},{key:"encodeURIComponent",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){return encodeURIComponent.apply(void 0,arguments)}))},{key:"checkRequiredCredentials",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Object.keys(this.requiredCredentials),r=0;r<t.length;r++){var i=t[r];if(this.requiredCredentials[i]&&!this[i]){if(e)throw new F(this.id+" requires `"+i+"` credential");return e}}return!0}},{key:"checkAddress",value:function(e){if(void 0===e)throw new E(this.id+" address is undefined");if(1===p(e).length||e.length<this.minFundingAddressLength||e.includes(" "))throw new E(this.id+" address is invalid or has less than "+this.minFundingAddressLength.toString()+' characters: "'+this.json(e)+'"');return e}},{key:"initRestRateLimiter",value:function(){var e=this;if(void 0===this.rateLimit)throw new Error(this.id+".rateLimit property is not configured");this.tokenBucket=this.extend({delay:1,capacity:1,defaultCost:1,maxCapacity:1e3},this.tokenBucket),this.throttle=k(this.tokenBucket),this.executeRestRequest=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=e.fetchImplementation,s={method:r,headers:i,body:n,timeout:e.timeout};e.agent?s.agent=e.agent:e.httpAgent&&0===t.indexOf("http://")?s.agent=e.httpAgent:e.httpsAgent&&0===t.indexOf("https://")&&(s.agent=e.httpsAgent);var o=a(t,e.extend(s,e.fetchOptions)).catch((function(i){if(u)throw new R([e.id,r,t,i.type,i.message].join(" "));throw i})).then((function(a){return e.handleRestResponse(a,t,r,i,n)}));return w(e.timeout,o).catch((function(i){if(i instanceof _)throw new B(e.id+" "+r+" "+t+" request timed out ("+e.timeout+" ms)");throw i}))}}},{key:"setSandboxMode",value:function(e){if(e){if(!("test"in this.urls))throw new A(this.id+" does not have a sandbox URL");"string"===typeof this.urls.api?(this.urls.apiBackup=this.urls.api,this.urls.api=this.urls.test):(this.urls.apiBackup=l(this.urls.api),this.urls.api=l(this.urls.test))}else"apiBackup"in this.urls&&("string"===typeof this.urls.api?this.urls.api=this.urls.apiBackup:this.urls.api=l(this.urls.apiBackup))}},{key:"defineRestApi",value:function(e,t){for(var r=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=Object.keys(e),o=0;o<s.length;o++){var c=s[o],u=e[c];Array.isArray(u)?function(){for(var e=c.toUpperCase(),s=c.toLowerCase(),o=r.capitalize(s),d=function(c){var d=u[c].trim(),h=d.split(/[^a-zA-Z0-9]/),l=h.map(r.capitalize).join(""),f=h.map((function(e){return e.trim().toLowerCase()})).filter((function(e){return e.length>0})).join("_"),p=[a[0]].concat(a.slice(1).map(r.capitalize)).join(""),v=[a[0]].concat(a.slice(1).map((function(e){return e.trim()})).filter((function(e){return e.length>0}))).join("_"),m=p+o+r.capitalize(l),y=v+"_"+s+"_"+f,g=a.length>1?a:a[0],b=function(){var a=n(i.mark((function n(a){return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",r[t](d,g,e,a||{}));case 1:case"end":return i.stop()}}),n)})));return function(e){return a.apply(this,arguments)}}();r[m]=b,r[y]=b},h=0;h<u.length;h++)d(h)}():this.defineRestApi(u,t,a.concat([c]))}}},{key:"print",value:function(){var e;(e=console).log.apply(e,arguments)}},{key:"setHeaders",value:function(e){return e}},{key:"fetch",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return u&&this.userAgent&&("string"===typeof this.userAgent?r=h({"User-Agent":this.userAgent},r):"object"===typeof this.userAgent&&"User-Agent"in this.userAgent&&(r=h(this.userAgent,r))),"function"===typeof this.proxy?(e=this.proxy(e),u&&(r=h({Origin:this.origin},r))):"string"===typeof this.proxy&&(this.proxy.length&&u&&(r=h({Origin:this.origin},r)),e=this.proxy+e),r=h(this.headers,r),r=this.setHeaders(r),this.verbose&&this.print("fetch:\n",this.id,t,e,"\nRequest:\n",r,"\n",i,"\n"),this.executeRestRequest(e,t,r,i)}},{key:"fetch2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,!this.enableRateLimit){e.next=8;break}return e.next=8,this.throttle(this.rateLimit);case 8:return c=this.sign(t,r,n,a,s,o),e.abrupt("return",this.fetch(c.url,c.method,c.headers,c.body));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;return this.fetch2(e,t,r,i,n,a)}},{key:"parseJson",value:function(e){try{if(this.isJsonEncodedObject(e))return JSON.parse(e)}catch(t){return}}},{key:"throwExactlyMatchedException",value:function(e,t,r){if(t in e)throw new e[t](r)}},{key:"throwBroadlyMatchedException",value:function(e,t,r){var i=this.findBroadlyMatchedKey(e,t);if(void 0!==i)throw new e[i](r)}},{key:"findBroadlyMatchedKey",value:function(e,t){for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(t.indexOf(n)>=0)return n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){}},{key:"handleHttpStatusCode",value:function(e,t,r,i,n){var a=e.toString();if(a in this.httpExceptions)throw new(0,this.httpExceptions[a])([this.id,i,r,e,t,n].join(" "))}},{key:"getResponseHeaders",value:function(e){var t={};return e.headers.forEach((function(e,r){r=r.split("-").map((function(e){return x(e)})).join("-"),t[r]=e})),t}},{key:"handleRestResponse",value:function(e,t){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;return e.text().then((function(s){var o=r.getResponseHeaders(e),c=r.onRestResponse(e.status,e.statusText,t,i,o,s,n,a),u=r.parseJson(c);return r.enableLastResponseHeaders&&(r.last_response_headers=o),r.enableLastHttpResponse&&(r.last_http_response=s),r.enableLastJsonResponse&&(r.last_json_response=u),r.verbose&&r.print("handleRestResponse:\n",r.id,i,t,e.status,e.statusText,"\nResponse:\n",o,"\n",s,"\n"),r.handleErrors(e.status,e.statusText,t,i,o,s,u,n,a),r.handleHttpStatusCode(e.status,e.statusText,t,i,s),u||s}))}},{key:"onRestResponse",value:function(e,t,r,i,n,a,s,o){return a.trim().replace(/:(\d{15,}),/g,':"$1",')}},{key:"setMarkets",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=Object.values(e).map((function(e){return d({limits:t.limits,precision:t.precision},t.fees.trading,e)}));if(this.markets=v(i,"symbol"),this.marketsById=v(e,"id"),this.markets_by_id=this.marketsById,this.symbols=Object.keys(this.markets).sort(),this.ids=Object.keys(this.markets_by_id).sort(),r)this.currencies=d(r,this.currencies);else{var n=i.filter((function(e){return"base"in e})).map((function(e){return{id:e.baseId||e.base,numericId:void 0!==e.baseNumericId?e.baseNumericId:void 0,code:e.base,precision:e.precision?e.precision.base||e.precision.amount:8}})),a=i.filter((function(e){return"quote"in e})).map((function(e){return{id:e.quoteId||e.quote,numericId:void 0!==e.quoteNumericId?e.quoteNumericId:void 0,code:e.quote,precision:e.precision?e.precision.quote||e.precision.price:8}}));n=m(n,"code"),a=m(a,"code"),this.baseCurrencies=v(n,"code"),this.quoteCurrencies=v(a,"code");var s=n.concat(a),o=y(s,"code"),c=Object.keys(o).map((function(e){return o[e].reduce((function(e,t){return e.precision>t.precision?e:t}),o[e][0])})),u=m(f(c),"code");this.currencies=d(v(u,"code"),this.currencies)}return this.currencies_by_id=v(this.currencies,"id"),this.markets}},{key:"loadMarketsHelper",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]&&s[0],r=s.length>1&&void 0!==s[1]?s[1]:{},t||!this.markets){e.next=6;break}if(this.markets_by_id){e.next=5;break}return e.abrupt("return",this.setMarkets(this.markets));case 5:return e.abrupt("return",this.markets);case 6:if(n=void 0,!this.has.fetchCurrencies){e.next=11;break}return e.next=10,this.fetchCurrencies();case 10:n=e.sent;case 11:return e.next=13,this.fetchMarkets(r);case 13:return a=e.sent,e.abrupt("return",this.setMarkets(a,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(t&&!this.reloadingMarkets||!this.marketsLoading)&&(this.reloadingMarkets=!0,this.marketsLoading=this.loadMarketsHelper(t,r).then((function(t){return e.reloadingMarkets=!1,t}),(function(t){throw e.reloadingMarkets=!1,t}))),this.marketsLoading}},{key:"loadAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]&&n[0],r=n.length>1&&void 0!==n[1]?n[1]:{},!t){e.next=8;break}return e.next=5,this.fetchAccounts(r);case 5:this.accounts=e.sent,e.next=15;break;case 8:if(!this.accounts){e.next=12;break}return e.abrupt("return",this.accounts);case 12:return e.next=14,this.fetchAccounts(r);case 14:this.accounts=e.sent;case 15:return this.accountsById=this.indexBy(this.accounts,"id"),e.abrupt("return",this.accounts);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){throw new A(this.id+" fetchBidsAsks not supported yet")}},{key:"fetchOHLCVC",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"1m",n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},this.has.fetchTrades){e.next=6;break}throw new A(this.id+" fetchOHLCV() not supported yet");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.fetchTrades(t,n,a,s);case 10:return o=e.sent,c=O(o,r,n,a),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:"1m",n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},this.has.fetchTrades){e.next=6;break}throw new A(this.id+" fetchOHLCV() not supported yet");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.fetchTrades(t,n,a,s);case 10:return o=e.sent,c=O(o,r,n,a),e.abrupt("return",c.map((function(e){return e.slice(0,-1)})));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradingViewOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"1m",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=this.convertTradingViewToOHLCV(e);return this.parseOHLCVs(a,t,r,i,n)}},{key:"convertTradingViewToOHLCV",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"o",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"h",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"l",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"c",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"v",o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c=[],u=0;u<e[t].length;u++)c.push([o?e[t][u]:1e3*e[t][u],e[r][u],e[i][u],e[n][u],e[a][u],e[s][u]]);return c}},{key:"convertOHLCVToTradingView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"t",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"o",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"h",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"l",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"c",s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"v",o=arguments.length>7&&void 0!==arguments[7]&&arguments[7],c={};c[t]=[],c[r]=[],c[i]=[],c[n]=[],c[a]=[],c[s]=[];for(var u=0;u<e.length;u++)c[t].push(o?e[u][0]:parseInt(e[u][0]/1e3)),c[r].push(e[u][1]),c[i].push(e[u][2]),c[n].push(e[u][3]),c[a].push(e[u][4]),c[s].push(e[u][5]);return c}},{key:"fetchTicker",value:function(e){throw new A(this.id+" fetchTicker not supported yet")}},{key:"fetchTickers",value:function(){throw new A(this.id+" fetchTickers not supported yet")}},{key:"fetchOrder",value:function(e){throw new A(this.id+" fetchOrder not supported yet")}},{key:"fetchUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}},{key:"createOrder",value:function(e,t,r,i){throw new A(this.id+" createOrder not supported yet")}},{key:"cancelOrder",value:function(e){throw new A(this.id+" cancelOrder not supported yet")}},{key:"cancelUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.cancelOrder(this.safeValue(e,"id"),this.safeValue(e,"symbol"),t)}},{key:"fetchOrders",value:function(){throw new A(this.id+" fetchOrders not supported yet")}},{key:"fetchOpenOrders",value:function(){throw new A(this.id+" fetchOpenOrders not supported yet")}},{key:"fetchClosedOrders",value:function(){throw new A(this.id+" fetchClosedOrders not supported yet")}},{key:"fetchMyTrades",value:function(){throw new A(this.id+" fetchMyTrades not supported yet")}},{key:"fetchTransactions",value:function(){throw new A(this.id+" fetchTransactions not supported yet")}},{key:"fetchDeposits",value:function(){throw new A(this.id+" fetchDeposits not supported yet")}},{key:"fetchWithdrawals",value:function(){throw new A(this.id+" fetchWithdrawals not supported yet")}},{key:"fetchCurrencies",value:function(){var e=this;return new Promise((function(t,r){return t(e.currencies)}))}},{key:"fetchMarkets",value:function(){var e=this;return new Promise((function(t,r){return t(Object.values(e.markets))}))}},{key:"fetchOrderStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchOrder(t,r,n);case 4:return a=e.sent,e.abrupt("return",a.status);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"account",value:function(){return{free:void 0,used:void 0,total:void 0}}},{key:"commonCurrencyCode",value:function(e){return this.substituteCommonCurrencyCodes?this.safeString(this.commonCurrencies,e,e):e}},{key:"currencyId",value:function(e){if(void 0===this.currencies)throw new I(this.id+" currencies not loaded");if(e in this.currencies)return this.currencies[e].id;for(var t={},r=Object.keys(this.commonCurrencies),i=0;i<r.length;i++){var n=r[i];t[this.commonCurrencies[n]]=n}return this.safeString(t,e,e)}},{key:"currency",value:function(e){if(void 0===this.currencies)throw new I(this.id+" currencies not loaded");if("string"===typeof e&&e in this.currencies)return this.currencies[e];throw new I(this.id+" does not have currency code "+e)}},{key:"market",value:function(e){if(void 0===this.markets)throw new I(this.id+" markets not loaded");if("string"===typeof e&&e in this.markets)return this.markets[e];throw new M(this.id+" does not have market symbol "+e)}},{key:"marketId",value:function(e){var t=this.market(e);return void 0!==t?t.id:e}},{key:"marketIds",value:function(e){var t=this;return e.map((function(e){return t.marketId(e)}))}},{key:"currencyIds",value:function(e){var t=this;return e.map((function(e){return t.currencyId(e)}))}},{key:"symbol",value:function(e){return this.market(e).symbol||e}},{key:"url",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.implodeParams(e,t),i=this.omit(t,this.extractParams(e));return Object.keys(i).length&&(r+="?"+this.urlencode(i)),r}},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=parseFloat(e[t]),n=parseFloat(e[r]);return[i,n]}},{key:"parseBidsAsks",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Object.values(e||[]).map((function(e){return t.parseBidAsk(e,r,i)}))}},{key:"fetchL2OrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchOrderBook(t,r,n);case 4:return a=e.sent,e.abrupt("return",h(a,{bids:m(g(a.bids),0,!0),asks:m(g(a.asks),0)}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return{bids:m(r in e?this.parseBidsAsks(e[r],n,a):[],0,!0),asks:m(i in e?this.parseBidsAsks(e[i],n,a):[],0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}},{key:"parseBalance",value:function(e){var t=Object.keys(this.omit(e,["info","free","used","total"]));e.free={},e.used={},e.total={};for(var r=0;r<t.length;r++){var i=t[r];void 0===e[i].total&&void 0!==e[i].free&&void 0!==e[i].used&&(e[i].total=this.sum(e[i].free,e[i].used)),void 0===e[i].free&&void 0!==e[i].total&&void 0!==e[i].used&&(e[i].free=this.sum(e[i].total,-e[i].used)),void 0===e[i].used&&void 0!==e[i].total&&void 0!==e[i].free&&(e[i].used=this.sum(e[i].total,-e[i].free)),e.free[i]=e[i].free,e.used[i]=e[i].used,e.total[i]=e[i].total}return e}},{key:"fetchPartialBalance",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchBalance(r);case 3:return n=e.sent,e.abrupt("return",n[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFreeBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("free",e)}},{key:"fetchUsedBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("used",e)}},{key:"fetchTotalBalance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.fetchPartialBalance("total",e)}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.length>0&&void 0!==n[0]?n[0]:{},!this.has.fetchTime){e.next=6;break}return e.next=4,this.fetchTime(t);case 4:r=e.sent,this.status=this.extend(this.status,{updated:r});case 6:return e.abrupt("return",this.status);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw t.length>0&&void 0!==t[0]?t[0]:{},new A(this.id+" fetchTradingFees not supported yet");case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.length>1&&void 0!==n[1]?n[1]:{},this.has.fetchTradingFees){e.next=3;break}throw new A(this.id+" fetchTradingFee not supported yet");case 3:return e.next=5,this.fetchTradingFees(r);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]&&o[1],o.length>2&&void 0!==o[2]?o[2]:{},!this.has.fetchTradingLimits){e.next=10;break}if(!r&&"limitsLoaded"in this.options){e.next=10;break}return e.next=7,this.fetchTradingLimits(t);case 7:for(n=e.sent,a=0;a<t.length;a++)s=t[a],this.markets[s]=this.deepExtend(this.markets[s],n[s]);this.options.limitsLoaded=this.milliseconds();case 10:return e.abrupt("return",this.markets);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"filterBySinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"timestamp",n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=void 0!==t&&null!==t;return a&&(e=e.filter((function(e){return e[i]>=t}))),void 0!==r&&null!==r&&(e=n?e.slice(-r):e.slice(0,r)),e}},{key:"filterByValueSinceLimit",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"timestamp",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=void 0!==r&&null!==r,c=void 0!==i&&null!==i;return(o||c)&&(e=e.filter((function(e){return(!o||e[t]===r)&&(!c||e[a]>=i)}))),void 0!==n&&null!==n&&(e=s?e.slice(-n):e.slice(0,n)),e}},{key:"filterBySymbolSinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.filterByValueSinceLimit(e,"symbol",t,r,i,"timestamp",n)}},{key:"filterByCurrencySinceLimit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return this.filterByValueSinceLimit(e,"currency",t,r,i,"timestamp",n)}},{key:"filterByArray",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(e=Object.values(e),void 0===r||null===r)return i?v(e,t):e;for(var n=[],a=0;a<e.length;a++)r.includes(e[a][t])&&n.push(e[a]);return i?v(n,t):n}},{key:"parseTrades",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=Object.values(e||[]).map((function(e){return t.extend(t.parseTrade(e,r),a)}));s=m(s,"timestamp");var o=void 0!==r?r.symbol:void 0,c=void 0===i;return this.filterBySymbolSinceLimit(s,o,i,n,c)}},{key:"parseTransactions",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=Object.values(e||[]).map((function(e){return t.extend(t.parseTransaction(e,r),a)}));s=this.sortBy(s,"timestamp");var o=void 0!==r?r.code:void 0,c=void 0===i;return this.filterByCurrencySinceLimit(s,o,i,n,c)}},{key:"parseTransfers",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},s=Object.values(e||[]).map((function(e){return t.extend(t.parseTransfer(e,r),a)}));s=this.sortBy(s,"timestamp");var o=void 0!==r?r.code:void 0,c=void 0===i;return this.filterByCurrencySinceLimit(s,o,i,n,c)}},{key:"parseLedger",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=[],s=Object.values(e||[]),o=0;o<s.length;o++){var c=this.parseLedgerEntry(s[o],t);if(Array.isArray(c))for(var u=0;u<c.length;u++)a.push(this.extend(c[u],n));else a.push(this.extend(c,n))}a=this.sortBy(a,"timestamp");var d=void 0!==t?t.code:void 0,h=void 0===r;return this.filterByCurrencySinceLimit(a,d,r,i,h)}},{key:"parseOrders",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=Array.isArray(e)?Object.values(e).map((function(e){return t.extend(t.parseOrder(e,r),s)})):Object.entries(e).map((function(e){var i=a(e,2),n=i[0],o=i[1];return t.extend(t.parseOrder(t.extend({id:n},o),r),s)}));o=m(o,"timestamp");var c=void 0!==r?r.symbol:void 0,u=void 0===i;return this.filterBySymbolSinceLimit(o,c,i,n,u)}},{key:"safeCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e&&void 0!==t?t:void 0!==this.currencies_by_id&&e in this.currencies_by_id?this.currencies_by_id[e]:{id:e,code:void 0===e?e:this.commonCurrencyCode(e.toUpperCase())}}},{key:"safeCurrencyCode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return(t=this.safeCurrency(e,t)).code}},{key:"safeMarket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;if(void 0!==e)if(void 0!==this.markets_by_id&&e in this.markets_by_id)t=this.markets_by_id[e];else if(void 0!==r){var i=e.split(r),n=a(i,2),s=n[0],o=n[1],c=this.safeCurrencyCode(s),u=this.safeCurrencyCode(o),d=c+"/"+u;return{id:e,symbol:d,base:c,quote:u,baseId:s,quoteId:o}}return void 0!==t?t:{id:e,symbol:e,base:void 0,quote:void 0,baseId:void 0,quoteId:void 0}}},{key:"safeSymbol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return(t=this.safeMarket(e,t,r)).symbol}},{key:"filterBySymbol",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0!==t?e.filter((function(e){return e.symbol===t})):e}},{key:"parseOHLCV",value:function(e){return Array.isArray(e)?e.slice(0,6):e}},{key:"parseOHLCVs",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=e.map((function(e){return t.parseOHLCV(e,r)})),s=this.sortBy(a,0),o=void 0===i;return this.filterBySinceLimit(s,i,n,0,o)}},{key:"editLimitBuyOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editLimitOrder.apply(this,[e,t,"buy"].concat(i))}},{key:"editLimitSellOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editLimitOrder.apply(this,[e,t,"sell"].concat(i))}},{key:"editLimitOrder",value:function(e,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),n=2;n<r;n++)i[n-2]=arguments[n];return this.editOrder.apply(this,[e,t,"limit"].concat(i))}},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r){var n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.enableRateLimit){e.next=2;break}throw new I(this.id+" editOrder() requires enableRateLimit = true");case 2:return e.next=4,this.cancelOrder(t,r);case 4:for(n=o.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=o[s];return e.abrupt("return",this.createOrder.apply(this,[r].concat(a)));case 6:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createLimitOrder",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.createOrder(e,"limit",t,r,i,n)}},{key:"createMarketOrder",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.createOrder(e,"market",t,r,i,n)}},{key:"createLimitBuyOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.createOrder(e,"limit","buy",t,r,i)}},{key:"createLimitSellOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.createOrder(e,"limit","sell",t,r,i)}},{key:"createMarketBuyOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createOrder(e,"market","buy",t,void 0,r)}},{key:"createMarketSellOrder",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.createOrder(e,"market","sell",t,void 0,r)}},{key:"costToPrecision",value:function(e,t){return T(t,D,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}},{key:"priceToPrecision",value:function(e,t){return T(t,q,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}},{key:"amountToPrecision",value:function(e,t){return T(t,D,this.markets[e].precision.amount,this.precisionMode,this.paddingMode)}},{key:"feeToPrecision",value:function(e,t){return T(t,q,this.markets[e].precision.price,this.precisionMode,this.paddingMode)}},{key:"currencyToPrecision",value:function(e,t){return T(t,q,this.currencies[e].precision,this.precisionMode,this.paddingMode)}},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=s[a],c=parseFloat(this.costToPrecision(e,i*n));return{type:a,currency:s.quote,rate:o,cost:parseFloat(this.feeToPrecision(e,o*c))}}},{key:"checkRequiredDependencies",value:function(){}},{key:"soliditySha3",value:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];if(Number.isInteger(i)||i.match(/^[0-9]+$/))t.push(this.numberToBE(this.numberToString(i),32));else{var n=this.remove0xPrefix(i);40===n.length&&n.toLowerCase().match(/^[0-9a-f]+$/)?t.push(this.base16ToBinary(n)):t.push(this.stringToBinary(n))}}var a=this.binaryConcatArray(t);return"0x"+this.hash(a,"keccak","hex")}},{key:"remove0xPrefix",value:function(e){return"0x"===e.slice(0,2)?e.slice(2):e}},{key:"hashMessage",value:function(e){var t=this.base16ToBinary(this.remove0xPrefix(e)),r=this.stringToBinary("\x19Ethereum Signed Message:\n"+t.sigBytes);return"0x"+this.hash(this.binaryConcat(r,t),"keccak","hex")}},{key:"signHash",value:function(e,t){var r=this.ecdsa(e.slice(-64),t.slice(-64),"secp256k1",void 0);return{r:"0x"+r.r,s:"0x"+r.s,v:27+r.v}}},{key:"signMessage",value:function(e,t){return this.signHash(this.hashMessage(e),t.slice(-64))}},{key:"signMessageString",value:function(e,t){var r=this.signMessage(e,t);return r.r+this.remove0xPrefix(r.s)+this.binaryToBase16(this.numberToBE(r.v))}},{key:"oath",value:function(){if("undefined"!==typeof this.twofa)return this.totp(this.twofa);throw new I(this.id+" this.twofa has not been set")}},{key:"integerDivide",value:function(e,t){return new j(e).div(new j(t))}},{key:"integerModulo",value:function(e,t){return new j(e).mod(new j(t))}},{key:"integerPow",value:function(e,t){return new j(e).pow(new j(t))}},{key:"reduceFeesByCurrency",value:function(e){for(var t={},r=0;r<e.length;r++){var i=e[r],n=this.safeValue(i,"currency");void 0!==n&&(n in t?t[n].cost=this.sum(t[n].cost,i.cost):t[n]={cost:i.cost,currency:n})}return Object.values(t)}},{key:"safeOrder",value:function(e){var t=this.safeValue(e,"amount"),r=this.safeValue(e,"remaining"),i=this.safeValue(e,"filled"),n=this.safeValue(e,"cost"),a=this.safeValue(e,"average"),s=this.safeValue(e,"price"),o=this.safeInteger(e,"lastTradeTimestamp"),c=void 0===i,u=void 0===n,d=void 0===o,h=void 0===this.safeValue(e,"fee"),l=void 0===this.safeValue(e,"fees"),f=h||l,p=f?[]:void 0;if(c||u||f){var v=this.safeValue(e,"trades");if(void 0!==v){c&&(i=0),u&&(n=0);for(var m=0;m<v.length;m++){var y=v[m],g=this.safeValue(y,"amount");c&&void 0!==g&&(i=this.sum(i,g));var b=this.safeValue(y,"cost");u&&void 0!==b&&(n=this.sum(n,b));var k=this.safeValue(y,"timestamp");if(d&&void 0!==k&&(o=void 0===o?k:Math.max(o,k)),f){var x=this.safeValue(y,"fees");if(void 0!==x)for(var w=0;w<x.length;w++){var _=x[w];p.push(this.extend({},_))}else{var O=this.safeValue(y,"fee");void 0!==O&&p.push(this.extend({},O))}}}}}if(f){var T=this.reduceFees?this.reduceFeesByCurrency(p):p,S=T.length;h||0!==S||T.push(e.fee),l&&(e.fees=T),h&&1===S&&(e.fee=T[0])}void 0===t&&void 0!==i&&void 0!==r&&(t=this.sum(i,r)),void 0===i&&void 0!==t&&void 0!==r&&(i=Math.max(this.sum(t,-r),0)),void 0===r&&void 0!==t&&void 0!==i&&(r=Math.max(this.sum(t,-i),0)),void 0===a&&void 0!==i&&void 0!==n&&n>0&&(a=n/i),void 0!==i&&(void 0!==a||void 0!==s)&&(n=void 0===a?s*i:a*i);var C=this.safeValue(e,"type");return(void 0===s||0===s)&&"market"===C&&(s=a),this.extend(e,{lastTradeTimestamp:o,price:s,amount:t,cost:n,average:a,filled:i,remaining:r})}}]),e}()},function(e,t,r){"use strict";e.exports=r(178)},function(e,t,r){"use strict";var i=r(232),n=r(16),a={ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1};function s(e){if("string"===typeof e)return e;var t=e.toString();if(Math.abs(e)<1){var r=t.split("e-"),i=r[0].replace(".",""),n=parseInt(r[1]),a="-"===t[0];if(n)return e=(a?"-":"")+"0."+new Array(n).join("0")+i.substring(a)}else{var s=t.split("e");if(s[1]){var o=parseInt(s[1]),c=s[0].split(".");return c[1]&&(o-=c[1].length),c[0]+c[1]+new Array(o+1).join("0")}}return t}var o=[],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e=s(e),t>0){var r=o[t]||(o[t]=new RegExp("([-]*\\d+\\.\\d{"+t+"})(\\d)")),i=e.toString().match(r)||[null,e],a=n(i,2),c=a[1];return c.toString()}return parseInt(e).toString()};function u(e){var t=e.replace(/0+$/g,"").split(".");return t.length>1?t[1].length:0}e.exports={toWei:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;if(void 0===e)return e;var r=parseFloat(e).toExponential(),i=r.split("e"),a=n(i,2),o=a[0],c=a[1],u=parseInt(c)+t;return s(Math.floor(parseFloat(o+"e"+u)))},fromWei:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:18;if(void 0===e)return e;var r=Math.floor(e).toExponential(),i=r.split("e"),a=n(i,2),s=a[0],o=a[1],c=parseInt(o)-t;return parseFloat(s+"e"+c)},numberToString:s,precisionFromString:u,decimalToPrecision:function e(t,r,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(2===a&&n<=0)throw new Error("TICK_SIZE cant be used with negative or zero numPrecisionDigits");if(n<0){var c=Math.pow(10,-n);if(0===r)return(c*e(t/c,r,0,a,o)).toString();if(1===r)return(t-t%c).toString()}if(2===a){var d=e(n,0,22,0,0),h=u(d),l=t%n;l=Number(e(l,0,8,0,0));var f=e(l/n,0,Math.max(h,8),0,0);return 0!==u(f)&&(0===r?t>0?l>=n/2?t=t-l+n:t-=l:t=l>=n/2?Number(t)-l:Number(t)-l-n:1===r&&(t-=l)),e(t,0,h,0,o)}for(var p=s(t),v="-"===p[0],m=v?1:0,y=p.length,g=0;g<y&&"."!==p[g];g++);var b=g<p.length,k=45,x=46,w=48,_=w+1,O=w+5,T=w+9,S=new Uint8Array(y-m+(b?0:1));S[0]=w;for(var C=S.length,I=-1,M=-1,E=1,A=m;A<y;A++,E++){var F=p.charCodeAt(A);if(F===x)C=E--;else{if(F<w||F>T)throw new Error("".concat(p,": invalid number (contains an illegal character '").concat(p[E-1],"')"));S[E]=F,F!==w&&I<0&&(I=E)}}I<0&&(I=1);var P=0===a?C:I,B=P+n;M=-1;for(var R=!0,V=v,L=S.length-1,D=0;L>=0;L--){var q=S[L];if(0!==L){if(q+=D,L>=P+n){var N=0===r&&q>=O&&!(q===O&&D);q=N?T+1:w}q>T?(q=w,D=1):D=0}else D&&(q=_);S[L]=q,q!==w&&(R=!1,I=L,M=M<0?L+1:M)}1===a&&(B=(P=I)+n),R&&(V=!1);var G=I>=C||R?C-1:I,j=M<C?C:M,U=V?1:0,H=U+(C-G),z=Math.max(j-C,0),W=j-G,K=0===o?W:B-G,X=Math.max(K-W,0),Y=H+1+z,Z=Y+X,Q=z+X===0,$=new Uint8Array(H+(Q?0:1)+z+X);for(V&&($[0]=k),E=U,A=G;E<H;E++,A++)$[E]=S[A];for(Q||($[H]=x),E=H+1,A=C;E<Y;E++,A++)$[E]=S[A];for(E=Y;E<Z;E++)$[E]=w;return String.fromCharCode.apply(String,i($))},truncate_to_string:c,truncate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return parseFloat(c(e,t))},precisionConstants:a,ROUND:0,TRUNCATE:1,ROUND_UP:2,ROUND_DOWN:3,DECIMAL_PLACES:0,SIGNIFICANT_DIGITS:1,TICK_SIZE:2,NO_PADDING:0,PAD_WITH_ZERO:1}},function(e,t,r){"use strict";r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return a})),r.d(t,"g",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return c})),r.d(t,"d",(function(){return u})),r.d(t,"f",(function(){return d}));var i,n=r(15);!function(e){e.FORMAT_ERROR="FORMAT_ERROR",e.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",e.INVALID_CONFIG="INVALID_CONFIG",e.MISSING_DATA="MISSING_DATA",e.MISSING_TRANSLATION="MISSING_TRANSLATION"}(i||(i={}));var a=function(e){function t(r,i,n){var a=e.call(this,"[@formatjs/intl Error "+r+"] "+i+" \n"+(n?"\n"+n.message+"\n"+n.stack:""))||this;return a.code=r,"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(a,t),a}return Object(n.b)(t,e),t}(Error),s=function(e){function t(t,r){return e.call(this,i.UNSUPPORTED_FORMATTER,t,r)||this}return Object(n.b)(t,e),t}(a),o=function(e){function t(t,r){return e.call(this,i.INVALID_CONFIG,t,r)||this}return Object(n.b)(t,e),t}(a),c=function(e){function t(t,r){return e.call(this,i.MISSING_DATA,t,r)||this}return Object(n.b)(t,e),t}(a),u=function(e){function t(t,r,n,a){var s=e.call(this,i.FORMAT_ERROR,t+" \nLocale: "+r+"\nMessageID: "+(null===n||void 0===n?void 0:n.id)+"\nDefault Message: "+(null===n||void 0===n?void 0:n.defaultMessage)+"\nDescription: "+(null===n||void 0===n?void 0:n.description)+" \n",a)||this;return s.descriptor=n,s}return Object(n.b)(t,e),t}(a),d=function(e){function t(t,r){var n=e.call(this,i.MISSING_TRANSLATION,'Missing message: "'+t.id+'" for locale "'+r+'", using '+(t.defaultMessage?"default message":"id")+" as fallback.")||this;return n.descriptor=t,n}return Object(n.b)(t,e),t}(a)},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.create;function s(e,t){for(var r=0,i=t.length,n=e.length;r<i;r++,n++)e[n]=t[r];return e}Object.create},function(e,t,r){var i=r(187),n=r(188),a=r(73),s=r(189);e.exports=function(e,t){return i(e)||n(e,t)||a(e,t)||s()}},function(e,t,r){"use strict";var i,n;function a(e){return e.type===i.literal}function s(e){return e.type===i.argument}function o(e){return e.type===i.number}function c(e){return e.type===i.date}function u(e){return e.type===i.time}function d(e){return e.type===i.select}function h(e){return e.type===i.plural}function l(e){return e.type===i.pound}function f(e){return e.type===i.tag}function p(e){return!(!e||"object"!==typeof e||e.type!==n.number)}function v(e){return!(!e||"object"!==typeof e||e.type!==n.dateTime)}r.d(t,"b",(function(){return i})),r.d(t,"a",(function(){return n})),r.d(t,"f",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"g",(function(){return o})),r.d(t,"d",(function(){return c})),r.d(t,"m",(function(){return u})),r.d(t,"k",(function(){return d})),r.d(t,"i",(function(){return h})),r.d(t,"j",(function(){return l})),r.d(t,"l",(function(){return f})),r.d(t,"h",(function(){return p})),r.d(t,"e",(function(){return v})),function(e){e[e.literal=0]="literal",e[e.argument=1]="argument",e[e.number=2]="number",e[e.date=3]="date",e[e.time=4]="time",e[e.select=5]="select",e[e.plural=6]="plural",e[e.pound=7]="pound",e[e.tag=8]="tag"}(i||(i={})),function(e){e[e.number=0]="number",e[e.dateTime=1]="dateTime"}(n||(n={}))},function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"a",(function(){return u})),r.d(t,"c",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"e",(function(){return p}));var i=r(15),n=r(387),a=r(45),s=r.n(a),o=r(14);function c(e,t,r){return void 0===r&&(r={}),t.reduce((function(t,i){return i in e?t[i]=e[i]:i in r&&(t[i]=r[i]),t}),{})}var u={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},onError:function(e){0}};function d(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function h(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}var l=s.a||a;function f(e){void 0===e&&(e={dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}});var t=Intl.RelativeTimeFormat,r=Intl.ListFormat,a=Intl.DisplayNames,s=l((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Object(i.c)([void 0],t)))}),{cache:h(e.dateTime),strategy:l.strategies.variadic}),o=l((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Object(i.c)([void 0],t)))}),{cache:h(e.number),strategy:l.strategies.variadic}),c=l((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Object(i.c)([void 0],t)))}),{cache:h(e.pluralRules),strategy:l.strategies.variadic});return{getDateTimeFormat:s,getNumberFormat:o,getMessageFormat:l((function(e,t,r,a){return new n.a(e,t,r,Object(i.a)({formatters:{getNumberFormat:o,getDateTimeFormat:s,getPluralRules:c}},a||{}))}),{cache:h(e.message),strategy:l.strategies.variadic}),getRelativeTimeFormat:l((function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return new(t.bind.apply(t,Object(i.c)([void 0],e)))}),{cache:h(e.relativeTime),strategy:l.strategies.variadic}),getPluralRules:c,getListFormat:l((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(r.bind.apply(r,Object(i.c)([void 0],e)))}),{cache:h(e.list),strategy:l.strategies.variadic}),getDisplayNames:l((function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return new(a.bind.apply(a,Object(i.c)([void 0],e)))}),{cache:h(e.displayNames),strategy:l.strategies.variadic})}}function p(e,t,r,i){var n,a=e&&e[t];if(a&&(n=a[r]),n)return n;i(new o.g("No "+t+" format named: "+r))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(i){"object"===typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function s(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(r[i]=e[i]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(e);n<i.length;n++)t.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]])}return r}Object.create;function o(e,t){for(var r=0,i=t.length,n=e.length;r<i;r++,n++)e[n]=t[r];return e}Object.create},function(e,t,r){"use strict";(function(e){var i=r(193),n=r(194),a=r(75);function s(){return c.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(s()<t)throw new RangeError("Invalid typed array length");return c.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=c.prototype:(null===e&&(e=new c(t)),e.length=t),e}function c(e,t,r){if(!c.TYPED_ARRAY_SUPPORT&&!(this instanceof c))return new c(e,t,r);if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,r)}function u(e,t,r,i){if("number"===typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,i){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(i||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,r):new Uint8Array(t,r,i);c.TYPED_ARRAY_SUPPORT?(e=t).__proto__=c.prototype:e=l(e,t);return e}(e,t,r,i):"string"===typeof t?function(e,t,r){"string"===typeof r&&""!==r||(r="utf8");if(!c.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var i=0|p(t,r),n=(e=o(e,i)).write(t,r);n!==i&&(e=e.slice(0,n));return e}(e,t,r):function(e,t){if(c.isBuffer(t)){var r=0|f(t.length);return 0===(e=o(e,r)).length||t.copy(e,0,0,r),e}if(t){if("undefined"!==typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!==typeof t.length||(i=t.length)!==i?o(e,0):l(e,t);if("Buffer"===t.type&&a(t.data))return l(e,t.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function d(e){if("number"!==typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(d(t),e=o(e,t<0?0:0|f(t)),!c.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function l(e,t){var r=t.length<0?0:0|f(t.length);e=o(e,r);for(var i=0;i<r;i+=1)e[i]=255&t[i];return e}function f(e){if(e>=s())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s().toString(16)+" bytes");return 0|e}function p(e,t){if(c.isBuffer(e))return e.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!==typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return G(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return j(e).length;default:if(i)return G(e).length;t=(""+t).toLowerCase(),i=!0}}function v(e,t,r){var i=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return E(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return I(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return T(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,r);default:if(i)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),i=!0}}function m(e,t,r){var i=e[t];e[t]=e[r],e[r]=i}function y(e,t,r,i,n){if(0===e.length)return-1;if("string"===typeof r?(i=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=n?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(n)return-1;r=e.length-1}else if(r<0){if(!n)return-1;r=0}if("string"===typeof t&&(t=c.from(t,i)),c.isBuffer(t))return 0===t.length?-1:g(e,t,r,i,n);if("number"===typeof t)return t&=255,c.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,i,n);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,i,n){var a,s=1,o=e.length,c=t.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(e.length<2||t.length<2)return-1;s=2,o/=2,c/=2,r/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(n){var d=-1;for(a=r;a<o;a++)if(u(e,a)===u(t,-1===d?0:a-d)){if(-1===d&&(d=a),a-d+1===c)return d*s}else-1!==d&&(a-=a-d),d=-1}else for(r+c>o&&(r=o-c),a=r;a>=0;a--){for(var h=!0,l=0;l<c;l++)if(u(e,a+l)!==u(t,l)){h=!1;break}if(h)return a}return-1}function b(e,t,r,i){r=Number(r)||0;var n=e.length-r;i?(i=Number(i))>n&&(i=n):i=n;var a=t.length;if(a%2!==0)throw new TypeError("Invalid hex string");i>a/2&&(i=a/2);for(var s=0;s<i;++s){var o=parseInt(t.substr(2*s,2),16);if(isNaN(o))return s;e[r+s]=o}return s}function k(e,t,r,i){return U(G(t,e.length-r),e,r,i)}function x(e,t,r,i){return U(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,i)}function w(e,t,r,i){return x(e,t,r,i)}function _(e,t,r,i){return U(j(t),e,r,i)}function O(e,t,r,i){return U(function(e,t){for(var r,i,n,a=[],s=0;s<e.length&&!((t-=2)<0);++s)i=(r=e.charCodeAt(s))>>8,n=r%256,a.push(n),a.push(i);return a}(t,e.length-r),e,r,i)}function T(e,t,r){return 0===t&&r===e.length?i.fromByteArray(e):i.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var i=[],n=t;n<r;){var a,s,o,c,u=e[n],d=null,h=u>239?4:u>223?3:u>191?2:1;if(n+h<=r)switch(h){case 1:u<128&&(d=u);break;case 2:128===(192&(a=e[n+1]))&&(c=(31&u)<<6|63&a)>127&&(d=c);break;case 3:a=e[n+1],s=e[n+2],128===(192&a)&&128===(192&s)&&(c=(15&u)<<12|(63&a)<<6|63&s)>2047&&(c<55296||c>57343)&&(d=c);break;case 4:a=e[n+1],s=e[n+2],o=e[n+3],128===(192&a)&&128===(192&s)&&128===(192&o)&&(c=(15&u)<<18|(63&a)<<12|(63&s)<<6|63&o)>65535&&c<1114112&&(d=c)}null===d?(d=65533,h=1):d>65535&&(d-=65536,i.push(d>>>10&1023|55296),d=56320|1023&d),i.push(d),n+=h}return function(e){var t=e.length;if(t<=C)return String.fromCharCode.apply(String,e);var r="",i=0;for(;i<t;)r+=String.fromCharCode.apply(String,e.slice(i,i+=C));return r}(i)}t.Buffer=c,t.SlowBuffer=function(e){+e!=e&&(e=0);return c.alloc(+e)},t.INSPECT_MAX_BYTES=50,c.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"===typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}(),t.kMaxLength=s(),c.poolSize=8192,c._augment=function(e){return e.__proto__=c.prototype,e},c.from=function(e,t,r){return u(null,e,t,r)},c.TYPED_ARRAY_SUPPORT&&(c.prototype.__proto__=Uint8Array.prototype,c.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&c[Symbol.species]===c&&Object.defineProperty(c,Symbol.species,{value:null,configurable:!0})),c.alloc=function(e,t,r){return function(e,t,r,i){return d(t),t<=0?o(e,t):void 0!==r?"string"===typeof i?o(e,t).fill(r,i):o(e,t).fill(r):o(e,t)}(null,e,t,r)},c.allocUnsafe=function(e){return h(null,e)},c.allocUnsafeSlow=function(e){return h(null,e)},c.isBuffer=function(e){return!(null==e||!e._isBuffer)},c.compare=function(e,t){if(!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!a(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var i=c.allocUnsafe(t),n=0;for(r=0;r<e.length;++r){var s=e[r];if(!c.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,n),n+=s.length}return i},c.byteLength=p,c.prototype._isBuffer=!0,c.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):v.apply(this,arguments)},c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},c.prototype.compare=function(e,t,r,i,n){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===i&&(i=0),void 0===n&&(n=this.length),t<0||r>e.length||i<0||n>this.length)throw new RangeError("out of range index");if(i>=n&&t>=r)return 0;if(i>=n)return-1;if(t>=r)return 1;if(this===e)return 0;for(var a=(n>>>=0)-(i>>>=0),s=(r>>>=0)-(t>>>=0),o=Math.min(a,s),u=this.slice(i,n),d=e.slice(t,r),h=0;h<o;++h)if(u[h]!==d[h]){a=u[h],s=d[h];break}return a<s?-1:s<a?1:0},c.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},c.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},c.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},c.prototype.write=function(e,t,r,i){if(void 0===t)i="utf8",r=this.length,t=0;else if(void 0===r&&"string"===typeof t)i=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===i&&(i="utf8")):(i=r,r=void 0)}var n=this.length-t;if((void 0===r||r>n)&&(r=n),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var a=!1;;)switch(i){case"hex":return b(this,e,t,r);case"utf8":case"utf-8":return k(this,e,t,r);case"ascii":return x(this,e,t,r);case"latin1":case"binary":return w(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,e,t,r);default:if(a)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),a=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function I(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(127&e[n]);return i}function M(e,t,r){var i="";r=Math.min(e.length,r);for(var n=t;n<r;++n)i+=String.fromCharCode(e[n]);return i}function E(e,t,r){var i=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>i)&&(r=i);for(var n="",a=t;a<r;++a)n+=N(e[a]);return n}function A(e,t,r){for(var i=e.slice(t,r),n="",a=0;a<i.length;a+=2)n+=String.fromCharCode(i[a]+256*i[a+1]);return n}function F(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,r,i,n,a){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>n||t<a)throw new RangeError('"value" argument is out of bounds');if(r+i>e.length)throw new RangeError("Index out of range")}function B(e,t,r,i){t<0&&(t=65535+t+1);for(var n=0,a=Math.min(e.length-r,2);n<a;++n)e[r+n]=(t&255<<8*(i?n:1-n))>>>8*(i?n:1-n)}function R(e,t,r,i){t<0&&(t=4294967295+t+1);for(var n=0,a=Math.min(e.length-r,4);n<a;++n)e[r+n]=t>>>8*(i?n:3-n)&255}function V(e,t,r,i,n,a){if(r+i>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function L(e,t,r,i,a){return a||V(e,0,r,4),n.write(e,t,r,i,23,4),r+4}function D(e,t,r,i,a){return a||V(e,0,r,8),n.write(e,t,r,i,52,8),r+8}c.prototype.slice=function(e,t){var r,i=this.length;if((e=~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),(t=void 0===t?i:~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),t<e&&(t=e),c.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=c.prototype;else{var n=t-e;r=new c(n,void 0);for(var a=0;a<n;++a)r[a]=this[a+e]}return r},c.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i},c.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var i=this[e+--t],n=1;t>0&&(n*=256);)i+=this[e+--t]*n;return i},c.prototype.readUInt8=function(e,t){return t||F(e,1,this.length),this[e]},c.prototype.readUInt16LE=function(e,t){return t||F(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUInt16BE=function(e,t){return t||F(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUInt32LE=function(e,t){return t||F(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUInt32BE=function(e,t){return t||F(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var i=this[e],n=1,a=0;++a<t&&(n*=256);)i+=this[e+a]*n;return i>=(n*=128)&&(i-=Math.pow(2,8*t)),i},c.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||F(e,t,this.length);for(var i=t,n=1,a=this[e+--i];i>0&&(n*=256);)a+=this[e+--i]*n;return a>=(n*=128)&&(a-=Math.pow(2,8*t)),a},c.prototype.readInt8=function(e,t){return t||F(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){t||F(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt16BE=function(e,t){t||F(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},c.prototype.readInt32LE=function(e,t){return t||F(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return t||F(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readFloatLE=function(e,t){return t||F(e,4,this.length),n.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return t||F(e,4,this.length),n.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return t||F(e,8,this.length),n.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return t||F(e,8,this.length),n.read(this,e,!1,52,8)},c.prototype.writeUIntLE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var n=1,a=0;for(this[t]=255&e;++a<r&&(n*=256);)this[t+a]=e/n&255;return t+r},c.prototype.writeUIntBE=function(e,t,r,i){(e=+e,t|=0,r|=0,i)||P(this,e,t,r,Math.pow(2,8*r)-1,0);var n=r-1,a=1;for(this[t+n]=255&e;--n>=0&&(a*=256);)this[t+n]=e/a&255;return t+r},c.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,255,0),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},c.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,65535,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},c.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,4294967295,0),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeIntLE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var a=0,s=1,o=0;for(this[t]=255&e;++a<r&&(s*=256);)e<0&&0===o&&0!==this[t+a-1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},c.prototype.writeIntBE=function(e,t,r,i){if(e=+e,t|=0,!i){var n=Math.pow(2,8*r-1);P(this,e,t,r,n-1,-n)}var a=r-1,s=1,o=0;for(this[t+a]=255&e;--a>=0&&(s*=256);)e<0&&0===o&&0!==this[t+a+1]&&(o=1),this[t+a]=(e/s>>0)-o&255;return t+r},c.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,1,127,-128),c.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):B(this,e,t,!0),t+2},c.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,2,32767,-32768),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):B(this,e,t,!1),t+2},c.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),c.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},c.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),c.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},c.prototype.writeFloatLE=function(e,t,r){return L(this,e,t,!0,r)},c.prototype.writeFloatBE=function(e,t,r){return L(this,e,t,!1,r)},c.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},c.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},c.prototype.copy=function(e,t,r,i){if(r||(r=0),i||0===i||(i=this.length),t>=e.length&&(t=e.length),t||(t=0),i>0&&i<r&&(i=r),i===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var n,a=i-r;if(this===e&&r<t&&t<i)for(n=a-1;n>=0;--n)e[n+t]=this[n+r];else if(a<1e3||!c.TYPED_ARRAY_SUPPORT)for(n=0;n<a;++n)e[n+t]=this[n+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+a),t);return a},c.prototype.fill=function(e,t,r,i){if("string"===typeof e){if("string"===typeof t?(i=t,t=0,r=this.length):"string"===typeof r&&(i=r,r=this.length),1===e.length){var n=e.charCodeAt(0);n<256&&(e=n)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!c.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var a;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"===typeof e)for(a=t;a<r;++a)this[a]=e;else{var s=c.isBuffer(e)?e:G(new c(e,i).toString()),o=s.length;for(a=0;a<r-t;++a)this[a+t]=s[a%o]}return this};var q=/[^+\/0-9A-Za-z-_]/g;function N(e){return e<16?"0"+e.toString(16):e.toString(16)}function G(e,t){var r;t=t||1/0;for(var i=e.length,n=null,a=[],s=0;s<i;++s){if((r=e.charCodeAt(s))>55295&&r<57344){if(!n){if(r>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(s+1===i){(t-=3)>-1&&a.push(239,191,189);continue}n=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),n=r;continue}r=65536+(n-55296<<10|r-56320)}else n&&(t-=3)>-1&&a.push(239,191,189);if(n=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return a}function j(e){return i.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(q,"")).length<2)return"";for(;e.length%4!==0;)e+="=";return e}(e))}function U(e,t,r,i){for(var n=0;n<i&&!(n+r>=t.length||n>=e.length);++n)t[n+r]=e[n];return n}}).call(this,r(19))},function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a})),r.d(t,"c",(function(){return s}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var a=function(){return(a=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.create;function s(e,t){for(var r=0,i=t.length,n=e.length;r<i;r++,n++)e[n]=t[r];return e}Object.create},function(e,t){var r,i,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"===typeof setTimeout?setTimeout:a}catch(e){r=a}try{i="function"===typeof clearTimeout?clearTimeout:s}catch(e){i=s}}();var c,u=[],d=!1,h=-1;function l(){d&&c&&(d=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!d){var e=o(l);d=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new p(e,t)),1!==u.length||d||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=v,n.addListener=v,n.once=v,n.off=v,n.removeListener=v,n.removeAllListeners=v,n.emit=v,n.prependListener=v,n.prependOnceListener=v,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},function(e,t,r){(function(e){!function(e,t){"use strict";function i(e,t){if(!e)throw new Error(t||"Assertion failed")}function n(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}function a(e,t,r){if(a.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(r=t,t=10),this._init(e||0,t||10,r||"be"))}var s;"object"===typeof e?e.exports=a:t.BN=a,a.BN=a,a.wordSize=26;try{s=r(21).Buffer}catch(S){}function o(e,t,r){for(var n=0,a=Math.min(e.length,r),s=0,o=t;o<a;o++){var c,u=e.charCodeAt(o)-48;n<<=4,n|=c=u>=49&&u<=54?u-49+10:u>=17&&u<=22?u-17+10:u,s|=c}return i(!(240&s),"Invalid character in "+e),n}function c(e,t,r,n){for(var a=0,s=0,o=Math.min(e.length,r),c=t;c<o;c++){var u=e.charCodeAt(c)-48;a*=n,s=u>=49?u-49+10:u>=17?u-17+10:u,i(u>=0&&s<n,"Invalid character"),a+=s}return a}function u(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}a.isBN=function(e){return e instanceof a||null!==e&&"object"===typeof e&&e.constructor.wordSize===a.wordSize&&Array.isArray(e.words)},a.max=function(e,t){return e.cmp(t)>0?e:t},a.min=function(e,t){return e.cmp(t)<0?e:t},a.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),i(t===(0|t)&&t>=2&&t<=36);var n=0;"-"===(e=e.toString().replace(/\s+/g,""))[0]&&n++,16===t?this._parseHex(e,n):this._parseBase(e,t,n),"-"===e[0]&&(this.negative=1),this._strip(),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(i(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},a.prototype._initArray=function(e,t,r){if(i("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var a,s,o=0;if("be"===r)for(n=e.length-1,a=0;n>=0;n-=3)s=e[n]|e[n-1]<<8|e[n-2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);else if("le"===r)for(n=0,a=0;n<e.length;n+=3)s=e[n]|e[n+1]<<8|e[n+2]<<16,this.words[a]|=s<<o&67108863,this.words[a+1]=s>>>26-o&67108863,(o+=24)>=26&&(o-=26,a++);return this._strip()},a.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var i,n,a=0;for(r=e.length-6,i=0;r>=t;r-=6)n=o(e,r,r+6),this.words[i]|=n<<a&67108863,this.words[i+1]|=n>>>26-a&4194303,(a+=24)>=26&&(a-=26,i++);r+6!==t&&(n=o(e,t,r+6),this.words[i]|=n<<a&67108863,this.words[i+1]|=n>>>26-a&4194303),this._strip()},a.prototype._parseBase=function(e,t,r){this.words=[0],this.length=1;for(var i=0,n=1;n<=67108863;n*=t)i++;i--,n=n/t|0;for(var a=e.length-r,s=a%i,o=Math.min(a,a-s)+r,u=0,d=r;d<o;d+=i)u=c(e,d,d+i,t),this.imuln(n),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var h=1;for(u=c(e,d,e.length,t),d=0;d<s;d++)h*=t;this.imuln(h),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},a.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype._move=function(e){e.words=this.words,e.length=this.length,e.negative=this.negative,e.red=this.red},a.prototype.clone=function(){var e=new a(null);return this.copy(e),e},a.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},a.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},a.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!==typeof Symbol&&"function"===typeof Symbol.for?a.prototype[Symbol.for("nodejs.util.inspect.custom")]=u:a.prototype.inspect=u;var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],h=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],l=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];a.prototype.toString=function(e,t){var r;if(t=0|t||1,16===(e=e||10)||"hex"===e){r="";for(var n=0,a=0,s=0;s<this.length;s++){var o=this.words[s],c=(16777215&(o<<n|a)).toString(16);r=0!==(a=o>>>24-n&16777215)||s!==this.length-1?d[6-c.length]+c+r:c+r,(n+=2)>=26&&(n-=26,s--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=h[e],f=l[e];r="";var p=this.clone();for(p.negative=0;!p.isZero();){var v=p.modrn(f).toString(e);r=(p=p.idivn(f)).isZero()?v+r:d[u-v.length]+v+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}i(!1,"Base should be between 2 and 36")},a.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},a.prototype.toJSON=function(){return this.toString(16,2)},s&&(a.prototype.toBuffer=function(e,t){return this.toArrayLike(s,e,t)}),a.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)};function f(e,t,r){r.negative=t.negative^e.negative;var i=e.length+t.length|0;r.length=i,i=i-1|0;var n=0|e.words[0],a=0|t.words[0],s=n*a,o=67108863&s,c=s/67108864|0;r.words[0]=o;for(var u=1;u<i;u++){for(var d=c>>>26,h=67108863&c,l=Math.min(u,t.length-1),f=Math.max(0,u-e.length+1);f<=l;f++){var p=u-f|0;d+=(s=(n=0|e.words[p])*(a=0|t.words[f])+h)/67108864|0,h=67108863&s}r.words[u]=0|h,c=0|d}return 0!==c?r.words[u]=0|c:r.length--,r._strip()}a.prototype.toArrayLike=function(e,t,r){this._strip();var n=this.byteLength(),a=r||Math.max(1,n);i(n<=a,"byte array longer than desired length"),i(a>0,"Requested array length <= 0");var s=function(e,t){return e.allocUnsafe?e.allocUnsafe(t):new e(t)}(e,a);return this["_toArrayLike"+("le"===t?"LE":"BE")](s,n),s},a.prototype._toArrayLikeLE=function(e,t){for(var r=0,i=0,n=0,a=0;n<this.length;n++){var s=this.words[n]<<a|i;e[r++]=255&s,r<e.length&&(e[r++]=s>>8&255),r<e.length&&(e[r++]=s>>16&255),6===a?(r<e.length&&(e[r++]=s>>24&255),i=0,a=0):(i=s>>>24,a+=2)}if(r<e.length)for(e[r++]=i;r<e.length;)e[r++]=0},a.prototype._toArrayLikeBE=function(e,t){for(var r=e.length-1,i=0,n=0,a=0;n<this.length;n++){var s=this.words[n]<<a|i;e[r--]=255&s,r>=0&&(e[r--]=s>>8&255),r>=0&&(e[r--]=s>>16&255),6===a?(r>=0&&(e[r--]=s>>24&255),i=0,a=0):(i=s>>>24,a+=2)}if(r>=0)for(e[r--]=i;r>=0;)e[r--]=0},Math.clz32?a.prototype._countBits=function(e){return 32-Math.clz32(e)}:a.prototype._countBits=function(e){var t=e,r=0;return t>=4096&&(r+=13,t>>>=13),t>=64&&(r+=7,t>>>=7),t>=8&&(r+=4,t>>>=4),t>=2&&(r+=2,t>>>=2),r+t},a.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,r=0;return 0===(8191&t)&&(r+=13,t>>>=13),0===(127&t)&&(r+=7,t>>>=7),0===(15&t)&&(r+=4,t>>>=4),0===(3&t)&&(r+=2,t>>>=2),0===(1&t)&&r++,r},a.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},a.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var r=this._zeroBits(this.words[t]);if(e+=r,26!==r)break}return e},a.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},a.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},a.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},a.prototype.isNeg=function(){return 0!==this.negative},a.prototype.neg=function(){return this.clone().ineg()},a.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},a.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this._strip()},a.prototype.ior=function(e){return i(0===(this.negative|e.negative)),this.iuor(e)},a.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},a.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},a.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var r=0;r<t.length;r++)this.words[r]=this.words[r]&e.words[r];return this.length=t.length,this._strip()},a.prototype.iand=function(e){return i(0===(this.negative|e.negative)),this.iuand(e)},a.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},a.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},a.prototype.iuxor=function(e){var t,r;this.length>e.length?(t=this,r=e):(t=e,r=this);for(var i=0;i<r.length;i++)this.words[i]=t.words[i]^r.words[i];if(this!==t)for(;i<t.length;i++)this.words[i]=t.words[i];return this.length=t.length,this._strip()},a.prototype.ixor=function(e){return i(0===(this.negative|e.negative)),this.iuxor(e)},a.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},a.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},a.prototype.inotn=function(e){i("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var n=0;n<t;n++)this.words[n]=67108863&~this.words[n];return r>0&&(this.words[n]=~this.words[n]&67108863>>26-r),this._strip()},a.prototype.notn=function(e){return this.clone().inotn(e)},a.prototype.setn=function(e,t){i("number"===typeof e&&e>=0);var r=e/26|0,n=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<n:this.words[r]&~(1<<n),this._strip()},a.prototype.iadd=function(e){var t,r,i;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();this.length>e.length?(r=this,i=e):(r=e,i=this);for(var n=0,a=0;a<i.length;a++)t=(0|r.words[a])+(0|i.words[a])+n,this.words[a]=67108863&t,n=t>>>26;for(;0!==n&&a<r.length;a++)t=(0|r.words[a])+n,this.words[a]=67108863&t,n=t>>>26;if(this.length=r.length,0!==n)this.words[this.length]=n,this.length++;else if(r!==this)for(;a<r.length;a++)this.words[a]=r.words[a];return this},a.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},a.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var r,i,n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(r=this,i=e):(r=e,i=this);for(var a=0,s=0;s<i.length;s++)a=(t=(0|r.words[s])-(0|i.words[s])+a)>>26,this.words[s]=67108863&t;for(;0!==a&&s<r.length;s++)a=(t=(0|r.words[s])+a)>>26,this.words[s]=67108863&t;if(0===a&&s<r.length&&r!==this)for(;s<r.length;s++)this.words[s]=r.words[s];return this.length=Math.max(this.length,s),r!==this&&(this.negative=1),this._strip()},a.prototype.sub=function(e){return this.clone().isub(e)};var p=function(e,t,r){var i,n,a,s=e.words,o=t.words,c=r.words,u=0,d=0|s[0],h=8191&d,l=d>>>13,f=0|s[1],p=8191&f,v=f>>>13,m=0|s[2],y=8191&m,g=m>>>13,b=0|s[3],k=8191&b,x=b>>>13,w=0|s[4],_=8191&w,O=w>>>13,T=0|s[5],S=8191&T,C=T>>>13,I=0|s[6],M=8191&I,E=I>>>13,A=0|s[7],F=8191&A,P=A>>>13,B=0|s[8],R=8191&B,V=B>>>13,L=0|s[9],D=8191&L,q=L>>>13,N=0|o[0],G=8191&N,j=N>>>13,U=0|o[1],H=8191&U,z=U>>>13,W=0|o[2],K=8191&W,X=W>>>13,Y=0|o[3],Z=8191&Y,Q=Y>>>13,$=0|o[4],J=8191&$,ee=$>>>13,te=0|o[5],re=8191&te,ie=te>>>13,ne=0|o[6],ae=8191&ne,se=ne>>>13,oe=0|o[7],ce=8191&oe,ue=oe>>>13,de=0|o[8],he=8191&de,le=de>>>13,fe=0|o[9],pe=8191&fe,ve=fe>>>13;r.negative=e.negative^t.negative,r.length=19;var me=(u+(i=Math.imul(h,G))|0)+((8191&(n=(n=Math.imul(h,j))+Math.imul(l,G)|0))<<13)|0;u=((a=Math.imul(l,j))+(n>>>13)|0)+(me>>>26)|0,me&=67108863,i=Math.imul(p,G),n=(n=Math.imul(p,j))+Math.imul(v,G)|0,a=Math.imul(v,j);var ye=(u+(i=i+Math.imul(h,H)|0)|0)+((8191&(n=(n=n+Math.imul(h,z)|0)+Math.imul(l,H)|0))<<13)|0;u=((a=a+Math.imul(l,z)|0)+(n>>>13)|0)+(ye>>>26)|0,ye&=67108863,i=Math.imul(y,G),n=(n=Math.imul(y,j))+Math.imul(g,G)|0,a=Math.imul(g,j),i=i+Math.imul(p,H)|0,n=(n=n+Math.imul(p,z)|0)+Math.imul(v,H)|0,a=a+Math.imul(v,z)|0;var ge=(u+(i=i+Math.imul(h,K)|0)|0)+((8191&(n=(n=n+Math.imul(h,X)|0)+Math.imul(l,K)|0))<<13)|0;u=((a=a+Math.imul(l,X)|0)+(n>>>13)|0)+(ge>>>26)|0,ge&=67108863,i=Math.imul(k,G),n=(n=Math.imul(k,j))+Math.imul(x,G)|0,a=Math.imul(x,j),i=i+Math.imul(y,H)|0,n=(n=n+Math.imul(y,z)|0)+Math.imul(g,H)|0,a=a+Math.imul(g,z)|0,i=i+Math.imul(p,K)|0,n=(n=n+Math.imul(p,X)|0)+Math.imul(v,K)|0,a=a+Math.imul(v,X)|0;var be=(u+(i=i+Math.imul(h,Z)|0)|0)+((8191&(n=(n=n+Math.imul(h,Q)|0)+Math.imul(l,Z)|0))<<13)|0;u=((a=a+Math.imul(l,Q)|0)+(n>>>13)|0)+(be>>>26)|0,be&=67108863,i=Math.imul(_,G),n=(n=Math.imul(_,j))+Math.imul(O,G)|0,a=Math.imul(O,j),i=i+Math.imul(k,H)|0,n=(n=n+Math.imul(k,z)|0)+Math.imul(x,H)|0,a=a+Math.imul(x,z)|0,i=i+Math.imul(y,K)|0,n=(n=n+Math.imul(y,X)|0)+Math.imul(g,K)|0,a=a+Math.imul(g,X)|0,i=i+Math.imul(p,Z)|0,n=(n=n+Math.imul(p,Q)|0)+Math.imul(v,Z)|0,a=a+Math.imul(v,Q)|0;var ke=(u+(i=i+Math.imul(h,J)|0)|0)+((8191&(n=(n=n+Math.imul(h,ee)|0)+Math.imul(l,J)|0))<<13)|0;u=((a=a+Math.imul(l,ee)|0)+(n>>>13)|0)+(ke>>>26)|0,ke&=67108863,i=Math.imul(S,G),n=(n=Math.imul(S,j))+Math.imul(C,G)|0,a=Math.imul(C,j),i=i+Math.imul(_,H)|0,n=(n=n+Math.imul(_,z)|0)+Math.imul(O,H)|0,a=a+Math.imul(O,z)|0,i=i+Math.imul(k,K)|0,n=(n=n+Math.imul(k,X)|0)+Math.imul(x,K)|0,a=a+Math.imul(x,X)|0,i=i+Math.imul(y,Z)|0,n=(n=n+Math.imul(y,Q)|0)+Math.imul(g,Z)|0,a=a+Math.imul(g,Q)|0,i=i+Math.imul(p,J)|0,n=(n=n+Math.imul(p,ee)|0)+Math.imul(v,J)|0,a=a+Math.imul(v,ee)|0;var xe=(u+(i=i+Math.imul(h,re)|0)|0)+((8191&(n=(n=n+Math.imul(h,ie)|0)+Math.imul(l,re)|0))<<13)|0;u=((a=a+Math.imul(l,ie)|0)+(n>>>13)|0)+(xe>>>26)|0,xe&=67108863,i=Math.imul(M,G),n=(n=Math.imul(M,j))+Math.imul(E,G)|0,a=Math.imul(E,j),i=i+Math.imul(S,H)|0,n=(n=n+Math.imul(S,z)|0)+Math.imul(C,H)|0,a=a+Math.imul(C,z)|0,i=i+Math.imul(_,K)|0,n=(n=n+Math.imul(_,X)|0)+Math.imul(O,K)|0,a=a+Math.imul(O,X)|0,i=i+Math.imul(k,Z)|0,n=(n=n+Math.imul(k,Q)|0)+Math.imul(x,Z)|0,a=a+Math.imul(x,Q)|0,i=i+Math.imul(y,J)|0,n=(n=n+Math.imul(y,ee)|0)+Math.imul(g,J)|0,a=a+Math.imul(g,ee)|0,i=i+Math.imul(p,re)|0,n=(n=n+Math.imul(p,ie)|0)+Math.imul(v,re)|0,a=a+Math.imul(v,ie)|0;var we=(u+(i=i+Math.imul(h,ae)|0)|0)+((8191&(n=(n=n+Math.imul(h,se)|0)+Math.imul(l,ae)|0))<<13)|0;u=((a=a+Math.imul(l,se)|0)+(n>>>13)|0)+(we>>>26)|0,we&=67108863,i=Math.imul(F,G),n=(n=Math.imul(F,j))+Math.imul(P,G)|0,a=Math.imul(P,j),i=i+Math.imul(M,H)|0,n=(n=n+Math.imul(M,z)|0)+Math.imul(E,H)|0,a=a+Math.imul(E,z)|0,i=i+Math.imul(S,K)|0,n=(n=n+Math.imul(S,X)|0)+Math.imul(C,K)|0,a=a+Math.imul(C,X)|0,i=i+Math.imul(_,Z)|0,n=(n=n+Math.imul(_,Q)|0)+Math.imul(O,Z)|0,a=a+Math.imul(O,Q)|0,i=i+Math.imul(k,J)|0,n=(n=n+Math.imul(k,ee)|0)+Math.imul(x,J)|0,a=a+Math.imul(x,ee)|0,i=i+Math.imul(y,re)|0,n=(n=n+Math.imul(y,ie)|0)+Math.imul(g,re)|0,a=a+Math.imul(g,ie)|0,i=i+Math.imul(p,ae)|0,n=(n=n+Math.imul(p,se)|0)+Math.imul(v,ae)|0,a=a+Math.imul(v,se)|0;var _e=(u+(i=i+Math.imul(h,ce)|0)|0)+((8191&(n=(n=n+Math.imul(h,ue)|0)+Math.imul(l,ce)|0))<<13)|0;u=((a=a+Math.imul(l,ue)|0)+(n>>>13)|0)+(_e>>>26)|0,_e&=67108863,i=Math.imul(R,G),n=(n=Math.imul(R,j))+Math.imul(V,G)|0,a=Math.imul(V,j),i=i+Math.imul(F,H)|0,n=(n=n+Math.imul(F,z)|0)+Math.imul(P,H)|0,a=a+Math.imul(P,z)|0,i=i+Math.imul(M,K)|0,n=(n=n+Math.imul(M,X)|0)+Math.imul(E,K)|0,a=a+Math.imul(E,X)|0,i=i+Math.imul(S,Z)|0,n=(n=n+Math.imul(S,Q)|0)+Math.imul(C,Z)|0,a=a+Math.imul(C,Q)|0,i=i+Math.imul(_,J)|0,n=(n=n+Math.imul(_,ee)|0)+Math.imul(O,J)|0,a=a+Math.imul(O,ee)|0,i=i+Math.imul(k,re)|0,n=(n=n+Math.imul(k,ie)|0)+Math.imul(x,re)|0,a=a+Math.imul(x,ie)|0,i=i+Math.imul(y,ae)|0,n=(n=n+Math.imul(y,se)|0)+Math.imul(g,ae)|0,a=a+Math.imul(g,se)|0,i=i+Math.imul(p,ce)|0,n=(n=n+Math.imul(p,ue)|0)+Math.imul(v,ce)|0,a=a+Math.imul(v,ue)|0;var Oe=(u+(i=i+Math.imul(h,he)|0)|0)+((8191&(n=(n=n+Math.imul(h,le)|0)+Math.imul(l,he)|0))<<13)|0;u=((a=a+Math.imul(l,le)|0)+(n>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,i=Math.imul(D,G),n=(n=Math.imul(D,j))+Math.imul(q,G)|0,a=Math.imul(q,j),i=i+Math.imul(R,H)|0,n=(n=n+Math.imul(R,z)|0)+Math.imul(V,H)|0,a=a+Math.imul(V,z)|0,i=i+Math.imul(F,K)|0,n=(n=n+Math.imul(F,X)|0)+Math.imul(P,K)|0,a=a+Math.imul(P,X)|0,i=i+Math.imul(M,Z)|0,n=(n=n+Math.imul(M,Q)|0)+Math.imul(E,Z)|0,a=a+Math.imul(E,Q)|0,i=i+Math.imul(S,J)|0,n=(n=n+Math.imul(S,ee)|0)+Math.imul(C,J)|0,a=a+Math.imul(C,ee)|0,i=i+Math.imul(_,re)|0,n=(n=n+Math.imul(_,ie)|0)+Math.imul(O,re)|0,a=a+Math.imul(O,ie)|0,i=i+Math.imul(k,ae)|0,n=(n=n+Math.imul(k,se)|0)+Math.imul(x,ae)|0,a=a+Math.imul(x,se)|0,i=i+Math.imul(y,ce)|0,n=(n=n+Math.imul(y,ue)|0)+Math.imul(g,ce)|0,a=a+Math.imul(g,ue)|0,i=i+Math.imul(p,he)|0,n=(n=n+Math.imul(p,le)|0)+Math.imul(v,he)|0,a=a+Math.imul(v,le)|0;var Te=(u+(i=i+Math.imul(h,pe)|0)|0)+((8191&(n=(n=n+Math.imul(h,ve)|0)+Math.imul(l,pe)|0))<<13)|0;u=((a=a+Math.imul(l,ve)|0)+(n>>>13)|0)+(Te>>>26)|0,Te&=67108863,i=Math.imul(D,H),n=(n=Math.imul(D,z))+Math.imul(q,H)|0,a=Math.imul(q,z),i=i+Math.imul(R,K)|0,n=(n=n+Math.imul(R,X)|0)+Math.imul(V,K)|0,a=a+Math.imul(V,X)|0,i=i+Math.imul(F,Z)|0,n=(n=n+Math.imul(F,Q)|0)+Math.imul(P,Z)|0,a=a+Math.imul(P,Q)|0,i=i+Math.imul(M,J)|0,n=(n=n+Math.imul(M,ee)|0)+Math.imul(E,J)|0,a=a+Math.imul(E,ee)|0,i=i+Math.imul(S,re)|0,n=(n=n+Math.imul(S,ie)|0)+Math.imul(C,re)|0,a=a+Math.imul(C,ie)|0,i=i+Math.imul(_,ae)|0,n=(n=n+Math.imul(_,se)|0)+Math.imul(O,ae)|0,a=a+Math.imul(O,se)|0,i=i+Math.imul(k,ce)|0,n=(n=n+Math.imul(k,ue)|0)+Math.imul(x,ce)|0,a=a+Math.imul(x,ue)|0,i=i+Math.imul(y,he)|0,n=(n=n+Math.imul(y,le)|0)+Math.imul(g,he)|0,a=a+Math.imul(g,le)|0;var Se=(u+(i=i+Math.imul(p,pe)|0)|0)+((8191&(n=(n=n+Math.imul(p,ve)|0)+Math.imul(v,pe)|0))<<13)|0;u=((a=a+Math.imul(v,ve)|0)+(n>>>13)|0)+(Se>>>26)|0,Se&=67108863,i=Math.imul(D,K),n=(n=Math.imul(D,X))+Math.imul(q,K)|0,a=Math.imul(q,X),i=i+Math.imul(R,Z)|0,n=(n=n+Math.imul(R,Q)|0)+Math.imul(V,Z)|0,a=a+Math.imul(V,Q)|0,i=i+Math.imul(F,J)|0,n=(n=n+Math.imul(F,ee)|0)+Math.imul(P,J)|0,a=a+Math.imul(P,ee)|0,i=i+Math.imul(M,re)|0,n=(n=n+Math.imul(M,ie)|0)+Math.imul(E,re)|0,a=a+Math.imul(E,ie)|0,i=i+Math.imul(S,ae)|0,n=(n=n+Math.imul(S,se)|0)+Math.imul(C,ae)|0,a=a+Math.imul(C,se)|0,i=i+Math.imul(_,ce)|0,n=(n=n+Math.imul(_,ue)|0)+Math.imul(O,ce)|0,a=a+Math.imul(O,ue)|0,i=i+Math.imul(k,he)|0,n=(n=n+Math.imul(k,le)|0)+Math.imul(x,he)|0,a=a+Math.imul(x,le)|0;var Ce=(u+(i=i+Math.imul(y,pe)|0)|0)+((8191&(n=(n=n+Math.imul(y,ve)|0)+Math.imul(g,pe)|0))<<13)|0;u=((a=a+Math.imul(g,ve)|0)+(n>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,i=Math.imul(D,Z),n=(n=Math.imul(D,Q))+Math.imul(q,Z)|0,a=Math.imul(q,Q),i=i+Math.imul(R,J)|0,n=(n=n+Math.imul(R,ee)|0)+Math.imul(V,J)|0,a=a+Math.imul(V,ee)|0,i=i+Math.imul(F,re)|0,n=(n=n+Math.imul(F,ie)|0)+Math.imul(P,re)|0,a=a+Math.imul(P,ie)|0,i=i+Math.imul(M,ae)|0,n=(n=n+Math.imul(M,se)|0)+Math.imul(E,ae)|0,a=a+Math.imul(E,se)|0,i=i+Math.imul(S,ce)|0,n=(n=n+Math.imul(S,ue)|0)+Math.imul(C,ce)|0,a=a+Math.imul(C,ue)|0,i=i+Math.imul(_,he)|0,n=(n=n+Math.imul(_,le)|0)+Math.imul(O,he)|0,a=a+Math.imul(O,le)|0;var Ie=(u+(i=i+Math.imul(k,pe)|0)|0)+((8191&(n=(n=n+Math.imul(k,ve)|0)+Math.imul(x,pe)|0))<<13)|0;u=((a=a+Math.imul(x,ve)|0)+(n>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,i=Math.imul(D,J),n=(n=Math.imul(D,ee))+Math.imul(q,J)|0,a=Math.imul(q,ee),i=i+Math.imul(R,re)|0,n=(n=n+Math.imul(R,ie)|0)+Math.imul(V,re)|0,a=a+Math.imul(V,ie)|0,i=i+Math.imul(F,ae)|0,n=(n=n+Math.imul(F,se)|0)+Math.imul(P,ae)|0,a=a+Math.imul(P,se)|0,i=i+Math.imul(M,ce)|0,n=(n=n+Math.imul(M,ue)|0)+Math.imul(E,ce)|0,a=a+Math.imul(E,ue)|0,i=i+Math.imul(S,he)|0,n=(n=n+Math.imul(S,le)|0)+Math.imul(C,he)|0,a=a+Math.imul(C,le)|0;var Me=(u+(i=i+Math.imul(_,pe)|0)|0)+((8191&(n=(n=n+Math.imul(_,ve)|0)+Math.imul(O,pe)|0))<<13)|0;u=((a=a+Math.imul(O,ve)|0)+(n>>>13)|0)+(Me>>>26)|0,Me&=67108863,i=Math.imul(D,re),n=(n=Math.imul(D,ie))+Math.imul(q,re)|0,a=Math.imul(q,ie),i=i+Math.imul(R,ae)|0,n=(n=n+Math.imul(R,se)|0)+Math.imul(V,ae)|0,a=a+Math.imul(V,se)|0,i=i+Math.imul(F,ce)|0,n=(n=n+Math.imul(F,ue)|0)+Math.imul(P,ce)|0,a=a+Math.imul(P,ue)|0,i=i+Math.imul(M,he)|0,n=(n=n+Math.imul(M,le)|0)+Math.imul(E,he)|0,a=a+Math.imul(E,le)|0;var Ee=(u+(i=i+Math.imul(S,pe)|0)|0)+((8191&(n=(n=n+Math.imul(S,ve)|0)+Math.imul(C,pe)|0))<<13)|0;u=((a=a+Math.imul(C,ve)|0)+(n>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,i=Math.imul(D,ae),n=(n=Math.imul(D,se))+Math.imul(q,ae)|0,a=Math.imul(q,se),i=i+Math.imul(R,ce)|0,n=(n=n+Math.imul(R,ue)|0)+Math.imul(V,ce)|0,a=a+Math.imul(V,ue)|0,i=i+Math.imul(F,he)|0,n=(n=n+Math.imul(F,le)|0)+Math.imul(P,he)|0,a=a+Math.imul(P,le)|0;var Ae=(u+(i=i+Math.imul(M,pe)|0)|0)+((8191&(n=(n=n+Math.imul(M,ve)|0)+Math.imul(E,pe)|0))<<13)|0;u=((a=a+Math.imul(E,ve)|0)+(n>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,i=Math.imul(D,ce),n=(n=Math.imul(D,ue))+Math.imul(q,ce)|0,a=Math.imul(q,ue),i=i+Math.imul(R,he)|0,n=(n=n+Math.imul(R,le)|0)+Math.imul(V,he)|0,a=a+Math.imul(V,le)|0;var Fe=(u+(i=i+Math.imul(F,pe)|0)|0)+((8191&(n=(n=n+Math.imul(F,ve)|0)+Math.imul(P,pe)|0))<<13)|0;u=((a=a+Math.imul(P,ve)|0)+(n>>>13)|0)+(Fe>>>26)|0,Fe&=67108863,i=Math.imul(D,he),n=(n=Math.imul(D,le))+Math.imul(q,he)|0,a=Math.imul(q,le);var Pe=(u+(i=i+Math.imul(R,pe)|0)|0)+((8191&(n=(n=n+Math.imul(R,ve)|0)+Math.imul(V,pe)|0))<<13)|0;u=((a=a+Math.imul(V,ve)|0)+(n>>>13)|0)+(Pe>>>26)|0,Pe&=67108863;var Be=(u+(i=Math.imul(D,pe))|0)+((8191&(n=(n=Math.imul(D,ve))+Math.imul(q,pe)|0))<<13)|0;return u=((a=Math.imul(q,ve))+(n>>>13)|0)+(Be>>>26)|0,Be&=67108863,c[0]=me,c[1]=ye,c[2]=ge,c[3]=be,c[4]=ke,c[5]=xe,c[6]=we,c[7]=_e,c[8]=Oe,c[9]=Te,c[10]=Se,c[11]=Ce,c[12]=Ie,c[13]=Me,c[14]=Ee,c[15]=Ae,c[16]=Fe,c[17]=Pe,c[18]=Be,0!==u&&(c[19]=u,r.length++),r};function v(e,t,r){r.negative=t.negative^e.negative,r.length=e.length+t.length;for(var i=0,n=0,a=0;a<r.length-1;a++){var s=n;n=0;for(var o=67108863&i,c=Math.min(a,t.length-1),u=Math.max(0,a-e.length+1);u<=c;u++){var d=a-u,h=(0|e.words[d])*(0|t.words[u]),l=67108863&h;o=67108863&(l=l+o|0),n+=(s=(s=s+(h/67108864|0)|0)+(l>>>26)|0)>>>26,s&=67108863}r.words[a]=o,i=s,s=n}return 0!==i?r.words[a]=i:r.length--,r._strip()}function m(e,t,r){return v(e,t,r)}function y(e,t){this.x=e,this.y=t}Math.imul||(p=f),a.prototype.mulTo=function(e,t){var r=this.length+e.length;return 10===this.length&&10===e.length?p(this,e,t):r<63?f(this,e,t):r<1024?v(this,e,t):m(this,e,t)},y.prototype.makeRBT=function(e){for(var t=new Array(e),r=a.prototype._countBits(e)-1,i=0;i<e;i++)t[i]=this.revBin(i,r,e);return t},y.prototype.revBin=function(e,t,r){if(0===e||e===r-1)return e;for(var i=0,n=0;n<t;n++)i|=(1&e)<<t-n-1,e>>=1;return i},y.prototype.permute=function(e,t,r,i,n,a){for(var s=0;s<a;s++)i[s]=t[e[s]],n[s]=r[e[s]]},y.prototype.transform=function(e,t,r,i,n,a){this.permute(a,e,t,r,i,n);for(var s=1;s<n;s<<=1)for(var o=s<<1,c=Math.cos(2*Math.PI/o),u=Math.sin(2*Math.PI/o),d=0;d<n;d+=o)for(var h=c,l=u,f=0;f<s;f++){var p=r[d+f],v=i[d+f],m=r[d+f+s],y=i[d+f+s],g=h*m-l*y;y=h*y+l*m,m=g,r[d+f]=p+m,i[d+f]=v+y,r[d+f+s]=p-m,i[d+f+s]=v-y,f!==o&&(g=c*h-u*l,l=c*l+u*h,h=g)}},y.prototype.guessLen13b=function(e,t){var r=1|Math.max(t,e),i=1&r,n=0;for(r=r/2|0;r;r>>>=1)n++;return 1<<n+1+i},y.prototype.conjugate=function(e,t,r){if(!(r<=1))for(var i=0;i<r/2;i++){var n=e[i];e[i]=e[r-i-1],e[r-i-1]=n,n=t[i],t[i]=-t[r-i-1],t[r-i-1]=-n}},y.prototype.normalize13b=function(e,t){for(var r=0,i=0;i<t/2;i++){var n=8192*Math.round(e[2*i+1]/t)+Math.round(e[2*i]/t)+r;e[i]=67108863&n,r=n<67108864?0:n/67108864|0}return e},y.prototype.convert13b=function(e,t,r,n){for(var a=0,s=0;s<t;s++)a+=0|e[s],r[2*s]=8191&a,a>>>=13,r[2*s+1]=8191&a,a>>>=13;for(s=2*t;s<n;++s)r[s]=0;i(0===a),i(0===(-8192&a))},y.prototype.stub=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=0;return t},y.prototype.mulp=function(e,t,r){var i=2*this.guessLen13b(e.length,t.length),n=this.makeRBT(i),a=this.stub(i),s=new Array(i),o=new Array(i),c=new Array(i),u=new Array(i),d=new Array(i),h=new Array(i),l=r.words;l.length=i,this.convert13b(e.words,e.length,s,i),this.convert13b(t.words,t.length,u,i),this.transform(s,a,o,c,i,n),this.transform(u,a,d,h,i,n);for(var f=0;f<i;f++){var p=o[f]*d[f]-c[f]*h[f];c[f]=o[f]*h[f]+c[f]*d[f],o[f]=p}return this.conjugate(o,c,i),this.transform(o,c,l,a,i,n),this.conjugate(l,a,i),this.normalize13b(l,i),r.negative=e.negative^t.negative,r.length=e.length+t.length,r._strip()},a.prototype.mul=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},a.prototype.mulf=function(e){var t=new a(null);return t.words=new Array(this.length+e.length),m(this,e,t)},a.prototype.imul=function(e){return this.clone().mulTo(e,this)},a.prototype.imuln=function(e){var t=e<0;t&&(e=-e),i("number"===typeof e),i(e<67108864);for(var r=0,n=0;n<this.length;n++){var a=(0|this.words[n])*e,s=(67108863&a)+(67108863&r);r>>=26,r+=a/67108864|0,r+=s>>>26,this.words[n]=67108863&s}return 0!==r&&(this.words[n]=r,this.length++),t?this.ineg():this},a.prototype.muln=function(e){return this.clone().imuln(e)},a.prototype.sqr=function(){return this.mul(this)},a.prototype.isqr=function(){return this.imul(this.clone())},a.prototype.pow=function(e){var t=function(e){for(var t=new Array(e.bitLength()),r=0;r<t.length;r++){var i=r/26|0,n=r%26;t[r]=e.words[i]>>>n&1}return t}(e);if(0===t.length)return new a(1);for(var r=this,i=0;i<t.length&&0===t[i];i++,r=r.sqr());if(++i<t.length)for(var n=r.sqr();i<t.length;i++,n=n.sqr())0!==t[i]&&(r=r.mul(n));return r},a.prototype.iushln=function(e){i("number"===typeof e&&e>=0);var t,r=e%26,n=(e-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var s=0;for(t=0;t<this.length;t++){var o=this.words[t]&a,c=(0|this.words[t])-o<<r;this.words[t]=c|s,s=o>>>26-r}s&&(this.words[t]=s,this.length++)}if(0!==n){for(t=this.length-1;t>=0;t--)this.words[t+n]=this.words[t];for(t=0;t<n;t++)this.words[t]=0;this.length+=n}return this._strip()},a.prototype.ishln=function(e){return i(0===this.negative),this.iushln(e)},a.prototype.iushrn=function(e,t,r){var n;i("number"===typeof e&&e>=0),n=t?(t-t%26)/26:0;var a=e%26,s=Math.min((e-a)/26,this.length),o=67108863^67108863>>>a<<a,c=r;if(n-=s,n=Math.max(0,n),c){for(var u=0;u<s;u++)c.words[u]=this.words[u];c.length=s}if(0===s);else if(this.length>s)for(this.length-=s,u=0;u<this.length;u++)this.words[u]=this.words[u+s];else this.words[0]=0,this.length=1;var d=0;for(u=this.length-1;u>=0&&(0!==d||u>=n);u--){var h=0|this.words[u];this.words[u]=d<<26-a|h>>>a,d=h&o}return c&&0!==d&&(c.words[c.length++]=d),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},a.prototype.ishrn=function(e,t,r){return i(0===this.negative),this.iushrn(e,t,r)},a.prototype.shln=function(e){return this.clone().ishln(e)},a.prototype.ushln=function(e){return this.clone().iushln(e)},a.prototype.shrn=function(e){return this.clone().ishrn(e)},a.prototype.ushrn=function(e){return this.clone().iushrn(e)},a.prototype.testn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,n=1<<t;return!(this.length<=r)&&!!(this.words[r]&n)},a.prototype.imaskn=function(e){i("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(i(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var n=67108863^67108863>>>t<<t;this.words[this.length-1]&=n}return this._strip()},a.prototype.maskn=function(e){return this.clone().imaskn(e)},a.prototype.iaddn=function(e){return i("number"===typeof e),i(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<=e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},a.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},a.prototype.isubn=function(e){if(i("number"===typeof e),i(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this._strip()},a.prototype.addn=function(e){return this.clone().iaddn(e)},a.prototype.subn=function(e){return this.clone().isubn(e)},a.prototype.iabs=function(){return this.negative=0,this},a.prototype.abs=function(){return this.clone().iabs()},a.prototype._ishlnsubmul=function(e,t,r){var n,a,s=e.length+r;this._expand(s);var o=0;for(n=0;n<e.length;n++){a=(0|this.words[n+r])+o;var c=(0|e.words[n])*t;o=((a-=67108863&c)>>26)-(c/67108864|0),this.words[n+r]=67108863&a}for(;n<this.length-r;n++)o=(a=(0|this.words[n+r])+o)>>26,this.words[n+r]=67108863&a;if(0===o)return this._strip();for(i(-1===o),o=0,n=0;n<this.length;n++)o=(a=-(0|this.words[n])+o)>>26,this.words[n]=67108863&a;return this.negative=1,this._strip()},a.prototype._wordDiv=function(e,t){var r=(this.length,e.length),i=this.clone(),n=e,s=0|n.words[n.length-1];0!==(r=26-this._countBits(s))&&(n=n.ushln(r),i.iushln(r),s=0|n.words[n.length-1]);var o,c=i.length-n.length;if("mod"!==t){(o=new a(null)).length=c+1,o.words=new Array(o.length);for(var u=0;u<o.length;u++)o.words[u]=0}var d=i.clone()._ishlnsubmul(n,1,c);0===d.negative&&(i=d,o&&(o.words[c]=1));for(var h=c-1;h>=0;h--){var l=67108864*(0|i.words[n.length+h])+(0|i.words[n.length+h-1]);for(l=Math.min(l/s|0,67108863),i._ishlnsubmul(n,l,h);0!==i.negative;)l--,i.negative=0,i._ishlnsubmul(n,1,h),i.isZero()||(i.negative^=1);o&&(o.words[h]=l)}return o&&o._strip(),i._strip(),"div"!==t&&0!==r&&i.iushrn(r),{div:o||null,mod:i}},a.prototype.divmod=function(e,t,r){return i(!e.isZero()),this.isZero()?{div:new a(0),mod:new a(0)}:0!==this.negative&&0===e.negative?(o=this.neg().divmod(e,t),"mod"!==t&&(n=o.div.neg()),"div"!==t&&(s=o.mod.neg(),r&&0!==s.negative&&s.iadd(e)),{div:n,mod:s}):0===this.negative&&0!==e.negative?(o=this.divmod(e.neg(),t),"mod"!==t&&(n=o.div.neg()),{div:n,mod:o.mod}):0!==(this.negative&e.negative)?(o=this.neg().divmod(e.neg(),t),"div"!==t&&(s=o.mod.neg(),r&&0!==s.negative&&s.isub(e)),{div:o.div,mod:s}):e.length>this.length||this.cmp(e)<0?{div:new a(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new a(this.modrn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new a(this.modrn(e.words[0]))}:this._wordDiv(e,t);var n,s,o},a.prototype.div=function(e){return this.divmod(e,"div",!1).div},a.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},a.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},a.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var r=0!==t.div.negative?t.mod.isub(e):t.mod,i=e.ushrn(1),n=e.andln(1),a=r.cmp(i);return a<0||1===n&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},a.prototype.modrn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=(1<<26)%e,n=0,a=this.length-1;a>=0;a--)n=(r*n+(0|this.words[a]))%e;return t?-n:n},a.prototype.modn=function(e){return this.modrn(e)},a.prototype.idivn=function(e){var t=e<0;t&&(e=-e),i(e<=67108863);for(var r=0,n=this.length-1;n>=0;n--){var a=(0|this.words[n])+67108864*r;this.words[n]=a/e|0,r=a%e}return this._strip(),t?this.ineg():this},a.prototype.divn=function(e){return this.clone().idivn(e)},a.prototype.egcd=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n=new a(1),s=new a(0),o=new a(0),c=new a(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var d=r.clone(),h=t.clone();!t.isZero();){for(var l=0,f=1;0===(t.words[0]&f)&&l<26;++l,f<<=1);if(l>0)for(t.iushrn(l);l-- >0;)(n.isOdd()||s.isOdd())&&(n.iadd(d),s.isub(h)),n.iushrn(1),s.iushrn(1);for(var p=0,v=1;0===(r.words[0]&v)&&p<26;++p,v<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(o.isOdd()||c.isOdd())&&(o.iadd(d),c.isub(h)),o.iushrn(1),c.iushrn(1);t.cmp(r)>=0?(t.isub(r),n.isub(o),s.isub(c)):(r.isub(t),o.isub(n),c.isub(s))}return{a:o,b:c,gcd:r.iushln(u)}},a.prototype._invmp=function(e){i(0===e.negative),i(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var n,s=new a(1),o=new a(0),c=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var u=0,d=1;0===(t.words[0]&d)&&u<26;++u,d<<=1);if(u>0)for(t.iushrn(u);u-- >0;)s.isOdd()&&s.iadd(c),s.iushrn(1);for(var h=0,l=1;0===(r.words[0]&l)&&h<26;++h,l<<=1);if(h>0)for(r.iushrn(h);h-- >0;)o.isOdd()&&o.iadd(c),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),s.isub(o)):(r.isub(t),o.isub(s))}return(n=0===t.cmpn(1)?s:o).cmpn(0)<0&&n.iadd(e),n},a.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),r=e.clone();t.negative=0,r.negative=0;for(var i=0;t.isEven()&&r.isEven();i++)t.iushrn(1),r.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;r.isEven();)r.iushrn(1);var n=t.cmp(r);if(n<0){var a=t;t=r,r=a}else if(0===n||0===r.cmpn(1))break;t.isub(r)}return r.iushln(i)},a.prototype.invm=function(e){return this.egcd(e).a.umod(e)},a.prototype.isEven=function(){return 0===(1&this.words[0])},a.prototype.isOdd=function(){return 1===(1&this.words[0])},a.prototype.andln=function(e){return this.words[0]&e},a.prototype.bincn=function(e){i("number"===typeof e);var t=e%26,r=(e-t)/26,n=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=n,this;for(var a=n,s=r;0!==a&&s<this.length;s++){var o=0|this.words[s];a=(o+=a)>>>26,o&=67108863,this.words[s]=o}return 0!==a&&(this.words[s]=a,this.length++),this},a.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},a.prototype.cmpn=function(e){var t,r=e<0;if(0!==this.negative&&!r)return-1;if(0===this.negative&&r)return 1;if(this._strip(),this.length>1)t=1;else{r&&(e=-e),i(e<=67108863,"Number is too big");var n=0|this.words[0];t=n===e?0:n<e?-1:1}return 0!==this.negative?0|-t:t},a.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},a.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,r=this.length-1;r>=0;r--){var i=0|this.words[r],n=0|e.words[r];if(i!==n){i<n?t=-1:i>n&&(t=1);break}}return t},a.prototype.gtn=function(e){return 1===this.cmpn(e)},a.prototype.gt=function(e){return 1===this.cmp(e)},a.prototype.gten=function(e){return this.cmpn(e)>=0},a.prototype.gte=function(e){return this.cmp(e)>=0},a.prototype.ltn=function(e){return-1===this.cmpn(e)},a.prototype.lt=function(e){return-1===this.cmp(e)},a.prototype.lten=function(e){return this.cmpn(e)<=0},a.prototype.lte=function(e){return this.cmp(e)<=0},a.prototype.eqn=function(e){return 0===this.cmpn(e)},a.prototype.eq=function(e){return 0===this.cmp(e)},a.red=function(e){return new O(e)},a.prototype.toRed=function(e){return i(!this.red,"Already a number in reduction context"),i(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},a.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},a.prototype._forceRed=function(e){return this.red=e,this},a.prototype.forceRed=function(e){return i(!this.red,"Already a number in reduction context"),this._forceRed(e)},a.prototype.redAdd=function(e){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},a.prototype.redIAdd=function(e){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},a.prototype.redSub=function(e){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},a.prototype.redISub=function(e){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},a.prototype.redShl=function(e){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},a.prototype.redMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},a.prototype.redIMul=function(e){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},a.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},a.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},a.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},a.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},a.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},a.prototype.redPow=function(e){return i(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var g={k256:null,p224:null,p192:null,p25519:null};function b(e,t){this.name=e,this.p=new a(t,16),this.n=this.p.bitLength(),this.k=new a(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){b.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function x(){b.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function w(){b.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function _(){b.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function O(e){if("string"===typeof e){var t=a._prime(e);this.m=t.p,this.prime=t}else i(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function T(e){O.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new a(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}b.prototype._tmp=function(){var e=new a(null);return e.words=new Array(Math.ceil(this.n/13)),e},b.prototype.ireduce=function(e){var t,r=e;do{this.split(r,this.tmp),t=(r=(r=this.imulK(r)).iadd(this.tmp)).bitLength()}while(t>this.n);var i=t<this.n?-1:r.ucmp(this.p);return 0===i?(r.words[0]=0,r.length=1):i>0?r.isub(this.p):r._strip(),r},b.prototype.split=function(e,t){e.iushrn(this.n,0,t)},b.prototype.imulK=function(e){return e.imul(this.k)},n(k,b),k.prototype.split=function(e,t){for(var r=4194303,i=Math.min(e.length,9),n=0;n<i;n++)t.words[n]=e.words[n];if(t.length=i,e.length<=9)return e.words[0]=0,void(e.length=1);var a=e.words[9];for(t.words[t.length++]=a&r,n=10;n<e.length;n++){var s=0|e.words[n];e.words[n-10]=(s&r)<<4|a>>>22,a=s}a>>>=22,e.words[n-10]=a,0===a&&e.length>10?e.length-=10:e.length-=9},k.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,r=0;r<e.length;r++){var i=0|e.words[r];t+=977*i,e.words[r]=67108863&t,t=64*i+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},n(x,b),n(w,b),n(_,b),_.prototype.imulK=function(e){for(var t=0,r=0;r<e.length;r++){var i=19*(0|e.words[r])+t,n=67108863&i;i>>>=26,e.words[r]=n,t=i}return 0!==t&&(e.words[e.length++]=t),e},a._prime=function(e){if(g[e])return g[e];var t;if("k256"===e)t=new k;else if("p224"===e)t=new x;else if("p192"===e)t=new w;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new _}return g[e]=t,t},O.prototype._verify1=function(e){i(0===e.negative,"red works only with positives"),i(e.red,"red works only with red numbers")},O.prototype._verify2=function(e,t){i(0===(e.negative|t.negative),"red works only with positives"),i(e.red&&e.red===t.red,"red works only with red numbers")},O.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):(e.umod(this.m)._forceRed(this)._move(e),e)},O.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},O.prototype.add=function(e,t){this._verify2(e,t);var r=e.add(t);return r.cmp(this.m)>=0&&r.isub(this.m),r._forceRed(this)},O.prototype.iadd=function(e,t){this._verify2(e,t);var r=e.iadd(t);return r.cmp(this.m)>=0&&r.isub(this.m),r},O.prototype.sub=function(e,t){this._verify2(e,t);var r=e.sub(t);return r.cmpn(0)<0&&r.iadd(this.m),r._forceRed(this)},O.prototype.isub=function(e,t){this._verify2(e,t);var r=e.isub(t);return r.cmpn(0)<0&&r.iadd(this.m),r},O.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},O.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},O.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},O.prototype.isqr=function(e){return this.imul(e,e.clone())},O.prototype.sqr=function(e){return this.mul(e,e)},O.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(i(t%2===1),3===t){var r=this.m.add(new a(1)).iushrn(2);return this.pow(e,r)}for(var n=this.m.subn(1),s=0;!n.isZero()&&0===n.andln(1);)s++,n.iushrn(1);i(!n.isZero());var o=new a(1).toRed(this),c=o.redNeg(),u=this.m.subn(1).iushrn(1),d=this.m.bitLength();for(d=new a(2*d*d).toRed(this);0!==this.pow(d,u).cmp(c);)d.redIAdd(c);for(var h=this.pow(d,n),l=this.pow(e,n.addn(1).iushrn(1)),f=this.pow(e,n),p=s;0!==f.cmp(o);){for(var v=f,m=0;0!==v.cmp(o);m++)v=v.redSqr();i(m<p);var y=this.pow(h,new a(1).iushln(p-m-1));l=l.redMul(y),h=y.redSqr(),f=f.redMul(h),p=m}return l},O.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},O.prototype.pow=function(e,t){if(t.isZero())return new a(1).toRed(this);if(0===t.cmpn(1))return e.clone();var r=new Array(16);r[0]=new a(1).toRed(this),r[1]=e;for(var i=2;i<r.length;i++)r[i]=this.mul(r[i-1],e);var n=r[0],s=0,o=0,c=t.bitLength()%26;for(0===c&&(c=26),i=t.length-1;i>=0;i--){for(var u=t.words[i],d=c-1;d>=0;d--){var h=u>>d&1;n!==r[0]&&(n=this.sqr(n)),0!==h||0!==s?(s<<=1,s|=h,(4===++o||0===i&&0===d)&&(n=this.mul(n,r[s]),o=0,s=0)):o=0}c=26}return n},O.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},O.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},a.mont=function(e){return new T(e)},n(T,O),T.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},T.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},T.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var r=e.imul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),a=n;return n.cmp(this.m)>=0?a=n.isub(this.m):n.cmpn(0)<0&&(a=n.iadd(this.m)),a._forceRed(this)},T.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new a(0)._forceRed(this);var r=e.mul(t),i=r.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=r.isub(i).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},T.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(e,this)}).call(this,r(114)(e))},function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return u})),r.d(t,"d",(function(){return d}));var i=r(20),n=r(1),a=r(386),s=r(18);function o(e){Object(a.a)(e,"[React Intl] Could not find required `intl` object. <IntlProvider> needs to exist in the component ancestry.")}var c=Object(i.a)(Object(i.a)({},s.a),{textComponent:n.Fragment});function u(e){return function(t){return e(n.Children.toArray(t))}}function d(e,t){if(e===t)return!0;if(!e||!t)return!1;var r=Object.keys(e),i=Object.keys(t),n=r.length;if(i.length!==n)return!1;for(var a=0;a<n;a++){var s=r[a];if(e[s]!==t[s]||!Object.prototype.hasOwnProperty.call(t,s))return!1}return!0}},function(e,t){e.exports.linebrk=function(e,t){for(var r="",i=0;i+t<e.length;)r+=e.substring(i,i+t)+"\n",i+=t;return r+e.substring(i,e.length)},e.exports.get32IntFromBuffer=function(e,t){t=t||0;var r;if((r=e.length-t)>0){if(r>=4)return e.readUInt32BE(t);for(var i=0,n=t+r,a=0;n>t;n--,a+=2)i+=e[n-1]*Math.pow(16,a);return i}return NaN},e.exports._={isObject:function(e){var t=typeof e;return!!e&&("object"==t||"function"==t)},isString:function(e){return"string"==typeof e||e instanceof String},isNumber:function(e){return"number"==typeof e||!isNaN(parseFloat(e))&&isFinite(e)},omit:function(e,t){var r={};for(var i in e)e.hasOwnProperty(i)&&i!==t&&(r[i]=e[i]);return r}},e.exports.trimSurroundingText=function(e,t,r){var i=0,n=e.length,a=e.indexOf(t);a>=0&&(i=a+t.length);var s=e.indexOf(r,a);return s>=0&&(n=s),e.substring(i,n)}},function(e,t,r){(function(e){function r(e){return Object.prototype.toString.call(e)}t.isArray=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===r(e)},t.isBoolean=function(e){return"boolean"===typeof e},t.isNull=function(e){return null===e},t.isNullOrUndefined=function(e){return null==e},t.isNumber=function(e){return"number"===typeof e},t.isString=function(e){return"string"===typeof e},t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=function(e){return void 0===e},t.isRegExp=function(e){return"[object RegExp]"===r(e)},t.isObject=function(e){return"object"===typeof e&&null!==e},t.isDate=function(e){return"[object Date]"===r(e)},t.isError=function(e){return"[object Error]"===r(e)||e instanceof Error},t.isFunction=function(e){return"function"===typeof e},t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=e.isBuffer}).call(this,r(21).Buffer)},function(e,t,r){"use strict";var i=t;i.inherits=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e},i.version="6.5.0",i.utils=r(44),i.curve=r(61),i.curves=r(126),i.ec=r(255),i.eddsa=r(259)},function(e,t,r){"use strict";(function(e){r.d(t,"a",(function(){return c})),r.d(t,"b",(function(){return h}));var i=r(1),n=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(c){n=!0,a=c}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(r.n(i).a.version.split("."),2),a=n[0],s=n[1],o=Number(s)>13||Number(a)>13,c=function(e){return o?e:e&&e.getDOMNode()},u={},d=!0;function h(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.process&&d||r&&u[t]||(console.warn(t),u[t]=!0)}}).call(this,r(19))},,function(e,t,r){"use strict";r.d(t,"a",(function(){return th})),r.d(t,"c",(function(){return Ll})),r.d(t,"d",(function(){return wf})),r.d(t,"e",(function(){return xp})),r.d(t,"g",(function(){return cv})),r.d(t,"f",(function(){return nm})),r.d(t,"h",(function(){return hm})),r.d(t,"b",(function(){return _m}));var i={};r.r(i),r.d(i,"arc",(function(){return Rs})),r.d(i,"area",(function(){return Ys})),r.d(i,"line",(function(){return Xs})),r.d(i,"pie",(function(){return $s})),r.d(i,"areaRadial",(function(){return no})),r.d(i,"radialArea",(function(){return no})),r.d(i,"lineRadial",(function(){return io})),r.d(i,"radialLine",(function(){return io})),r.d(i,"pointRadial",(function(){return ao})),r.d(i,"linkHorizontal",(function(){return po})),r.d(i,"linkVertical",(function(){return vo})),r.d(i,"linkRadial",(function(){return mo})),r.d(i,"symbol",(function(){return Ro})),r.d(i,"symbols",(function(){return Bo})),r.d(i,"symbolCircle",(function(){return yo})),r.d(i,"symbolCross",(function(){return go})),r.d(i,"symbolDiamond",(function(){return xo})),r.d(i,"symbolSquare",(function(){return So})),r.d(i,"symbolStar",(function(){return To})),r.d(i,"symbolTriangle",(function(){return Io})),r.d(i,"symbolWye",(function(){return Po})),r.d(i,"curveBasisClosed",(function(){return Go})),r.d(i,"curveBasisOpen",(function(){return Uo})),r.d(i,"curveBasis",(function(){return qo})),r.d(i,"curveBundle",(function(){return zo})),r.d(i,"curveCardinalClosed",(function(){return Zo})),r.d(i,"curveCardinalOpen",(function(){return $o})),r.d(i,"curveCardinal",(function(){return Xo})),r.d(i,"curveCatmullRomClosed",(function(){return ic})),r.d(i,"curveCatmullRomOpen",(function(){return ac})),r.d(i,"curveCatmullRom",(function(){return tc})),r.d(i,"curveLinearClosed",(function(){return oc})),r.d(i,"curveLinear",(function(){return zs})),r.d(i,"curveMonotoneX",(function(){return vc})),r.d(i,"curveMonotoneY",(function(){return mc})),r.d(i,"curveNatural",(function(){return bc})),r.d(i,"curveStep",(function(){return xc})),r.d(i,"curveStepAfter",(function(){return _c})),r.d(i,"curveStepBefore",(function(){return wc})),r.d(i,"stack",(function(){return Cc})),r.d(i,"stackOffsetExpand",(function(){return Ic})),r.d(i,"stackOffsetDiverging",(function(){return Mc})),r.d(i,"stackOffsetNone",(function(){return Oc})),r.d(i,"stackOffsetSilhouette",(function(){return Ec})),r.d(i,"stackOffsetWiggle",(function(){return Ac})),r.d(i,"stackOrderAppearance",(function(){return Fc})),r.d(i,"stackOrderAscending",(function(){return Bc})),r.d(i,"stackOrderDescending",(function(){return Vc})),r.d(i,"stackOrderInsideOut",(function(){return Lc})),r.d(i,"stackOrderNone",(function(){return Tc})),r.d(i,"stackOrderReverse",(function(){return Dc}));var n=r(0),a=r.n(n),s=function(e){return function(){return e}};function o(e){return e[0]}function c(e){return e[1]}function u(){this._=null}function d(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function h(e,t){var r=t,i=t.R,n=r.U;n?n.L===r?n.L=i:n.R=i:e._=i,i.U=n,r.U=i,r.R=i.L,r.R&&(r.R.U=r),i.L=r}function l(e,t){var r=t,i=t.L,n=r.U;n?n.L===r?n.L=i:n.R=i:e._=i,i.U=n,r.U=i,r.L=i.R,r.L&&(r.L.U=r),i.R=r}function f(e){for(;e.L;)e=e.L;return e}u.prototype={constructor:u,insert:function(e,t){var r,i,n;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;r=e}else this._?(e=f(this._),t.P=null,t.N=e,e.P=e.L=t,r=e):(t.P=t.N=null,this._=t,r=null);for(t.L=t.R=null,t.U=r,t.C=!0,e=t;r&&r.C;)r===(i=r.U).L?(n=i.R)&&n.C?(r.C=n.C=!1,i.C=!0,e=i):(e===r.R&&(h(this,r),r=(e=r).U),r.C=!1,i.C=!0,l(this,i)):(n=i.L)&&n.C?(r.C=n.C=!1,i.C=!0,e=i):(e===r.L&&(l(this,r),r=(e=r).U),r.C=!1,i.C=!0,h(this,i)),r=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,r,i,n=e.U,a=e.L,s=e.R;if(r=a?s?f(s):a:s,n?n.L===e?n.L=r:n.R=r:this._=r,a&&s?(i=r.C,r.C=e.C,r.L=a,a.U=r,r!==s?(n=r.U,r.U=e.U,e=r.R,n.L=e,r.R=s,s.U=r):(r.U=n,n=r,e=r.R)):(i=e.C,e=r),e&&(e.U=n),!i)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===n.L){if((t=n.R).C&&(t.C=!1,n.C=!0,h(this,n),t=n.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,l(this,t),t=n.R),t.C=n.C,n.C=t.R.C=!1,h(this,n),e=this._;break}}else if((t=n.L).C&&(t.C=!1,n.C=!0,l(this,n),t=n.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,h(this,t),t=n.L),t.C=n.C,n.C=t.L.C=!1,l(this,n),e=this._;break}t.C=!0,e=n,n=n.U}while(!e.C);e&&(e.C=!1)}}};var p=u;function v(e,t,r,i){var n=[null,null],a=q.push(n)-1;return n.left=e,n.right=t,r&&y(n,e,t,r),i&&y(n,t,e,i),L[e.index].halfedges.push(a),L[t.index].halfedges.push(a),n}function m(e,t,r){var i=[t,r];return i.left=e,i}function y(e,t,r,i){e[0]||e[1]?e.left===r?e[1]=i:e[0]=i:(e[0]=i,e.left=t,e.right=r)}function g(e,t,r,i,n){var a,s=e[0],o=e[1],c=s[0],u=s[1],d=0,h=1,l=o[0]-c,f=o[1]-u;if(a=t-c,l||!(a>0)){if(a/=l,l<0){if(a<d)return;a<h&&(h=a)}else if(l>0){if(a>h)return;a>d&&(d=a)}if(a=i-c,l||!(a<0)){if(a/=l,l<0){if(a>h)return;a>d&&(d=a)}else if(l>0){if(a<d)return;a<h&&(h=a)}if(a=r-u,f||!(a>0)){if(a/=f,f<0){if(a<d)return;a<h&&(h=a)}else if(f>0){if(a>h)return;a>d&&(d=a)}if(a=n-u,f||!(a<0)){if(a/=f,f<0){if(a>h)return;a>d&&(d=a)}else if(f>0){if(a<d)return;a<h&&(h=a)}return!(d>0||h<1)||(d>0&&(e[0]=[c+d*l,u+d*f]),h<1&&(e[1]=[c+h*l,u+h*f]),!0)}}}}}function b(e,t,r,i,n){var a=e[1];if(a)return!0;var s,o,c=e[0],u=e.left,d=e.right,h=u[0],l=u[1],f=d[0],p=d[1],v=(h+f)/2,m=(l+p)/2;if(p===l){if(v<t||v>=i)return;if(h>f){if(c){if(c[1]>=n)return}else c=[v,r];a=[v,n]}else{if(c){if(c[1]<r)return}else c=[v,n];a=[v,r]}}else if(o=m-(s=(h-f)/(p-l))*v,s<-1||s>1)if(h>f){if(c){if(c[1]>=n)return}else c=[(r-o)/s,r];a=[(n-o)/s,n]}else{if(c){if(c[1]<r)return}else c=[(n-o)/s,n];a=[(r-o)/s,r]}else if(l<p){if(c){if(c[0]>=i)return}else c=[t,s*t+o];a=[i,s*i+o]}else{if(c){if(c[0]<t)return}else c=[i,s*i+o];a=[t,s*t+o]}return e[0]=c,e[1]=a,!0}function k(e,t){var r=e.site,i=t.left,n=t.right;return r===n&&(n=i,i=r),n?Math.atan2(n[1]-i[1],n[0]-i[0]):(r===i?(i=t[1],n=t[0]):(i=t[0],n=t[1]),Math.atan2(i[0]-n[0],n[1]-i[1]))}function x(e,t){return t[+(t.left!==e.site)]}function w(e,t){return t[+(t.left===e.site)]}var _,O=[];function T(){d(this),this.x=this.y=this.arc=this.site=this.cy=null}function S(e){var t=e.P,r=e.N;if(t&&r){var i=t.site,n=e.site,a=r.site;if(i!==a){var s=n[0],o=n[1],c=i[0]-s,u=i[1]-o,d=a[0]-s,h=a[1]-o,l=2*(c*h-u*d);if(!(l>=-G)){var f=c*c+u*u,p=d*d+h*h,v=(h*f-u*p)/l,m=(c*p-d*f)/l,y=O.pop()||new T;y.arc=e,y.site=n,y.x=v+s,y.y=(y.cy=m+o)+Math.sqrt(v*v+m*m),e.circle=y;for(var g=null,b=D._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){g=b.P;break}b=b.L}else{if(!b.R){g=b;break}b=b.R}D.insert(g,y),g||(_=y)}}}}function C(e){var t=e.circle;t&&(t.P||(_=t.N),D.remove(t),O.push(t),d(t),e.circle=null)}var I=[];function M(){d(this),this.edge=this.site=this.circle=null}function E(e){var t=I.pop()||new M;return t.site=e,t}function A(e){C(e),V.remove(e),I.push(e),d(e)}function F(e){var t=e.circle,r=t.x,i=t.cy,n=[r,i],a=e.P,s=e.N,o=[e];A(e);for(var c=a;c.circle&&Math.abs(r-c.circle.x)<N&&Math.abs(i-c.circle.cy)<N;)a=c.P,o.unshift(c),A(c),c=a;o.unshift(c),C(c);for(var u=s;u.circle&&Math.abs(r-u.circle.x)<N&&Math.abs(i-u.circle.cy)<N;)s=u.N,o.push(u),A(u),u=s;o.push(u),C(u);var d,h=o.length;for(d=1;d<h;++d)u=o[d],c=o[d-1],y(u.edge,c.site,u.site,n);c=o[0],(u=o[h-1]).edge=v(c.site,u.site,null,n),S(c),S(u)}function P(e){for(var t,r,i,n,a=e[0],s=e[1],o=V._;o;)if((i=B(o,s)-a)>N)o=o.L;else{if(!((n=a-R(o,s))>N)){i>-N?(t=o.P,r=o):n>-N?(t=o,r=o.N):t=r=o;break}if(!o.R){t=o;break}o=o.R}!function(e){L[e.index]={site:e,halfedges:[]}}(e);var c=E(e);if(V.insert(t,c),t||r){if(t===r)return C(t),r=E(t.site),V.insert(c,r),c.edge=r.edge=v(t.site,c.site),S(t),void S(r);if(r){C(t),C(r);var u=t.site,d=u[0],h=u[1],l=e[0]-d,f=e[1]-h,p=r.site,m=p[0]-d,g=p[1]-h,b=2*(l*g-f*m),k=l*l+f*f,x=m*m+g*g,w=[(g*k-f*x)/b+d,(l*x-m*k)/b+h];y(r.edge,u,p,w),c.edge=v(u,e,null,w),r.edge=v(e,p,null,w),S(t),S(r)}else c.edge=v(t.site,c.site)}}function B(e,t){var r=e.site,i=r[0],n=r[1],a=n-t;if(!a)return i;var s=e.P;if(!s)return-1/0;var o=(r=s.site)[0],c=r[1],u=c-t;if(!u)return o;var d=o-i,h=1/a-1/u,l=d/u;return h?(-l+Math.sqrt(l*l-2*h*(d*d/(-2*u)-c+u/2+n-a/2)))/h+i:(i+o)/2}function R(e,t){var r=e.N;if(r)return B(r,t);var i=e.site;return i[1]===t?i[0]:1/0}var V,L,D,q,N=1e-6,G=1e-12;function j(e,t){return t[1]-e[1]||t[0]-e[0]}function U(e,t){var r,i,n,a=e.sort(j).pop();for(q=[],L=new Array(e.length),V=new p,D=new p;;)if(n=_,a&&(!n||a[1]<n.y||a[1]===n.y&&a[0]<n.x))a[0]===r&&a[1]===i||(P(a),r=a[0],i=a[1]),a=e.pop();else{if(!n)break;F(n.arc)}if(function(){for(var e,t,r,i,n=0,a=L.length;n<a;++n)if((e=L[n])&&(i=(t=e.halfedges).length)){var s=new Array(i),o=new Array(i);for(r=0;r<i;++r)s[r]=r,o[r]=k(e,q[t[r]]);for(s.sort((function(e,t){return o[t]-o[e]})),r=0;r<i;++r)o[r]=t[s[r]];for(r=0;r<i;++r)t[r]=o[r]}}(),t){var s=+t[0][0],o=+t[0][1],c=+t[1][0],u=+t[1][1];!function(e,t,r,i){for(var n,a=q.length;a--;)b(n=q[a],e,t,r,i)&&g(n,e,t,r,i)&&(Math.abs(n[0][0]-n[1][0])>N||Math.abs(n[0][1]-n[1][1])>N)||delete q[a]}(s,o,c,u),function(e,t,r,i){var n,a,s,o,c,u,d,h,l,f,p,v,y=L.length,g=!0;for(n=0;n<y;++n)if(a=L[n]){for(s=a.site,o=(c=a.halfedges).length;o--;)q[c[o]]||c.splice(o,1);for(o=0,u=c.length;o<u;)p=(f=w(a,q[c[o]]))[0],v=f[1],h=(d=x(a,q[c[++o%u]]))[0],l=d[1],(Math.abs(p-h)>N||Math.abs(v-l)>N)&&(c.splice(o,0,q.push(m(s,f,Math.abs(p-e)<N&&i-v>N?[e,Math.abs(h-e)<N?l:i]:Math.abs(v-i)<N&&r-p>N?[Math.abs(l-i)<N?h:r,i]:Math.abs(p-r)<N&&v-t>N?[r,Math.abs(h-r)<N?l:t]:Math.abs(v-t)<N&&p-e>N?[Math.abs(l-t)<N?h:e,t]:null))-1),++u);u&&(g=!1)}if(g){var b,k,_,O=1/0;for(n=0,g=null;n<y;++n)(a=L[n])&&(_=(b=(s=a.site)[0]-e)*b+(k=s[1]-t)*k)<O&&(O=_,g=a);if(g){var T=[e,t],S=[e,i],C=[r,i],I=[r,t];g.halfedges.push(q.push(m(s=g.site,T,S))-1,q.push(m(s,S,C))-1,q.push(m(s,C,I))-1,q.push(m(s,I,T))-1)}}for(n=0;n<y;++n)(a=L[n])&&(a.halfedges.length||delete L[n])}(s,o,c,u)}this.edges=q,this.cells=L,V=D=q=L=null}U.prototype={constructor:U,polygons:function(){var e=this.edges;return this.cells.map((function(t){var r=t.halfedges.map((function(r){return x(t,e[r])}));return r.data=t.site.data,r}))},triangles:function(){var e=[],t=this.edges;return this.cells.forEach((function(r,i){if(a=(n=r.halfedges).length)for(var n,a,s,o,c,u,d=r.site,h=-1,l=t[n[a-1]],f=l.left===d?l.right:l.left;++h<a;)s=f,f=(l=t[n[h]]).left===d?l.right:l.left,s&&f&&i<s.index&&i<f.index&&(c=s,u=f,((o=d)[0]-u[0])*(c[1]-o[1])-(o[0]-c[0])*(u[1]-o[1])<0)&&e.push([d.data,s.data,f.data])})),e},links:function(){return this.edges.filter((function(e){return e.right})).map((function(e){return{source:e.left.data,target:e.right.data}}))},find:function(e,t,r){for(var i,n,a=this,s=a._found||0,o=a.cells.length;!(n=a.cells[s]);)if(++s>=o)return null;var c=e-n.site[0],u=t-n.site[1],d=c*c+u*u;do{n=a.cells[i=s],s=null,n.halfedges.forEach((function(r){var i=a.edges[r],o=i.left;if(o!==n.site&&o||(o=i.right)){var c=e-o[0],u=t-o[1],h=c*c+u*u;h<d&&(d=h,s=o.index)}}))}while(null!==s);return a._found=i,null==r||d<=r*r?n.site:null}};var H=function(){var e=o,t=c,r=null;function i(i){return new U(i.map((function(r,n){var a=[Math.round(e(r,n,i)/N)*N,Math.round(t(r,n,i)/N)*N];return a.index=n,a.data=r,a})),r)}return i.polygons=function(e){return i(e).polygons()},i.links=function(e){return i(e).links()},i.triangles=function(e){return i(e).triangles()},i.x=function(t){return arguments.length?(e="function"===typeof t?t:s(+t),i):e},i.y=function(e){return arguments.length?(t="function"===typeof e?e:s(+e),i):t},i.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],i):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},i.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],i):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},i},z=r(1),W=r.n(z),K=function(e,t,r){e.prototype=t.prototype=r,r.constructor=e};function X(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function Y(){}var Z=.7,Q=1/Z,$="\\s*([+-]?\\d+)\\s*",J="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",ee="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",te=/^#([0-9a-f]{3,8})$/,re=new RegExp("^rgb\\("+[$,$,$]+"\\)$"),ie=new RegExp("^rgb\\("+[ee,ee,ee]+"\\)$"),ne=new RegExp("^rgba\\("+[$,$,$,J]+"\\)$"),ae=new RegExp("^rgba\\("+[ee,ee,ee,J]+"\\)$"),se=new RegExp("^hsl\\("+[J,ee,ee]+"\\)$"),oe=new RegExp("^hsla\\("+[J,ee,ee,J]+"\\)$"),ce={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function ue(){return this.rgb().formatHex()}function de(){return this.rgb().formatRgb()}function he(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=te.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?le(t):3===r?new me(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?fe(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?fe(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=re.exec(e))?new me(t[1],t[2],t[3],1):(t=ie.exec(e))?new me(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ne.exec(e))?fe(t[1],t[2],t[3],t[4]):(t=ae.exec(e))?fe(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=se.exec(e))?ke(t[1],t[2]/100,t[3]/100,1):(t=oe.exec(e))?ke(t[1],t[2]/100,t[3]/100,t[4]):ce.hasOwnProperty(e)?le(ce[e]):"transparent"===e?new me(NaN,NaN,NaN,0):null}function le(e){return new me(e>>16&255,e>>8&255,255&e,1)}function fe(e,t,r,i){return i<=0&&(e=t=r=NaN),new me(e,t,r,i)}function pe(e){return e instanceof Y||(e=he(e)),e?new me((e=e.rgb()).r,e.g,e.b,e.opacity):new me}function ve(e,t,r,i){return 1===arguments.length?pe(e):new me(e,t,r,null==i?1:i)}function me(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}function ye(){return"#"+be(this.r)+be(this.g)+be(this.b)}function ge(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function be(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function ke(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new _e(e,t,r,i)}function xe(e){if(e instanceof _e)return new _e(e.h,e.s,e.l,e.opacity);if(e instanceof Y||(e=he(e)),!e)return new _e;if(e instanceof _e)return e;var t=(e=e.rgb()).r/255,r=e.g/255,i=e.b/255,n=Math.min(t,r,i),a=Math.max(t,r,i),s=NaN,o=a-n,c=(a+n)/2;return o?(s=t===a?(r-i)/o+6*(r<i):r===a?(i-t)/o+2:(t-r)/o+4,o/=c<.5?a+n:2-a-n,s*=60):o=c>0&&c<1?0:s,new _e(s,o,c,e.opacity)}function we(e,t,r,i){return 1===arguments.length?xe(e):new _e(e,t,r,null==i?1:i)}function _e(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function Oe(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}function Te(e,t,r,i,n){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*r+(1+3*e+3*a-3*s)*i+s*n)/6}K(Y,he,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:ue,formatHex:ue,formatHsl:function(){return xe(this).formatHsl()},formatRgb:de,toString:de}),K(me,ve,X(Y,{brighter:function(e){return e=null==e?Q:Math.pow(Q,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?Z:Math.pow(Z,e),new me(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ye,formatHex:ye,formatRgb:ge,toString:ge})),K(_e,we,X(Y,{brighter:function(e){return e=null==e?Q:Math.pow(Q,e),new _e(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Z:Math.pow(Z,e),new _e(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,n=2*r-i;return new me(Oe(e>=240?e-240:e+120,n,i),Oe(e,n,i),Oe(e<120?e+240:e-120,n,i),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}}));var Se=function(e){return function(){return e}};function Ce(e,t){return function(r){return e+r*t}}function Ie(e){return 1===(e=+e)?Me:function(t,r){return r-t?function(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}(t,r,e):Se(isNaN(t)?r:t)}}function Me(e,t){var r=t-e;return r?Ce(e,r):Se(isNaN(e)?t:e)}var Ee=function e(t){var r=Ie(t);function i(e,t){var i=r((e=ve(e)).r,(t=ve(t)).r),n=r(e.g,t.g),a=r(e.b,t.b),s=Me(e.opacity,t.opacity);return function(t){return e.r=i(t),e.g=n(t),e.b=a(t),e.opacity=s(t),e+""}}return i.gamma=e,i}(1);function Ae(e){return function(t){var r,i,n=t.length,a=new Array(n),s=new Array(n),o=new Array(n);for(r=0;r<n;++r)i=ve(t[r]),a[r]=i.r||0,s[r]=i.g||0,o[r]=i.b||0;return a=e(a),s=e(s),o=e(o),i.opacity=1,function(e){return i.r=a(e),i.g=s(e),i.b=o(e),i+""}}}Ae((function(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),n=e[i],a=e[i+1],s=i>0?e[i-1]:2*n-a,o=i<t-1?e[i+2]:2*a-n;return Te((r-i/t)*t,s,n,a,o)}})),Ae((function(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),n=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return Te((r-i/t)*t,n,a,s,o)}}));var Fe=function(e,t){t||(t=[]);var r,i=e?Math.min(t.length,e.length):0,n=t.slice();return function(a){for(r=0;r<i;++r)n[r]=e[r]*(1-a)+t[r]*a;return n}};function Pe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Be(e,t){var r,i=t?t.length:0,n=e?Math.min(i,e.length):0,a=new Array(n),s=new Array(i);for(r=0;r<n;++r)a[r]=Ge(e[r],t[r]);for(;r<i;++r)s[r]=t[r];return function(e){for(r=0;r<n;++r)s[r]=a[r](e);return s}}var Re=function(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}},Ve=function(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}},Le=function(e,t){var r,i={},n={};for(r in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)r in e?i[r]=Ge(e[r],t[r]):n[r]=t[r];return function(e){for(r in i)n[r]=i[r](e);return n}},De=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qe=new RegExp(De.source,"g");var Ne=function(e,t){var r,i,n,a=De.lastIndex=qe.lastIndex=0,s=-1,o=[],c=[];for(e+="",t+="";(r=De.exec(e))&&(i=qe.exec(t));)(n=i.index)>a&&(n=t.slice(a,n),o[s]?o[s]+=n:o[++s]=n),(r=r[0])===(i=i[0])?o[s]?o[s]+=i:o[++s]=i:(o[++s]=null,c.push({i:s,x:Ve(r,i)})),a=qe.lastIndex;return a<t.length&&(n=t.slice(a),o[s]?o[s]+=n:o[++s]=n),o.length<2?c[0]?function(e){return function(t){return e(t)+""}}(c[0].x):function(e){return function(){return e}}(t):(t=c.length,function(e){for(var r,i=0;i<t;++i)o[(r=c[i]).i]=r.x(e);return o.join("")})},Ge=function(e,t){var r,i=typeof t;return null==t||"boolean"===i?Se(t):("number"===i?Ve:"string"===i?(r=he(t))?(t=r,Ee):Ne:t instanceof he?Ee:t instanceof Date?Re:Pe(t)?Fe:Array.isArray(t)?Be:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?Le:Ve)(e,t)},je=r(35),Ue=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var ze=a.a.oneOfType([a.a.string,a.a.shape({stiffness:a.a.number,nonAnimatedProps:a.a.arrayOf(a.a.string),damping:a.a.number}),a.a.bool]),We={animatedProps:a.a.arrayOf(a.a.string).isRequired,animation:ze,onStart:a.a.func,onEnd:a.a.func};function Ke(e){var t=e.animatedProps,r=function(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}(e,["animatedProps"]);return t.reduce((function(e,t){return r.hasOwnProperty(t)&&(e[t]=r[t]),e}),{})}var Xe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r._motionEndHandler=function(){r.props.onEnd&&r.props.onEnd()},r._renderChildren=function(e){var t=e.i,i=r.props.children,n=r._interpolator,a=W.a.Children.only(i),s=n?n(t):n,o=s&&s.data||null;return o&&a.props._data&&(o=o.map((function(e,t){var r=a.props._data[t];return He({},e,{parent:r.parent,children:r.children})}))),W.a.cloneElement(a,He({},a.props,s,{data:o||a.props.data||null,_animation:Math.random()}))},r._updateInterpolator(e),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ue(t,[{key:"componentWillUpdate",value:function(e){this._updateInterpolator(this.props,e),e.onStart&&e.onStart()}},{key:"_updateInterpolator",value:function(e,t){this._interpolator=Ge(Ke(e),t?Ke(t):null)}},{key:"render",value:function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je.presets.noWobble;if("string"===typeof e)return je.presets[e]||je.presets.noWobble;var t=e.damping,r=e.stiffness;return He({damping:t||je.presets.noWobble.damping,stiffness:r||je.presets.noWobble.stiffness},e)}(this.props.animation),t={i:Object(je.spring)(1,e)},r=Math.random();return W.a.createElement(je.Motion,He({defaultStyle:{i:0},style:t,key:r},{onRest:this._motionEndHandler}),this._renderChildren)}}]),t}(z.PureComponent);Xe.propTypes=We,Xe.displayName="Animation";var Ye=Xe,Ze=ze,Qe=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},$e=function(e){var t;return 1===e.length&&(t=e,e=function(e,r){return Qe(t(e),r)}),{left:function(t,r,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var a=i+n>>>1;e(t[a],r)<0?i=a+1:n=a}return i},right:function(t,r,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var a=i+n>>>1;e(t[a],r)>0?n=a:i=a+1}return i}}};var Je=$e(Qe),et=Je.right,tt=(Je.left,et);var rt=function(e,t){var r,i,n,a=e.length,s=-1;if(null==t){for(;++s<a;)if(null!=(r=e[s])&&r>=r)for(i=n=r;++s<a;)null!=(r=e[s])&&(i>r&&(i=r),n<r&&(n=r))}else for(;++s<a;)if(null!=(r=t(e[s],s,e))&&r>=r)for(i=n=r;++s<a;)null!=(r=t(e[s],s,e))&&(i>r&&(i=r),n<r&&(n=r));return[i,n]},it=Array.prototype,nt=(it.slice,it.map,function(e,t,r){e=+e,t=+t,r=(n=arguments.length)<2?(t=e,e=0,1):n<3?1:+r;for(var i=-1,n=0|Math.max(0,Math.ceil((t-e)/r)),a=new Array(n);++i<n;)a[i]=e+i*r;return a}),at=Math.sqrt(50),st=Math.sqrt(10),ot=Math.sqrt(2),ct=function(e,t,r){var i,n,a,s,o=-1;if(r=+r,(e=+e)===(t=+t)&&r>0)return[e];if((i=t<e)&&(n=e,e=t,t=n),0===(s=ut(e,t,r))||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),a=new Array(n=Math.ceil(t-e+1));++o<n;)a[o]=(e+o)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),a=new Array(n=Math.ceil(e-t+1));++o<n;)a[o]=(e-o)/s;return i&&a.reverse(),a};function ut(e,t,r){var i=(t-e)/Math.max(0,r),n=Math.floor(Math.log(i)/Math.LN10),a=i/Math.pow(10,n);return n>=0?(a>=at?10:a>=st?5:a>=ot?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=at?10:a>=st?5:a>=ot?2:1)}function dt(e,t,r){var i=Math.abs(t-e)/Math.max(0,r),n=Math.pow(10,Math.floor(Math.log(i)/Math.LN10)),a=i/n;return a>=at?n*=10:a>=st?n*=5:a>=ot&&(n*=2),t<e?-n:n}var ht=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},lt=function(e,t){var r,i,n=e.length,a=-1;if(null==t){for(;++a<n;)if(null!=(r=e[a])&&r>=r)for(i=r;++a<n;)null!=(r=e[a])&&i>r&&(i=r)}else for(;++a<n;)if(null!=(r=t(e[a],a,e))&&r>=r)for(i=r;++a<n;)null!=(r=t(e[a],a,e))&&i>r&&(i=r);return i},ft=function(e,t){var r,i=e.length,n=-1,a=0;if(null==t)for(;++n<i;)(r=+e[n])&&(a+=r);else for(;++n<i;)(r=+t(e[n],n,e))&&(a+=r);return a};var pt="$";function vt(){}function mt(e,t){var r=new vt;if(e instanceof vt)e.each((function(e,t){r.set(t,e)}));else if(Array.isArray(e)){var i,n=-1,a=e.length;if(null==t)for(;++n<a;)r.set(n,e[n]);else for(;++n<a;)r.set(t(i=e[n],n,e),i)}else if(e)for(var s in e)r.set(s,e[s]);return r}vt.prototype=mt.prototype={constructor:vt,has:function(e){return pt+e in this},get:function(e){return this[pt+e]},set:function(e,t){return this[pt+e]=t,this},remove:function(e){var t=pt+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===pt&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===pt&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===pt&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===pt&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===pt&&++e;return e},empty:function(){for(var e in this)if(e[0]===pt)return!1;return!0},each:function(e){for(var t in this)t[0]===pt&&e(this[t],t.slice(1),this)}};var yt=mt,gt=function(){var e,t,r,i=[],n=[];function a(r,n,s,o){if(n>=i.length)return null!=e&&r.sort(e),null!=t?t(r):r;for(var c,u,d,h=-1,l=r.length,f=i[n++],p=yt(),v=s();++h<l;)(d=p.get(c=f(u=r[h])+""))?d.push(u):p.set(c,[u]);return p.each((function(e,t){o(v,t,a(e,n,s,o))})),v}function s(e,r){if(++r>i.length)return e;var a,o=n[r-1];return null!=t&&r>=i.length?a=e.entries():(a=[],e.each((function(e,t){a.push({key:t,values:s(e,r)})}))),null!=o?a.sort((function(e,t){return o(e.key,t.key)})):a}return r={object:function(e){return a(e,0,bt,kt)},map:function(e){return a(e,0,xt,wt)},entries:function(e){return s(a(e,0,xt,wt),0)},key:function(e){return i.push(e),r},sortKeys:function(e){return n[i.length-1]=e,r},sortValues:function(t){return e=t,r},rollup:function(e){return t=e,r}}};function bt(){return{}}function kt(e,t,r){e[t]=r}function xt(){return yt()}function wt(e,t,r){e.set(t,r)}function _t(){}var Ot=yt.prototype;function Tt(e,t){var r=new _t;if(e instanceof _t)e.each((function(e){r.add(e)}));else if(e){var i=-1,n=e.length;if(null==t)for(;++i<n;)r.add(e[i]);else for(;++i<n;)r.add(t(e[i],i,e))}return r}_t.prototype=Tt.prototype={constructor:_t,has:Ot.has,add:function(e){return this[pt+(e+="")]=e,this},remove:Ot.remove,clear:Ot.clear,values:Ot.keys,size:Ot.size,empty:Ot.empty,each:Ot.each};var St=Tt,Ct=Array.prototype,It=Ct.map,Mt=Ct.slice,Et={name:"implicit"};function At(e){var t=yt(),r=[],i=Et;function n(n){var a=n+"",s=t.get(a);if(!s){if(i!==Et)return i;t.set(a,s=r.push(n))}return e[(s-1)%e.length]}return e=null==e?[]:Mt.call(e),n.domain=function(e){if(!arguments.length)return r.slice();r=[],t=yt();for(var i,a,s=-1,o=e.length;++s<o;)t.has(a=(i=e[s])+"")||t.set(a,r.push(i));return n},n.range=function(t){return arguments.length?(e=Mt.call(t),n):e.slice()},n.unknown=function(e){return arguments.length?(i=e,n):i},n.copy=function(){return At().domain(r).range(e).unknown(i)},n}function Ft(){var e,t,r=At().unknown(void 0),i=r.domain,n=r.range,a=[0,1],s=!1,o=0,c=0,u=.5;function d(){var r=i().length,d=a[1]<a[0],h=a[d-0],l=a[1-d];e=(l-h)/Math.max(1,r-o+2*c),s&&(e=Math.floor(e)),h+=(l-h-e*(r-o))*u,t=e*(1-o),s&&(h=Math.round(h),t=Math.round(t));var f=nt(r).map((function(t){return h+e*t}));return n(d?f.reverse():f)}return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),d()):i()},r.range=function(e){return arguments.length?(a=[+e[0],+e[1]],d()):a.slice()},r.rangeRound=function(e){return a=[+e[0],+e[1]],s=!0,d()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,d()):s},r.padding=function(e){return arguments.length?(o=c=Math.max(0,Math.min(1,e)),d()):o},r.paddingInner=function(e){return arguments.length?(o=Math.max(0,Math.min(1,e)),d()):o},r.paddingOuter=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),d()):c},r.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),d()):u},r.copy=function(){return Ft().domain(i()).range(a).round(s).paddingInner(o).paddingOuter(c).align(u)},d()}function Pt(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Pt(t())},e}var Bt=function(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}},Rt=function(e){return function(){return e}},Vt=function(e){return+e},Lt=[0,1];function Dt(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Rt(t)}function qt(e,t,r,i){var n=e[0],a=e[1],s=t[0],o=t[1];return a<n?(n=r(a,n),s=i(o,s)):(n=r(n,a),s=i(s,o)),function(e){return s(n(e))}}function Nt(e,t,r,i){var n=Math.min(e.length,t.length)-1,a=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=r(e[o],e[o+1]),s[o]=i(t[o],t[o+1]);return function(t){var r=tt(e,t,1,n)-1;return s[r](a[r](t))}}function Gt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function jt(e,t){var r,i,n,a=Lt,s=Lt,o=Ge,c=!1;function u(){return r=Math.min(a.length,s.length)>2?Nt:qt,i=n=null,d}function d(t){return(i||(i=r(a,s,c?function(e){return function(t,r){var i=e(t=+t,r=+r);return function(e){return e<=t?0:e>=r?1:i(e)}}}(e):e,o)))(+t)}return d.invert=function(e){return(n||(n=r(s,a,Dt,c?function(e){return function(t,r){var i=e(t=+t,r=+r);return function(e){return e<=0?t:e>=1?r:i(e)}}}(t):t)))(+e)},d.domain=function(e){return arguments.length?(a=It.call(e,Vt),u()):a.slice()},d.range=function(e){return arguments.length?(s=Mt.call(e),u()):s.slice()},d.rangeRound=function(e){return s=Mt.call(e),o=Bt,u()},d.clamp=function(e){return arguments.length?(c=!!e,u()):c},d.interpolate=function(e){return arguments.length?(o=e,u()):o},u()}var Ut=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ht(e){if(!(t=Ut.exec(e)))throw new Error("invalid format: "+e);var t;return new zt({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function zt(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}Ht.prototype=zt.prototype,zt.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};function Wt(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}var Kt,Xt,Yt,Zt,Qt=function(e){return(e=Wt(Math.abs(e)))?e[1]:NaN},$t=function(e,t){var r=Wt(e,t);if(!r)return e+"";var i=r[0],n=r[1];return n<0?"0."+new Array(-n).join("0")+i:i.length>n+1?i.slice(0,n+1)+"."+i.slice(n+1):i+new Array(n-i.length+2).join("0")},Jt={"%":function(e,t){return(100*e).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return $t(100*e,t)},r:$t,s:function(e,t){var r=Wt(e,t);if(!r)return e+"";var i=r[0],n=r[1],a=n-(Kt=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Wt(e,Math.max(0,t+a-1))[0]},X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}},er=function(e){return e},tr=Array.prototype.map,rr=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];Xt=function(e){var t,r,i=void 0===e.grouping||void 0===e.thousands?er:(t=tr.call(e.grouping,Number),r=e.thousands+"",function(e,i){for(var n=e.length,a=[],s=0,o=t[0],c=0;n>0&&o>0&&(c+o+1>i&&(o=Math.max(1,i-c)),a.push(e.substring(n-=o,n+o)),!((c+=o+1)>i));)o=t[s=(s+1)%t.length];return a.reverse().join(r)}),n=void 0===e.currency?"":e.currency[0]+"",a=void 0===e.currency?"":e.currency[1]+"",s=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?er:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(tr.call(e.numerals,String)),c=void 0===e.percent?"%":e.percent+"",u=void 0===e.minus?"-":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=Ht(e)).fill,r=e.align,h=e.sign,l=e.symbol,f=e.zero,p=e.width,v=e.comma,m=e.precision,y=e.trim,g=e.type;"n"===g?(v=!0,g="g"):Jt[g]||(void 0===m&&(m=12),y=!0,g="g"),(f||"0"===t&&"="===r)&&(f=!0,t="0",r="=");var b="$"===l?n:"#"===l&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",k="$"===l?a:/[%p]/.test(g)?c:"",x=Jt[g],w=/[defgprs%]/.test(g);function _(e){var n,a,c,l=b,_=k;if("c"===g)_=x(e)+_,e="";else{var O=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:x(Math.abs(e),m),y&&(e=function(e){e:for(var t,r=e.length,i=1,n=-1;i<r;++i)switch(e[i]){case".":n=t=i;break;case"0":0===n&&(n=i),t=i;break;default:if(!+e[i])break e;n>0&&(n=0)}return n>0?e.slice(0,n)+e.slice(t+1):e}(e)),O&&0===+e&&"+"!==h&&(O=!1),l=(O?"("===h?h:u:"-"===h||"("===h?"":h)+l,_=("s"===g?rr[8+Kt/3]:"")+_+(O&&"("===h?")":""),w)for(n=-1,a=e.length;++n<a;)if(48>(c=e.charCodeAt(n))||c>57){_=(46===c?s+e.slice(n+1):e.slice(n))+_,e=e.slice(0,n);break}}v&&!f&&(e=i(e,1/0));var T=l.length+e.length+_.length,S=T<p?new Array(p-T+1).join(t):"";switch(v&&f&&(e=i(S+e,S.length?p-_.length:1/0),S=""),r){case"<":e=l+e+_+S;break;case"=":e=l+S+e+_;break;case"^":e=S.slice(0,T=S.length>>1)+l+e+_+S.slice(T);break;default:e=S+l+e+_}return o(e)}return m=void 0===m?6:/[gprs]/.test(g)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),_.toString=function(){return e+""},_}return{format:h,formatPrefix:function(e,t){var r=h(((e=Ht(e)).type="f",e)),i=3*Math.max(-8,Math.min(8,Math.floor(Qt(t)/3))),n=Math.pow(10,-i),a=rr[8+i/3];return function(e){return r(n*e)+a}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),Yt=Xt.format,Zt=Xt.formatPrefix;var ir=function(e,t,r){var i,n=e[0],a=e[e.length-1],s=dt(n,a,null==t?10:t);switch((r=Ht(null==r?",f":r)).type){case"s":var o=Math.max(Math.abs(n),Math.abs(a));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Qt(t)/3)))-Qt(Math.abs(e)))}(s,o))||(r.precision=i),Zt(r,o);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Qt(t)-Qt(e))+1}(s,Math.max(Math.abs(n),Math.abs(a))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Qt(Math.abs(e)))}(s))||(r.precision=i-2*("%"===r.type))}return Yt(r)};function nr(e){var t=e.domain;return e.ticks=function(e){var r=t();return ct(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){return ir(t(),e,r)},e.nice=function(r){null==r&&(r=10);var i,n=t(),a=0,s=n.length-1,o=n[a],c=n[s];return c<o&&(i=o,o=c,c=i,i=a,a=s,s=i),(i=ut(o,c,r))>0?i=ut(o=Math.floor(o/i)*i,c=Math.ceil(c/i)*i,r):i<0&&(i=ut(o=Math.ceil(o*i)/i,c=Math.floor(c*i)/i,r)),i>0?(n[a]=Math.floor(o/i)*i,n[s]=Math.ceil(c/i)*i,t(n)):i<0&&(n[a]=Math.ceil(o*i)/i,n[s]=Math.floor(c*i)/i,t(n)),e},e}function ar(){var e=jt(Dt,Ve);return e.copy=function(){return Gt(e,ar())},nr(e)}var sr=function(e,t){var r,i=0,n=(e=e.slice()).length-1,a=e[i],s=e[n];return s<a&&(r=i,i=n,n=r,r=a,a=s,s=r),e[i]=t.floor(a),e[n]=t.ceil(s),e};function or(e,t){return(t=Math.log(t/e))?function(r){return Math.log(r/e)/t}:Rt(t)}function cr(e,t){return e<0?function(r){return-Math.pow(-t,r)*Math.pow(-e,1-r)}:function(r){return Math.pow(t,r)*Math.pow(e,1-r)}}function ur(e){return isFinite(e)?+("1e"+e):e<0?0:e}function dr(e){return 10===e?ur:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function hr(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function lr(e){return function(t){return-e(-t)}}function fr(e,t){return e<0?-Math.pow(-e,t):Math.pow(e,t)}function pr(){var e=1,t=jt((function(t,r){return(r=fr(r,e)-(t=fr(t,e)))?function(i){return(fr(i,e)-t)/r}:Rt(r)}),(function(t,r){return r=fr(r,e)-(t=fr(t,e)),function(i){return fr(t+r*i,1/e)}})),r=t.domain;return t.exponent=function(t){return arguments.length?(e=+t,r(r())):e},t.copy=function(){return Gt(t,pr().exponent(e))},nr(t)}function vr(){return pr().exponent(.5)}var mr=new Date,yr=new Date;function gr(e,t,r,i){function n(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return n.floor=function(t){return e(t=new Date(+t)),t},n.ceil=function(r){return e(r=new Date(r-1)),t(r,1),e(r),r},n.round=function(e){var t=n(e),r=n.ceil(e);return e-t<r-e?t:r},n.offset=function(e,r){return t(e=new Date(+e),null==r?1:Math.floor(r)),e},n.range=function(r,i,a){var s,o=[];if(r=n.ceil(r),a=null==a?1:Math.floor(a),!(r<i)||!(a>0))return o;do{o.push(s=new Date(+r)),t(r,a),e(r)}while(s<r&&r<i);return o},n.filter=function(r){return gr((function(t){if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)}),(function(e,i){if(e>=e)if(i<0)for(;++i<=0;)for(;t(e,-1),!r(e););else for(;--i>=0;)for(;t(e,1),!r(e););}))},r&&(n.count=function(t,i){return mr.setTime(+t),yr.setTime(+i),e(mr),e(yr),Math.floor(r(mr,yr))},n.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?n.filter(i?function(t){return i(t)%e===0}:function(t){return n.count(0,t)%e===0}):n:null}),n}var br=gr((function(e){e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,t){e.setFullYear(e.getFullYear()+t)}),(function(e,t){return t.getFullYear()-e.getFullYear()}),(function(e){return e.getFullYear()}));br.every=function(e){return isFinite(e=Math.floor(e))&&e>0?gr((function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,r){t.setFullYear(t.getFullYear()+r*e)})):null};var kr=br,xr=(br.range,gr((function(e){e.setDate(1),e.setHours(0,0,0,0)}),(function(e,t){e.setMonth(e.getMonth()+t)}),(function(e,t){return t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())}),(function(e){return e.getMonth()}))),wr=xr,_r=(xr.range,1e3),Or=6e4,Tr=36e5,Sr=864e5,Cr=6048e5;function Ir(e){return gr((function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+7*t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Or)/Cr}))}var Mr=Ir(0),Er=Ir(1),Ar=Ir(2),Fr=Ir(3),Pr=Ir(4),Br=Ir(5),Rr=Ir(6),Vr=(Mr.range,Er.range,Ar.range,Fr.range,Pr.range,Br.range,Rr.range,gr((function(e){e.setHours(0,0,0,0)}),(function(e,t){e.setDate(e.getDate()+t)}),(function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Or)/Sr}),(function(e){return e.getDate()-1}))),Lr=Vr,Dr=(Vr.range,gr((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*_r-e.getMinutes()*Or)}),(function(e,t){e.setTime(+e+t*Tr)}),(function(e,t){return(t-e)/Tr}),(function(e){return e.getHours()}))),qr=Dr,Nr=(Dr.range,gr((function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*_r)}),(function(e,t){e.setTime(+e+t*Or)}),(function(e,t){return(t-e)/Or}),(function(e){return e.getMinutes()}))),Gr=Nr,jr=(Nr.range,gr((function(e){e.setTime(e-e.getMilliseconds())}),(function(e,t){e.setTime(+e+t*_r)}),(function(e,t){return(t-e)/_r}),(function(e){return e.getUTCSeconds()}))),Ur=jr,Hr=(jr.range,gr((function(){}),(function(e,t){e.setTime(+e+t)}),(function(e,t){return t-e})));Hr.every=function(e){return e=Math.floor(e),isFinite(e)&&e>0?e>1?gr((function(t){t.setTime(Math.floor(t/e)*e)}),(function(t,r){t.setTime(+t+r*e)}),(function(t,r){return(r-t)/e})):Hr:null};var zr=Hr;Hr.range;function Wr(e){return gr((function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+7*t)}),(function(e,t){return(t-e)/Cr}))}var Kr=Wr(0),Xr=Wr(1),Yr=Wr(2),Zr=Wr(3),Qr=Wr(4),$r=Wr(5),Jr=Wr(6),ei=(Kr.range,Xr.range,Yr.range,Zr.range,Qr.range,$r.range,Jr.range,gr((function(e){e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCDate(e.getUTCDate()+t)}),(function(e,t){return(t-e)/Sr}),(function(e){return e.getUTCDate()-1}))),ti=ei,ri=(ei.range,gr((function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)}),(function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()}),(function(e){return e.getUTCFullYear()})));ri.every=function(e){return isFinite(e=Math.floor(e))&&e>0?gr((function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,r){t.setUTCFullYear(t.getUTCFullYear()+r*e)})):null};var ii=ri;ri.range;function ni(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ai(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function si(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var oi,ci,ui,di={"-":"",_:" ",0:"0"},hi=/^\s*\d+/,li=/^%/,fi=/[\\^$*+?|[\]().{}]/g;function pi(e,t,r){var i=e<0?"-":"",n=(i?-e:e)+"",a=n.length;return i+(a<r?new Array(r-a+1).join(t)+n:n)}function vi(e){return e.replace(fi,"\\$&")}function mi(e){return new RegExp("^(?:"+e.map(vi).join("|")+")","i")}function yi(e){for(var t={},r=-1,i=e.length;++r<i;)t[e[r].toLowerCase()]=r;return t}function gi(e,t,r){var i=hi.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function bi(e,t,r){var i=hi.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function ki(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function xi(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function wi(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function _i(e,t,r){var i=hi.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function Oi(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function Ti(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function Si(e,t,r){var i=hi.exec(t.slice(r,r+1));return i?(e.q=3*i[0]-3,r+i[0].length):-1}function Ci(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function Ii(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function Mi(e,t,r){var i=hi.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function Ei(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function Ai(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function Fi(e,t,r){var i=hi.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function Pi(e,t,r){var i=hi.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function Bi(e,t,r){var i=hi.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function Ri(e,t,r){var i=li.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function Vi(e,t,r){var i=hi.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function Li(e,t,r){var i=hi.exec(t.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function Di(e,t){return pi(e.getDate(),t,2)}function qi(e,t){return pi(e.getHours(),t,2)}function Ni(e,t){return pi(e.getHours()%12||12,t,2)}function Gi(e,t){return pi(1+Lr.count(kr(e),e),t,3)}function ji(e,t){return pi(e.getMilliseconds(),t,3)}function Ui(e,t){return ji(e,t)+"000"}function Hi(e,t){return pi(e.getMonth()+1,t,2)}function zi(e,t){return pi(e.getMinutes(),t,2)}function Wi(e,t){return pi(e.getSeconds(),t,2)}function Ki(e){var t=e.getDay();return 0===t?7:t}function Xi(e,t){return pi(Mr.count(kr(e)-1,e),t,2)}function Yi(e){var t=e.getDay();return t>=4||0===t?Pr(e):Pr.ceil(e)}function Zi(e,t){return e=Yi(e),pi(Pr.count(kr(e),e)+(4===kr(e).getDay()),t,2)}function Qi(e){return e.getDay()}function $i(e,t){return pi(Er.count(kr(e)-1,e),t,2)}function Ji(e,t){return pi(e.getFullYear()%100,t,2)}function en(e,t){return pi((e=Yi(e)).getFullYear()%100,t,2)}function tn(e,t){return pi(e.getFullYear()%1e4,t,4)}function rn(e,t){var r=e.getDay();return pi((e=r>=4||0===r?Pr(e):Pr.ceil(e)).getFullYear()%1e4,t,4)}function nn(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+pi(t/60|0,"0",2)+pi(t%60,"0",2)}function an(e,t){return pi(e.getUTCDate(),t,2)}function sn(e,t){return pi(e.getUTCHours(),t,2)}function on(e,t){return pi(e.getUTCHours()%12||12,t,2)}function cn(e,t){return pi(1+ti.count(ii(e),e),t,3)}function un(e,t){return pi(e.getUTCMilliseconds(),t,3)}function dn(e,t){return un(e,t)+"000"}function hn(e,t){return pi(e.getUTCMonth()+1,t,2)}function ln(e,t){return pi(e.getUTCMinutes(),t,2)}function fn(e,t){return pi(e.getUTCSeconds(),t,2)}function pn(e){var t=e.getUTCDay();return 0===t?7:t}function vn(e,t){return pi(Kr.count(ii(e)-1,e),t,2)}function mn(e){var t=e.getUTCDay();return t>=4||0===t?Qr(e):Qr.ceil(e)}function yn(e,t){return e=mn(e),pi(Qr.count(ii(e),e)+(4===ii(e).getUTCDay()),t,2)}function gn(e){return e.getUTCDay()}function bn(e,t){return pi(Xr.count(ii(e)-1,e),t,2)}function kn(e,t){return pi(e.getUTCFullYear()%100,t,2)}function xn(e,t){return pi((e=mn(e)).getUTCFullYear()%100,t,2)}function wn(e,t){return pi(e.getUTCFullYear()%1e4,t,4)}function _n(e,t){var r=e.getUTCDay();return pi((e=r>=4||0===r?Qr(e):Qr.ceil(e)).getUTCFullYear()%1e4,t,4)}function On(){return"+0000"}function Tn(){return"%"}function Sn(e){return+e}function Cn(e){return Math.floor(+e/1e3)}!function(e){oi=function(e){var t=e.dateTime,r=e.date,i=e.time,n=e.periods,a=e.days,s=e.shortDays,o=e.months,c=e.shortMonths,u=mi(n),d=yi(n),h=mi(a),l=yi(a),f=mi(s),p=yi(s),v=mi(o),m=yi(o),y=mi(c),g=yi(c),b={a:function(e){return s[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return c[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:Di,e:Di,f:Ui,g:en,G:rn,H:qi,I:Ni,j:Gi,L:ji,m:Hi,M:zi,p:function(e){return n[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:Sn,s:Cn,S:Wi,u:Ki,U:Xi,V:Zi,w:Qi,W:$i,x:null,X:null,y:Ji,Y:tn,Z:nn,"%":Tn},k={a:function(e){return s[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return c[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:an,e:an,f:dn,g:xn,G:_n,H:sn,I:on,j:cn,L:un,m:hn,M:ln,p:function(e){return n[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:Sn,s:Cn,S:fn,u:pn,U:vn,V:yn,w:gn,W:bn,x:null,X:null,y:kn,Y:wn,Z:On,"%":Tn},x={a:function(e,t,r){var i=f.exec(t.slice(r));return i?(e.w=p[i[0].toLowerCase()],r+i[0].length):-1},A:function(e,t,r){var i=h.exec(t.slice(r));return i?(e.w=l[i[0].toLowerCase()],r+i[0].length):-1},b:function(e,t,r){var i=y.exec(t.slice(r));return i?(e.m=g[i[0].toLowerCase()],r+i[0].length):-1},B:function(e,t,r){var i=v.exec(t.slice(r));return i?(e.m=m[i[0].toLowerCase()],r+i[0].length):-1},c:function(e,r,i){return O(e,t,r,i)},d:Ii,e:Ii,f:Bi,g:Oi,G:_i,H:Ei,I:Ei,j:Mi,L:Pi,m:Ci,M:Ai,p:function(e,t,r){var i=u.exec(t.slice(r));return i?(e.p=d[i[0].toLowerCase()],r+i[0].length):-1},q:Si,Q:Vi,s:Li,S:Fi,u:bi,U:ki,V:xi,w:gi,W:wi,x:function(e,t,i){return O(e,r,t,i)},X:function(e,t,r){return O(e,i,t,r)},y:Oi,Y:_i,Z:Ti,"%":Ri};function w(e,t){return function(r){var i,n,a,s=[],o=-1,c=0,u=e.length;for(r instanceof Date||(r=new Date(+r));++o<u;)37===e.charCodeAt(o)&&(s.push(e.slice(c,o)),null!=(n=di[i=e.charAt(++o)])?i=e.charAt(++o):n="e"===i?" ":"0",(a=t[i])&&(i=a(r,n)),s.push(i),c=o+1);return s.push(e.slice(c,o)),s.join("")}}function _(e,t){return function(r){var i,n,a=si(1900,void 0,1);if(O(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(t&&!("Z"in a)&&(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(n=(i=ai(si(a.y,0,1))).getUTCDay(),i=n>4||0===n?Xr.ceil(i):Xr(i),i=ti.offset(i,7*(a.V-1)),a.y=i.getUTCFullYear(),a.m=i.getUTCMonth(),a.d=i.getUTCDate()+(a.w+6)%7):(n=(i=ni(si(a.y,0,1))).getDay(),i=n>4||0===n?Er.ceil(i):Er(i),i=Lr.offset(i,7*(a.V-1)),a.y=i.getFullYear(),a.m=i.getMonth(),a.d=i.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:"W"in a?1:0),n="Z"in a?ai(si(a.y,0,1)).getUTCDay():ni(si(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(n+5)%7:a.w+7*a.U-(n+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,ai(a)):ni(a)}}function O(e,t,r,i){for(var n,a,s=0,o=t.length,c=r.length;s<o;){if(i>=c)return-1;if(37===(n=t.charCodeAt(s++))){if(n=t.charAt(s++),!(a=x[n in di?t.charAt(s++):n])||(i=a(e,r,i))<0)return-1}else if(n!=r.charCodeAt(i++))return-1}return i}return b.x=w(r,b),b.X=w(i,b),b.c=w(t,b),k.x=w(r,k),k.X=w(i,k),k.c=w(t,k),{format:function(e){var t=w(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=_(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=w(e+="",k);return t.toString=function(){return e},t},utcParse:function(e){var t=_(e+="",!0);return t.toString=function(){return e},t}}}(e),ci=oi.format,oi.parse,ui=oi.utcFormat,oi.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var In=1e3,Mn=6e4,En=36e5,An=864e5,Fn=2592e6,Pn=31536e6;function Bn(e){return new Date(e)}function Rn(e){return e instanceof Date?+e:+new Date(+e)}function Vn(e,t,r,i,n,a,s,o,c){var u=jt(Dt,Ve),d=u.invert,h=u.domain,l=c(".%L"),f=c(":%S"),p=c("%I:%M"),v=c("%I %p"),m=c("%a %d"),y=c("%b %d"),g=c("%B"),b=c("%Y"),k=[[s,1,In],[s,5,5e3],[s,15,15e3],[s,30,3e4],[a,1,Mn],[a,5,3e5],[a,15,9e5],[a,30,18e5],[n,1,En],[n,3,108e5],[n,6,216e5],[n,12,432e5],[i,1,An],[i,2,1728e5],[r,1,6048e5],[t,1,Fn],[t,3,7776e6],[e,1,Pn]];function x(o){return(s(o)<o?l:a(o)<o?f:n(o)<o?p:i(o)<o?v:t(o)<o?r(o)<o?m:y:e(o)<o?g:b)(o)}function w(t,r,i,n){if(null==t&&(t=10),"number"===typeof t){var a=Math.abs(i-r)/t,s=$e((function(e){return e[2]})).right(k,a);s===k.length?(n=dt(r/Pn,i/Pn,t),t=e):s?(n=(s=k[a/k[s-1][2]<k[s][2]/a?s-1:s])[1],t=s[0]):(n=Math.max(dt(r,i,t),1),t=o)}return null==n?t:t.every(n)}return u.invert=function(e){return new Date(d(e))},u.domain=function(e){return arguments.length?h(It.call(e,Rn)):h().map(Bn)},u.ticks=function(e,t){var r,i=h(),n=i[0],a=i[i.length-1],s=a<n;return s&&(r=n,n=a,a=r),r=(r=w(e,n,a,t))?r.range(n,a+1):[],s?r.reverse():r},u.tickFormat=function(e,t){return null==t?x:c(t)},u.nice=function(e,t){var r=h();return(e=w(e,r[0],r[r.length-1],t))?h(sr(r,e)):u},u.copy=function(){return Gt(u,Vn(e,t,r,i,n,a,s,o,c))},u}var Ln=gr((function(e){e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),(function(e,t){e.setUTCMonth(e.getUTCMonth()+t)}),(function(e,t){return t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())}),(function(e){return e.getUTCMonth()})),Dn=Ln,qn=(Ln.range,gr((function(e){e.setUTCMinutes(0,0,0)}),(function(e,t){e.setTime(+e+t*Tr)}),(function(e,t){return(t-e)/Tr}),(function(e){return e.getUTCHours()}))),Nn=qn,Gn=(qn.range,gr((function(e){e.setUTCSeconds(0,0)}),(function(e,t){e.setTime(+e+t*Or)}),(function(e,t){return(t-e)/Or}),(function(e){return e.getUTCMinutes()}))),jn=Gn,Un=(Gn.range,function(e){return e.match(/.{6}/g).map((function(e){return"#"+e}))}),Hn=(Un("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Un("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Un("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Un("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Math.PI/180),zn=180/Math.PI,Wn=-.14861,Kn=1.78277,Xn=-.29227,Yn=-.90649,Zn=1.97294,Qn=-1.7884503806,$n=3.5172982438,Jn=-.6557636667999999;function ea(e){if(e instanceof ra)return new ra(e.h,e.s,e.l,e.opacity);e instanceof me||(e=pe(e));var t=e.r/255,r=e.g/255,i=e.b/255,n=(Jn*i+Qn*t-$n*r)/(Jn+Qn-$n),a=i-n,s=(Zn*(r-n)-Xn*a)/Yn,o=Math.sqrt(s*s+a*a)/(Zn*n*(1-n)),c=o?Math.atan2(s,a)*zn-120:NaN;return new ra(c<0?c+360:c,o,n,e.opacity)}function ta(e,t,r,i){return 1===arguments.length?ea(e):new ra(e,t,r,null==i?1:i)}function ra(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}function ia(e){return function t(r){function i(t,i){var n=e((t=ta(t)).h,(i=ta(i)).h),a=Me(t.s,i.s),s=Me(t.l,i.l),o=Me(t.opacity,i.opacity);return function(e){return t.h=n(e),t.s=a(e),t.l=s(Math.pow(e,r)),t.opacity=o(e),t+""}}return r=+r,i.gamma=t,i}(1)}K(ra,ta,X(Y,{brighter:function(e){return e=null==e?Q:Math.pow(Q,e),new ra(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?Z:Math.pow(Z,e),new ra(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Hn,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),n=Math.sin(e);return new me(255*(t+r*(Wn*i+Kn*n)),255*(t+r*(Xn*i+Yn*n)),255*(t+r*(Zn*i)),this.opacity)}}));ia((function(e,t){var r=t-e;return r?Ce(e,r>180||r<-180?r-360*Math.round(r/360):r):Se(isNaN(e)?t:e)}));var na=ia(Me);na(ta(300,.5,0),ta(-240,.5,1)),na(ta(-100,.75,.35),ta(80,1.5,.8)),na(ta(260,.75,.35),ta(80,1.5,.8)),ta();function aa(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}aa(Un("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),aa(Un("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),aa(Un("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),aa(Un("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var sa=r(30);function oa(e){return"[object Date]"===Object.prototype.toString.call(e)?e.toDateString():e}var ca,ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},da=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(c){n=!0,a=c}finally{try{!i&&o.return&&o.return()}finally{if(n)throw a}}return r}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")};function ha(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function la(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fa="linear",pa="ordinal",va="category",ma="literal",ya="time",ga=(la(ca={},fa,ar),la(ca,pa,(function(){return Pt(Ft().paddingInner(1))})),la(ca,va,At),la(ca,ma,Ra),la(ca,"log",(function e(){var t=jt(or,cr).domain([1,10]),r=t.domain,i=10,n=hr(10),a=dr(10);function s(){return n=hr(i),a=dr(i),r()[0]<0&&(n=lr(n),a=lr(a)),t}return t.base=function(e){return arguments.length?(i=+e,s()):i},t.domain=function(e){return arguments.length?(r(e),s()):r()},t.ticks=function(e){var t,s=r(),o=s[0],c=s[s.length-1];(t=c<o)&&(l=o,o=c,c=l);var u,d,h,l=n(o),f=n(c),p=null==e?10:+e,v=[];if(!(i%1)&&f-l<p){if(l=Math.round(l)-1,f=Math.round(f)+1,o>0){for(;l<f;++l)for(d=1,u=a(l);d<i;++d)if(!((h=u*d)<o)){if(h>c)break;v.push(h)}}else for(;l<f;++l)for(d=i-1,u=a(l);d>=1;--d)if(!((h=u*d)<o)){if(h>c)break;v.push(h)}}else v=ct(l,f,Math.min(f-l,p)).map(a);return t?v.reverse():v},t.tickFormat=function(e,r){if(null==r&&(r=10===i?".0e":","),"function"!==typeof r&&(r=Yt(r)),e===1/0)return r;null==e&&(e=10);var s=Math.max(1,i*e/t.ticks().length);return function(e){var t=e/a(Math.round(n(e)));return t*i<i-.5&&(t*=i),t<=s?r(e):""}},t.nice=function(){return r(sr(r(),{floor:function(e){return a(Math.floor(n(e)))},ceil:function(e){return a(Math.ceil(n(e)))}}))},t.copy=function(){return Gt(t,e().base(i))},t})),la(ca,ya,(function(){return Vn(kr,wr,Mr,Lr,qr,Gr,Ur,zr,ci).domain([new Date(2e3,0,1),new Date(2e3,0,2)])})),la(ca,"time-utc",(function(){return Vn(ii,Dn,Kr,ti,Nn,jn,Ur,zr,ui).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])})),ca),ba=["color","fill","opacity","stroke"];function ka(e){return""+e[0].toUpperCase()+e.slice(1)}function xa(e){if(!e)return null;var t=e.type,r=e.domain,i=e.range,n=r[0]===r[1]?0===r[0]?[-1,0]:[-r[0],r[0]]:r;if(t===ma)return Ra(i[0]);var a=ga[t]().domain(n).range(i);return t===pa&&(a.padding(.5),function(e){e.invert||(e.invert=function(t){var r=e.range(),i=da(r,2),n=i[0],a=i[1],s=Math.min(n,a),o=Math.max(n,a);if(t<s+e.padding()*e.step())return e.domain()[0];if(t>o-e.padding()*e.step())return e.domain()[e.domain().length-1];var c=Math.floor((t-s-e.padding()*e.step())/e.step());return e.domain()[c]})}(a)),a}function wa(e,t,r,i){var n=e.reduce((function(e,i){var n=t(i),a=r(i);return Ia(n)&&e.push(n),Ia(a)&&e.push(a),e}),[]);return n.length?i!==pa&&i!==va?rt(n):St(n).values():[]}function _a(e,t,r,i,n){return r===ma?{type:ma,domain:[],range:[t],distance:0,attr:e,baseValue:void 0,isValue:!0,accessor:i,accessor0:n}:"undefined"===typeof t?null:{type:va,range:[t],domain:[],distance:0,attr:e,baseValue:void 0,isValue:!0,accessor:i,accessor0:n}}function Oa(e,t){var r=t.domain,i=t.type,n=t.accessor,a=t.accessor0,s=function(e,t,r,i){return i===ya&&1===t.length?[r(e[0])].concat(ha(t)):t}(e,function(e,t){var r=new Set(e.map(t));return Array.from(r)}(e,n),a,i),o=function(e,t){var r=xa(t),i=0;if(r)for(var n=void 0,a=r(e[0]),s=1/0,o=void 0,c=1;c<e.length;c++)n=r(e[c]),(o=Math.abs(n-a))<s&&(s=o,i=c),a=n;return i}(s,t),c=[].concat(r);c[0]-=function(e){return e.length>1?(e[1]-e[0])/2:1===e.length?e[0]-.5:0}(s),c[r.length-1]+=function(e){return e.length>1?(e[e.length-1]-e[e.length-2])/2:1===e.length?e[0]-.5:0}(s),"log"===i&&r[0]<=0&&(c[0]=Math.min(r[1]/10,1));var u=function(e,t,r,i){if(e.length>1){var n=Math.max(r,1);return Math.abs(i(e[n])-i(e[n-1]))}return 1===e.length?Math.abs(i(t[1])-i(t[0])):0}(s,c,o,xa(ua({},t,{domain:c})));return{domain0:c[0],domainN:c[c.length-1],distance:u}}function Ta(e,t){var r=function(e,t){var r,i=e[t],n=e["_"+t+"Value"],a=e[t+"Range"],s=e[t+"Distance"],o=void 0===s?0:s,c=e[t+"BaseValue"],u=e[t+"Type"],d=void 0===u?fa:u,h=e[t+"NoFallBack"],l=e["get"+ka(t)],f=void 0===l?function(e){return e[t]}:l,p=e["get"+ka(t)+"0"],v=void 0===p?function(e){return e[t+"0"]}:p,m=e[t+"Domain"];return h||"undefined"===typeof i?("undefined"!==typeof c&&(m=function(e,t){var r=[].concat(e);return r[0]>t&&(r[0]=t),r[r.length-1]<t&&(r[r.length-1]=t),r}(m,c)),a&&m&&m.length?{domain:(r={domain:m,range:a,type:d,distance:o,attr:t,baseValue:c,accessor:f,accessor0:v}).domain,range:r.range,type:r.type,distance:r.distance,attr:r.attr,baseValue:r.baseValue,isValue:!1,accessor:r.accessor,accessor0:r.accessor0}:_a(t,n,e[t+"Type"],f,v)):_a(t,i,e[t+"Type"],f,v)}(e,t);if(!r)return null;if(!function(e,t){var r=t.attr,i=e._adjustBy,n=void 0===i?[]:i,a=e._adjustWhat;return(void 0===a?[]:a).length&&n.length&&-1!==n.indexOf(r)}(e,r))return r;var i=r.type;return i===pa||i===va?function(e){var t=xa(e),r=e.domain,i=e.range;return r.length>1?e.distance=Math.abs(t(r[1])-t(r[0])):e.distance=Math.abs(i[1]-i[0]),e}(r):function(e,t){var r=e._allData,i=e._adjustWhat,n=void 0===i?[]:i,a=t.domain.length,s=t.domain,o=s[0],c=s[a-1],u=t.distance;return r.forEach((function(e,r){if(-1!==n.indexOf(r)&&e&&e.length){var i=Oa(e,t),a=i.domain0,s=i.domainN,d=i.distance;o=Math.min(o,a),c=Math.max(c,s),u=Math.max(u,d)}})),t.domain=[o].concat(ha(s.slice(1,-1)),[c]),t.distance=u,t}(e,r)}function Sa(e,t){return xa(Ta(e,t))}function Ca(e,t){return t(e.data?e.data:e)}function Ia(e){return"undefined"!==typeof e}function Ma(e,t){var r=Ta(e,t);if(r){var i=xa(r);return function(e){return i(Ca(e,r.accessor))}}return null}function Ea(e,t){var r=Ta(e,t);if(r){var i=r.domain,n=r.baseValue,a=void 0===n?i[0]:n,s=xa(r);return function(e){var t=Ca(e,r.accessor0);return s(Ia(t)?t:a)}}return null}function Aa(e,t){var r=Ta(e,t);return r?(r.isValue||void 0!==e["_"+t+"Value"]||Object(sa.b)("[React-vis] Cannot use data defined "+t+" for this series type. Using fallback value instead."),e["_"+t+"Value"]||r.range[0]):null}function Fa(e){var t;return la(t={},"_"+e+"Value",a.a.any),la(t,e+"Domain",a.a.array),la(t,"get"+ka(e),a.a.func),la(t,"get"+ka(e)+"0",a.a.func),la(t,e+"Range",a.a.array),la(t,e+"Type",a.a.oneOf(Object.keys(ga))),la(t,e+"Distance",a.a.number),la(t,e+"BaseValue",a.a.any),t}function Pa(e,t){var r={};return Object.keys(e).forEach((function(i){t.find((function(e){var t=0===i.indexOf(e),r=0===i.indexOf("_"+e),n=0===i.indexOf("get"+ka(e));return t||r||n}))&&(r[i]=e[i])})),r}function Ba(e,t,r){var i={};return r.forEach((function(r){e["get"+ka(r)]||(i["get"+ka(r)]=function(e){return e[r]}),e["get"+ka(r)+"0"]||(i["get"+ka(r)+"0"]=function(e){return e[r+"0"]}),e[r+"Domain"]||(i[r+"Domain"]=wa(t,e["get"+ka(r)]||i["get"+ka(r)],e["get"+ka(r)+"0"]||i["get"+ka(r)+"0"],e[r+"Type"]),e[r+"Padding"]&&(i[r+"Domain"]=function(e,t){if(!e)return e;if(isNaN(parseFloat(e[0]))||isNaN(parseFloat(e[1])))return e;var r=da(e,2),i=r[0],n=r[1],a=.01*t*(n-i);return[i-a,n+a]}(i[r+"Domain"],e[r+"Padding"])))})),i}function Ra(e){function t(t){return void 0===t?e:t}function r(){return t}return t.domain=r,t.range=r,t.unknown=r,t.copy=r,t}function Va(e){return e?we(e).l>.57?"#222":"#fff":null}function La(e,t){var r=ba.reduce((function(t,r){var i=e[r+"Domain"],n=e[r+"Range"],a=e[r+"Type"];return i&&n&&a?ua({},t,la({},r,ga[a]().domain(i).range(n))):t}),{});return t.map((function(e){return ba.reduce((function(t,i){if(e.props&&void 0!==e.props[i]){var n=e.props[i],a=r[i],s=a?a(n):n;return ua({},t,la({},"_"+i+"Value",s))}return t}),{})}))}var Da=["Padding"].map((function(e){return new RegExp(e+"$","i")}));function qa(e){return Object.keys(e).reduce((function(t,r){return Da.every((function(e){return!r.match(e)}))||(t[r]=e[r]),t}),{})}var Na=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Ga(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ja(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Ua=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e})({},Fa("x"),Fa("y"),Fa("size"),Fa("opacity"),Fa("color"),{width:a.a.number,height:a.a.number,data:a.a.arrayOf(a.a.oneOfType([a.a.object,a.a.array])),onValueMouseOver:a.a.func,onValueMouseOut:a.a.func,onValueClick:a.a.func,onValueRightClick:a.a.func,onSeriesMouseOver:a.a.func,onSeriesMouseOut:a.a.func,onSeriesClick:a.a.func,onSeriesRightClick:a.a.func,onNearestX:a.a.func,onNearestXY:a.a.func,style:a.a.object,animation:Ze,stack:a.a.bool}),Ha=function(e){function t(){var e,r,i;Ga(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=i=ja(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i._seriesClickHandler=function(e){var t=i.props.onSeriesClick;t&&t({event:e})},i._seriesMouseOutHandler=function(e){var t=i.props.onSeriesMouseOut;t&&t({event:e})},i._seriesMouseOverHandler=function(e){var t=i.props.onSeriesMouseOver;t&&t({event:e})},i._seriesRightClickHandler=function(e){var t=i.props.onSeriesRightClick;t&&t({event:e})},i._valueClickHandler=function(e,t){var r=i.props,n=r.onValueClick,a=r.onSeriesClick;n&&n(e,{event:t}),a&&a({event:t})},i._valueMouseOutHandler=function(e,t){var r=i.props,n=r.onValueMouseOut,a=r.onSeriesMouseOut;n&&n(e,{event:t}),a&&a({event:t})},i._valueMouseOverHandler=function(e,t){var r=i.props,n=r.onValueMouseOver,a=r.onSeriesMouseOver;n&&n(e,{event:t}),a&&a({event:t})},i._valueRightClickHandler=function(e,t){var r=i.props,n=r.onValueRightClick,a=r.onSeriesRightClick;n&&n(e,{event:t}),a&&a({event:t})},ja(i,r)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Na(t,[{key:"onParentMouseMove",value:function(e){var t=this.props,r=t.onNearestX,i=t.onNearestXY,n=t.data;(r||i)&&n&&(i?this._handleNearestXY(e):this._handleNearestX(e))}},{key:"onParentTouchMove",value:function(e){e.preventDefault(),this.onParentMouseMove(e)}},{key:"onParentTouchStart",value:function(e){e.preventDefault()}},{key:"_getAttr0Functor",value:function(e){return Ea(this.props,e)}},{key:"_getAttributeFunctor",value:function(e){return Ma(this.props,e)}},{key:"_getAttributeValue",value:function(e){return Aa(this.props,e)}},{key:"_getScaleDistance",value:function(e){var t=Ta(this.props,e);return t?t.distance:0}},{key:"_getXYCoordinateInContainer",value:function(e){var t=this.props,r=t.marginTop,i=void 0===r?0:r,n=t.marginLeft,a=void 0===n?0:n,s=e.nativeEvent,o=e.currentTarget,c=o.getBoundingClientRect(),u=s.clientX,d=s.clientY;return"touchmove"===s.type&&(u=s.touches[0].pageX,d=s.touches[0].pageY),{x:u-c.left-o.clientLeft-a,y:d-c.top-o.clientTop-i}}},{key:"_handleNearestX",value:function(e){var t=this.props,r=t.onNearestX,i=t.data,n=Number.POSITIVE_INFINITY,a=null,s=null,o=this._getXYCoordinateInContainer(e),c=this._getAttributeFunctor("x");i.forEach((function(e,t){var r=c(e),i=Math.abs(o.x-r);i<n&&(n=i,a=e,s=t)})),a&&r(a,{innerX:c(a),index:s,event:e.nativeEvent})}},{key:"_handleNearestXY",value:function(e){var t=this.props,r=t.onNearestXY,i=t.data,n=this._getXYCoordinateInContainer(e),a=this._getAttributeFunctor("x"),s=this._getAttributeFunctor("y"),o=H().x(a).y(s)(i).find(n.x,n.y),c=o.data;c&&r(c,{innerX:o[0],innerY:o[1],index:o.index,event:e.nativeEvent})}}],[{key:"getParentConfig",value:function(){return{}}},{key:"requiresSVG",get:function(){return!0}}]),t}(z.PureComponent);Ha.displayName="AbstractSeries",Ha.propTypes=Ua,Ha.defaultProps={className:"",stack:!1,style:{}};var za=Ha,Wa=["#12939A","#79C7E3","#1A3177","#FF9833","#EF5D28"],Ka=["#19CDD7","#DDB27C","#88572C","#FF991F","#F15C17","#223F9A","#DA70BF","#125C77","#4DC19C","#776E57","#12939A","#17B8BE","#F6D18A","#B7885E","#FFCB99","#F89570","#829AE3","#E79FD5","#1E96BE","#89DAC1","#B3AD9E"],Xa=["#EF5D28","#FF9833"],Ya=[1,10],Za="literal",Qa=Wa[0],$a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function Ja(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function es(e){return e.type.prototype instanceof za}function ts(e){return W.a.Children.toArray(e).filter((function(e){return e&&es(e)}))}function rs(e,t){var r=e.some((function(e){return e&&e.props.stack})),i={};return e.reduce((function(e,n,a){if(!n)return e.push(null),e;var s=n.type.displayName,o=n.props,c=o.data,u=o.cluster,d=void 0===u?"default":u,h=o.stack,l=function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!!e&&e.some((function(e){return e.radius&&e.angle}))}(e)?e.map((function(e){return $a({},e,{x:e.radius*Math.cos(e.angle),y:e.radius*Math.sin(e.angle)})})):e}(c);if(!t||!l||!l.length||r&&!h)return e.push(l),e;var f=t+"0",p="y"===t?"x":"y";return e.push(l.map((function(e,r){var n,a;i[d]||(i[d]={}),i[d][s]||(i[d][s]={});var o,c=i[d][s][e[p]];if(!c)return i[d][s][e[p]]=(Ja(o={},f,e[f]),Ja(o,t,e[t]),o),$a({},e);var u=$a({},e,(Ja(n={},f,c[t]),Ja(n,t,c[t]+e[t]-(e[f]||0)),n));return i[d][s][e[p]]=(Ja(a={},f,u[f]),Ja(a,t,u[t]),a),u}))),e}),[])}function is(e){var t=[],r=function(e){var t={};return e.filter(es).forEach((function(e){var r=e.type.displayName,i=e.props.cluster;t[r]||(t[r]={sameTypeTotal:0,sameTypeIndex:0,clusters:new Set}),t[r].clusters.add(i),t[r].sameTypeTotal++})),t}(e),i=0;return e.forEach((function(e){var n=void 0;if(es(e)){var a=r[e.type.displayName];n=$a({},a,{seriesIndex:i,_colorValue:Wa[i%Wa.length],_opacityValue:1}),a.sameTypeIndex++,i++,e.props.cluster&&(n.cluster=e.props.cluster,n.clusters=Array.from(a.clusters),n.sameTypeTotal=n.clusters.length,n.sameTypeIndex=n.clusters.indexOf(e.props.cluster))}t.push(n)})),t}function ns(e){return e.reduce((function(e,t){return Math.max(t.radius,e)}),0)}var as=["xRange","xDomain","x","yRange","yDomain","y","colorRange","colorDomain","color","opacityRange","opacityDomain","opacity","strokeRange","strokeDomain","stroke","fillRange","fillDomain","fill","width","height","marginLeft","marginTop","marginRight","marginBottom","data","angleDomain","angleRange","angle","radiusDomain","radiusRange","radius","innerRadiusDomain","innerRadiusRange","innerRadius"];function ss(e){var t=e._stackBy,r=e.valuePosAttr,i=e.cluster,n=e.sameTypeTotal,a=void 0===n?1:n,s=e.sameTypeIndex,o=void 0===s?0:s;return t!==r||i||(a=1,o=0),{sameTypeTotal:a,sameTypeIndex:o}}var os=Math.PI,cs=2*os,us=1e-6,ds=cs-us;function hs(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ls(){return new hs}hs.prototype=ls.prototype={constructor:hs,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,r,i){this._+="Q"+ +e+","+ +t+","+(this._x1=+r)+","+(this._y1=+i)},bezierCurveTo:function(e,t,r,i,n,a){this._+="C"+ +e+","+ +t+","+ +r+","+ +i+","+(this._x1=+n)+","+(this._y1=+a)},arcTo:function(e,t,r,i,n){e=+e,t=+t,r=+r,i=+i,n=+n;var a=this._x1,s=this._y1,o=r-e,c=i-t,u=a-e,d=s-t,h=u*u+d*d;if(n<0)throw new Error("negative radius: "+n);if(null===this._x1)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(h>us)if(Math.abs(d*o-c*u)>us&&n){var l=r-a,f=i-s,p=o*o+c*c,v=l*l+f*f,m=Math.sqrt(p),y=Math.sqrt(h),g=n*Math.tan((os-Math.acos((p+h-v)/(2*m*y)))/2),b=g/y,k=g/m;Math.abs(b-1)>us&&(this._+="L"+(e+b*u)+","+(t+b*d)),this._+="A"+n+","+n+",0,0,"+ +(d*l>u*f)+","+(this._x1=e+k*o)+","+(this._y1=t+k*c)}else this._+="L"+(this._x1=e)+","+(this._y1=t);else;},arc:function(e,t,r,i,n,a){e=+e,t=+t,a=!!a;var s=(r=+r)*Math.cos(i),o=r*Math.sin(i),c=e+s,u=t+o,d=1^a,h=a?i-n:n-i;if(r<0)throw new Error("negative radius: "+r);null===this._x1?this._+="M"+c+","+u:(Math.abs(this._x1-c)>us||Math.abs(this._y1-u)>us)&&(this._+="L"+c+","+u),r&&(h<0&&(h=h%cs+cs),h>ds?this._+="A"+r+","+r+",0,1,"+d+","+(e-s)+","+(t-o)+"A"+r+","+r+",0,1,"+d+","+(this._x1=c)+","+(this._y1=u):h>us&&(this._+="A"+r+","+r+",0,"+ +(h>=os)+","+d+","+(this._x1=e+r*Math.cos(n))+","+(this._y1=t+r*Math.sin(n))))},rect:function(e,t,r,i){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +r+"v"+ +i+"h"+-r+"Z"},toString:function(){return this._}};var fs=ls,ps=function(e){return function(){return e}},vs=Math.abs,ms=Math.atan2,ys=Math.cos,gs=Math.max,bs=Math.min,ks=Math.sin,xs=Math.sqrt,ws=1e-12,_s=Math.PI,Os=_s/2,Ts=2*_s;function Ss(e){return e>1?0:e<-1?_s:Math.acos(e)}function Cs(e){return e>=1?Os:e<=-1?-Os:Math.asin(e)}function Is(e){return e.innerRadius}function Ms(e){return e.outerRadius}function Es(e){return e.startAngle}function As(e){return e.endAngle}function Fs(e){return e&&e.padAngle}function Ps(e,t,r,i,n,a,s,o){var c=r-e,u=i-t,d=s-n,h=o-a,l=h*c-d*u;if(!(l*l<ws))return[e+(l=(d*(t-a)-h*(e-n))/l)*c,t+l*u]}function Bs(e,t,r,i,n,a,s){var o=e-r,c=t-i,u=(s?a:-a)/xs(o*o+c*c),d=u*c,h=-u*o,l=e+d,f=t+h,p=r+d,v=i+h,m=(l+p)/2,y=(f+v)/2,g=p-l,b=v-f,k=g*g+b*b,x=n-a,w=l*v-p*f,_=(b<0?-1:1)*xs(gs(0,x*x*k-w*w)),O=(w*b-g*_)/k,T=(-w*g-b*_)/k,S=(w*b+g*_)/k,C=(-w*g+b*_)/k,I=O-m,M=T-y,E=S-m,A=C-y;return I*I+M*M>E*E+A*A&&(O=S,T=C),{cx:O,cy:T,x01:-d,y01:-h,x11:O*(n/x-1),y11:T*(n/x-1)}}var Rs=function(){var e=Is,t=Ms,r=ps(0),i=null,n=Es,a=As,s=Fs,o=null;function c(){var c,u,d=+e.apply(this,arguments),h=+t.apply(this,arguments),l=n.apply(this,arguments)-Os,f=a.apply(this,arguments)-Os,p=vs(f-l),v=f>l;if(o||(o=c=fs()),h<d&&(u=h,h=d,d=u),h>ws)if(p>Ts-ws)o.moveTo(h*ys(l),h*ks(l)),o.arc(0,0,h,l,f,!v),d>ws&&(o.moveTo(d*ys(f),d*ks(f)),o.arc(0,0,d,f,l,v));else{var m,y,g=l,b=f,k=l,x=f,w=p,_=p,O=s.apply(this,arguments)/2,T=O>ws&&(i?+i.apply(this,arguments):xs(d*d+h*h)),S=bs(vs(h-d)/2,+r.apply(this,arguments)),C=S,I=S;if(T>ws){var M=Cs(T/d*ks(O)),E=Cs(T/h*ks(O));(w-=2*M)>ws?(k+=M*=v?1:-1,x-=M):(w=0,k=x=(l+f)/2),(_-=2*E)>ws?(g+=E*=v?1:-1,b-=E):(_=0,g=b=(l+f)/2)}var A=h*ys(g),F=h*ks(g),P=d*ys(x),B=d*ks(x);if(S>ws){var R,V=h*ys(b),L=h*ks(b),D=d*ys(k),q=d*ks(k);if(p<_s&&(R=Ps(A,F,D,q,V,L,P,B))){var N=A-R[0],G=F-R[1],j=V-R[0],U=L-R[1],H=1/ks(Ss((N*j+G*U)/(xs(N*N+G*G)*xs(j*j+U*U)))/2),z=xs(R[0]*R[0]+R[1]*R[1]);C=bs(S,(d-z)/(H-1)),I=bs(S,(h-z)/(H+1))}}_>ws?I>ws?(m=Bs(D,q,A,F,h,I,v),y=Bs(V,L,P,B,h,I,v),o.moveTo(m.cx+m.x01,m.cy+m.y01),I<S?o.arc(m.cx,m.cy,I,ms(m.y01,m.x01),ms(y.y01,y.x01),!v):(o.arc(m.cx,m.cy,I,ms(m.y01,m.x01),ms(m.y11,m.x11),!v),o.arc(0,0,h,ms(m.cy+m.y11,m.cx+m.x11),ms(y.cy+y.y11,y.cx+y.x11),!v),o.arc(y.cx,y.cy,I,ms(y.y11,y.x11),ms(y.y01,y.x01),!v))):(o.moveTo(A,F),o.arc(0,0,h,g,b,!v)):o.moveTo(A,F),d>ws&&w>ws?C>ws?(m=Bs(P,B,V,L,d,-C,v),y=Bs(A,F,D,q,d,-C,v),o.lineTo(m.cx+m.x01,m.cy+m.y01),C<S?o.arc(m.cx,m.cy,C,ms(m.y01,m.x01),ms(y.y01,y.x01),!v):(o.arc(m.cx,m.cy,C,ms(m.y01,m.x01),ms(m.y11,m.x11),!v),o.arc(0,0,d,ms(m.cy+m.y11,m.cx+m.x11),ms(y.cy+y.y11,y.cx+y.x11),v),o.arc(y.cx,y.cy,C,ms(y.y11,y.x11),ms(y.y01,y.x01),!v))):o.arc(0,0,d,x,k,v):o.lineTo(P,B)}else o.moveTo(0,0);if(o.closePath(),c)return o=null,c+""||null}return c.centroid=function(){var r=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,i=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2-_s/2;return[ys(i)*r,ks(i)*r]},c.innerRadius=function(t){return arguments.length?(e="function"===typeof t?t:ps(+t),c):e},c.outerRadius=function(e){return arguments.length?(t="function"===typeof e?e:ps(+e),c):t},c.cornerRadius=function(e){return arguments.length?(r="function"===typeof e?e:ps(+e),c):r},c.padRadius=function(e){return arguments.length?(i=null==e?null:"function"===typeof e?e:ps(+e),c):i},c.startAngle=function(e){return arguments.length?(n="function"===typeof e?e:ps(+e),c):n},c.endAngle=function(e){return arguments.length?(a="function"===typeof e?e:ps(+e),c):a},c.padAngle=function(e){return arguments.length?(s="function"===typeof e?e:ps(+e),c):s},c.context=function(e){return arguments.length?(o=null==e?null:e,c):o},c},Vs=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Ls=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var Ds="rv-xy-plot__series rv-xy-plot__series--arc",qs=["radius","angle"],Ns=Ls({},za.defaultProps,{center:{x:0,y:0},arcClassName:"",className:"",style:{},padAngle:0});function Gs(e){var t=e.radius,r=e.angle,i=e.angle0,n=-1*r+Math.PI/2,a=-1*i+Math.PI/2;return Ls({},e,{x:t*Math.cos(n),y:t*Math.sin(n),angle:n,angle0:a})}var js=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),i=r._getAllScaleProps(e);return r.state={scaleProps:i},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Vs(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({scaleProps:this._getAllScaleProps(e)})}},{key:"_getAllScaleProps",value:function(e){var t=this._getDefaultScaleProps(e),r=Pa(e,qs),i=Ba(Ls({},t,r),e.data,qs);return Ls({},t,r,i)}},{key:"_getDefaultScaleProps",value:function(e){var t=e.innerWidth,r=e.innerHeight,i=Math.min(t/2,r/2);return{radiusRange:[0,i],_radiusValue:i,angleType:"literal"}}},{key:"render",value:function(){var e=this,r=this.props,i=r.arcClassName,n=r.animation,a=r.className,s=r.center,o=r.data,c=r.disableSeries,u=r.hideSeries,d=r.marginLeft,h=r.marginTop,l=r.padAngle,f=r.style;if(!o)return null;if(n){var p=o.map((function(e){return Ls({},e)}));return W.a.createElement("g",{className:"rv-xy-plot__series--arc__animation-wrapper"},W.a.createElement(Ye,Ls({},this.props,{animatedProps:as,data:p}),W.a.createElement(t,Ls({},this.props,{animation:null,disableSeries:!0,data:p}))),W.a.createElement(t,Ls({},this.props,{animation:null,hideSeries:!0,style:{stroke:"red"}})))}var v=this.state.scaleProps,m=v.radiusDomain,y=Ma(v,"radius"),g=Ea(v,"radius"),b=Ma(v,"angle"),k=Ea(v,"angle"),x=this._getAttributeFunctor("fill")||this._getAttributeFunctor("color"),w=this._getAttributeFunctor("stroke")||this._getAttributeFunctor("color"),_=this._getAttributeFunctor("opacity"),O=this._getAttributeFunctor("x"),T=this._getAttributeFunctor("y");return W.a.createElement("g",{className:Ds+" "+a,onMouseOver:this._seriesMouseOverHandler,onMouseOut:this._seriesMouseOutHandler,onClick:this._seriesClickHandler,onContextMenu:this._seriesRightClickHandler,opacity:u?0:1,pointerEvents:c?"none":"all",transform:"translate("+(d+O(s))+","+(h+T(s))+")"},o.map((function(t,r){var n={innerRadius:m[1]===m[0]?0:g(t),outerRadius:y(t),startAngle:k(t)||0,endAngle:b(t)},a=Rs().padAngle(l),s=t.style||{},o=t.className||"";return W.a.createElement("path",{style:Ls({opacity:_&&_(t),stroke:w&&w(t),fill:x&&x(t)},f,s),onClick:function(r){return e._valueClickHandler(Gs(t),r)},onContextMenu:function(r){return e._valueRightClickHandler(Gs(t),r)},onMouseOver:function(r){return e._valueMouseOverHandler(Gs(t),r)},onMouseOut:function(r){return e._valueMouseOutHandler(Gs(t),r)},key:r,className:Ds+"-path "+i+" "+o,d:a(n)})})))}}]),t}(za);js.propTypes=Ls({},za.propTypes,Fa("radius"),Fa("angle"),{center:a.a.shape({x:a.a.number,y:a.a.number}),arcClassName:a.a.string,padAngle:a.a.oneOfType([a.a.func,a.a.number])}),js.defaultProps=Ns,js.displayName="ArcSeries";var Us=js;function Hs(e){this._context=e}Hs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}};var zs=function(e){return new Hs(e)};function Ws(e){return e[0]}function Ks(e){return e[1]}var Xs=function(){var e=Ws,t=Ks,r=ps(!0),i=null,n=zs,a=null;function s(s){var o,c,u,d=s.length,h=!1;for(null==i&&(a=n(u=fs())),o=0;o<=d;++o)!(o<d&&r(c=s[o],o,s))===h&&((h=!h)?a.lineStart():a.lineEnd()),h&&a.point(+e(c,o,s),+t(c,o,s));if(u)return a=null,u+""||null}return s.x=function(t){return arguments.length?(e="function"===typeof t?t:ps(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:ps(+e),s):t},s.defined=function(e){return arguments.length?(r="function"===typeof e?e:ps(!!e),s):r},s.curve=function(e){return arguments.length?(n=e,null!=i&&(a=n(i)),s):n},s.context=function(e){return arguments.length?(null==e?i=a=null:a=n(i=e),s):i},s},Ys=function(){var e=Ws,t=null,r=ps(0),i=Ks,n=ps(!0),a=null,s=zs,o=null;function c(c){var u,d,h,l,f,p=c.length,v=!1,m=new Array(p),y=new Array(p);for(null==a&&(o=s(f=fs())),u=0;u<=p;++u){if(!(u<p&&n(l=c[u],u,c))===v)if(v=!v)d=u,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=u-1;h>=d;--h)o.point(m[h],y[h]);o.lineEnd(),o.areaEnd()}v&&(m[u]=+e(l,u,c),y[u]=+r(l,u,c),o.point(t?+t(l,u,c):m[u],i?+i(l,u,c):y[u]))}if(f)return o=null,f+""||null}function u(){return Xs().defined(n).curve(s).context(a)}return c.x=function(r){return arguments.length?(e="function"===typeof r?r:ps(+r),t=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:ps(+t),c):e},c.x1=function(e){return arguments.length?(t=null==e?null:"function"===typeof e?e:ps(+e),c):t},c.y=function(e){return arguments.length?(r="function"===typeof e?e:ps(+e),i=null,c):r},c.y0=function(e){return arguments.length?(r="function"===typeof e?e:ps(+e),c):r},c.y1=function(e){return arguments.length?(i=null==e?null:"function"===typeof e?e:ps(+e),c):i},c.lineX0=c.lineY0=function(){return u().x(e).y(r)},c.lineY1=function(){return u().x(e).y(i)},c.lineX1=function(){return u().x(t).y(r)},c.defined=function(e){return arguments.length?(n="function"===typeof e?e:ps(!!e),c):n},c.curve=function(e){return arguments.length?(s=e,null!=a&&(o=s(a)),c):s},c.context=function(e){return arguments.length?(null==e?a=o=null:o=s(a=e),c):a},c},Zs=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},Qs=function(e){return e},$s=function(){var e=Qs,t=Zs,r=null,i=ps(0),n=ps(Ts),a=ps(0);function s(s){var o,c,u,d,h,l=s.length,f=0,p=new Array(l),v=new Array(l),m=+i.apply(this,arguments),y=Math.min(Ts,Math.max(-Ts,n.apply(this,arguments)-m)),g=Math.min(Math.abs(y)/l,a.apply(this,arguments)),b=g*(y<0?-1:1);for(o=0;o<l;++o)(h=v[p[o]=o]=+e(s[o],o,s))>0&&(f+=h);for(null!=t?p.sort((function(e,r){return t(v[e],v[r])})):null!=r&&p.sort((function(e,t){return r(s[e],s[t])})),o=0,u=f?(y-l*b)/f:0;o<l;++o,m=d)c=p[o],d=m+((h=v[c])>0?h*u:0)+b,v[c]={data:s[c],index:o,value:h,startAngle:m,endAngle:d,padAngle:g};return v}return s.value=function(t){return arguments.length?(e="function"===typeof t?t:ps(+t),s):e},s.sortValues=function(e){return arguments.length?(t=e,r=null,s):t},s.sort=function(e){return arguments.length?(r=e,t=null,s):r},s.startAngle=function(e){return arguments.length?(i="function"===typeof e?e:ps(+e),s):i},s.endAngle=function(e){return arguments.length?(n="function"===typeof e?e:ps(+e),s):n},s.padAngle=function(e){return arguments.length?(a="function"===typeof e?e:ps(+e),s):a},s},Js=to(zs);function eo(e){this._curve=e}function to(e){function t(t){return new eo(e(t))}return t._curve=e,t}function ro(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(e){return arguments.length?t(to(e)):t()._curve},e}eo.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};var io=function(){return ro(Xs().curve(Js))},no=function(){var e=Ys().curve(Js),t=e.curve,r=e.lineX0,i=e.lineX1,n=e.lineY0,a=e.lineY1;return e.angle=e.x,delete e.x,e.startAngle=e.x0,delete e.x0,e.endAngle=e.x1,delete e.x1,e.radius=e.y,delete e.y,e.innerRadius=e.y0,delete e.y0,e.outerRadius=e.y1,delete e.y1,e.lineStartAngle=function(){return ro(r())},delete e.lineX0,e.lineEndAngle=function(){return ro(i())},delete e.lineX1,e.lineInnerRadius=function(){return ro(n())},delete e.lineY0,e.lineOuterRadius=function(){return ro(a())},delete e.lineY1,e.curve=function(e){return arguments.length?t(to(e)):t()._curve},e},ao=function(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]},so=Array.prototype.slice;function oo(e){return e.source}function co(e){return e.target}function uo(e){var t=oo,r=co,i=Ws,n=Ks,a=null;function s(){var s,o=so.call(arguments),c=t.apply(this,o),u=r.apply(this,o);if(a||(a=s=fs()),e(a,+i.apply(this,(o[0]=c,o)),+n.apply(this,o),+i.apply(this,(o[0]=u,o)),+n.apply(this,o)),s)return a=null,s+""||null}return s.source=function(e){return arguments.length?(t=e,s):t},s.target=function(e){return arguments.length?(r=e,s):r},s.x=function(e){return arguments.length?(i="function"===typeof e?e:ps(+e),s):i},s.y=function(e){return arguments.length?(n="function"===typeof e?e:ps(+e),s):n},s.context=function(e){return arguments.length?(a=null==e?null:e,s):a},s}function ho(e,t,r,i,n){e.moveTo(t,r),e.bezierCurveTo(t=(t+i)/2,r,t,n,i,n)}function lo(e,t,r,i,n){e.moveTo(t,r),e.bezierCurveTo(t,r=(r+n)/2,i,r,i,n)}function fo(e,t,r,i,n){var a=ao(t,r),s=ao(t,r=(r+n)/2),o=ao(i,r),c=ao(i,n);e.moveTo(a[0],a[1]),e.bezierCurveTo(s[0],s[1],o[0],o[1],c[0],c[1])}function po(){return uo(ho)}function vo(){return uo(lo)}function mo(){var e=uo(fo);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}var yo={draw:function(e,t){var r=Math.sqrt(t/_s);e.moveTo(r,0),e.arc(0,0,r,0,Ts)}},go={draw:function(e,t){var r=Math.sqrt(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},bo=Math.sqrt(1/3),ko=2*bo,xo={draw:function(e,t){var r=Math.sqrt(t/ko),i=r*bo;e.moveTo(0,-r),e.lineTo(i,0),e.lineTo(0,r),e.lineTo(-i,0),e.closePath()}},wo=Math.sin(_s/10)/Math.sin(7*_s/10),_o=Math.sin(Ts/10)*wo,Oo=-Math.cos(Ts/10)*wo,To={draw:function(e,t){var r=Math.sqrt(.8908130915292852*t),i=_o*r,n=Oo*r;e.moveTo(0,-r),e.lineTo(i,n);for(var a=1;a<5;++a){var s=Ts*a/5,o=Math.cos(s),c=Math.sin(s);e.lineTo(c*r,-o*r),e.lineTo(o*i-c*n,c*i+o*n)}e.closePath()}},So={draw:function(e,t){var r=Math.sqrt(t),i=-r/2;e.rect(i,i,r,r)}},Co=Math.sqrt(3),Io={draw:function(e,t){var r=-Math.sqrt(t/(3*Co));e.moveTo(0,2*r),e.lineTo(-Co*r,-r),e.lineTo(Co*r,-r),e.closePath()}},Mo=-.5,Eo=Math.sqrt(3)/2,Ao=1/Math.sqrt(12),Fo=3*(Ao/2+1),Po={draw:function(e,t){var r=Math.sqrt(t/Fo),i=r/2,n=r*Ao,a=i,s=r*Ao+r,o=-a,c=s;e.moveTo(i,n),e.lineTo(a,s),e.lineTo(o,c),e.lineTo(Mo*i-Eo*n,Eo*i+Mo*n),e.lineTo(Mo*a-Eo*s,Eo*a+Mo*s),e.lineTo(Mo*o-Eo*c,Eo*o+Mo*c),e.lineTo(Mo*i+Eo*n,Mo*n-Eo*i),e.lineTo(Mo*a+Eo*s,Mo*s-Eo*a),e.lineTo(Mo*o+Eo*c,Mo*c-Eo*o),e.closePath()}},Bo=[yo,go,xo,So,To,Io,Po],Ro=function(){var e=ps(yo),t=ps(64),r=null;function i(){var i;if(r||(r=i=fs()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return i.type=function(t){return arguments.length?(e="function"===typeof t?t:ps(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:ps(+e),i):t},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i},Vo=function(){};function Lo(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function Do(e){this._context=e}Do.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Lo(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Lo(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var qo=function(e){return new Do(e)};function No(e){this._context=e}No.prototype={areaStart:Vo,areaEnd:Vo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Lo(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Go=function(e){return new No(e)};function jo(e){this._context=e}jo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:Lo(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};var Uo=function(e){return new jo(e)};function Ho(e,t){this._basis=new Do(e),this._beta=t}Ho.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,r=e.length-1;if(r>0)for(var i,n=e[0],a=t[0],s=e[r]-n,o=t[r]-a,c=-1;++c<=r;)i=c/r,this._basis.point(this._beta*e[c]+(1-this._beta)*(n+i*s),this._beta*t[c]+(1-this._beta)*(a+i*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var zo=function e(t){function r(e){return 1===t?new Do(e):new Ho(e,t)}return r.beta=function(t){return e(+t)},r}(.85);function Wo(e,t,r){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-r),e._x2,e._y2)}function Ko(e,t){this._context=e,this._k=(1-t)/6}Ko.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Wo(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Wo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Xo=function e(t){function r(e){return new Ko(e,t)}return r.tension=function(t){return e(+t)},r}(0);function Yo(e,t){this._context=e,this._k=(1-t)/6}Yo.prototype={areaStart:Vo,areaEnd:Vo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Wo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var Zo=function e(t){function r(e){return new Yo(e,t)}return r.tension=function(t){return e(+t)},r}(0);function Qo(e,t){this._context=e,this._k=(1-t)/6}Qo.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Wo(this,e,t)}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var $o=function e(t){function r(e){return new Qo(e,t)}return r.tension=function(t){return e(+t)},r}(0);function Jo(e,t,r){var i=e._x1,n=e._y1,a=e._x2,s=e._y2;if(e._l01_a>ws){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,n=(n*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>ws){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*u+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*u+e._y1*e._l23_2a-r*e._l12_2a)/d}e._context.bezierCurveTo(i,n,a,s,e._x2,e._y2)}function ec(e,t){this._context=e,this._alpha=t}ec.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:Jo(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var tc=function e(t){function r(e){return t?new ec(e,t):new Ko(e,0)}return r.alpha=function(t){return e(+t)},r}(.5);function rc(e,t){this._context=e,this._alpha=t}rc.prototype={areaStart:Vo,areaEnd:Vo,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Jo(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ic=function e(t){function r(e){return t?new rc(e,t):new Yo(e,0)}return r.alpha=function(t){return e(+t)},r}(.5);function nc(e,t){this._context=e,this._alpha=t}nc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var r=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(r*r+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Jo(this,e,t)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};var ac=function e(t){function r(e){return t?new nc(e,t):new Qo(e,0)}return r.alpha=function(t){return e(+t)},r}(.5);function sc(e){this._context=e}sc.prototype={areaStart:Vo,areaEnd:Vo,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};var oc=function(e){return new sc(e)};function cc(e){return e<0?-1:1}function uc(e,t,r){var i=e._x1-e._x0,n=t-e._x1,a=(e._y1-e._y0)/(i||n<0&&-0),s=(r-e._y1)/(n||i<0&&-0),o=(a*n+s*i)/(i+n);return(cc(a)+cc(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function dc(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function hc(e,t,r){var i=e._x0,n=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,n+o*t,a-o,s-o*r,a,s)}function lc(e){this._context=e}function fc(e){this._context=new pc(e)}function pc(e){this._context=e}function vc(e){return new lc(e)}function mc(e){return new fc(e)}function yc(e){this._context=e}function gc(e){var t,r,i=e.length-1,n=new Array(i),a=new Array(i),s=new Array(i);for(n[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<i-1;++t)n[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(n[i-1]=2,a[i-1]=7,s[i-1]=8*e[i-1]+e[i],t=1;t<i;++t)r=n[t]/a[t-1],a[t]-=r,s[t]-=r*s[t-1];for(n[i-1]=s[i-1]/a[i-1],t=i-2;t>=0;--t)n[t]=(s[t]-n[t+1])/a[t];for(a[i-1]=(e[i]+n[i-1])/2,t=0;t<i-1;++t)a[t]=2*e[t+1]-n[t+1];return[n,a]}lc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:hc(this,this._t0,dc(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,hc(this,dc(this,r=uc(this,e,t)),r);break;default:hc(this,this._t0,r=uc(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(fc.prototype=Object.create(lc.prototype)).point=function(e,t){lc.prototype.point.call(this,t,e)},pc.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,n,a){this._context.bezierCurveTo(t,e,i,r,a,n)}},yc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var i=gc(e),n=gc(t),a=0,s=1;s<r;++a,++s)this._context.bezierCurveTo(i[0][a],n[0][a],i[1][a],n[1][a],e[s],t[s]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};var bc=function(e){return new yc(e)};function kc(e,t){this._context=e,this._t=t}kc.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var xc=function(e){return new kc(e,.5)};function wc(e){return new kc(e,0)}function _c(e){return new kc(e,1)}var Oc=function(e,t){if((n=e.length)>1)for(var r,i,n,a=1,s=e[t[0]],o=s.length;a<n;++a)for(i=s,s=e[t[a]],r=0;r<o;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]},Tc=function(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r};function Sc(e,t){return e[t]}var Cc=function(){var e=ps([]),t=Tc,r=Oc,i=Sc;function n(n){var a,s,o=e.apply(this,arguments),c=n.length,u=o.length,d=new Array(u);for(a=0;a<u;++a){for(var h,l=o[a],f=d[a]=new Array(c),p=0;p<c;++p)f[p]=h=[0,+i(n[p],l,p,n)],h.data=n[p];f.key=l}for(a=0,s=t(d);a<u;++a)d[s[a]].index=a;return r(d,s),d}return n.keys=function(t){return arguments.length?(e="function"===typeof t?t:ps(so.call(t)),n):e},n.value=function(e){return arguments.length?(i="function"===typeof e?e:ps(+e),n):i},n.order=function(e){return arguments.length?(t=null==e?Tc:"function"===typeof e?e:ps(so.call(e)),n):t},n.offset=function(e){return arguments.length?(r=null==e?Oc:e,n):r},n},Ic=function(e,t){if((i=e.length)>0){for(var r,i,n,a=0,s=e[0].length;a<s;++a){for(n=r=0;r<i;++r)n+=e[r][a][1]||0;if(n)for(r=0;r<i;++r)e[r][a][1]/=n}Oc(e,t)}},Mc=function(e,t){if((o=e.length)>0)for(var r,i,n,a,s,o,c=0,u=e[t[0]].length;c<u;++c)for(a=s=0,r=0;r<o;++r)(n=(i=e[t[r]][c])[1]-i[0])>0?(i[0]=a,i[1]=a+=n):n<0?(i[1]=s,i[0]=s+=n):(i[0]=0,i[1]=n)},Ec=function(e,t){if((r=e.length)>0){for(var r,i=0,n=e[t[0]],a=n.length;i<a;++i){for(var s=0,o=0;s<r;++s)o+=e[s][i][1]||0;n[i][1]+=n[i][0]=-o/2}Oc(e,t)}},Ac=function(e,t){if((n=e.length)>0&&(i=(r=e[t[0]]).length)>0){for(var r,i,n,a=0,s=1;s<i;++s){for(var o=0,c=0,u=0;o<n;++o){for(var d=e[t[o]],h=d[s][1]||0,l=(h-(d[s-1][1]||0))/2,f=0;f<o;++f){var p=e[t[f]];l+=(p[s][1]||0)-(p[s-1][1]||0)}c+=h,u+=l*h}r[s-1][1]+=r[s-1][0]=a,c&&(a-=u/c)}r[s-1][1]+=r[s-1][0]=a,Oc(e,t)}},Fc=function(e){var t=e.map(Pc);return Tc(e).sort((function(e,r){return t[e]-t[r]}))};function Pc(e){for(var t,r=-1,i=0,n=e.length,a=-1/0;++r<n;)(t=+e[r][1])>a&&(a=t,i=r);return i}var Bc=function(e){var t=e.map(Rc);return Tc(e).sort((function(e,r){return t[e]-t[r]}))};function Rc(e){for(var t,r=0,i=-1,n=e.length;++i<n;)(t=+e[i][1])&&(r+=t);return r}var Vc=function(e){return Bc(e).reverse()},Lc=function(e){var t,r,i=e.length,n=e.map(Rc),a=Fc(e),s=0,o=0,c=[],u=[];for(t=0;t<i;++t)r=a[t],s<o?(s+=n[r],c.push(r)):(o+=n[r],u.push(r));return u.reverse().concat(c)},Dc=function(e){return Tc(e).reverse()},qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Nc=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Gc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jc(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Uc=function(e){function t(){return Gc(this,t),jc(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Nc(t,[{key:"_renderArea",value:function(e,t,r,n,a,s){var o=Ys();return null!==a&&("string"===typeof a&&i[a]?o=o.curve(i[a]):"function"===typeof a&&(o=o.curve(a))),(o=(o=o.defined(s)).x(t).y0(r).y1(n))(e)}},{key:"render",value:function(){var e=this.props,r=e.animation,i=e.className,n=e.curve,a=e.data,s=e.marginLeft,o=e.marginTop,c=e.style;if(this.props.nullAccessor&&Object(sa.b)("nullAccessor has been renamed to getNull",!0),!a)return null;if(r)return W.a.createElement(Ye,qc({},this.props,{animatedProps:as}),W.a.createElement(t,qc({},this.props,{animation:null})));var u=this._getAttributeFunctor("x"),d=this._getAttributeFunctor("y"),h=this._getAttr0Functor("y"),l=this._getAttributeValue("stroke")||this._getAttributeValue("color"),f=this._getAttributeValue("fill")||this._getAttributeValue("color"),p=this._getAttributeValue("opacity"),v=Number.isFinite(p)?p:1,m=this.props.nullAccessor||this.props.getNull,y=this._renderArea(a,u,h,d,n,m);return W.a.createElement("path",{d:y,className:"rv-xy-plot__series rv-xy-plot__series--line "+i,transform:"translate("+s+","+o+")",onMouseOver:this._seriesMouseOverHandler,onMouseOut:this._seriesMouseOutHandler,onClick:this._seriesClickHandler,onContextMenu:this._seriesRightClickHandler,style:qc({opacity:v,stroke:l,fill:f},c)})}}]),t}(za);Uc.displayName="AreaSeries",Uc.propTypes=qc({},za.propTypes,{getNull:a.a.func}),Uc.defaultProps=qc({},za.defaultProps,{getNull:function(){return!0}});var Hc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zc={style:a.a.shape({bottom:a.a.object,left:a.a.object,right:a.a.object,top:a.a.object}),marginTop:a.a.number,marginBottom:a.a.number,marginLeft:a.a.number,marginRight:a.a.number,innerWidth:a.a.number,innerHeight:a.a.number},Wc="rv-xy-plot__borders-bottom",Kc="rv-xy-plot__borders",Xc="rv-xy-plot__borders-left",Yc="rv-xy-plot__borders-right",Zc="rv-xy-plot__borders-top";function Qc(e){var t=e.marginTop,r=e.marginBottom,i=e.marginLeft,n=e.marginRight,a=e.innerWidth,s=e.innerHeight,o=e.style,c=e.className,u=s+t+r,d=a+i+n;return W.a.createElement("g",{className:Kc+" "+c},W.a.createElement("rect",{className:Wc+" "+c+"-bottom",style:Hc({},o.all,o.bottom),x:0,y:u-r,width:d,height:r}),W.a.createElement("rect",{className:Xc+" "+c+"-left",style:Hc({},o.all,o.left),x:0,y:0,width:i,height:u}),W.a.createElement("rect",{className:Yc+" "+c+"-right",style:Hc({},o.all,o.right),x:d-n,y:0,width:n,height:u}),W.a.createElement("rect",{className:Zc+" "+c+"-top",style:Hc({},o.all,o.top),x:0,y:0,width:d,height:t}))}Qc.displayName="Borders",Qc.defaultProps={className:"",style:{all:{},bottom:{},left:{},right:{},top:{}}},Qc.propTypes=zc,Qc.requiresSVG=!0;var $c=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Jc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var tu=function(e){function t(){return Jc(this,t),eu(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),$c(t,[{key:"render",value:function(){var e=this.props,t=e.innerHeight,r=e.innerWidth,i=e.marginBottom,n=e.marginLeft,a=e.marginRight,s=e.marginTop,o=e.className,c=e.includeMargin,u=e.style,d=e.text,h=(r+(c?n+a:0))*e.xPercent+(c?0:n),l=(t+(c?s+i:0))*e.yPercent+(c?n:0);return W.a.createElement("g",{transform:"translate("+h+", "+l+")",className:"rv-xy-plot__axis__title "+o},W.a.createElement("text",u,d))}}],[{key:"requiresSVG",get:function(){return!0}}]),t}(W.a.PureComponent);tu.displayName="ChartLabel",tu.propTypes={className:a.a.string,includeMargin:a.a.bool,style:a.a.object,text:a.a.string.isRequired,xPercent:a.a.number.isRequired,yPercent:a.a.number.isRequired},tu.defaultProps={className:"",includeMargin:!0,text:"",xPercent:0,yPercent:0,style:{}};var ru={TOP:"top",LEFT:"left",RIGHT:"right",BOTTOM:"bottom",VERTICAL:"vertical",HORIZONTAL:"horizontal"},iu={VERTICAL:"vertical",HORIZONTAL:"horizontal"};function nu(e){return e<700?e>300?10:5:20}function au(e,t,r){return r||(e.ticks?e.ticks(t):e.domain())}var su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ou=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function cu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function uu(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var du=["xRange","yRange","xDomain","yDomain","width","height","marginLeft","marginTop","marginRight","marginBottom","tickTotal"],hu=function(e){function t(){return cu(this,t),uu(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ou(t,[{key:"_getDefaultProps",value:function(){var e=this.props,t=e.innerWidth,r=e.innerHeight,i=e.marginTop;return{left:e.marginLeft,top:i,width:t,height:r,style:{},tickTotal:nu(Math.min(t,r))}}},{key:"render",value:function(){var e=this.props,r=e.animation,i=e.centerX,n=e.centerY;if(r)return W.a.createElement(Ye,su({},this.props,{animatedProps:du}),W.a.createElement(t,su({},this.props,{animation:null})));var a=su({},this._getDefaultProps(),this.props),s=a.tickTotal,o=a.tickValues,c=a.marginLeft,u=a.marginTop,d=a.rRange,h=a.style,l=Sa(a,"x"),f=Sa(a,"y"),p=au(l,s,o);return W.a.createElement("g",{transform:"translate("+(l(i)+c)+","+(f(n)+u)+")",className:"rv-xy-plot__circular-grid-lines"},p.reduce((function(e,t,r){var i=l(t);return d&&(i<d[0]||i>d[1])?e:e.concat([W.a.createElement("circle",su({cx:0,cy:0,r:i},{key:r,className:"rv-xy-plot__circular-grid-lines__line",style:h}))])}),[]))}}]),t}(z.PureComponent);hu.displayName="CircularGridLines",hu.propTypes={centerX:a.a.number,centerY:a.a.number,width:a.a.number,height:a.a.number,top:a.a.number,left:a.a.number,rRange:a.a.arrayOf(a.a.number),style:a.a.object,tickValues:a.a.arrayOf(a.a.number),tickTotal:a.a.number,animation:Ze,marginTop:a.a.number,marginBottom:a.a.number,marginLeft:a.a.number,marginRight:a.a.number,innerWidth:a.a.number,innerHeight:a.a.number},hu.defaultProps={centerX:0,centerY:0},hu.requiresSVG=!0;var lu=Array.prototype.slice,fu=function(e,t){return e-t},pu=function(e){return function(){return e}},vu=function(e,t){for(var r,i=-1,n=t.length;++i<n;)if(r=mu(e,t[i]))return r;return 0};function mu(e,t){for(var r=t[0],i=t[1],n=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var c=e[a],u=c[0],d=c[1],h=e[o],l=h[0],f=h[1];if(yu(c,h,t))return 0;d>i!==f>i&&r<(l-u)*(i-d)/(f-d)+u&&(n=-n)}return n}function yu(e,t,r){var i,n,a,s;return function(e,t,r){return(t[0]-e[0])*(r[1]-e[1])===(r[0]-e[0])*(t[1]-e[1])}(e,t,r)&&(n=e[i=+(e[0]===t[0])],a=r[i],s=t[i],n<=a&&a<=s||s<=a&&a<=n)}var gu=function(){},bu=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],ku=function(){var e=1,t=1,r=ht,i=o;function n(e){var t=r(e);if(Array.isArray(t))t=t.slice().sort(fu);else{var i=rt(e),n=i[0],s=i[1];t=dt(n,s,t),t=nt(Math.floor(n/t)*t,Math.floor(s/t)*t,t)}return t.map((function(t){return a(e,t)}))}function a(r,n){var a=[],o=[];return function(r,i,n){var a,o,c,u,d,h,l=new Array,f=new Array;a=o=-1,u=r[0]>=i,bu[u<<1].forEach(p);for(;++a<e-1;)c=u,u=r[a+1]>=i,bu[c|u<<1].forEach(p);bu[u<<0].forEach(p);for(;++o<t-1;){for(a=-1,u=r[o*e+e]>=i,d=r[o*e]>=i,bu[u<<1|d<<2].forEach(p);++a<e-1;)c=u,u=r[o*e+e+a+1]>=i,h=d,d=r[o*e+a+1]>=i,bu[c|u<<1|d<<2|h<<3].forEach(p);bu[u|d<<3].forEach(p)}a=-1,d=r[o*e]>=i,bu[d<<2].forEach(p);for(;++a<e-1;)h=d,d=r[o*e+a+1]>=i,bu[d<<2|h<<3].forEach(p);function p(e){var t,r,i=[e[0][0]+a,e[0][1]+o],c=[e[1][0]+a,e[1][1]+o],u=s(i),d=s(c);(t=f[u])?(r=l[d])?(delete f[t.end],delete l[r.start],t===r?(t.ring.push(c),n(t.ring)):l[t.start]=f[r.end]={start:t.start,end:r.end,ring:t.ring.concat(r.ring)}):(delete f[t.end],t.ring.push(c),f[t.end=d]=t):(t=l[d])?(r=f[u])?(delete l[t.start],delete f[r.end],t===r?(t.ring.push(c),n(t.ring)):l[r.start]=f[t.end]={start:r.start,end:t.end,ring:r.ring.concat(t.ring)}):(delete l[t.start],t.ring.unshift(i),l[t.start=u]=t):l[u]=f[d]={start:u,end:d,ring:[i,c]}}bu[d<<3].forEach(p)}(r,n,(function(e){i(e,r,n),function(e){for(var t=0,r=e.length,i=e[r-1][1]*e[0][0]-e[r-1][0]*e[0][1];++t<r;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}(e)>0?a.push([e]):o.push(e)})),o.forEach((function(e){for(var t,r=0,i=a.length;r<i;++r)if(-1!==vu((t=a[r])[0],e))return void t.push(e)})),{type:"MultiPolygon",value:n,coordinates:a}}function s(t){return 2*t[0]+t[1]*(e+1)*4}function o(r,i,n){r.forEach((function(r){var a,s=r[0],o=r[1],c=0|s,u=0|o,d=i[u*e+c];s>0&&s<e&&c===s&&(a=i[u*e+c-1],r[0]=s+(n-a)/(d-a)-.5),o>0&&o<t&&u===o&&(a=i[(u-1)*e+c],r[1]=o+(n-a)/(d-a)-.5)}))}return n.contour=a,n.size=function(r){if(!arguments.length)return[e,t];var i=Math.ceil(r[0]),a=Math.ceil(r[1]);if(!(i>0)||!(a>0))throw new Error("invalid size");return e=i,t=a,n},n.thresholds=function(e){return arguments.length?(r="function"===typeof e?e:Array.isArray(e)?pu(lu.call(e)):pu(e),n):r},n.smooth=function(e){return arguments.length?(i=e?o:gu,n):i===o},n};function xu(e,t,r){for(var i=e.width,n=e.height,a=1+(r<<1),s=0;s<n;++s)for(var o=0,c=0;o<i+r;++o)o<i&&(c+=e.data[o+s*i]),o>=r&&(o>=a&&(c-=e.data[o-a+s*i]),t.data[o-r+s*i]=c/Math.min(o+1,i-1+a-o,a))}function wu(e,t,r){for(var i=e.width,n=e.height,a=1+(r<<1),s=0;s<i;++s)for(var o=0,c=0;o<n+r;++o)o<n&&(c+=e.data[s+o*i]),o>=r&&(o>=a&&(c-=e.data[s+(o-a)*i]),t.data[s+(o-r)*i]=c/Math.min(o+1,n-1+a-o,a))}function _u(e){return e[0]}function Ou(e){return e[1]}function Tu(){return 1}var Su=function(e){return e};function Cu(e,t){e&&Mu.hasOwnProperty(e.type)&&Mu[e.type](e,t)}var Iu={Feature:function(e,t){Cu(e.geometry,t)},FeatureCollection:function(e,t){for(var r=e.features,i=-1,n=r.length;++i<n;)Cu(r[i].geometry,t)}},Mu={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)e=r[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){Eu(e.coordinates,t,0)},MultiLineString:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)Eu(r[i],t,0)},Polygon:function(e,t){Au(e.coordinates,t)},MultiPolygon:function(e,t){for(var r=e.coordinates,i=-1,n=r.length;++i<n;)Au(r[i],t)},GeometryCollection:function(e,t){for(var r=e.geometries,i=-1,n=r.length;++i<n;)Cu(r[i],t)}};function Eu(e,t,r){var i,n=-1,a=e.length-r;for(t.lineStart();++n<a;)i=e[n],t.point(i[0],i[1],i[2]);t.lineEnd()}function Au(e,t){var r=-1,i=e.length;for(t.polygonStart();++r<i;)Eu(e[r],t,1);t.polygonEnd()}var Fu=function(e,t){e&&Iu.hasOwnProperty(e.type)?Iu[e.type](e,t):Cu(e,t)},Pu=function(){return new Bu};function Bu(){this.reset()}Bu.prototype={constructor:Bu,reset:function(){this.s=this.t=0},add:function(e){Vu(Ru,e,this.t),Vu(this,Ru.s,this.s),this.s?this.t+=Ru.t:this.s=Ru.t},valueOf:function(){return this.s}};var Ru=new Bu;function Vu(e,t,r){var i=e.s=t+r,n=i-t,a=i-n;e.t=t-a+(r-n)}var Lu=Math.PI,Du=2*Lu,qu=Math.abs,Nu=(Math.atan,Math.atan2,Math.cos,Math.ceil,Math.exp,Math.floor,Math.log,Math.pow,Math.sin,Math.sign,Math.sqrt);Math.tan;function Gu(){}var ju,Uu,Hu,zu,Wu=Pu(),Ku=Pu(),Xu={point:Gu,lineStart:Gu,lineEnd:Gu,polygonStart:function(){Xu.lineStart=Yu,Xu.lineEnd=$u},polygonEnd:function(){Xu.lineStart=Xu.lineEnd=Xu.point=Gu,Wu.add(qu(Ku)),Ku.reset()},result:function(){var e=Wu/2;return Wu.reset(),e}};function Yu(){Xu.point=Zu}function Zu(e,t){Xu.point=Qu,ju=Hu=e,Uu=zu=t}function Qu(e,t){Ku.add(zu*e-Hu*t),Hu=e,zu=t}function $u(){Qu(ju,Uu)}var Ju=Xu,ed=1/0,td=ed,rd=-ed,id=rd;var nd,ad,sd,od,cd={point:function(e,t){e<ed&&(ed=e);e>rd&&(rd=e);t<td&&(td=t);t>id&&(id=t)},lineStart:Gu,lineEnd:Gu,polygonStart:Gu,polygonEnd:Gu,result:function(){var e=[[ed,td],[rd,id]];return rd=id=-(td=ed=1/0),e}},ud=0,dd=0,hd=0,ld=0,fd=0,pd=0,vd=0,md=0,yd=0,gd={point:bd,lineStart:kd,lineEnd:_d,polygonStart:function(){gd.lineStart=Od,gd.lineEnd=Td},polygonEnd:function(){gd.point=bd,gd.lineStart=kd,gd.lineEnd=_d},result:function(){var e=yd?[vd/yd,md/yd]:pd?[ld/pd,fd/pd]:hd?[ud/hd,dd/hd]:[NaN,NaN];return ud=dd=hd=ld=fd=pd=vd=md=yd=0,e}};function bd(e,t){ud+=e,dd+=t,++hd}function kd(){gd.point=xd}function xd(e,t){gd.point=wd,bd(sd=e,od=t)}function wd(e,t){var r=e-sd,i=t-od,n=Nu(r*r+i*i);ld+=n*(sd+e)/2,fd+=n*(od+t)/2,pd+=n,bd(sd=e,od=t)}function _d(){gd.point=bd}function Od(){gd.point=Sd}function Td(){Cd(nd,ad)}function Sd(e,t){gd.point=Cd,bd(nd=sd=e,ad=od=t)}function Cd(e,t){var r=e-sd,i=t-od,n=Nu(r*r+i*i);ld+=n*(sd+e)/2,fd+=n*(od+t)/2,pd+=n,vd+=(n=od*e-sd*t)*(sd+e),md+=n*(od+t),yd+=3*n,bd(sd=e,od=t)}var Id=gd;function Md(e){this._context=e}Md.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Du)}},result:Gu};var Ed,Ad,Fd,Pd,Bd,Rd=Pu(),Vd={point:Gu,lineStart:function(){Vd.point=Ld},lineEnd:function(){Ed&&Dd(Ad,Fd),Vd.point=Gu},polygonStart:function(){Ed=!0},polygonEnd:function(){Ed=null},result:function(){var e=+Rd;return Rd.reset(),e}};function Ld(e,t){Vd.point=Dd,Ad=Pd=e,Fd=Bd=t}function Dd(e,t){Pd-=e,Bd-=t,Rd.add(Nu(Pd*Pd+Bd*Bd)),Pd=e,Bd=t}var qd=Vd;function Nd(){this._string=[]}function Gd(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}Nd.prototype={_radius:4.5,_circle:Gd(4.5),pointRadius:function(e){return(e=+e)!==this._radius&&(this._radius=e,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._string.push("M",e,",",t),this._point=1;break;case 1:this._string.push("L",e,",",t);break;default:null==this._circle&&(this._circle=Gd(this._radius)),this._string.push("M",e,",",t,this._circle)}},result:function(){if(this._string.length){var e=this._string.join("");return this._string=[],e}return null}};var jd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ud=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Hd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Wd=function(e){function t(){return Hd(this,t),zd(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ud(t,[{key:"render",value:function(){var e=this.props,r=e.animation,i=e.bandwidth,n=e.className,a=e.colorRange,s=e.data,o=e.innerHeight,c=e.innerWidth,u=e.marginLeft,d=e.marginTop,h=e.style;if(!s||!c||!o)return null;if(r)return W.a.createElement(Ye,jd({},this.props,{animatedProps:as}),W.a.createElement(t,jd({},this.props,{animation:null})));var l=this._getAttributeFunctor("x"),f=this._getAttributeFunctor("y"),p=function(){var e=_u,t=Ou,r=Tu,i=960,n=500,a=20,s=2,o=3*a,c=i+2*o>>s,u=n+2*o>>s,d=pu(20);function h(i){var n=new Float32Array(c*u),h=new Float32Array(c*u);i.forEach((function(i,a,d){var h=+e(i,a,d)+o>>s,l=+t(i,a,d)+o>>s,f=+r(i,a,d);h>=0&&h<c&&l>=0&&l<u&&(n[h+l*c]+=f)})),xu({width:c,height:u,data:n},{width:c,height:u,data:h},a>>s),wu({width:c,height:u,data:h},{width:c,height:u,data:n},a>>s),xu({width:c,height:u,data:n},{width:c,height:u,data:h},a>>s),wu({width:c,height:u,data:h},{width:c,height:u,data:n},a>>s),xu({width:c,height:u,data:n},{width:c,height:u,data:h},a>>s),wu({width:c,height:u,data:h},{width:c,height:u,data:n},a>>s);var f=d(n);if(!Array.isArray(f)){var p=function(e,t){var r,i,n=e.length,a=-1;if(null==t){for(;++a<n;)if(null!=(r=e[a])&&r>=r)for(i=r;++a<n;)null!=(r=e[a])&&r>i&&(i=r)}else for(;++a<n;)if(null!=(r=t(e[a],a,e))&&r>=r)for(i=r;++a<n;)null!=(r=t(e[a],a,e))&&r>i&&(i=r);return i}(n);f=dt(0,p,f),(f=nt(0,Math.floor(p/f)*f,f)).shift()}return ku().thresholds(f).size([c,u])(n).map(l)}function l(e){return e.value*=Math.pow(2,-2*s),e.coordinates.forEach(f),e}function f(e){e.forEach(p)}function p(e){e.forEach(v)}function v(e){e[0]=e[0]*Math.pow(2,s)-o,e[1]=e[1]*Math.pow(2,s)-o}function m(){return c=i+2*(o=3*a)>>s,u=n+2*o>>s,h}return h.x=function(t){return arguments.length?(e="function"===typeof t?t:pu(+t),h):e},h.y=function(e){return arguments.length?(t="function"===typeof e?e:pu(+e),h):t},h.weight=function(e){return arguments.length?(r="function"===typeof e?e:pu(+e),h):r},h.size=function(e){if(!arguments.length)return[i,n];var t=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!(t>=0)&&!(t>=0))throw new Error("invalid size");return i=t,n=r,m()},h.cellSize=function(e){if(!arguments.length)return 1<<s;if(!((e=+e)>=1))throw new Error("invalid cell size");return s=Math.floor(Math.log(e)/Math.LN2),m()},h.thresholds=function(e){return arguments.length?(d="function"===typeof e?e:Array.isArray(e)?pu(lu.call(e)):pu(e),h):d},h.bandwidth=function(e){if(!arguments.length)return Math.sqrt(a*(a+1));if(!((e=+e)>=0))throw new Error("invalid bandwidth");return a=Math.round((Math.sqrt(4*e*e+1)-1)/2),m()},h}().x((function(e){return l(e)})).y((function(e){return f(e)})).size([c,o]).bandwidth(i)(s),v=function(e,t){var r,i,n=4.5;function a(e){return e&&("function"===typeof n&&i.pointRadius(+n.apply(this,arguments)),Fu(e,r(i))),i.result()}return a.area=function(e){return Fu(e,r(Ju)),Ju.result()},a.measure=function(e){return Fu(e,r(qd)),qd.result()},a.bounds=function(e){return Fu(e,r(cd)),cd.result()},a.centroid=function(e){return Fu(e,r(Id)),Id.result()},a.projection=function(t){return arguments.length?(r=null==t?(e=null,Su):(e=t).stream,a):e},a.context=function(e){return arguments.length?(i=null==e?(t=null,new Nd):new Md(t=e),"function"!==typeof n&&i.pointRadius(n),a):t},a.pointRadius=function(e){return arguments.length?(n="function"===typeof e?e:(i.pointRadius(+e),+e),a):n},a.projection(e).context(t)}(),m=function(e){return e.reduce((function(e,t){return{min:Math.min(e.min,t.value),max:Math.max(e.max,t.value)}}),{min:1/0,max:-1/0})}(p),y=m.min,g=m.max,b=ar().domain([y,g]).range(a||Xa);return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--contour "+n,transform:"translate("+u+","+d+")"},p.map((function(e,t){return W.a.createElement("path",{className:"rv-xy-plot__series--contour-line",key:"rv-xy-plot__series--contour-line-"+t,d:v(e),style:jd({fill:b(e.value)},h)})})))}}]),t}(za);Wd.propTypes=jd({},za.propTypes,{animation:a.a.bool,bandwidth:a.a.number,className:a.a.string,marginLeft:a.a.number,marginTop:a.a.number,style:a.a.object}),Wd.defaultProps=jd({},za.defaultProps,{bandwidth:40,style:{}});var Kd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Xd=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Yd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zd(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function Qd(e){var t=Jd(e);if(t)return{title:"x",value:oa(t.x)}}function $d(e){return e.map((function(e,t){if(e)return{value:e.y,title:t}}))}function Jd(e){return(e||[]).find((function(e){return Boolean(e)}))}var eh=function(e){function t(){return Yd(this,t),Zd(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Xd(t,[{key:"_renderCrosshairItems",value:function(){var e=this.props,t=e.values,r=(0,e.itemsFormat)(t);return r?r.filter((function(e){return e})).map((function(e,t){return W.a.createElement("div",{className:"rv-crosshair__item",key:"item"+t},W.a.createElement("span",{className:"rv-crosshair__item__title"},e.title),": ",W.a.createElement("span",{className:"rv-crosshair__item__value"},e.value))})):null}},{key:"_renderCrosshairTitle",value:function(){var e=this.props,t=e.values,r=e.titleFormat,i=e.style,n=r(t);return n?W.a.createElement("div",{className:"rv-crosshair__title",key:"title",style:i.title},W.a.createElement("span",{className:"rv-crosshair__title__title"},n.title),": ",W.a.createElement("span",{className:"rv-crosshair__title__value"},n.value)):null}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.className,i=e.values,n=e.marginTop,a=e.marginLeft,s=e.innerWidth,o=e.innerHeight,c=e.style,u=Jd(i);if(!u)return null;var d=Ma(this.props,"x")(u),h=this.props.orientation,l=a+d,f=n,p="rv-crosshair__inner rv-crosshair__inner--"+(void 0===h?d>s/2?"left":"right":h);return W.a.createElement("div",{className:"rv-crosshair "+r,style:{left:l+"px",top:f+"px"}},W.a.createElement("div",{className:"rv-crosshair__line",style:Kd({height:o+"px"},c.line)}),W.a.createElement("div",{className:p},t||W.a.createElement("div",{className:"rv-crosshair__inner__content",style:c.box},W.a.createElement("div",null,this._renderCrosshairTitle(),this._renderCrosshairItems()))))}}],[{key:"defaultProps",get:function(){return{titleFormat:Qd,itemsFormat:$d,style:{line:{},title:{},box:{}}}}},{key:"propTypes",get:function(){return{className:a.a.string,values:a.a.arrayOf(a.a.oneOfType([a.a.number,a.a.string,a.a.object])),series:a.a.object,innerWidth:a.a.number,innerHeight:a.a.number,marginLeft:a.a.number,marginTop:a.a.number,orientation:a.a.oneOf(["left","right"]),itemsFormat:a.a.func,titleFormat:a.a.func,style:a.a.shape({line:a.a.object,title:a.a.object,box:a.a.object})}}}]),t}(z.PureComponent);eh.displayName="Crosshair";var th=eh,rh=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),ih=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function nh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ah(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function sh(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var oh={stroke:"blue",fill:"blue"};function ch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:oh;switch(e){case"diamond":return W.a.createElement("polygon",{style:r,points:"0 0 "+t/2+" "+t/2+" 0 "+t+" "+-t/2+" "+t/2+" 0 0"});case"star":var i=[].concat(sh(new Array(5))).map((function(e,r){var i=r/5*Math.PI*2,n=i+Math.PI/10,a=i-Math.PI/10,s=t/2.61;return"\n        "+Math.cos(a)*t+" "+Math.sin(a)*t+"\n        "+Math.cos(n)*s+" "+Math.sin(n)*s+"\n      "})).join(" ");return W.a.createElement("polygon",{points:i,x:"0",y:"0",height:t,width:t,style:r});case"square":return W.a.createElement("rect",{x:""+-t/2,y:""+-t/2,height:t,width:t,style:r});default:case"circle":return W.a.createElement("circle",{cx:"0",cy:"0",r:t/2,style:r})}}var uh=function(e){function t(){return nh(this,t),ah(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rh(t,[{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.className,a=r.customComponent,s=r.data,o=r.innerHeight,c=r.innerWidth,u=r.marginLeft,d=r.marginTop,h=r.style,l=r.size;if(!s||!c||!o)return null;if(i)return W.a.createElement(Ye,ih({},this.props,{animatedProps:as}),W.a.createElement(t,ih({},this.props,{animation:!1})));var f=this._getAttributeFunctor("x"),p=this._getAttributeFunctor("y"),v=s.map((function(t,r){var i={x:f(t),y:p(t)},n=function(e){var t=e.customComponent,r=e.defaultType,i=e.positionInPixels,n=(e.positionFunctions,e.style),a=e.propsSize,s=t.size,o=ih({},n,t.style||{}),c=t.customComponent;return c||"string"!==typeof r?c?"string"===typeof c?ch(c||r,s,o):c(t,i,o):r(t,i,o):ch(r,s||a,o)}({customComponent:t,positionInPixels:i,defaultType:a,positionFunctions:{x:f,y:p},style:h,propsSize:l});return W.a.createElement("g",{className:"rv-xy-plot__series--custom-svg",key:"rv-xy-plot__series--custom-svg-"+r,transform:"translate("+i.x+","+i.y+")",onMouseEnter:function(r){return e._valueMouseOverHandler(t,r)},onMouseLeave:function(r){return e._valueMouseOutHandler(t,r)}},n)}));return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--custom-svg-wrapper "+n,transform:"translate("+u+","+d+")"},v)}}]),t}(za);uh.propTypes={animation:a.a.bool,className:a.a.string,customComponent:a.a.oneOfType([a.a.string,a.a.func]),data:a.a.arrayOf(a.a.shape({x:a.a.oneOfType([a.a.string,a.a.number]).isRequired,y:a.a.oneOfType([a.a.string,a.a.number]).isRequired})).isRequired,marginLeft:a.a.number,marginTop:a.a.number,style:a.a.object,size:a.a.number,onValueMouseOver:a.a.func,onValueMouseOut:a.a.func},uh.defaultProps=ih({},za.defaultProps,{animation:!1,customComponent:"circle",style:{},size:2});var dh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function hh(e){var t=e.axisDomain,r=e.numberOfTicks,i=e.axisStart,n=e.axisEnd,a=e.tickValue,s=e.tickSize,o=e.style,c=function(e){var t=e.axisStart,r=e.axisEnd,i=e.numberOfTicks,n=e.axisDomain,a=function(e,t){if(e.x===t.x)return{left:e.y,right:t.y,slope:0,offset:e.x};var r=(e.y-t.y)/(e.x-t.x);return{left:e.x,right:t.x,slope:r,offset:e.y-r*e.x}}(t,r),s=a.left,o=a.right,c=a.slope,u=a.offset,d=(o-s)/i,h=ar().domain([s,o]).range(n),l=t.x===r.x;return{slope:l?1/0:c,points:nt(s,o+d,d).map((function(e){return l?{y:e,x:c*e+u,text:h(e)}:{x:e,y:c*e+u,text:h(e)}})).slice(0,i+1)}}({axisStart:i,axisEnd:n,numberOfTicks:r,axisDomain:t}).points,u=function(e,t){return e.x===t.x?t.y>e.y?Math.PI/2:3*Math.PI/2:Math.atan((t.y-e.y)/(t.x-e.x))}(i,n)+Math.PI/2;return c.map((function(e,t){var r=dh({x1:0,y1:0,x2:s*Math.cos(u),y2:s*Math.sin(u)},o.ticks),i=dh({x:s*Math.cos(u),y:s*Math.sin(u),textAnchor:"start"},o.text);return W.a.createElement("g",{key:t,transform:"translate("+e.x+", "+e.y+")",className:"rv-xy-plot__axis__tick"},W.a.createElement("line",dh({},r,{className:"rv-xy-plot__axis__tick__line"})),W.a.createElement("text",dh({},i,{className:"rv-xy-plot__axis__tick__text"}),a(e.text)))}))}var lh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},fh=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function ph(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var mh=["xRange","yRange","xDomain","yDomain","width","height","marginLeft","marginTop","marginRight","marginBottom","tickSize","tickTotal","tickSizeInner","tickSizeOuter"],yh=function(e){function t(){return ph(this,t),vh(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),fh(t,[{key:"render",value:function(){var e=this.props,r=e.animation,i=e.className,n=e.marginLeft,a=e.marginTop,s=e.axisStart,o=e.axisEnd,c=e.axisDomain,u=e.numberOfTicks,d=e.tickValue,h=e.tickSize,l=e.style;if(r)return W.a.createElement(Ye,lh({},this.props,{animatedProps:mh}),W.a.createElement(t,lh({},this.props,{animation:null})));var f=this._getAttributeFunctor("x"),p=this._getAttributeFunctor("y");return W.a.createElement("g",{className:"rv-xy-manipulable-axis rv-xy-plot__axis "+i,transform:"translate("+n+","+a+")"},W.a.createElement("line",lh({},lh({x1:f({x:s.x}),x2:f({x:o.x}),y1:p({y:s.y}),y2:p({y:o.y})},l.line),{className:"rv-xy-plot__axis__line"})),W.a.createElement("g",{className:"rv-xy-manipulable-axis__ticks"},hh({axisDomain:c,axisEnd:{x:f(o),y:p(o)},axisStart:{x:f(s),y:p(s)},numberOfTicks:u,tickValue:d,tickSize:h,style:l})))}}]),t}(za),gh=Yt(".2r");yh.defaultProps={className:"",numberOfTicks:10,tickValue:function(e){return gh(e)},tickSize:5,style:{line:{strokeWidth:1},ticks:{strokeWidth:2},text:{}}},yh.propTypes=lh({},za.propTypes,{axisDomain:a.a.arrayOf(a.a.number).isRequired,axisEnd:a.a.shape({x:a.a.oneOfType([a.a.number,a.a.string]),y:a.a.oneOfType([a.a.number,a.a.string])}).isRequired,axisStart:a.a.shape({x:a.a.oneOfType([a.a.number,a.a.string]),y:a.a.oneOfType([a.a.number,a.a.string])}).isRequired,className:a.a.string,numberOfTicks:a.a.number,tickValue:a.a.func,tickSize:a.a.number,style:a.a.shape({line:a.a.object,ticks:a.a.object,text:a.a.object})}),yh.displayName="DecorativeAxis";var bh=yh;function kh(e){var t=e.className;return W.a.createElement("defs",{className:"rv-gradient-defs "+t},e.children)}kh.displayName="GradientDefs",kh.requiresSVG=!0,kh.propTypes={className:a.a.string},kh.defaultProps={className:""};var xh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},wh=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function _h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Oh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Th(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Sh=iu.VERTICAL,Ch=iu.HORIZONTAL,Ih={direction:a.a.oneOf([Sh,Ch]),attr:a.a.string.isRequired,width:a.a.number,height:a.a.number,top:a.a.number,left:a.a.number,style:a.a.object,tickValues:a.a.arrayOf(a.a.oneOfType([a.a.number,a.a.string])),tickTotal:a.a.number,animation:Ze,marginTop:a.a.number,marginBottom:a.a.number,marginLeft:a.a.number,marginRight:a.a.number,innerWidth:a.a.number,innerHeight:a.a.number},Mh={direction:Sh},Eh=["xRange","yRange","xDomain","yDomain","width","height","marginLeft","marginTop","marginRight","marginBottom","tickTotal"],Ah=function(e){function t(){return Oh(this,t),Th(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),wh(t,[{key:"_getDefaultProps",value:function(){var e=this.props,t=e.innerWidth,r=e.innerHeight,i=e.marginTop;return{left:e.marginLeft,top:i,width:t,height:r,tickTotal:nu(e.direction===Sh?t:r)}}},{key:"render",value:function(){var e=this.props,r=e.animation,i=e.className;if(r)return W.a.createElement(Ye,xh({},this.props,{animatedProps:Eh}),W.a.createElement(t,xh({},this.props,{animation:null})));var n=xh({},this._getDefaultProps(),this.props),a=n.attr,s=n.direction,o=n.width,c=n.height,u=n.style,d=n.tickTotal,h=n.tickValues,l=n.top,f=n.left,p=s===Sh,v=p?"y":"x",m=p?"x":"y",y=p?c:o,g=Sa(n,a),b=au(g,d,h);return W.a.createElement("g",{transform:"translate("+f+","+l+")",className:"rv-xy-plot__grid-lines "+i},b.map((function(e,t){var r,i=g(e),n=(_h(r={},m+"1",i),_h(r,m+"2",i),_h(r,v+"1",0),_h(r,v+"2",y),r);return W.a.createElement("line",xh({},n,{key:t,className:"rv-xy-plot__grid-lines__line",style:u}))})))}}]),t}(z.PureComponent);Ah.displayName="GridLines",Ah.defaultProps=Mh,Ah.propTypes=Ih,Ah.requiresSVG=!0;var Fh=Ah,Ph=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Bh=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Rh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Lh=function(e){function t(){return Rh(this,t),Vh(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Bh(t,[{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.className,a=r.data,s=r.marginLeft,o=r.marginTop,c=r.style;if(!a)return null;if(i)return W.a.createElement(Ye,Ph({},this.props,{animatedProps:as}),W.a.createElement(t,Ph({},this.props,{animation:null})));var u=Ph({rectStyle:{}},c).rectStyle,d=this._getAttributeFunctor("x"),h=this._getAttributeFunctor("y"),l=this._getAttributeFunctor("opacity"),f=this._getAttributeFunctor("fill")||this._getAttributeFunctor("color"),p=this._getAttributeFunctor("stroke")||this._getAttributeFunctor("color"),v=this._getScaleDistance("x"),m=this._getScaleDistance("y");return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--heatmap "+n,transform:"translate("+s+","+o+")"},a.map((function(t,r){var i=Ph({style:Ph({stroke:p&&p(t),fill:f&&f(t),opacity:l&&l(t)},c)},u,{x:d(t)-v/2,y:h(t)-m/2,width:v,height:m,key:r,onClick:function(r){return e._valueClickHandler(t,r)},onContextMenu:function(r){return e._valueRightClickHandler(t,r)},onMouseOver:function(r){return e._valueMouseOverHandler(t,r)},onMouseOut:function(r){return e._valueMouseOutHandler(t,r)}});return W.a.createElement("rect",i)})))}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:"x"===e||"y"===e}}}]),t}(za);Lh.propTypes=Ph({},za.propTypes),Lh.displayName="HeatmapSeries";var Dh=Math.PI/3,qh=[0,Dh,2*Dh,3*Dh,4*Dh,5*Dh];function Nh(e){return e[0]}function Gh(e){return e[1]}var jh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Uh=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Hh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function Wh(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var Kh=function(e){function t(){return Hh(this,t),zh(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Uh(t,[{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.className,a=r.colorRange,s=r.data,o=r.innerHeight,c=r.innerWidth,u=r.marginLeft,d=r.marginTop,h=r.radius,l=r.sizeHexagonsWithCount,f=r.style,p=r.xOffset,v=r.yOffset;if(!s)return null;if(i)return W.a.createElement(Ye,jh({},this.props,{animatedProps:as}),W.a.createElement(t,jh({},this.props,{animation:null})));var m=this._getAttributeFunctor("x"),y=this._getAttributeFunctor("y"),g=function(){var e,t,r,i=0,n=0,a=1,s=1,o=Nh,c=Gh;function u(e){var i,n={},a=[],s=e.length;for(i=0;i<s;++i)if(!isNaN(d=+o.call(null,u=e[i],i,e))&&!isNaN(h=+c.call(null,u,i,e))){var u,d,h,l=Math.round(h/=r),f=Math.round(d=d/t-(1&l)/2),p=h-l;if(3*Math.abs(p)>1){var v=d-f,m=f+(d<f?-1:1)/2,y=l+(h<l?-1:1),g=d-m,b=h-y;v*v+p*p>g*g+b*b&&(f=m+(1&l?1:-1)/2,l=y)}var k=f+"-"+l,x=n[k];x?x.push(u):(a.push(x=n[k]=[u]),x.x=(f+(1&l)/2)*t,x.y=l*r)}return a}function d(e){var t=0,r=0;return qh.map((function(i){var n=Math.sin(i)*e,a=-Math.cos(i)*e,s=n-t,o=a-r;return t=n,r=a,[s,o]}))}return u.hexagon=function(t){return"m"+d(null==t?e:+t).join("l")+"z"},u.centers=function(){for(var o=[],c=Math.round(n/r),u=Math.round(i/t),d=c*r;d<s+e;d+=r,++c)for(var h=u*t+(1&c)*t/2;h<a+t/2;h+=t)o.push([h,d]);return o},u.mesh=function(){var t=d(e).slice(0,4).join("l");return u.centers().map((function(e){return"M"+e+"m"+t})).join("")},u.x=function(e){return arguments.length?(o=e,u):o},u.y=function(e){return arguments.length?(c=e,u):c},u.radius=function(i){return arguments.length?(t=2*(e=+i)*Math.sin(Dh),r=1.5*e,u):e},u.size=function(e){return arguments.length?(i=n=0,a=+e[0],s=+e[1],u):[a-i,s-n]},u.extent=function(e){return arguments.length?(i=+e[0][0],n=+e[0][1],a=+e[1][0],s=+e[1][1],u):[[i,n],[a,s]]},u.radius(1)}().x((function(e){return m(e)+p})).y((function(e){return y(e)+v})).radius(h).size([c,o]),b=g.hexagon(),k=g(s),x=function(e,t){return e.countDomain||[0,Math.max.apply(Math,Wh(t.map((function(e){return e.length}))))]}(this.props,k),w=ar().domain(x).range(a),_=ar().domain(x).range([0,h]);return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--hexbin "+n,transform:"translate("+u+","+d+")"},k.map((function(t,r){var i={style:f,d:l?g.hexagon(_(t.length)):b,fill:w(t.length),transform:"translate("+t.x+", "+t.y+")",key:r,onClick:function(r){return e._valueClickHandler(t,r)},onContextMenu:function(r){return e._valueRightClickHandler(t,r)},onMouseOver:function(r){return e._valueMouseOverHandler(t,r)},onMouseOut:function(r){return e._valueMouseOutHandler(t,r)}};return W.a.createElement("path",i)})))}}]),t}(za);Kh.propTypes=jh({},za.propTypes,{radius:a.a.number}),Kh.defaultProps={radius:20,colorRange:Xa,xOffset:0,yOffset:0},Kh.displayName="HexbinSeries";var Xh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yh=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Zh(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qh(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function $h(e){return{xLoc:"touchstart"===e.type?e.pageX:e.offsetX,yLoc:"touchstart"===e.type?e.pageY:e.offsetY}}var Jh=function(e){function t(){var e,r,i;Zh(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=i=Qh(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.state={dragging:!1,brushArea:{top:0,right:0,bottom:0,left:0},brushing:!1,startLocX:0,startLocY:0,dragArea:null},Qh(i,r)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Yh(t,[{key:"_getDrawArea",value:function(e,t){var r=this.state,i=r.startLocX,n=r.startLocY,a=this.props,s=a.enableX,o=a.enableY,c=a.highlightWidth,u=a.highlightHeight,d=a.innerWidth,h=a.innerHeight,l=a.marginLeft,f=a.marginRight,p=a.marginBottom,v=a.marginTop,m=c||d+l+f,y=u||h+v+p;return{bottom:o?Math.max(n,t):y,right:s?Math.max(i,e):m,left:s?Math.min(e,i):0,top:o?Math.min(t,n):0}}},{key:"_getDragArea",value:function(e,t){var r=this.props,i=r.enableX,n=r.enableY,a=this.state,s=a.startLocX,o=a.startLocY,c=a.dragArea;return{bottom:c.bottom+(n?t-o:0),left:c.left+(i?e-s:0),right:c.right+(i?e-s:0),top:c.top+(n?t-o:0)}}},{key:"_clickedOutsideDrag",value:function(e,t){var r=this.props,i=r.enableX,n=r.enableY,a=this.state,s=a.dragArea,o=a.brushArea,c=o.left,u=o.right,d=o.top,h=o.bottom,l=s&&(e<c||e>u),f=s&&(t<d||t>h);return i&&n?l||f:i?l:!n||f}},{key:"_convertAreaToCoordinates",value:function(e){var t=this.props,r=t.enableX,i=t.enableY,n=t.marginLeft,a=t.marginTop,s=Sa(this.props,"x"),o=Sa(this.props,"y");return r&&i?{bottom:o.invert(e.bottom),left:s.invert(e.left-n),right:s.invert(e.right-n),top:o.invert(e.top)}:i?{bottom:o.invert(e.bottom-a),top:o.invert(e.top-a)}:r?{left:s.invert(e.left-n),right:s.invert(e.right-n)}:{}}},{key:"startBrushing",value:function(e){var t=this,r=this.props,i=r.onBrushStart,n=r.onDragStart,a=r.drag,s=this.state.dragArea,o=$h(e.nativeEvent),c=o.xLoc,u=o.yLoc,d=function(e,r){var i={bottom:u,left:c,right:c,top:u};t.setState({dragging:e,brushArea:s&&!r?s:i,brushing:!e,startLocX:c,startLocY:u})},h=this._clickedOutsideDrag(c,u);if(a&&!s||!a||h)return d(!1,h),void(i&&i(e));a&&s&&(d(!0,h),n&&n(e))}},{key:"stopBrushing",value:function(e){var t=this.state,r=t.brushing,i=t.dragging,n=t.brushArea;if(r||i){var a=this.props,s=a.onBrushEnd,o=a.onDragEnd,c=a.drag,u=Math.abs(n.right-n.left)<5,d=Math.abs(n.top-n.bottom)<5||u;this.setState({brushing:!1,dragging:!1,brushArea:c?n:{top:0,right:0,bottom:0,left:0},startLocX:0,startLocY:0,dragArea:c&&!d&&n}),r&&s&&s(d?null:this._convertAreaToCoordinates(n)),c&&o&&o(d?null:this._convertAreaToCoordinates(n))}}},{key:"onBrush",value:function(e){var t=this.props,r=t.onBrush,i=t.onDrag,n=t.drag,a=this.state,s=a.brushing,o=a.dragging,c=$h(e.nativeEvent),u=c.xLoc,d=c.yLoc;if(s){var h=this._getDrawArea(u,d);this.setState({brushArea:h}),r&&r(this._convertAreaToCoordinates(h))}if(n&&o){var l=this._getDragArea(u,d);this.setState({brushArea:l}),i&&i(this._convertAreaToCoordinates(l))}}},{key:"render",value:function(){var e=this,t=this.props,r=t.color,i=t.className,n=t.highlightHeight,a=t.highlightWidth,s=t.highlightX,o=t.highlightY,c=t.innerWidth,u=t.innerHeight,d=t.marginLeft,h=t.marginRight,l=t.marginTop,f=t.marginBottom,p=t.opacity,v=this.state.brushArea,m=v.left,y=v.right,g=v.top,b=v.bottom,k=0;s&&(k=Sa(this.props,"x")(s));var x=0;o&&(x=Sa(this.props,"y")(o));var w=a||d+h+c,_=n||l+f+u;return W.a.createElement("g",{transform:"translate("+k+", "+x+")",className:i+" rv-highlight-container"},W.a.createElement("rect",{className:"rv-mouse-target",fill:"black",opacity:"0",x:"0",y:"0",width:Math.max(w,0),height:Math.max(_,0),onMouseDown:function(t){return e.startBrushing(t)},onMouseMove:function(t){return e.onBrush(t)},onMouseUp:function(t){return e.stopBrushing(t)},onMouseLeave:function(t){return e.stopBrushing(t)},onTouchEnd:function(t){t.preventDefault(),e.stopBrushing(t)},onTouchCancel:function(t){t.preventDefault(),e.stopBrushing(t)},onContextMenu:function(e){return e.preventDefault()},onContextMenuCapture:function(e){return e.preventDefault()}}),W.a.createElement("rect",{className:"rv-highlight",pointerEvents:"none",opacity:p,fill:r,x:m,y:g,width:Math.min(Math.max(0,y-m),w),height:Math.min(Math.max(0,b-g),_)}))}}]),t}(za);Jh.displayName="HighlightOverlay",Jh.defaultProps={color:"rgb(77, 182, 172)",className:"",enableX:!0,enableY:!0,opacity:.3},Jh.propTypes=Xh({},za.propTypes,{enableX:a.a.bool,enableY:a.a.bool,highlightHeight:a.a.number,highlightWidth:a.a.number,highlightX:a.a.oneOfType([a.a.string,a.a.number]),highlightY:a.a.oneOfType([a.a.string,a.a.number]),onBrushStart:a.a.func,onDragStart:a.a.func,onBrush:a.a.func,onDrag:a.a.func,onBrushEnd:a.a.func,onDragEnd:a.a.func});var el=Jh,tl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},rl=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function il(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var al={AUTO:"auto",LEFT:"left",RIGHT:"right",LEFT_EDGE:"leftEdge",RIGHT_EDGE:"rightEdge",BOTTOM:"bottom",TOP:"top",BOTTOM_EDGE:"bottomEdge",TOP_EDGE:"topEdge"},sl={BOTTOM_LEFT:"bottomleft",BOTTOM_RIGHT:"bottomright",TOP_LEFT:"topleft",TOP_RIGHT:"topright"};function ol(e){return Object.keys(e).map((function(t){return{title:t,value:oa(e[t])}}))}var cl=function(e){function t(){return il(this,t),nl(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rl(t,[{key:"_getAlign",value:function(e,t){var r=this.props,i=r.innerWidth,n=r.innerHeight,a=r.orientation,s=r.align,o=s.horizontal,c=s.vertical,u=a?this._mapOrientationToAlign(a):{horizontal:o,vertical:c};return o===al.AUTO&&(u.horizontal=e>i/2?al.LEFT:al.RIGHT),c===al.AUTO&&(u.vertical=t>n/2?al.TOP:al.BOTTOM),u}},{key:"_getAlignClassNames",value:function(e){var t=this.props.orientation;return(t?"rv-hint--orientation-"+t:"")+" rv-hint--horizontalAlign-"+e.horizontal+"\n     rv-hint--verticalAlign-"+e.vertical}},{key:"_getAlignStyle",value:function(e,t,r){return tl({},this._getXCSS(e.horizontal,t),this._getYCSS(e.vertical,r))}},{key:"_getCSSBottom",value:function(e){if(void 0===e||null===e)return{bottom:0};var t=this.props,r=t.innerHeight;return{bottom:t.marginBottom+r-e}}},{key:"_getCSSLeft",value:function(e){return void 0===e||null===e?{left:0}:{left:this.props.marginLeft+e}}},{key:"_getCSSRight",value:function(e){if(void 0===e||null===e)return{right:0};var t=this.props,r=t.innerWidth;return{right:t.marginRight+r-e}}},{key:"_getCSSTop",value:function(e){return void 0===e||null===e?{top:0}:{top:this.props.marginTop+e}}},{key:"_getPositionInfo",value:function(){var e=this.props,t=e.value,r=e.getAlignStyle,i=Ma(this.props,"x")(t),n=Ma(this.props,"y")(t),a=this._getAlign(i,n);return{position:r?r(a,i,n):this._getAlignStyle(a,i,n),positionClassName:this._getAlignClassNames(a)}}},{key:"_getXCSS",value:function(e,t){switch(e){case al.LEFT_EDGE:return this._getCSSLeft(null);case al.RIGHT_EDGE:return this._getCSSRight(null);case al.LEFT:return this._getCSSRight(t);case al.RIGHT:default:return this._getCSSLeft(t)}}},{key:"_getYCSS",value:function(e,t){switch(e){case al.TOP_EDGE:return this._getCSSTop(null);case al.BOTTOM_EDGE:return this._getCSSBottom(null);case al.BOTTOM:return this._getCSSTop(t);case al.TOP:default:return this._getCSSBottom(t)}}},{key:"_mapOrientationToAlign",value:function(e){switch(e){case sl.BOTTOM_LEFT:return{horizontal:al.LEFT,vertical:al.BOTTOM};case sl.BOTTOM_RIGHT:return{horizontal:al.RIGHT,vertical:al.BOTTOM};case sl.TOP_LEFT:return{horizontal:al.LEFT,vertical:al.TOP};case sl.TOP_RIGHT:return{horizontal:al.RIGHT,vertical:al.TOP}}}},{key:"render",value:function(){var e=this.props,t=e.value,r=e.format,i=e.children,n=e.style,a=e.className,s=this._getPositionInfo(),o=s.position,c=s.positionClassName;return W.a.createElement("div",{className:"rv-hint "+c+" "+a,style:tl({},n,o,{position:"absolute"})},i||W.a.createElement("div",{className:"rv-hint__content",style:n.content},r(t).map((function(e,t){return W.a.createElement("div",{key:"rv-hint"+t,style:n.row},W.a.createElement("span",{className:"rv-hint__title",style:n.title},e.title),": ",W.a.createElement("span",{className:"rv-hint__value",style:n.value},e.value))}))))}}],[{key:"defaultProps",get:function(){return{format:ol,align:{horizontal:al.AUTO,vertical:al.AUTO},style:{}}}},{key:"propTypes",get:function(){return{marginTop:a.a.number,marginLeft:a.a.number,innerWidth:a.a.number,innerHeight:a.a.number,scales:a.a.object,value:a.a.object,format:a.a.func,style:a.a.object,className:a.a.string,align:a.a.shape({horizontal:a.a.oneOf([al.AUTO,al.LEFT,al.RIGHT,al.LEFT_EDGE,al.RIGHT_EDGE]),vertical:a.a.oneOf([al.AUTO,al.BOTTOM,al.TOP,al.BOTTOM_EDGE,al.TOP_EDGE])}),getAlignStyle:a.a.func,orientation:a.a.oneOf([sl.BOTTOM_LEFT,sl.BOTTOM_RIGHT,sl.TOP_LEFT,sl.TOP_RIGHT])}}}]),t}(z.PureComponent);cl.displayName="Hint",cl.ORIENTATION=sl,cl.ALIGN=al;var ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},dl=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function hl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ll(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var pl=function(e){function t(){return ll(this,t),fl(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),dl(t,[{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.className,a=r.data,s=r.linePosAttr,o=r.lineSizeAttr,c=r.marginLeft,u=r.marginTop,d=r.style,h=r.valuePosAttr,l=r.valueSizeAttr,f=r.barWidth;if(!a)return null;if(i)return W.a.createElement(Ye,ul({},this.props,{animatedProps:as}),W.a.createElement(t,ul({},this.props,{animation:null})));var p=ss(this.props),v=p.sameTypeTotal,m=p.sameTypeIndex,y=this._getScaleDistance(s),g=this._getAttributeFunctor(s),b=this._getAttributeFunctor(h),k=this._getAttr0Functor(h),x=this._getAttributeFunctor("fill")||this._getAttributeFunctor("color"),w=this._getAttributeFunctor("stroke")||this._getAttributeFunctor("color"),_=this._getAttributeFunctor("opacity"),O=y/2*f;return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--bar "+n,transform:"translate("+c+","+u+")"},a.map((function(t,r){var i,n=2*O,a=g(t),c=n/v-(v-1)/v,u=a-O+c*m+m,f=(hl(i={style:ul({opacity:_&&_(t),stroke:w&&w(t),fill:x&&x(t)},d)},s,u),hl(i,o,c),hl(i,h,Math.min(k(t),b(t))),hl(i,l,Math.abs(-k(t)+b(t))),hl(i,"onClick",(function(r){return e._valueClickHandler(t,r)})),hl(i,"onContextMenu",(function(r){return e._valueRightClickHandler(t,r)})),hl(i,"onMouseOver",(function(r){return e._valueMouseOverHandler(t,r)})),hl(i,"onMouseOut",(function(r){return e._valueMouseOutHandler(t,r)})),hl(i,"key",r),i);return W.a.createElement("rect",f)})))}}],[{key:"propTypes",get:function(){return ul({},za.propTypes,{linePosAttr:a.a.string,valuePosAttr:a.a.string,lineSizeAttr:a.a.string,valueSizeAttr:a.a.string,cluster:a.a.string,barWidth:a.a.number})}},{key:"defaultProps",get:function(){return{barWidth:.85}}}]),t}(za);pl.displayName="BarSeries";var vl=pl,ml=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},yl=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var kl=function(e){function t(){return gl(this,t),bl(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),yl(t,[{key:"render",value:function(){return W.a.createElement(vl,ml({},this.props,{linePosAttr:"y",valuePosAttr:"x",lineSizeAttr:"height",valueSizeAttr:"width"}))}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:"y"===e,zeroBaseValue:"x"===e}}}]),t}(za);kl.displayName="HorizontalBarSeries";var xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},wl=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function _l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ol(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Tl=function(e){function t(){return _l(this,t),Ol(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),wl(t,[{key:"render",value:function(){return null}}],[{key:"renderLayer",value:function(e,t){var r=e.data,i=e.linePosAttr,n=e.lineSizeAttr,a=e.valuePosAttr,s=e.marginTop,o=e.marginBottom;if(r&&0!==r.length){var c=function(e,t){var r=Ta(e,t);return r?r.distance:0}(e,i),u=Ma(e,i),d=Ma(e,a),h=Ea(e,a),l=Ma(e,"fill")||Ma(e,"color"),f=Ma(e,"stroke")||Ma(e,"color"),p=Ma(e,"opacity"),v=c/2*.85,m=2*v,y=ss(e),g=y.sameTypeTotal,b=y.sameTypeIndex;r.forEach((function(e){var r=u(e)-v,i=m/g-(g-1)/g,c=ve(l(e)),y=ve(f(e)),k=p(e)||1,x=r+i*b+b,w=Math.min(h(e),d(e)),_="x"===a?w:x,O="y"===a?w:x,T=Math.abs(-h(e)+d(e)),S="height"===n?i:T,C="width"===n?i:T;t.beginPath(),t.rect(_+o,O+s,C,S),t.fillStyle="rgba("+c.r+", "+c.g+", "+c.b+", "+k+")",t.fill(),t.strokeStyle="rgba("+y.r+", "+y.g+", "+y.b+", "+k+")",t.stroke()}))}}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);Tl.displayName="BarSeriesCanvas",Tl.defaultProps=xl({},za.defaultProps,{linePosAttr:a.a.string.isRequired,valuePosAttr:a.a.string.isRequired,lineSizeAttr:a.a.string.isRequired,valueSizeAttr:a.a.string.isRequired}),Tl.propTypes=xl({},za.propTypes);var Sl=Tl,Cl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Il=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Ml(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function El(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Al=function(e){function t(){return Ml(this,t),El(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Il(t,[{key:"render",value:function(){return null}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:"y"===e,zeroBaseValue:"x"===e}}},{key:"renderLayer",value:function(e,t){Sl.renderLayer(Cl({},e,{linePosAttr:"y",valuePosAttr:"x",lineSizeAttr:"height",valueSizeAttr:"width"}),t)}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);Al.displayName="HorizontalBarSeriesCanvas",Al.propTypes=Cl({},za.propTypes);var Fl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Pl=iu.HORIZONTAL,Bl=Fl({},Fh.propTypes,{direction:a.a.oneOf([Pl])}),Rl={direction:Pl,attr:"y"};function Vl(e){return W.a.createElement(Fh,e)}Vl.displayName="HorizontalGridLines",Vl.propTypes=Bl,Vl.defaultProps=Rl,Vl.requiresSVG=!0;var Ll=Vl,Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ql=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Nl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Gl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Ul=function(e){function t(){return Gl(this,t),jl(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ql(t,[{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.className,a=r.data,s=r.linePosAttr,o=r.lineSizeAttr,c=r.marginLeft,u=r.marginTop,d=r.style,h=r.valuePosAttr,l=r.valueSizeAttr;if(!a)return null;if(i)return W.a.createElement(Ye,Dl({},this.props,{animatedProps:as}),W.a.createElement(t,Dl({},this.props,{animation:null})));var f=this._getAttributeFunctor(s),p=this._getAttr0Functor(s),v=this._getAttributeFunctor(h),m=this._getAttr0Functor(h),y=this._getAttributeFunctor("fill")||this._getAttributeFunctor("color"),g=this._getAttributeFunctor("stroke")||this._getAttributeFunctor("color"),b=this._getAttributeFunctor("opacity");return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--rect "+n,transform:"translate("+c+","+u+")"},a.map((function(t,r){var i,n=(Nl(i={style:Dl({opacity:b&&b(t),stroke:g&&g(t),fill:y&&y(t)},d)},s,p(t)),Nl(i,o,Math.abs(f(t)-p(t))),Nl(i,h,Math.min(m(t),v(t))),Nl(i,l,Math.abs(-m(t)+v(t))),Nl(i,"onClick",(function(r){return e._valueClickHandler(t,r)})),Nl(i,"onContextMenu",(function(r){return e._valueRightClickHandler(t,r)})),Nl(i,"onMouseOver",(function(r){return e._valueMouseOverHandler(t,r)})),Nl(i,"onMouseOut",(function(r){return e._valueMouseOutHandler(t,r)})),Nl(i,"key",r),i);return W.a.createElement("rect",n)})))}}],[{key:"propTypes",get:function(){return Dl({},za.propTypes,{linePosAttr:a.a.string,valuePosAttr:a.a.string,lineSizeAttr:a.a.string,valueSizeAttr:a.a.string})}}]),t}(za);Ul.displayName="RectSeries";var Hl=Ul,zl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Wl=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Kl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Yl=function(e){function t(){return Kl(this,t),Xl(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Wl(t,[{key:"render",value:function(){return W.a.createElement(Hl,zl({},this.props,{linePosAttr:"y",valuePosAttr:"x",lineSizeAttr:"height",valueSizeAttr:"width"}))}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:!1,zeroBaseValue:"x"===e}}}]),t}(za);Yl.displayName="HorizontalRectSeries";var Zl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ql=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function $l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jl(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var ef=function(e){function t(){return $l(this,t),Jl(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Ql(t,[{key:"render",value:function(){return null}}],[{key:"renderLayer",value:function(e,t){var r=e.data,i=e.linePosAttr,n=e.lineSizeAttr,a=e.marginLeft,s=e.marginTop,o=e.valuePosAttr;if(r&&0!==r.length){var c=Ma(e,i),u=Ea(e,i),d=Ma(e,o),h=Ea(e,o),l=Ma(e,"fill")||Ma(e,"color"),f=Ma(e,"stroke")||Ma(e,"color"),p=Ma(e,"opacity");r.forEach((function(e){var r=ve(l(e)),i=ve(f(e)),v=p(e)||1,m=u(e),y=Math.min(h(e),d(e)),g="x"===o?y:m,b="y"===o?y:m,k=Math.abs(c(e)-u(e)),x=Math.abs(-h(e)+d(e)),w="height"===n?k:x,_="width"===n?k:x;t.beginPath(),t.rect(g+a,b+s,_,w),t.fillStyle="rgba("+r.r+", "+r.g+", "+r.b+", "+v+")",t.fill(),t.strokeStyle="rgba("+i.r+", "+i.g+", "+i.b+", "+v+")",t.stroke()}))}}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);ef.displayName="RectSeriesCanvas",ef.defaultProps=Zl({},za.defaultProps,{linePosAttr:a.a.string.isRequired,valuePosAttr:a.a.string.isRequired,lineSizeAttr:a.a.string.isRequired,valueSizeAttr:a.a.string.isRequired}),ef.propTypes=Zl({},za.propTypes);var tf=ef,rf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},nf=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function af(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var of=function(e){function t(){return af(this,t),sf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),nf(t,[{key:"render",value:function(){return null}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:!1,zeroBaseValue:"x"===e}}},{key:"renderLayer",value:function(e,t){tf.renderLayer(rf({},e,{linePosAttr:"y",valuePosAttr:"x",lineSizeAttr:"height",valueSizeAttr:"width"}),t)}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);of.displayName="HorizontalRectSeriesCanvas",of.propTypes=rf({},za.propTypes);var cf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},uf=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function df(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var lf=function(e,t){return e||(t?"start":"end")},ff=function(e,t){return e||(t?"text-before-edge":"text-after-edge")},pf=function(e){function t(){return df(this,t),hf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),uf(t,[{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.allowOffsetToBeReversed,a=r.className,s=r.data,o=r._data,c=r.getLabel,u=r.marginLeft,d=r.marginTop,h=r.rotation,l=r.style,f=r.xRange,p=r.yRange,v=r.labelAnchorX,m=r.labelAnchorY;if(!s)return null;if(i)return W.a.createElement(Ye,cf({},this.props,{animatedProps:as}),W.a.createElement(t,cf({},this.props,{animation:null,_data:s})));var y=this._getAttributeFunctor("x"),g=this._getAttributeFunctor("y");return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--label "+a,transform:"translate("+u+","+d+")",style:l},s.reduce((function(t,r,i){var a=r.style,s=r.xOffset,u=r.yOffset;if(!c(r))return t;var d=y(r),l=g(r),b=d<(f[1]-f[0])/2,k=l<Math.abs(p[1]-p[0])/2,x=d+(n&&b?-1:1)*(s||0),w=l+(n&&k?-1:1)*(u||0),_=0===r.rotation||r.rotation?r.rotation:h,O=cf({dominantBaseline:ff(m,k),className:"rv-xy-plot__series--label-text",key:i,onClick:function(t){return e._valueClickHandler(r,t)},onContextMenu:function(t){return e._valueRightClickHandler(r,t)},onMouseOver:function(t){return e._valueMouseOverHandler(r,t)},onMouseOut:function(t){return e._valueMouseOutHandler(r,t)},textAnchor:lf(v,b),x:x,y:w,transform:"rotate("+_+","+x+","+w+")"},a),T=c(o?o[i]:r);return t.concat([W.a.createElement("text",O,T)])}),[]))}}]),t}(za);pf.propTypes={animation:a.a.bool,allowOffsetToBeReversed:a.a.bool,className:a.a.string,data:a.a.arrayOf(a.a.shape({x:a.a.oneOfType([a.a.number,a.a.string]),y:a.a.oneOfType([a.a.number,a.a.string]),angle:a.a.number,radius:a.a.number,label:a.a.string,xOffset:a.a.number,yOffset:a.a.number,style:a.a.object})).isRequired,marginLeft:a.a.number,marginTop:a.a.number,rotation:a.a.number,style:a.a.object,xRange:a.a.arrayOf(a.a.number),yRange:a.a.arrayOf(a.a.number),labelAnchorX:a.a.string,labelAnchorY:a.a.string},pf.defaultProps=cf({},za.defaultProps,{animation:!1,rotation:0,getLabel:function(e){return e.label}}),pf.displayName="LabelSeries";var vf=pf,mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},yf=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function gf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var kf={dashed:"6, 2",solid:null},xf=function(e){function t(){return gf(this,t),bf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),yf(t,[{key:"_renderLine",value:function(e,t,r,n,a){var s=Xs();return null!==n&&("string"===typeof n&&i[n]?s=s.curve(i[n]):"function"===typeof n&&(s=s.curve(n))),(s=(s=s.defined(a)).x(t).y(r))(e)}},{key:"render",value:function(){var e=this.props,r=e.animation,i=e.className,n=e.data;if(this.props.nullAccessor&&Object(sa.b)("nullAccessor has been renamed to getNull",!0),!n)return null;if(r)return W.a.createElement(Ye,mf({},this.props,{animatedProps:as}),W.a.createElement(t,mf({},this.props,{animation:null})));var a=this.props,s=a.curve,o=a.marginLeft,c=a.marginTop,u=a.strokeDasharray,d=a.strokeStyle,h=a.strokeWidth,l=a.style,f=this._getAttributeFunctor("x"),p=this._getAttributeFunctor("y"),v=this._getAttributeValue("stroke")||this._getAttributeValue("color"),m=this._getAttributeValue("opacity"),y=Number.isFinite(m)?m:1,g=this.props.nullAccessor||this.props.getNull,b=this._renderLine(n,f,p,s,g);return W.a.createElement("path",{d:b,className:"rv-xy-plot__series rv-xy-plot__series--line "+i,transform:"translate("+o+","+c+")",onMouseOver:this._seriesMouseOverHandler,onMouseOut:this._seriesMouseOutHandler,onClick:this._seriesClickHandler,onContextMenu:this._seriesRightClickHandler,style:mf({opacity:y,strokeDasharray:kf[d]||u,strokeWidth:h,stroke:v},l)})}}]),t}(za);xf.displayName="LineSeries",xf.propTypes=mf({},za.propTypes,{strokeStyle:a.a.oneOf(Object.keys(kf)),curve:a.a.oneOfType([a.a.string,a.a.func]),getNull:a.a.func}),xf.defaultProps=mf({},za.defaultProps,{strokeStyle:"solid",style:{},opacity:1,curve:null,className:"",getNull:function(){return!0}});var wf=xf,_f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Of=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Tf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Cf=function(e){function t(){return Tf(this,t),Sf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Of(t,[{key:"_renderCircle",value:function(e,t,r,i,n){var a=this,s=n.fill,o=n.opacity,c=n.size,u=n.stroke,d=n.x,h=n.y,l={r:c?c(e):5,cx:d(e),cy:h(e),style:_f({opacity:o?o(e):1,stroke:u&&u(e),fill:s&&s(e),strokeWidth:r||1},i),key:t,onClick:function(t){return a._valueClickHandler(e,t)},onContextMenu:function(t){return a._valueRightClickHandler(e,t)},onMouseOver:function(t){return a._valueMouseOverHandler(e,t)},onMouseOut:function(t){return a._valueMouseOutHandler(e,t)}};return W.a.createElement("circle",l)}},{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.className,a=r.data,s=r.marginLeft,o=r.marginTop,c=r.strokeWidth,u=r.style;this.props.nullAccessor&&Object(sa.b)("nullAccessor has been renamed to getNull",!0);var d=this.props.nullAccessor||this.props.getNull;if(!a)return null;if(i)return W.a.createElement(Ye,_f({},this.props,{animatedProps:as}),W.a.createElement(t,_f({},this.props,{animation:null})));var h={fill:this._getAttributeFunctor("fill")||this._getAttributeFunctor("color"),opacity:this._getAttributeFunctor("opacity"),size:this._getAttributeFunctor("size"),stroke:this._getAttributeFunctor("stroke")||this._getAttributeFunctor("color"),x:this._getAttributeFunctor("x"),y:this._getAttributeFunctor("y")};return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--mark "+n,transform:"translate("+s+","+o+")"},a.map((function(t,r){return d(t)&&e._renderCircle(t,r,c,u,h)})))}}]),t}(za);Cf.displayName="MarkSeries",Cf.propTypes=_f({},za.propTypes,{getNull:a.a.func,strokeWidth:a.a.number}),Cf.defaultProps={getNull:function(){return!0}};var If=Cf,Mf=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Ef=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function Af(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ff(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Pf=Ef({},wf.propTypes,{lineStyle:a.a.object,markStyle:a.a.object}),Bf=function(e){function t(){return Af(this,t),Ff(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Mf(t,[{key:"render",value:function(){var e=this.props,t=e.lineStyle,r=e.markStyle,i=e.style;return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--linemark"},W.a.createElement(wf,Ef({},this.props,{style:Ef({},i,t)})),W.a.createElement(If,Ef({},this.props,{style:Ef({},i,r)})))}}],[{key:"defaultProps",get:function(){return Ef({},wf.defaultProps,{lineStyle:{},markStyle:{}})}}]),t}(za);Bf.displayName="LineMarkSeries",Bf.propTypes=Pf;var Rf=Bf,Vf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Lf=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Df(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Nf=function(e){function t(){return Df(this,t),qf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Lf(t,[{key:"render",value:function(){return null}}],[{key:"renderLayer",value:function(e,t){var r=e.data,i=e.marginLeft,n=e.marginTop,a=Ma(e,"x"),s=Ma(e,"y"),o=Ma(e,"size")||function(e){return 5},c=Ma(e,"fill")||Ma(e,"color"),u=Ma(e,"stroke")||Ma(e,"color"),d=Ma(e,"opacity");r.forEach((function(e){var r=ve(c(e)),h=ve(u(e)),l=d(e)||1;t.beginPath(),t.arc(a(e)+i,s(e)+n,o(e),0,2*Math.PI),t.fillStyle="rgba("+r.r+", "+r.g+", "+r.b+", "+l+")",t.fill(),t.strokeStyle="rgba("+h.r+", "+h.g+", "+h.b+", "+l+")",t.stroke()}))}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);Nf.displayName="MarkSeriesCanvas",Nf.propTypes=Vf({},za.propTypes);var Gf=Nf,jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Uf=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Hf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Wf=function(e){function t(){return Hf(this,t),zf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Uf(t,[{key:"render",value:function(){return W.a.createElement("div",null)}}],[{key:"renderLayer",value:function(e,t){var r=e.curve,n=e.data,a=e.marginLeft,s=e.marginTop,o=e.strokeWidth,c=e.strokeDasharray;if(n&&0!==n.length){var u=Ma(e,"x"),d=Ma(e,"y"),h=ve(Aa(e,"stroke")||Aa(e,"color")),l=Aa(e,"opacity"),f=Number.isFinite(l)?l:1,p=Xs().x((function(e){return u(e)+a})).y((function(e){return d(e)+s}));"string"===typeof r&&i[r]?p=p.curve(i[r]):"function"===typeof r&&(p=p.curve(r)),t.beginPath(),t.strokeStyle="rgba("+h.r+", "+h.g+", "+h.b+", "+f+")",t.lineWidth=o,c&&t.setLineDash(c),p.context(t)(n),t.stroke(),t.closePath(),t.lineWidth=1,t.setLineDash([])}}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);Wf.displayName="LineSeriesCanvas",Wf.defaultProps=jf({},za.defaultProps,{strokeWidth:2}),Wf.propTypes=jf({},za.propTypes,{strokeWidth:a.a.number});var Kf=Wf,Xf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Yf=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Zf(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qf(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var $f=function(e){function t(){return Zf(this,t),Qf(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Yf(t,[{key:"render",value:function(){return null}}],[{key:"renderLayer",value:function(e,t){Kf.renderLayer(e,t),Gf.renderLayer(e,t)}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);$f.displayName="LineMarkSeriesCanvas",$f.propTypes=Xf({},za.propTypes);var Jf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ep=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function tp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rp(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var ip=function(e,t,r){return e.reduce((function(e,i,n){return e+" "+(n?"L":"M")+t(i)+" "+r(i)}),"")+" Z"},np=function(e){function t(){return tp(this,t),rp(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ep(t,[{key:"render",value:function(){var e=this,r=this.props,i=r.animation,n=r.color,a=r.className,s=r.data,o=r.marginLeft,c=r.marginTop,u=r.style;if(!s)return null;if(i)return W.a.createElement(Ye,Jf({},this.props,{animatedProps:as}),W.a.createElement(t,Jf({},this.props,{animation:null})));var d=this._getAttributeFunctor("x"),h=this._getAttributeFunctor("y");return W.a.createElement("path",{className:"rv-xy-plot__series rv-xy-plot__series--polygon "+a,onMouseOver:function(t){return e._seriesMouseOverHandler(s,t)},onMouseOut:function(t){return e._seriesMouseOutHandler(s,t)},onClick:this._seriesClickHandler,onContextMenu:this._seriesRightClickHandler,fill:n||"#12939A",style:u,d:ip(s,d,h),transform:"translate("+o+","+c+")"})}}],[{key:"propTypes",get:function(){return Jf({},za.propTypes)}}]),t}(za);np.displayName="PolygonSeries";var ap=np,sp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},op=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function cp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function up(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var dp=function(e){function t(){return cp(this,t),up(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),op(t,[{key:"render",value:function(){return W.a.createElement(vl,sp({},this.props,{linePosAttr:"x",valuePosAttr:"y",lineSizeAttr:"width",valueSizeAttr:"height"}))}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:"x"===e,zeroBaseValue:"y"===e}}}]),t}(za);dp.displayName="VerticalBarSeries";var hp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},lp=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function fp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pp(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var vp=function(e){function t(){return fp(this,t),pp(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),lp(t,[{key:"render",value:function(){return null}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:"x"===e,zeroBaseValue:"y"===e}}},{key:"renderLayer",value:function(e,t){Sl.renderLayer(hp({},e,{linePosAttr:"x",valuePosAttr:"y",lineSizeAttr:"width",valueSizeAttr:"height"}),t)}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);vp.displayName="HorizontalBarSeriesCanvas",vp.propTypes=hp({},za.propTypes);var mp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},yp=iu.VERTICAL,gp=mp({},Fh.propTypes,{direction:a.a.oneOf([yp])}),bp={direction:yp,attr:"x"};function kp(e){return W.a.createElement(Fh,e)}kp.displayName="VerticalGridLines",kp.propTypes=gp,kp.defaultProps=bp,kp.requiresSVG=!0;var xp=kp,wp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_p=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Op(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tp(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Sp=function(e){function t(){return Op(this,t),Tp(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),_p(t,[{key:"render",value:function(){return W.a.createElement(Hl,wp({},this.props,{linePosAttr:"x",valuePosAttr:"y",lineSizeAttr:"width",valueSizeAttr:"height"}))}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:!1,zeroBaseValue:"y"===e}}}]),t}(za);Sp.displayName="VerticalRectSeries";var Cp=Sp,Ip=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Mp=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Ep(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ap(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Fp=function(e){function t(){return Ep(this,t),Ap(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Mp(t,[{key:"render",value:function(){return null}}],[{key:"getParentConfig",value:function(e){return{isDomainAdjustmentNeeded:!1,zeroBaseValue:"y"===e}}},{key:"renderLayer",value:function(e,t){tf.renderLayer(Ip({},e,{linePosAttr:"x",valuePosAttr:"y",lineSizeAttr:"width",valueSizeAttr:"height"}),t)}},{key:"requiresSVG",get:function(){return!1}},{key:"isCanvas",get:function(){return!0}}]),t}(za);Fp.displayName="HorizontalRectSeriesCanvas",Fp.propTypes=Ip({},za.propTypes);var Pp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Bp=function(e){return e};function Rp(e){var t=e.className,r=e.extent,i=e.nodes,n=e.onBlur,a=e.onClick,s=e.onMouseUp,o=e.onMouseDown,c=e.onHover,u=e.polygonStyle,d=e.style,h=e.x,l=e.y,f=H().x(h||Ma(e,"x")).y(l||Ma(e,"y")).extent(r||function(e){var t=e.innerWidth,r=e.innerHeight,i=e.marginLeft,n=e.marginTop;return[[i,n],[t+i,r+n]]}(e)).polygons(i),p=function(e){return function(t){t.preventDefault();var r=function(e){var t=e.nativeEvent,r=t.pageX,i=t.pageY,n=document.elementFromPoint(r,i);if(!n)return-1;var a=n.parentNode;return Array.prototype.indexOf.call(a.childNodes,n)}(t);if(r>-1&&r<f.length){var i=f[r];e(i.data)}}};return W.a.createElement("g",{className:t+" rv-voronoi",style:d,onTouchEnd:p(s),onTouchStart:p(o),onTouchMove:p(c),onTouchCancel:p(n)},f.map((function(e,t){return W.a.createElement("path",{className:"rv-voronoi__cell "+(e.data&&e.data.className||""),d:"M"+e.join("L")+"Z",onClick:function(){return a(e.data)},onMouseUp:function(){return s(e.data)},onMouseDown:function(){return o(e.data)},onMouseOver:function(){return c(e.data)},onMouseOut:function(){return n(e.data)},fill:"none",style:Pp({pointerEvents:"all"},u,e.data&&e.data.style),key:t})})))}Rp.requiresSVG=!0,Rp.displayName="Voronoi",Rp.defaultProps={className:"",onBlur:Bp,onClick:Bp,onHover:Bp,onMouseDown:Bp,onMouseUp:Bp},Rp.propTypes={className:a.a.string,extent:a.a.arrayOf(a.a.arrayOf(a.a.number)),nodes:a.a.arrayOf(a.a.object).isRequired,onBlur:a.a.func,onClick:a.a.func,onHover:a.a.func,onMouseDown:a.a.func,onMouseUp:a.a.func,x:a.a.func,y:a.a.func};var Vp=Rp,Lp=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Dp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function qp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Np(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Gp=function(e){function t(){return qp(this,t),Np(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Lp(t,[{key:"render",value:function(){var e=this.props,r=e.animation,i=e.className,n=e.crossBarWidth,a=e.data,s=e.marginLeft,o=e.marginTop,c=e.strokeWidth,u=e.style;if(!a)return null;if(r)return W.a.createElement(Ye,Dp({},this.props,{animatedProps:as}),W.a.createElement(t,Dp({},this.props,{animation:null})));var d={crossBarWidth:n,opacityFunctor:this._getAttributeFunctor("opacity"),sizeFunctor:this._getAttributeFunctor("size"),strokeFunctor:this._getAttributeFunctor("stroke")||this._getAttributeFunctor("color"),strokeWidth:c,style:u,xFunctor:this._getAttributeFunctor("x"),yFunctor:this._getAttributeFunctor("y"),valueClickHandler:this._valueClickHandler,valueRightClickHandler:this._valueRightClickHandler,valueMouseOverHandler:this._valueMouseOverHandler,valueMouseOutHandler:this._valueMouseOutHandler};return W.a.createElement("g",{className:"rv-xy-plot__series rv-xy-plot__series--whisker "+i,transform:"translate("+s+","+o+")"},a.map(function(e){return function(t,r){var i=e.crossBarWidth,n=e.opacityFunctor,a=e.sizeFunctor,s=e.strokeFunctor,o=e.strokeWidth,c=e.style,u=e.valueClickHandler,d=e.valueMouseOutHandler,h=e.valueMouseOverHandler,l=e.valueRightClickHandler,f=e.xFunctor,p=e.yFunctor,v=a?a(t):0,m=f(t),y=p(t),g=f({x:t.x+t.xVariance/2}),b=f({x:t.x-t.xVariance/2}),k=p({y:t.y+t.yVariance/2}),x=p({y:t.y-t.yVariance/2}),w=g&&m+v<g,_=k&&y-v>k;if(!w&&!_)return null;var O=Dp({opacity:n?n(t):1,stroke:s&&s(t),strokeWidth:o||1},c),T=i/2,S={x1:m+v,y1:y,x2:g,y2:y,style:O},C={x1:m-v,y1:y,x2:b,y2:y,style:O},I={x1:g,y1:y-T,x2:g,y2:y+T,style:O},M={x1:b,y1:y-T,x2:b,y2:y+T,style:O},E={x1:m,y1:y-v,x2:m,y2:k,style:O},A={x1:m,y1:y+v,x2:m,y2:x,style:O},F={x1:m-T,y1:k,x2:m+T,y2:k,style:O},P={x1:m-T,y1:x,x2:m+T,y2:x,style:O};return W.a.createElement("g",{className:"mark-whiskers",key:r,onClick:function(e){return u(t,e)},onContextMenu:function(e){return l(t,e)},onMouseOver:function(e){return h(t,e)},onMouseOut:function(e){return d(t,e)}},w?W.a.createElement("g",{className:"x-whiskers"},W.a.createElement("line",S),W.a.createElement("line",C),W.a.createElement("line",I),W.a.createElement("line",M)):null,_?W.a.createElement("g",{className:"y-whiskers"},W.a.createElement("line",E),W.a.createElement("line",A),W.a.createElement("line",F),W.a.createElement("line",P)):null)}}(d)))}}]),t}(za);Gp.displayName="WhiskerSeries",Gp.propTypes=Dp({},za.propTypes,{strokeWidth:a.a.number}),Gp.defaultProps=Dp({},za.defaultProps,{crossBarWidth:6,size:0,strokeWidth:1});var jp=r(140),Up=r.n(jp),Hp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function zp(e,t){var r=e.margin,i=e.width,n=e.height,a=Hp({},t,"number"===typeof r?{left:r,right:r,top:r,bottom:r}:r),s=a.left,o=void 0===s?0:s,c=a.top,u=void 0===c?0:c,d=a.right,h=void 0===d?0:d,l=a.bottom,f=void 0===l?0:l;return{marginLeft:o,marginTop:u,marginRight:h,marginBottom:f,innerHeight:n-f-u,innerWidth:i-o-h}}function Wp(e,t,r){var i=e/2-r,n=t/2-r;return{bottom:n,left:i,right:i,top:n}}var Kp=a.a.oneOfType([a.a.shape({left:a.a.number,top:a.a.number,right:a.a.number,bottom:a.a.number}),a.a.number]),Xp={left:40,right:10,top:10,bottom:40},Yp=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Zp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function Qp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function Jp(e,t,r,i,n){e.clearRect(0,0,r,t),i.forEach((function(t){var r=t.interpolator,i=t.newProps,a=t.animation?r?r(n/30):r:function(){return{}};t.renderLayer(Zp({},i,a),e)}))}var ev=function(e){function t(){return Qp(this,t),$p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Yp(t,[{key:"componentDidMount",value:function(){var e=this.canvas.getContext("2d");if(e){var t=this.props.pixelRatio;e&&(e.scale(t,t),this.drawChildren(null,this.props,e))}}},{key:"componentDidUpdate",value:function(e){this.drawChildren(e,this.props,this.canvas.getContext("2d"))}},{key:"drawChildren",value:function(e,t,r){var i=t.children,n=t.innerHeight,a=t.innerWidth,s=t.marginBottom,o=t.marginLeft,c=t.marginRight,u=t.marginTop;if(r){var d,h,l=i.find((function(e){return e.props.animation})),f=n+u+s,p=a+o+c,v=(d=t.children,h=e?e.children:[],d.map((function(e,t){var r=h[t]?h[t].props:{},i=e.props,n=Ke(Zp({},r,{animatedProps:as})),a=i?Ke(Zp({},i,{animatedProps:as})):null,s=Ge(n,a);return{renderLayer:e.type.renderLayer,newProps:e.props,animation:e.props.animation,interpolator:s}})));l?function(e,t,r,i){var n=0,a=setInterval((function(){e?(Jp(e,t,r,i,n),n>30&&clearInterval(a),n+=1):clearInterval(a)}),1)}(r,f,p,v):Jp(r,f,p,v)}}},{key:"render",value:function(){var e=this,t=this.props,r=t.innerHeight,i=t.innerWidth,n=t.marginBottom,a=t.marginLeft,s=t.marginRight,o=t.marginTop,c=t.pixelRatio,u=r+o+n,d=i+a+s;return W.a.createElement("div",{style:{left:0,top:0},className:"rv-xy-canvas"},W.a.createElement("canvas",{className:"rv-xy-canvas-element",height:u*c,width:d*c,style:{height:u+"px",width:d+"px"},ref:function(t){return e.canvas=t}}),this.props.children)}}],[{key:"defaultProps",get:function(){return{pixelRatio:window&&window.devicePixelRatio||1}}}]),t}(z.Component);ev.displayName="CanvasWrapper",ev.propTypes={marginBottom:a.a.number.isRequired,marginLeft:a.a.number.isRequired,marginRight:a.a.number.isRequired,marginTop:a.a.number.isRequired,innerHeight:a.a.number.isRequired,innerWidth:a.a.number.isRequired,pixelRatio:a.a.number.isRequired};var tv=ev,rv=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),iv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var nv=["x","y","radius","angle","color","fill","stroke","opacity","size"];function av(e){return e.map((function(e){return Array.isArray(e)?e.map((function(e){return iv({},e,{parent:null})})):e}))}var sv=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));ov.call(r);var i=e.stackBy,n=rs(ts(e.children),i);return r.state={scaleMixins:r._getScaleMixins(n,e),data:n},r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),rv(t,null,[{key:"defaultProps",get:function(){return{className:""}}},{key:"propTypes",get:function(){return{animation:Ze,className:a.a.string,dontCheckIfEmpty:a.a.bool,height:a.a.number.isRequired,margin:Kp,onClick:a.a.func,onDoubleClick:a.a.func,onMouseDown:a.a.func,onMouseUp:a.a.func,onMouseEnter:a.a.func,onMouseLeave:a.a.func,onMouseMove:a.a.func,onTouchStart:a.a.func,onTouchMove:a.a.func,onTouchEnd:a.a.func,onTouchCancel:a.a.func,onWheel:a.a.func,stackBy:a.a.oneOf(nv),style:a.a.object,width:a.a.number.isRequired}}}]),rv(t,[{key:"componentWillReceiveProps",value:function(e){var t=rs(ts(e.children),e.stackBy),r=this.state.scaleMixins,i=this._getScaleMixins(t,e);(function(e,t,r){var i=iv({},e,{_allData:r?av(e._allData):e._allData}),n=iv({},t,{_allData:r?av(t._allData):t._allData});return Up()(i,n)})(i,r,e.hasTreeStructure)||this.setState({scaleMixins:i,data:t})}},{key:"_getClonedChildComponents",value:function(){var e=this,t=this.props,r=this.props.animation,i=this.state,n=i.scaleMixins,a=i.data,s=zp(this.props,Xp),o=W.a.Children.toArray(this.props.children),c=is(o),u=La(t,o);return o.map((function(t,i){var o=null;if(c[i]){var d=c[i].seriesIndex;o={data:a[d]}}return W.a.cloneElement(t,iv({},s,{animation:r},o&&t.type.prototype&&t.type.prototype.render?{ref:function(t){return e["series"+c[i].seriesIndex]=t}}:{},c[i],n,t.props,u[i],o))}))}},{key:"_getDefaultScaleProps",value:function(e){var t=zp(e,Xp),r=t.innerWidth,i=t.innerHeight,n=["color","fill","stroke"].reduce((function(t,r){var i,n,a,s="category"===e[r+"Type"]?Ka:Xa;return iv({},t,(a=s,(n=r+"Range")in(i={})?Object.defineProperty(i,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[n]=a,i))}),{});return iv({xRange:[0,r],yRange:[i,0]},n,{opacityType:Za,sizeRange:Ya})}},{key:"_getScaleMixins",value:function(e,t){var r,i=e.filter((function(e){return e})),n=(r=[]).concat.apply(r,function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}(i)),a=this._getDefaultScaleProps(t),s=qa(t),o=Pa(t,nv),c=Ba(iv({},a,s,o),n,nv),u=ts(t.children),d={},h=new Set,l=new Set;return u.forEach((function(r,i){r&&e[i]&&nv.forEach((function(e){var n=r.type.getParentConfig(e,r.props),a=n.isDomainAdjustmentNeeded,s=n.zeroBaseValue;if(a&&(h.add(e),l.add(i)),s){var o=t[e+"Domain"];d[e+"BaseValue"]=o?o[0]:0}}))})),iv({},a,d,o,c,{_allData:e,_adjustBy:Array.from(h),_adjustWhat:Array.from(l),_stackBy:t.stackBy})}},{key:"_isPlotEmpty",value:function(){var e=this.state.data;return!e||!e.length||!e.some((function(e){return e&&e.some((function(e){return e}))}))}},{key:"renderCanvasComponents",value:function(e,t){var r=e.filter((function(e){return e&&!e.type.requiresSVG&&e.type.isCanvas}));if(0===r.length)return null;var i=r[0].props,n=i.marginLeft,a=i.marginTop,s=i.marginBottom,o=i.marginRight,c=i.innerHeight,u=i.innerWidth;return W.a.createElement(tv,{innerHeight:c,innerWidth:u,marginLeft:n,marginTop:a,marginBottom:s,marginRight:o},r)}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.dontCheckIfEmpty,i=e.style,n=e.width,a=e.height;if(!r&&this._isPlotEmpty())return W.a.createElement("div",{className:"rv-xy-plot "+t,style:iv({width:n+"px",height:a+"px"},this.props.style)});var s=this._getClonedChildComponents();return W.a.createElement("div",{style:{width:n+"px",height:a+"px"},className:"rv-xy-plot "+t},W.a.createElement("svg",{className:"rv-xy-plot__inner",width:n,height:a,style:i,onClick:this._clickHandler,onDoubleClick:this._doubleClickHandler,onMouseDown:this._mouseDownHandler,onMouseUp:this._mouseUpHandler,onMouseMove:this._mouseMoveHandler,onMouseLeave:this._mouseLeaveHandler,onMouseEnter:this._mouseEnterHandler,onTouchStart:this._mouseDownHandler,onTouchMove:this._touchMoveHandler,onTouchEnd:this._touchEndHandler,onTouchCancel:this._touchCancelHandler,onWheel:this._wheelHandler},s.filter((function(e){return e&&e.type.requiresSVG}))),this.renderCanvasComponents(s,this.props),s.filter((function(e){return e&&!e.type.requiresSVG&&!e.type.isCanvas})))}}]),t}(W.a.Component),ov=function(){var e=this;this._clickHandler=function(t){var r=e.props.onClick;r&&r(t)},this._doubleClickHandler=function(t){var r=e.props.onDoubleClick;r&&r(t)},this._mouseDownHandler=function(t){var r=e.props,i=r.onMouseDown,n=r.children;i&&i(t),ts(n).forEach((function(r,i){var n=e["series"+i];n&&n.onParentMouseDown&&n.onParentMouseDown(t)}))},this._mouseEnterHandler=function(t){var r=e.props,i=r.onMouseEnter,n=r.children;i&&i(t),ts(n).forEach((function(r,i){var n=e["series"+i];n&&n.onParentMouseEnter&&n.onParentMouseEnter(t)}))},this._mouseLeaveHandler=function(t){var r=e.props,i=r.onMouseLeave,n=r.children;i&&i(t),ts(n).forEach((function(r,i){var n=e["series"+i];n&&n.onParentMouseLeave&&n.onParentMouseLeave(t)}))},this._mouseMoveHandler=function(t){var r=e.props,i=r.onMouseMove,n=r.children;i&&i(t),ts(n).forEach((function(r,i){var n=e["series"+i];n&&n.onParentMouseMove&&n.onParentMouseMove(t)}))},this._mouseUpHandler=function(t){var r=e.props,i=r.onMouseUp,n=r.children;i&&i(t),ts(n).forEach((function(r,i){var n=e["series"+i];n&&n.onParentMouseUp&&n.onParentMouseUp(t)}))},this._touchCancelHandler=function(t){var r=e.props.onTouchCancel;r&&r(t)},this._touchEndHandler=function(t){var r=e.props.onTouchEnd;r&&r(t)},this._touchMoveHandler=function(t){var r=e.props,i=r.onTouchMove,n=r.children;i&&i(t),ts(n).forEach((function(r,i){var n=e["series"+i];n&&n.onParentTouchMove&&n.onParentTouchMove(t)}))},this._touchStartHandler=function(t){var r=e.props,i=r.onTouchStart,n=r.children;i&&i(t),ts(n).forEach((function(r,i){var n=e["series"+i];n&&n.onParentTouchStart&&n.onParentTouchStart(t)}))},this._wheelHandler=function(t){var r=e.props.onWheel;r&&r(t)}};sv.displayName="XYPlot";var cv=sv,uv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},dv=ru.LEFT,hv=ru.RIGHT,lv=ru.TOP,fv=ru.BOTTOM,pv={height:a.a.number.isRequired,style:a.a.object,orientation:a.a.oneOf([dv,hv,lv,fv]).isRequired,width:a.a.number.isRequired};function vv(e){var t=e.orientation,r=e.width,i=e.height,n=e.style,a=void 0;return a=t===dv?{x1:r,x2:r,y1:0,y2:i}:t===hv?{x1:0,x2:0,y1:0,y2:i}:t===lv?{x1:0,x2:r,y1:i,y2:i}:{x1:0,x2:r,y1:0,y2:0},W.a.createElement("line",uv({},a,{className:"rv-xy-plot__axis__line",style:n}))}vv.defaultProps={style:{}},vv.displayName="AxisLine",vv.propTypes=pv;var mv=vv,yv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gv=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function bv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xv(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var wv=ru.LEFT,_v=ru.RIGHT,Ov=ru.TOP,Tv=ru.BOTTOM,Sv={height:a.a.number.isRequired,orientation:a.a.oneOf([wv,_v,Ov,Tv]).isRequired,style:a.a.object,width:a.a.number.isRequired};var Cv=function(e){function t(){return kv(this,t),xv(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),gv(t,[{key:"_areTicksWrapped",value:function(){var e=this.props.orientation;return e===wv||e===Ov}},{key:"_getTickContainerPropsGetterFn",value:function(){return this._isAxisVertical()?function(e){return{transform:"translate(0, "+e+")"}}:function(e){return{transform:"translate("+e+", 0)"}}}},{key:"_getTickLabelProps",value:function(){var e=this.props,t=e.orientation,r=e.tickLabelAngle,i=e.tickSize,n=e.tickSizeOuter,a=void 0===n?i:n,s=e.tickPadding,o=void 0===s?i:s,c=void 0;c=t===wv||t===Tv&&r?"end":t===_v||t===Ov&&r?"start":"middle";var u=this._isAxisVertical(),d=(this._areTicksWrapped()?-1:1)*(a+o);return{textAnchor:c,dy:t===Ov||r?"0":t===Tv?"0.72em":"0.32em",transform:(u?"translate("+d+", 0)":"translate(0, "+d+")")+(r?" rotate("+r+")":"")}}},{key:"_getTickLineProps",value:function(){var e,t=this.props,r=t.tickSize,i=t.tickSizeOuter,n=void 0===i?r:i,a=t.tickSizeInner,s=void 0===a?r:a,o=this._isAxisVertical(),c=o?"y":"x",u=o?"x":"y",d=this._areTicksWrapped()?-1:1;return bv(e={},c+"1",0),bv(e,c+"2",0),bv(e,u+"1",-d*s),bv(e,u+"2",d*n),e}},{key:"_isAxisVertical",value:function(){var e=this.props.orientation;return e===wv||e===_v}},{key:"render",value:function(){var e=this.props,t=e.attr,r=e.orientation,i=e.width,n=e.height,a=e.style,s=e.tickFormat,o=e.tickTotal,c=e.tickValues,u=r===wv?i:0,d=r===Ov?n:0,h=Sa(this.props,t),l=au(h,o,c),f=function(e,t,r){return r||(e.tickFormat?e.tickFormat(t):function(e){return e})}(h,o,s),p=this._getTickContainerPropsGetterFn(),v=this._getTickLineProps(),m=this._getTickLabelProps(),y=l.map((function(e,t){var r=h(e),n=f(e,t,h,o),s=W.a.isValidElement(n)&&!["tspan","textPath"].includes(n.type),c=n&&"string"!==typeof n.type;return W.a.createElement("g",yv({key:t},p(r,0),{className:"rv-xy-plot__axis__tick",style:a}),W.a.createElement("line",yv({},v,{className:"rv-xy-plot__axis__tick__line",style:yv({},a,a.line)})),s?W.a.cloneElement(n,c?yv({},m,{containerWidth:i,tickCount:l.length}):void 0):W.a.createElement("text",yv({},m,{className:"rv-xy-plot__axis__tick__text",style:yv({},a,a.text)}),n))}));return W.a.createElement("g",{transform:"translate("+u+", "+d+")",className:"rv-xy-plot__axis__ticks"},y)}}]),t}(W.a.Component);Cv.defaultProps={style:{}},Cv.displayName="AxisTicks",Cv.propTypes=Sv,Cv.requiresSVG=!0;var Iv=Cv,Mv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function Ev(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Av=16,Fv=ru.LEFT,Pv=ru.RIGHT,Bv=ru.TOP,Rv=ru.BOTTOM,Vv={width:a.a.number.isRequired,height:a.a.number.isRequired,orientation:a.a.oneOf([Fv,Pv,Bv,Rv]).isRequired,style:a.a.object,title:a.a.string.isRequired};function Lv(e){var t=e.orientation,r=e.position,i=e.width,n=e.height,a=e.style,s=e.title,o="translate("+(t===Fv?i:0)+", "+(t===Bv?n:0)+")",c=function(e,t){var r;return Ev(r={},Fv,{end:{x:Av,y:6,rotation:-90,textAnchor:"end"},middle:{x:Av,y:t/2-6,rotation:-90,textAnchor:"middle"},start:{x:Av,y:t-6,rotation:-90,textAnchor:"start"}}),Ev(r,Pv,{end:{x:-8,y:6,rotation:-90,textAnchor:"end"},middle:{x:-8,y:t/2-6,rotation:-90,textAnchor:"middle"},start:{x:-8,y:t-6,rotation:-90,textAnchor:"start"}}),Ev(r,Bv,{start:{x:6,y:Av,rotation:0,textAnchor:"start"},middle:{x:e/2-6,y:Av,rotation:0,textAnchor:"middle"},end:{x:e-6,y:Av,rotation:0,textAnchor:"end"}}),Ev(r,Rv,{start:{x:6,y:-6,rotation:0,textAnchor:"start"},middle:{x:e/2-6,y:-6,rotation:0,textAnchor:"middle"},end:{x:e-6,y:-6,rotation:0,textAnchor:"end"}}),r}(i,n)[t][r],u=c.x,d=c.y,h=c.rotation,l=c.textAnchor,f="translate("+u+", "+d+") rotate("+h+")";return W.a.createElement("g",{transform:o,className:"rv-xy-plot__axis__title"},W.a.createElement("g",{style:Mv({textAnchor:l},a),transform:f},W.a.createElement("text",{style:a},s)))}Lv.displayName="AxisTitle",Lv.propTypes=Vv,Lv.defaultProps={position:"end"};var Dv=Lv,qv=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Nv=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function Gv(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jv(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Uv=["xRange","yRange","xDomain","yDomain","width","height","marginLeft","marginTop","marginRight","marginBottom","tickSize","tickTotal","tickSizeInner","tickSizeOuter"],Hv=ru.LEFT,zv=ru.RIGHT,Wv=ru.TOP,Kv=ru.BOTTOM,Xv={orientation:a.a.oneOf([Hv,zv,Wv,Kv]),attr:a.a.string.isRequired,attrAxis:a.a.string,width:a.a.number,height:a.a.number,top:a.a.number,left:a.a.number,title:a.a.string,style:a.a.object,className:a.a.string,hideTicks:a.a.bool,hideLine:a.a.bool,on0:a.a.bool,tickLabelAngle:a.a.number,tickSize:a.a.number,tickSizeInner:a.a.number,tickSizeOuter:a.a.number,tickPadding:a.a.number,tickValues:a.a.arrayOf(a.a.oneOfType([a.a.number,a.a.string])),tickFormat:a.a.func,tickTotal:a.a.number,marginTop:a.a.number,marginBottom:a.a.number,marginLeft:a.a.number,marginRight:a.a.number,innerWidth:a.a.number,innerHeight:a.a.number},Yv={className:"",on0:!1,style:{},tickSize:6,tickPadding:8,orientation:Kv},Zv=function(e){function t(){return Gv(this,t),jv(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Nv(t,[{key:"_getDefaultAxisProps",value:function(){var e=this.props,t=e.innerWidth,r=e.innerHeight,i=e.marginTop,n=e.marginBottom,a=e.marginLeft,s=e.marginRight,o=e.orientation;return o===Kv?{tickTotal:nu(t),top:r+i,left:a,width:t,height:n}:o===Wv?{tickTotal:nu(t),top:0,left:a,width:t,height:i}:o===Hv?{tickTotal:nu(r),top:i,left:0,width:a,height:r}:{tickTotal:nu(r),top:i,left:a+t,width:s,height:r}}},{key:"render",value:function(){var e=this.props.animation;if(e){var r=e.nonAnimatedProps?Uv.filter((function(t){return e.nonAnimatedProps.indexOf(t)<0})):Uv;return W.a.createElement(Ye,qv({},this.props,{animatedProps:r}),W.a.createElement(t,qv({},this.props,{animation:null})))}var i=qv({},this._getDefaultAxisProps(),this.props),n=i.attrAxis,a=i.className,s=i.height,o=i.hideLine,c=i.hideTicks,u=i.left,d=i.marginTop,h=i.on0,l=i.orientation,f=i.position,p=i.style,v=i.title,m=i.top,y=i.width,g=[Hv,zv].indexOf(l)>-1,b=g?"rv-xy-plot__axis--vertical":"rv-xy-plot__axis--horizontal",k=u,x=m;if(h){var w=Sa(i,n);g?k=w(0):x=d+w(0)}return W.a.createElement("g",{transform:"translate("+k+","+x+")",className:"rv-xy-plot__axis "+b+" "+a,style:p},!o&&W.a.createElement(mv,{height:s,width:y,orientation:l,style:qv({},p,p.line)}),!c&&W.a.createElement(Iv,qv({},i,{style:qv({},p,p.ticks)})),v?W.a.createElement(Dv,{position:f,title:v,height:s,width:y,style:qv({},p,p.title),orientation:l}):null)}}]),t}(z.PureComponent);Zv.displayName="Axis",Zv.propTypes=Xv,Zv.defaultProps=Yv,Zv.requiresSVG=!0;var Qv=Zv,$v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Jv=ru.TOP,em=ru.BOTTOM,tm=$v({},Qv.propTypes,{orientation:a.a.oneOf([Jv,em])}),rm={orientation:em,attr:"x",attrAxis:"y"};function im(e){return W.a.createElement(Qv,e)}im.displayName="XAxis",im.propTypes=tm,im.defaultProps=rm,im.requiresSVG=!0;var nm=im,am=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},sm=ru.LEFT,om=ru.RIGHT,cm=am({},Qv.propTypes,{orientation:a.a.oneOf([sm,om])}),um={orientation:sm,attr:"y",attrAxis:"x"};function dm(e){return W.a.createElement(Qv,e)}dm.displayName="YAxis",dm.propTypes=cm,dm.defaultProps=um,dm.requiresSVG=!0;var hm=dm,lm={className:a.a.string,height:a.a.number,endColor:a.a.string,endTitle:a.a.oneOfType([a.a.number,a.a.string]).isRequired,midColor:a.a.string,midTitle:a.a.oneOfType([a.a.number,a.a.string]),startColor:a.a.string,startTitle:a.a.oneOfType([a.a.number,a.a.string]).isRequired,width:a.a.number},fm={className:"",startColor:Xa[0],endColor:Xa[1]};function pm(e){var t=e.startColor,r=e.midColor,i=e.endColor,n=e.startTitle,a=e.midTitle,s=e.endTitle,o=e.height,c=e.width,u=e.className,d=[t];return r&&d.push(r),d.push(i),W.a.createElement("div",{className:"rv-continuous-color-legend "+u,style:{width:c,height:o}},W.a.createElement("div",{className:"rv-gradient",style:{background:"linear-gradient(to right, "+d.join(",")+")"}}),W.a.createElement("div",{className:"rv-legend-titles"},W.a.createElement("span",{className:"rv-legend-titles__left"},n),W.a.createElement("span",{className:"rv-legend-titles__right"},s),a?W.a.createElement("span",{className:"rv-legend-titles__center"},a):null))}pm.displayName="ContinuousColorLegend",pm.propTypes=lm,pm.defaultProps=fm;var vm={className:a.a.string,circlesTotal:a.a.number,endSize:a.a.number,endTitle:a.a.oneOfType([a.a.number,a.a.string]).isRequired,height:a.a.number,startSize:a.a.number,startTitle:a.a.oneOfType([a.a.number,a.a.string]).isRequired,width:a.a.number};function mm(e){for(var t=e.startTitle,r=e.endTitle,i=e.startSize,n=e.endSize,a=e.circlesTotal,s=e.height,o=e.width,c=e.className,u=[],d=(n-i)/(a-1),h=0;h<a;h++){var l=d*h+i;u.push(W.a.createElement("div",{key:h,className:"rv-bubble",style:{width:l,height:l,borderRadius:l/2}})),u.push(" ")}return W.a.createElement("div",{className:"rv-continuous-size-legend "+c,style:{width:o,height:s}},W.a.createElement("div",{className:"rv-bubbles",style:{height:n}},u,W.a.createElement("div",{className:"rv-spacer"})),W.a.createElement("div",{className:"rv-legend-titles"},W.a.createElement("span",{className:"rv-legend-titles__left"},t),W.a.createElement("span",{className:"rv-legend-titles__right"},r)))}mm.displayName="ContinuousSizeLegend",mm.propTypes=vm,mm.defaultProps={circlesTotal:10,className:"",endSize:20,startSize:2};var ym=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gm={dashed:"6, 2",solid:null};function bm(e){var t=e.color,r=e.strokeDasharray,i=e.strokeStyle,n=e.strokeWidth,a=e.disabled,s=e.onClick,o=e.orientation,c=e.onMouseEnter,u=e.onMouseLeave,d=e.title,h="rv-discrete-color-legend-item "+o;a&&(h+=" disabled"),s&&(h+=" clickable");var l=gm[i]||r;return W.a.createElement("div",{className:h,onClick:s,onMouseEnter:c,onMouseLeave:u},W.a.createElement("svg",{className:"rv-discrete-color-legend-item__color",height:2,width:14},W.a.createElement("path",{className:"rv-discrete-color-legend-item__color__path",d:"M 0, 1 L 14, 1",style:ym({},n?{strokeWidth:n}:{},l?{strokeDasharray:l}:{},{stroke:a?null:t})})),W.a.createElement("span",{className:"rv-discrete-color-legend-item__title"},d))}bm.propTypes={color:a.a.string.isRequired,disabled:a.a.bool,title:a.a.oneOfType([a.a.string,a.a.element]).isRequired,onClick:a.a.func,onMouseEnter:a.a.func,onMouseLeave:a.a.func,orientation:a.a.oneOf(["vertical","horizontal"]).isRequired,strokeDasharray:a.a.string,strokeWidth:a.a.number,strokeStyle:a.a.oneOf(Object.keys(gm))},bm.defaultProps={disabled:!1,strokeStyle:"solid"},bm.displayName="DiscreteColorLegendItem";var km=bm,xm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function wm(e){var t=e.className,r=e.colors,i=e.height,n=e.items,a=e.onItemClick,s=e.onItemMouseEnter,o=e.onItemMouseLeave,c=e.orientation,u=e.style,d=e.width;return W.a.createElement("div",{className:"rv-discrete-color-legend "+c+" "+t,style:xm({width:d,height:i},u)},n.map((function(e,t){return W.a.createElement(km,{title:e.title?e.title:e,color:e.color?e.color:r[t%r.length],strokeDasharray:e.strokeDasharray,strokeStyle:e.strokeStyle,strokeWidth:e.strokeWidth,disabled:Boolean(e.disabled),orientation:c,key:t,onClick:a?function(r){return a(e,t,r)}:null,onMouseEnter:s?function(r){return s(e,t,r)}:null,onMouseLeave:s?function(r){return o(e,t,r)}:null})})))}wm.displayName="DiscreteColorLegendItem",wm.propTypes={className:a.a.string,items:a.a.arrayOf(a.a.oneOfType([a.a.shape({title:a.a.oneOfType([a.a.string,a.a.element]).isRequired,color:a.a.string,disabled:a.a.bool}),a.a.string.isRequired,a.a.element])).isRequired,onItemClick:a.a.func,onItemMouseEnter:a.a.func,onItemMouseLeave:a.a.func,height:a.a.number,width:a.a.number,orientation:a.a.oneOf(["vertical","horizontal"])},wm.defaultProps={className:"",colors:Wa,orientation:"vertical"};var _m=wm,Om=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e})({},_m.propTypes,{searchText:a.a.string,onSearchChange:a.a.func,searchPlaceholder:a.a.string,searchFn:a.a.func}),Tm={className:"",searchText:"",searchFn:function(e,t){return e.filter((function(e){return-1!==String(e.title||e).toLowerCase().indexOf(t)}))}};function Sm(e){var t=e.className,r=e.colors,i=e.height,n=e.items,a=e.onItemClick,s=e.onSearchChange,o=e.orientation,c=e.searchFn,u=e.searchPlaceholder,d=e.searchText,h=e.width,l=s?function(e){var t=e.target.value;return s(t)}:null,f=c(n,d);return W.a.createElement("div",{className:"rv-search-wrapper "+t,style:{width:h,height:i}},W.a.createElement("form",{className:"rv-search-wrapper__form"},W.a.createElement("input",{type:"search",placeholder:u,className:"rv-search-wrapper__form__input",value:d,onChange:l})),W.a.createElement("div",{className:"rv-search-wrapper__contents"},W.a.createElement(_m,{colors:r,items:f,onItemClick:a,orientation:o})))}Sm.propTypes=Om,Sm.defaultProps=Tm,Sm.displayName="SearchableDiscreteColorLegend";var Cm=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),Im=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function Mm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Em(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var Am="rv-parallel-coordinates-chart",Fm=Yt(".2r");function Pm(e){var t=e.domains,r=e.style;return t.map((function(e,t){return{x:e.name,y:1.1,label:e.name,style:r}}))}var Bm=function(e){function t(){var e,r,i;Mm(this,t);for(var n=arguments.length,a=Array(n),s=0;s<n;s++)a[s]=arguments[s];return r=i=Em(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),i.state={brushFilters:{}},Em(i,r)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),Cm(t,[{key:"render",value:function(){var e=this,t=this.state.brushFilters,r=this.props,i=r.animation,n=r.brushing,a=r.className,s=r.children,o=r.colorRange,c=r.data,u=r.domains,d=r.height,h=r.hideInnerMostValues,l=r.margin,f=r.onMouseLeave,p=r.onMouseEnter,v=r.showMarks,m=r.style,y=r.tickFormat,g=r.width,b=function(e){var t=e.animation,r=e.domains,i=e.style,n=e.tickFormat;return r.map((function(e,r){var a=e.domain;return W.a.createElement(bh,{animation:t,key:r+"-axis",axisStart:{x:e.name,y:0},axisEnd:{x:e.name,y:1},axisDomain:a,numberOfTicks:5,tickValue:function(t){return e.tickFormat?e.tickFormat(t):n(t)},style:i.axes})}))}({domains:u,animation:i,hideInnerMostValues:h,style:m,tickFormat:y}),k=function(e){var t=e.animation,r=e.brushFilters,i=e.colorRange,n=e.domains,a=e.data,s=e.style,o=e.showMarks,c=n.reduce((function(e,t){var r=t.domain;return e[t.name]=ar().domain(r).range([0,1]),e}),{});return a.map((function(e,a){var u=!0,d=n.map((function(t,i){var n=t.getValue,a=t.name,s=c[a](n?n(e):e[a]),o=r[a];return o&&(s<o.min||s>o.max)&&(u=!1),{x:a,y:s}})),h={animation:t,className:u?"rv-parallel-coordinates-chart-line":"rv-parallel-coordinates-chart-line rv-parallel-coordinates-chart-line-unselected",key:a+"-polygon",data:d,color:e.color||i[a%i.length],style:Im({},s.lines,e.style||{})};return u||(h.style=Im({},h.style,s.deselectedLineStyle)),o?W.a.createElement(Rf,h):W.a.createElement(wf,h)}))}({animation:i,brushFilters:t,colorRange:o,domains:u,data:c,showMarks:v,style:m}),x=W.a.createElement(vf,{animation:!0,key:a,className:"rv-parallel-coordinates-chart-label",data:Pm({domains:u,style:m.labels})}),w=zp(this.props,Xp),_=w.marginLeft,O=w.marginRight;return W.a.createElement(cv,{height:d,width:g,margin:l,dontCheckIfEmpty:!0,className:a+" "+Am,onMouseLeave:f,onMouseEnter:p,xType:"ordinal",yDomain:[0,1]},s,b.concat(k).concat(x),n&&u.map((function(r){var i=function(i){var n,a,s;e.setState({brushFilters:Im({},t,(n={},a=r.name,s=i?{min:i.bottom,max:i.top}:null,a in n?Object.defineProperty(n,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[a]=s,n))})};return W.a.createElement(el,{key:r.name,drag:!0,highlightX:r.name,onBrushEnd:i,onDragEnd:i,highlightWidth:(g-_-O)/u.length,enableX:!1})})))}}]),t}(z.Component);Bm.displayName="ParallelCoordinates",Bm.propTypes={animation:Ze,brushing:a.a.bool,className:a.a.string,colorType:a.a.string,colorRange:a.a.arrayOf(a.a.string),data:a.a.arrayOf(a.a.object).isRequired,domains:a.a.arrayOf(a.a.shape({name:a.a.string.isRequired,domain:a.a.arrayOf(a.a.number).isRequired,tickFormat:a.a.func})).isRequired,height:a.a.number.isRequired,margin:Kp,style:a.a.shape({axes:a.a.object,labels:a.a.object,lines:a.a.object}),showMarks:a.a.bool,tickFormat:a.a.func,width:a.a.number.isRequired},Bm.defaultProps={className:"",colorType:"category",colorRange:Wa,style:{axes:{line:{},ticks:{},text:{}},labels:{fontSize:10,textAnchor:"middle"},lines:{strokeWidth:1,strokeOpacity:1},deselectedLineStyle:{strokeOpacity:.1}},tickFormat:Fm};var Rm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Vm="rv-radar-chart",Lm=Yt(".2r");function Dm(e){var t=1e-12;return Math.abs(e)<=t?e=0:e>0?Math.abs(e-.5)<=t&&(e=.5):e<0&&Math.abs(e+.5)<=t&&(e=-.5),e}function qm(e){var t=e.domains,r=e.startingAngle,i=e.style;return t.map((function(e,n){var a=e.name,s=n/t.length*Math.PI*2+r;return{x:1.2*Math.cos(s),y:1.2*Math.sin(s),label:a,style:i}}))}function Nm(e){var t=e.animation,r=e.className,i=e.children,n=e.colorRange,a=e.data,s=e.domains,o=e.height,c=e.hideInnerMostValues,u=e.margin,d=e.onMouseLeave,h=e.onMouseEnter,l=e.startingAngle,f=e.style,p=e.tickFormat,v=e.width,m=e.renderAxesOverPolygons,y=e.onValueMouseOver,g=e.onValueMouseOut,b=e.onSeriesMouseOver,k=e.onSeriesMouseOut,x=function(e){var t=e.animation,r=e.domains,i=e.startingAngle,n=e.style,a=e.tickFormat,s=e.hideInnerMostValues;return r.map((function(e,o){var c=o/r.length*Math.PI*2+i,u=e.domain;return W.a.createElement(bh,{animation:t,key:o+"-axis",axisStart:{x:0,y:0},axisEnd:{x:Dm(Math.cos(c)),y:Dm(Math.sin(c))},axisDomain:u,numberOfTicks:5,tickValue:function(t){return s&&t===u[0]?"":e.tickFormat?e.tickFormat(t):a(t)},style:n.axes})}))}({domains:s,animation:t,hideInnerMostValues:c,startingAngle:l,style:f,tickFormat:p}),w=function(e){var t=e.animation,r=e.colorRange,i=e.domains,n=e.data,a=e.style,s=e.startingAngle,o=e.onSeriesMouseOver,c=e.onSeriesMouseOut,u=i.reduce((function(e,t){var r=t.domain;return e[t.name]=ar().domain(r).range([0,1]),e}),{});return n.map((function(e,n){var d=i.map((function(t,r){var n=t.name,a=t.getValue,o=a?a(e):e[n],c=r/i.length*Math.PI*2+s,d=Math.max(u[n](o),0);return{x:d*Math.cos(c),y:d*Math.sin(c),name:e.name}}));return W.a.createElement(ap,{animation:t,className:"rv-radar-chart-polygon",key:n+"-polygon",data:d,style:Rm({stroke:e.color||e.stroke||r[n%r.length],fill:e.color||e.fill||r[n%r.length]},a.polygons),onSeriesMouseOver:o,onSeriesMouseOut:c})}))}({animation:t,colorRange:n,domains:s,data:a,startingAngle:l,style:f,onSeriesMouseOver:b,onSeriesMouseOut:k}),_=function(e){var t=e.animation,r=e.domains,i=e.data,n=e.startingAngle,a=e.style,s=e.onValueMouseOver,o=e.onValueMouseOut;if(s){var c=r.reduce((function(e,t){var r=t.domain;return e[t.name]=ar().domain(r).range([0,1]),e}),{});return i.map((function(e,i){var u=r.map((function(t,i){var a=t.name,s=t.getValue,o=s?s(e):e[a],u=i/r.length*Math.PI*2+n,d=Math.max(c[a](o),0);return{x:d*Math.cos(u),y:d*Math.sin(u),domain:a,value:o,dataName:e.name}}));return W.a.createElement(If,{animation:t,className:"rv-radar-chart-polygonPoint",key:i+"-polygonPoint",data:u,size:10,style:Rm({},a.polygons,{fill:"transparent",stroke:"transparent"}),onValueMouseOver:s,onValueMouseOut:o})}))}}({animation:t,colorRange:n,domains:s,data:a,startingAngle:l,style:f,onValueMouseOver:y,onValueMouseOut:g}),O=W.a.createElement(vf,{animation:t,key:r,className:"rv-radar-chart-label",data:qm({domains:s,style:f.labels,startingAngle:l})});return W.a.createElement(cv,{height:o,width:v,margin:u,dontCheckIfEmpty:!0,className:r+" "+Vm,onMouseLeave:d,onMouseEnter:h,xDomain:[-1,1],yDomain:[-1,1]},i,!m&&x.concat(w).concat(O).concat(_),m&&w.concat(O).concat(x).concat(_))}Nm.displayName="RadarChart",Nm.propTypes={animation:Ze,className:a.a.string,colorType:a.a.string,colorRange:a.a.arrayOf(a.a.string),data:a.a.arrayOf(a.a.object).isRequired,domains:a.a.arrayOf(a.a.shape({name:a.a.string.isRequired,domain:a.a.arrayOf(a.a.number).isRequired,tickFormat:a.a.func})).isRequired,height:a.a.number.isRequired,hideInnerMostValues:a.a.bool,margin:Kp,startingAngle:a.a.number,style:a.a.shape({axes:a.a.object,labels:a.a.object,polygons:a.a.object}),tickFormat:a.a.func,width:a.a.number.isRequired,renderAxesOverPolygons:a.a.bool,onValueMouseOver:a.a.func,onValueMouseOut:a.a.func,onSeriesMouseOver:a.a.func,onSeriesMouseOut:a.a.func},Nm.defaultProps={className:"",colorType:"category",colorRange:Wa,hideInnerMostValues:!0,startingAngle:Math.PI/2,style:{axes:{line:{},ticks:{},text:{}},labels:{fontSize:10,textAnchor:"middle"},polygons:{strokeWidth:.5,strokeOpacity:1,fillOpacity:.1}},tickFormat:Lm,renderAxesOverPolygons:!1};var Gm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function jm(e){var t=e.animation,r=e.className,i=e.children,n=e.colorType,a=e.data,s=e.getAngle,o=e.getLabel,c=e.getSubLabel,u=e.height,d=e.hideRootNode,h=e.innerRadius,l=e.labelsAboveChildren,f=e.labelsRadiusMultiplier,p=e.labelsStyle,v=e.margin,m=e.onMouseLeave,y=e.onMouseEnter,g=e.radius,b=e.showLabels,k=e.style,x=e.width,w=function(e){var t=e.data,r=e.getAngle;return $s().sort(null).value(r)(t).reverse().map((function(e,t){return Gm({},e.data,{angle0:e.startAngle,angle:e.endAngle,radius0:e.data.innerRadius||0,radius:e.data.radius||1,color:e.data.color||t})}))}({data:a,height:u,hideRootNode:d,width:x,getAngle:s}),_=ns(w),O=Gm({colorType:n},e,{animation:t,radiusDomain:[0,_],data:w,radiusNoFallBack:!0,style:k,arcClassName:"rv-radial-chart__series--pie__slice"});g&&(O.radiusDomain=[0,1],O.radiusRange=[h||0,g],O.radiusType="linear");var T=Wp(x,u,g||function(e,t){return Math.min(e,t)/2-15}(x,u)),S=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.1,i=t.getLabel,n=t.getSubLabel;return e.reduce((function(e,t){var a=t.angle,s=t.angle0,o=t.radius,c=(a+s)/2*-1+Math.PI/2,u=[];return i(t)&&u.push({angle:c,radius:o*r,label:i(t)}),n(t)&&u.push({angle:c,radius:o*r,label:n(t),style:{fontSize:10},yOffset:12}),e.concat(u)}),[])}(w,{getLabel:o,getSubLabel:c},f);return W.a.createElement(cv,{height:u,width:x,margin:Gm({},v,T),className:r+" rv-radial-chart",onMouseLeave:m,onMouseEnter:y,xDomain:[-_,_],yDomain:[-_,_]},W.a.createElement(Us,Gm({},O,{getAngle:function(e){return e.angle}})),b&&!l&&W.a.createElement(vf,{data:S,style:p}),i,b&&l&&W.a.createElement(vf,{data:S,style:p}))}jm.displayName="RadialChart",jm.propTypes={animation:Ze,className:a.a.string,colorType:a.a.string,data:a.a.arrayOf(a.a.shape({angle:a.a.number,className:a.a.string,label:a.a.string,radius:a.a.number,style:a.a.object})).isRequired,getAngle:a.a.func,getAngle0:a.a.func,padAngle:a.a.oneOfType([a.a.func,a.a.number]),getRadius:a.a.func,getRadius0:a.a.func,getLabel:a.a.func,height:a.a.number.isRequired,labelsAboveChildren:a.a.bool,labelsStyle:a.a.object,margin:Kp,onValueClick:a.a.func,onValueMouseOver:a.a.func,onValueMouseOut:a.a.func,showLabels:a.a.bool,style:a.a.object,subLabel:a.a.func,width:a.a.number.isRequired},jm.defaultProps={className:"",colorType:"category",colorRange:Wa,padAngle:0,getAngle:function(e){return e.angle},getAngle0:function(e){return e.angle0},getRadius:function(e){return e.radius},getRadius0:function(e){return e.radius0},getLabel:function(e){return e.label},getSubLabel:function(e){return e.subLabel}};function Um(e){return e.target.depth}function Hm(e,t){return e.sourceLinks.length?e.depth:t-1}function zm(e){return function(){return e}}function Wm(e,t){return Xm(e.source,t.source)||e.index-t.index}function Km(e,t){return Xm(e.target,t.target)||e.index-t.index}function Xm(e,t){return e.y0-t.y0}function Ym(e){return e.value}function Zm(e){return(e.y0+e.y1)/2}function Qm(e){return Zm(e.source)*e.value}function $m(e){return Zm(e.target)*e.value}function Jm(e){return e.index}function ey(e){return e.nodes}function ty(e){return e.links}function ry(e,t){var r=e.get(t);if(!r)throw new Error("missing: "+t);return r}function iy(e){return[e.source.x1,e.y0]}function ny(e){return[e.target.x0,e.y1]}var ay=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},sy=Wa[1];function oy(e){var t=e.animation,r=e.data,i=e.node,n=e.opacity,a=e.color,s=e.strokeWidth,o=e.style,c=e.onLinkClick,u=e.onLinkMouseOver,d=e.onLinkMouseOut;return t?W.a.createElement(Ye,ay({},e,{animatedProps:as}),W.a.createElement(oy,ay({},e,{animation:null}))):W.a.createElement("path",ay({d:r},o,{className:"rv-sankey__link",opacity:Number.isFinite(n)?n:.7,stroke:a||sy,onClick:function(e){return c(i,e)},onMouseOver:function(e){return u(i,e)},onMouseOut:function(e){return d(i,e)},strokeWidth:s,fill:"none"}))}oy.displayName="SankeyLink",oy.requiresSVG=!0;var cy=oy,uy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function dy(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var hy=function(e){return e},ly={justify:Hm,center:function(e){return e.targetLinks.length?e.depth:e.sourceLinks.length?lt(e.sourceLinks,Um)-1:0},left:function(e){return e.depth},right:function(e,t){return t-1-e.height}},fy={top:20,left:20,right:20,bottom:20};function py(e){var t=e.align,r=e.animation,i=e.children,n=e.className,a=e.hasVoronoi,s=e.height,o=e.hideLabels,c=e.labelRotation,u=e.layout,d=e.links,h=e.linkOpacity,l=e.margin,f=e.nodePadding,p=e.nodes,v=e.nodeWidth,m=e.onValueClick,y=e.onValueMouseOver,g=e.onValueMouseOut,b=e.onLinkClick,k=e.onLinkMouseOver,x=e.onLinkMouseOut,w=e.style,_=e.width,O=[].concat(dy(new Array(p.length))).map((function(e,t){return uy({},p[t])})),T=[].concat(dy(new Array(d.length))).map((function(e,t){return uy({},d[t])})),S=zp({margin:l,height:s,width:_},fy),C=S.marginLeft,I=S.marginTop,M=S.marginRight,E=S.marginBottom,A=function(){var e=0,t=0,r=1,i=1,n=24,a=8,s=Jm,o=Hm,c=ey,u=ty,d=32;function h(){var e={nodes:c.apply(null,arguments),links:u.apply(null,arguments)};return l(e),f(e),p(e),v(e),m(e),e}function l(e){e.nodes.forEach((function(e,t){e.index=t,e.sourceLinks=[],e.targetLinks=[]}));var t=yt(e.nodes,s);e.links.forEach((function(e,r){e.index=r;var i=e.source,n=e.target;"object"!==typeof i&&(i=e.source=ry(t,i)),"object"!==typeof n&&(n=e.target=ry(t,n)),i.sourceLinks.push(e),n.targetLinks.push(e)}))}function f(e){e.nodes.forEach((function(e){e.value=Math.max(ft(e.sourceLinks,Ym),ft(e.targetLinks,Ym))}))}function p(t){var i,a,s;for(i=t.nodes,a=[],s=0;i.length;++s,i=a,a=[])i.forEach((function(e){e.depth=s,e.sourceLinks.forEach((function(e){a.indexOf(e.target)<0&&a.push(e.target)}))}));for(i=t.nodes,a=[],s=0;i.length;++s,i=a,a=[])i.forEach((function(e){e.height=s,e.targetLinks.forEach((function(e){a.indexOf(e.source)<0&&a.push(e.source)}))}));var c=(r-e-n)/(s-1);t.nodes.forEach((function(t){t.x1=(t.x0=e+Math.max(0,Math.min(s-1,Math.floor(o.call(null,t,s))))*c)+n}))}function v(e){var r=gt().key((function(e){return e.x0})).sortKeys(Qe).entries(e.nodes).map((function(e){return e.values}));!function(){var n=lt(r,(function(e){return(i-t-(e.length-1)*a)/ft(e,Ym)}));r.forEach((function(e){e.forEach((function(e,t){e.y1=(e.y0=t)+e.value*n}))})),e.links.forEach((function(e){e.width=e.value*n}))}(),u();for(var n=1,s=d;s>0;--s)c(n*=.99),u(),o(n),u();function o(e){r.forEach((function(t){t.forEach((function(t){if(t.targetLinks.length){var r=(ft(t.targetLinks,Qm)/ft(t.targetLinks,Ym)-Zm(t))*e;t.y0+=r,t.y1+=r}}))}))}function c(e){r.slice().reverse().forEach((function(t){t.forEach((function(t){if(t.sourceLinks.length){var r=(ft(t.sourceLinks,$m)/ft(t.sourceLinks,Ym)-Zm(t))*e;t.y0+=r,t.y1+=r}}))}))}function u(){r.forEach((function(e){var r,n,s,o=t,c=e.length;for(e.sort(Xm),s=0;s<c;++s)(n=o-(r=e[s]).y0)>0&&(r.y0+=n,r.y1+=n),o=r.y1+a;if((n=o-a-i)>0)for(o=r.y0-=n,r.y1-=n,s=c-2;s>=0;--s)(n=(r=e[s]).y1+a-o)>0&&(r.y0-=n,r.y1-=n),o=r.y0}))}}function m(e){e.nodes.forEach((function(e){e.sourceLinks.sort(Km),e.targetLinks.sort(Wm)})),e.nodes.forEach((function(e){var t=e.y0,r=t;e.sourceLinks.forEach((function(e){e.y0=t+e.width/2,t+=e.width})),e.targetLinks.forEach((function(e){e.y1=r+e.width/2,r+=e.width}))}))}return h.update=function(e){return m(e),e},h.nodeId=function(e){return arguments.length?(s="function"===typeof e?e:zm(e),h):s},h.nodeAlign=function(e){return arguments.length?(o="function"===typeof e?e:zm(e),h):o},h.nodeWidth=function(e){return arguments.length?(n=+e,h):n},h.nodePadding=function(e){return arguments.length?(a=+e,h):a},h.nodes=function(e){return arguments.length?(c="function"===typeof e?e:zm(e),h):c},h.links=function(e){return arguments.length?(u="function"===typeof e?e:zm(e),h):u},h.size=function(n){return arguments.length?(e=t=0,r=+n[0],i=+n[1],h):[r-e,i-t]},h.extent=function(n){return arguments.length?(e=+n[0][0],r=+n[1][0],t=+n[0][1],i=+n[1][1],h):[[e,t],[r,i]]},h.iterations=function(e){return arguments.length?(d=+e,h):d},h}().extent([[C,I],[_-M,s-E-I]]).nodeWidth(v).nodePadding(f).nodes(O).links(T).nodeAlign(ly[t]).iterations(u);A(O);var F=A.nodeWidth(),P=po().source(iy).target(ny);return W.a.createElement(cv,uy({},e,{yType:"literal",className:"rv-sankey "+n}),T.map((function(e,t){return W.a.createElement(cy,{style:w.links,data:P(e),opacity:e.opacity||h,color:e.color,onLinkClick:b,onLinkMouseOver:k,onLinkMouseOut:x,strokeWidth:Math.max(e.width,1),node:e,nWidth:F,key:"link-"+t})})),W.a.createElement(Cp,{animation:r,className:n+" rv-sankey__node",data:O.map((function(e){return uy({},e,{y:e.y1-I,y0:e.y0-I,x:e.x1,x0:e.x0,color:e.color||Wa[0],sourceLinks:null,targetLinks:null})})),style:w.rects,onValueClick:m,onValueMouseOver:y,onValueMouseOut:g,colorType:"literal"}),!o&&W.a.createElement(vf,{animation:r,className:n,rotation:c,labelAnchorY:"text-before-edge",data:O.map((function(e,t){return uy({x:e.x0+(e.x0<_/2?F+10:-10),y:(e.y0+e.y1)/2-I,label:e.name,style:uy({textAnchor:e.x0<_/2?"start":"end",dy:"-.5em"},w.labels)},p[t])}))}),a&&W.a.createElement(Vp,{className:"rv-sankey__voronoi",extent:[[-C,-I],[_+M,s+E]],nodes:O,onClick:m,onHover:y,onBlur:g,x:function(e){return e.x0+(e.x1-e.x0)/2},y:function(e){return e.y0+(e.y1-e.y0)/2}}),i)}py.defaultProps={align:"justify",className:"",hasVoronoi:!1,hideLabels:!1,labelRotation:0,layout:50,margin:fy,nodePadding:10,nodeWidth:10,onValueMouseOver:hy,onValueClick:hy,onValueMouseOut:hy,onLinkClick:hy,onLinkMouseOver:hy,onLinkMouseOut:hy,style:{links:{},rects:{},labels:{}}},py.propTypes={align:a.a.oneOf(["justify","left","right","center"]),className:a.a.string,hasVoronoi:a.a.bool,height:a.a.number.isRequired,hideLabels:a.a.bool,labelRotation:a.a.number,layout:a.a.number,links:a.a.arrayOf(a.a.shape({source:a.a.oneOfType([a.a.number,a.a.object]).isRequired,target:a.a.oneOfType([a.a.number,a.a.object]).isRequired})).isRequired,margin:Kp,nodePadding:a.a.number,nodes:a.a.arrayOf(a.a.object).isRequired,nodeWidth:a.a.number,onValueMouseOver:a.a.func,onValueClick:a.a.func,onValueMouseOut:a.a.func,onLinkClick:a.a.func,onLinkMouseOver:a.a.func,onLinkMouseOut:a.a.func,style:a.a.shape({links:a.a.object,rects:a.a.object,labels:a.a.object}),width:a.a.number.isRequired};var vy=function(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)},my=function(e,t,r,i,n){for(var a,s=e.children,o=-1,c=s.length,u=e.value&&(i-t)/e.value;++o<c;)(a=s[o]).y0=r,a.y1=n,a.x0=t,a.x1=t+=a.value*u},yy=function(){var e=1,t=1,r=0,i=!1;function n(n){var a=n.height+1;return n.x0=n.y0=r,n.x1=e,n.y1=t/a,n.eachBefore(function(e,t){return function(i){i.children&&my(i,i.x0,e*(i.depth+1)/t,i.x1,e*(i.depth+2)/t);var n=i.x0,a=i.y0,s=i.x1-r,o=i.y1-r;s<n&&(n=s=(n+s)/2),o<a&&(a=o=(a+o)/2),i.x0=n,i.y0=a,i.x1=s,i.y1=o}}(t,a)),i&&n.eachBefore(vy),n}return n.round=function(e){return arguments.length?(i=!!e,n):i},n.size=function(r){return arguments.length?(e=+r[0],t=+r[1],n):[e,t]},n.padding=function(e){return arguments.length?(r=+e,n):r},n};function gy(e){var t=0,r=e.children,i=r&&r.length;if(i)for(;--i>=0;)t+=r[i].value;else t=1;e.value=t}function by(e,t){var r,i,n,a,s,o=new _y(e),c=+e.value&&(o.value=e.value),u=[o];for(null==t&&(t=ky);r=u.pop();)if(c&&(r.value=+r.data.value),(n=t(r.data))&&(s=n.length))for(r.children=new Array(s),a=s-1;a>=0;--a)u.push(i=r.children[a]=new _y(n[a])),i.parent=r,i.depth=r.depth+1;return o.eachBefore(wy)}function ky(e){return e.children}function xy(e){e.data=e.data.data}function wy(e){var t=0;do{e.height=t}while((e=e.parent)&&e.height<++t)}function _y(e){this.data=e,this.depth=this.height=0,this.parent=null}_y.prototype=by.prototype={constructor:_y,count:function(){return this.eachAfter(gy)},each:function(e){var t,r,i,n,a=this,s=[a];do{for(t=s.reverse(),s=[];a=t.pop();)if(e(a),r=a.children)for(i=0,n=r.length;i<n;++i)s.push(r[i])}while(s.length);return this},eachAfter:function(e){for(var t,r,i,n=this,a=[n],s=[];n=a.pop();)if(s.push(n),t=n.children)for(r=0,i=t.length;r<i;++r)a.push(t[r]);for(;n=s.pop();)e(n);return this},eachBefore:function(e){for(var t,r,i=this,n=[i];i=n.pop();)if(e(i),t=i.children)for(r=t.length-1;r>=0;--r)n.push(t[r]);return this},sum:function(e){return this.eachAfter((function(t){for(var r=+e(t.data)||0,i=t.children,n=i&&i.length;--n>=0;)r+=i[n].value;t.value=r}))},sort:function(e){return this.eachBefore((function(t){t.children&&t.children.sort(e)}))},path:function(e){for(var t=this,r=function(e,t){if(e===t)return e;var r=e.ancestors(),i=t.ancestors(),n=null;e=r.pop(),t=i.pop();for(;e===t;)n=e,e=r.pop(),t=i.pop();return n}(t,e),i=[t];t!==r;)t=t.parent,i.push(t);for(var n=i.length;e!==r;)i.splice(n,0,e),e=e.parent;return i},ancestors:function(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t},descendants:function(){var e=[];return this.each((function(t){e.push(t)})),e},leaves:function(){var e=[];return this.eachBefore((function(t){t.children||e.push(t)})),e},links:function(){var e=this,t=[];return e.each((function(r){r!==e&&t.push({source:r.parent,target:r})})),t},copy:function(){return by(this).eachBefore(xy)}};var Oy=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ty=["onValueMouseOver","onValueMouseOut","onValueClick","onValueRightClick","onSeriesMouseOver","onSeriesMouseOut","onSeriesClick","onSeriesRightClick"];var Sy=function(){};function Cy(e){var t=e.getAngle,r=e.getAngle0,i=e.animation,n=e.className,a=e.children,s=e.data,o=e.height,c=e.hideRootNode,u=e.getLabel,d=e.width,h=e.getSize,l=e.colorType,f=function(e){var t=e.data,r=e.height,i=e.hideRootNode,n=e.width,a=e.getSize,s=yy(),o=by(t).sum(a),c=Math.min(n,r)/2-10,u=ar().range([0,2*Math.PI]),d=vr().range([0,c]);return s(o).descendants().reduce((function(e,t,r){return i&&0===r?e:e.concat([Oy({angle0:Math.max(0,Math.min(2*Math.PI,u(t.x0))),angle:Math.max(0,Math.min(2*Math.PI,u(t.x1))),radius0:Math.max(0,d(t.y0)),radius:Math.max(0,d(t.y1)),depth:t.depth,parent:t.parent},t.data)])}),[])}({data:s,height:o,hideRootNode:c,width:d,getSize:h}),p=ns(f),v=Wp(d,o,p),m=function(e,t){var r=t.getAngle,i=t.getAngle0,n=t.getLabel,a=t.getRadius0;return e.filter(n).map((function(e){var t=-1*r(e)+Math.PI/2,n=(-1*i(e)+Math.PI/2+t)/2,s=!e.dontRotateLabel,o=-n/(2*Math.PI)*360;return Oy({},e,{children:null,angle:null,radius:null,x:a(e)*Math.cos(n),y:a(e)*Math.sin(n),style:Oy({textAnchor:o>90?"end":"start"},e.labelStyle),rotation:s?o>90?o+180:90===o?90:o:null})}))}(f,{getAngle:t,getAngle0:r,getLabel:u,getRadius0:function(e){return e.radius0}});return W.a.createElement(cv,{height:o,hasTreeStructure:!0,width:d,className:"rv-sunburst "+n,margin:v,xDomain:[-p,p],yDomain:[-p,p]},W.a.createElement(Us,Oy({colorType:l},e,{animation:i,radiusDomain:[0,p],data:i?f.map((function(e,t){return Oy({},e,{parent:null,children:null,index:t})})):f,_data:i?f:null,arcClassName:"rv-sunburst__series--radial__arc"},Ty.reduce((function(t,r){var n,a=e[r];return t[r]=i?(n=a,function(e,t){return n?n(f[e.index],t):Sy}):a,t}),{}))),m.length>0&&W.a.createElement(vf,{data:m,getLabel:u}),a)}Cy.displayName="Sunburst",Cy.propTypes={animation:Ze,getAngle:a.a.func,getAngle0:a.a.func,className:a.a.string,colorType:a.a.string,data:a.a.object.isRequired,height:a.a.number.isRequired,hideRootNode:a.a.bool,getLabel:a.a.func,onValueClick:a.a.func,onValueMouseOver:a.a.func,onValueMouseOut:a.a.func,getSize:a.a.func,width:a.a.number.isRequired,padAngle:a.a.oneOfType([a.a.func,a.a.number])},Cy.defaultProps={getAngle:function(e){return e.angle},getAngle0:function(e){return e.angle0},className:"",colorType:"literal",getColor:function(e){return e.color},hideRootNode:!1,getLabel:function(e){return e.label},getSize:function(e){return e.size},padAngle:0};var Iy=function(e,t,r,i,n){for(var a,s=e.children,o=-1,c=s.length,u=e.value&&(n-r)/e.value;++o<c;)(a=s[o]).x0=t,a.x1=i,a.y0=r,a.y1=r+=a.value*u},My=(1+Math.sqrt(5))/2;function Ey(e,t,r,i,n,a){for(var s,o,c,u,d,h,l,f,p,v,m,y=[],g=t.children,b=0,k=0,x=g.length,w=t.value;b<x;){c=n-r,u=a-i;do{d=g[k++].value}while(!d&&k<x);for(h=l=d,m=d*d*(v=Math.max(u/c,c/u)/(w*e)),p=Math.max(l/m,m/h);k<x;++k){if(d+=o=g[k].value,o<h&&(h=o),o>l&&(l=o),m=d*d*v,(f=Math.max(l/m,m/h))>p){d-=o;break}p=f}y.push(s={value:d,dice:c<u,children:g.slice(b,k)}),s.dice?my(s,r,i,n,w?i+=u*d/w:a):Iy(s,r,i,w?r+=c*d/w:n,a),w-=d,b=k}return y}var Ay=function e(t){function r(e,r,i,n,a){Ey(t,e,r,i,n,a)}return r.ratio=function(t){return e((t=+t)>1?t:1)},r}(My),Fy=function e(t){function r(e,r,i,n,a){if((s=e._squarify)&&s.ratio===t)for(var s,o,c,u,d,h=-1,l=s.length,f=e.value;++h<l;){for(c=(o=s[h]).children,u=o.value=0,d=c.length;u<d;++u)o.value+=c[u].value;o.dice?my(o,r,i,n,i+=(a-i)*o.value/f):Iy(o,r,i,r+=(n-r)*o.value/f,a),f-=o.value}else e._squarify=s=Ey(t,e,r,i,n,a),s.ratio=t}return r.ratio=function(t){return e((t=+t)>1?t:1)},r}(My),Py=Array.prototype.slice;var By=function(e){for(var t,r,i=0,n=(e=function(e){for(var t,r,i=e.length;i;)r=Math.random()*i--|0,t=e[i],e[i]=e[r],e[r]=t;return e}(Py.call(e))).length,a=[];i<n;)t=e[i],r&&Ly(r,t)?++i:(r=qy(a=Ry(a,t)),i=0);return r};function Ry(e,t){var r,i;if(Dy(t,e))return[t];for(r=0;r<e.length;++r)if(Vy(t,e[r])&&Dy(Ny(e[r],t),e))return[e[r],t];for(r=0;r<e.length-1;++r)for(i=r+1;i<e.length;++i)if(Vy(Ny(e[r],e[i]),t)&&Vy(Ny(e[r],t),e[i])&&Vy(Ny(e[i],t),e[r])&&Dy(Gy(e[r],e[i],t),e))return[e[r],e[i],t];throw new Error}function Vy(e,t){var r=e.r-t.r,i=t.x-e.x,n=t.y-e.y;return r<0||r*r<i*i+n*n}function Ly(e,t){var r=e.r-t.r+1e-6,i=t.x-e.x,n=t.y-e.y;return r>0&&r*r>i*i+n*n}function Dy(e,t){for(var r=0;r<t.length;++r)if(!Ly(e,t[r]))return!1;return!0}function qy(e){switch(e.length){case 1:return{x:(t=e[0]).x,y:t.y,r:t.r};case 2:return Ny(e[0],e[1]);case 3:return Gy(e[0],e[1],e[2])}var t}function Ny(e,t){var r=e.x,i=e.y,n=e.r,a=t.x,s=t.y,o=t.r,c=a-r,u=s-i,d=o-n,h=Math.sqrt(c*c+u*u);return{x:(r+a+c/h*d)/2,y:(i+s+u/h*d)/2,r:(h+n+o)/2}}function Gy(e,t,r){var i=e.x,n=e.y,a=e.r,s=t.x,o=t.y,c=t.r,u=r.x,d=r.y,h=r.r,l=i-s,f=i-u,p=n-o,v=n-d,m=c-a,y=h-a,g=i*i+n*n-a*a,b=g-s*s-o*o+c*c,k=g-u*u-d*d+h*h,x=f*p-l*v,w=(p*k-v*b)/(2*x)-i,_=(v*m-p*y)/x,O=(f*b-l*k)/(2*x)-n,T=(l*y-f*m)/x,S=_*_+T*T-1,C=2*(a+w*_+O*T),I=w*w+O*O-a*a,M=-(S?(C+Math.sqrt(C*C-4*S*I))/(2*S):I/C);return{x:i+w+_*M,y:n+O+T*M,r:M}}function jy(e,t,r){var i,n,a,s,o=e.x-t.x,c=e.y-t.y,u=o*o+c*c;u?(n=t.r+r.r,n*=n,s=e.r+r.r,n>(s*=s)?(i=(u+s-n)/(2*u),a=Math.sqrt(Math.max(0,s/u-i*i)),r.x=e.x-i*o-a*c,r.y=e.y-i*c+a*o):(i=(u+n-s)/(2*u),a=Math.sqrt(Math.max(0,n/u-i*i)),r.x=t.x+i*o-a*c,r.y=t.y+i*c+a*o)):(r.x=t.x+r.r,r.y=t.y)}function Uy(e,t){var r=e.r+t.r-1e-6,i=t.x-e.x,n=t.y-e.y;return r>0&&r*r>i*i+n*n}function Hy(e){var t=e._,r=e.next._,i=t.r+r.r,n=(t.x*r.r+r.x*t.r)/i,a=(t.y*r.r+r.y*t.r)/i;return n*n+a*a}function zy(e){this._=e,this.next=null,this.previous=null}function Wy(e){if(!(n=e.length))return 0;var t,r,i,n,a,s,o,c,u,d,h;if((t=e[0]).x=0,t.y=0,!(n>1))return t.r;if(r=e[1],t.x=-r.r,r.x=t.r,r.y=0,!(n>2))return t.r+r.r;jy(r,t,i=e[2]),t=new zy(t),r=new zy(r),i=new zy(i),t.next=i.previous=r,r.next=t.previous=i,i.next=r.previous=t;e:for(o=3;o<n;++o){jy(t._,r._,i=e[o]),i=new zy(i),c=r.next,u=t.previous,d=r._.r,h=t._.r;do{if(d<=h){if(Uy(c._,i._)){r=c,t.next=r,r.previous=t,--o;continue e}d+=c._.r,c=c.next}else{if(Uy(u._,i._)){(t=u).next=r,r.previous=t,--o;continue e}h+=u._.r,u=u.previous}}while(c!==u.next);for(i.previous=t,i.next=r,t.next=r.previous=r=i,a=Hy(t);(i=i.next)!==r;)(s=Hy(i))<a&&(t=i,a=s);r=t.next}for(t=[r._],i=r;(i=i.next)!==r;)t.push(i._);for(i=By(t),o=0;o<n;++o)(t=e[o]).x-=i.x,t.y-=i.y;return i.r}function Ky(e){return null==e?null:Xy(e)}function Xy(e){if("function"!==typeof e)throw new Error;return e}function Yy(){return 0}var Zy=function(e){return function(){return e}};function Qy(e){return Math.sqrt(e.value)}function $y(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function Jy(e,t){return function(r){if(i=r.children){var i,n,a,s=i.length,o=e(r)*t||0;if(o)for(n=0;n<s;++n)i[n].r+=o;if(a=Wy(i),o)for(n=0;n<s;++n)i[n].r-=o;r.r=a+o}}}function eg(e){return function(t){var r=t.parent;t.r*=e,r&&(t.x=r.x+e*t.x,t.y=r.y+e*t.y)}}var tg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},rg=["colorRange","colorDomain","color","opacityRange","opacityDomain","opacity","x0","x1","y0","y1","r"];function ig(e){var t=e.animation,r=e.getLabel,i=e.mode,n=e.node,a=e.onLeafClick,s=e.onLeafMouseOver,o=e.onLeafMouseOut,c=e.r,u=e.scales,d=e.x0,h=e.x1,l=e.y0,f=e.y1,p=e.style;if(t)return W.a.createElement(Ye,tg({},e,{animatedProps:rg}),W.a.createElement(ig,tg({},e,{animation:null})));var v="circlePack"===i,m=u.color(n),y=u.opacity(n),g=Va(m),b=r(n.data),k=tg({top:v?l-c:l,left:v?d-c:d,width:v?2*c:h-d,height:v?2*c:f-l,background:m,opacity:y,color:g},p,n.data.style);return W.a.createElement("div",{className:"rv-treemap__leaf "+(v?"rv-treemap__leaf--circle":""),onMouseEnter:function(e){return s(n,e)},onMouseLeave:function(e){return o(n,e)},onClick:function(e){return a(n,e)},style:k},W.a.createElement("div",{className:"rv-treemap__leaf__content"},b))}ig.propTypes={animation:Ze,height:a.a.number.isRequired,mode:a.a.string,node:a.a.object.isRequired,onLeafClick:a.a.func,onLeafMouseOver:a.a.func,onLeafMouseOut:a.a.func,scales:a.a.object.isRequired,width:a.a.number.isRequired,r:a.a.number.isRequired,x0:a.a.number.isRequired,x1:a.a.number.isRequired,y0:a.a.number.isRequired,y1:a.a.number.isRequired};var ng=ig,ag=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};function sg(e){var t=e.animation,r=e.className,i=e.height,n=e.hideRootNode,a=e.getLabel,s=e.mode,o=e.nodes,c=e.width,u=e.scales,d=e.style,h="circlePack"===s;return W.a.createElement("div",{className:"rv-treemap "+(h?"rv-treemap-circle-packed":"")+" "+r,style:{height:i,width:c}},o.map((function(r,i){if(n&&!i)return null;var s=ag({animation:t,node:r,getLabel:a},e,{x0:h?r.x:r.x0,x1:h?r.x:r.x1,y0:h?r.y:r.y0,y1:h?r.y:r.y1,r:h?r.r:1,scales:u,style:d});return W.a.createElement(ng,ag({},s,{key:"leaf-"+i}))})))}sg.displayName="TreemapDOM";var og=sg,cg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ug=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function dg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hg(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var lg=function(e){function t(){return dg(this,t),hg(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),ug(t,[{key:"getCircularNodes",value:function(){var e=this.props,t=e.animation,r=e.hideRootNode,i=e.nodes,n=e.onLeafMouseOver,a=e.onLeafMouseOut,s=e.onLeafClick,o=e.scales,c=e.style,u=i.reduce((function(e,t,i){if(!i&&r)return e;var n=t.x,a=t.y,s=t.r;return{maxY:Math.max(a+s,e.maxY),minY:Math.min(a-s,e.minY),maxX:Math.max(n+1.2*s,e.maxX),minX:Math.min(n-1.2*s,e.minX),rows:e.rows.concat([{x:n,y:a,size:s,color:o.color(t)}])}}),{rows:[],maxY:-1/0,minY:1/0,maxX:-1/0,minX:1/0}),d=u.rows,h=u.minY,l=u.maxY,f=u.minX,p=u.maxX;return{updatedNodes:W.a.createElement(If,{animation:t,className:"rv-treemap__leaf rv-treemap__leaf--circle",onSeriesMouseEnter:n,onSeriesMouseLeave:a,onSeriesClick:s,data:d,colorType:"literal",getColor:function(e){return e.color},sizeType:"literal",getSize:function(e){return e.size},style:c}),minY:h,maxY:l,minX:f,maxX:p}}},{key:"getNonCircularNodes",value:function(){var e=this.props,t=e.animation,r=e.hideRootNode,i=e.nodes,n=e.onLeafMouseOver,a=e.onLeafMouseOut,s=e.onLeafClick,o=e.scales,c=e.style,u=o.color;return i.reduce((function(e,i,o){if(!o&&r)return e;var d=i.x0,h=i.x1,l=i.y1,f=i.y0,p=d,v=f,m=l-f,y=h-d;e.maxY=Math.max(v+m,e.maxY),e.minY=Math.min(v,e.minY),e.maxX=Math.max(p+y,e.maxX),e.minX=Math.min(p,e.minX);var g=[{x:p,y:v},{x:p,y:v+m},{x:p+y,y:v+m},{x:p+y,y:v}];return e.updatedNodes=e.updatedNodes.concat([W.a.createElement(ap,{animation:t,className:"rv-treemap__leaf",key:o,color:u(i),type:"literal",onSeriesMouseEnter:n,onSeriesMouseLeave:a,onSeriesClick:s,data:g,style:cg({},c,i.style)})]),e}),{updatedNodes:[],maxY:-1/0,minY:1/0,maxX:-1/0,minX:1/0})}},{key:"render",value:function(){var e=this.props,t=e.className,r=e.height,i=e.mode,n=e.nodes,a=e.width,s="circlePack"===i,o=s?this.getCircularNodes():this.getNonCircularNodes(),c=o.minY,u=o.maxY,d=o.minX,h=o.maxX,l=o.updatedNodes,f=n.reduce((function(e,t){return t.data.title?e.concat(cg({},t.data,{x:t.x0||t.x,y:t.y0||t.y,label:""+t.data.title})):e}),[]);return W.a.createElement(cv,cg({className:"rv-treemap "+(s?"rv-treemap-circle-packed":"")+" "+t,width:a,height:r,yDomain:[u,c],xDomain:[d,h],colorType:"literal",hasTreeStructure:!0},this.props),l,W.a.createElement(vf,{data:f}))}}]),t}(W.a.Component);lg.displayName="TreemapSVG";var fg=lg,pg=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),vg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var mg={squarify:Ay,resquarify:Fy,slice:Iy,dice:my,slicedice:function(e,t,r,i,n){(1&e.depth?Iy:my)(e,t,r,i,n)},binary:function(e,t,r,i,n){var a,s,o=e.children,c=o.length,u=new Array(c+1);for(u[0]=s=a=0;a<c;++a)u[a+1]=s+=o[a].value;!function e(t,r,i,n,a,s,c){if(t>=r-1){var d=o[t];return d.x0=n,d.y0=a,d.x1=s,void(d.y1=c)}var h=u[t],l=i/2+h,f=t+1,p=r-1;for(;f<p;){var v=f+p>>>1;u[v]<l?f=v+1:p=v}l-u[f-1]<u[f]-l&&t+1<f&&--f;var m=u[f]-h,y=i-m;if(s-n>c-a){var g=(n*y+s*m)/i;e(t,f,m,n,a,g,c),e(f,r,y,g,a,s,c)}else{var b=(a*y+c*m)/i;e(t,f,m,n,a,s,b),e(f,r,y,n,b,s,c)}}(0,c,e.value,t,r,i,n)}},yg=function(e){return e},gg=["opacity","color"];function bg(e){var t=e.data.children||[],r=vg({},e,Ba(e,t,gg),{_allData:t});return{opacity:Ma(r,"opacity"),color:Ma(r,"color")}}var kg=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state=vg({scales:bg(e)},zp(e,e.margin)),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),pg(t,[{key:"componentWillReceiveProps",value:function(e){this.setState(vg({scales:bg(e)},zp(e,e.margin)))}},{key:"_getNodesToRender",value:function(){var e=this.state,t=e.innerWidth,r=e.innerHeight,i=this.props,n=i.data,a=i.mode,s=i.padding,o=i.sortFunction,c=i.getSize;if(!n)return[];if("partition"===a||"partition-pivot"===a){var u=yy().size("partition-pivot"===a?[r,t]:[t,r]).padding(s)(by(n).sum(c).sort((function(e,t){return o(e,t,c)}))).descendants();return"partition-pivot"===a?u.map((function(e){return vg({},e,{x0:e.y0,x1:e.y1,y0:e.x0,y1:e.x1})})):u}if("circlePack"===a)return function(){var e=null,t=1,r=1,i=Yy;function n(n){return n.x=t/2,n.y=r/2,e?n.eachBefore($y(e)).eachAfter(Jy(i,.5)).eachBefore(eg(1)):n.eachBefore($y(Qy)).eachAfter(Jy(Yy,1)).eachAfter(Jy(i,n.r/Math.min(t,r))).eachBefore(eg(Math.min(t,r)/(2*n.r))),n}return n.radius=function(t){return arguments.length?(e=Ky(t),n):e},n.size=function(e){return arguments.length?(t=+e[0],r=+e[1],n):[t,r]},n.padding=function(e){return arguments.length?(i="function"===typeof e?e:Zy(+e),n):i},n}().size([t,r]).padding(s)(by(n).sum(c).sort((function(e,t){return o(e,t,c)}))).descendants();var d=mg[a];return function(){var e=Ay,t=!1,r=1,i=1,n=[0],a=Yy,s=Yy,o=Yy,c=Yy,u=Yy;function d(e){return e.x0=e.y0=0,e.x1=r,e.y1=i,e.eachBefore(h),n=[0],t&&e.eachBefore(vy),e}function h(t){var r=n[t.depth],i=t.x0+r,d=t.y0+r,h=t.x1-r,l=t.y1-r;h<i&&(i=h=(i+h)/2),l<d&&(d=l=(d+l)/2),t.x0=i,t.y0=d,t.x1=h,t.y1=l,t.children&&(r=n[t.depth+1]=a(t)/2,i+=u(t)-r,d+=s(t)-r,(h-=o(t)-r)<i&&(i=h=(i+h)/2),(l-=c(t)-r)<d&&(d=l=(d+l)/2),e(t,i,d,h,l))}return d.round=function(e){return arguments.length?(t=!!e,d):t},d.size=function(e){return arguments.length?(r=+e[0],i=+e[1],d):[r,i]},d.tile=function(t){return arguments.length?(e=Xy(t),d):e},d.padding=function(e){return arguments.length?d.paddingInner(e).paddingOuter(e):d.paddingInner()},d.paddingInner=function(e){return arguments.length?(a="function"===typeof e?e:Zy(+e),d):a},d.paddingOuter=function(e){return arguments.length?d.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):d.paddingTop()},d.paddingTop=function(e){return arguments.length?(s="function"===typeof e?e:Zy(+e),d):s},d.paddingRight=function(e){return arguments.length?(o="function"===typeof e?e:Zy(+e),d):o},d.paddingBottom=function(e){return arguments.length?(c="function"===typeof e?e:Zy(+e),d):c},d.paddingLeft=function(e){return arguments.length?(u="function"===typeof e?e:Zy(+e),d):u},d}().tile(d).size([t,r]).padding(s)(by(n).sum(c).sort((function(e,t){return o(e,t,c)}))).descendants()}},{key:"render",value:function(){var e=this.props.renderMode,t=this.state.scales,r=this._getNodesToRender(),i="SVG"===e?fg:og;return W.a.createElement(i,vg({},this.props,{nodes:r,scales:t}))}}]),t}(W.a.Component);kg.displayName="Treemap",kg.propTypes={animation:Ze,className:a.a.string,data:a.a.object.isRequired,height:a.a.number.isRequired,hideRootNode:a.a.bool,margin:Kp,mode:a.a.oneOf(Object.keys(mg).concat(["circlePack","partition","partition-pivot"])),onLeafClick:a.a.func,onLeafMouseOver:a.a.func,onLeafMouseOut:a.a.func,useCirclePacking:a.a.bool,padding:a.a.number.isRequired,sortFunction:a.a.func,width:a.a.number.isRequired,getSize:a.a.func,getColor:a.a.func},kg.defaultProps={className:"",colorRange:Xa,_colorValue:Qa,data:{children:[]},hideRootNode:!1,margin:{left:40,right:10,top:10,bottom:40},mode:"squarify",onLeafClick:yg,onLeafMouseOver:yg,onLeafMouseOut:yg,opacityType:Za,_opacityValue:1,padding:1,sortFunction:function(e,t,r){return r?r(e)-r(t):0},getSize:function(e){return e.size},getColor:function(e){return e.color},getLabel:function(e){return e.title}};var xg=r(47),wg=r.n(xg),_g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Og=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();var Tg=[],Sg=null;function Cg(){wg.a.clearTimeout(Sg),Sg=wg.a.setTimeout(Ig,100)}function Ig(){Tg.forEach((function(e){return e()}))}function Mg(e){return Tg.push(e),1===Tg.length&&wg.a.addEventListener("resize",Cg),function(){!function(e){var t=Tg.indexOf(e);t>-1&&Tg.splice(t,1)}(e),0===Tg.length&&(wg.a.clearTimeout(Sg),wg.a.removeEventListener("resize",Cg))}}function Eg(e,t,r){var i=function(i){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t._onResize=function(){var e=Object(sa.a)(t.container),r=e.offsetHeight,i=e.offsetWidth,n=t.state.height===r?{}:{height:r},a=t.state.width===i?{}:{width:i};t.setState(_g({},n,a))},t.state={height:0,width:0},t}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,i),Og(n,null,[{key:"propTypes",get:function(){var t=e.propTypes;t.height,t.width;return function(e,t){var r={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=e[i]);return r}(t,["height","width"])}}]),Og(n,[{key:"componentDidMount",value:function(){this._onResize(),this.cancelSubscription=Mg(this._onResize)}},{key:"componentWillReceiveProps",value:function(){this._onResize()}},{key:"componentWillUnmount",value:function(){this.cancelSubscription()}},{key:"render",value:function(){var i=this,n=this.state,a=n.height,s=n.width,o=_g({},this.props,{animation:0===a&&0===s?null:this.props.animation}),c=_g({},r?{height:a}:{},t?{width:s}:{});return W.a.createElement("div",{ref:function(e){return i.container=e},style:{width:"100%",height:"100%"}},W.a.createElement(e,_g({},c,o)))}}]),n}(W.a.Component);return i.displayName="Flexible"+function(e){return e.displayName||e.name||"Component"}(e),i}Eg(cv,!0,!1),function(e){Eg(e,!1,!0)}(cv),function(e){Eg(e,!0,!0)}(cv)},function(e,t,r){"use strict";(function(t){"undefined"===typeof t||!t.version||0===t.version.indexOf("v0.")||0===t.version.indexOf("v1.")&&0!==t.version.indexOf("v1.8.")?e.exports={nextTick:function(e,r,i,n){if("function"!==typeof e)throw new TypeError('"callback" argument must be a function');var a,s,o=arguments.length;switch(o){case 0:case 1:return t.nextTick(e);case 2:return t.nextTick((function(){e.call(null,r)}));case 3:return t.nextTick((function(){e.call(null,r,i)}));case 4:return t.nextTick((function(){e.call(null,r,i,n)}));default:for(a=new Array(o-1),s=0;s<a.length;)a[s++]=arguments[s];return t.nextTick((function(){e.apply(null,a)}))}}}:e.exports=t}).call(this,r(23))},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(64);function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(c){n=!0,a=c}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}(e,t)||Object(i.a)(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,r){"use strict";function i(e){return e&&e.__esModule?e.default:e}t.__esModule=!0;var n=r(159);t.Motion=i(n);var a=r(161);t.StaggeredMotion=i(a);var s=r(162);t.TransitionMotion=i(s);var o=r(164);t.spring=i(o);var c=r(86);t.presets=i(c);var u=r(56);t.stripStyle=i(u);var d=r(165);t.reorderKeys=i(d)},function(e,t,r){"use strict";var i=r(33),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=h;var a=Object.create(r(28));a.inherits=r(24);var s=r(100),o=r(77);a.inherits(h,s);for(var c=n(o.prototype),u=0;u<c.length;u++){var d=c[u];h.prototype[d]||(h.prototype[d]=o.prototype[d])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},,function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return s})),r.d(t,"d",(function(){return o})),r.d(t,"e",(function(){return c}));var i,n=r(22);!function(e){e.MISSING_VALUE="MISSING_VALUE",e.INVALID_VALUE="INVALID_VALUE",e.MISSING_INTL_API="MISSING_INTL_API"}(i||(i={}));var a=function(e){function t(t,r,i){var n=e.call(this,t)||this;return n.code=r,n.originalMessage=i,n}return Object(n.b)(t,e),t.prototype.toString=function(){return"[formatjs Error: "+this.code+"] "+this.message},t}(Error),s=function(e){function t(t,r,n,a){return e.call(this,'Invalid values for "'+t+'": "'+r+'". Options are "'+Object.keys(n).join('", "')+'"',i.INVALID_VALUE,a)||this}return Object(n.b)(t,e),t}(a),o=function(e){function t(t,r,n){return e.call(this,'Value for "'+t+'" must be of type '+r,i.INVALID_VALUE,n)||this}return Object(n.b)(t,e),t}(a),c=function(e){function t(t,r){return e.call(this,'The intl string context variable "'+t+'" was not provided to the string "'+r+'"',i.MISSING_VALUE,r)||this}return Object(n.b)(t,e),t}(a)},,,,function(e,t,r){var i=r(21),n=i.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=s),a(n,s),s.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"===typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";var i=r(33),n=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=h;var a=Object.create(r(28));a.inherits=r(24);var s=r(109),o=r(112);a.inherits(h,s);for(var c=n(o.prototype),u=0;u<c.length;u++){var d=c[u];h.prototype[d]||(h.prototype[d]=o.prototype[d])}function h(e){if(!(this instanceof h))return new h(e);s.call(this,e),o.call(this,e),e&&!1===e.readable&&(this.readable=!1),e&&!1===e.writable&&(this.writable=!1),this.allowHalfOpen=!0,e&&!1===e.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",l)}function l(){this.allowHalfOpen||this._writableState.ended||i.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(h.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(h.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}}),h.prototype._destroy=function(e,t){this.push(null),this.end(),i.nextTick(t,e)}},function(e,t,r){"use strict";var i=t,n=r(25);function a(e,t){var r=[];return t>0&&r.push(e>>>24),t>1&&r.push(e>>>16&255),t>2&&r.push(e>>>8&255),t>3&&r.push(255&e),r}function s(e){return 1===e.length?"0"+e:e}function o(e){for(var t="",r=0;r<e.length;r++)t+=s(e[r].toString(16));return t}i.assert=function(e,t){if(!e)throw new Error(t)},i.getNAF=function(e,t){for(var r=[],i=1<<t+1,n=e.clone();n.cmpn(1)>=0;){var a;if(n.isOdd()){var s=n.andln(i-1);a=s>(i>>1)-1?(i>>1)-s:s,n.isubn(a)}else a=0;r.push(a);for(var o=0!==n.cmpn(0)&&0===n.andln(i-1)?t+1:1,c=1;c<o;c++)r.push(0);n.iushrn(o)}return r},i.getJSF=function(e,t){var r=[[],[]];e=e.clone(),t=t.clone();for(var i=0,n=0;e.cmpn(-i)>0||t.cmpn(-n)>0;){var a,s,o,c=e.andln(3)+i&3,u=t.andln(3)+n&3;if(3===c&&(c=-1),3===u&&(u=-1),0===(1&c))a=0;else a=3!==(o=e.andln(7)+i&7)&&5!==o||2!==u?c:-c;if(r[0].push(a),0===(1&u))s=0;else s=3!==(o=t.andln(7)+n&7)&&5!==o||2!==c?u:-u;r[1].push(s),2*i===a+1&&(i=1-i),2*n===s+1&&(n=1-n),e.iushrn(1),t.iushrn(1)}return r},i.cachedProperty=function(e,t,r){var i="_"+t;e.prototype[t]=function(){return void 0!==this[i]?this[i]:this[i]=r.call(this)}},i.parseBytes=function(e){return"string"===typeof e?i.toArray(e,"hex"):e},i.intFromLE=function(e){return new n(e,"hex","le")},i.wordArrayToBuffer=function(e){var t=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");t=e.sigBytes,e=e.words;for(var r=[],i=[],n=0;t>0;)t-=(i=a(e[n],Math.min(4,t))).length,r.push(i),n++;return[].concat.apply([],r)},i.toArray=function(e,t){if(Array.isArray(e))return e.slice();if(!e)return[];var r=[];if("string"!==typeof e){for(var i=0;i<e.length;i++)r[i]=0|e[i];return r}if("hex"===t){(e=e.replace(/[^a-z0-9]+/gi,"")).length%2!==0&&(e="0"+e);for(i=0;i<e.length;i+=2)r.push(parseInt(e[i]+e[i+1],16))}else for(i=0;i<e.length;i++){var n=e.charCodeAt(i),a=n>>8,s=255&n;a?r.push(a,s):r.push(s)}return r},i.zero2=s,i.toHex=o,i.encode=function(e,t){return"hex"===t?o(e):e}},function(e,t){function r(e,t,r,i){var n,a=null==(n=i)||"number"===typeof n||"boolean"===typeof n?i:r(i),s=t.get(a);return"undefined"===typeof s&&(s=e.call(this,i),t.set(a,s)),s}function i(e,t,r){var i=Array.prototype.slice.call(arguments,3),n=r(i),a=t.get(n);return"undefined"===typeof a&&(a=e.apply(this,i),t.set(n,a)),a}function n(e,t,r,i,n){return r.bind(t,e,i,n)}function a(e,t){return n(e,this,1===e.length?r:i,t.cache.create(),t.serializer)}function s(){return JSON.stringify(arguments)}function o(){this.cache=Object.create(null)}o.prototype.has=function(e){return e in this.cache},o.prototype.get=function(e){return this.cache[e]},o.prototype.set=function(e,t){this.cache[e]=t};var c={create:function(){return new o}};e.exports=function(e,t){var r=t&&t.cache?t.cache:c,i=t&&t.serializer?t.serializer:s;return(t&&t.strategy?t.strategy:a)(e,{cache:r,serializer:i})},e.exports.strategies={variadic:function(e,t){return n(e,this,i,t.cache.create(),t.serializer)},monadic:function(e,t){return n(e,this,r,t.cache.create(),t.serializer)}}},function(e,t,r){"use strict";var i={};r.r(i),r.d(i,"addTrackers",(function(){return K})),r.d(i,"initialize",(function(){return X})),r.d(i,"ga",(function(){return Y})),r.d(i,"set",(function(){return Z})),r.d(i,"send",(function(){return Q})),r.d(i,"pageview",(function(){return $})),r.d(i,"modalview",(function(){return J})),r.d(i,"timing",(function(){return ee})),r.d(i,"event",(function(){return te})),r.d(i,"exception",(function(){return re})),r.d(i,"plugin",(function(){return ie})),r.d(i,"outboundLink",(function(){return ne})),r.d(i,"testModeAPI",(function(){return ae})),r.d(i,"default",(function(){return se}));var n=r(1),a=r.n(n),s=r(0),o=r.n(s);function c(e){console.warn("[react-ga]",e)}function u(e){return(u="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,i=b(e);if(t){var n=b(this).constructor;r=Reflect.construct(i,arguments,n)}else r=i.apply(this,arguments);return y(this,r)}}function y(e,t){return!t||"object"!==u(t)&&"function"!==typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var x="_blank",w=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(s,e);var t,r,i,n=m(s);function s(){var e;f(this,s);for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return k(g(e=n.call.apply(n,[this].concat(r))),"handleClick",(function(t){var r=e.props,i=r.target,n=r.eventLabel,a=r.to,o=r.onClick,c=r.trackerNames,u={label:n},d=i!==x,h=!(t.ctrlKey||t.shiftKey||t.metaKey||1===t.button);d&&h?(t.preventDefault(),s.trackLink(u,(function(){window.location.href=a}),c)):s.trackLink(u,(function(){}),c),o&&o(t)})),e}return t=s,(r=[{key:"render",value:function(){var e=this.props,t=e.to,r=e.target,i=h(h({},l(e,["to","target"])),{},{target:r,href:t,onClick:this.handleClick});return r===x&&(i.rel="".concat(i.rel?i.rel:""," noopener noreferrer").trim()),delete i.eventLabel,delete i.trackerNames,a.a.createElement("a",i)}}])&&p(t.prototype,r),i&&p(t,i),s}(n.Component);k(w,"trackLink",(function(){c("ga tracking not enabled")})),w.propTypes={eventLabel:o.a.string.isRequired,target:o.a.string,to:o.a.string,onClick:o.a.func,trackerNames:o.a.arrayOf(o.a.string)},w.defaultProps={target:null,to:null,onClick:null,trackerNames:null};function _(e){return"string"===typeof(t=e)&&-1!==t.indexOf("@")?(c("This arg looks like an email address, redacting."),"REDACTED (Potential Email Address)"):e;var t}function O(e){return e&&e.toString().replace(/^\s+|\s+$/g,"")}var T=/^(a|an|and|as|at|but|by|en|for|if|in|nor|of|on|or|per|the|to|vs?\.?|via)$/i;function S(e){return O(e).replace(/[A-Za-z0-9\u00C0-\u00FF]+[^\s-]*/g,(function(e,t,r){return t>0&&t+e.length!==r.length&&e.search(T)>-1&&":"!==r.charAt(t-2)&&("-"!==r.charAt(t+e.length)||"-"===r.charAt(t-1))&&r.charAt(t-1).search(/[^\s-]/)<0?e.toLowerCase():e.substr(1).search(/[A-Z]|\../)>-1?e:e.charAt(0).toUpperCase()+e.substr(1)}))}var C=!1;function I(e){console.info("[react-ga]",e)}var M=[],E={calls:M,ga:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];M.push([].concat(t))},resetCalls:function(){M.length=0}};function A(e,t){if(null==e)return{};var r,i,n=function(e,t){if(null==e)return{};var r,i,n={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B(e){return(B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return V(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var L="undefined"===typeof window||"undefined"===typeof document,D=!1,q=!0,N=!1,G=!0,j=!0,U=function(){var e;return N?E.ga.apply(E,arguments):!L&&(window.ga?(e=window).ga.apply(e,arguments):c("ReactGA.initialize must be called first or GoogleAnalytics should be loaded manually"))};function H(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=e||"";return(arguments.length>1?arguments[1]:void 0)&&(r=S(e)),t&&(r=_(r)),r}(e,q,j)}function z(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n=r[0];"string"===typeof n?(!G&&Array.isArray(e)||U.apply(void 0,r),Array.isArray(e)&&e.forEach((function(e){U.apply(void 0,R(["".concat(e,".").concat(n)].concat(r.slice(1))))}))):c("ga command must be a string")}function W(e,t){e?t&&(t.debug&&!0===t.debug&&(D=!0),!1===t.titleCase&&(q=!1),!1===t.redactEmail&&(j=!1),t.useExistingGa)||(t&&t.gaOptions?U("create",e,t.gaOptions):U("create",e,"auto")):c("gaTrackingID is required in initialize()")}function K(e,t){return Array.isArray(e)?e.forEach((function(e){"object"===B(e)?W(e.trackingId,e):c("All configs must be an object")})):W(e,t),!0}function X(e,t){if(t&&!0===t.testMode)N=!0;else{if(L)return;t&&!0===t.standardImplementation||function(e){if(!C){C=!0;var t="https://www.google-analytics.com/analytics.js";e&&e.gaAddress?t=e.gaAddress:e&&e.debug&&(t="https://www.google-analytics.com/analytics_debug.js");var r,i,n,a,s,o,c,u=e&&e.onerror;r=window,i=document,n="script",a=t,s="ga",r.GoogleAnalyticsObject=s,r.ga=r.ga||function(){(r.ga.q=r.ga.q||[]).push(arguments)},r.ga.l=1*new Date,o=i.createElement(n),c=i.getElementsByTagName(n)[0],o.async=1,o.src=a,o.onerror=u,c.parentNode.insertBefore(o,c)}}(t)}G=!t||"boolean"!==typeof t.alwaysSendToDefaultTracker||t.alwaysSendToDefaultTracker,K(e,t)}function Y(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length>0&&(U.apply(void 0,t),D&&(I("called ga('arguments');"),I("with arguments: ".concat(JSON.stringify(t))))),window.ga}function Z(e,t){e?"object"===B(e)?(0===Object.keys(e).length&&c("empty `fieldsObject` given to .set()"),z(t,"set",e),D&&(I("called ga('set', fieldsObject);"),I("with fieldsObject: ".concat(JSON.stringify(e))))):c("Expected `fieldsObject` arg to be an Object"):c("`fieldsObject` is required in .set()")}function Q(e,t){z(t,"send",e),D&&(I("called ga('send', fieldObject);"),I("with fieldObject: ".concat(JSON.stringify(e))),I("with trackers: ".concat(JSON.stringify(t))))}function $(e,t,r){if(e){var i=O(e);if(""!==i){var n={};if(r&&(n.title=r),z(t,"send",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({hitType:"pageview",page:i},n)),D){I("called ga('send', 'pageview', path);");var a="";r&&(a=" and title: ".concat(r)),I("with path: ".concat(i).concat(a))}}else c("path cannot be an empty string in .pageview()")}else c("path is required in .pageview()")}function J(e,t){if(e){var r,i="/"===(r=O(e)).substring(0,1)?r.substring(1):r;if(""!==i){var n="/modal/".concat(i);z(t,"send","pageview",n),D&&(I("called ga('send', 'pageview', path);"),I("with path: ".concat(n)))}else c("modalName cannot be an empty string or a single / in .modalview()")}else c("modalName is required in .modalview(modalName)")}function ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.category,r=e.variable,i=e.value,n=e.label,a=arguments.length>1?arguments[1]:void 0;if(t&&r&&"number"===typeof i){var s={hitType:"timing",timingCategory:H(t),timingVar:H(r),timingValue:i};n&&(s.timingLabel=H(n)),Q(s,a)}else c("args.category, args.variable AND args.value are required in timing() AND args.value has to be a number")}function te(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.category,r=e.action,i=e.label,n=e.value,a=e.nonInteraction,s=e.transport,o=A(e,["category","action","label","value","nonInteraction","transport"]),u=arguments.length>1?arguments[1]:void 0;if(t&&r){var d={hitType:"event",eventCategory:H(t),eventAction:H(r)};i&&(d.eventLabel=H(i)),"undefined"!==typeof n&&("number"!==typeof n?c("Expected `args.value` arg to be a Number."):d.eventValue=n),"undefined"!==typeof a&&("boolean"!==typeof a?c("`args.nonInteraction` must be a boolean."):d.nonInteraction=a),"undefined"!==typeof s&&("string"!==typeof s?c("`args.transport` must be a string."):(-1===["beacon","xhr","image"].indexOf(s)&&c("`args.transport` must be either one of these values: `beacon`, `xhr` or `image`"),d.transport=s)),Object.keys(o).filter((function(e){return"dimension"===e.substr(0,"dimension".length)})).forEach((function(e){d[e]=o[e]})),Object.keys(o).filter((function(e){return"metric"===e.substr(0,"metric".length)})).forEach((function(e){d[e]=o[e]})),Q(d,u)}else c("args.category AND args.action are required in event()")}function re(e,t){var r=e.description,i=e.fatal,n={hitType:"exception"};r&&(n.exDescription=H(r)),"undefined"!==typeof i&&("boolean"!==typeof i?c("`args.fatal` must be a boolean."):n.exFatal=i),Q(n,t)}var ie={require:function(e,t,r){if(e){var i=O(e);if(""!==i){var n=r?"".concat(r,".require"):"require";if(t){if("object"!==B(t))return void c("Expected `options` arg to be an Object");0===Object.keys(t).length&&c("Empty `options` given to .require()"),Y(n,i,t),D&&I("called ga('require', '".concat(i,"', ").concat(JSON.stringify(t)))}else Y(n,i),D&&I("called ga('require', '".concat(i,"');"))}else c("`name` cannot be an empty string in .require()")}else c("`name` is required in .require()")},execute:function(e,t){for(var r,i,n=arguments.length,a=new Array(n>2?n-2:0),s=2;s<n;s++)a[s-2]=arguments[s];if(1===a.length?r=a[0]:(i=a[0],r=a[1]),"string"!==typeof e)c("Expected `pluginName` arg to be a String.");else if("string"!==typeof t)c("Expected `action` arg to be a String.");else{var o="".concat(e,":").concat(t);r=r||null,i&&r?(Y(o,i,r),D&&(I("called ga('".concat(o,"');")),I('actionType: "'.concat(i,'" with payload: ').concat(JSON.stringify(r))))):r?(Y(o,r),D&&(I("called ga('".concat(o,"');")),I("with payload: ".concat(JSON.stringify(r))))):(Y(o),D&&I("called ga('".concat(o,"');")))}}};function ne(e,t,r){if("function"===typeof t)if(e&&e.label){var i={hitType:"event",eventCategory:"Outbound",eventAction:"Click",eventLabel:H(e.label)},n=!1,a=setTimeout((function(){n=!0,t()}),250);i.hitCallback=function(){clearTimeout(a),n||t()},Q(i,r)}else c("args.label is required in outboundLink()");else c("hitCallback function is required")}var ae=E,se={initialize:X,ga:Y,set:Z,send:Q,pageview:$,modalview:J,timing:ee,event:te,exception:re,plugin:ie,outboundLink:ne,testModeAPI:E};function oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}w.origTrackLink=w.trackLink,w.trackLink=ne;var de=w;t.a=ce(ce({},i),{},{OutboundLink:de})},function(e,t,r){(function(t){var r;r="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},e.exports=r}).call(this,r(19))},function(e,t,r){"use strict";var i=r(87),n="function"===typeof Symbol&&"symbol"===typeof Symbol("foo"),a=Object.prototype.toString,s=Array.prototype.concat,o=Object.defineProperty,c=o&&function(){var e={};try{for(var t in o(e,"x",{enumerable:!1,value:e}),e)return!1;return e.x===e}catch(r){return!1}}(),u=function(e,t,r,i){var n;(!(t in e)||"function"===typeof(n=i)&&"[object Function]"===a.call(n)&&i())&&(c?o(e,t,{configurable:!0,enumerable:!1,value:r,writable:!0}):e[t]=r)},d=function(e,t){var r=arguments.length>2?arguments[2]:{},a=i(t);n&&(a=s.call(a,Object.getOwnPropertySymbols(t)));for(var o=0;o<a.length;o+=1)u(e,a[o],t[a[o]],r[a[o]])};d.supportsDescriptors=!!c,e.exports=d},function(e,t,r){"use strict";var i,n="object"===typeof Reflect?Reflect:null,a=n&&"function"===typeof n.apply?n.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};i=n&&"function"===typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var s=Number.isNaN||function(e){return e!==e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(r,i){function n(r){e.removeListener(t,a),i(r)}function a(){"function"===typeof e.removeListener&&e.removeListener("error",n),r([].slice.call(arguments))}y(e,t,a,{once:!0}),"error"!==t&&function(e,t,r){"function"===typeof e.on&&y(e,"error",t,r)}(e,n,{once:!0})}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var c=10;function u(e){if("function"!==typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function d(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function h(e,t,r,i){var n,a,s,o;if(u(r),void 0===(a=e._events)?(a=e._events=Object.create(null),e._eventsCount=0):(void 0!==a.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),a=e._events),s=a[t]),void 0===s)s=a[t]=r,++e._eventsCount;else if("function"===typeof s?s=a[t]=i?[r,s]:[s,r]:i?s.unshift(r):s.push(r),(n=d(e))>0&&s.length>n&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,o=c,console&&console.warn&&console.warn(o)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(e,t,r){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},n=l.bind(i);return n.listener=r,i.wrapFn=n,n}function p(e,t,r){var i=e._events;if(void 0===i)return[];var n=i[t];return void 0===n?[]:"function"===typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):m(n,n.length)}function v(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"===typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),i=0;i<t;++i)r[i]=e[i];return r}function y(e,t,r,i){if("function"===typeof e.on)i.once?e.once(t,r):e.on(t,r);else{if("function"!==typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function n(a){i.once&&e.removeEventListener(t,n),r(a)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");c=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!==typeof e||e<0||s(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,n=this._events;if(void 0!==n)i=i&&void 0===n.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var o=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw o.context=s,o}var c=n[e];if(void 0===c)return!1;if("function"===typeof c)a(c,this,t);else{var u=c.length,d=m(c,u);for(r=0;r<u;++r)a(d[r],this,t)}return!0},o.prototype.addListener=function(e,t){return h(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return h(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,f(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,f(this,e,t)),this},o.prototype.removeListener=function(e,t){var r,i,n,a,s;if(u(t),void 0===(i=this._events))return this;if(void 0===(r=i[e]))return this;if(r===t||r.listener===t)0===--this._eventsCount?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!==typeof r){for(n=-1,a=r.length-1;a>=0;a--)if(r[a]===t||r[a].listener===t){s=r[a].listener,n=a;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(i[e]=r[0]),void 0!==i.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,r,i;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0===--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var n,a=Object.keys(r);for(i=0;i<a.length;++i)"removeListener"!==(n=a[i])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"===typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(i=t.length-1;i>=0;i--)this.removeListener(e,t[i]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"===typeof e.listenerCount?e.listenerCount(t):v.call(e,t)},o.prototype.listenerCount=v,o.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},function(e,t,r){"use strict";var i=r(51),n=r(236),a=r(25),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",o=null,c=null;function u(e){for(var t=[],r=0;r<e.length;r++)t[r/4|0]|=e[r]<<24-8*r;return i.lib.WordArray.create(t,e.length)}e.exports={json:function(e){return JSON.stringify(e)},unjson:JSON.parse,isJsonEncodedObject:function(e){return"string"===typeof e&&e.length>=2&&("{"===e[0]||"["===e[0])},stringToBinary:function(e){return i.enc.Latin1.parse(e)},stringToBase64:function(e){return i.enc.Latin1.parse(e).toString(i.enc.Base64)},base64ToBinary:function(e){return i.enc.Base64.parse(e)},base64ToString:function(e){return i.enc.Base64.parse(e).toString(i.enc.Utf8)},binaryToBase64:function(e){return e.toString(i.enc.Base64)},base16ToBinary:function(e){return i.enc.Hex.parse(e)},binaryToBase16:function(e){return e.toString(i.enc.Hex)},binaryConcat:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return e.concat(t)}))},binaryConcatArray:function(e){return e.reduce((function(e,t){return e.concat(t)}))},urlencode:function(e){return n.stringify(e)},urlencodeWithArrayRepeat:function(e){return n.stringify(e,{arrayFormat:"repeat"})},rawencode:function(e){return n.stringify(e,{encode:!1})},encode:function(e){return e},decode:function(e){return e},urlencodeBase64:function(e){return e.replace(/[=]+$/,"").replace(/\+/g,"-").replace(/\//g,"_")},numberToLE:function(e,t){return u(new a(e).toArray("le",t))},numberToBE:function(e,t){return u(new a(e).toArray("be",t))},base58ToBinary:function(e){if(!o){o={},c={};for(var t=0;t<58;t++){var r=s[t],i=new a(t);o[r]=i,c[i]=r}}for(var n=new a(0),d=new a(58),h=0;h<e.length;h++){var l=e[h];n.imul(d),n.iadd(o[l])}return u(n.toArray("be"))},binaryToBase58:function(e){if(!c){o={},c={};for(var t=0;t<58;t++){var r=s[t],n=new a(t);o[r]=n,c[n]=r}}for(var u=new a(58),d=e.toString(i.enc.Hex),h=new a(d,16),l=[];!h.isZero();){var f=h.divmod(u),p=f.div,v=f.mod;h=p,l.push(c[v])}return l.reverse().join("")}},e.exports.byteArrayToWordArray=u},function(e,t,r){e.exports=function(){var e=e||function(e,t){var r=Object.create||function(){function e(){}return function(t){var r;return e.prototype=t,r=new e,e.prototype=null,r}}(),i={},n=i.lib={},a=n.Base={extend:function(e){var t=r(this);return e&&t.mixIn(e),t.hasOwnProperty("init")&&this.init!==t.init||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=n.WordArray=a.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||c).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes,n=e.sigBytes;if(this.clamp(),i%4)for(var a=0;a<n;a++){var s=r[a>>>2]>>>24-a%4*8&255;t[i+a>>>2]|=s<<24-(i+a)%4*8}else for(a=0;a<n;a+=4)t[i+a>>>2]=r[a>>>2];return this.sigBytes+=n,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r,i=[],n=function(t){t=t;var r=987654321,i=4294967295;return function(){var n=((r=36969*(65535&r)+(r>>16)&i)<<16)+(t=18e3*(65535&t)+(t>>16)&i)&i;return n/=4294967296,(n+=.5)*(e.random()>.5?1:-1)}},a=0;a<t;a+=4){var o=n(4294967296*(r||e.random()));r=987654071*o(),i.push(4294967296*o()|0)}return new s.init(i,t)}}),o=i.enc={},c=o.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(r,t/2)}},u=o.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n++){var a=t[n>>>2]>>>24-n%4*8&255;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(r,t)}},d=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},h=n.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,i=r.words,n=r.sigBytes,a=this.blockSize,o=n/(4*a),c=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*a,u=e.min(4*c,n);if(c){for(var d=0;d<c;d+=a)this._doProcessBlock(i,d);var h=i.splice(0,c);r.sigBytes-=u}return new s.init(h,u)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),l=(n.Hasher=h.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new l.HMAC.init(e,r).finalize(t)}}}),i.algo={});return i}(Math);return function(){var t=e,r=t.lib.WordArray;function i(e,t,i){for(var n=[],a=0,s=0;s<t;s++)if(s%4){var o=i[e.charCodeAt(s-1)]<<s%4*2,c=i[e.charCodeAt(s)]>>>6-s%4*2;n[a>>>2]|=(o|c)<<24-a%4*8,a++}return r.create(n,a)}t.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp();for(var n=[],a=0;a<r;a+=3)for(var s=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,o=0;o<4&&a+.75*o<r;o++)n.push(i.charAt(s>>>6*(3-o)&63));var c=i.charAt(64);if(c)for(;n.length%4;)n.push(c);return n.join("")},parse:function(e){var t=e.length,r=this._map,n=this._reverseMap;if(!n){n=this._reverseMap=[];for(var a=0;a<r.length;a++)n[r.charCodeAt(a)]=a}var s=r.charAt(64);if(s){var o=e.indexOf(s);-1!==o&&(t=o)}return i(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.algo,o=[];!function(){for(var e=0;e<64;e++)o[e]=4294967296*t.abs(t.sin(e+1))|0}();var c=s.MD5=a.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a=this._hash.words,s=e[t+0],c=e[t+1],f=e[t+2],p=e[t+3],v=e[t+4],m=e[t+5],y=e[t+6],g=e[t+7],b=e[t+8],k=e[t+9],x=e[t+10],w=e[t+11],_=e[t+12],O=e[t+13],T=e[t+14],S=e[t+15],C=a[0],I=a[1],M=a[2],E=a[3];C=u(C,I,M,E,s,7,o[0]),E=u(E,C,I,M,c,12,o[1]),M=u(M,E,C,I,f,17,o[2]),I=u(I,M,E,C,p,22,o[3]),C=u(C,I,M,E,v,7,o[4]),E=u(E,C,I,M,m,12,o[5]),M=u(M,E,C,I,y,17,o[6]),I=u(I,M,E,C,g,22,o[7]),C=u(C,I,M,E,b,7,o[8]),E=u(E,C,I,M,k,12,o[9]),M=u(M,E,C,I,x,17,o[10]),I=u(I,M,E,C,w,22,o[11]),C=u(C,I,M,E,_,7,o[12]),E=u(E,C,I,M,O,12,o[13]),M=u(M,E,C,I,T,17,o[14]),C=d(C,I=u(I,M,E,C,S,22,o[15]),M,E,c,5,o[16]),E=d(E,C,I,M,y,9,o[17]),M=d(M,E,C,I,w,14,o[18]),I=d(I,M,E,C,s,20,o[19]),C=d(C,I,M,E,m,5,o[20]),E=d(E,C,I,M,x,9,o[21]),M=d(M,E,C,I,S,14,o[22]),I=d(I,M,E,C,v,20,o[23]),C=d(C,I,M,E,k,5,o[24]),E=d(E,C,I,M,T,9,o[25]),M=d(M,E,C,I,p,14,o[26]),I=d(I,M,E,C,b,20,o[27]),C=d(C,I,M,E,O,5,o[28]),E=d(E,C,I,M,f,9,o[29]),M=d(M,E,C,I,g,14,o[30]),C=h(C,I=d(I,M,E,C,_,20,o[31]),M,E,m,4,o[32]),E=h(E,C,I,M,b,11,o[33]),M=h(M,E,C,I,w,16,o[34]),I=h(I,M,E,C,T,23,o[35]),C=h(C,I,M,E,c,4,o[36]),E=h(E,C,I,M,v,11,o[37]),M=h(M,E,C,I,g,16,o[38]),I=h(I,M,E,C,x,23,o[39]),C=h(C,I,M,E,O,4,o[40]),E=h(E,C,I,M,s,11,o[41]),M=h(M,E,C,I,p,16,o[42]),I=h(I,M,E,C,y,23,o[43]),C=h(C,I,M,E,k,4,o[44]),E=h(E,C,I,M,_,11,o[45]),M=h(M,E,C,I,S,16,o[46]),C=l(C,I=h(I,M,E,C,f,23,o[47]),M,E,s,6,o[48]),E=l(E,C,I,M,g,10,o[49]),M=l(M,E,C,I,T,15,o[50]),I=l(I,M,E,C,m,21,o[51]),C=l(C,I,M,E,_,6,o[52]),E=l(E,C,I,M,p,10,o[53]),M=l(M,E,C,I,x,15,o[54]),I=l(I,M,E,C,c,21,o[55]),C=l(C,I,M,E,b,6,o[56]),E=l(E,C,I,M,S,10,o[57]),M=l(M,E,C,I,y,15,o[58]),I=l(I,M,E,C,O,21,o[59]),C=l(C,I,M,E,v,6,o[60]),E=l(E,C,I,M,w,10,o[61]),M=l(M,E,C,I,f,15,o[62]),I=l(I,M,E,C,k,21,o[63]),a[0]=a[0]+C|0,a[1]=a[1]+I|0,a[2]=a[2]+M|0,a[3]=a[3]+E|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;r[n>>>5]|=128<<24-n%32;var a=t.floor(i/4294967296),s=i;r[15+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),r[14+(n+64>>>9<<4)]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),e.sigBytes=4*(r.length+1),this._process();for(var o=this._hash,c=o.words,u=0;u<4;u++){var d=c[u];c[u]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8)}return o},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function u(e,t,r,i,n,a,s){var o=e+(t&r|~t&i)+n+s;return(o<<a|o>>>32-a)+t}function d(e,t,r,i,n,a,s){var o=e+(t&i|r&~i)+n+s;return(o<<a|o>>>32-a)+t}function h(e,t,r,i,n,a,s){var o=e+(t^r^i)+n+s;return(o<<a|o>>>32-a)+t}function l(e,t,r,i,n,a,s){var o=e+(r^(t|~i))+n+s;return(o<<a|o>>>32-a)+t}r.MD5=a._createHelper(c),r.HmacMD5=a._createHmacHelper(c)}(Math),function(){var t=e,r=t.lib,i=r.WordArray,n=r.Hasher,a=t.algo,s=[],o=a.SHA1=n.extend({_doReset:function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],o=r[3],c=r[4],u=0;u<80;u++){if(u<16)s[u]=0|e[t+u];else{var d=s[u-3]^s[u-8]^s[u-14]^s[u-16];s[u]=d<<1|d>>>31}var h=(i<<5|i>>>27)+c+s[u];h+=u<20?1518500249+(n&a|~n&o):u<40?1859775393+(n^a^o):u<60?(n&a|n&o|a&o)-1894007588:(n^a^o)-899497514,c=o,o=a,a=n<<30|n>>>2,n=i,i=h}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+c|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(i+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=n.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=n._createHelper(o),t.HmacSHA1=n._createHmacHelper(o)}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.algo,o=[],c=[];!function(){function e(e){for(var r=t.sqrt(e),i=2;i<=r;i++)if(!(e%i))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var i=2,n=0;n<64;)e(i)&&(n<8&&(o[n]=r(t.pow(i,.5))),c[n]=r(t.pow(i,1/3)),n++),i++}();var u=[],d=s.SHA256=a.extend({_doReset:function(){this._hash=new n.init(o.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],d=r[5],h=r[6],l=r[7],f=0;f<64;f++){if(f<16)u[f]=0|e[t+f];else{var p=u[f-15],v=(p<<25|p>>>7)^(p<<14|p>>>18)^p>>>3,m=u[f-2],y=(m<<15|m>>>17)^(m<<13|m>>>19)^m>>>10;u[f]=v+u[f-7]+y+u[f-16]}var g=i&n^i&a^n&a,b=(i<<30|i>>>2)^(i<<19|i>>>13)^(i<<10|i>>>22),k=l+((o<<26|o>>>6)^(o<<21|o>>>11)^(o<<7|o>>>25))+(o&d^~o&h)+c[f]+u[f];l=h,h=d,d=o,o=s+k|0,s=a,a=n,n=i,i=k+(b+g)|0}r[0]=r[0]+i|0,r[1]=r[1]+n|0,r[2]=r[2]+a|0,r[3]=r[3]+s|0,r[4]=r[4]+o|0,r[5]=r[5]+d|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var e=this._data,r=e.words,i=8*this._nDataBytes,n=8*e.sigBytes;return r[n>>>5]|=128<<24-n%32,r[14+(n+64>>>9<<4)]=t.floor(i/4294967296),r[15+(n+64>>>9<<4)]=i,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=a._createHelper(d),r.HmacSHA256=a._createHmacHelper(d)}(Math),function(){var t=e,r=t.lib.WordArray,i=t.enc;function n(e){return e<<8&4278255360|e>>>8&16711935}i.Utf16=i.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],n=0;n<r;n+=2){var a=t[n>>>2]>>>16-n%4*8&65535;i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var t=e.length,i=[],n=0;n<t;n++)i[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return r.create(i,2*t)}},i.Utf16LE={stringify:function(e){for(var t=e.words,r=e.sigBytes,i=[],a=0;a<r;a+=2){var s=n(t[a>>>2]>>>16-a%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse:function(e){for(var t=e.length,i=[],a=0;a<t;a++)i[a>>>1]|=n(e.charCodeAt(a)<<16-a%2*16);return r.create(i,2*t)}}}(),function(){if("function"==typeof ArrayBuffer){var t=e.lib.WordArray,r=t.init;(t.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||"undefined"!==typeof Uint8ClampedArray&&e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,i=[],n=0;n<t;n++)i[n>>>2]|=e[n]<<24-n%4*8;r.call(this,i,t)}else r.apply(this,arguments)}).prototype=t}}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.algo,o=n.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=n.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=n.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=n.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),h=n.create([0,1518500249,1859775393,2400959708,2840853838]),l=n.create([1352829926,1548603684,1836072691,2053994217,0]),f=s.RIPEMD160=a.extend({_doReset:function(){this._hash=n.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=0;r<16;r++){var i=t+r,n=e[i];e[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8)}var a,s,f,k,x,w,_,O,T,S,C,I=this._hash.words,M=h.words,E=l.words,A=o.words,F=c.words,P=u.words,B=d.words;for(w=a=I[0],_=s=I[1],O=f=I[2],T=k=I[3],S=x=I[4],r=0;r<80;r+=1)C=a+e[t+A[r]]|0,C+=r<16?p(s,f,k)+M[0]:r<32?v(s,f,k)+M[1]:r<48?m(s,f,k)+M[2]:r<64?y(s,f,k)+M[3]:g(s,f,k)+M[4],C=(C=b(C|=0,P[r]))+x|0,a=x,x=k,k=b(f,10),f=s,s=C,C=w+e[t+F[r]]|0,C+=r<16?g(_,O,T)+E[0]:r<32?y(_,O,T)+E[1]:r<48?m(_,O,T)+E[2]:r<64?v(_,O,T)+E[3]:p(_,O,T)+E[4],C=(C=b(C|=0,B[r]))+S|0,w=S,S=T,T=b(O,10),O=_,_=C;C=I[1]+f+T|0,I[1]=I[2]+k+S|0,I[2]=I[3]+x+w|0,I[3]=I[4]+a+_|0,I[4]=I[0]+s+O|0,I[0]=C},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var n=this._hash,a=n.words,s=0;s<5;s++){var o=a[s];a[s]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}return n},clone:function(){var e=a.clone.call(this);return e._hash=this._hash.clone(),e}});function p(e,t,r){return e^t^r}function v(e,t,r){return e&t|~e&r}function m(e,t,r){return(e|~t)^r}function y(e,t,r){return e&r|t&~r}function g(e,t,r){return e^(t|~r)}function b(e,t){return e<<t|e>>>32-t}r.RIPEMD160=a._createHelper(f),r.HmacRIPEMD160=a._createHmacHelper(f)}(Math),function(){var t=e,r=t.lib.Base,i=t.enc.Utf8;t.algo.HMAC=r.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=i.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var a=this._oKey=t.clone(),s=this._iKey=t.clone(),o=a.words,c=s.words,u=0;u<r;u++)o[u]^=1549556828,c[u]^=909522486;a.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(r))}})}(),function(){var t=e,r=t.lib,i=r.Base,n=r.WordArray,a=t.algo,s=a.SHA1,o=a.HMAC,c=a.PBKDF2=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=o.create(r.hasher,e),a=n.create(),s=n.create([1]),c=a.words,u=s.words,d=r.keySize,h=r.iterations;c.length<d;){var l=i.update(t).finalize(s);i.reset();for(var f=l.words,p=f.length,v=l,m=1;m<h;m++){v=i.finalize(v),i.reset();for(var y=v.words,g=0;g<p;g++)f[g]^=y[g]}a.concat(l),u[0]++}return a.sigBytes=4*d,a}});t.PBKDF2=function(e,t,r){return c.create(r).compute(e,t)}}(),function(){var t=e,r=t.lib,i=r.Base,n=r.WordArray,a=t.algo,s=a.MD5,o=a.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:s,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,i=r.hasher.create(),a=n.create(),s=a.words,o=r.keySize,c=r.iterations;s.length<o;){u&&i.update(u);var u=i.update(e).finalize(t);i.reset();for(var d=1;d<c;d++)u=i.finalize(u),i.reset();a.concat(u)}return a.sigBytes=4*o,a}});t.EvpKDF=function(e,t,r){return o.create(r).compute(e,t)}}(),function(){var t=e,r=t.lib.WordArray,i=t.algo,n=i.SHA256,a=i.SHA224=n.extend({_doReset:function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=n._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=n._createHelper(a),t.HmacSHA224=n._createHmacHelper(a)}(),function(t){var r=e,i=r.lib,n=i.Base,a=i.WordArray,s=r.x64={};s.Word=n.extend({init:function(e,t){this.high=e,this.low=t}}),s.WordArray=n.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],i=0;i<t;i++){var n=e[i];r.push(n.high),r.push(n.low)}return a.create(r,this.sigBytes)},clone:function(){for(var e=n.clone.call(this),t=e.words=this.words.slice(0),r=t.length,i=0;i<r;i++)t[i]=t[i].clone();return e}})}(),function(t){var r=e,i=r.lib,n=i.WordArray,a=i.Hasher,s=r.x64.Word,o=r.algo,c=[],u=[],d=[];!function(){for(var e=1,t=0,r=0;r<24;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var i=(2*e+3*t)%5;e=t%5,t=i}for(e=0;e<5;e++)for(t=0;t<5;t++)u[e+5*t]=t+(2*e+3*t)%5*5;for(var n=1,a=0;a<24;a++){for(var o=0,h=0,l=0;l<7;l++){if(1&n){var f=(1<<l)-1;f<32?h^=1<<f:o^=1<<f-32}128&n?n=n<<1^113:n<<=1}d[a]=s.create(o,h)}}();var h=[];!function(){for(var e=0;e<25;e++)h[e]=s.create()}();var l=o.SHA3=a.extend({cfg:a.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;t<25;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,i=this.blockSize/2,n=0;n<i;n++){var a=e[t+2*n],s=e[t+2*n+1];a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),(I=r[n]).high^=s,I.low^=a}for(var o=0;o<24;o++){for(var l=0;l<5;l++){for(var f=0,p=0,v=0;v<5;v++)f^=(I=r[l+5*v]).high,p^=I.low;var m=h[l];m.high=f,m.low=p}for(l=0;l<5;l++){var y=h[(l+4)%5],g=h[(l+1)%5],b=g.high,k=g.low;for(f=y.high^(b<<1|k>>>31),p=y.low^(k<<1|b>>>31),v=0;v<5;v++)(I=r[l+5*v]).high^=f,I.low^=p}for(var x=1;x<25;x++){var w=(I=r[x]).high,_=I.low,O=c[x];O<32?(f=w<<O|_>>>32-O,p=_<<O|w>>>32-O):(f=_<<O-32|w>>>64-O,p=w<<O-32|_>>>64-O);var T=h[u[x]];T.high=f,T.low=p}var S=h[0],C=r[0];for(S.high=C.high,S.low=C.low,l=0;l<5;l++)for(v=0;v<5;v++){var I=r[x=l+5*v],M=h[x],E=h[(l+1)%5+5*v],A=h[(l+2)%5+5*v];I.high=M.high^~E.high&A.high,I.low=M.low^~E.low&A.low}I=r[0];var F=d[o];I.high^=F.high,I.low^=F.low}},_doFinalize:function(){var e=this._data,r=e.words,i=(this._nDataBytes,8*e.sigBytes),a=32*this.blockSize;r[i>>>5]|=1<<24-i%32,r[(t.ceil((i+1)/a)*a>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var s=this._state,o=this.cfg.outputLength/8,c=o/8,u=[],d=0;d<c;d++){var h=s[d],l=h.high,f=h.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),f=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),u.push(f),u.push(l)}return new n.init(u,o)},clone:function(){for(var e=a.clone.call(this),t=e._state=this._state.slice(0),r=0;r<25;r++)t[r]=t[r].clone();return e}});r.SHA3=a._createHelper(l),r.HmacSHA3=a._createHmacHelper(l)}(Math),function(){var t=e,r=t.lib.Hasher,i=t.x64,n=i.Word,a=i.WordArray,s=t.algo;function o(){return n.create.apply(n,arguments)}var c=[o(1116352408,3609767458),o(1899447441,602891725),o(3049323471,3964484399),o(3921009573,2173295548),o(961987163,4081628472),o(1508970993,3053834265),o(2453635748,2937671579),o(2870763221,3664609560),o(3624381080,2734883394),o(310598401,1164996542),o(607225278,1323610764),o(1426881987,3590304994),o(1925078388,4068182383),o(2162078206,991336113),o(2614888103,633803317),o(3248222580,3479774868),o(3835390401,2666613458),o(4022224774,944711139),o(264347078,2341262773),o(604807628,2007800933),o(770255983,1495990901),o(1249150122,1856431235),o(1555081692,3175218132),o(1996064986,2198950837),o(2554220882,3999719339),o(2821834349,766784016),o(2952996808,2566594879),o(3210313671,3203337956),o(3336571891,1034457026),o(3584528711,2466948901),o(113926993,3758326383),o(338241895,168717936),o(666307205,1188179964),o(773529912,1546045734),o(1294757372,1522805485),o(1396182291,2643833823),o(1695183700,2343527390),o(1986661051,1014477480),o(2177026350,1206759142),o(2456956037,344077627),o(2730485921,1290863460),o(2820302411,3158454273),o(3259730800,3505952657),o(3345764771,106217008),o(3516065817,3606008344),o(3600352804,1432725776),o(4094571909,1467031594),o(275423344,851169720),o(430227734,3100823752),o(506948616,1363258195),o(659060556,3750685593),o(883997877,3785050280),o(958139571,3318307427),o(1322822218,3812723403),o(1537002063,2003034995),o(1747873779,3602036899),o(1955562222,1575990012),o(2024104815,1125592928),o(2227730452,2716904306),o(2361852424,442776044),o(2428436474,593698344),o(2756734187,3733110249),o(3204031479,2999351573),o(3329325298,3815920427),o(3391569614,3928383900),o(3515267271,566280711),o(3940187606,3454069534),o(4118630271,4000239992),o(116418474,1914138554),o(174292421,2731055270),o(289380356,3203993006),o(460393269,320620315),o(685471733,587496836),o(852142971,1086792851),o(1017036298,365543100),o(1126000580,2618297676),o(1288033470,3409855158),o(1501505948,4234509866),o(1607167915,987167468),o(1816402316,1246189591)],u=[];!function(){for(var e=0;e<80;e++)u[e]=o()}();var d=s.SHA512=r.extend({_doReset:function(){this._hash=new a.init([new n.init(1779033703,4089235720),new n.init(3144134277,2227873595),new n.init(1013904242,4271175723),new n.init(2773480762,1595750129),new n.init(1359893119,2917565137),new n.init(2600822924,725511199),new n.init(528734635,4215389547),new n.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,i=r[0],n=r[1],a=r[2],s=r[3],o=r[4],d=r[5],h=r[6],l=r[7],f=i.high,p=i.low,v=n.high,m=n.low,y=a.high,g=a.low,b=s.high,k=s.low,x=o.high,w=o.low,_=d.high,O=d.low,T=h.high,S=h.low,C=l.high,I=l.low,M=f,E=p,A=v,F=m,P=y,B=g,R=b,V=k,L=x,D=w,q=_,N=O,G=T,j=S,U=C,H=I,z=0;z<80;z++){var W=u[z];if(z<16)var K=W.high=0|e[t+2*z],X=W.low=0|e[t+2*z+1];else{var Y=u[z-15],Z=Y.high,Q=Y.low,$=(Z>>>1|Q<<31)^(Z>>>8|Q<<24)^Z>>>7,J=(Q>>>1|Z<<31)^(Q>>>8|Z<<24)^(Q>>>7|Z<<25),ee=u[z-2],te=ee.high,re=ee.low,ie=(te>>>19|re<<13)^(te<<3|re>>>29)^te>>>6,ne=(re>>>19|te<<13)^(re<<3|te>>>29)^(re>>>6|te<<26),ae=u[z-7],se=ae.high,oe=ae.low,ce=u[z-16],ue=ce.high,de=ce.low;K=(K=(K=$+se+((X=J+oe)>>>0<J>>>0?1:0))+ie+((X+=ne)>>>0<ne>>>0?1:0))+ue+((X+=de)>>>0<de>>>0?1:0),W.high=K,W.low=X}var he,le=L&q^~L&G,fe=D&N^~D&j,pe=M&A^M&P^A&P,ve=E&F^E&B^F&B,me=(M>>>28|E<<4)^(M<<30|E>>>2)^(M<<25|E>>>7),ye=(E>>>28|M<<4)^(E<<30|M>>>2)^(E<<25|M>>>7),ge=(L>>>14|D<<18)^(L>>>18|D<<14)^(L<<23|D>>>9),be=(D>>>14|L<<18)^(D>>>18|L<<14)^(D<<23|L>>>9),ke=c[z],xe=ke.high,we=ke.low,_e=U+ge+((he=H+be)>>>0<H>>>0?1:0),Oe=ye+ve;U=G,H=j,G=q,j=N,q=L,N=D,L=R+(_e=(_e=(_e=_e+le+((he+=fe)>>>0<fe>>>0?1:0))+xe+((he+=we)>>>0<we>>>0?1:0))+K+((he+=X)>>>0<X>>>0?1:0))+((D=V+he|0)>>>0<V>>>0?1:0)|0,R=P,V=B,P=A,B=F,A=M,F=E,M=_e+(me+pe+(Oe>>>0<ye>>>0?1:0))+((E=he+Oe|0)>>>0<he>>>0?1:0)|0}p=i.low=p+E,i.high=f+M+(p>>>0<E>>>0?1:0),m=n.low=m+F,n.high=v+A+(m>>>0<F>>>0?1:0),g=a.low=g+B,a.high=y+P+(g>>>0<B>>>0?1:0),k=s.low=k+V,s.high=b+R+(k>>>0<V>>>0?1:0),w=o.low=w+D,o.high=x+L+(w>>>0<D>>>0?1:0),O=d.low=O+N,d.high=_+q+(O>>>0<N>>>0?1:0),S=h.low=S+j,h.high=T+G+(S>>>0<j>>>0?1:0),I=l.low=I+H,l.high=C+U+(I>>>0<H>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,i=8*e.sigBytes;return t[i>>>5]|=128<<24-i%32,t[30+(i+128>>>10<<5)]=Math.floor(r/4294967296),t[31+(i+128>>>10<<5)]=r,e.sigBytes=4*t.length,this._process(),this._hash.toX32()},clone:function(){var e=r.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});t.SHA512=r._createHelper(d),t.HmacSHA512=r._createHmacHelper(d)}(),function(){var t=e,r=t.x64,i=r.Word,n=r.WordArray,a=t.algo,s=a.SHA512,o=a.SHA384=s.extend({_doReset:function(){this._hash=new n.init([new i.init(3418070365,3238371032),new i.init(1654270250,914150663),new i.init(2438529370,812702999),new i.init(355462360,4144912697),new i.init(1731405415,4290775857),new i.init(2394180231,1750603025),new i.init(3675008525,1694076839),new i.init(1203062813,3204075428)])},_doFinalize:function(){var e=s._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=s._createHelper(o),t.HmacSHA384=s._createHmacHelper(o)}(),e.lib.Cipher||function(t){var r=e,i=r.lib,n=i.Base,a=i.WordArray,s=i.BufferedBlockAlgorithm,o=r.enc,c=(o.Utf8,o.Base64),u=r.algo.EvpKDF,d=i.Cipher=s.extend({cfg:n.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?b:y}return function(t){return{encrypt:function(r,i,n){return e(i).encrypt(t,r,i,n)},decrypt:function(r,i,n){return e(i).decrypt(t,r,i,n)}}}}()}),h=(i.StreamCipher=d.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),r.mode={}),l=i.BlockCipherMode=n.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),f=h.CBC=function(){var e=l.extend();function r(e,r,i){var n=this._iv;if(n){var a=n;this._iv=t}else a=this._prevBlock;for(var s=0;s<i;s++)e[r+s]^=a[s]}return e.Encryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;r.call(this,e,t,n),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+n)}}),e.Decryptor=e.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,a=e.slice(t,t+n);i.decryptBlock(e,t),r.call(this,e,t,n),this._prevBlock=a}}),e}(),p=(r.pad={}).Pkcs7={pad:function(e,t){for(var r=4*t,i=r-e.sigBytes%r,n=i<<24|i<<16|i<<8|i,s=[],o=0;o<i;o+=4)s.push(n);var c=a.create(s,i);e.concat(c)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(i.BlockCipher=d.extend({cfg:d.cfg.extend({mode:f,padding:p}),reset:function(){d.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=r.createEncryptor;else i=r.createDecryptor,this._minBufferSize=1;this._mode&&this._mode.__creator==i?this._mode.init(this,t&&t.words):(this._mode=i.call(r,this,t&&t.words),this._mode.__creator=i)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4}),i.CipherParams=n.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),m=(r.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var i=a.create([1398893684,1701076831]).concat(r).concat(t);else i=t;return i.toString(c)},parse:function(e){var t=c.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var i=a.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:i})}},y=i.SerializableCipher=n.extend({cfg:n.extend({format:m}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i),a=n.finalize(t),s=n.cfg;return v.create({ciphertext:a,key:r,iv:s.iv,algorithm:e,mode:s.mode,padding:s.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),g=(r.kdf={}).OpenSSL={execute:function(e,t,r,i){i||(i=a.random(8));var n=u.create({keySize:t+r}).compute(e,i),s=a.create(n.words.slice(t),4*r);return n.sigBytes=4*t,v.create({key:n,iv:s,salt:i})}},b=i.PasswordBasedCipher=y.extend({cfg:y.cfg.extend({kdf:g}),encrypt:function(e,t,r,i){var n=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize);i.iv=n.iv;var a=y.encrypt.call(this,e,t,n.key,i);return a.mixIn(n),a},decrypt:function(e,t,r,i){i=this.cfg.extend(i),t=this._parse(t,i.format);var n=i.kdf.execute(r,e.keySize,e.ivSize,t.salt);return i.iv=n.iv,y.decrypt.call(this,e,t,n.key,i)}})}(),e.mode.CFB=function(){var t=e.lib.BlockCipherMode.extend();function r(e,t,r,i){var n=this._iv;if(n){var a=n.slice(0);this._iv=void 0}else a=this._prevBlock;i.encryptBlock(a,0);for(var s=0;s<r;s++)e[t+s]^=a[s]}return t.Encryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize;r.call(this,e,t,n,i),this._prevBlock=e.slice(t,t+n)}}),t.Decryptor=t.extend({processBlock:function(e,t){var i=this._cipher,n=i.blockSize,a=e.slice(t,t+n);r.call(this,e,t,n,i),this._prevBlock=a}}),t}(),e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,i=4*t,n=i-r%i,a=r+n-1;e.clamp(),e.words[a>>>2]|=n<<24-a%4*8,e.sigBytes+=n},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126={pad:function(t,r){var i=4*r,n=i-t.sigBytes%i;t.concat(e.lib.WordArray.random(n-1)).concat(e.lib.WordArray.create([n<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,a=this._keystream;n&&(a=this._keystream=n.slice(0),this._iv=void 0),r.encryptBlock(a,0);for(var s=0;s<i;s++)e[t+s]^=a[s]}});return t.Decryptor=r,t}(),e.pad.NoPadding={pad:function(){},unpad:function(){}},function(t){var r=e,i=r.lib.CipherParams,n=r.enc.Hex;r.format.Hex={stringify:function(e){return e.ciphertext.toString(n)},parse:function(e){var t=n.parse(e);return i.create({ciphertext:t})}}}(),function(){var t=e,r=t.lib.BlockCipher,i=t.algo,n=[],a=[],s=[],o=[],c=[],u=[],d=[],h=[],l=[],f=[];!function(){for(var e=[],t=0;t<256;t++)e[t]=t<128?t<<1:t<<1^283;var r=0,i=0;for(t=0;t<256;t++){var p=i^i<<1^i<<2^i<<3^i<<4;p=p>>>8^255&p^99,n[r]=p,a[p]=r;var v=e[r],m=e[v],y=e[m],g=257*e[p]^16843008*p;s[r]=g<<24|g>>>8,o[r]=g<<16|g>>>16,c[r]=g<<8|g>>>24,u[r]=g,g=16843009*y^65537*m^257*v^16843008*r,d[p]=g<<24|g>>>8,h[p]=g<<16|g>>>16,l[p]=g<<8|g>>>24,f[p]=g,r?(r=v^e[e[e[y^v]]],i^=e[e[i]]):r=i=1}}();var p=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var e=this._keyPriorReset=this._key,t=e.words,r=e.sigBytes/4,i=4*((this._nRounds=r+6)+1),a=this._keySchedule=[],s=0;s<i;s++)if(s<r)a[s]=t[s];else{var o=a[s-1];s%r?r>6&&s%r==4&&(o=n[o>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o]):(o=n[(o=o<<8|o>>>24)>>>24]<<24|n[o>>>16&255]<<16|n[o>>>8&255]<<8|n[255&o],o^=p[s/r|0]<<24),a[s]=a[s-r]^o}for(var c=this._invKeySchedule=[],u=0;u<i;u++)s=i-u,o=u%4?a[s]:a[s-4],c[u]=u<4||s<=4?o:d[n[o>>>24]]^h[n[o>>>16&255]]^l[n[o>>>8&255]]^f[n[255&o]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,o,c,u,n)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,d,h,l,f,a),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,n,a,s,o){for(var c=this._nRounds,u=e[t]^r[0],d=e[t+1]^r[1],h=e[t+2]^r[2],l=e[t+3]^r[3],f=4,p=1;p<c;p++){var v=i[u>>>24]^n[d>>>16&255]^a[h>>>8&255]^s[255&l]^r[f++],m=i[d>>>24]^n[h>>>16&255]^a[l>>>8&255]^s[255&u]^r[f++],y=i[h>>>24]^n[l>>>16&255]^a[u>>>8&255]^s[255&d]^r[f++],g=i[l>>>24]^n[u>>>16&255]^a[d>>>8&255]^s[255&h]^r[f++];u=v,d=m,h=y,l=g}v=(o[u>>>24]<<24|o[d>>>16&255]<<16|o[h>>>8&255]<<8|o[255&l])^r[f++],m=(o[d>>>24]<<24|o[h>>>16&255]<<16|o[l>>>8&255]<<8|o[255&u])^r[f++],y=(o[h>>>24]<<24|o[l>>>16&255]<<16|o[u>>>8&255]<<8|o[255&d])^r[f++],g=(o[l>>>24]<<24|o[u>>>16&255]<<16|o[d>>>8&255]<<8|o[255&h])^r[f++],e[t]=v,e[t+1]=m,e[t+2]=y,e[t+3]=g},keySize:8});t.AES=r._createHelper(v)}(),function(){var t=e,r=t.lib,i=r.WordArray,n=r.BlockCipher,a=t.algo,s=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],o=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],h=a.DES=n.extend({_doReset:function(){for(var e=this._key.words,t=[],r=0;r<56;r++){var i=s[r]-1;t[r]=e[i>>>5]>>>31-i%32&1}for(var n=this._subKeys=[],a=0;a<16;a++){var u=n[a]=[],d=c[a];for(r=0;r<24;r++)u[r/6|0]|=t[(o[r]-1+d)%28]<<31-r%6,u[4+(r/6|0)]|=t[28+(o[r+24]-1+d)%28]<<31-r%6;for(u[0]=u[0]<<1|u[0]>>>31,r=1;r<7;r++)u[r]=u[r]>>>4*(r-1)+3;u[7]=u[7]<<5|u[7]>>>27}var h=this._invSubKeys=[];for(r=0;r<16;r++)h[r]=n[15-r]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,t,r){this._lBlock=e[t],this._rBlock=e[t+1],l.call(this,4,252645135),l.call(this,16,65535),f.call(this,2,858993459),f.call(this,8,16711935),l.call(this,1,1431655765);for(var i=0;i<16;i++){for(var n=r[i],a=this._lBlock,s=this._rBlock,o=0,c=0;c<8;c++)o|=u[c][((s^n[c])&d[c])>>>0];this._lBlock=s,this._rBlock=a^o}var h=this._lBlock;this._lBlock=this._rBlock,this._rBlock=h,l.call(this,1,1431655765),f.call(this,8,16711935),f.call(this,2,858993459),l.call(this,16,65535),l.call(this,4,252645135),e[t]=this._lBlock,e[t+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});function l(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function f(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}t.DES=n._createHelper(h);var p=a.TripleDES=n.extend({_doReset:function(){var e=this._key.words;this._des1=h.createEncryptor(i.create(e.slice(0,2))),this._des2=h.createEncryptor(i.create(e.slice(2,4))),this._des3=h.createEncryptor(i.create(e.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});t.TripleDES=n._createHelper(p)}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=i.RC4=r.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,i=this._S=[],n=0;n<256;n++)i[n]=n;n=0;for(var a=0;n<256;n++){var s=n%r,o=t[s>>>2]>>>24-s%4*8&255;a=(a+i[n]+o)%256;var c=i[n];i[n]=i[a],i[a]=c}this._i=this._j=0},_doProcessBlock:function(e,t){e[t]^=a.call(this)},keySize:8,ivSize:0});function a(){for(var e=this._S,t=this._i,r=this._j,i=0,n=0;n<4;n++){r=(r+e[t=(t+1)%256])%256;var a=e[t];e[t]=e[r],e[r]=a,i|=e[(e[t]+e[r])%256]<<24-8*n}return this._i=t,this._j=r,i}t.RC4=r._createHelper(n);var s=i.RC4Drop=n.extend({cfg:n.cfg.extend({drop:192}),_doReset:function(){n._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)a.call(this)}});t.RC4Drop=r._createHelper(s)}(),e.mode.CTRGladman=function(){var t=e.lib.BlockCipherMode.extend();function r(e){if(255===(e>>24&255)){var t=e>>16&255,r=e>>8&255,i=255&e;255===t?(t=0,255===r?(r=0,255===i?i=0:++i):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=i}else e+=1<<24;return e}function i(e){return 0===(e[0]=r(e[0]))&&(e[1]=r(e[1])),e}var n=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,a=this._iv,s=this._counter;a&&(s=this._counter=a.slice(0),this._iv=void 0),i(s);var o=s.slice(0);r.encryptBlock(o,0);for(var c=0;c<n;c++)e[t+c]^=o[c]}});return t.Decryptor=n,t}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],a=[],s=[],o=i.Rabbit=r.extend({_doReset:function(){for(var e=this._key.words,t=this.cfg.iv,r=0;r<4;r++)e[r]=16711935&(e[r]<<8|e[r]>>>24)|4278255360&(e[r]<<24|e[r]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],n=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];for(this._b=0,r=0;r<4;r++)c.call(this);for(r=0;r<8;r++)n[r]^=i[r+4&7];if(t){var a=t.words,s=a[0],o=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=u>>>16|4294901760&d,l=d<<16|65535&u;for(n[0]^=u,n[1]^=h,n[2]^=d,n[3]^=l,n[4]^=u,n[5]^=h,n[6]^=d,n[7]^=l,r=0;r<4;r++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,c=((n*n>>>17)+n*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.Rabbit=r._createHelper(o)}(),e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=this._iv,a=this._counter;n&&(a=this._counter=n.slice(0),this._iv=void 0);var s=a.slice(0);r.encryptBlock(s,0),a[i-1]=a[i-1]+1|0;for(var o=0;o<i;o++)e[t+o]^=s[o]}});return t.Decryptor=r,t}(),function(){var t=e,r=t.lib.StreamCipher,i=t.algo,n=[],a=[],s=[],o=i.RabbitLegacy=r.extend({_doReset:function(){var e=this._key.words,t=this.cfg.iv,r=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;n<4;n++)c.call(this);for(n=0;n<8;n++)i[n]^=r[n+4&7];if(t){var a=t.words,s=a[0],o=a[1],u=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),d=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),h=u>>>16|4294901760&d,l=d<<16|65535&u;for(i[0]^=u,i[1]^=h,i[2]^=d,i[3]^=l,i[4]^=u,i[5]^=h,i[6]^=d,i[7]^=l,n=0;n<4;n++)c.call(this)}},_doProcessBlock:function(e,t){var r=this._X;c.call(this),n[0]=r[0]^r[5]>>>16^r[3]<<16,n[1]=r[2]^r[7]>>>16^r[5]<<16,n[2]=r[4]^r[1]>>>16^r[7]<<16,n[3]=r[6]^r[3]>>>16^r[1]<<16;for(var i=0;i<4;i++)n[i]=16711935&(n[i]<<8|n[i]>>>24)|4278255360&(n[i]<<24|n[i]>>>8),e[t+i]^=n[i]},blockSize:4,ivSize:2});function c(){for(var e=this._X,t=this._C,r=0;r<8;r++)a[r]=t[r];for(t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<a[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<a[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<a[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<a[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<a[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<a[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<a[6]>>>0?1:0)|0,this._b=t[7]>>>0<a[7]>>>0?1:0,r=0;r<8;r++){var i=e[r]+t[r],n=65535&i,o=i>>>16,c=((n*n>>>17)+n*o>>>15)+o*o,u=((4294901760&i)*i|0)+((65535&i)*i|0);s[r]=c^u}e[0]=s[0]+(s[7]<<16|s[7]>>>16)+(s[6]<<16|s[6]>>>16)|0,e[1]=s[1]+(s[0]<<8|s[0]>>>24)+s[7]|0,e[2]=s[2]+(s[1]<<16|s[1]>>>16)+(s[0]<<16|s[0]>>>16)|0,e[3]=s[3]+(s[2]<<8|s[2]>>>24)+s[1]|0,e[4]=s[4]+(s[3]<<16|s[3]>>>16)+(s[2]<<16|s[2]>>>16)|0,e[5]=s[5]+(s[4]<<8|s[4]>>>24)+s[3]|0,e[6]=s[6]+(s[5]<<16|s[5]>>>16)+(s[4]<<16|s[4]>>>16)|0,e[7]=s[7]+(s[6]<<8|s[6]>>>24)+s[5]|0}t.RabbitLegacy=r._createHelper(o)}(),e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1;!(t[r>>>2]>>>24-r%4*8&255);)r--;e.sigBytes=r+1}},e}()},function(e,t,r){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}r.d(t,"a",(function(){return i}))},,,function(e,t,r){"use strict";var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function s(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(e){i[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(n){return!1}}()?Object.assign:function(e,t){for(var r,o,c=s(e),u=1;u<arguments.length;u++){for(var d in r=Object(arguments[u]))n.call(r,d)&&(c[d]=r[d]);if(i){o=i(r);for(var h=0;h<o.length;h++)a.call(r,o[h])&&(c[o[h]]=r[o[h]])}}return c}},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]="number"===typeof e[r]?e[r]:e[r].val);return t},e.exports=t.default},function(e,t,r){e.exports=n;var i=r(49).EventEmitter;function n(){i.call(this)}r(24)(n,i),n.Readable=r(76),n.Writable=r(201),n.Duplex=r(202),n.Transform=r(203),n.PassThrough=r(204),n.Stream=n,n.prototype.pipe=function(e,t){var r=this;function n(t){e.writable&&!1===e.write(t)&&r.pause&&r.pause()}function a(){r.readable&&r.resume&&r.resume()}r.on("data",n),e.on("drain",a),e._isStdio||t&&!1===t.end||(r.on("end",o),r.on("close",c));var s=!1;function o(){s||(s=!0,e.end())}function c(){s||(s=!0,"function"===typeof e.destroy&&e.destroy())}function u(e){if(d(),0===i.listenerCount(this,"error"))throw e}function d(){r.removeListener("data",n),e.removeListener("drain",a),r.removeListener("end",o),r.removeListener("close",c),r.removeListener("error",u),e.removeListener("error",u),r.removeListener("end",d),r.removeListener("close",d),e.removeListener("close",d)}return r.on("error",u),e.on("error",u),r.on("end",d),r.on("close",d),e.on("close",d),e.emit("pipe",r),e}},function(e,t,r){"use strict";var i=r(199).Buffer,n=i.isEncoding||function(e){switch((e=""+e)&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(e){var t;switch(this.encoding=function(e){var t=function(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}(e);if("string"!==typeof t&&(i.isEncoding===n||!n(e)))throw new Error("Unknown encoding: "+e);return t||e}(e),this.encoding){case"utf16le":this.text=c,this.end=u,t=4;break;case"utf8":this.fillLast=o,t=4;break;case"base64":this.text=d,this.end=h,t=3;break;default:return this.write=l,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=i.allocUnsafe(t)}function s(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function o(e){var t=this.lastTotal-this.lastNeed,r=function(e,t,r){if(128!==(192&t[0]))return e.lastNeed=0,"\ufffd";if(e.lastNeed>1&&t.length>1){if(128!==(192&t[1]))return e.lastNeed=1,"\ufffd";if(e.lastNeed>2&&t.length>2&&128!==(192&t[2]))return e.lastNeed=2,"\ufffd"}}(this,e);return void 0!==r?r:this.lastNeed<=e.length?(e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(e.copy(this.lastChar,t,0,e.length),void(this.lastNeed-=e.length))}function c(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function u(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function d(e,t){var r=(e.length-t)%3;return 0===r?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function h(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function l(e){return e.toString(this.encoding)}function f(e){return e&&e.length?this.write(e):""}t.StringDecoder=a,a.prototype.write=function(e){if(0===e.length)return"";var t,r;if(this.lastNeed){if(void 0===(t=this.fillLast(e)))return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""},a.prototype.end=function(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\ufffd":t},a.prototype.text=function(e,t){var r=function(e,t,r){var i=t.length-1;if(i<r)return 0;var n=s(t[i]);if(n>=0)return n>0&&(e.lastNeed=n-1),n;if(--i<r||-2===n)return 0;if((n=s(t[i]))>=0)return n>0&&(e.lastNeed=n-2),n;if(--i<r||-2===n)return 0;if((n=s(t[i]))>=0)return n>0&&(2===n?n=0:e.lastNeed=n-3),n;return 0}(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)},a.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length}},function(e,t,r){"use strict";var i=r(213),n=r(214);function a(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){n.isString(e)&&(e=b(e));return e instanceof a?e.format():a.prototype.format.call(e)},t.Url=a;var s=/^([a-z0-9.+-]+:)/i,o=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),d=["'"].concat(u),h=["%","/","?",";","#"].concat(d),l=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},g=r(215);function b(e,t,r){if(e&&n.isObject(e)&&e instanceof a)return e;var i=new a;return i.parse(e,t,r),i}a.prototype.parse=function(e,t,r){if(!n.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var a=e.indexOf("?"),o=-1!==a&&a<e.indexOf("#")?"?":"#",u=e.split(o);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(o);if(b=b.trim(),!r&&1===e.split("#").length){var k=c.exec(b);if(k)return this.path=b,this.href=b,this.pathname=k[1],k[2]?(this.search=k[2],this.query=t?g.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var x=s.exec(b);if(x){var w=(x=x[0]).toLowerCase();this.protocol=w,b=b.substr(x.length)}if(r||x||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var _="//"===b.substr(0,2);!_||x&&m[x]||(b=b.substr(2),this.slashes=!0)}if(!m[x]&&(_||x&&!y[x])){for(var O,T,S=-1,C=0;C<l.length;C++){-1!==(I=b.indexOf(l[C]))&&(-1===S||I<S)&&(S=I)}-1!==(T=-1===S?b.lastIndexOf("@"):b.lastIndexOf("@",S))&&(O=b.slice(0,T),b=b.slice(T+1),this.auth=decodeURIComponent(O)),S=-1;for(C=0;C<h.length;C++){var I;-1!==(I=b.indexOf(h[C]))&&(-1===S||I<S)&&(S=I)}-1===S&&(S=b.length),this.host=b.slice(0,S),b=b.slice(S),this.parseHost(),this.hostname=this.hostname||"";var M="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!M)for(var E=this.hostname.split(/\./),A=(C=0,E.length);C<A;C++){var F=E[C];if(F&&!F.match(f)){for(var P="",B=0,R=F.length;B<R;B++)F.charCodeAt(B)>127?P+="x":P+=F[B];if(!P.match(f)){var V=E.slice(0,C),L=E.slice(C+1),D=F.match(p);D&&(V.push(D[1]),L.unshift(D[2])),L.length&&(b="/"+L.join(".")+b),this.hostname=V.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),M||(this.hostname=i.toASCII(this.hostname));var q=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+q,this.href+=this.host,M&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[w])for(C=0,A=d.length;C<A;C++){var G=d[C];if(-1!==b.indexOf(G)){var j=encodeURIComponent(G);j===G&&(j=escape(G)),b=b.split(G).join(j)}}var U=b.indexOf("#");-1!==U&&(this.hash=b.substr(U),b=b.slice(0,U));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=g.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){q=this.pathname||"";var z=this.search||"";this.path=q+z}return this.href=this.format(),this},a.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",i=this.hash||"",a=!1,s="";this.host?a=e+this.host:this.hostname&&(a=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(a+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=g.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==a?(a="//"+(a||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):a||(a=""),i&&"#"!==i.charAt(0)&&(i="#"+i),o&&"?"!==o.charAt(0)&&(o="?"+o),t+a+(r=r.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(o=o.replace("#","%23"))+i},a.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},a.prototype.resolveObject=function(e){if(n.isString(e)){var t=new a;t.parse(e,!1,!0),e=t}for(var r=new a,i=Object.keys(this),s=0;s<i.length;s++){var o=i[s];r[o]=this[o]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var d=c[u];"protocol"!==d&&(r[d]=e[d])}return y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!y[e.protocol]){for(var h=Object.keys(e),l=0;l<h.length;l++){var f=h[l];r[f]=e[f]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||m[e.protocol])r.pathname=e.pathname;else{for(var p=(e.pathname||"").split("/");p.length&&!(e.host=p.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var v=r.pathname||"",g=r.search||"";r.path=v+g}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var b=r.pathname&&"/"===r.pathname.charAt(0),k=e.host||e.pathname&&"/"===e.pathname.charAt(0),x=k||b||r.host&&e.pathname,w=x,_=r.pathname&&r.pathname.split("/")||[],O=(p=e.pathname&&e.pathname.split("/")||[],r.protocol&&!y[r.protocol]);if(O&&(r.hostname="",r.port=null,r.host&&(""===_[0]?_[0]=r.host:_.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===p[0]?p[0]=e.host:p.unshift(e.host)),e.host=null),x=x&&(""===p[0]||""===_[0])),k)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,_=p;else if(p.length)_||(_=[]),_.pop(),_=_.concat(p),r.search=e.search,r.query=e.query;else if(!n.isNullOrUndefined(e.search)){if(O)r.hostname=r.host=_.shift(),(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift());return r.search=e.search,r.query=e.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!_.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var T=_.slice(-1)[0],S=(r.host||e.host||_.length>1)&&("."===T||".."===T)||""===T,C=0,I=_.length;I>=0;I--)"."===(T=_[I])?_.splice(I,1):".."===T?(_.splice(I,1),C++):C&&(_.splice(I,1),C--);if(!x&&!w)for(;C--;C)_.unshift("..");!x||""===_[0]||_[0]&&"/"===_[0].charAt(0)||_.unshift(""),S&&"/"!==_.join("/").substr(-1)&&_.push("");var M,E=""===_[0]||_[0]&&"/"===_[0].charAt(0);O&&(r.hostname=r.host=E?"":_.length?_.shift():"",(M=!!(r.host&&r.host.indexOf("@")>0)&&r.host.split("@"))&&(r.auth=M.shift(),r.host=r.hostname=M.shift()));return(x=x||r.host&&_.length)&&!E&&_.unshift(""),_.length?r.pathname=_.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},a.prototype.parseHost=function(){var e=this.host,t=o.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t,r){"use strict";var i="undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint16Array&&"undefined"!==typeof Int32Array;function n(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!==typeof r)throw new TypeError(r+"must be non-object");for(var i in r)n(r,i)&&(e[i]=r[i])}}return e},t.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var a={arraySet:function(e,t,r,i,n){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+i),n);else for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){var t,r,i,n,a,s;for(i=0,t=0,r=e.length;t<r;t++)i+=e[t].length;for(s=new Uint8Array(i),n=0,t=0,r=e.length;t<r;t++)a=e[t],s.set(a,n),n+=a.length;return s}},s={arraySet:function(e,t,r,i,n){for(var a=0;a<i;a++)e[n+a]=t[r+a]},flattenChunks:function(e){return[].concat.apply([],e)}};t.setTyped=function(e){e?(t.Buf8=Uint8Array,t.Buf16=Uint16Array,t.Buf32=Int32Array,t.assign(t,a)):(t.Buf8=Array,t.Buf16=Array,t.Buf32=Array,t.assign(t,s))},t.setTyped(i)},function(e,t,r){"use strict";var i=t;i.base=r(250),i.short=r(251),i.mont=r(252),i.edwards=r(253)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"foxbit",name:"FoxBit",countries:["BR"],has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/87443320-01c0d080-c5fe-11ea-92e2-4ef56d32b026.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://foxbit.com.br/exchange",doc:"https://foxbit.com.br/api/"},comment:"Blinktrade API",api:{public:{get:["{currency}/ticker","{currency}/orderbook","{currency}/trades"]},private:{post:["D","F","U2","U4","U6","U18","U24","U26","U30","U34","U70"]}},markets:{"BTC/VEF":{id:"BTCVEF",symbol:"BTC/VEF",base:"BTC",quote:"VEF",brokerId:1,broker:"SurBitcoin"},"BTC/VND":{id:"BTCVND",symbol:"BTC/VND",base:"BTC",quote:"VND",brokerId:3,broker:"VBTC"},"BTC/BRL":{id:"BTCBRL",symbol:"BTC/BRL",base:"BTC",quote:"BRL",brokerId:4,broker:"FoxBit"},"BTC/PKR":{id:"BTCPKR",symbol:"BTC/PKR",base:"BTC",quote:"PKR",brokerId:8,broker:"UrduBit"},"BTC/CLP":{id:"BTCCLP",symbol:"BTC/CLP",base:"BTC",quote:"CLP",brokerId:9,broker:"ChileBit"}},options:{brokerId:"4"}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r={BalanceReqID:this.nonce()},e.next=6,this.privatePostU2(this.extend(r,t));case 6:if(n=e.sent,a=this.safeValue(n.Responses,this.options.brokerId),s={info:n},void 0!==a)for(o=Object.keys(this.currencies_by_id),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),u in a&&(h=this.account(),void 0!==(l=this.safeFloat(a,u+"_locked"))&&(l*=1e-8),void 0!==(f=this.safeFloat(a,u))&&(f*=1e-8),h.used=l,h.total=f,s[d]=h);return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={currency:n.quote,crypto_currency:n.base},e.next=8,this.publicGetCurrencyOrderbook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.quote,crypto_currency:n.base},e.next=7,this.publicGetCurrencyTicker(this.extend(a,r));case 7:return s=e.sent,o=this.milliseconds(),c=n.quote.toLowerCase(),u="vol_"+c,d=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"buy"),bidVolume:void 0,ask:this.safeFloat(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"vol"),quoteVolume:this.safeFloat(s,u),info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0;void 0!==t&&(n=t.symbol);var a=this.safeString(e,"side"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;return void 0!==s&&void 0!==o&&(c=o*s),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:a,order:void 0,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.quote,crypto_currency:s.base},e.next=9,this.publicGetCurrencyTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new l(this.id+" allows limit orders only");case 6:return c=this.market(t),u="buy"===n?"1":"2",d={ClOrdID:this.nonce(),Symbol:c.id,Side:u,OrdType:"2",Price:s,OrderQty:a,BrokerID:c.brokerId},e.next=11,this.privatePostD(this.extend(d,o));case 11:return h=e.sent,f=this.indexBy(h.Responses,"MsgType"),p=f[8],e.abrupt("return",{info:h,id:p.OrderID});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,r=n.length>2&&void 0!==n[2]?n[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostF(this.extend({ClOrdID:t},r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=this.extend({MsgType:e},o);a=this.json(u),n={APIKey:this.apiKey,Nonce:c,Signature:this.hmac(this.encode(c),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("Status"in(c=e.sent))){e.next=11;break}if(200===c.Status){e.next=11;break}throw new l(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";r.d(t,"a",(function(){return x}));var i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var n=function(){return(n=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.create;Object.create;var a=r(17),s=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function o(e){var t={};return e.replace(s,(function(e){var r=e.length;switch(e[0]){case"G":t.era=4===r?"long":5===r?"narrow":"short";break;case"y":t.year=2===r?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":t.month=["numeric","2-digit","short","long","narrow"][r-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":t.day=["numeric","2-digit"][r-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":t.weekday=4===r?"short":5===r?"narrow":"short";break;case"e":if(r<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"c":if(r<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");t.weekday=["short","long","narrow","short"][r-4];break;case"a":t.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":t.hourCycle="h12",t.hour=["numeric","2-digit"][r-1];break;case"H":t.hourCycle="h23",t.hour=["numeric","2-digit"][r-1];break;case"K":t.hourCycle="h11",t.hour=["numeric","2-digit"][r-1];break;case"k":t.hourCycle="h24",t.hour=["numeric","2-digit"][r-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":t.minute=["numeric","2-digit"][r-1];break;case"s":t.second=["numeric","2-digit"][r-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":t.timeZoneName=r<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""})),t}var c=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,u=/^(@+)?(\+|#+)?$/g,d=/(\*)(0+)|(#+)(0+)|(0+)/g,h=/^(0+)$/;function l(e){var t={};return e.replace(u,(function(e,r,i){return"string"!==typeof i?(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length):"+"===i?t.minimumSignificantDigits=r.length:"#"===r[0]?t.maximumSignificantDigits=r.length:(t.minimumSignificantDigits=r.length,t.maximumSignificantDigits=r.length+("string"===typeof i?i.length:0)),""})),t}function f(e){switch(e){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function p(e){var t;if("E"===e[0]&&"E"===e[1]?(t={notation:"engineering"},e=e.slice(2)):"E"===e[0]&&(t={notation:"scientific"},e=e.slice(1)),t){var r=e.slice(0,2);if("+!"===r?(t.signDisplay="always",e=e.slice(2)):"+?"===r&&(t.signDisplay="exceptZero",e=e.slice(2)),!h.test(e))throw new Error("Malformed concise eng/scientific notation");t.minimumIntegerDigits=e.length}return t}function v(e){var t=f(e);return t||{}}function m(e){for(var t={},r=0,i=e;r<i.length;r++){var a=i[r];switch(a.stem){case"percent":case"%":t.style="percent";continue;case"%x100":t.style="percent",t.scale=100;continue;case"currency":t.style="currency",t.currency=a.options[0];continue;case"group-off":case",_":t.useGrouping=!1;continue;case"precision-integer":case".":t.maximumFractionDigits=0;continue;case"measure-unit":case"unit":t.style="unit",t.unit=a.options[0].replace(/^(.*?)-/,"");continue;case"compact-short":case"K":t.notation="compact",t.compactDisplay="short";continue;case"compact-long":case"KK":t.notation="compact",t.compactDisplay="long";continue;case"scientific":t=n(n(n({},t),{notation:"scientific"}),a.options.reduce((function(e,t){return n(n({},e),v(t))}),{}));continue;case"engineering":t=n(n(n({},t),{notation:"engineering"}),a.options.reduce((function(e,t){return n(n({},e),v(t))}),{}));continue;case"notation-simple":t.notation="standard";continue;case"unit-width-narrow":t.currencyDisplay="narrowSymbol",t.unitDisplay="narrow";continue;case"unit-width-short":t.currencyDisplay="code",t.unitDisplay="short";continue;case"unit-width-full-name":t.currencyDisplay="name",t.unitDisplay="long";continue;case"unit-width-iso-code":t.currencyDisplay="symbol";continue;case"scale":t.scale=parseFloat(a.options[0]);continue;case"integer-width":if(a.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");a.options[0].replace(d,(function(e,r,i,n,a,s){if(r)t.minimumIntegerDigits=i.length;else{if(n&&a)throw new Error("We currently do not support maximum integer digits");if(s)throw new Error("We currently do not support exact integer digits")}return""}));continue}if(h.test(a.stem))t.minimumIntegerDigits=a.stem.length;else if(c.test(a.stem)){if(a.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");a.stem.replace(c,(function(e,r,i,n,a,s){return"*"===i?t.minimumFractionDigits=r.length:n&&"#"===n[0]?t.maximumFractionDigits=n.length:a&&s?(t.minimumFractionDigits=a.length,t.maximumFractionDigits=a.length+s.length):(t.minimumFractionDigits=r.length,t.maximumFractionDigits=r.length),""})),a.options.length&&(t=n(n({},t),l(a.options[0])))}else if(u.test(a.stem))t=n(n({},t),l(a.stem));else{var s=f(a.stem);s&&(t=n(n({},t),s));var o=p(a.stem);o&&(t=n(n({},t),o))}}return t}var y=function(e){function t(r,i,n,a){var s=e.call(this)||this;return s.message=r,s.expected=i,s.found=n,s.location=a,s.name="SyntaxError","function"===typeof Error.captureStackTrace&&Error.captureStackTrace(s,t),s}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(t,e),t.buildMessage=function(e,t){function r(e){return e.charCodeAt(0).toString(16).toUpperCase()}function i(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function n(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+r(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+r(e)}))}function a(e){switch(e.type){case"literal":return'"'+i(e.text)+'"';case"class":var t=e.parts.map((function(e){return Array.isArray(e)?n(e[0])+"-"+n(e[1]):n(e)}));return"["+(e.inverted?"^":"")+t+"]";case"any":return"any character";case"end":return"end of input";case"other":return e.description}}return"Expected "+function(e){var t,r,i=e.map(a);if(i.sort(),i.length>0){for(t=1,r=1;t<i.length;t++)i[t-1]!==i[t]&&(i[r]=i[t],r++);i.length=r}switch(i.length){case 1:return i[0];case 2:return i[0]+" or "+i[1];default:return i.slice(0,-1).join(", ")+", or "+i[i.length-1]}}(e)+" but "+(((s=t)?'"'+i(s)+'"':"end of input")+" found.");var s},t}(Error);var g=function(e,t){t=void 0!==t?t:{};var r,i={},s={start:Ke},c=Ke,u="<",d=Ne("<",!1),h=function(e){return e.join("")},l=Ne("#",!1),f=je("tagElement"),p=Ne("/>",!1),v=Ne(">",!1),g=Ne("</",!1),b=je("argumentElement"),k="{",x=Ne("{",!1),w="}",_=Ne("}",!1),O=je("numberSkeletonId"),T=/^['\/{}]/,S=Ge(["'","/","{","}"],!1,!1),C={type:"any"},I=je("numberSkeletonTokenOption"),M=Ne("/",!1),E=je("numberSkeletonToken"),A="::",F=Ne("::",!1),P=function(e){return bt.pop(),e.replace(/\s*$/,"")},B=",",R=Ne(",",!1),V="number",L=Ne("number",!1),D=function(e,t,r){return n({type:"number"===t?a.b.number:"date"===t?a.b.date:a.b.time,style:r&&r[2],value:e},xt())},q="'",N=Ne("'",!1),G=/^[^']/,j=Ge(["'"],!0,!1),U=/^[^a-zA-Z'{}]/,H=Ge([["a","z"],["A","Z"],"'","{","}"],!0,!1),z=/^[a-zA-Z]/,W=Ge([["a","z"],["A","Z"]],!1,!1),K="date",X=Ne("date",!1),Y="time",Z=Ne("time",!1),Q="plural",$=Ne("plural",!1),J="selectordinal",ee=Ne("selectordinal",!1),te="offset:",re=Ne("offset:",!1),ie="select",ne=Ne("select",!1),ae=Ne("=",!1),se=je("whitespace"),oe=/^[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,ce=Ge([["\t","\r"]," ","\x85","\xa0","\u1680",["\u2000","\u200a"],"\u2028","\u2029","\u202f","\u205f","\u3000"],!1,!1),ue=je("syntax pattern"),de=/^[!-\/:-@[-\^`{-~\xA1-\xA7\xA9\xAB\xAC\xAE\xB0\xB1\xB6\xBB\xBF\xD7\xF7\u2010-\u2027\u2030-\u203E\u2041-\u2053\u2055-\u205E\u2190-\u245F\u2500-\u2775\u2794-\u2BFF\u2E00-\u2E7F\u3001-\u3003\u3008-\u3020\u3030\uFD3E\uFD3F\uFE45\uFE46]/,he=Ge([["!","/"],[":","@"],["[","^"],"`",["{","~"],["\xa1","\xa7"],"\xa9","\xab","\xac","\xae","\xb0","\xb1","\xb6","\xbb","\xbf","\xd7","\xf7",["\u2010","\u2027"],["\u2030","\u203e"],["\u2041","\u2053"],["\u2055","\u205e"],["\u2190","\u245f"],["\u2500","\u2775"],["\u2794","\u2bff"],["\u2e00","\u2e7f"],["\u3001","\u3003"],["\u3008","\u3020"],"\u3030","\ufd3e","\ufd3f","\ufe45","\ufe46"],!1,!1),le=je("optional whitespace"),fe=je("number"),pe="-",ve=Ne("-",!1),me=(je("apostrophe"),je("double apostrophes")),ye="''",ge=Ne("''",!1),be=function(e){return"<"!==e&&"{"!==e&&!(kt()&&"#"===e)&&!(bt.length>1&&"}"===e)},ke=Ne("\n",!1),xe=je("argNameOrNumber"),we=je("validTag"),_e=je("argNumber"),Oe=Ne("0",!1),Te=/^[1-9]/,Se=Ge([["1","9"]],!1,!1),Ce=/^[0-9]/,Ie=Ge([["0","9"]],!1,!1),Me=je("argName"),Ee=je("tagName"),Ae=0,Fe=0,Pe=[{line:1,column:1}],Be=0,Re=[],Ve=0;if(void 0!==t.startRule){if(!(t.startRule in s))throw new Error("Can't start parsing from rule \""+t.startRule+'".');c=s[t.startRule]}function Le(){return e.substring(Fe,Ae)}function De(){return He(Fe,Ae)}function qe(e,t){throw function(e,t){return new y(e,[],"",t)}(e,t=void 0!==t?t:He(Fe,Ae))}function Ne(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ge(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function je(e){return{type:"other",description:e}}function Ue(t){var r,i=Pe[t];if(i)return i;for(r=t-1;!Pe[r];)r--;for(i={line:(i=Pe[r]).line,column:i.column};r<t;)10===e.charCodeAt(r)?(i.line++,i.column=1):i.column++,r++;return Pe[t]=i,i}function He(e,t){var r=Ue(e),i=Ue(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:i.line,column:i.column}}}function ze(e){Ae<Be||(Ae>Be&&(Be=Ae,Re=[]),Re.push(e))}function We(e,t,r){return new y(y.buildMessage(e,t),e,t,r)}function Ke(){return Xe()}function Xe(){var e,t;for(e=[],t=Ye();t!==i;)e.push(t),t=Ye();return e}function Ye(){var t,r;return t=Ae,Fe=Ae,(!wt?void 0:i)!==i&&(r=function(){var e,t,r,s;Ve++,(e=$e())===i&&(e=Ae,(t=Je())!==i&&(r=Xe())!==i&&(s=et())!==i?(Fe=e,c=r,(o=t)!==(u=s)&&qe('Mismatch tag "'+o+'" !== "'+u+'"',De()),e=t=n({type:a.b.tag,value:o,children:c},xt())):(Ae=e,e=i));var o,c,u;Ve--,e===i&&(t=i,0===Ve&&ze(f));return e}())!==i?(Fe=t,t=r):(Ae=t,t=i),t===i&&(t=function(){var e,t;e=Ae,(t=Ze())!==i&&(Fe=e,r=t,t=n({type:a.b.literal,value:r},xt()));var r;return e=t}())===i&&(t=function(){var t,r,s,o;Ve++,t=Ae,123===e.charCodeAt(Ae)?(r=k,Ae++):(r=i,0===Ve&&ze(x));r!==i&&dt()!==i&&(s=vt())!==i&&dt()!==i?(125===e.charCodeAt(Ae)?(o=w,Ae++):(o=i,0===Ve&&ze(_)),o!==i?(Fe=t,c=s,t=r=n({type:a.b.argument,value:c},xt())):(Ae=t,t=i)):(Ae=t,t=i);var c;Ve--,t===i&&(r=i,0===Ve&&ze(b));return t}())===i&&(t=function(){var t;(t=function(){var t,r,s,o,c,u,d,h,l;t=Ae,123===e.charCodeAt(Ae)?(r=k,Ae++):(r=i,0===Ve&&ze(x));r!==i&&dt()!==i&&(s=vt())!==i&&dt()!==i?(44===e.charCodeAt(Ae)?(o=B,Ae++):(o=i,0===Ve&&ze(R)),o!==i&&dt()!==i?(e.substr(Ae,6)===V?(c=V,Ae+=6):(c=i,0===Ve&&ze(L)),c!==i&&dt()!==i?(u=Ae,44===e.charCodeAt(Ae)?(d=B,Ae++):(d=i,0===Ve&&ze(R)),d!==i&&(h=dt())!==i&&(l=function(){var t,r,s;t=Ae,e.substr(Ae,2)===A?(r=A,Ae+=2):(r=i,0===Ve&&ze(F));r!==i&&(s=function(){var e,t,r;if(e=Ae,t=[],(r=it())!==i)for(;r!==i;)t.push(r),r=it();else t=i;t!==i&&(Fe=e,s=t,t=n({type:a.a.number,tokens:s,parsedOptions:_t?m(s):{}},xt()));var s;return e=t}())!==i?(Fe=t,t=r=s):(Ae=t,t=i);t===i&&(t=Ae,Fe=Ae,bt.push("numberArgStyle"),(r=(r=!0)?void 0:i)!==i&&(s=Ze())!==i?(Fe=t,t=r=P(s)):(Ae=t,t=i));return t}())!==i?u=d=[d,h,l]:(Ae=u,u=i),u===i&&(u=null),u!==i&&(d=dt())!==i?(125===e.charCodeAt(Ae)?(h=w,Ae++):(h=i,0===Ve&&ze(_)),h!==i?(Fe=t,t=r=D(s,c,u)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i);return t}())===i&&(t=function(){var t,r,s,c,u,d,h,l,f;t=Ae,123===e.charCodeAt(Ae)?(r=k,Ae++):(r=i,0===Ve&&ze(x));r!==i&&dt()!==i&&(s=vt())!==i&&dt()!==i?(44===e.charCodeAt(Ae)?(c=B,Ae++):(c=i,0===Ve&&ze(R)),c!==i&&dt()!==i?(e.substr(Ae,4)===K?(u=K,Ae+=4):(u=i,0===Ve&&ze(X)),u===i&&(e.substr(Ae,4)===Y?(u=Y,Ae+=4):(u=i,0===Ve&&ze(Z))),u!==i&&dt()!==i?(d=Ae,44===e.charCodeAt(Ae)?(h=B,Ae++):(h=i,0===Ve&&ze(R)),h!==i&&(l=dt())!==i&&(f=function(){var t,r,s;t=Ae,e.substr(Ae,2)===A?(r=A,Ae+=2):(r=i,0===Ve&&ze(F));r!==i&&(s=function(){var t,r,s,c;t=Ae,r=Ae,s=[],(c=nt())===i&&(c=at());if(c!==i)for(;c!==i;)s.push(c),(c=nt())===i&&(c=at());else s=i;r=s!==i?e.substring(r,Ae):s;r!==i&&(Fe=t,u=r,r=n({type:a.a.dateTime,pattern:u,parsedOptions:_t?o(u):{}},xt()));var u;return t=r}())!==i?(Fe=t,t=r=s):(Ae=t,t=i);t===i&&(t=Ae,Fe=Ae,bt.push("dateOrTimeArgStyle"),(r=(r=!0)?void 0:i)!==i&&(s=Ze())!==i?(Fe=t,t=r=P(s)):(Ae=t,t=i));return t}())!==i?d=h=[h,l,f]:(Ae=d,d=i),d===i&&(d=null),d!==i&&(h=dt())!==i?(125===e.charCodeAt(Ae)?(l=w,Ae++):(l=i,0===Ve&&ze(_)),l!==i?(Fe=t,t=r=D(s,u,d)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i);return t}());return t}())===i&&(t=function(){var t,r,s,o,c,u,d,h,l,f,p;t=Ae,123===e.charCodeAt(Ae)?(r=k,Ae++):(r=i,0===Ve&&ze(x));if(r!==i)if(dt()!==i)if((s=vt())!==i)if(dt()!==i)if(44===e.charCodeAt(Ae)?(o=B,Ae++):(o=i,0===Ve&&ze(R)),o!==i)if(dt()!==i)if(e.substr(Ae,6)===Q?(c=Q,Ae+=6):(c=i,0===Ve&&ze($)),c===i&&(e.substr(Ae,13)===J?(c=J,Ae+=13):(c=i,0===Ve&&ze(ee))),c!==i)if(dt()!==i)if(44===e.charCodeAt(Ae)?(u=B,Ae++):(u=i,0===Ve&&ze(R)),u!==i)if(dt()!==i)if(d=Ae,e.substr(Ae,7)===te?(h=te,Ae+=7):(h=i,0===Ve&&ze(re)),h!==i&&(l=dt())!==i&&(f=ht())!==i?d=h=[h,l,f]:(Ae=d,d=i),d===i&&(d=null),d!==i)if((h=dt())!==i){if(l=[],(f=ot())!==i)for(;f!==i;)l.push(f),f=ot();else l=i;l!==i&&(f=dt())!==i?(125===e.charCodeAt(Ae)?(p=w,Ae++):(p=i,0===Ve&&ze(_)),p!==i?(Fe=t,t=r=function(e,t,r,i){return n({type:a.b.plural,pluralType:"plural"===t?"cardinal":"ordinal",value:e,offset:r?r[2]:0,options:i.reduce((function(e,t){var r=t.id,i=t.value,n=t.location;return r in e&&qe('Duplicate option "'+r+'" in plural element: "'+Le()+'"',De()),e[r]={value:i,location:n},e}),{})},xt())}(s,c,d,l)):(Ae=t,t=i)):(Ae=t,t=i)}else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;return t}())===i&&(t=function(){var t,r,s,o,c,u,d,h,l;t=Ae,123===e.charCodeAt(Ae)?(r=k,Ae++):(r=i,0===Ve&&ze(x));if(r!==i)if(dt()!==i)if((s=vt())!==i)if(dt()!==i)if(44===e.charCodeAt(Ae)?(o=B,Ae++):(o=i,0===Ve&&ze(R)),o!==i)if(dt()!==i)if(e.substr(Ae,6)===ie?(c=ie,Ae+=6):(c=i,0===Ve&&ze(ne)),c!==i)if(dt()!==i)if(44===e.charCodeAt(Ae)?(u=B,Ae++):(u=i,0===Ve&&ze(R)),u!==i)if(dt()!==i){if(d=[],(h=st())!==i)for(;h!==i;)d.push(h),h=st();else d=i;d!==i&&(h=dt())!==i?(125===e.charCodeAt(Ae)?(l=w,Ae++):(l=i,0===Ve&&ze(_)),l!==i?(Fe=t,t=r=function(e,t){return n({type:a.b.select,value:e,options:t.reduce((function(e,t){var r=t.id,i=t.value,n=t.location;return r in e&&qe('Duplicate option "'+r+'" in select element: "'+Le()+'"',De()),e[r]={value:i,location:n},e}),{})},xt())}(s,d)):(Ae=t,t=i)):(Ae=t,t=i)}else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;else Ae=t,t=i;return t}())===i&&(t=function(){var t,r;t=Ae,35===e.charCodeAt(Ae)?(r="#",Ae++):(r=i,0===Ve&&ze(l));r!==i&&(Fe=t,r=n({type:a.b.pound},xt()));return t=r}()),t}function Ze(){var t,r,n,a;if(t=Ae,Fe=Ae,(r=(r=wt)?void 0:i)!==i){if(n=[],(a=lt())===i&&(a=ft())===i&&(a=pt())===i&&(60===e.charCodeAt(Ae)?(a=u,Ae++):(a=i,0===Ve&&ze(d))),a!==i)for(;a!==i;)n.push(a),(a=lt())===i&&(a=ft())===i&&(a=pt())===i&&(60===e.charCodeAt(Ae)?(a=u,Ae++):(a=i,0===Ve&&ze(d)));else n=i;n!==i?(Fe=t,t=r=h(n)):(Ae=t,t=i)}else Ae=t,t=i;if(t===i){if(t=Ae,r=[],(n=lt())===i&&(n=ft())===i&&(n=pt())===i&&(n=Qe()),n!==i)for(;n!==i;)r.push(n),(n=lt())===i&&(n=ft())===i&&(n=pt())===i&&(n=Qe());else r=i;r!==i&&(Fe=t,r=h(r)),t=r}return t}function Qe(){var t,r,n;return t=Ae,r=Ae,Ve++,(n=Je())===i&&(n=et())===i&&(n=$e()),Ve--,n===i?r=void 0:(Ae=r,r=i),r!==i?(60===e.charCodeAt(Ae)?(n=u,Ae++):(n=i,0===Ve&&ze(d)),n!==i?(Fe=t,t=r="<"):(Ae=t,t=i)):(Ae=t,t=i),t}function $e(){var t,r,s,o,c,h,l;return t=Ae,r=Ae,60===e.charCodeAt(Ae)?(s=u,Ae++):(s=i,0===Ve&&ze(d)),s!==i&&(o=mt())!==i&&(c=dt())!==i?("/>"===e.substr(Ae,2)?(h="/>",Ae+=2):(h=i,0===Ve&&ze(p)),h!==i?r=s=[s,o,c,h]:(Ae=r,r=i)):(Ae=r,r=i),r!==i&&(Fe=t,l=r,r=n({type:a.b.literal,value:l.join("")},xt())),t=r}function Je(){var t,r,n,a;return t=Ae,60===e.charCodeAt(Ae)?(r=u,Ae++):(r=i,0===Ve&&ze(d)),r!==i&&(n=mt())!==i?(62===e.charCodeAt(Ae)?(a=">",Ae++):(a=i,0===Ve&&ze(v)),a!==i?(Fe=t,t=r=n):(Ae=t,t=i)):(Ae=t,t=i),t}function et(){var t,r,n,a;return t=Ae,"</"===e.substr(Ae,2)?(r="</",Ae+=2):(r=i,0===Ve&&ze(g)),r!==i&&(n=mt())!==i?(62===e.charCodeAt(Ae)?(a=">",Ae++):(a=i,0===Ve&&ze(v)),a!==i?(Fe=t,t=r=n):(Ae=t,t=i)):(Ae=t,t=i),t}function tt(){var t,r,n,a,s;if(Ve++,t=Ae,r=[],n=Ae,a=Ae,Ve++,(s=ct())===i&&(T.test(e.charAt(Ae))?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(S))),Ve--,s===i?a=void 0:(Ae=a,a=i),a!==i?(e.length>Ae?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(C)),s!==i?n=a=[a,s]:(Ae=n,n=i)):(Ae=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Ae,a=Ae,Ve++,(s=ct())===i&&(T.test(e.charAt(Ae))?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(S))),Ve--,s===i?a=void 0:(Ae=a,a=i),a!==i?(e.length>Ae?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(C)),s!==i?n=a=[a,s]:(Ae=n,n=i)):(Ae=n,n=i);else r=i;return t=r!==i?e.substring(t,Ae):r,Ve--,t===i&&(r=i,0===Ve&&ze(O)),t}function rt(){var t,r,n;return Ve++,t=Ae,47===e.charCodeAt(Ae)?(r="/",Ae++):(r=i,0===Ve&&ze(M)),r!==i&&(n=tt())!==i?(Fe=t,t=r=n):(Ae=t,t=i),Ve--,t===i&&(r=i,0===Ve&&ze(I)),t}function it(){var e,t,r,n;if(Ve++,e=Ae,dt()!==i)if((t=tt())!==i){for(r=[],n=rt();n!==i;)r.push(n),n=rt();r!==i?(Fe=e,e=function(e,t){return{stem:e,options:t}}(t,r)):(Ae=e,e=i)}else Ae=e,e=i;else Ae=e,e=i;return Ve--,e===i&&(i,0===Ve&&ze(E)),e}function nt(){var t,r,n,a;if(t=Ae,39===e.charCodeAt(Ae)?(r=q,Ae++):(r=i,0===Ve&&ze(N)),r!==i){if(n=[],(a=lt())===i&&(G.test(e.charAt(Ae))?(a=e.charAt(Ae),Ae++):(a=i,0===Ve&&ze(j))),a!==i)for(;a!==i;)n.push(a),(a=lt())===i&&(G.test(e.charAt(Ae))?(a=e.charAt(Ae),Ae++):(a=i,0===Ve&&ze(j)));else n=i;n!==i?(39===e.charCodeAt(Ae)?(a=q,Ae++):(a=i,0===Ve&&ze(N)),a!==i?t=r=[r,n,a]:(Ae=t,t=i)):(Ae=t,t=i)}else Ae=t,t=i;if(t===i)if(t=[],(r=lt())===i&&(U.test(e.charAt(Ae))?(r=e.charAt(Ae),Ae++):(r=i,0===Ve&&ze(H))),r!==i)for(;r!==i;)t.push(r),(r=lt())===i&&(U.test(e.charAt(Ae))?(r=e.charAt(Ae),Ae++):(r=i,0===Ve&&ze(H)));else t=i;return t}function at(){var t,r;if(t=[],z.test(e.charAt(Ae))?(r=e.charAt(Ae),Ae++):(r=i,0===Ve&&ze(W)),r!==i)for(;r!==i;)t.push(r),z.test(e.charAt(Ae))?(r=e.charAt(Ae),Ae++):(r=i,0===Ve&&ze(W));else t=i;return t}function st(){var t,r,a,s,o,c,u;return t=Ae,dt()!==i&&(r=gt())!==i&&dt()!==i?(123===e.charCodeAt(Ae)?(a=k,Ae++):(a=i,0===Ve&&ze(x)),a!==i?(Fe=Ae,bt.push("select"),(!0?void 0:i)!==i&&(s=Xe())!==i?(125===e.charCodeAt(Ae)?(o=w,Ae++):(o=i,0===Ve&&ze(_)),o!==i?(Fe=t,c=r,u=s,bt.pop(),t=n({id:c,value:u},xt())):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i),t}function ot(){var t,r,a,s,o,c,u;return t=Ae,dt()!==i&&(r=function(){var t,r,n,a;return t=Ae,r=Ae,61===e.charCodeAt(Ae)?(n="=",Ae++):(n=i,0===Ve&&ze(ae)),n!==i&&(a=ht())!==i?r=n=[n,a]:(Ae=r,r=i),(t=r!==i?e.substring(t,Ae):r)===i&&(t=gt()),t}())!==i&&dt()!==i?(123===e.charCodeAt(Ae)?(a=k,Ae++):(a=i,0===Ve&&ze(x)),a!==i?(Fe=Ae,bt.push("plural"),(!0?void 0:i)!==i&&(s=Xe())!==i?(125===e.charCodeAt(Ae)?(o=w,Ae++):(o=i,0===Ve&&ze(_)),o!==i?(Fe=t,c=r,u=s,bt.pop(),t=n({id:c,value:u},xt())):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i)):(Ae=t,t=i),t}function ct(){var t;return Ve++,oe.test(e.charAt(Ae))?(t=e.charAt(Ae),Ae++):(t=i,0===Ve&&ze(ce)),Ve--,t===i&&(i,0===Ve&&ze(se)),t}function ut(){var t;return Ve++,de.test(e.charAt(Ae))?(t=e.charAt(Ae),Ae++):(t=i,0===Ve&&ze(he)),Ve--,t===i&&(i,0===Ve&&ze(ue)),t}function dt(){var t,r,n;for(Ve++,t=Ae,r=[],n=ct();n!==i;)r.push(n),n=ct();return t=r!==i?e.substring(t,Ae):r,Ve--,t===i&&(r=i,0===Ve&&ze(le)),t}function ht(){var t,r,n,a,s;return Ve++,t=Ae,45===e.charCodeAt(Ae)?(r="-",Ae++):(r=i,0===Ve&&ze(ve)),r===i&&(r=null),r!==i&&(n=yt())!==i?(Fe=t,a=r,t=r=(s=n)?a?-s:s:0):(Ae=t,t=i),Ve--,t===i&&(r=i,0===Ve&&ze(fe)),t}function lt(){var t,r;return Ve++,t=Ae,e.substr(Ae,2)===ye?(r=ye,Ae+=2):(r=i,0===Ve&&ze(ge)),r!==i&&(Fe=t,r="'"),Ve--,(t=r)===i&&(r=i,0===Ve&&ze(me)),t}function ft(){var t,r,n,a,s,o;if(t=Ae,39===e.charCodeAt(Ae)?(r=q,Ae++):(r=i,0===Ve&&ze(N)),r!==i)if((n=function(){var t,r,n,a;t=Ae,r=Ae,e.length>Ae?(n=e.charAt(Ae),Ae++):(n=i,0===Ve&&ze(C));n!==i?(Fe=Ae,(a=(a="<"===(s=n)||">"===s||"{"===s||"}"===s||kt()&&"#"===s)?void 0:i)!==i?r=n=[n,a]:(Ae=r,r=i)):(Ae=r,r=i);var s;t=r!==i?e.substring(t,Ae):r;return t}())!==i){for(a=Ae,s=[],e.substr(Ae,2)===ye?(o=ye,Ae+=2):(o=i,0===Ve&&ze(ge)),o===i&&(G.test(e.charAt(Ae))?(o=e.charAt(Ae),Ae++):(o=i,0===Ve&&ze(j)));o!==i;)s.push(o),e.substr(Ae,2)===ye?(o=ye,Ae+=2):(o=i,0===Ve&&ze(ge)),o===i&&(G.test(e.charAt(Ae))?(o=e.charAt(Ae),Ae++):(o=i,0===Ve&&ze(j)));(a=s!==i?e.substring(a,Ae):s)!==i?(39===e.charCodeAt(Ae)?(s=q,Ae++):(s=i,0===Ve&&ze(N)),s===i&&(s=null),s!==i?(Fe=t,t=r=n+a.replace("''","'")):(Ae=t,t=i)):(Ae=t,t=i)}else Ae=t,t=i;else Ae=t,t=i;return t}function pt(){var t,r,n,a;return t=Ae,r=Ae,e.length>Ae?(n=e.charAt(Ae),Ae++):(n=i,0===Ve&&ze(C)),n!==i?(Fe=Ae,(a=(a=be(n))?void 0:i)!==i?r=n=[n,a]:(Ae=r,r=i)):(Ae=r,r=i),r===i&&(10===e.charCodeAt(Ae)?(r="\n",Ae++):(r=i,0===Ve&&ze(ke))),t=r!==i?e.substring(t,Ae):r}function vt(){var t,r;return Ve++,t=Ae,(r=yt())===i&&(r=gt()),t=r!==i?e.substring(t,Ae):r,Ve--,t===i&&(r=i,0===Ve&&ze(xe)),t}function mt(){var t,r;return Ve++,t=Ae,(r=yt())===i&&(r=function(){var t,r,n,a,s;Ve++,t=Ae,r=[],45===e.charCodeAt(Ae)?(n=pe,Ae++):(n=i,0===Ve&&ze(ve));n===i&&(n=Ae,a=Ae,Ve++,(s=ct())===i&&(s=ut()),Ve--,s===i?a=void 0:(Ae=a,a=i),a!==i?(e.length>Ae?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(C)),s!==i?n=a=[a,s]:(Ae=n,n=i)):(Ae=n,n=i));if(n!==i)for(;n!==i;)r.push(n),45===e.charCodeAt(Ae)?(n=pe,Ae++):(n=i,0===Ve&&ze(ve)),n===i&&(n=Ae,a=Ae,Ve++,(s=ct())===i&&(s=ut()),Ve--,s===i?a=void 0:(Ae=a,a=i),a!==i?(e.length>Ae?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(C)),s!==i?n=a=[a,s]:(Ae=n,n=i)):(Ae=n,n=i));else r=i;t=r!==i?e.substring(t,Ae):r;Ve--,t===i&&(r=i,0===Ve&&ze(Ee));return t}()),t=r!==i?e.substring(t,Ae):r,Ve--,t===i&&(r=i,0===Ve&&ze(we)),t}function yt(){var t,r,n,a,s;if(Ve++,t=Ae,48===e.charCodeAt(Ae)?(r="0",Ae++):(r=i,0===Ve&&ze(Oe)),r!==i&&(Fe=t,r=0),(t=r)===i){if(t=Ae,r=Ae,Te.test(e.charAt(Ae))?(n=e.charAt(Ae),Ae++):(n=i,0===Ve&&ze(Se)),n!==i){for(a=[],Ce.test(e.charAt(Ae))?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(Ie));s!==i;)a.push(s),Ce.test(e.charAt(Ae))?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(Ie));a!==i?r=n=[n,a]:(Ae=r,r=i)}else Ae=r,r=i;r!==i&&(Fe=t,r=parseInt(r.join(""),10)),t=r}return Ve--,t===i&&(r=i,0===Ve&&ze(_e)),t}function gt(){var t,r,n,a,s;if(Ve++,t=Ae,r=[],n=Ae,a=Ae,Ve++,(s=ct())===i&&(s=ut()),Ve--,s===i?a=void 0:(Ae=a,a=i),a!==i?(e.length>Ae?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(C)),s!==i?n=a=[a,s]:(Ae=n,n=i)):(Ae=n,n=i),n!==i)for(;n!==i;)r.push(n),n=Ae,a=Ae,Ve++,(s=ct())===i&&(s=ut()),Ve--,s===i?a=void 0:(Ae=a,a=i),a!==i?(e.length>Ae?(s=e.charAt(Ae),Ae++):(s=i,0===Ve&&ze(C)),s!==i?n=a=[a,s]:(Ae=n,n=i)):(Ae=n,n=i);else r=i;return t=r!==i?e.substring(t,Ae):r,Ve--,t===i&&(r=i,0===Ve&&ze(Me)),t}var bt=["root"];function kt(){return"plural"===bt[bt.length-1]}function xt(){return t&&t.captureLocation?{location:De()}:{}}var wt=t&&t.ignoreTag,_t=t&&t.shouldParseSkeleton;if((r=c())!==i&&Ae===e.length)return r;throw r!==i&&Ae<e.length&&ze({type:"end"}),We(Re,Be<e.length?e.charAt(Be):null,Be<e.length?He(Be,Be+1):He(Be,Be))},b=/(^|[^\\])#/g;function k(e){e.forEach((function(e){(Object(a.i)(e)||Object(a.k)(e))&&Object.keys(e.options).forEach((function(t){for(var r,i=e.options[t],n=-1,s=void 0,o=0;o<i.value.length;o++){var c=i.value[o];if(Object(a.f)(c)&&b.test(c.value)){n=o,s=c;break}}if(s){var u=s.value.replace(b,"$1{"+e.value+", number}"),d=g(u);(r=i.value).splice.apply(r,function(e,t){for(var r=0,i=t.length,n=e.length;r<i;r++,n++)e[n]=t[r];return e}([n,1],d))}k(i.value)}))}))}function x(e,t){t=n({normalizeHashtagInPlural:!0,shouldParseSkeleton:!0},t||{});var r=g(e,t);return t.normalizeHashtagInPlural&&k(r),r}},function(e,t,r){"use strict";r.d(t,"a",(function(){return n}));var i=r(52);function n(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(i.a)(e,t):void 0}}},function(e,t,r){"use strict";r.d(t,"b",(function(){return a})),r.d(t,"a",(function(){return s}));r(20);var i=r(1);r(83),r(26);var n=i.createContext(null),a=(n.Consumer,n.Provider),s=n},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=0);return t},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t,r,n,a,s,o){var c=r+(-a*(t-n)+-s*r)*e,u=t+c*e;if(Math.abs(c)<o&&Math.abs(u-n)<o)return i[0]=n,i[1]=0,i;return i[0]=u,i[1]=c,i};var i=[0,0];e.exports=t.default},function(e,t,r){(function(t){(function(){var r,i,n;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(r()-n)/1e6},i=t.hrtime,n=(r=function(){var e;return 1e9*(e=i())[0]+e[1]})()):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,r(23))},function(e,t,r){(function(t){for(var i=r(160),n="undefined"===typeof window?t:window,a=["moz","webkit"],s="AnimationFrame",o=n["request"+s],c=n["cancel"+s]||n["cancelRequest"+s],u=0;!o&&u<a.length;u++)o=n[a[u]+"Request"+s],c=n[a[u]+"Cancel"+s]||n[a[u]+"CancelRequest"+s];if(!o||!c){var d=0,h=0,l=[];o=function(e){if(0===l.length){var t=i(),r=Math.max(0,16.666666666666668-(t-d));d=r+t,setTimeout((function(){var e=l.slice(0);l.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(d)}catch(r){setTimeout((function(){throw r}),0)}}),Math.round(r))}return l.push({handle:++h,callback:e,cancelled:!1}),h},c=function(e){for(var t=0;t<l.length;t++)l[t].handle===e&&(l[t].cancelled=!0)}}e.exports=function(e){return o.call(n,e)},e.exports.cancel=function(){c.apply(n,arguments)},e.exports.polyfill=function(e){e||(e=n),e.requestAnimationFrame=o,e.cancelAnimationFrame=c}}).call(this,r(19))},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t,r){for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(0!==r[i])return!1;var n="number"===typeof t[i]?t[i]:t[i].val;if(e[i]!==n)return!1}return!0},e.exports=t.default},function(e,t,r){"use strict";var i=r(169);e.exports=Function.prototype.bind||i},function(e,t,r){"use strict";var i=r(71),n=r(90),a=n("%Function.prototype.apply%"),s=n("%Function.prototype.call%"),o=n("%Reflect.apply%",!0)||i.call(s,a),c=n("%Object.getOwnPropertyDescriptor%",!0),u=n("%Object.defineProperty%",!0),d=n("%Math.max%");if(u)try{u({},"a",{value:1})}catch(l){u=null}e.exports=function(e){var t=o(i,s,arguments);if(c&&u){var r=c(t,"length");r.configurable&&u(t,"length",{value:1+d(0,e.length-(arguments.length-1))})}return t};var h=function(){return o(i,a,arguments)};u?u(e.exports,"apply",{value:h}):e.exports.apply=h},function(e,t,r){var i=r(96);e.exports=function(e,t){if(e){if("string"===typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}},function(e,t,r){"use strict";e.exports={uuid:function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},uuid22:function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+1e3+4e3+8e5).replace(/[018]/g,e)},unCamelCase:function(e){return e.match(/^[A-Z0-9_]+$/)?e:e.replace(/[a-z0-9][A-Z]/g,(function(e){return e[0]+"_"+e[1]})).replace(/[A-Z0-9][A-Z0-9][a-z]/g,(function(e){return e[0]+"_"+e[1]+e[2]})).toLowerCase()},capitalize:function(e){return e.length?e.charAt(0).toUpperCase()+e.slice(1):e},strip:function(e){return e.replace(/^\s+|\s+$/g,"")}}},function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},function(e,t,r){(t=e.exports=r(100)).Stream=t,t.Readable=t,t.Writable=r(77),t.Duplex=r(36),t.Transform=r(105),t.PassThrough=r(200)},function(e,t,r){"use strict";(function(t,i,n){var a=r(33);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=g;var o,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:a.nextTick;g.WritableState=y;var u=Object.create(r(28));u.inherits=r(24);var d={deprecate:r(104)},h=r(101),l=r(42).Buffer,f=n.Uint8Array||function(){};var p,v=r(102);function m(){}function y(e,t){o=o||r(36),e=e||{};var i=t instanceof o;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,u=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(u||0===u)?u:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(a.nextTick(n,i),a.nextTick(O,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),O(e,t))}(e,r,i,t,n);else{var s=w(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||x(e,r),i?c(k,e,r,s,n):k(e,r,s,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function g(e){if(o=o||r(36),!p.call(g,this)&&!(this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),h.call(this)}function b(e,t,r,i,n,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function k(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),O(e,t)}function x(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,c=!0;r;)n[o]=r,r.isBuf||(c=!1),r=r.next,o+=1;n.allBuffers=c,b(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,d=r.encoding,h=r.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,d,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var r=w(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(g,h),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):p=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,r){var i,n=this._writableState,s=!1,o=!n.objectMode&&(i=e,l.isBuffer(i)||i instanceof f);return o&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=m),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),a.nextTick(t,r)}(this,r):(o||function(e,t,r,i){var n=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),a.nextTick(i,s),n=!1),n}(this,n,e,r))&&(n.pendingcb++,s=function(e,t,r,i,n,a){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=l.from(t,r));return t}(t,i,n);i!==s&&(r=!0,n="buffer",i=s)}var o=t.objectMode?1:i.length;t.length+=o;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,i,n,a);return c}(this,n,o,e,t,r)),s},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,r){var i=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?a.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=v.destroy,g.prototype._undestroy=v.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(23),r(103).setImmediate,r(19))},function(e,t,r){(function(e){var i=r(205),n=r(107),a=r(211),s=r(212),o=r(59),c=t;c.request=function(t,r){t="string"===typeof t?o.parse(t):a(t);var n=-1===e.location.protocol.search(/^https?:$/)?"http:":"",s=t.protocol||n,c=t.hostname||t.host,u=t.port,d=t.path||"/";c&&-1!==c.indexOf(":")&&(c="["+c+"]"),t.url=(c?s+"//"+c:"")+(u?":"+u:"")+d,t.method=(t.method||"GET").toUpperCase(),t.headers=t.headers||{};var h=new i(t);return r&&h.on("response",r),h},c.get=function(e,t){var r=c.request(e,t);return r.end(),r},c.ClientRequest=i,c.IncomingMessage=n.IncomingMessage,c.Agent=function(){},c.Agent.defaultMaxSockets=4,c.globalAgent=new c.Agent,c.STATUS_CODES=s,c.METHODS=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"]}).call(this,r(19))},function(e,t,r){"use strict";(function(t){var i=r(55);function n(e,t){if(e===t)return 0;for(var r=e.length,i=t.length,n=0,a=Math.min(r,i);n<a;++n)if(e[n]!==t[n]){r=e[n],i=t[n];break}return r<i?-1:i<r?1:0}function a(e){return t.Buffer&&"function"===typeof t.Buffer.isBuffer?t.Buffer.isBuffer(e):!(null==e||!e._isBuffer)}var s=r(115),o=Object.prototype.hasOwnProperty,c=Array.prototype.slice,u="foo"===function(){}.name;function d(e){return Object.prototype.toString.call(e)}function h(e){return!a(e)&&("function"===typeof t.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):!!e&&(e instanceof DataView||!!(e.buffer&&e.buffer instanceof ArrayBuffer))))}var l=e.exports=g,f=/\s*function\s+([^\(\s]*)\s*/;function p(e){if(s.isFunction(e)){if(u)return e.name;var t=e.toString().match(f);return t&&t[1]}}function v(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function m(e){if(u||!s.isFunction(e))return s.inspect(e);var t=p(e);return"[Function"+(t?": "+t:"")+"]"}function y(e,t,r,i,n){throw new l.AssertionError({message:r,actual:e,expected:t,operator:i,stackStartFunction:n})}function g(e,t){e||y(e,!0,t,"==",l.ok)}function b(e,t,r,i){if(e===t)return!0;if(a(e)&&a(t))return 0===n(e,t);if(s.isDate(e)&&s.isDate(t))return e.getTime()===t.getTime();if(s.isRegExp(e)&&s.isRegExp(t))return e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase;if(null!==e&&"object"===typeof e||null!==t&&"object"===typeof t){if(h(e)&&h(t)&&d(e)===d(t)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===n(new Uint8Array(e.buffer),new Uint8Array(t.buffer));if(a(e)!==a(t))return!1;var o=(i=i||{actual:[],expected:[]}).actual.indexOf(e);return-1!==o&&o===i.expected.indexOf(t)||(i.actual.push(e),i.expected.push(t),function(e,t,r,i){if(null===e||void 0===e||null===t||void 0===t)return!1;if(s.isPrimitive(e)||s.isPrimitive(t))return e===t;if(r&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var n=k(e),a=k(t);if(n&&!a||!n&&a)return!1;if(n)return b(e=c.call(e),t=c.call(t),r);var o,u,d=_(e),h=_(t);if(d.length!==h.length)return!1;for(d.sort(),h.sort(),u=d.length-1;u>=0;u--)if(d[u]!==h[u])return!1;for(u=d.length-1;u>=0;u--)if(!b(e[o=d[u]],t[o],r,i))return!1;return!0}(e,t,r,i))}return r?e===t:e==t}function k(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function x(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(r){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function w(e,t,r,i){var n;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof r&&(i=r,r=null),n=function(e){var t;try{e()}catch(r){t=r}return t}(t),i=(r&&r.name?" ("+r.name+").":".")+(i?" "+i:"."),e&&!n&&y(n,r,"Missing expected exception"+i);var a="string"===typeof i,o=!e&&n&&!r;if((!e&&s.isError(n)&&a&&x(n,r)||o)&&y(n,r,"Got unwanted exception"+i),e&&n&&r&&!x(n,r)||!e&&n)throw n}l.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=function(e){return v(m(e.actual),128)+" "+e.operator+" "+v(m(e.expected),128)}(this),this.generatedMessage=!0);var t=e.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var i=r.stack,n=p(t),a=i.indexOf("\n"+n);if(a>=0){var s=i.indexOf("\n",a+1);i=i.substring(s+1)}this.stack=i}}},s.inherits(l.AssertionError,Error),l.fail=y,l.ok=g,l.equal=function(e,t,r){e!=t&&y(e,t,r,"==",l.equal)},l.notEqual=function(e,t,r){e==t&&y(e,t,r,"!=",l.notEqual)},l.deepEqual=function(e,t,r){b(e,t,!1)||y(e,t,r,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(e,t,r){b(e,t,!0)||y(e,t,r,"deepStrictEqual",l.deepStrictEqual)},l.notDeepEqual=function(e,t,r){b(e,t,!1)&&y(e,t,r,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=function e(t,r,i){b(t,r,!0)&&y(t,r,i,"notDeepStrictEqual",e)},l.strictEqual=function(e,t,r){e!==t&&y(e,t,r,"===",l.strictEqual)},l.notStrictEqual=function(e,t,r){e===t&&y(e,t,r,"!==",l.notStrictEqual)},l.throws=function(e,t,r){w(!0,e,t,r)},l.doesNotThrow=function(e,t,r){w(!1,e,t,r)},l.ifError=function(e){if(e)throw e},l.strict=i((function e(t,r){t||y(t,!0,r,"==",e)}),l,{equal:l.strictEqual,deepEqual:l.deepStrictEqual,notEqual:l.notStrictEqual,notDeepEqual:l.notDeepStrictEqual}),l.strict.strict=l.strict;var _=Object.keys||function(e){var t=[];for(var r in e)o.call(e,r)&&t.push(r);return t}}).call(this,r(19))},function(e,t){function r(t,i){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},r(t,i)}e.exports=r},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.PermissionDenied,v=l.ExchangeError,m=l.ExchangeNotAvailable,y=l.OrderNotFound,g=l.InsufficientFunds,b=l.InvalidOrder,k=l.RequestTimeout,x=l.AuthenticationError,w=r(13),_=w.TRUNCATE,O=w.DECIMAL_PLACES,T=w.TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"hitbtc",name:"HitBTC",countries:["HK"],rateLimit:1500,version:"2",pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0,transfer:!0},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","4h":"H4","1d":"D1","1w":"D7","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766555-8eaec20e-5edc-11e7-9c5b-6dc69fc42f5e.jpg",test:{public:"https://api.demo.hitbtc.com",private:"https://api.demo.hitbtc.com"},api:{public:"https://api.hitbtc.com",private:"https://api.hitbtc.com"},www:"https://hitbtc.com",referral:"https://hitbtc.com/?ref_id=5a5d39a65d466",doc:["https://api.hitbtc.com","https://github.com/hitbtc-com/hitbtc-api/blob/master/APIv2.md"],fees:["https://hitbtc.com/fees-and-limits","https://support.hitbtc.com/hc/en-us/articles/115005148605-Fees-and-limits"]},api:{public:{get:["currency","currency/{currency}","symbol","symbol/{symbol}","ticker","ticker/{symbol}","trades","trades/{symbol}","orderbook","orderbook/{symbol}","candles","candles/{symbol}"]},private:{get:["trading/balance","order","order/{clientOrderId}","trading/fee/all","trading/fee/{symbol}","margin/account","margin/account/{symbol}","margin/position","margin/position/{symbol}","margin/order","margin/order/{clientOrderId}","history/order","history/trades","history/order/{orderId}/trades","account/balance","account/crypto/address/{currency}","account/crypto/addresses/{currency}","account/crypto/used-addresses/{currency}","account/crypto/estimate-withdraw","account/crypto/is-mine/{address}","account/transactions","account/transactions/{id}","sub-acc","sub-acc/acl","sub-acc/balance/{subAccountUserID}","sub-acc/deposit-address/{subAccountUserId}/{currency}"],post:["order","margin/order","account/crypto/address/{currency}","account/crypto/withdraw","account/crypto/transfer-convert","account/transfer","account/transfer/internal","sub-acc/freeze","sub-acc/activate","sub-acc/transfer"],put:["order/{clientOrderId}","margin/account/{symbol}","margin/order/{clientOrderId}","account/crypto/withdraw/{id}","sub-acc/acl/{subAccountUserId}"],delete:["order","order/{clientOrderId}","margin/account","margin/account/{symbol}","margin/position","margin/position/{symbol}","margin/order","margin/order/{clientOrderId}","account/crypto/withdraw/{id}"],patch:["order/{clientOrderId}"]}},precisionMode:T,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.002}},options:{defaultTimeInForce:"FOK",accountsByType:{bank:"bank",exchange:"exchange",main:"bank",trading:"exchange"},fetchBalanceMethod:{account:"account",main:"account",trading:"trading"}},commonCurrencies:{BCC:"BCC",BET:"DAO.Casino",BOX:"BOX Token",CPT:"Cryptaur",GET:"Themis",HSR:"HC",IQ:"IQ.Cash",LNC:"LinkerCoin",PLA:"PlayChip",PNT:"Penta",SBTC:"Super Bitcoin",TV:"Tokenville",USD:"USDT",XPNT:"PNT"},exceptions:{504:k,1002:x,1003:p,2010:b,2001:f,2011:b,2020:b,20002:y,20001:g}})}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,_,8,O)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetSymbol(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),c=this.safeString(s,"baseCurrency"),u=this.safeString(s,"quoteCurrency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,o.indexOf("_")>=0&&(l=o),f=this.safeFloat(s,"quantityIncrement"),p=this.safeFloat(s,"tickSize"),v={price:p,amount:f},m=this.safeFloat(s,"takeLiquidityRate"),y=this.safeFloat(s,"provideLiquidityRate"),g=this.safeString(s,"feeCurrency"),b=this.safeCurrencyCode(g),n.push(this.extend(this.fees.trading,{info:s,id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,active:!0,taker:m,maker:y,precision:v,feeCurrency:b,limits:{amount:{min:f,max:void 0},price:{min:p,max:void 0},cost:{min:f*p,max:void 0}}}));return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.currency(t),c=this.currencyToPrecision(t,r),u={currency:o.id,amount:c},void 0!==(d=this.safeString(s,"type"))){e.next=19;break}if(h=this.safeValue(this.options,"accountsByType",{}),l=this.safeString(h,n),f=this.safeString(h,a),p=Object.keys(h),void 0!==l){e.next=14;break}throw new v(this.id+" fromAccount must be one of "+p.join(", ")+" instead of "+l);case 14:if(void 0!==f){e.next=16;break}throw new v(this.id+" toAccount must be one of "+p.join(", ")+" instead of "+f);case 16:if(l!==f){e.next=18;break}throw new v(this.id+" from and to cannot be the same account");case 18:d=l+"To"+this.capitalize(f);case 19:return u.type=d,e.next=22,this.privatePostAccountTransfer(this.extend(u,s));case 22:return m=e.sent,y=this.safeString(m,"id"),e.abrupt("return",{info:m,id:y,timestamp:void 0,datetime:void 0,amount:c,currency:t,fromAccount:n,toAccount:a,status:void 0});case 25:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetCurrency(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),c=this.safeInteger(s,"precisionTransfer",8),u=1/Math.pow(10,c),d=this.safeCurrencyCode(o),h=this.safeValue(s,"payinEnabled"),l=this.safeValue(s,"payoutEnabled"),f=this.safeValue(s,"transferEnabled"),p=h&&l&&f,"disabled"in s&&s.disabled&&(p=!1),v="fiat","crypto"in s&&s.crypto&&(v="crypto"),m=this.safeString(s,"fullName"),n[d]={id:o,code:d,type:v,payin:h,payout:l,transfer:f,info:s,name:m,active:p,fee:this.safeFloat(s,"payoutFee"),precision:u,limits:{amount:{min:1/Math.pow(10,c),max:Math.pow(10,c)},price:{min:1/Math.pow(10,c),max:Math.pow(10,c)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,u)}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a=this.extend({symbol:n.id},this.omit(r,"symbol")),e.next=7,this.privateGetTradingFeeSymbol(a);case 7:return s=e.sent,e.abrupt("return",{info:s,maker:this.safeFloat(s,"provideLiquidityRate"),taker:this.safeFloat(s,"takeLiquidityRate")});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeString(t,"type","trading"),n=this.safeValue(this.options,"fetchBalanceMethod",{}),void 0!==(a=this.safeString(n,r))){e.next=8;break}throw new v(this.id+" fetchBalance account type must be either main or trading");case 8:return s="privateGet"+this.capitalize(a)+"Balance",o=this.omit(t,"type"),e.next=12,this[s](o);case 12:for(c=e.sent,u={info:c},d=0;d<c.length;d++)h=c[d],l=this.safeString(h,"currency"),f=this.safeCurrencyCode(l),(p=this.account()).free=this.safeFloat(h,"available"),p.used=this.safeFloat(h,"reserved"),u[f]=p;return e.abrupt("return",this.parseBalance(u));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"max"),this.safeFloat(e,"min"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,period:this.timeframes[r]},void 0!==n&&(c.from=this.iso8601(n)),void 0!==a&&(c.limit=a),e.next=12,this.publicGetCandlesSymbol(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit=r),e.next=8,this.publicGetOrderbookSymbol(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bid","ask","price","size"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.timestamp),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"volume"),a=this.safeFloat(e,"volumeQuote"),s=this.safeFloat(e,"open"),o=this.safeFloat(e,"last"),c=void 0,u=void 0,d=void 0;void 0!==o&&void 0!==s&&(c=o-s,d=this.sum(o,s)/2,s>0&&(u=c/s*100));var h=this.vwap(n,a);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:h,open:s,close:o,last:o,previousClose:void 0,change:c,percentage:u,average:d,baseVolume:n,quoteVolume:a,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"symbol"),u=this.safeMarket(c),d=u.symbol,a[d]=this.parseTicker(o,u);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTickerSymbol(this.extend(a,r));case 7:if(!("message"in(s=e.sent))){e.next=10;break}throw new v(this.id+" "+s.message);case 10:return e.abrupt("return",this.parseTicker(s,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.timestamp),i=this.safeString(e,"symbol"),n=(t=this.safeMarket(i,t)).symbol,a=void 0,s=this.safeFloat(e,"fee");if(void 0!==s){var o=t?t.feeCurrency:void 0;a={cost:s,currency:o}}var c=this.safeString(e,"clientOrderId"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"quantity"),h=u*d,l=this.safeString(e,"side"),f=this.safeString(e,"id");return{info:e,id:f,order:c,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:l,takerOrMaker:void 0,price:u,amount:d,cost:h,fee:a}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.asset=s.id),void 0!==r&&(o.startTime=r),e.next=12,this.privateGetAccountTransactions(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"createdAt")),n=this.parse8601(this.safeString(e,"updatedAt")),a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a,t),o=this.parseTransactionStatus(this.safeString(e,"status")),c=this.safeFloat(e,"amount"),u=this.safeString(e,"address"),d=this.safeString(e,"hash"),h=void 0,l=this.safeFloat(e,"fee");void 0!==l&&(h={cost:l,currency:s});var f=this.parseTransactionType(this.safeString(e,"type"));return{info:e,id:r,txid:d,timestamp:i,datetime:this.iso8601(i),address:u,tag:void 0,type:f,amount:c,currency:s,status:o,updated:n,fee:h}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",failed:"failed",success:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({payin:"deposit",payout:"withdrawal",withdraw:"withdrawal"},e,e)}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.sort="ASC",o.from=this.iso8601(r)),e.next=11,this.publicGetTradesSymbol(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=this.uuid(),d=u.split("-"),h=(h=d.join("")).slice(0,32),a=parseFloat(a),l={clientOrderId:h,symbol:c.id,side:n,quantity:this.amountToPrecision(t,a),type:r},"limit"===r?l.price=this.priceToPrecision(t,s):l.timeInForce=this.options.defaultTimeInForce,e.next=14,this.privatePostOrder(this.extend(l,o));case 14:if(f=e.sent,"rejected"!==(p=this.parseOrder(f)).status){e.next=18;break}throw new b(this.id+" order was rejected by the exchange "+this.json(p));case 18:return e.abrupt("return",p);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,c=p.length>6&&void 0!==p[6]?p[6]:{},e.next=5,this.loadMarkets();case 5:return u=this.uuid(),d=u.split("-"),h=(h=d.join("")).slice(0,32),l={clientOrderId:t,requestClientId:h},void 0!==s&&(l.quantity=this.amountToPrecision(r,s)),void 0!==o&&(l.price=this.priceToPrecision(r,o)),e.next=14,this.privatePatchOrderClientOrderId(this.extend(l,c));case 14:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateDeleteOrderClientOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",suspended:"open",partiallyFilled:"open",filled:"closed",canceled:"canceled",expired:"failed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"createdAt")),i=this.parse8601(this.safeString(e,"updatedAt")),n=this.safeString(e,"symbol"),a=(t=this.safeMarket(n,t)).symbol,s=this.safeFloat(e,"quantity"),o=this.safeFloat(e,"cumQuantity"),c=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeString(e,"clientOrderId"),d=u,h=this.safeFloat(e,"price"),l=this.safeString(e,"type"),f=this.safeString(e,"side"),p=this.safeValue(e,"tradesReport"),v=void 0,m=this.safeValue(e,"avgPrice");void 0!==p&&(p=this.parseTrades(p,t));var y=this.safeString(e,"timeInForce");return this.safeOrder({id:u,clientOrderId:d,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:i,status:c,symbol:a,type:l,timeInForce:y,side:f,price:h,stopPrice:void 0,average:m,amount:s,cost:void 0,filled:o,remaining:void 0,fee:v,trades:p,info:e})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateGetHistoryOrder(this.extend(n,r));case 7:if(a=e.sent,!(a.length>0)){e.next=11;break}return e.abrupt("return",this.parseOrder(a[0]));case 11:throw new y(this.id+" order "+t+" not found");case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={clientOrderId:t},e.next=7,this.privateGetOrderClientOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),e.next=11,this.privateGetOrder(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.limit=n),void 0!==r&&(o.from=this.iso8601(r)),e.next=13,this.privateGetHistoryOrder(this.extend(o,a));case 13:for(c=e.sent,u=this.parseOrders(c,s),d=[],h=0;h<u.length;h++)l=u[h],"closed"!==(f=l.status)&&"canceled"!==f||d.push(l);return e.abrupt("return",this.filterBySinceLimit(d,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==r&&(s.from=this.iso8601(r)),void 0!==n&&(s.limit=n),e.next=13,this.privateGetHistoryTrades(this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==r&&(o=this.market(r)),c={orderId:t},e.next=11,this.privateGetHistoryOrderOrderIdTrades(this.extend(c,s));case 11:if(u=e.sent,!(u.length>0)){e.next=15;break}return e.abrupt("return",this.parseTrades(u,o,n,a));case 15:throw new y(this.id+" order "+t+" not found, "+this.id+'.fetchOrderTrades() requires an exchange-specific order id, you need to grab it from order["info"]["id"]');case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostAccountCryptoAddressCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),this.checkAddress(o),c=this.safeString(s,"paymentId"),e.abrupt("return",{currency:n,address:o,tag:c,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetAccountCryptoAddressCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),this.checkAddress(o),c=this.safeString(s,"paymentId"),e.abrupt("return",{currency:n.code,address:o,tag:c,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o=this.currency(t),c={currency:o.id,amount:parseFloat(r),address:n},a&&(c.paymentId=a),e.next=10,this.privatePostAccountCryptoWithdraw(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",{info:u,id:u.id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/",o=this.omit(i,this.extractParams(e));if("public"===t)s+=t+"/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),s+=this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o));var c=this.encode(this.apiKey+":"+this.secret),u=this.stringToBase64(c);n={Authorization:"Basic "+this.decode(u),"Content-Type":"application/json"}}return{url:s=this.urls.api[t]+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&e>=400){var u=this.id+" "+a;if(503===e||504===e)throw new m(u);if(429===e)return;if("{"===a[0]&&"error"in s){var d=this.safeString(s.error,"code");if(this.throwExactlyMatchedException(this.exceptions,d,u),"Duplicate clientOrderId"===this.safeString(s.error,"message"))throw new b(u)}throw new v(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.PermissionDenied,m=l.ExchangeNotAvailable,y=l.OnMaintenance,g=l.InvalidOrder,b=l.OrderNotFound,k=l.InsufficientFunds,x=l.ArgumentsRequired,w=l.BadSymbol,_=l.BadRequest,O=l.RequestTimeout,T=l.NetworkError,S=r(13).TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"huobipro",name:"Huobi Pro",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v1",accounts:void 0,accountsById:void 0,hostname:"api.huobi.pro",pro:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","1w":"1week","1M":"1mon","1y":"1year"},urls:{test:{market:"https://api.testnet.huobi.pro",public:"https://api.testnet.huobi.pro",private:"https://api.testnet.huobi.pro"},logo:"https://user-images.githubusercontent.com/1294454/76137448-22748a80-604e-11ea-8069-6e389271911d.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}",v2Public:"https://{hostname}",v2Private:"https://{hostname}"},www:"https://www.huobi.com",referral:"https://www.huobi.com/en-us/topic/invited/?invite_code=rwrd3",doc:"https://huobiapi.github.io/docs/spot/v1/cn/",fees:"https://www.huobi.com/about/fee/"},api:{v2Public:{get:["reference/currencies"]},v2Private:{get:["account/ledger","account/withdraw/quota","account/withdraw/address","account/deposit/address","reference/transact-fee-rate","account/asset-valuation","point/account","sub-user/user-list","sub-user/user-state","sub-user/account-list","sub-user/deposit-address","sub-user/query-deposit","user/api-key"],post:["account/transfer","point/transfer","sub-user/management","sub-user/creation","sub-user/tradable-market","sub-user/transferability","sub-user/api-key-generation","sub-user/api-key-modification","sub-user/api-key-deletion"]},market:{get:["history/kline","detail/merged","depth","trade","history/trade","detail","tickers"]},public:{get:["common/symbols","common/currencys","common/timestamp","common/exchange","settings/currencys"]},private:{get:["account/accounts","account/accounts/{id}/balance","account/accounts/{sub-uid}","account/history","cross-margin/loan-info","margin/loan-info","fee/fee-rate/get","order/openOrders","order/orders","order/orders/{id}","order/orders/{id}/matchresults","order/orders/getClientOrder","order/history","order/matchresults","dw/withdraw-virtual/addresses","query/deposit-withdraw","margin/loan-info","margin/loan-orders","margin/accounts/balance","cross-margin/loan-orders","cross-margin/accounts/balance","points/actions","points/orders","subuser/aggregate-balance","stable-coin/exchange_rate","stable-coin/quote"],post:["account/transfer","futures/transfer","order/batch-orders","order/orders/place","order/orders/submitCancelClientOrder","order/orders/batchCancelOpenOrders","order/orders","order/orders/{id}/place","order/orders/{id}/submitcancel","order/orders/batchcancel","dw/balance/transfer","dw/withdraw/api/create","dw/withdraw-virtual/create","dw/withdraw-virtual/{id}/place","dw/withdraw-virtual/{id}/cancel","dw/transfer-in/margin","dw/transfer-out/margin","margin/orders","margin/orders/{id}/repay","cross-margin/transfer-in","cross-margin/transfer-out","cross-margin/orders","cross-margin/orders/{id}/repay","stable-coin/exchange","subuser/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{broad:{"contract is restricted of closing positions on API.  Please contact customer service":y,maintain:y},exact:{"bad-request":_,"base-date-limit-error":_,"api-not-support-temp-addr":v,timeout:O,"gateway-internal-error":m,"account-frozen-balance-insufficient-error":k,"invalid-amount":g,"order-limitorder-amount-min-error":g,"order-limitorder-amount-max-error":g,"order-marketorder-amount-min-error":g,"order-limitorder-price-min-error":g,"order-limitorder-price-max-error":g,"order-holding-limit-failed":g,"order-orderprice-precision-error":g,"order-orderstate-error":b,"order-queryorder-invalid":b,"order-update-error":m,"api-signature-check-failed":f,"api-signature-not-valid":f,"base-record-invalid":b,"base-symbol-trade-disabled":w,"base-symbol-error":w,"system-maintenance":y,"invalid symbol":w,"symbol trade not open now":w}},options:{fetchOrdersByStatesMethod:"private_get_order_orders",fetchOpenOrdersMethod:"fetch_open_orders_v1",createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"publicGetCommonSymbols",fetchBalanceMethod:"privateGetAccountAccountsIdBalance",createOrderMethod:"privatePostOrderOrdersPlace",language:"en-US"},commonCurrencies:{GET:"Themis",HOT:"Hydro Protocol",PNT:"Penta",SBTC:"Super Bitcoin"}})}},{key:"fetchTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:void 0===t&&(t=this.symbols),n={},a=0;case 7:if(!(a<t.length)){e.next=15;break}return s=t[a],e.next=11,this.fetchTradingLimitsById(this.marketId(s),r);case 11:n[s]=e.sent;case 12:a++,e.next=7;break;case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingLimitsById",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},n={symbol:t},e.next=4,this.publicGetCommonExchange(this.extend(n,r));case 4:return a=e.sent,e.abrupt("return",this.parseTradingLimits(this.safeValue(a,"data",{})));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTradingLimits",value:function(e){return{info:e,limits:{amount:{min:this.safeFloat(e,"limit-order-must-greater-than"),max:this.safeFloat(e,"limit-order-must-less-than")}}}}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,S,this.markets[e].precision.cost,this.precisionMode)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},r=this.options.fetchMarketsMethod,e.next=4,this[r](t);case 4:if(n=e.sent,a=this.safeValue(n,"data"),!(a.length<1)){e.next=9;break}throw new T(this.id+" publicGetCommonSymbols returned empty response: "+this.json(a));case 9:for(s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"base-currency"),d=this.safeString(c,"quote-currency"),h=u+d,l=this.safeCurrencyCode(u),f=this.safeCurrencyCode(d),p=l+"/"+f,v={amount:this.safeInteger(c,"amount-precision"),price:this.safeInteger(c,"price-precision"),cost:this.safeInteger(c,"value-precision")},m="OMG"===l?0:.002,y="OMG"===l?0:.002,g=this.safeFloat(c,"min-order-amt",Math.pow(10,-v.amount)),b=this.safeFloat(c,"max-order-amt"),k=this.safeFloat(c,"min-order-value",0),x=this.safeString(c,"state"),w="online"===x,s.push({id:h,symbol:p,base:l,quote:f,baseId:u,quoteId:d,active:w,precision:v,taker:y,maker:m,limits:{amount:{min:g,max:b},price:{min:Math.pow(10,-v.price),max:void 0},cost:{min:k,max:void 0}},info:c});return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"ts"),n=void 0,a=void 0,s=void 0,o=void 0;"bid"in e&&(Array.isArray(e.bid)?(n=this.safeFloat(e.bid,0),a=this.safeFloat(e.bid,1)):(n=this.safeFloat(e,"bid"),a=this.safeValue(e,"bidSize"))),"ask"in e&&(Array.isArray(e.ask)?(s=this.safeFloat(e.ask,0),o=this.safeFloat(e.ask,1)):(s=this.safeFloat(e,"ask"),o=this.safeValue(e,"askSize")));var c=this.safeFloat(e,"open"),u=this.safeFloat(e,"close"),d=void 0,h=void 0,l=void 0;void 0!==c&&void 0!==u&&(d=u-c,l=this.sum(c,u)/2,void 0!==u&&u>0&&(h=d/c*100));var f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"vol"),v=this.vwap(f,p);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:n,bidVolume:a,ask:s,askVolume:o,vwap:v,open:c,close:u,last:u,previousClose:void 0,change:d,percentage:h,average:l,baseVolume:f,quoteVolume:p,info:e}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id,type:"step0"},e.next=8,this.marketGetDepth(this.extend(a,r));case 8:if(!("tick"in(s=e.sent))){e.next=17;break}if(s.tick){e.next=12;break}throw new w(this.id+" fetchOrderBook() returned empty response: "+this.json(s));case 12:return o=this.safeValue(s,"tick"),c=this.safeInteger(o,"ts",this.safeInteger(s,"ts")),(u=this.parseOrderBook(o,c)).nonce=this.safeInteger(o,"version"),e.abrupt("return",u);case 17:throw new p(this.id+" fetchOrderBook() returned unrecognized response: "+this.json(s));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.marketGetDetailMerged(this.extend(a,r));case 7:return s=e.sent,o=this.parseTicker(s.tick,n),c=this.safeValue(s,"ts"),o.timestamp=c,o.datetime=this.iso8601(c),e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"data"),s=this.safeInteger(n,"ts"),o={},c=0;c<a.length;c++)u=this.safeString(a[c],"symbol"),d=this.safeMarket(u),h=d.symbol,(l=this.parseTicker(a[c],d)).timestamp=s,l.datetime=this.iso8601(s),o[h]=l;return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeInteger2(e,"ts","created-at"),a=this.safeString(e,"order-id"),s=this.safeString(e,"direction"),o=this.safeString(e,"type");if(void 0!==o){var c=o.split("-");s=c[0],o=c[1]}var u=this.safeString(e,"role"),d=this.safeFloat(e,"price"),h=this.safeFloat2(e,"filled-amount","amount"),l=void 0;void 0!==d&&void 0!==h&&(l=h*d);var f=void 0,p=this.safeFloat(e,"filled-fees"),v=void 0;void 0!==t&&(v=this.safeCurrencyCode(this.safeString(e,"fee-currency")));var m=this.safeFloat(e,"filled-points");void 0!==m&&(void 0!==p&&0!==p||(p=m,v=this.safeCurrencyCode(this.safeString(e,"fee-deduct-currency")))),void 0!==p&&(f={cost:p,currency:v});var y=this.safeString2(e,"trade-id","tradeId"),g=this.safeString(e,"id",y);return{id:g,info:e,order:a,timestamp:n,datetime:this.iso8601(n),symbol:i,type:o,side:s,takerOrMaker:u,price:d,amount:h,cost:l,fee:f}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.size=n),void 0!==r&&(o["start-date"]=this.ymd(r),o["end-date"]=this.ymd(this.sum(r,864e5))),e.next=13,this.privateGetOrderMatchresults(this.extend(o,a));case 13:return c=e.sent,u=this.parseTrades(c.data,s,r,n),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:1e3,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.size=n),e.next=10,this.marketGetHistoryTrade(this.extend(o,a));case 10:for(c=e.sent,u=this.safeValue(c,"data"),d=[],h=0;h<u.length;h++)for(l=this.safeValue(u[h],"data",[]),f=0;f<l.length;f++)p=this.parseTrade(l[f],s),d.push(p);return d=this.sortBy(d,"timestamp"),e.abrupt("return",this.filterBySymbolSinceLimit(d,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:1e3,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,period:this.timeframes[r]},void 0!==a&&(c.size=a),e.next=11,this.marketGetHistoryKline(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountAccounts(t);case 5:return r=e.sent,e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r={language:this.options.language},e.next=4,this.publicGetSettingsCurrencys(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"data"),s={},o=0;o<a.length;o++)c=a[o],u=this.safeValue(c,"name"),d=this.safeInteger(c,"withdraw-precision"),h=this.safeCurrencyCode(u),l=c.visible&&c["deposit-enabled"]&&c["withdraw-enabled"],f=this.safeString(c,"display-name"),s[h]={id:u,code:h,type:"crypto",name:f,active:l,fee:void 0,precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(c,"deposit-min-amount"),max:Math.pow(10,d)},withdraw:{min:this.safeFloat(c,"withdraw-min-amount"),max:Math.pow(10,d)}},info:c};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return r=this.options.fetchBalanceMethod,n={id:this.accounts[0].id},e.next=9,this[r](this.extend(n,t));case 9:for(a=e.sent,s=this.safeValue(a.data,"list",[]),o={info:a},c=0;c<s.length;c++)u=s[c],d=this.safeString(u,"currency"),h=this.safeCurrencyCode(d),l=void 0,l=h in o?o[h]:this.account(),"trade"===u.type&&(l.free=this.safeFloat(u,"balance")),"frozen"===u.type&&(l.used=this.safeFloat(u,"balance")),o[h]=l;return e.abrupt("return",this.parseBalance(o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStates",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={states:t},c=void 0,void 0!==r&&(c=this.market(r),o.symbol=c.id),u=this.safeString(this.options,"fetchOrdersByStatesMethod","private_get_order_orders"),e.next=12,this[u](this.extend(o,s));case 12:return d=e.sent,e.abrupt("return",this.parseOrders(d.data,c,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrderOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStates("pre-submitted,submitted,partial-filled,filled,partial-canceled,canceled",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s=this.safeString(this.options,"fetchOpenOrdersMethod","fetch_open_orders_v1"),e.next=7,this[s](t,r,n,a);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrdersV1",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},void 0!==t){e.next=6;break}throw new x(this.id+" fetchOpenOrdersV1() requires a symbol argument");case 6:return e.next=8,this.fetchOrdersByStates("pre-submitted,submitted,partial-filled",t,r,n,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStates("filled,partial-canceled,canceled",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrdersV2",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new x(this.id+" fetchOpenOrders() requires a symbol argument");case 8:if(s=this.market(t),void 0!==(o=this.safeString(a,"account-id"))){e.next=23;break}return e.next=13,this.loadAccounts();case 13:c=0;case 14:if(!(c<this.accounts.length)){e.next=23;break}if("spot"!==(u=this.accounts[c]).type){e.next=20;break}if(void 0===(o=this.safeString(u,"id"))){e.next=20;break}return e.abrupt("break",23);case 20:c++,e.next=14;break;case 23:return d={symbol:s.id,"account-id":o},void 0!==n&&(d.size=n),h=this.omit(a,"account-id"),e.next=28,this.privateGetOrderOpenOrders(this.extend(d,h));case 28:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOrders(f,s,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled",submitted:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=void 0,a=void 0;if("type"in e){var s=e.type.split("-");i=s[0],n=s[1],a=this.parseOrderStatus(this.safeString(e,"state"))}var o=this.safeString(e,"symbol"),c=this.safeSymbol(o,t),u=this.safeInteger(e,"created-at"),d=this.safeFloat(e,"amount"),h=this.safeFloat2(e,"filled-amount","field-amount");"market"===n&&"buy"===i&&(d="closed"===a?h:void 0);var l=this.safeFloat(e,"price");0===l&&(l=void 0);var f=this.safeFloat2(e,"filled-cash-amount","field-cash-amount"),p=void 0,v=void 0;void 0!==h&&(void 0!==d&&(p=d-h),void 0!==f&&h>0&&(v=f/h));var m=this.safeFloat2(e,"filled-fees","field-fees"),y=void 0;if(void 0!==m){var g=void 0;void 0!==t&&(g="sell"===i?t.quote:t.base),y={cost:m,currency:g}}return{info:e,id:r,clientOrderId:void 0,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:c,type:n,timeInForce:void 0,postOnly:void 0,side:i,price:l,stopPrice:void 0,average:v,cost:f,amount:d,filled:h,remaining:p,status:a,fee:y,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(c=this.market(t),u={"account-id":this.accounts[0].id,symbol:c.id,type:n+"-"+r},"market"!==r||"buy"!==n){e.next=20;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=17;break}if(void 0!==s){e.next=14;break}throw new g(this.id+" market buy order requires price argument to calculate cost (total amount of quote currency to spend for buying, amount * price). To switch off this warning exception and specify cost in the amount argument, set .options['createMarketBuyOrderRequiresPrice'] = false. Make sure you know what you're doing.");case 14:u.amount=this.costToPrecision(t,parseFloat(a)*parseFloat(s));case 15:e.next=18;break;case 17:u.amount=this.costToPrecision(t,a);case 18:e.next=21;break;case 20:u.amount=this.amountToPrecision(t,a);case 21:return"limit"!==r&&"ioc"!==r&&"limit-maker"!==r||(u.price=this.priceToPrecision(t,s)),d=this.options.createOrderMethod,e.next=25,this[d](this.extend(u,o));case 25:return h=e.sent,l=this.milliseconds(),f=this.safeString(h,"data"),e.abrupt("return",{info:h,id:f,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:void 0,symbol:t,type:r,side:n,price:s,amount:a,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,n.length>2&&void 0!==n[2]?n[2]:{},e.next=4,this.privatePostOrderOrdersIdSubmitcancel({id:t});case 4:return r=e.sent,e.abrupt("return",this.extend(this.parseOrder(r),{id:t,status:"canceled"}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"currencyToPrecision",value:function(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=s[a],c=i*o,u="quote";return"sell"===r?c*=n:u="base",{type:a,currency:s[u],rate:o,cost:parseFloat(this.currencyToPrecision(s[u],c))}}},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"addressTag"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.v2PrivateGetAccountDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseDepositAddress(this.safeValue(o,0,{}),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},(void 0===n||n>100)&&(n=100),e.next=7,this.loadMarkets();case 7:return s=void 0,void 0!==t&&(s=this.currency(t)),o={type:"deposit",from:0},void 0!==s&&(o.currency=s.id),void 0!==n&&(o.size=n),e.next=14,this.privateGetQueryDepositWithdraw(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTransactions(c.data,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},(void 0===n||n>100)&&(n=100),e.next=7,this.loadMarkets();case 7:return s=void 0,void 0!==t&&(s=this.currency(t)),o={type:"withdraw",from:0},void 0!==s&&(o.currency=s.id),void 0!==n&&(o.size=n),e.next=14,this.privateGetQueryDepositWithdraw(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTransactions(c.data,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.safeInteger(e,"created-at"),r=this.safeInteger(e,"updated-at"),i=this.safeCurrencyCode(this.safeString(e,"currency")),n=this.safeString(e,"type");"withdraw"===n&&(n="withdrawal");var a=this.parseTransactionStatus(this.safeString(e,"state")),s=this.safeString(e,"address-tag"),o=this.safeFloat(e,"fee");return void 0!==o&&(o=Math.abs(o)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx-hash"),timestamp:t,datetime:this.iso8601(t),address:this.safeString(e,"address"),tag:s,type:n,amount:this.safeFloat(e,"amount"),currency:i,status:a,updated:r,fee:{currency:i,cost:o,rate:void 0}}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({unknown:"failed",confirming:"pending",confirmed:"ok",safe:"ok",orphan:"failed",submitted:"pending",canceled:"canceled",reexamine:"pending",reject:"failed",pass:"pending","wallet-reject":"failed","confirm-error":"failed",repealed:"failed","wallet-transfer":"pending","pre-transfer":"pending"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o=this.currency(t),c={address:n,amount:r,currency:o.id.toLowerCase()},void 0!==a&&(c["addr-tag"]=a),e.next=10,this.privatePostDwWithdrawApiCreate(this.extend(c,s));case 10:return u=e.sent,d=this.safeString(u,"data"),e.abrupt("return",{info:u,id:d});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/";"market"===t?s+=t:"public"===t||"private"===t?s+=this.version:"v2Public"!==t&&"v2Private"!==t||(s+="v2"),s+="/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("private"===t||"v2Private"===t){this.checkRequiredCredentials();var c=this.ymdhms(this.milliseconds(),"T"),u={SignatureMethod:"HmacSHA256",SignatureVersion:"2",AccessKeyId:this.apiKey,Timestamp:c};"POST"!==r&&(u=this.extend(u,o)),u=this.keysort(u);var d=this.urlencode(u),h=[r,this.hostname,s,d].join("\n"),l=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");s+="?"+(d+="&"+this.urlencode({Signature:l})),"POST"===r?(a=this.json(o),n={"Content-Type":"application/json"}):n={"Content-Type":"application/x-www-form-urlencoded"}}else Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&("status"in s&&"error"===this.safeString(s,"status"))){var u=this.safeString(s,"err-code"),d=this.id+" "+a;this.throwBroadlyMatchedException(this.exceptions.broad,a,d),this.throwExactlyMatchedException(this.exceptions.exact,u,d);var h=this.safeString(s,"err-msg");throw this.throwExactlyMatchedException(this.exceptions.exact,h,d),new p(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(179),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},s={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function c(e){return i.isMemo(e)?s:o[e.$$typeof]||n}o[i.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[i.Memo]=s;var u=Object.defineProperty,d=Object.getOwnPropertyNames,h=Object.getOwnPropertySymbols,l=Object.getOwnPropertyDescriptor,f=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,i){if("string"!==typeof r){if(p){var n=f(r);n&&n!==p&&e(t,n,i)}var s=d(r);h&&(s=s.concat(h(r)));for(var o=c(t),v=c(r),m=0;m<s.length;++m){var y=s[m];if(!a[y]&&(!i||!i[y])&&(!v||!v[y])&&(!o||!o[y])){var g=l(r,y);try{u(t,y,g)}catch(b){}}}}return t}},function(e,t,r){"use strict";r.d(t,"a",(function(){return i})),r.d(t,"c",(function(){return s})),r.d(t,"b",(function(){return o}));var i,n=r(17),a=r(38);function s(e){return"function"===typeof e}function o(e,t,r,c,u,d,h){if(1===e.length&&Object(n.f)(e[0]))return[{type:i.literal,value:e[0].value}];for(var l=[],f=0,p=e;f<p.length;f++){var v=p[f];if(Object(n.f)(v))l.push({type:i.literal,value:v.value});else if(Object(n.j)(v))"number"===typeof d&&l.push({type:i.literal,value:r.getNumberFormat(t).format(d)});else{var m=v.value;if(!u||!(m in u))throw new a.e(m,h);var y=u[m];if(Object(n.c)(v))y&&"string"!==typeof y&&"number"!==typeof y||(y="string"===typeof y||"number"===typeof y?String(y):""),l.push({type:"string"===typeof y?i.literal:i.object,value:y});else if(Object(n.d)(v)){var g="string"===typeof v.style?c.date[v.style]:Object(n.e)(v.style)?v.style.parsedOptions:void 0;l.push({type:i.literal,value:r.getDateTimeFormat(t,g).format(y)})}else if(Object(n.m)(v)){g="string"===typeof v.style?c.time[v.style]:Object(n.e)(v.style)?v.style.parsedOptions:void 0;l.push({type:i.literal,value:r.getDateTimeFormat(t,g).format(y)})}else if(Object(n.g)(v)){(g="string"===typeof v.style?c.number[v.style]:Object(n.h)(v.style)?v.style.parsedOptions:void 0)&&g.scale&&(y*=g.scale||1),l.push({type:i.literal,value:r.getNumberFormat(t,g).format(y)})}else{if(Object(n.l)(v)){var b=v.children,k=v.value,x=u[k];if(!s(x))throw new a.d(k,"function",h);var w=x(o(b,t,r,c,u,d).map((function(e){return e.value})));Array.isArray(w)||(w=[w]),l.push.apply(l,w.map((function(e){return{type:"string"===typeof e?i.literal:i.object,value:e}})))}if(Object(n.k)(v)){if(!(_=v.options[y]||v.options.other))throw new a.c(v.value,y,Object.keys(v.options),h);l.push.apply(l,o(_.value,t,r,c,u))}else if(Object(n.i)(v)){var _;if(!(_=v.options["="+y])){if(!Intl.PluralRules)throw new a.b('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',a.a.MISSING_INTL_API,h);var O=r.getPluralRules(t,{type:v.pluralType}).select(y-(v.offset||0));_=v.options[O]||v.options.other}if(!_)throw new a.c(v.value,y,Object.keys(v.options),h);l.push.apply(l,o(_.value,t,r,c,u,y-(v.offset||0)))}else;}}}return function(e){return e.length<2?e:e.reduce((function(e,t){var r=e[e.length-1];return r&&r.type===i.literal&&t.type===i.literal?r.value+=t.value:e.push(t),e}),[])}(l)}!function(e){e[e.literal=0]="literal",e[e.object=1]="object"}(i||(i={}))},,function(e,t,r){"use strict";t.__esModule=!0,t.default={noWobble:{stiffness:170,damping:26},gentle:{stiffness:120,damping:14},wobbly:{stiffness:180,damping:12},stiff:{stiffness:210,damping:20}},e.exports=t.default},function(e,t,r){"use strict";var i=Array.prototype.slice,n=r(88),a=Object.keys,s=a?function(e){return a(e)}:r(166),o=Object.keys;s.shim=function(){Object.keys?function(){var e=Object.keys(arguments);return e&&e.length===arguments.length}(1,2)||(Object.keys=function(e){return n(e)?o(i.call(e)):o(e)}):Object.keys=s;return Object.keys||s},e.exports=s},function(e,t,r){"use strict";var i=Object.prototype.toString;e.exports=function(e){var t=i.call(e),r="[object Arguments]"===t;return r||(r="[object Array]"!==t&&null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Function]"===i.call(e.callee)),r}},function(e,t,r){"use strict";var i=r(90),n=r(72),a=n(i("String.prototype.indexOf"));e.exports=function(e,t){var r=i(e,!!t);return"function"===typeof r&&a(e,".prototype.")>-1?n(r):r}},function(e,t,r){"use strict";var i,n=SyntaxError,a=Function,s=TypeError,o=function(e){try{return a('"use strict"; return ('+e+").constructor;")()}catch(t){}},c=Object.getOwnPropertyDescriptor;if(c)try{c({},"")}catch(I){c=null}var u=function(){throw new s},d=c?function(){try{return u}catch(e){try{return c(arguments,"callee").get}catch(t){return u}}}():u,h=r(91)(),l=Object.getPrototypeOf||function(e){return e.__proto__},f={},p="undefined"===typeof Uint8Array?i:l(Uint8Array),v={"%AggregateError%":"undefined"===typeof AggregateError?i:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"===typeof ArrayBuffer?i:ArrayBuffer,"%ArrayIteratorPrototype%":h?l([][Symbol.iterator]()):i,"%AsyncFromSyncIteratorPrototype%":i,"%AsyncFunction%":f,"%AsyncGenerator%":f,"%AsyncGeneratorFunction%":f,"%AsyncIteratorPrototype%":f,"%Atomics%":"undefined"===typeof Atomics?i:Atomics,"%BigInt%":"undefined"===typeof BigInt?i:BigInt,"%Boolean%":Boolean,"%DataView%":"undefined"===typeof DataView?i:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":"undefined"===typeof Float32Array?i:Float32Array,"%Float64Array%":"undefined"===typeof Float64Array?i:Float64Array,"%FinalizationRegistry%":"undefined"===typeof FinalizationRegistry?i:FinalizationRegistry,"%Function%":a,"%GeneratorFunction%":f,"%Int8Array%":"undefined"===typeof Int8Array?i:Int8Array,"%Int16Array%":"undefined"===typeof Int16Array?i:Int16Array,"%Int32Array%":"undefined"===typeof Int32Array?i:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":h?l(l([][Symbol.iterator]())):i,"%JSON%":"object"===typeof JSON?JSON:i,"%Map%":"undefined"===typeof Map?i:Map,"%MapIteratorPrototype%":"undefined"!==typeof Map&&h?l((new Map)[Symbol.iterator]()):i,"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"===typeof Promise?i:Promise,"%Proxy%":"undefined"===typeof Proxy?i:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":"undefined"===typeof Reflect?i:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"===typeof Set?i:Set,"%SetIteratorPrototype%":"undefined"!==typeof Set&&h?l((new Set)[Symbol.iterator]()):i,"%SharedArrayBuffer%":"undefined"===typeof SharedArrayBuffer?i:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":h?l(""[Symbol.iterator]()):i,"%Symbol%":h?Symbol:i,"%SyntaxError%":n,"%ThrowTypeError%":d,"%TypedArray%":p,"%TypeError%":s,"%Uint8Array%":"undefined"===typeof Uint8Array?i:Uint8Array,"%Uint8ClampedArray%":"undefined"===typeof Uint8ClampedArray?i:Uint8ClampedArray,"%Uint16Array%":"undefined"===typeof Uint16Array?i:Uint16Array,"%Uint32Array%":"undefined"===typeof Uint32Array?i:Uint32Array,"%URIError%":URIError,"%WeakMap%":"undefined"===typeof WeakMap?i:WeakMap,"%WeakRef%":"undefined"===typeof WeakRef?i:WeakRef,"%WeakSet%":"undefined"===typeof WeakSet?i:WeakSet},m=function e(t){var r;if("%AsyncFunction%"===t)r=o("async function () {}");else if("%GeneratorFunction%"===t)r=o("function* () {}");else if("%AsyncGeneratorFunction%"===t)r=o("async function* () {}");else if("%AsyncGenerator%"===t){var i=e("%AsyncGeneratorFunction%");i&&(r=i.prototype)}else if("%AsyncIteratorPrototype%"===t){var n=e("%AsyncGenerator%");n&&(r=l(n.prototype))}return v[t]=r,r},y={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},g=r(71),b=r(170),k=g.call(Function.call,Array.prototype.concat),x=g.call(Function.apply,Array.prototype.splice),w=g.call(Function.call,String.prototype.replace),_=g.call(Function.call,String.prototype.slice),O=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T=/\\(\\)?/g,S=function(e){var t=_(e,0,1),r=_(e,-1);if("%"===t&&"%"!==r)throw new n("invalid intrinsic syntax, expected closing `%`");if("%"===r&&"%"!==t)throw new n("invalid intrinsic syntax, expected opening `%`");var i=[];return w(e,O,(function(e,t,r,n){i[i.length]=r?w(n,T,"$1"):t||e})),i},C=function(e,t){var r,i=e;if(b(y,i)&&(i="%"+(r=y[i])[0]+"%"),b(v,i)){var a=v[i];if(a===f&&(a=m(i)),"undefined"===typeof a&&!t)throw new s("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:i,value:a}}throw new n("intrinsic "+e+" does not exist!")};e.exports=function(e,t){if("string"!==typeof e||0===e.length)throw new s("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!==typeof t)throw new s('"allowMissing" argument must be a boolean');var r=S(e),i=r.length>0?r[0]:"",a=C("%"+i+"%",t),o=a.name,u=a.value,d=!1,h=a.alias;h&&(i=h[0],x(r,k([0,1],h)));for(var l=1,f=!0;l<r.length;l+=1){var p=r[l],m=_(p,0,1),y=_(p,-1);if(('"'===m||"'"===m||"`"===m||'"'===y||"'"===y||"`"===y)&&m!==y)throw new n("property names with quotes must have matching quotes");if("constructor"!==p&&f||(d=!0),b(v,o="%"+(i+="."+p)+"%"))u=v[o];else if(null!=u){if(!(p in u)){if(!t)throw new s("base intrinsic for "+e+" exists, but the property is not available.");return}if(c&&l+1>=r.length){var g=c(u,p);u=(f=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:u[p]}else f=b(u,p),u=u[p];f&&!d&&(v[o]=u)}}return u}},function(e,t,r){"use strict";(function(t){var i=t.Symbol,n=r(168);e.exports=function(){return"function"===typeof i&&("function"===typeof Symbol&&("symbol"===typeof i("foo")&&("symbol"===typeof Symbol("bar")&&n())))}}).call(this,r(19))},function(e,t,r){"use strict";var i=function(e){return e!==e};e.exports=function(e,t){return 0===e&&0===t?1/e===1/t:e===t||!(!i(e)||!i(t))}},function(e,t,r){"use strict";var i=r(92);e.exports=function(){return"function"===typeof Object.is?Object.is:i}},function(e,t,r){"use strict";var i=Object,n=TypeError;e.exports=function(){if(null!=this&&this!==i(this))throw new n("RegExp.prototype.flags getter called on non-object");var e="";return this.global&&(e+="g"),this.ignoreCase&&(e+="i"),this.multiline&&(e+="m"),this.dotAll&&(e+="s"),this.unicode&&(e+="u"),this.sticky&&(e+="y"),e}},function(e,t,r){"use strict";var i=r(94),n=r(48).supportsDescriptors,a=Object.getOwnPropertyDescriptor,s=TypeError;e.exports=function(){if(!n)throw new s("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");if("gim"===/a/gim.flags){var e=a(RegExp.prototype,"flags");if(e&&"function"===typeof e.get&&"boolean"===typeof/a/.dotAll)return e.get}return i}},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}},function(e,t,r){"use strict";var i=r(74).unCamelCase;e.exports=function(e){for(var t in e)e[i(t)]=e[t];return e}(Object.assign({},r(190),r(231),r(74),r(118),r(13),r(50),r(239),r(129),r(268),r(269)))},function(e,t,r){var i=r(73);e.exports=function(e,t){var r;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=i(e))||t&&e&&"number"===typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,c=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){c=!0,s=e},f:function(){try{o||null==r.return||r.return()}finally{if(c)throw s}}}}},function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},function(e,t,r){"use strict";(function(t,i){var n=r(33);e.exports=b;var a,s=r(75);b.ReadableState=g;r(49).EventEmitter;var o=function(e,t){return e.listeners(t).length},c=r(101),u=r(42).Buffer,d=t.Uint8Array||function(){};var h=Object.create(r(28));h.inherits=r(24);var l=r(195),f=void 0;f=l&&l.debuglog?l.debuglog("stream"):function(){};var p,v=r(196),m=r(102);h.inherits(b,c);var y=["error","close","destroy","pause","resume"];function g(e,t){e=e||{};var i=t instanceof(a=a||r(36));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(58).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(a=a||r(36),!(this instanceof b))return new b(e);this._readableState=new g(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function k(e,t,r,i,n){var a,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,O(e)}(e,s)):(n||(a=function(e,t){var r;i=t,u.isBuffer(i)||i instanceof d||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"===typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),i?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?x(e,s,t,!1):S(e,s)):x(e,s,t,!1))):i||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function x(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),S(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"===typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=u.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},b.prototype.unshift=function(e){return k(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=r(58).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var w=8388608;function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(T,e):T(e))}function T(e){f("emit readable"),e.emit("readable"),E(e)}function S(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(C,e,t))}function C(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function I(e){f("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;e-=n.length;for(;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(s===a.length?n+=a:n+=a.slice(0,e),0===(e-=s)){s===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=u.allocUnsafe(e),i=t.head,n=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0===(e-=s)){s===a.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(s));break}++n}return t.length-=n,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function F(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function B(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):O(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&F(this),null;var i,n=t.needReadable;return f("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",n=!0),t.ended||t.reading?f("reading or ended",n=!1):n&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(r,t))),null===(i=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,t);var c=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:b;function u(t,i){f("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",u),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",v),l=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function d(){f("onend"),e.end()}a.endEmitted?n.nextTick(c):r.once("end",c),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,E(e))}}(r);e.on("drain",h);var l=!1;var p=!1;function v(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==B(a.pipes,e))&&!l&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(t){f("onerror",t),b(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",g),b()}function g(){f("onfinish"),e.removeListener("close",y),b()}function b(){f("unpipe"),r.unpipe(e)}return r.on("data",v),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",m),e.once("close",y),e.once("finish",g),e.emit("pipe",r),a.flowing||(f("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,r);return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&O(this):n.nextTick(I,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(M,e,t))}(this,e)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(f("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!r.objectMode||null!==n&&void 0!==n)&&((r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause())))})),e)void 0===this[n]&&"function"===typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var a=0;a<y.length;a++)e.on(y[a],this.emit.bind(this,y[a]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=A}).call(this,r(19),r(23))},function(e,t,r){e.exports=r(49).EventEmitter},function(e,t,r){"use strict";var i=r(33);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){(function(e){var i="undefined"!==typeof e&&e||"undefined"!==typeof self&&self||window,n=Function.prototype.apply;function a(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new a(n.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new a(n.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},a.prototype.unref=a.prototype.ref=function(){},a.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(198),t.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(19))},function(e,t,r){(function(t){function r(e){try{if(!t.localStorage)return!1}catch(i){return!1}var r=t.localStorage[e];return null!=r&&"true"===String(r).toLowerCase()}e.exports=function(e,t){if(r("noDeprecation"))return e;var i=!1;return function(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}}}).call(this,r(19))},function(e,t,r){"use strict";e.exports=s;var i=r(36),n=Object.create(r(28));function a(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);i.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=r(24),n.inherits(s,i),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;i.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t,r){(function(e){t.fetch=o(e.fetch)&&o(e.ReadableStream),t.writableStream=o(e.WritableStream),t.abortController=o(e.AbortController),t.blobConstructor=!1;try{new Blob([new ArrayBuffer(1)]),t.blobConstructor=!0}catch(c){}var r;function i(){if(void 0!==r)return r;if(e.XMLHttpRequest){r=new e.XMLHttpRequest;try{r.open("GET",e.XDomainRequest?"/":"https://example.com")}catch(c){r=null}}else r=null;return r}function n(e){var t=i();if(!t)return!1;try{return t.responseType=e,t.responseType===e}catch(c){}return!1}var a="undefined"!==typeof e.ArrayBuffer,s=a&&o(e.ArrayBuffer.prototype.slice);function o(e){return"function"===typeof e}t.arraybuffer=t.fetch||a&&n("arraybuffer"),t.msstream=!t.fetch&&s&&n("ms-stream"),t.mozchunkedarraybuffer=!t.fetch&&a&&n("moz-chunked-arraybuffer"),t.overrideMimeType=t.fetch||!!i()&&o(i().overrideMimeType),t.vbArray=o(e.VBArray),r=null}).call(this,r(19))},function(e,t,r){(function(e,i,n){var a=r(106),s=r(24),o=r(108),c=t.readyStates={UNSENT:0,OPENED:1,HEADERS_RECEIVED:2,LOADING:3,DONE:4},u=t.IncomingMessage=function(t,r,s,c){var u=this;if(o.Readable.call(u),u._mode=s,u.headers={},u.rawHeaders=[],u.trailers={},u.rawTrailers=[],u.on("end",(function(){e.nextTick((function(){u.emit("close")}))})),"fetch"===s){if(u._fetchResponse=r,u.url=r.url,u.statusCode=r.status,u.statusMessage=r.statusText,r.headers.forEach((function(e,t){u.headers[t.toLowerCase()]=e,u.rawHeaders.push(t,e)})),a.writableStream){var d=new WritableStream({write:function(e){return new Promise((function(t,r){u._destroyed?r():u.push(new n(e))?t():u._resumeFetch=t}))},close:function(){i.clearTimeout(c),u._destroyed||u.push(null)},abort:function(e){u._destroyed||u.emit("error",e)}});try{return void r.body.pipeTo(d).catch((function(e){i.clearTimeout(c),u._destroyed||u.emit("error",e)}))}catch(p){}}var h=r.body.getReader();!function e(){h.read().then((function(t){if(!u._destroyed){if(t.done)return i.clearTimeout(c),void u.push(null);u.push(new n(t.value)),e()}})).catch((function(e){i.clearTimeout(c),u._destroyed||u.emit("error",e)}))}()}else{if(u._xhr=t,u._pos=0,u.url=t.responseURL,u.statusCode=t.status,u.statusMessage=t.statusText,t.getAllResponseHeaders().split(/\r?\n/).forEach((function(e){var t=e.match(/^([^:]+):\s*(.*)/);if(t){var r=t[1].toLowerCase();"set-cookie"===r?(void 0===u.headers[r]&&(u.headers[r]=[]),u.headers[r].push(t[2])):void 0!==u.headers[r]?u.headers[r]+=", "+t[2]:u.headers[r]=t[2],u.rawHeaders.push(t[1],t[2])}})),u._charset="x-user-defined",!a.overrideMimeType){var l=u.rawHeaders["mime-type"];if(l){var f=l.match(/;\s*charset=([^;])(;|$)/);f&&(u._charset=f[1].toLowerCase())}u._charset||(u._charset="utf-8")}}};s(u,o.Readable),u.prototype._read=function(){var e=this._resumeFetch;e&&(this._resumeFetch=null,e())},u.prototype._onXHRProgress=function(){var e=this,t=e._xhr,r=null;switch(e._mode){case"text:vbarray":if(t.readyState!==c.DONE)break;try{r=new i.VBArray(t.responseBody).toArray()}catch(d){}if(null!==r){e.push(new n(r));break}case"text":try{r=t.responseText}catch(d){e._mode="text:vbarray";break}if(r.length>e._pos){var a=r.substr(e._pos);if("x-user-defined"===e._charset){for(var s=new n(a.length),o=0;o<a.length;o++)s[o]=255&a.charCodeAt(o);e.push(s)}else e.push(a,e._charset);e._pos=r.length}break;case"arraybuffer":if(t.readyState!==c.DONE||!t.response)break;r=t.response,e.push(new n(new Uint8Array(r)));break;case"moz-chunked-arraybuffer":if(r=t.response,t.readyState!==c.LOADING||!r)break;e.push(new n(new Uint8Array(r)));break;case"ms-stream":if(r=t.response,t.readyState!==c.LOADING)break;var u=new i.MSStreamReader;u.onprogress=function(){u.result.byteLength>e._pos&&(e.push(new n(new Uint8Array(u.result.slice(e._pos)))),e._pos=u.result.byteLength)},u.onload=function(){e.push(null)},u.readAsArrayBuffer(r)}e._xhr.readyState===c.DONE&&"ms-stream"!==e._mode&&e.push(null)}}).call(this,r(23),r(19),r(21).Buffer)},function(e,t,r){(t=e.exports=r(109)).Stream=t,t.Readable=t,t.Writable=r(112),t.Duplex=r(43),t.Transform=r(113),t.PassThrough=r(209)},function(e,t,r){"use strict";(function(t,i){var n=r(33);e.exports=b;var a,s=r(75);b.ReadableState=g;r(49).EventEmitter;var o=function(e,t){return e.listeners(t).length},c=r(110),u=r(42).Buffer,d=t.Uint8Array||function(){};var h=Object.create(r(28));h.inherits=r(24);var l=r(206),f=void 0;f=l&&l.debuglog?l.debuglog("stream"):function(){};var p,v=r(207),m=r(111);h.inherits(b,c);var y=["error","close","destroy","pause","resume"];function g(e,t){e=e||{};var i=t instanceof(a=a||r(43));this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,s=e.readableHighWaterMark,o=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(s||0===s)?s:o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(p||(p=r(58).StringDecoder),this.decoder=new p(e.encoding),this.encoding=e.encoding)}function b(e){if(a=a||r(43),!(this instanceof b))return new b(e);this._readableState=new g(e,this),this.readable=!0,e&&("function"===typeof e.read&&(this._read=e.read),"function"===typeof e.destroy&&(this._destroy=e.destroy)),c.call(this)}function k(e,t,r,i,n){var a,s=e._readableState;null===t?(s.reading=!1,function(e,t){if(t.ended)return;if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,O(e)}(e,s)):(n||(a=function(e,t){var r;i=t,u.isBuffer(i)||i instanceof d||"string"===typeof t||void 0===t||e.objectMode||(r=new TypeError("Invalid non-string/buffer chunk"));var i;return r}(s,t)),a?e.emit("error",a):s.objectMode||t&&t.length>0?("string"===typeof t||s.objectMode||Object.getPrototypeOf(t)===u.prototype||(t=function(e){return u.from(e)}(t)),i?s.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):x(e,s,t,!0):s.ended?e.emit("error",new Error("stream.push() after EOF")):(s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?x(e,s,t,!1):S(e,s)):x(e,s,t,!1))):i||(s.reading=!1));return function(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}(s)}function x(e,t,r,i){t.flowing&&0===t.length&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&O(e)),S(e,t)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),b.prototype.destroy=m.destroy,b.prototype._undestroy=m.undestroy,b.prototype._destroy=function(e,t){this.push(null),t(e)},b.prototype.push=function(e,t){var r,i=this._readableState;return i.objectMode?r=!0:"string"===typeof e&&((t=t||i.defaultEncoding)!==i.encoding&&(e=u.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},b.prototype.unshift=function(e){return k(this,e,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(e){return p||(p=r(58).StringDecoder),this._readableState.decoder=new p(e),this._readableState.encoding=e,this};var w=8388608;function _(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=w?e=w:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function O(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(f("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(T,e):T(e))}function T(e){f("emit readable"),e.emit("readable"),E(e)}function S(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(C,e,t))}function C(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(f("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}function I(e){f("readable nexttick read 0"),e.read(0)}function M(e,t){t.reading||(f("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),E(e),t.flowing&&!t.reading&&e.read(0)}function E(e){var t=e._readableState;for(f("flow",t.flowing);t.flowing&&null!==e.read(););}function A(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):r=function(e,t,r){var i;e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):i=e===t.head.data.length?t.shift():r?function(e,t){var r=t.head,i=1,n=r.data;e-=n.length;for(;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(s===a.length?n+=a:n+=a.slice(0,e),0===(e-=s)){s===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break}++i}return t.length-=i,n}(e,t):function(e,t){var r=u.allocUnsafe(e),i=t.head,n=1;i.data.copy(r),e-=i.data.length;for(;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),0===(e-=s)){s===a.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(s));break}++n}return t.length-=n,r}(e,t);return i}(e,t.buffer,t.decoder),r);var r}function F(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,n.nextTick(P,t,e))}function P(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function B(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}b.prototype.read=function(e){f("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return f("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?F(this):O(this),null;if(0===(e=_(e,t))&&t.ended)return 0===t.length&&F(this),null;var i,n=t.needReadable;return f("need readable",n),(0===t.length||t.length-e<t.highWaterMark)&&f("length less than watermark",n=!0),t.ended||t.reading?f("reading or ended",n=!1):n&&(f("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=_(r,t))),null===(i=e>0?A(e,t):null)?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&F(this)),null!==i&&this.emit("data",i),i},b.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,f("pipe count=%d opts=%j",a.pipesCount,t);var c=(!t||!1!==t.end)&&e!==i.stdout&&e!==i.stderr?d:b;function u(t,i){f("onunpipe"),t===r&&i&&!1===i.hasUnpiped&&(i.hasUnpiped=!0,f("cleanup"),e.removeListener("close",y),e.removeListener("finish",g),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",u),r.removeListener("end",d),r.removeListener("end",b),r.removeListener("data",v),l=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||h())}function d(){f("onend"),e.end()}a.endEmitted?n.nextTick(c):r.once("end",c),e.on("unpipe",u);var h=function(e){return function(){var t=e._readableState;f("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&o(e,"data")&&(t.flowing=!0,E(e))}}(r);e.on("drain",h);var l=!1;var p=!1;function v(t){f("ondata"),p=!1,!1!==e.write(t)||p||((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==B(a.pipes,e))&&!l&&(f("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,p=!0),r.pause())}function m(t){f("onerror",t),b(),e.removeListener("error",m),0===o(e,"error")&&e.emit("error",t)}function y(){e.removeListener("finish",g),b()}function g(){f("onfinish"),e.removeListener("close",y),b()}function b(){f("unpipe"),r.unpipe(e)}return r.on("data",v),function(e,t,r){if("function"===typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events[t]?s(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]:e.on(t,r)}(e,"error",m),e.once("close",y),e.once("finish",g),e.emit("pipe",r),a.flowing||(f("pipe resume"),r.resume()),e},b.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,r);return this}var s=B(t.pipes,e);return-1===s||(t.pipes.splice(s,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},b.prototype.on=function(e,t){var r=c.prototype.on.call(this,e,t);if("data"===e)!1!==this._readableState.flowing&&this.resume();else if("readable"===e){var i=this._readableState;i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&O(this):n.nextTick(I,this))}return r},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var e=this._readableState;return e.flowing||(f("resume"),e.flowing=!0,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(M,e,t))}(this,e)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;for(var n in e.on("end",(function(){if(f("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(n){(f("wrapped data"),r.decoder&&(n=r.decoder.write(n)),!r.objectMode||null!==n&&void 0!==n)&&((r.objectMode||n&&n.length)&&(t.push(n)||(i=!0,e.pause())))})),e)void 0===this[n]&&"function"===typeof e[n]&&(this[n]=function(t){return function(){return e[t].apply(e,arguments)}}(n));for(var a=0;a<y.length;a++)e.on(y[a],this.emit.bind(this,y[a]));return this._read=function(t){f("wrapped _read",t),i&&(i=!1,e.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=A}).call(this,r(19),r(23))},function(e,t,r){e.exports=r(49).EventEmitter},function(e,t,r){"use strict";var i=r(33);function n(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,a=this._readableState&&this._readableState.destroyed,s=this._writableState&&this._writableState.destroyed;return a||s?(t?t(e):!e||this._writableState&&this._writableState.errorEmitted||i.nextTick(n,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?(i.nextTick(n,r,e),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(e)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},function(e,t,r){"use strict";(function(t,i,n){var a=r(33);function s(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var i=e.entry;e.entry=null;for(;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}(t,e)}}e.exports=g;var o,c=!t.browser&&["v0.10","v0.9."].indexOf(t.version.slice(0,5))>-1?i:a.nextTick;g.WritableState=y;var u=Object.create(r(28));u.inherits=r(24);var d={deprecate:r(104)},h=r(110),l=r(42).Buffer,f=n.Uint8Array||function(){};var p,v=r(111);function m(){}function y(e,t){o=o||r(43),e=e||{};var i=t instanceof o;this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,u=e.writableHighWaterMark,d=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:i&&(u||0===u)?u:d,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===e.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,i,n){--t.pendingcb,r?(a.nextTick(n,i),a.nextTick(O,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),O(e,t))}(e,r,i,t,n);else{var s=w(r);s||r.corked||r.bufferProcessing||!r.bufferedRequest||x(e,r),i?c(k,e,r,s,n):k(e,r,s,n)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function g(e){if(o=o||r(43),!p.call(g,this)&&!(this instanceof o))return new g(e);this._writableState=new y(e,this),this.writable=!0,e&&("function"===typeof e.write&&(this._write=e.write),"function"===typeof e.writev&&(this._writev=e.writev),"function"===typeof e.destroy&&(this._destroy=e.destroy),"function"===typeof e.final&&(this._final=e.final)),h.call(this)}function b(e,t,r,i,n,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}function k(e,t,r,i){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,i(),O(e,t)}function x(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var o=0,c=!0;r;)n[o]=r,r.isBuf||(c=!1),r=r.next,o+=1;n.allBuffers=c,b(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new s(t),t.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,d=r.encoding,h=r.callback;if(b(e,t,!1,t.objectMode?1:u.length,u,d,h),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function w(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){e._final((function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),O(e,t)}))}function O(e,t){var r=w(t);return r&&(!function(e,t){t.prefinished||t.finalCalled||("function"===typeof e._final?(t.pendingcb++,t.finalCalled=!0,a.nextTick(_,e,t)):(t.prefinished=!0,e.emit("prefinish")))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"))),r}u.inherits(g,h),y.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(y.prototype,"buffer",{get:d.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"===typeof Symbol&&Symbol.hasInstance&&"function"===typeof Function.prototype[Symbol.hasInstance]?(p=Function.prototype[Symbol.hasInstance],Object.defineProperty(g,Symbol.hasInstance,{value:function(e){return!!p.call(this,e)||this===g&&(e&&e._writableState instanceof y)}})):p=function(e){return e instanceof this},g.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},g.prototype.write=function(e,t,r){var i,n=this._writableState,s=!1,o=!n.objectMode&&(i=e,l.isBuffer(i)||i instanceof f);return o&&!l.isBuffer(e)&&(e=function(e){return l.from(e)}(e)),"function"===typeof t&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),"function"!==typeof r&&(r=m),n.ended?function(e,t){var r=new Error("write after end");e.emit("error",r),a.nextTick(t,r)}(this,r):(o||function(e,t,r,i){var n=!0,s=!1;return null===r?s=new TypeError("May not write null values to stream"):"string"===typeof r||void 0===r||t.objectMode||(s=new TypeError("Invalid non-string/buffer chunk")),s&&(e.emit("error",s),a.nextTick(i,s),n=!1),n}(this,n,e,r))&&(n.pendingcb++,s=function(e,t,r,i,n,a){if(!r){var s=function(e,t,r){e.objectMode||!1===e.decodeStrings||"string"!==typeof t||(t=l.from(t,r));return t}(t,i,n);i!==s&&(r=!0,n="buffer",i=s)}var o=t.objectMode?1:i.length;t.length+=o;var c=t.length<t.highWaterMark;c||(t.needDrain=!0);if(t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else b(e,t,!1,o,i,n,a);return c}(this,n,o,e,t,r)),s},g.prototype.cork=function(){this._writableState.corked++},g.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||x(this,e))},g.prototype.setDefaultEncoding=function(e){if("string"===typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),g.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))},g.prototype._writev=null,g.prototype.end=function(e,t,r){var i=this._writableState;"function"===typeof e?(r=e,e=null,t=null):"function"===typeof t&&(r=t,t=null),null!==e&&void 0!==e&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||i.finished||function(e,t,r){t.ending=!0,O(e,t),r&&(t.finished?a.nextTick(r):e.once("finish",r));t.ended=!0,e.writable=!1}(this,i,r)},Object.defineProperty(g.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),g.prototype.destroy=v.destroy,g.prototype._undestroy=v.undestroy,g.prototype._destroy=function(e,t){this.end(),t(e)}}).call(this,r(23),r(103).setImmediate,r(19))},function(e,t,r){"use strict";e.exports=s;var i=r(43),n=Object.create(r(28));function a(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,null!=t&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function s(e){if(!(this instanceof s))return new s(e);i.call(this,e),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"===typeof e.transform&&(this._transform=e.transform),"function"===typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",o)}function o(){var e=this;"function"===typeof this._flush?this._flush((function(t,r){c(e,t,r)})):c(this,null,null)}function c(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}n.inherits=r(24),n.inherits(s,i),s.prototype.push=function(e,t){return this._transformState.needTransform=!1,i.prototype.push.call(this,e,t)},s.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")},s.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},s.prototype._read=function(e){var t=this._transformState;null!==t.writechunk&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0},s.prototype._destroy=function(e,t){var r=this;i.prototype._destroy.call(this,e,(function(e){t(e),r.emit("close")}))}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,r){(function(e){var i=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},i=0;i<t.length;i++)r[t[i]]=Object.getOwnPropertyDescriptor(e,t[i]);return r},n=/%[sdj%]/g;t.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(o(arguments[r]));return t.join(" ")}r=1;for(var i=arguments,a=i.length,s=String(e).replace(n,(function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(t){return"[Circular]"}default:return e}})),c=i[r];r<a;c=i[++r])v(c)||!k(c)?s+=" "+c:s+=" "+o(c);return s},t.deprecate=function(r,i){if("undefined"!==typeof e&&!0===e.noDeprecation)return r;if("undefined"===typeof e)return function(){return t.deprecate(r,i).apply(this,arguments)};var n=!1;return function(){if(!n){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),n=!0}return r.apply(this,arguments)}};var a,s={};function o(e,r){var i={seen:[],stylize:u};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),p(r)?i.showHidden=r:r&&t._extend(i,r),g(i.showHidden)&&(i.showHidden=!1),g(i.depth)&&(i.depth=2),g(i.colors)&&(i.colors=!1),g(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=c),d(i,e,i.depth)}function c(e,t){var r=o.styles[t];return r?"\x1b["+o.colors[r][0]+"m"+e+"\x1b["+o.colors[r][1]+"m":e}function u(e,t){return e}function d(e,r,i){if(e.customInspect&&r&&_(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var n=r.inspect(i,e);return y(n)||(n=d(e,n,i)),n}var a=function(e,t){if(g(t))return e.stylize("undefined","undefined");if(y(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(m(t))return e.stylize(""+t,"number");if(p(t))return e.stylize(""+t,"boolean");if(v(t))return e.stylize("null","null")}(e,r);if(a)return a;var s=Object.keys(r),o=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(r)),w(r)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return h(r);if(0===s.length){if(_(r)){var c=r.name?": "+r.name:"";return e.stylize("[Function"+c+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(x(r))return e.stylize(Date.prototype.toString.call(r),"date");if(w(r))return h(r)}var u,k="",O=!1,T=["{","}"];(f(r)&&(O=!0,T=["[","]"]),_(r))&&(k=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(k=" "+RegExp.prototype.toString.call(r)),x(r)&&(k=" "+Date.prototype.toUTCString.call(r)),w(r)&&(k=" "+h(r)),0!==s.length||O&&0!=r.length?i<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),u=O?function(e,t,r,i,n){for(var a=[],s=0,o=t.length;s<o;++s)I(t,String(s))?a.push(l(e,t,r,i,String(s),!0)):a.push("");return n.forEach((function(n){n.match(/^\d+$/)||a.push(l(e,t,r,i,n,!0))})),a}(e,r,i,o,s):s.map((function(t){return l(e,r,i,o,t,O)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(u,k,T)):T[0]+k+T[1]}function h(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,i,n,a){var s,o,c;if((c=Object.getOwnPropertyDescriptor(t,n)||{value:t[n]}).get?o=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(o=e.stylize("[Setter]","special")),I(i,n)||(s="["+n+"]"),o||(e.seen.indexOf(c.value)<0?(o=v(r)?d(e,c.value,null):d(e,c.value,r-1)).indexOf("\n")>-1&&(o=a?o.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+o.split("\n").map((function(e){return"   "+e})).join("\n")):o=e.stylize("[Circular]","special")),g(s)){if(a&&n.match(/^\d+$/))return o;(s=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+o}function f(e){return Array.isArray(e)}function p(e){return"boolean"===typeof e}function v(e){return null===e}function m(e){return"number"===typeof e}function y(e){return"string"===typeof e}function g(e){return void 0===e}function b(e){return k(e)&&"[object RegExp]"===O(e)}function k(e){return"object"===typeof e&&null!==e}function x(e){return k(e)&&"[object Date]"===O(e)}function w(e){return k(e)&&("[object Error]"===O(e)||e instanceof Error)}function _(e){return"function"===typeof e}function O(e){return Object.prototype.toString.call(e)}function T(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(r){if(g(a)&&(a=Object({NODE_ENV:"production",PUBLIC_URL:"/withdrawal-strategy",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).NODE_DEBUG||""),r=r.toUpperCase(),!s[r])if(new RegExp("\\b"+r+"\\b","i").test(a)){var i=e.pid;s[r]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",r,i,e)}}else s[r]=function(){};return s[r]},t.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=f,t.isBoolean=p,t.isNull=v,t.isNullOrUndefined=function(e){return null==e},t.isNumber=m,t.isString=y,t.isSymbol=function(e){return"symbol"===typeof e},t.isUndefined=g,t.isRegExp=b,t.isObject=k,t.isDate=x,t.isError=w,t.isFunction=_,t.isPrimitive=function(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e},t.isBuffer=r(221);var S=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),S[e.getMonth()],t].join(" ")}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",C(),t.format.apply(t,arguments))},t.inherits=r(222),t._extend=function(e,t){if(!t||!k(t))return e;for(var r=Object.keys(t),i=r.length;i--;)e[r[i]]=t[r[i]];return e};var M="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function E(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(M&&e[M]){var t;if("function"!==typeof(t=e[M]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,i=new Promise((function(e,i){t=e,r=i})),n=[],a=0;a<arguments.length;a++)n.push(arguments[a]);n.push((function(e,i){e?r(e):t(i)}));try{e.apply(this,n)}catch(s){r(s)}return i}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),M&&Object.defineProperty(t,M,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,i(e))},t.promisify.custom=M,t.callbackify=function(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],i=0;i<arguments.length;i++)r.push(arguments[i]);var n=r.pop();if("function"!==typeof n)throw new TypeError("The last argument must be of type Function");var a=this,s=function(){return n.apply(a,arguments)};t.apply(this,r).then((function(t){e.nextTick(s,null,t)}),(function(t){e.nextTick(E,t,s)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,i(t)),r}}).call(this,r(23))},function(e,t,r){"use strict";e.exports=function(e,t,r,i){for(var n=65535&e|0,a=e>>>16&65535|0,s=0;0!==r;){r-=s=r>2e3?2e3:r;do{a=a+(n=n+t[i++]|0)|0}while(--s);n%=65521,a%=65521}return n|a<<16|0}},function(e,t,r){"use strict";var i=function(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();e.exports=function(e,t,r,n){var a=i,s=n+r;e^=-1;for(var o=n;o<s;o++)e=e>>>8^a[255&(e^t[o])];return-1^e}},function(e,t,r){"use strict";var i=Number.isFinite,n=Number.isInteger,a=Array.isArray,s=function(e){return void 0!==e&&null!==e},o=function(e){return"string"===typeof e},c=function(e){return null!==e&&"object"===typeof e},u=function(e){return s(e)&&e.toString||i(e)},d=function(e,t){return c(e)?e[t]:void 0},h=function(e,t,r){return c(e)?t in e&&null!==e[t]?e[t]:e[r]:void 0},l=function(e){return i(e)||o(e)?parseFloat(e):NaN},f=function(e){return i(e)||o(e)?parseInt(e,10):NaN};e.exports={isNumber:i,isInteger:n,isArray:a,isObject:c,isString:o,isStringCoercible:u,isDictionary:function(e){return c(e)&&Object.getPrototypeOf(e)===Object.prototype&&!a(e)&&!function(e){return e instanceof RegExp}(e)},hasProps:s,prop:d,asFloat:l,asInteger:f,safeFloat:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l(d(e,t));return i(n)?n:r},safeInteger:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:f(d(e,t));return i(n)?n:r},safeIntegerProduct:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f(d(e,t));return i(a)?parseInt(a*r):n},safeTimestamp:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:l(d(e,t));return i(n)?parseInt(1e3*n):r},safeValue:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return s(i)?i:r},safeString:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return u(i)?String(i):r},safeStringLower:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return u(i)?String(i).toLowerCase():r},safeStringUpper:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:d(e,t);return u(i)?String(i).toUpperCase():r},safeFloat2:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l(h(e,t,r));return i(a)?a:n},safeInteger2:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:f(h(e,t,r));return i(a)?a:n},safeIntegerProduct2:function(e,t,r,n,a){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:f(h(e,t,r));return i(s)?parseInt(s*n):a},safeTimestamp2:function(e,t,r,n){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l(h(e,t,r));return i(a)?parseInt(1e3*a):n},safeValue2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return s(n)?n:i},safeString2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return u(n)?String(n):i},safeStringLower2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return u(n)?String(n).toLowerCase():i},safeStringUpper2:function(e,t,r,i){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h(e,t,r);return u(n)?String(n).toUpperCase():i}}},function(e,t,r){"use strict";var i=Object.prototype.hasOwnProperty,n=Array.isArray,a=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),s=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},i=0;i<e.length;++i)"undefined"!==typeof e[i]&&(r[i]=e[i]);return r};e.exports={arrayToObject:s,assign:function(e,t){return Object.keys(t).reduce((function(e,r){return e[r]=t[r],e}),e)},combine:function(e,t){return[].concat(e,t)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],i=0;i<t.length;++i)for(var a=t[i],s=a.obj[a.prop],o=Object.keys(s),c=0;c<o.length;++c){var u=o[c],d=s[u];"object"===typeof d&&null!==d&&-1===r.indexOf(d)&&(t.push({obj:s,prop:u}),r.push(d))}return function(e){for(;e.length>1;){var t=e.pop(),r=t.obj[t.prop];if(n(r)){for(var i=[],a=0;a<r.length;++a)"undefined"!==typeof r[a]&&i.push(r[a]);t.obj[t.prop]=i}}}(t),e},decode:function(e,t,r){var i=e.replace(/\+/g," ");if("iso-8859-1"===r)return i.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(i)}catch(n){return i}},encode:function(e,t,r){if(0===e.length)return e;var i="string"===typeof e?e:String(e);if("iso-8859-1"===r)return escape(i).replace(/%u[0-9a-f]{4}/gi,(function(e){return"%26%23"+parseInt(e.slice(2),16)+"%3B"}));for(var n="",s=0;s<i.length;++s){var o=i.charCodeAt(s);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?n+=i.charAt(s):o<128?n+=a[o]:o<2048?n+=a[192|o>>6]+a[128|63&o]:o<55296||o>=57344?n+=a[224|o>>12]+a[128|o>>6&63]+a[128|63&o]:(s+=1,o=65536+((1023&o)<<10|1023&i.charCodeAt(s)),n+=a[240|o>>18]+a[128|o>>12&63]+a[128|o>>6&63]+a[128|63&o])}return n},isBuffer:function(e){return!(!e||"object"!==typeof e)&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,a){if(!r)return t;if("object"!==typeof r){if(n(t))t.push(r);else{if(!t||"object"!==typeof t)return[t,r];(a&&(a.plainObjects||a.allowPrototypes)||!i.call(Object.prototype,r))&&(t[r]=!0)}return t}if(!t||"object"!==typeof t)return[t].concat(r);var o=t;return n(t)&&!n(r)&&(o=s(t,a)),n(t)&&n(r)?(r.forEach((function(r,n){if(i.call(t,n)){var s=t[n];s&&"object"===typeof s&&r&&"object"===typeof r?t[n]=e(s,r,a):t.push(r)}else t[n]=r})),t):Object.keys(r).reduce((function(t,n){var s=r[n];return i.call(t,n)?t[n]=e(t[n],s,a):t[n]=s,t}),o)}}},function(e,t,r){"use strict";var i=String.prototype.replace,n=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return i.call(e,n,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(e,t,r){(function(t){var i=r(27)._;function n(e,r){null!=e&&("number"==typeof e?this.fromNumber(e,r):t.isBuffer(e)?this.fromBuffer(e):null==r&&"string"!=typeof e?this.fromByteArray(e):this.fromString(e,r))}function a(){return new n(null)}n.prototype.am=function(e,t,r,i,n,a){for(var s=16383&t,o=t>>14;--a>=0;){var c=16383&this[e],u=this[e++]>>14,d=o*c+u*s;n=((c=s*c+((16383&d)<<14)+r[i]+n)>>28)+(d>>14)+o*u,r[i++]=268435455&c}return n},n.prototype.DB=28,n.prototype.DM=268435455,n.prototype.DV=1<<28;n.prototype.FV=Math.pow(2,52),n.prototype.F1=24,n.prototype.F2=4;var s,o,c=new Array;for(s="0".charCodeAt(0),o=0;o<=9;++o)c[s++]=o;for(s="a".charCodeAt(0),o=10;o<36;++o)c[s++]=o;for(s="A".charCodeAt(0),o=10;o<36;++o)c[s++]=o;function u(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function d(e,t){var r=c[e.charCodeAt(t)];return null==r?-1:r}function h(e){var t=a();return t.fromInt(e),t}function l(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function f(e){this.m=e}function p(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function v(e,t){return e&t}function m(e,t){return e|t}function y(e,t){return e^t}function g(e){if(0===e)return-1;var t=0;return 0===(65535&e)&&(e>>=16,t+=16),0===(255&e)&&(e>>=8,t+=8),0===(15&e)&&(e>>=4,t+=4),0===(3&e)&&(e>>=2,t+=2),0===(1&e)&&++t,t}function b(){}function k(e){return e}function x(e){this.r2=a(),this.q3=a(),n.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}f.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},f.prototype.revert=function(e){return e},f.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},f.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},f.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},p.prototype.convert=function(e){var t=a();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(n.ZERO)>0&&this.m.subTo(t,t),t},p.prototype.revert=function(e){var t=a();return e.copyTo(t),this.reduce(t),t},p.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],i=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},p.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},p.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},b.prototype.convert=k,b.prototype.revert=k,b.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},b.prototype.sqrTo=function(e,t){e.squareTo(t)},x.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=a();return e.copyTo(t),this.reduce(t),t},x.prototype.revert=function(e){return e},x.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},x.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},x.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},n.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},n.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},n.prototype.fromString=function(e,t,r){var i;switch(t){case 2:i=1;break;case 4:i=2;break;case 8:i=3;break;case 16:i=4;break;case 32:i=5;break;case 256:i=8;break;default:return void this.fromRadix(e,t)}this.t=0,this.s=0;for(var a=e.length,s=!1,o=0;--a>=0;){var c=8==i?255&e[a]:d(e,a);c<0?"-"==e.charAt(a)&&(s=!0):(s=!1,0===o?this[this.t++]=c:o+i>this.DB?(this[this.t-1]|=(c&(1<<this.DB-o)-1)<<o,this[this.t++]=c>>this.DB-o):this[this.t-1]|=c<<o,(o+=i)>=this.DB&&(o-=this.DB))}r||8!=i||0==(128&e[0])||(this.s=-1,o>0&&(this[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),s&&n.ZERO.subTo(this,this)},n.prototype.fromByteArray=function(e,t){this.fromString(e,256,t)},n.prototype.fromBuffer=function(e){this.fromString(e,256,!0)},n.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},n.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},n.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},n.prototype.lShiftTo=function(e,t){var r,i=e%this.DB,n=this.DB-i,a=(1<<n)-1,s=Math.floor(e/this.DB),o=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>n|o,o=(this[r]&a)<<i;for(r=s-1;r>=0;--r)t[r]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()},n.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,n=this.DB-i,a=(1<<i)-1;t[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&a)<<n,t[s-r]=this[s]>>i;i>0&&(t[this.t-r-1]|=(this.s&a)<<n),t.t=this.t-r,t.clamp()}},n.prototype.subTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},n.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),a=r.t;for(t.t=a+i.t;--a>=0;)t[a]=0;for(a=0;a<i.t;++a)t[a+r.t]=r.am(0,i[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&n.ZERO.subTo(t,t)},n.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},n.prototype.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var s=this.abs();if(s.t<i.t)return null!=t&&t.fromInt(0),void(null!=r&&this.copyTo(r));null==r&&(r=a());var o=a(),c=this.s,u=e.s,d=this.DB-l(i[i.t-1]);d>0?(i.lShiftTo(d,o),s.lShiftTo(d,r)):(i.copyTo(o),s.copyTo(r));var h=o.t,f=o[h-1];if(0!==f){var p=f*(1<<this.F1)+(h>1?o[h-2]>>this.F2:0),v=this.FV/p,m=(1<<this.F1)/p,y=1<<this.F2,g=r.t,b=g-h,k=null==t?a():t;for(o.dlShiftTo(b,k),r.compareTo(k)>=0&&(r[r.t++]=1,r.subTo(k,r)),n.ONE.dlShiftTo(h,k),k.subTo(o,o);o.t<h;)o[o.t++]=0;for(;--b>=0;){var x=r[--g]==f?this.DM:Math.floor(r[g]*v+(r[g-1]+y)*m);if((r[g]+=o.am(0,x,r,b,0,h))<x)for(o.dlShiftTo(b,k),r.subTo(k,r);r[g]<--x;)r.subTo(k,r)}null!=t&&(r.drShiftTo(h,t),c!=u&&n.ZERO.subTo(t,t)),r.t=h,r.clamp(),d>0&&r.rShiftTo(d,r),c<0&&n.ZERO.subTo(r,r)}}},n.prototype.invDigit=function(){if(this.t<1)return 0;var e=this[0];if(0===(1&e))return 0;var t=3&e;return(t=(t=(t=(t=t*(2-(15&e)*t)&15)*(2-(255&e)*t)&255)*(2-((65535&e)*t&65535))&65535)*(2-e*t%this.DV)%this.DV)>0?this.DV-t:-t},n.prototype.isEven=function(){return 0===(this.t>0?1&this[0]:this.s)},n.prototype.exp=function(e,t){if(e>4294967295||e<1)return n.ONE;var r=a(),i=a(),s=t.convert(this),o=l(e)-1;for(s.copyTo(r);--o>=0;)if(t.sqrTo(r,i),(e&1<<o)>0)t.mulTo(i,s,r);else{var c=r;r=i,i=c}return t.revert(r)},n.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},n.prototype.toRadix=function(e){if(null==e&&(e=10),0===this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=h(r),n=a(),s=a(),o="";for(this.divRemTo(i,n,s);n.signum()>0;)o=(r+s.intValue()).toString(e).substr(1)+o,n.divRemTo(i,n,s);return s.intValue().toString(e)+o},n.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),a=!1,s=0,o=0,c=0;c<e.length;++c){var u=d(e,c);u<0?"-"==e.charAt(c)&&0===this.signum()&&(a=!0):(o=t*o+u,++s>=r&&(this.dMultiply(i),this.dAddOffset(o,0),s=0,o=0))}s>0&&(this.dMultiply(Math.pow(t,s)),this.dAddOffset(o,0)),a&&n.ZERO.subTo(this,this)},n.prototype.bitwiseTo=function(e,t,r){var i,n,a=Math.min(e.t,this.t);for(i=0;i<a;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=a;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=a;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},n.prototype.addTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},n.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},n.prototype.dAddOffset=function(e,t){if(0!==e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},n.prototype.multiplyLowerTo=function(e,t,r){var i,n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},n.prototype.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},n.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);var t;if(16==e)t=4;else if(8==e)t=3;else if(2==e)t=1;else if(32==e)t=5;else{if(4!=e)return this.toRadix(e);t=2}var r,i=(1<<t)-1,n=!1,a="",s=this.t,o=this.DB-s*this.DB%t;if(s-- >0)for(o<this.DB&&(r=this[s]>>o)>0&&(n=!0,a=u(r));s>=0;)o<t?(r=(this[s]&(1<<o)-1)<<t-o,r|=this[--s]>>(o+=this.DB-t)):(r=this[s]>>(o-=t)&i,o<=0&&(o+=this.DB,--s)),r>0&&(n=!0),n&&(a+=u(r));return n?a:"0"},n.prototype.negate=function(){var e=a();return n.ZERO.subTo(this,e),e},n.prototype.abs=function(){return this.s<0?this.negate():this},n.prototype.compareTo=function(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(0!=(t=r-e.t))return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},n.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+l(this[this.t-1]^this.s&this.DM)},n.prototype.mod=function(e){var t=a();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(n.ZERO)>0&&e.subTo(t,t),t},n.prototype.clone=function(){var e=a();return this.copyTo(e),e},n.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0===this.t)return-1}else{if(1==this.t)return this[0];if(0===this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},n.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},n.prototype.toByteArray=function(){var e=this.t,t=new Array;t[0]=this.s;var r,i=this.DB-e*this.DB%8,n=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[n++]=r|this.s<<this.DB-i);e>=0;)i<8?(r=(this[e]&(1<<i)-1)<<8-i,r|=this[--e]>>(i+=this.DB-8)):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),0!=(128&r)&&(r|=-256),0===n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(t[n++]=r);return t},n.prototype.toBuffer=function(e){var r=t.from(this.toByteArray());if(!0===e&&0===r[0])r=r.slice(1);else if(i.isNumber(e)){if(r.length>e){for(var n=0;n<r.length-e;n++)if(0!==r[n])return null;return r.slice(r.length-e)}if(r.length<e){var a=t.alloc(e);return a.fill(0,0,e-r.length),r.copy(a,e-r.length),a}}return r},n.prototype.equals=function(e){return 0==this.compareTo(e)},n.prototype.min=function(e){return this.compareTo(e)<0?this:e},n.prototype.max=function(e){return this.compareTo(e)>0?this:e},n.prototype.and=function(e){var t=a();return this.bitwiseTo(e,v,t),t},n.prototype.or=function(e){var t=a();return this.bitwiseTo(e,m,t),t},n.prototype.xor=function(e){var t=a();return this.bitwiseTo(e,y,t),t},n.prototype.not=function(){for(var e=a(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},n.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+g(this[e]);return this.s<0?this.t*this.DB:-1},n.prototype.add=function(e){var t=a();return this.addTo(e,t),t},n.prototype.subtract=function(e){var t=a();return this.subTo(e,t),t},n.prototype.multiply=function(e){var t=a();return this.multiplyTo(e,t),t},n.prototype.divide=function(e){var t=a();return this.divRemTo(e,t,null),t},n.prototype.remainder=function(e){var t=a();return this.divRemTo(e,null,t),t},n.prototype.modPow=function(e,t){var r,i,n=e.bitLength(),s=h(1);if(n<=0)return s;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new f(t):t.isEven()?new x(t):new p(t);var o=new Array,c=3,u=r-1,d=(1<<r)-1;if(o[1]=i.convert(this),r>1){var v=a();for(i.sqrTo(o[1],v);c<=d;)o[c]=a(),i.mulTo(v,o[c-2],o[c]),c+=2}var m,y,g=e.t-1,b=!0,k=a();for(n=l(e[g])-1;g>=0;){for(n>=u?m=e[g]>>n-u&d:(m=(e[g]&(1<<n+1)-1)<<u-n,g>0&&(m|=e[g-1]>>this.DB+n-u)),c=r;0===(1&m);)m>>=1,--c;if((n-=c)<0&&(n+=this.DB,--g),b)o[m].copyTo(s),b=!1;else{for(;c>1;)i.sqrTo(s,k),i.sqrTo(k,s),c-=2;c>0?i.sqrTo(s,k):(y=s,s=k,k=y),i.mulTo(k,o[m],s)}for(;g>=0&&0===(e[g]&1<<n);)i.sqrTo(s,k),y=s,s=k,k=y,--n<0&&(n=this.DB-1,--g)}return i.revert(s)},n.prototype.pow=function(e){return this.exp(e,new b)},n.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var i=t;t=r,r=i}var n=t.getLowestSetBit(),a=r.getLowestSetBit();if(a<0)return t;for(n<a&&(a=n),a>0&&(t.rShiftTo(a,t),r.rShiftTo(a,r));t.signum()>0;)(n=t.getLowestSetBit())>0&&t.rShiftTo(n,t),(n=r.getLowestSetBit())>0&&r.rShiftTo(n,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return a>0&&r.lShiftTo(a,r),r},n.int2char=u,n.ZERO=h(0),n.ONE=h(1),n.prototype.square=function(){var e=a();return this.squareTo(e),e},e.exports=n}).call(this,r(21).Buffer)},function(e,t,r){e.exports={pkcs1:r(242),isEncryption:function(t){return e.exports[t]&&e.exports[t].isEncryption},isSignature:function(t){return e.exports[t]&&e.exports[t].isSignature}}},function(e,t,r){var i=r(246);e.exports={Ber:i,BerReader:i.Reader}},function(e,t){e.exports={newInvalidAsn1Error:function(e){var t=new Error;return t.name="InvalidAsn1Error",t.message=e||"",t}}},function(e,t){e.exports={EOC:0,Boolean:1,Integer:2,BitString:3,OctetString:4,Null:5,OID:6,ObjectDescriptor:7,External:8,Real:9,Enumeration:10,PDV:11,Utf8String:12,RelativeOID:13,Sequence:16,Set:17,NumericString:18,PrintableString:19,T61String:20,VideotexString:21,IA5String:22,UTCTime:23,GeneralizedTime:24,GraphicString:25,VisibleString:26,GeneralString:28,UniversalString:29,CharacterString:30,BMPString:31,Constructor:32,Context:128}},function(e,t,r){"use strict";var i,n=t,a=r(29),s=a.utils.assert;function o(e){"short"===e.type?this.curve=new a.curve.short(e):"edwards"===e.type?this.curve=new a.curve.edwards(e):this.curve=new a.curve.mont(e),this.g=this.curve.g,this.n=this.curve.n,this.hash=e.hash,s(this.g.validate(),"Invalid curve"),s(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function c(e,t){Object.defineProperty(n,e,{configurable:!0,enumerable:!0,get:function(){var r=new o(t);return Object.defineProperty(n,e,{configurable:!0,enumerable:!0,value:r}),r}})}n.PresetCurve=o,c("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:"SHA256",gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),c("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:"SHA256",gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),c("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:"SHA256",gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),c("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:"SHA384",gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),c("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:"SHA512",gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),c("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["9"]}),c("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:"SHA256",gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{i=r(254)}catch(u){i=void 0}c("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:"SHA256",beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",i]})},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t){e.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(5),o=r(6),c=r(265),u=Date.now,d=function(){return 1e3*u()},h=u,l=setTimeout,f=function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u()+r,a=function(){},s=!0,o=i((function(){s=!0;var r=n-u();r>0?a=e(t,r,i,n):t()}),r);return function(){s&&(s=!1,clearTimeout(o)),a()}},p=function(e){s(r,e);var t=o(r);function r(){var e;a(this,r);var i="timed out";return(e=t.call(this,i)).constructor=r,e.__proto__=r.prototype,e.message=i,e}return r}(c(Error)),v=function(e){if("string"===typeof e&&e&&!e.match(/^[0-9]+$/)&&!(e.indexOf("-")<0||e.indexOf(":")<0))try{var t=Date.parse(e.indexOf("+")>=0||"Z"===e.slice(-1)?e:(e+"Z").replace(/\s(\d\d):/,"T$1:"));if(Number.isNaN(t))return;return t}catch(r){return}};e.exports={now:u,microseconds:d,milliseconds:h,seconds:function(){return Math.floor(u()/1e3)},iso8601:function(e){var t=void 0;if(t="number"===typeof e?Math.floor(e):parseInt(e,10),!(Number.isNaN(t)||t<0))try{return new Date(t).toISOString()}catch(r){return}},parse8601:v,rfc2616:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return new Date(e).toUTCString()},uuidv1:function(){var e=(10*d()+122192928e9).toString(16);return e.slice(7,15)+e.slice(3,7)+"1"+e.slice(0,3)+"9696"+"ff".repeat(6)},parseDate:function(e){if("string"===typeof e&&e){if(e.indexOf("GMT")>=0)try{return Date.parse(e)}catch(t){return}return v(e)}},mdy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";t=t||"";var r=new Date(e),i=r.getUTCFullYear().toString(),n=r.getUTCMonth()+1,a=r.getUTCDate();return(n=n<10?"0"+n:n.toString())+t+(a=a<10?"0"+a:a.toString())+t+i},ymd:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";t=t||"";var r=new Date(e),i=r.getUTCFullYear().toString(),n=r.getUTCMonth()+1,a=r.getUTCDate();return i+t+(n=n<10?"0"+n:n.toString())+t+(a=a<10?"0"+a:a.toString())},ymdhms:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" ",r=new Date(e),i=r.getUTCFullYear(),n=r.getUTCMonth()+1,a=r.getUTCDate(),s=r.getUTCHours(),o=r.getUTCMinutes(),c=r.getUTCSeconds();return i+"-"+(n=n<10?"0"+n:n)+"-"+(a=a<10?"0"+a:a)+t+(s=s<10?"0"+s:s)+":"+(o=o<10?"0"+o:o)+":"+(c=c<10?"0"+c:c)},setTimeout_safe:f,sleep:function(e){return new Promise((function(t){return f(t,e)}))},TimedOut:p,timeout:function(){var e=n(i.mark((function e(t,r){var n,a;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){},a=new Promise((function(e){return n=f(e,t)})),e.prev=2,e.next=5,Promise.race([r,a.then((function(){throw new p}))]);case 5:return e.abrupt("return",e.sent);case 6:return e.prev=6,n(),e.finish(6);case 9:case"end":return e.stop()}}),e,null,[[2,,6,9]])})));return function(t,r){return e.apply(this,arguments)}}()}},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.InsufficientFunds,p=l.OrderNotFound;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"acx",name:"ACX",countries:["AU"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/30247614-1fe61c74-9621-11e7-9e8c-f1a627afa279.jpg",extension:".json",api:"https://acx.io/api",www:"https://acx.io",doc:"https://acx.io/documents/api_v2"},api:{public:{get:["depth","k_with_pending_trades","k","markets","order_book","order_book/{market}","tickers","tickers/{market}","timestamp","trades","trades/{market}"]},private:{get:["members/me","deposits","deposit","deposit_address","orders","order","trades/my","withdraws","withdraw"],post:["orders","orders/multi","orders/clear","order/delete","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!0,withdraw:{}}},commonCurrencies:{PLA:"Plair"},exceptions:{2002:f,2003:p}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=s.id,c=s.name,u=this.safeString(s,"base_unit"),d=this.safeString(s,"quote_unit"),void 0!==u&&void 0!==d||(h=c.split("/"),u=h[0].toLowerCase(),d=h[1].toLowerCase()),l=u.toUpperCase(),f=d.toUpperCase(),l=this.safeCurrencyCode(l),f=this.safeCurrencyCode(f),p={amount:8,price:8},n.push({id:o,symbol:c,base:l,quote:f,baseId:u,quoteId:d,precision:p,info:s,active:void 0,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,n=this.safeValue(r,"accounts"),a={info:n},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"locked"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,c=this.safeTimestamp(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at");e=e.ticker;var i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=Object.keys(n),s={},o=0;o<a.length;o++)c=a[o],u=void 0,d=c,c in this.markets_by_id?(u=this.markets_by_id[c],d=u.symbol):(h=c.slice(0,3),l=c.slice(3,6),h=h.toUpperCase(),l=l.toUpperCase(),h=this.safeCurrencyCode(h),l=this.safeCurrencyCode(l),d=h+"/"+l),s[d]=this.parseTicker(n[c],u);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTickersMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"tid"),n=void 0;return void 0!==t&&(n=t.symbol),{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"funds"),fee:void 0}}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",1e3*r);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=500),c={market:o.id,period:this.timeframes[r],limit:a},void 0!==n&&(c.timestamp=parseInt(n/1e3)),e.next=12,this.publicGetK(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"created_at")),a=this.parseOrderStatus(this.safeString(e,"state")),s=this.safeString(e,"type"),o=this.safeString(e,"side"),c=this.safeString(e,"id");return this.safeOrder({id:c,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:a,symbol:i,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:this.safeFloat(e,"price"),stopPrice:void 0,amount:this.safeFloat(e,"volume"),filled:this.safeFloat(e,"executed_volume"),remaining:this.safeFloat(e,"remaining_volume"),trades:void 0,fee:void 0,info:e,cost:void 0,average:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t)},e.next=7,this.privateGetOrder(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c={market:this.marketId(t),side:n,volume:a.toString(),ord_type:r},"limit"===r&&(c.price=s.toString()),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,d=this.safeValue(u,"market"),h=this.safeValue(this.markets_by_id,d),e.abrupt("return",this.parseOrder(u,h));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderDelete(this.extend(n,r));case 7:if(a=e.sent,s=this.parseOrder(a),"closed"!==(o=s.status)&&"canceled"!==o){e.next=12;break}throw new p(this.id+" "+this.json(s));case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o={currency:s.id,sum:r,address:n},e.next=9,this.privatePostWithdraw(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",{info:c,id:void 0});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"encodeParams",value:function(e){if("orders"in e){for(var t=e.orders,r=this.urlencode(this.keysort(this.omit(e,"orders"))),i=0;i<t.length;i++)for(var n=t[i],a=Object.keys(n),s=0;s<a.length;s++){var o=a[s];r+="&orders%5B%5D%5B"+o+"%5D="+n[o].toString()}return r}return this.urlencode(this.keysort(e))}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i);"extension"in this.urls&&(s+=this.urls.extension);var o=this.omit(i,this.extractParams(e)),c=this.urls.api+s;if("public"===t)Object.keys(o).length&&(c+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),d=this.encodeParams(this.extend({access_key:this.apiKey,tonce:u},i)),h=r+"|"+s+"|"+d,l=this.hmac(this.encode(h),this.encode(this.secret)),f=d+"&signature="+l;"GET"===r?c+="?"+f:(a=f,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&400===e){var u=this.safeValue(s,"error"),d=this.safeString(u,"code"),h=this.id+" "+this.json(s);this.throwExactlyMatchedException(this.exceptions,d,h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.AuthenticationError,m=f.ExchangeError,y=f.InsufficientFunds,g=f.InvalidOrder,b=f.BadSymbol,k=f.PermissionDenied,x=f.BadRequest,w=r(13),_=w.ROUND,O=w.TICK_SIZE;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"ascendex",name:"AscendEX",countries:["SG","CN"],rateLimit:500,has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchTrades:!0,fetchAccounts:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchDepositAddress:!0,fetchTransactions:!0,fetchDeposits:!0,fetchWithdrawals:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"1d","1w":"1w","1M":"1m"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/1294454/112027508-47984600-8b48-11eb-9e17-d26459cc36c6.jpg",api:"https://ascendex.com",test:"https://bitmax-test.io",www:"https://ascendex.com",doc:["https://bitmax-exchange.github.io/bitmax-pro-api/#bitmax-pro-api-documentation"],fees:"https://ascendex.com/en/feerate/transactionfee-traderate",referral:"https://bitmax.io/#/register?inviteCode=EL6BXBQM"},api:{public:{get:["assets","products","ticker","barhist/info","barhist","depth","trades","cash/assets","cash/products","margin/assets","margin/products","futures/collateral","futures/contracts","futures/ref-px","futures/market-data","futures/funding-rates"]},accountCategory:{get:["balance","order/open","order/status","order/hist/current","risk"],post:["order","order/batch"],delete:["order","order/all","order/batch"]},accountGroup:{get:["cash/balance","margin/balance","margin/risk","transfer","futures/collateral-balance","futures/position","futures/risk","futures/funding-payments","order/hist"],post:["futures/transfer/deposit","futures/transfer/withdraw"]},private:{get:["info","wallet/transactions","wallet/deposit/address"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.002,maker:.002}},precisionMode:O,options:{"account-category":"cash","account-group":void 0,fetchClosedOrders:{method:"accountGroupGetOrderHist"}},exceptions:{exact:{1900:x,2100:v,5002:b,6001:b,6010:y,60060:g,600503:g,100001:x,100002:x,100003:x,100004:x,100005:x,100006:x,100007:x,100008:b,100009:v,100010:x,100011:x,100012:x,100013:x,100101:m,150001:x,200001:v,200002:m,200003:m,200004:m,200005:m,200006:m,200007:m,200008:m,200009:m,200010:v,200011:m,200012:m,200013:m,200014:k,200015:k,300001:g,300002:g,300003:g,300004:g,300005:g,300006:g,300007:g,300008:g,300009:g,300011:y,300012:b,300013:g,300020:g,300021:g,300031:g,310001:y,310002:g,310003:g,310004:b,310005:g,510001:m,900001:m},broad:{}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL"}})}},{key:"getAccount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.safeValue(e,"account",this.options.account);return t.toLowerCase().capitalize()}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetAssets(t);case 3:return r=e.sent,e.next=6,this.publicGetMarginAssets(t);case 6:return i=e.sent,e.next=9,this.publicGetCashAssets(t);case 9:for(a=e.sent,s=this.safeValue(r,"data",[]),o=this.safeValue(i,"data",[]),c=this.safeValue(a,"data",[]),u=this.indexBy(s,"assetCode"),d=this.indexBy(o,"assetCode"),h=this.indexBy(c,"assetCode"),l=this.deepExtend(u,d,h),f=Object.keys(l),p={},v=0;v<f.length;v++)m=f[v],y=l[m],g=this.safeCurrencyCode(m),b=this.safeInteger2(y,"precisionScale","nativeScale"),k=this.safeFloat2(y,"withdrawFee","withdrawalFee"),x=this.safeString2(y,"status","statusCode"),w="Normal"===x,_="borrowAssetCode"in y,p[g]={id:m,code:g,info:y,type:void 0,margin:_,name:this.safeString(y,"assetName"),active:w,fee:k,precision:b,limits:{amount:{min:Math.pow(10,-b),max:void 0},price:{min:Math.pow(10,-b),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(y,"minWithdrawalAmt"),max:void 0}}};return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetProducts(t);case 3:return r=e.sent,e.next=6,this.publicGetCashProducts(t);case 6:return i=e.sent,e.next=9,this.publicGetFuturesContracts(t);case 9:for(a=e.sent,s=this.safeValue(r,"data",[]),o=this.indexBy(s,"symbol"),c=this.safeValue(i,"data",[]),u=this.safeValue(a,"data",[]),d=this.arrayConcat(c,u),h=this.indexBy(d,"symbol"),l=this.deepExtend(o,h),f=Object.keys(l),p=[],v=0;v<f.length;v++)m=f[v],y=l[m],g=this.safeString(y,"baseAsset"),b=this.safeString(y,"quoteAsset"),k=this.safeCurrencyCode(g),x=this.safeCurrencyCode(b),w={amount:this.safeFloat(y,"lotSize"),price:this.safeFloat(y,"tickSize")},_=this.safeString(y,"status"),O="Normal"===_,S="spot"===(T="useLot"in y?"spot":"future"),I=m,(C="future"===T)||(I=k+"/"+x),p.push({id:m,symbol:I,base:k,quote:x,baseId:g,quoteId:b,info:y,type:T,spot:S,future:C,active:O,precision:w,limits:{amount:{min:this.safeFloat(y,"minQty"),max:this.safeFloat(y,"maxQty")},price:{min:this.safeFloat(y,"tickSize"),max:void 0},cost:{min:this.safeFloat(y,"minNotional"),max:this.safeFloat(y,"maxNotional")}}});return e.abrupt("return",p);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o="quote",c=s[a],u=i*c,d=s.precision.price;return"sell"===r?u*=n:(o="base",d=s.precision.amount),u=this.decimalToPrecision(u,_,d,this.precisionMode),{type:a,currency:s[o],rate:c,cost:parseFloat(u)}}},{key:"fetchAccounts",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},r=this.safeString(this.options,"account-group"),i=void 0,void 0!==r){e.next=10;break}return e.next=6,this.privateGetInfo(t);case 6:i=e.sent,a=this.safeValue(i,"data",{}),r=this.safeString(a,"accountGroup"),this.options["account-group"]=r;case 10:return e.abrupt("return",[{id:r,type:void 0,currency:void 0,info:i}]);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return r=this.safeString(this.options,"account-category","cash"),i=this.safeValue(this.options,"fetchBalance",{}),a=this.safeString(i,"account-category",r),a=this.safeString(t,"account-category",a),t=this.omit(t,"account-category"),s=this.safeValue(this.accounts,0,{}),o=this.safeString(s,"id"),c={"account-group":o},u="accountCategoryGetBalance","futures"===a?u="accountGroupGetFuturesCollateralBalance":c["account-category"]=a,e.next=17,this[u](this.extend(c,t));case 17:for(d=e.sent,h={info:d},l=this.safeValue(d,"data",[]),f=0;f<l.length;f++)p=l[f],v=this.safeCurrencyCode(this.safeString(p,"asset")),(m=this.account()).free=this.safeFloat(p,"availableBalance"),m.total=this.safeFloat(p,"totalBalance"),h[v]=m;return e.abrupt("return",this.parseBalance(h));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),a={symbol:i.id},e.next=8,this.publicGetDepth(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeValue(o,"data",{}),u=this.safeInteger(c,"ts"),(d=this.parseOrderBook(c,u)).nonce=this.safeInteger(c,"seqnum"),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol"),a=void 0;if(n in this.markets_by_id)t=this.markets_by_id[n];else if(void 0!==n){var s=this.safeString(e,"type");if("spot"===s){var o=n.split("/"),c=i(o,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);a=h+"/"+l}}void 0===a&&void 0!==t&&(a=t.symbol);var f=this.safeFloat(e,"close"),p=this.safeValue(e,"bid",[]),v=this.safeValue(e,"ask",[]),m=this.safeFloat(e,"open"),y=void 0,g=void 0,b=void 0;return void 0!==m&&void 0!==f&&(y=f-m,m>0&&(g=y/m*100),b=this.sum(m,f)/2),{symbol:a,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(p,0),bidVolume:this.safeFloat(p,1),ask:this.safeFloat(v,0),askVolume:this.safeFloat(v,1),vwap:void 0,open:m,close:f,last:f,previousClose:void 0,change:y,percentage:g,average:b,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(a=this.marketIds(t),i.symbol=a.join(",")),e.next=8,this.publicGetTicker(this.extend(i,r));case 8:return s=e.sent,o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseTickers(o,t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,"data",{});return[this.safeInteger(t,"ts"),this.safeFloat(t,"o"),this.safeFloat(t,"h"),this.safeFloat(t,"l"),this.safeFloat(t,"c"),this.safeFloat(t,"v")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},u=this.parseTimeframe(r),d=this.safeValue(this.options,"fetchOHLCV",{}),h=this.safeInteger(d,"limit",500),void 0!==i?(c.from=i,a=void 0===a?h:Math.min(a,h),c.to=this.sum(i,a*u*1e3,1)):void 0!==a&&(c.n=a),e.next=14,this.publicGetBarhist(this.extend(c,s));case 14:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"ts"),i=this.safeFloat2(e,"price","p"),n=this.safeFloat(e,"q"),a=void 0;void 0!==i&&void 0!==n&&(a=i*n);var s=this.safeValue(e,"bm",!1),o=s?"maker":"taker",c=s?"buy":"sell",u=void 0;return void 0===u&&void 0!==t&&(u=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,id:void 0,order:void 0,type:void 0,takerOrMaker:o,side:c,price:i,amount:n,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==i&&(o.n=i),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(d,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PendingNew:"open",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled",Rejected:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"/"),a=this.safeInteger2(e,"timestamp","sendingTime"),s=this.safeInteger(e,"lastExecTime"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"orderQty"),u=this.safeFloat(e,"avgPx"),d=this.safeFloat2(e,"cumFilledQty","cumQty"),h=this.safeString(e,"orderId"),l=this.safeString(e,"id");void 0!==l&&l.length<1&&(l=void 0);var f=this.safeStringLower(e,"orderType"),p=this.safeStringLower(e,"side"),v=this.safeFloat(e,"cumFee"),m=void 0;if(void 0!==v){var y=this.safeString(e,"feeAsset"),g=this.safeCurrencyCode(y);m={cost:v,currency:g}}var b=this.safeFloat(e,"stopPrice");return this.safeOrder({info:e,id:h,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:s,symbol:n,type:f,timeInForce:void 0,postOnly:void 0,side:p,price:o,stopPrice:b,amount:c,cost:void 0,average:u,filled:d,remaining:void 0,status:r,fee:m,trades:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v,m,y,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x.length>4&&void 0!==x[4]?x[4]:void 0,o=x.length>5&&void 0!==x[5]?x[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(c=this.market(t),u=this.safeString(this.options,"account-category","cash"),d=this.safeValue(this.options,"createOrder",{}),h=this.safeString(d,"account-category",u),h=this.safeString(o,"account-category",h),o=this.omit(o,"account-category"),l=this.safeValue(this.accounts,0,{}),f=this.safeValue(l,"id"),p=this.safeString2(o,"clientOrderId","id"),v={"account-group":f,"account-category":h,symbol:c.id,time:this.milliseconds(),orderQty:this.amountToPrecision(t,a),orderType:r,side:i},void 0!==p&&(v.id=p,o=this.omit(o,["clientOrderId","id"])),"limit"!==r&&"stop_limit"!==r||(v.orderPrice=this.priceToPrecision(t,s)),"stop_limit"!==r&&"stop_market"!==r){e.next=26;break}if(void 0!==(m=this.safeFloat(o,"stopPrice"))){e.next=24;break}throw new g(this.id+" createOrder() requires a stopPrice parameter for "+r+" orders");case 24:v.stopPrice=this.priceToPrecision(t,m),o=this.omit(o,"stopPrice");case 26:return e.next=28,this.accountCategoryPostOrder(this.extend(v,o));case 28:return y=e.sent,b=this.safeValue(y,"data",{}),k=this.safeValue(b,"info",{}),e.abrupt("return",this.parseOrder(k,c));case 32:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return i=this.safeString(this.options,"account-category","cash"),a=this.safeValue(this.options,"fetchOrder",{}),s=this.safeString(a,"account-category",i),s=this.safeString(r,"account-category",s),r=this.omit(r,"account-category"),o=this.safeValue(this.accounts,0,{}),c=this.safeValue(o,"id"),u={"account-group":c,"account-category":s,orderId:t},e.next=16,this.accountCategoryGetOrderStatus(this.extend(u,r));case 16:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,i=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return s=void 0,void 0!==t&&(s=this.market(t)),o=this.safeString(this.options,"account-category","cash"),c=this.safeValue(this.options,"fetchOpenOrders",{}),u=this.safeString(c,"account-category",o),u=this.safeString(a,"account-category",u),a=this.omit(a,"account-category"),d=this.safeValue(this.accounts,0,{}),h=this.safeValue(d,"id"),l={"account-group":h,"account-category":u},e.next=20,this.accountCategoryGetOrderOpen(this.extend(l,a));case 20:if(f=e.sent,p=this.safeValue(f,"data",[]),"futures"!==u){e.next=24;break}return e.abrupt("return",this.parseOrders(p,s,r,i));case 24:for(v=[],m=0;m<p.length;m++)y=this.parseOrder(p[m],s),v.push(y);return e.abrupt("return",this.filterBySymbolSinceLimit(v,t,r,i));case 27:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return s=void 0,void 0!==t&&(s=this.market(t)),o=this.safeString(this.options,"account-category"),c=this.safeValue(this.options,"fetchClosedOrders",{}),u=this.safeString(c,"account-category",o),u=this.safeString(a,"account-category",u),a=this.omit(a,"account-category"),d=this.safeValue(this.accounts,0,{}),h=this.safeValue(d,"id"),l={"account-group":h},void 0!==t&&(s=this.market(t),l.symbol=s.id),"accountGroupGetOrderHist"===(f=this.safeValue(c,"method","accountGroupGetOrderHist"))?void 0!==u&&(l.category=u):l["account-category"]=u,void 0!==r&&(l.startTime=r),void 0!==i&&(l.pageSize=i),e.next=25,this[f](this.extend(l,a));case 25:return p=e.sent,v=this.safeValue(p,"data"),Array.isArray(v)||(v=this.safeValue(v,"data",[])),e.abrupt("return",this.parseOrders(v,s,r,i));case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=y.length>1&&void 0!==y[1]?y[1]:void 0,i=y.length>2&&void 0!==y[2]?y[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return a=this.market(r),s=this.safeString(this.options,"account-category","cash"),o=this.safeValue(this.options,"cancelOrder",{}),c=this.safeString(o,"account-category",s),c=this.safeString(i,"account-category",c),i=this.omit(i,"account-category"),u=this.safeValue(this.accounts,0,{}),d=this.safeValue(u,"id"),h=this.safeString2(i,"clientOrderId","id"),l={"account-group":d,"account-category":c,symbol:a.id,time:this.milliseconds(),id:"foobar"},void 0===h?l.orderId=t:(l.id=h,i=this.omit(i,["clientOrderId","id"])),e.next=21,this.accountCategoryDeleteOrder(this.extend(l,i));case 21:return f=e.sent,v=this.safeValue(f,"data",{}),m=this.safeValue(v,"info",{}),e.abrupt("return",this.parseOrder(m,a));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return i=this.safeString(this.options,"account-category","cash"),a=this.safeValue(this.options,"cancelAllOrders",{}),s=this.safeString(a,"account-category",i),s=this.safeString(r,"account-category",s),r=this.omit(r,"account-category"),o=this.safeValue(this.accounts,0,{}),c=this.safeValue(o,"id"),u={"account-group":c,"account-category":s,time:this.milliseconds()},d=void 0,void 0!==t&&(d=this.market(t),u.symbol=d.id),e.next=18,this.accountCategoryDeleteOrderAll(this.extend(u,r));case 18:return h=e.sent,e.abrupt("return",h);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"address"),i=this.safeString(e,"tagId"),n=this.safeString(e,i);this.checkAddress(r);var a=void 0===t?void 0:t.code;return{currency:a,address:r,tag:n,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a=this.safeString(r,"chainName"),r=this.omit(r,"chainName"),s={asset:i.id},e.next=9,this.privateGetWalletDepositAddress(this.extend(s,r));case 9:if(o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"address",[]),d=u.length,h=void 0,!(d>1)){e.next=23;break}if(l=this.indexBy(u,"chainName"),void 0!==a){e.next=20;break}throw f=Object.keys(l),v=f.join(", "),new p(this.id+" fetchDepositAddress returned more than one address, a chainName parameter is required, one of "+v);case 20:h=this.safeValue(l,a,{}),e.next=24;break;case 23:h=this.safeValue(u,0,{});case 24:return m=this.parseDepositAddress(h,i),e.abrupt("return",this.extend(m,{info:o}));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={txType:"deposit"},e.next=7,this.fetchTransactions(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={txType:"withdrawal"},e.next=7,this.fetchTransactions(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset=o.id),void 0!==r&&(s.startTs=r),void 0!==i&&(s.pageSize=i),e.next=13,this.privateGetWalletTransactions(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({reviewing:"pending",pending:"pending",confirmed:"ok",rejected:"rejected"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"requestId"),i=this.safeFloat(e,"amount"),n=this.safeValue(e,"destAddress",{}),a=this.safeString(n,"address"),s=this.safeString(n,"destTag"),o=this.safeString(e,"networkTransactionId"),c=this.safeString(e,"transactionType"),u=this.safeInteger(e,"time"),d=this.safeString(e,"asset"),h=this.safeCurrencyCode(d,t),l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.safeFloat(e,"commission");return{info:e,id:r,currency:h,amount:i,address:a,addressTo:a,addressFrom:void 0,tag:s,tagTo:s,tagFrom:void 0,status:l,type:c,updated:void 0,txid:o,timestamp:u,datetime:this.iso8601(u),fee:{currency:h,cost:f}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="",o=i,c="accountCategory"===t;(c||"accountGroup"===t)&&(s+=this.implodeParams("/{account-group}",i),o=this.omit(i,"account-group"));var u=this.implodeParams(e,o);if(s+="/api/pro/"+this.version,c&&(s+=this.implodeParams("/{account-category}",o),o=this.omit(o,"account-category")),s+="/"+u,o=this.omit(o,this.extractParams(e)),"public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var d=this.milliseconds().toString(),h=d+"+"+u,l=this.hmac(this.encode(h),this.encode(this.secret),"sha256","base64");n={"x-auth-key":this.apiKey,"x-auth-timestamp":d,"x-auth-signature":l},"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):(n["Content-Type"]="application/json",a=this.json(o))}return{url:s=this.urls.api+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"code"),d=this.safeString(s,"message");if(void 0!==u&&"0"!==u||void 0!==d){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new m(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.ExchangeNotAvailable,m=l.InsufficientFunds,y=l.OrderNotFound,g=l.InvalidOrder,b=l.DDoSProtection,k=l.InvalidNonce,x=l.AuthenticationError,w=l.RateLimitExceeded,_=l.PermissionDenied,O=l.NotSupported,T=l.BadRequest,S=l.BadSymbol,C=l.AccountSuspended,I=l.OrderImmediatelyFillable,M=r(13),E=M.ROUND,A=M.TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"binance",name:"Binance",countries:["JP","MT"],rateLimit:500,certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,fetchCurrencies:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:"emulated",fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0,transfer:!0,fetchTransfers:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/29604020-d5483cdc-87ee-11e7-94c7-d1a8d9169293.jpg",test:{dapiPublic:"https://testnet.binancefuture.com/dapi/v1",dapiPrivate:"https://testnet.binancefuture.com/dapi/v1",fapiPublic:"https://testnet.binancefuture.com/fapi/v1",fapiPrivate:"https://testnet.binancefuture.com/fapi/v1",fapiPrivateV2:"https://testnet.binancefuture.com/fapi/v2",public:"https://testnet.binance.vision/api/v3",private:"https://testnet.binance.vision/api/v3",v3:"https://testnet.binance.vision/api/v3",v1:"https://testnet.binance.vision/api/v1"},api:{wapi:"https://api.binance.com/wapi/v3",sapi:"https://api.binance.com/sapi/v1",dapiPublic:"https://dapi.binance.com/dapi/v1",dapiPrivate:"https://dapi.binance.com/dapi/v1",dapiData:"https://dapi.binance.com/futures/data",fapiPublic:"https://fapi.binance.com/fapi/v1",fapiPrivate:"https://fapi.binance.com/fapi/v1",fapiData:"https://fapi.binance.com/futures/data",fapiPrivateV2:"https://fapi.binance.com/fapi/v2",public:"https://api.binance.com/api/v3",private:"https://api.binance.com/api/v3",v3:"https://api.binance.com/api/v3",v1:"https://api.binance.com/api/v1"},www:"https://www.binance.com",referral:"https://www.binance.com/?ref=10205187",doc:["https://binance-docs.github.io/apidocs/spot/en"],api_management:"https://www.binance.com/en/usercenter/settings/api-management",fees:"https://www.binance.com/en/fee/schedule"},api:{sapi:{get:["accountSnapshot","margin/asset","margin/pair","margin/allAssets","margin/allPairs","margin/priceIndex","asset/assetDividend","asset/transfer","margin/loan","margin/repay","margin/account","margin/transfer","margin/interestHistory","margin/forceLiquidationRec","margin/order","margin/openOrders","margin/allOrders","margin/myTrades","margin/maxBorrowable","margin/maxTransferable","margin/isolated/transfer","margin/isolated/account","margin/isolated/pair","margin/isolated/allPairs","futures/transfer","futures/loan/borrow/history","futures/loan/repay/history","futures/loan/wallet","futures/loan/configs","futures/loan/calcAdjustLevel","futures/loan/calcMaxAdjustAmount","futures/loan/adjustCollateral/history","futures/loan/liquidationHistory","capital/config/getall","capital/deposit/address","capital/deposit/hisrec","capital/deposit/subAddress","capital/deposit/subHisrec","capital/withdraw/history","sub-account/futures/account","sub-account/futures/accountSummary","sub-account/futures/positionRisk","sub-account/futures/internalTransfer","sub-account/margin/account","sub-account/margin/accountSummary","sub-account/spotSummary","sub-account/status","sub-account/transfer/subUserHistory","sub-account/universalTransfer","lending/daily/product/list","lending/daily/userLeftQuota","lending/daily/userRedemptionQuota","lending/daily/token/position","lending/union/account","lending/union/purchaseRecord","lending/union/redemptionRecord","lending/union/interestHistory","lending/project/list","lending/project/position/list","mining/pub/algoList","mining/pub/coinList","mining/worker/detail","mining/worker/list","mining/payment/list","mining/statistics/user/status","mining/statistics/user/list","bswap/pools","bswap/liquidity","bswap/liquidityOps","bswap/quote","bswap/swap","blvt/tokenInfo","blvt/subscribe/record","blvt/redeem/record","blvt/userLimit","apiReferral/ifNewUser","apiReferral/customization","apiReferral/userCustomization","apiReferral/rebate/recentRecord","apiReferral/rebate/historicalRecord","apiReferral/kickback/recentRecord","apiReferral/kickback/historicalRecord"],post:["asset/dust","asset/transfer","account/disableFastWithdrawSwitch","account/enableFastWithdrawSwitch","capital/withdraw/apply","margin/transfer","margin/loan","margin/repay","margin/order","margin/isolated/create","margin/isolated/transfer","sub-account/margin/transfer","sub-account/margin/enable","sub-account/margin/enable","sub-account/futures/enable","sub-account/futures/transfer","sub-account/futures/internalTransfer","sub-account/transfer/subToSub","sub-account/transfer/subToMaster","sub-account/universalTransfer","userDataStream","userDataStream/isolated","futures/transfer","futures/loan/borrow","futures/loan/repay","futures/loan/adjustCollateral","lending/customizedFixed/purchase","lending/daily/purchase","lending/daily/redeem","bswap/liquidityAdd","bswap/liquidityRemove","bswap/swap","blvt/subscribe","blvt/redeem","apiReferral/customization","apiReferral/userCustomization","apiReferral/rebate/historicalRecord","apiReferral/kickback/historicalRecord"],put:["userDataStream","userDataStream/isolated"],delete:["margin/openOrders","margin/order","userDataStream","userDataStream/isolated"]},wapi:{post:["withdraw","sub-account/transfer"],get:["depositHistory","withdrawHistory","depositAddress","accountStatus","systemStatus","apiTradingStatus","userAssetDribbletLog","tradeFee","assetDetail","sub-account/list","sub-account/transfer/history","sub-account/assets"]},dapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","premiumIndex","fundingRate","klines","continuousKlines","indexPriceKlines","markPriceKlines","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest"]},dapiData:{get:["openInterestHist","topLongShortAccountRatio","topLongShortPositionRatio","globalLongShortAccountRatio","takerBuySellVol","basis"]},dapiPrivate:{get:["positionSide/dual","order","openOrder","openOrders","allOrders","balance","account","positionMargin/history","positionRisk","userTrades","income","leverageBracket","forceOrders","adlQuantile"],post:["positionSide/dual","order","batchOrders","countdownCancelAll","leverage","marginType","positionMargin","listenKey"],put:["listenKey"],delete:["order","allOpenOrders","batchOrders","listenKey"]},fapiPublic:{get:["ping","time","exchangeInfo","depth","trades","historicalTrades","aggTrades","klines","continuousKlines","fundingRate","premiumIndex","ticker/24hr","ticker/price","ticker/bookTicker","allForceOrders","openInterest","indexInfo"]},fapiData:{get:["openInterestHist","topLongShortAccountRatio","topLongShortPositionRatio","globalLongShortAccountRatio","takerlongshortRatio"]},fapiPrivate:{get:["allForceOrders","allOrders","openOrder","openOrders","order","account","balance","leverageBracket","positionMargin/history","positionRisk","positionSide/dual","userTrades","income","commissionRate","apiTradingStatus","apiReferral/ifNewUser","apiReferral/customization","apiReferral/userCustomization","apiReferral/traderNum","apiReferral/overview","apiReferral/tradeVol","apiReferral/rebateVol","apiReferral/traderSummary"],post:["batchOrders","positionSide/dual","positionMargin","marginType","order","leverage","listenKey","countdownCancelAll","apiReferral/customization","apiReferral/userCustomization"],put:["listenKey"],delete:["batchOrders","order","allOpenOrders","listenKey"]},fapiPrivateV2:{get:["account","balance","positionRisk"]},v3:{get:["ticker/price","ticker/bookTicker"]},public:{get:["ping","time","depth","trades","aggTrades","historicalTrades","klines","ticker/24hr","ticker/price","ticker/bookTicker","exchangeInfo"],put:["userDataStream"],post:["userDataStream"],delete:["userDataStream"]},private:{get:["allOrderList","openOrderList","orderList","order","openOrders","allOrders","account","myTrades"],post:["order/oco","order","order/test"],delete:["openOrders","orderList","order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{BCC:"BCC",YOYO:"YOYOW"},options:{fetchCurrencies:!1,defaultTimeInForce:"GTC",defaultType:"spot",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT"},quoteOrderQty:!0,broker:{spot:"x-R4BD3S82",margin:"x-R4BD3S82",future:"x-xcKtGhcu",delivery:"x-xcKtGhcu"},fetchPositions:{future:"fapiPrivateV2GetAccount",delivery:"dapiPrivateGetAccount"},accountsByType:{main:"MAIN",spot:"MAIN",margin:"MARGIN",future:"UMFUTURE",delivery:"CMFUTURE",mining:"MINING"},typesByAccount:{MAIN:"spot",MARGIN:"margin",UMFUTURE:"future",CMFUTURE:"delivery",MINING:"mining"}},exceptions:{"System abnormality":f,"You are not authorized to execute this request.":_,"API key does not exist":x,"Order would trigger immediately.":I,"Stop price would trigger immediately.":I,"Order would immediately match and take.":I,"Account has insufficient balance for requested action.":m,"Rest API trading is not enabled.":v,"You don't have permission.":_,"Market is closed.":v,"Too many requests.":b,"-1000":v,"-1001":v,"-1002":x,"-1003":w,"-1013":g,"-1015":w,"-1016":v,"-1020":T,"-1021":k,"-1022":x,"-1100":T,"-1101":T,"-1102":T,"-1103":T,"-1104":T,"-1105":T,"-1106":T,"-1111":T,"-1112":g,"-1114":T,"-1115":T,"-1116":T,"-1117":T,"-1118":T,"-1119":T,"-1120":T,"-1121":S,"-1125":x,"-1127":T,"-1128":T,"-1130":T,"-1131":T,"-2010":f,"-2011":y,"-2013":y,"-2014":x,"-2015":x,"-2019":m,"-3005":m,"-3008":m,"-3010":f,"-3022":C,"-4028":T,"-3020":m,"-3041":m,"-5013":m}})}},{key:"currencyToPrecision",value:function(e,t){return this.numberToString(t)}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},r=this.safeString2(this.options,"fetchTime","defaultType","spot"),n="publicGetTime","future"===r?n="fapiPublicGetTime":"delivery"===r&&(n="dapiPublicGetTime"),e.next=6,this[n](t);case 6:return a=e.sent,e.abrupt("return",this.safeInteger(a,"serverTime"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=O.length>0&&void 0!==O[0]?O[0]:{},this.safeValue(this.options,"fetchCurrencies")){e.next=4;break}return e.abrupt("return",void 0);case 4:if(this.checkRequiredCredentials(!1)){e.next=6;break}return e.abrupt("return",void 0);case 6:if(void 0===this.safeString(this.urls,"apiBackup")){e.next=9;break}return e.abrupt("return",void 0);case 9:return e.next=11,this.sapiGetCapitalConfigGetall(t);case 11:for(r=e.sent,n={},a=0;a<r.length;a++){for(s=r[a],o=this.safeString(s,"coin"),c=this.safeString(s,"name"),u=this.safeCurrencyCode(o),d=void 0,h=!0,l=!0,f=this.safeValue(s,"networkList",[]),p={},v=void 0,m=0;m<f.length;m++)y=f[m],g=this.safeString(y,"name"),b=this.safeFloat(y,"withdrawFee"),k=this.safeValue(y,"depositEnable"),x=this.safeValue(y,"withdrawEnable"),l=l||k,h=h||x,p[g]=b,(this.safeValue(y,"isDefault")||void 0===v)&&(v=b);w=this.safeValue(s,"trading"),_=h&&l&&w,n[u]={id:o,name:c,code:u,precision:d,info:s,active:_,fee:v,fees:p,limits:this.limits}}return e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=L.length>0&&void 0!==L[0]?L[0]:{},r=this.safeString2(this.options,"fetchMarkets","defaultType","spot"),n=this.safeString(t,"type",r),a=this.omit(t,"type"),"spot"===n||"future"===n||"margin"===n||"delivery"===n){e.next=6;break}throw new f(this.id+" does not support '"+n+"' type, set exchange.options['defaultType'] to 'spot', 'margin', 'delivery' or 'future'");case 6:return s="publicGetExchangeInfo","future"===n?s="fapiPublicGetExchangeInfo":"delivery"===n&&(s="dapiPublicGetExchangeInfo"),e.next=10,this[s](a);case 10:if(o=e.sent,!this.options.adjustForTimeDifference){e.next=14;break}return e.next=14,this.loadTimeDifference();case 14:for(c=this.safeValue(o,"symbols"),u=[],d=0;d<c.length;d++)h=c[d],l="spot"===n,p="future"===n,v="delivery"===n,m=this.safeString(h,"symbol"),y=this.safeStringLower(h,"symbol"),g=this.safeString(h,"baseAsset"),b=this.safeString(h,"quoteAsset"),k=this.safeCurrencyCode(g),x=this.safeCurrencyCode(b),w=this.safeString(h,"contractType"),_=(p||v)&&"PERPETUAL"!==w?m:k+"/"+x,O=this.safeValue(h,"filters",[]),T=this.indexBy(O,"filterType"),S={base:this.safeInteger(h,"baseAssetPrecision"),quote:this.safeInteger(h,"quotePrecision"),amount:this.safeInteger(h,"baseAssetPrecision"),price:this.safeInteger(h,"quotePrecision")},C=this.safeString2(h,"status","contractStatus"),I="TRADING"===C,M=this.safeValue(h,"isMarginTradingAllowed",p||v),E={id:m,lowercaseId:y,symbol:_,base:k,quote:x,baseId:g,quoteId:b,info:h,type:n,spot:l,margin:M,future:p,delivery:v,active:I,precision:S,limits:{amount:{min:Math.pow(10,-S.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}},"PRICE_FILTER"in T&&(A=this.safeValue(T,"PRICE_FILTER",{}),E.limits.price={min:this.safeFloat(A,"minPrice"),max:void 0},void 0!==(F=this.safeFloat(A,"maxPrice"))&&F>0&&(E.limits.price.max=F),E.precision.price=this.precisionFromString(A.tickSize)),"LOT_SIZE"in T&&(P=this.safeValue(T,"LOT_SIZE",{}),B=this.safeString(P,"stepSize"),E.precision.amount=this.precisionFromString(B),E.limits.amount={min:this.safeFloat(P,"minQty"),max:this.safeFloat(P,"maxQty")}),"MARKET_LOT_SIZE"in T&&(R=this.safeValue(T,"MARKET_LOT_SIZE",{}),E.limits.market={min:this.safeFloat(R,"minQty"),max:this.safeFloat(R,"maxQty")}),"MIN_NOTIONAL"in T&&(V=this.safeValue(T,"MIN_NOTIONAL",{}),E.limits.cost.min=this.safeFloat2(V,"minNotional","notional")),u.push(E);return e.abrupt("return",u);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o="quote",c=s[a],u=i*c,d=s.precision.price;return"sell"===r?u*=n:(o="base",d=s.precision.amount),u=this.decimalToPrecision(u,E,d,this.precisionMode),{type:a,currency:s[o],rate:c,cost:parseFloat(u)}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString2(this.options,"fetchBalance","defaultType","spot"),n=this.safeString(t,"type",r),a="privateGetAccount","future"===n?(s=this.safeValue(this.options,"future",{}),o=this.safeValue(s,"fetchBalance",{}),a=this.safeString(o,"method","fapiPrivateV2GetAccount")):"delivery"===n?(c=this.safeValue(this.options,"delivery",{}),u=this.safeValue(c,"fetchBalance",{}),a=this.safeString(u,"method","dapiPrivateGetAccount")):"margin"===n&&(a="sapiGetMarginAccount"),d=this.omit(t,"type"),e.next=10,this[a](d);case 10:if(h=e.sent,l={info:h},"spot"===n||"margin"===n)for(f=this.safeValue2(h,"balances","userAssets",[]),p=0;p<f.length;p++)v=f[p],m=this.safeString(v,"asset"),y=this.safeCurrencyCode(m),(g=this.account()).free=this.safeFloat(v,"free"),g.used=this.safeFloat(v,"locked"),l[y]=g;else for(b=h,Array.isArray(h)||(b=this.safeValue(h,"assets",[])),k=0;k<b.length;k++)x=b[k],w=this.safeString(x,"asset"),_=this.safeCurrencyCode(w),(O=this.account()).free=this.safeFloat(x,"availableBalance"),O.used=this.safeFloat(x,"initialMargin"),O.total=this.safeFloat2(x,"marginBalance","balance"),l[_]=O;return e.abrupt("return",this.parseBalance(l));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),o="publicGetDepth",a.future?o="fapiPublicGetDepth":a.delivery&&(o="dapiPublicGetDepth"),e.next=11,this[o](this.extend(s,n));case 11:return c=e.sent,(u=this.parseOrderBook(c)).nonce=this.safeInteger(c,"lastUpdateId"),e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"closeTime"),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"lastPrice");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"openPrice"),close:a,last:a,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.wapiGetSystemStatus(t);case 3:return r=e.sent,void 0!==(n=this.safeValue(r,"status"))&&(n=0===n?"ok":"maintenance",this.status=this.extend(this.status,{status:n,updated:this.milliseconds()})),e.abrupt("return",this.status);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},s="publicGetTicker24hr",n.future?s="fapiPublicGetTicker24hr":n.delivery&&(s="dapiPublicGetTicker24hr"),e.next=9,this[s](this.extend(a,r));case 9:if(o=e.sent,!Array.isArray(o)){e.next=13;break}return c=this.safeValue(o,0,{}),e.abrupt("return",this.parseTicker(c,n));case 13:return e.abrupt("return",this.parseTicker(o,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(this.options,"fetchBidsAsks","defaultType","spot"),a=this.safeString(r,"type",n),s=this.omit(r,"type"),o=void 0,o="future"===a?"fapiPublicGetTickerBookTicker":"delivery"===a?"dapiPublicGetTickerBookTicker":"publicGetTickerBookTicker",e.next=11,this[o](s);case 11:return c=e.sent,e.abrupt("return",this.parseTickers(c,t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(this.options,"fetchTickers","defaultType","spot"),a=this.safeString(r,"type",n),s=this.omit(r,"type"),o=void 0,o="future"===a?"fapiPublicGetTicker24hr":"delivery"===a?"dapiPublicGetTicker24hr":"publicGetTicker24hr",c=this.safeString(this.options,"fetchTickersMethod",o),e.next=12,this[c](s);case 12:return u=e.sent,e.abrupt("return",this.parseTickers(u,t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:"1m",n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:void 0,s=m.length>4&&void 0!==m[4]?m[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=500,u=1500,a=void 0===a?c:Math.min(a,u),d={symbol:o.id,interval:this.timeframes[r],limit:a},h=this.parseTimeframe(r),void 0!==n&&(d.startTime=n,n>0&&(l=this.sum(n,a*h*1e3-1),f=this.milliseconds(),d.endTime=Math.min(f,l))),p="publicGetKlines",o.future?p="fapiPublicGetKlines":o.delivery&&(p="dapiPublicGetKlines"),e.next=17,this[p](this.extend(d,s));case 17:return v=e.sent,e.abrupt("return",this.parseOHLCVs(v,o,r,n,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if("isDustTrade"in e)return this.parseDustTrade(e,t);var r=this.safeInteger2(e,"T","time"),i=this.safeFloat2(e,"p","price"),n=this.safeFloat2(e,"q","qty"),a=this.safeString2(e,"a","id"),s=void 0,o=this.safeString(e,"orderId");"m"in e?s=e.m?"sell":"buy":"isBuyerMaker"in e?s=e.isBuyerMaker?"sell":"buy":"side"in e?s=this.safeStringLower(e,"side"):"isBuyer"in e&&(s=e.isBuyer?"buy":"sell");var c=void 0;"commission"in e&&(c={cost:this.safeFloat(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});var u=void 0;"isMaker"in e&&(u=e.isMaker?"maker":"taker"),"maker"in e&&(u=e.maker?"maker":"taker");var d=this.safeString(e,"symbol"),h=this.safeSymbol(d,t),l=void 0;return void 0!==i&&void 0!==n&&(l=i*n),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,id:a,order:o,type:void 0,side:s,takerOrMaker:u,price:i,amount:n,cost:l,fee:c}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},c=this.safeString2(this.options,"fetchTrades","defaultType","spot"),u=this.safeString(a,"type",c),d=this.omit(a,"type"),h=void 0,h="future"===u?"fapiPublicGetAggTrades":"delivery"===u?"dapiPublicGetAggTrades":"publicGetAggTrades","publicGetAggTrades"===(l=this.safeString(this.options,"fetchTradesMethod",h))?(void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,36e5)),"future"===u?l="fapiPublicGetAggTrades":"delivery"===u&&(l="dapiPublicGetAggTrades")):"publicGetHistoricalTrades"===l&&("future"===u?l="fapiPublicGetHistoricalTrades":"delivery"===u&&(l="dapiPublicGetHistoricalTrades")),void 0!==n&&(o.limit=n),e.next=17,this[l](this.extend(o,d));case 17:return f=e.sent,e.abrupt("return",this.parseTrades(f,s,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=void 0;"time"in e?a=this.safeInteger(e,"time"):"transactTime"in e&&(a=this.safeInteger(e,"transactTime"));var s=this.safeFloat(e,"price"),o=this.safeFloat(e,"origQty"),c=this.safeFloat(e,"executedQty"),u=void 0,d=this.safeFloat2(e,"cummulativeQuoteQty","cumQuote");void 0!==c&&(void 0!==o&&(u=o-c,this.options.parseOrderToPrecision&&(u=parseFloat(this.amountToPrecision(n,u))),u=Math.max(u,0)),void 0!==s&&void 0===d&&(d=s*c));var h=this.safeString(e,"orderId"),l=this.safeStringLower(e,"type");"market"===l?0===s&&void 0!==d&&void 0!==c&&d>0&&c>0&&(s=d/c,this.options.parseOrderToPrecision&&(s=parseFloat(this.priceToPrecision(n,s)))):"limit_maker"===l&&(l="limit");var f=this.safeStringLower(e,"side"),p=void 0,v=void 0,m=this.safeValue(e,"fills");if(void 0!==m){var y=(v=this.parseTrades(m,t)).length;if(y>0){d=v[0].cost,p={cost:v[0].fee.cost,currency:v[0].fee.currency};for(var g=1;g<v.length;g++)d=this.sum(d,v[g].cost),p.cost=this.sum(p.cost,v[g].fee.cost)}}var b=void 0;void 0!==d&&(c&&(b=d/c,this.options.parseOrderToPrecision&&(b=parseFloat(this.priceToPrecision(n,b)))),this.options.parseOrderToPrecision&&(d=parseFloat(this.costToPrecision(n,d))));var k=this.safeString(e,"clientOrderId"),x=this.safeString(e,"timeInForce"),w="limit_maker"===l||"GTX"===x,_=this.safeFloat(e,"stopPrice");return{info:e,id:h,clientOrderId:k,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:n,type:l,timeInForce:x,postOnly:w,side:f,price:s,stopPrice:_,amount:o,cost:d,average:b,filled:c,remaining:u,status:r,fee:p,trades:v}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,y,b,k,x,w,_,O,T,S,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=C.length>4&&void 0!==C[4]?C[4]:void 0,o=C.length>5&&void 0!==C[5]?C[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=this.safeString2(this.options,"createOrder","defaultType",c.type),d=this.safeString(o,"type",u),h=this.safeString2(o,"newClientOrderId","clientOrderId"),o=this.omit(o,["type","newClientOrderId","clientOrderId"]),l="privatePostOrder","future"===d?l="fapiPrivatePostOrder":"delivery"===d?l="dapiPrivatePostOrder":"margin"===d&&(l="sapiPostMarginOrder"),c.spot&&(this.safeValue(o,"test",!1)&&(l+="Test"),o=this.omit(o,"test")),f=r.toUpperCase(),p=this.safeValue(c.info,"orderTypes"),this.inArray(f,p)){e.next=16;break}throw new g(this.id+" "+r+" is not a valid order type in "+c.type+" market "+t);case 16:if(v={symbol:c.id,type:f,side:n.toUpperCase()},void 0===h?(m=this.safeValue(this.options,"broker"))&&void 0!==(y=this.safeString(m,d))&&(v.newClientOrderId=y+this.uuid22()):v.newClientOrderId=h,c.spot&&(v.newOrderRespType=this.safeValue(this.options.newOrderRespType,r,"RESULT")),b=!1,k=!1,x=!1,w=!1,"MARKET"!==f){e.next=28;break}this.safeValue(this.options,"quoteOrderQty",!1)?(_=this.safeFloat(o,"quoteOrderQty"),O=c.precision.price,void 0!==_?(v.quoteOrderQty=this.decimalToPrecision(_,A,O,this.precisionMode),o=this.omit(o,"quoteOrderQty")):void 0!==s?v.quoteOrderQty=this.decimalToPrecision(a*s,A,O,this.precisionMode):w=!0):w=!0,e.next=69;break;case 28:if("LIMIT"!==f){e.next=34;break}k=!0,b=!0,w=!0,e.next=69;break;case 34:if("STOP_LOSS"!==f&&"TAKE_PROFIT"!==f){e.next=40;break}x=!0,w=!0,c.future&&(k=!0),e.next=69;break;case 40:if("STOP_LOSS_LIMIT"!==f&&"TAKE_PROFIT_LIMIT"!==f){e.next=47;break}w=!0,x=!0,k=!0,b=!0,e.next=69;break;case 47:if("LIMIT_MAKER"!==f){e.next=52;break}k=!0,w=!0,e.next=69;break;case 52:if("STOP"!==f){e.next=58;break}w=!0,x=!0,k=!0,e.next=69;break;case 58:if("STOP_MARKET"!==f&&"TAKE_PROFIT_MARKET"!==f){e.next=64;break}void 0===this.safeValue(o,"closePosition")&&(w=!0),x=!0,e.next=69;break;case 64:if("TRAILING_STOP_MARKET"!==f){e.next=69;break}if(w=!0,void 0!==this.safeFloat(o,"callbackRate")){e.next=69;break}throw new g(this.id+" createOrder() requires a callbackRate extra param for a "+r+" order");case 69:if(w&&(v.quantity=this.amountToPrecision(t,a)),!k){e.next=74;break}if(void 0!==s){e.next=73;break}throw new g(this.id+" createOrder() requires a price argument for a "+r+" order");case 73:v.price=this.priceToPrecision(t,s);case 74:if(b&&(v.timeInForce=this.options.defaultTimeInForce),!x){e.next=83;break}if(void 0!==(T=this.safeFloat(o,"stopPrice"))){e.next=81;break}throw new g(this.id+" createOrder() requires a stopPrice extra param for a "+r+" order");case 81:o=this.omit(o,"stopPrice"),v.stopPrice=this.priceToPrecision(t,T);case 83:return e.next=85,this[l](this.extend(v,o));case 85:return S=e.sent,e.abrupt("return",this.parseOrder(S,c));case 87:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=this.safeString2(this.options,"fetchOrder","defaultType",a.type),o=this.safeString(n,"type",s),c="privateGetOrder","future"===o?c="fapiPrivateGetOrder":"delivery"===o?c="dapiPrivateGetOrder":"margin"===o&&(c="sapiGetMarginOrder"),u={symbol:a.id},void 0!==(d=this.safeValue2(n,"origClientOrderId","clientOrderId"))?u.origClientOrderId=d:u.orderId=t,h=this.omit(n,["type","clientOrderId","origClientOrderId"]),e.next=17,this[c](this.extend(u,h));case 17:return l=e.sent,e.abrupt("return",this.parseOrder(l,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeString2(this.options,"fetchOrders","defaultType",s.type),c=this.safeString(a,"type",o),u="privateGetAllOrders","future"===c?u="fapiPrivateGetAllOrders":"delivery"===c?u="dapiPrivateGetAllOrders":"margin"===c&&(u="sapiGetMarginAllOrders"),d={symbol:s.id},void 0!==r&&(d.startTime=r),void 0!==n&&(d.limit=n),h=this.omit(a,"type"),e.next=19,this[u](this.extend(d,h));case 19:return l=e.sent,e.abrupt("return",this.parseOrders(l,s,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,o=void 0,c=void 0,u={},void 0===t){e.next=18;break}s=this.market(t),u.symbol=s.id,d=this.safeString2(this.options,"fetchOpenOrders","defaultType",s.type),c=this.safeString(a,"type",d),o=this.omit(a,"type"),e.next=28;break;case 18:if(!this.options.warnOnFetchOpenOrdersWithoutSymbol){e.next=25;break}throw h=this.symbols,l=h.length,p=parseInt(l/2),new f(this.id+" fetchOpenOrders WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+p.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.');case 25:v=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),c=this.safeString(a,"type",v),o=this.omit(a,"type");case 28:return m="privateGetOpenOrders","future"===c?m="fapiPrivateGetOpenOrders":"delivery"===c?m="dapiPrivateGetOpenOrders":"margin"===c&&(m="sapiGetMarginOpenOrders"),e.next=32,this[m](this.extend(u,o));case 32:return y=e.sent,e.abrupt("return",this.parseOrders(y,s,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,a);case 6:return s=e.sent,e.abrupt("return",this.filterBy(s,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=this.safeString2(this.options,"fetchOpenOrders","defaultType",a.type),o=this.safeString(n,"type",s),c=this.safeValue2(n,"origClientOrderId","clientOrderId"),u={symbol:a.id},void 0===c?u.orderId=t:u.origClientOrderId=c,d="privateDeleteOrder","future"===o?d="fapiPrivateDeleteOrder":"delivery"===o?d="dapiPrivateDeleteOrder":"margin"===o&&(d="sapiDeleteMarginOrder"),h=this.omit(n,["type","origClientOrderId","clientOrderId"]),e.next=17,this[d](this.extend(u,h));case 17:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},s=this.safeString2(this.options,"cancelAllOrders","defaultType","spot"),o=this.safeString(r,"type",s),c=this.omit(r,"type"),u="privateDeleteOpenOrders","margin"===o?u="sapiDeleteMarginOpenOrders":"future"===o?u="fapiPrivateDeleteAllOpenOrders":"delivery"===o&&(u="dapiPrivateDeleteAllOpenOrders"),e.next=15,this[u](this.extend(a,c));case 15:if(d=e.sent,!Array.isArray(d)){e.next=20;break}return e.abrupt("return",this.parseOrders(d,n));case 20:return e.abrupt("return",d);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return r=this.safeString(this.options,"defaultType","future"),n=this.safeString(t,"type",r),t=this.omit(t,"type"),a=this.safeValue(this.options,"fetchPositions",{}),s="delivery"===n?"dapiPrivateGetAccount":"fapiPrivateV2GetAccount",o=this.safeString(a,n,s),e.next=12,this[o](t);case 12:return c=e.sent,e.abrupt("return",this.safeValue(c,"positions",c));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeString2(this.options,"fetchMyTrades","defaultType",s.type),c=this.safeString(a,"type",o),a=this.omit(a,"type"),u=void 0,"spot"===c?u="privateGetMyTrades":"margin"===c?u="sapiGetMarginMyTrades":"future"===c?u="fapiPrivateGetUserTrades":"delivery"===c&&(u="dapiPrivateGetUserTrades"),d={symbol:s.id},void 0!==r&&(d.startTime=r),void 0!==n&&(d.limit=n),e.next=19,this[u](this.extend(d,a));case 19:return h=e.sent,e.abrupt("return",this.parseTrades(h,s,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyDustTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>0&&void 0!==f[0]?f[0]:void 0,t=f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:void 0,n=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.wapiGetUserAssetDribbletLog(n);case 8:for(a=e.sent,s=this.safeValue(a,"results",{}),o=this.safeValue(s,"rows",[]),c=[],u=0;u<o.length;u++)for(d=o[u].logs,h=0;h<d.length;h++)d[h].isDustTrade=!0,c.push(d[h]);return l=this.parseTrades(c,void 0,t,r),e.abrupt("return",this.filterBySinceLimit(l,t,r));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDustTrade",value:function(e){var t=this.safeString(e,"tranId"),r=this.parse8601(this.safeString(e,"operateTime")),i=this.safeCurrencyCode(this.safeString(e,"fromAsset")),n=this.currency("BNB").code,a=n+"/"+i,s=!1;a in this.markets&&(s=!0);var o={currency:n,cost:this.safeFloat(e,"serviceChargeAmount")},c=void 0,u=void 0,d=void 0,h=void 0;s?(c=a,u=this.sum(this.safeFloat(e,"transferedAmount"),o.cost),d=this.safeFloat(e,"amount"),h="buy"):(c=i+"/"+n,u=this.safeFloat(e,"amount"),d=this.sum(this.safeFloat(e,"transferedAmount"),o.cost),h="sell");var l=void 0;void 0!==d&&u&&(l=d/u);var f=void 0,p=void 0,v=void 0;return{id:f,timestamp:r,datetime:this.iso8601(r),symbol:c,order:t,type:p,takerOrMaker:v,side:h,amount:u,price:l,cost:d,fee:o,info:e}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.asset=s.id),void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,7776e6)),e.next=12,this.wapiGetDepositHistory(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c.depositList,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.asset=s.id),void 0!==r&&(o.startTime=r,o.endTime=this.sum(r,7776e6)),e.next=12,this.wapiGetWithdrawHistory(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c.withdrawList,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{0:"pending",1:"ok"},withdrawal:{0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"}},i=this.safeValue(r,t,{});return this.safeString(i,e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"addressTag");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeString(e,"txId");void 0!==a&&a.indexOf("Internal transfer ")>=0&&(a=a.slice(18));var s=this.safeString(e,"asset"),o=this.safeCurrencyCode(s,t),c=void 0,u=this.safeInteger(e,"insertTime"),d=this.safeInteger(e,"applyTime"),h=this.safeString(e,"type");void 0===h&&(void 0!==u&&void 0===d?(h="deposit",c=u):void 0===u&&void 0!==d&&(h="withdrawal",c=d));var l=this.parseTransactionStatusByType(this.safeString(e,"status"),h),f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"transactionFee"),v=void 0;void 0!==p&&(v={currency:o,cost:p});var m=this.safeInteger(e,"successTime");return{info:e,id:r,txid:a,timestamp:c,datetime:this.iso8601(c),address:i,addressTo:i,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,type:h,amount:f,currency:o,status:l,updated:m,fee:v}}},{key:"parseTransferStatus",value:function(e){return this.safeString({CONFIRMED:"ok"},e,e)}},{key:"parseTransfer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tranId"),i=this.safeString(e,"asset"),n=this.safeCurrencyCode(i,t),a=this.safeFloat(e,"amount"),s=this.safeString(e,"type"),o=void 0,c=void 0,u=this.safeValue(this.options,"typesByAccount",{});if(void 0!==s){var d=s.split("_");o=this.safeValue(d,0),c=this.safeValue(d,1),o=this.safeString(u,o,o),c=this.safeString(u,c,c)}var h=this.safeInteger(e,"timestamp"),l=this.parseTransferStatus(this.safeString(e,"status"));return{info:e,id:r,timestamp:h,datetime:this.iso8601(h),currency:n,amount:a,fromAccount:o,toAccount:c,status:l}}},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.currency(t),void 0!==(c=this.safeString(s,"type"))){e.next=16;break}if(u=this.safeValue(this.options,"accountsByType",{}),d=this.safeString(u,n,n),h=this.safeString(u,a,a),void 0!==d){e.next=12;break}throw l=Object.keys(u),new f(this.id+" fromAccount must be one of "+l.join(", "));case 12:if(void 0!==h){e.next=15;break}throw p=Object.keys(u),new f(this.id+" toAccount must be one of "+p.join(", "));case 15:c=d+"_"+h;case 16:return v={asset:o.id,amount:this.currencyToPrecision(t,r),type:c},e.next=19,this.sapiPostAssetTransfer(this.extend(v,s));case 19:return m=e.sent,y=this.parseTransfer(m,o),e.abrupt("return",this.extend(y,{amount:r,currency:t,fromAccount:n,toAccount:a}));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchTransfers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,p,v,m,y,g,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:void 0,r=x.length>1&&void 0!==x[1]?x[1]:void 0,n=x.length>2&&void 0!==x[2]?x[2]:void 0,a=x.length>3&&void 0!==x[3]?x[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.currency(t),o=this.safeString2(this.options,"fetchTransfers","defaultType","spot"),c=this.safeString(a,"fromAccount",o),u="future"===c?"spot":"future",d=this.safeString(a,"toAccount",u),h=this.safeString(a,"type"),l=this.safeValue(this.options,"accountsByType",{}),p=this.safeString(l,c),v=this.safeString(l,d),void 0!==h){e.next=23;break}if(void 0!==p){e.next=19;break}throw m=Object.keys(l),new f(this.id+" fromAccount parameter must be one of "+m.join(", "));case 19:if(void 0!==v){e.next=22;break}throw y=Object.keys(l),new f(this.id+" toAccount parameter must be one of "+y.join(", "));case 22:h=p+"_"+v;case 23:return g={type:h},void 0!==r&&(g.startTime=r),void 0!==n&&(g.size=n),e.next=28,this.sapiGetAssetTransfer(this.extend(g,a));case 28:return b=e.sent,k=this.safeValue(b,"rows",[]),e.abrupt("return",this.parseTransfers(k,s,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={coin:n.id},e.next=7,this.sapiGetCapitalDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),c=this.safeString(s,"tag"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.wapiGetAssetDetail(t);case 4:for(r=e.sent,n=this.safeValue(r,"assetDetail",{}),a=Object.keys(n),s={},o=0;o<a.length;o++)c=a[o],u=this.safeCurrencyCode(c),s[u]=this.safeFloat(n[c],"withdrawFee");return e.abrupt("return",{withdraw:s,deposit:{},info:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=n.slice(0,20),u={asset:o.id,address:n,amount:parseFloat(r),name:c},void 0!==a&&(u.addressTag=a),e.next=11,this.wapiPostWithdraw(this.extend(u,s));case 11:return d=e.sent,e.abrupt("return",{info:d,id:this.safeString(d,"id")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTradingFee",value:function(e){var t=this.safeString(e,"symbol"),r=this.safeSymbol(t);return{info:e,symbol:r,maker:this.safeFloat(e,"maker"),taker:this.safeFloat(e,"taker")}}},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.wapiGetTradeFee(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"tradeFee",[]),c=this.safeValue(o,0,{}),e.abrupt("return",this.parseTradingFee(c));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.wapiGetTradeFee(t);case 5:for(r=e.sent,n=this.safeValue(r,"tradeFee",[]),a={},s=0;s<n.length;s++)o=this.parseTradingFee(n[s]),c=o.symbol,a[c]=o;return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!(t in this.urls.api))throw new O(this.id+" does not have a testnet/sandbox URL for "+t+" endpoints");var s=this.urls.api[t];s+="/"+e,"wapi"===t&&(s+=".html");var o="userDataStream"===e||"listenKey"===e;if("historicalTrades"===e){if(!this.apiKey)throw new x(this.id+" historicalTrades endpoint requires `apiKey` credential");n={"X-MBX-APIKEY":this.apiKey}}else if(o){if(!this.apiKey)throw new x(this.id+" userDataStream endpoint requires `apiKey` credential");a=this.urlencode(i),n={"X-MBX-APIKEY":this.apiKey,"Content-Type":"application/x-www-form-urlencoded"}}if("private"===t||"sapi"===t||"wapi"===t&&"systemStatus"!==e||"dapiPrivate"===t||"fapiPrivate"===t||"fapiPrivateV2"===t){this.checkRequiredCredentials();var c=void 0,u=this.safeInteger(this.options,"recvWindow",5e3);c="sapi"===t&&"asset/dust"===e?this.urlencodeWithArrayRepeat(this.extend({timestamp:this.nonce(),recvWindow:u},i)):"batchOrders"===e||e.indexOf("sub-account")>=0?this.rawencode(this.extend({timestamp:this.nonce(),recvWindow:u},i)):this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:u},i));var d=this.hmac(this.encode(c),this.encode(this.secret));c+="&signature="+d,n={"X-MBX-APIKEY":this.apiKey},"GET"===r||"DELETE"===r||"wapi"===t?s+="?"+c:(a=c,n["Content-Type"]="application/x-www-form-urlencoded")}else o||Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(418===e||429===e)throw new b(this.id+" "+e.toString()+" "+t+" "+a);if(e>=400){if(a.indexOf("Price * QTY is zero or less")>=0)throw new g(this.id+" order cost = amount * price is zero or less "+a);if(a.indexOf("LOT_SIZE")>=0)throw new g(this.id+" order amount should be evenly divisible by lot size "+a);if(a.indexOf("PRICE_FILTER")>=0)throw new g(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+a)}if(void 0!==s){var u=this.safeValue(s,"success",!0);if(!u){var d=this.safeString(s,"msg"),h=void 0;if(void 0!==d){try{h=JSON.parse(d)}catch(m){h=void 0}void 0!==h&&(s=h)}}var l=this.safeString(s,"msg");void 0!==l&&this.throwExactlyMatchedException(this.exceptions,l,this.id+" "+l);var p=this.safeString(s,"code");if(void 0!==p){if("200"===p||"0"===p)return;if("-2015"===p&&this.options.hasAlreadyAuthenticatedSuccessfully)throw new b(this.id+" temporary banned: "+a);var v=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,p,v),new f(v)}if(!u)throw new f(this.id+" "+a)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:return c=e.sent,"private"!==r&&"wapi"!==r||(this.options.hasAlreadyAuthenticatedSuccessfully=!0),e.abrupt("return",c);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.NotSupported,p=l.RateLimitExceeded,v=l.AuthenticationError,m=l.PermissionDenied,y=l.ArgumentsRequired,g=l.ExchangeError,b=l.ExchangeNotAvailable,k=l.InsufficientFunds,x=l.InvalidOrder,w=l.OrderNotFound,_=l.InvalidNonce,O=l.BadSymbol,T=r(13),S=T.SIGNIFICANT_DIGITS,C=T.DECIMAL_PLACES,I=T.TRUNCATE,M=T.ROUND;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitfinex",name:"Bitfinex",countries:["VG"],version:"v1",rateLimit:1500,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,deposit:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0,transfer:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v2:"https://api-pub.bitfinex.com",public:"https://api.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",referral:"https://www.bitfinex.com/?refcode=P61eYxFL",doc:["https://docs.bitfinex.com/v1/docs","https://github.com/bitfinexcom/bitfinex-api-node"]},api:{v2:{get:["platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist"]},public:{get:["book/{symbol}","lendbook/{currency}","lends/{currency}","pubticker/{symbol}","stats/{symbol}","symbols","symbols_details","tickers","trades/{symbol}"]},private:{post:["account_fees","account_infos","balances","basket_manage","credits","deposit/new","funding/close","history","history/movements","key_info","margin_infos","mytrades","mytrades_funding","offer/cancel","offer/new","offer/status","offers","offers/hist","order/cancel","order/cancel/all","order/cancel/multi","order/cancel/replace","order/new","order/new/multi","order/status","orders","orders/hist","position/claim","position/close","positions","summary","taken_funds","total_taken_funds","transfer","unused_taken_funds","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.001,taker:.002,tiers:{taker:[[0,.002],[5e5,.002],[1e6,.002],[25e5,.002],[5e6,.002],[75e5,.002],[1e7,.0018],[15e6,.0016],[2e7,.14/100],[25e6,.0012],[3e7,.001]],maker:[[0,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[75e5,0],[1e7,0],[15e6,0],[2e7,0],[25e6,0],[3e7,0]]}},funding:{tierBased:!1,percentage:!1,deposit:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:0,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2},withdraw:{BTC:4e-4,IOTA:.5,ETH:.0027,BCH:1e-4,LTC:.001,EOS:.24279,XMR:.04,SAN:.99269,DASH:.01,ETC:.01,XRP:.02,YYW:16.915,NEO:0,ZEC:.001,BTG:0,OMG:.14026,DATA:20.773,QASH:1.9858,ETP:.01,QTUM:.01,EDO:.95001,AVT:1.3045,USDT:20,TRX:28.184,ZRX:1.9947,RCN:10.793,TNB:31.915,SNT:14.976,RLC:1.414,GNT:5.8952,SPK:10.893,REP:.041168,BAT:6.1546,ELF:1.8753,FUN:32.336,SNG:18.622,AID:8.08,MNA:16.617,NEC:1.6504,XTZ:.2}}},commonCurrencies:{ABS:"ABYSS",AIO:"AION",ALG:"ALGO",AMP:"AMPL",ATM:"ATMI",ATO:"ATOM",BAB:"BCH",CTX:"CTXC",DAD:"DADI",DAT:"DATA",DSH:"DASH",DRK:"DRK",EDO:"PNT",GSD:"GUSD",HOT:"Hydro Protocol",IOS:"IOST",IOT:"IOTA",IQX:"IQ",MIT:"MITH",MNA:"MANA",NCA:"NCASH",ORS:"ORS Group",POY:"POLY",QSH:"QASH",QTM:"QTUM",RBT:"RBTC",SEE:"SEER",SNG:"SNGLS",SPK:"SPANK",STJ:"STORJ",TRI:"TRIO",TSD:"TUSD",YYW:"YOYOW",UDC:"USDC",UST:"USDT",UTN:"UTNP",VSY:"VSYS",WAX:"WAXP",XCH:"XCHF",ZBT:"ZB"},exceptions:{exact:{temporarily_unavailable:b,"Order could not be cancelled.":w,"No such order found.":w,"Order price must be positive.":x,"Could not find a key matching the given X-BFX-APIKEY.":v,'Key price should be a decimal number, e.g. "123.456"':x,'Key amount should be a decimal number, e.g. "123.456"':x,ERR_RATE_LIMIT:p,Ratelimit:p,"Nonce is too small.":_,"No summary found.":g,"Cannot evaluate your available balance, please try again":b,"Unknown symbol":O,"Cannot complete transfer. Exchange balance insufficient.":k,"Momentary balance check. Please wait few seconds and try the transfer again.":g},broad:{"Invalid X-BFX-SIGNATURE":v,"This API key does not have permission":m,"not enough exchange balance for ":k,"minimum size for ":x,"Invalid order":x,"The available balance is only":k}},precisionMode:S,options:{currencyNames:{AGI:"agi",AID:"aid",AIO:"aio",ANT:"ant",AVT:"aventus",BAT:"bat",BCH:"bab",BCI:"bci",BFT:"bft",BSV:"bsv",BTC:"bitcoin",BTG:"bgold",CFI:"cfi",COMP:"comp",DAI:"dai",DADI:"dad",DASH:"dash",DATA:"datacoin",DTH:"dth",EDO:"eidoo",ELF:"elf",EOS:"eos",ETC:"ethereumc",ETH:"ethereum",ETP:"metaverse",FUN:"fun",GNT:"golem",IOST:"ios",IOTA:"iota",LEO:"let",LINK:"link",LRC:"lrc",LTC:"litecoin",LYM:"lym",MANA:"mna",MIT:"mit",MKR:"mkr",MTN:"mtn",NEO:"neo",ODE:"ode",OMG:"omisego",OMNI:"mastercoin",QASH:"qash",QTUM:"qtum",RCN:"rcn",RDN:"rdn",REP:"rep",REQ:"req",RLC:"rlc",SAN:"santiment",SNGLS:"sng",SNT:"status",SPANK:"spk",STORJ:"stj",TNB:"tnb",TRX:"trx",TUSD:"tsd",USD:"wire",USDC:"udc",UTK:"utk",USDT:"tetheruso",VEE:"vee",WAX:"wax",XLM:"xlm",XMR:"monero",XRP:"ripple",XVG:"xvg",YOYOW:"yoyow",ZEC:"zcash",ZRX:"zrx",XTZ:"xtz"},orderTypes:{limit:"exchange limit",market:"exchange market"},accountsByType:{spot:"exchange",margin:"trading",funding:"deposit",exchange:"exchange",trading:"trading",deposit:"deposit",derivatives:"trading"}}})}},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAccountFees(t);case 5:for(r=e.sent,n=r.withdraw,a={},s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),a[u]=this.safeFloat(n,c);return e.abrupt("return",{info:r,withdraw:a,deposit:a});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostSummary(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"maker_fee"),taker:this.safeFloat(r,"taker_fee")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetSymbols();case 3:return t=e.sent,e.next=6,this.publicGetSymbolsDetails();case 6:r=e.sent,n=[],a=0;case 9:if(!(a<r.length)){e.next=29;break}if(s=r[a],o=this.safeString(s,"pair"),this.inArray(o,t)){e.next=14;break}return e.abrupt("continue",26);case 14:o=o.toUpperCase(),c=void 0,u=void 0,o.indexOf(":")>=0?(d=o.split(":"),c=d[0],u=d[1]):(c=o.slice(0,3),u=o.slice(3,6)),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,p={price:this.safeInteger(s,"price_precision"),amount:8},(v={amount:{min:this.safeFloat(s,"minimum_order_size"),max:this.safeFloat(s,"maximum_order_size")},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)}}).cost={min:v.amount.min*v.price.min,max:void 0},m=this.safeValue(s,"margin"),n.push({id:o,symbol:f,base:h,quote:l,baseId:c,quoteId:u,active:!0,type:"spot",margin:m,precision:p,limits:v,info:s});case 26:a++,e.next=9;break;case 29:return e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"amountToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.amount,C)}},{key:"priceToPrecision",value:function(e,t){return t=this.decimalToPrecision(t,M,this.markets[e].precision.price,this.precisionMode),this.decimalToPrecision(t,I,8,C)}},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=s[a],c=i*o,u="quote";"sell"===r?c*=n:u="base";var d=s[u],h=this.safeValue(this.currencies,d);if(void 0!==h){var l=this.safeInteger(h,"precision");void 0!==l&&(c=parseFloat(this.currencyToPrecision(d,c)))}return{type:a,currency:s[u],rate:o,cost:c}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeValue(this.options,"accountsByType",{}),n=this.safeString(t,"type","exchange"),void 0!==(a=this.safeString(r,n))){e.next=9;break}throw s=Object.keys(r),new g(this.id+" fetchBalance type parameter must be one of "+s.join(", "));case 9:return o=this.omit(t,"type"),e.next=12,this.privatePostBalances(o);case 12:for(c=e.sent,u={info:c},d="derivatives"===n,h=0;h<c.length;h++)l=c[h],f=this.safeString(l,"type"),p=this.safeStringLower(l,"currency",""),v=p.length-2,m="f0"===p.slice(v),y=!d||m,a===f&&y&&((b=this.safeCurrencyCode(p))in u||((k=this.account()).free=this.safeFloat(l,"available"),k.total=this.safeFloat(l,"amount"),u[b]=k));return e.abrupt("return",this.parseBalance(u));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,y,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=w.length>4&&void 0!==w[4]?w[4]:{},e.next=3,this.loadMarkets();case 3:if(o=this.safeValue(this.options,"accountsByType",{}),void 0!==(c=this.safeString(o,n))){e.next=8;break}throw u=Object.keys(o),new g(this.id+" transfer fromAccount must be one of "+u.join(", "));case 8:if(void 0!==(d=this.safeString(o,a))){e.next=12;break}throw h=Object.keys(o),new g(this.id+" transfer toAccount must be one of "+h.join(", "));case 12:return l=this.currencyId(t),f=this.convertDerivativesId(l,n),p=this.convertDerivativesId(l,a),v=this.currencyToPrecision(t,r),m={amount:v,currency:f,currency_to:p,walletfrom:c,walletto:d},e.next=19,this.privatePostTransfer(this.extend(m,s));case 19:if(y=e.sent,b=this.safeValue(y,0),k=this.safeString(b,"status"),void 0!==(x=this.safeString(b,"message"))){e.next=25;break}throw new g(this.id+" transfer failed");case 25:if("error"!==k){e.next=28;break}throw this.throwExactlyMatchedException(this.exceptions.exact,x,this.id+" "+x),new g(this.id+" "+x);case 28:return e.abrupt("return",{info:y,status:k,amount:v,code:t,fromAccount:n,toAccount:a});case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"convertDerivativesId",value:function(e,t){var r=e.length-2,i="F0"===e.slice(r);return"derivatives"!==t&&"trading"!==t&&i?e=e.slice(0,r):"derivatives"!==t||i||(e+="F0"),e}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit_bids=r,a.limit_asks=r),e.next=8,this.publicGetBookSymbol(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),c=o.symbol,a[c]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetPubtickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"timestamp");void 0!==r&&(r*=1e3),r=parseInt(r);var i=void 0;if(void 0!==t)i=t.symbol;else if("pair"in e){var n=this.safeString(e,"pair");if(void 0!==n)if(n in this.markets_by_id)i=(t=this.markets_by_id[n]).symbol;else{var a=n.slice(0,3),s=n.slice(3,6),o=this.safeCurrencyCode(a),c=this.safeCurrencyCode(s);i=o+"/"+c}}var u=this.safeFloat(e,"last_price");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"mid"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"tid"),i=this.safeFloat(e,"timestamp");void 0!==i&&(i=1e3*parseInt(i));var n=this.safeStringLower(e,"type"),a=this.safeString(e,"order_id"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==s&&void 0!==o&&(c=s*o);var u=void 0;if("fee_amount"in e){var d=-this.safeFloat(e,"fee_amount"),h=this.safeString(e,"fee_currency");u={cost:d,currency:this.safeCurrencyCode(h)}}return{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:undefined,order:a,side:n,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:u}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:50,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id,limit_trades:n},void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=10,this.publicGetTradesSymbol(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit_trades=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=14,this.privatePostMytrades(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return(c={symbol:this.marketId(t),side:n,amount:this.amountToPrecision(t,a),type:this.safeString(this.options.orderTypes,r,r),ocoorder:!1,buy_price_oco:0,sell_price_oco:0}).price="market"===r?this.nonce().toString():this.priceToPrecision(t,s),e.next=8,this.privatePostOrderNew(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",this.parseOrder(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:void 0,c=h.length>6&&void 0!==h[6]?h[6]:{},e.next=5,this.loadMarkets();case 5:return u={order_id:parseInt(t)},void 0!==o&&(u.price=this.priceToPrecision(r,o)),void 0!==s&&(u.amount=this.numberToString(s)),void 0!==r&&(u.symbol=this.marketId(r)),void 0!==a&&(u.side=a),void 0!==n&&(u.type=this.safeString(this.options.orderTypes,n,n)),e.next=13,this.privatePostOrderCancelReplace(this.extend(u,c));case 13:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:parseInt(t)},e.next=7,this.privatePostOrderCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:void 0,t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this.privatePostOrderCancelAll(t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"side"),i=this.safeValue(e,"is_live"),n=this.safeValue(e,"is_cancelled"),a=void 0;a=i?"open":n?"canceled":"closed";var s=this.safeStringUpper(e,"symbol"),o=this.safeSymbol(s,t),c=this.safeString(e,"type",""),u=c.indexOf("exchange ")>=0;if(u){var d=e.type.split(" ");c=d[1]}var h=this.safeTimestamp(e,"timestamp"),l=this.safeString(e,"id");return this.safeOrder({info:e,id:l,clientOrderId:void 0,timestamp:h,datetime:this.iso8601(h),lastTradeTimestamp:void 0,symbol:o,type:c,timeInForce:void 0,postOnly:void 0,side:r,price:this.safeFloat(e,"price"),stopPrice:void 0,average:this.safeFloat(e,"avg_execution_price"),amount:this.safeFloat(e,"original_amount"),remaining:this.safeFloat(e,"remaining_amount"),filled:this.safeFloat(e,"executed_amount"),status:a,fee:void 0,cost:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0===t){e.next=9;break}if(t in this.markets){e.next=9;break}throw new g(this.id+" has no symbol "+t);case 9:return e.next=11,this.privatePostOrders(a);case 11:return s=e.sent,o=this.parseOrders(s,void 0,r,n),void 0!==t&&(o=this.filterBy(o,"symbol",t)),e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.limit=n),e.next=10,this.privatePostOrdersHist(this.extend(s,a));case 10:return o=e.sent,c=this.parseOrders(o,void 0,r,n),void 0!==t&&(c=this.filterBy(c,"symbol",t)),c=this.filterByArray(c,"status",["closed","canceled"],!1),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:parseInt(t)},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===a&&(a=100),o=this.market(t),c="t"+o.id,u={symbol:c,timeframe:this.timeframes[r],sort:1,limit:a},void 0!==n&&(u.start=n),e.next=13,this.v2GetCandlesTradeTimeframeSymbolHist(this.extend(u,s));case 13:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrencyName",value:function(e){if(e in this.options.currencyNames)return this.options.currencyNames[e];throw new f(this.id+" "+e+" not supported for withdrawal")}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n={renew:1},e.next=6,this.fetchDepositAddress(t,this.extend(n,r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.getCurrencyName(t),a={method:n,wallet_name:"exchange",renew:0},e.next=7,this.privatePostDepositNew(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"address"),c=void 0,"address_pool"in s&&(c=o,o=s.address_pool),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.safeString(a,"currency"),o=this.omit(a,"currency"),c=void 0,void 0!==s){e.next=16;break}if(void 0!==t){e.next=14;break}throw new y(this.id+" fetchTransactions() requires a currency `code` argument or a `currency` parameter");case 14:c=this.currency(t),s=c.id;case 16:return o.currency=s,void 0!==r&&(o.since=parseInt(r/1e3)),e.next=20,this.privatePostHistoryMovements(this.extend(o,a));case 20:return u=e.sent,e.abrupt("return",this.parseTransactions(u,c,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"timestamp_created");void 0!==r&&(r=parseInt(1e3*r));var i=this.safeFloat(e,"timestamp");void 0!==i&&(i=parseInt(1e3*i));var n=this.safeString(e,"currency"),a=this.safeCurrencyCode(n,t),s=this.safeStringLower(e,"type"),o=this.parseTransactionStatus(this.safeString(e,"status")),c=this.safeFloat(e,"fee");return void 0!==c&&(c=Math.abs(c)),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:r,datetime:this.iso8601(r),address:this.safeString(e,"address"),tag:void 0,type:s,amount:this.safeFloat(e,"amount"),currency:a,status:o,updated:i,fee:{currency:a,cost:c,rate:void 0}}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({SENDING:"pending",CANCELED:"canceled",ZEROCONFIRMED:"failed",COMPLETED:"ok"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.getCurrencyName(t),c={withdraw_type:o,walletselected:"exchange",amount:this.numberToString(r),address:n},void 0!==a&&(c.payment_id=a),e.next=10,this.privatePostWithdraw(this.extend(c,s));case 10:if(u=e.sent,d=u[0],h=this.safeString(d,"withdrawal_id"),l=this.safeString(d,"message"),f=this.findBroadlyMatchedKey(this.exceptions.broad,l),0!==h){e.next=20;break}if(void 0===f){e.next=19;break}throw new(0,this.exceptions.broad[f])(this.id+" "+l);case 19:throw new g(this.id+" withdraw returned an id of zero: "+this.json(d));case 20:return e.abrupt("return",{info:d,id:h});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostPositions(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i);s="v2"===t?"/"+t+s:"/"+this.version+s;var o=this.omit(i,this.extractParams(e)),c=this.urls.api[t]+s;if(("public"===t||e.indexOf("/hist")>=0)&&Object.keys(o).length){var u="?"+this.urlencode(o);c+=u,s+=u}if("private"===t){this.checkRequiredCredentials();var d=this.nonce();o=this.extend({nonce:d.toString(),request:s},o),a=this.json(o);var h=this.stringToBase64(a),l=this.encode(this.secret),f=this.hmac(h,l,"sha384");n={"X-BFX-APIKEY":this.apiKey,"X-BFX-PAYLOAD":this.decode(h),"X-BFX-SIGNATURE":f,"Content-Type":"application/json"}}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&e>=400&&"{"===a[0]){var u=this.id+" "+a,d=this.safeString2(s,"message","error");throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new g(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.BadRequest,v=f.ExchangeError,m=f.ArgumentsRequired,y=f.AuthenticationError,g=f.InsufficientFunds,b=f.OrderNotFound,k=f.ExchangeNotAvailable,x=f.DDoSProtection,w=f.InvalidOrder,_=f.InvalidAddress;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"zb",name:"ZB",countries:["CN"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchDepositAddresses:!0,fetchDeposits:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchClosedOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},exceptions:{exact:{1001:v,1002:v,1003:y,1004:y,1005:y,1006:y,1009:k,2001:g,2002:g,2003:g,2005:g,2006:g,2007:g,2009:g,3001:b,3002:w,3003:w,3004:y,3005:p,3006:y,3007:y,3008:b,3009:w,3011:w,4001:k,4002:x},broad:{"\u63d0\u5e01\u5730\u5740\u6709\u8bef\uff0c\u8bf7\u5148\u6dfb\u52a0\u63d0\u5e01\u5730\u5740\u3002":_}},urls:{logo:"https://user-images.githubusercontent.com/1294454/32859187-cd5214f0-ca5e-11e7-967d-96568e2e2bd1.jpg",api:{public:"http://api.zb.cn/data",private:"https://trade.zb.cn/api"},www:"https://www.zb.com",doc:"https://www.zb.com/i/developer",fees:"https://www.zb.com/i/rate"},api:{public:{get:["markets","ticker","allTicker","depth","trades","kline"]},private:{get:["order","orderMoreV2","cancelOrder","getOrder","getOrders","getOrdersNew","getOrdersIgnoreTradeType","getUnfinishedOrdersIgnoreTradeType","getFinishedAndPartialOrders","getAccountInfo","getUserAddress","getPayinAddress","getWithdrawAddress","getWithdrawRecord","getChargeRecord","getCnyWithdrawRecord","getCnyChargeRecord","withdraw","addSubUser","getSubUserList","doTransferFunds","createSubUserKey","getLeverAssetsInfo","getLeverBills","transferInLever","transferOutLever","loan","cancelLoan","getLoans","getLoanRecords","borrow","autoBorrow","repay","doAllRepay","getRepayments","getFinanceRecords","changeInvestMark","changeLoop","getCrossAssets","getCrossBills","transferInCross","transferOutCross","doCrossLoan","doCrossRepay","getCrossRepayRecords"]}},fees:{funding:{withdraw:{BTC:1e-4,BCH:6e-4,LTC:.005,ETH:.01,ETC:.01,BTS:3,EOS:1,QTUM:.01,HSR:.001,XRP:.1,USDT:"0.1%",QCASH:5,DASH:.002,BCD:0,UBTC:0,SBTC:0,INK:20,TV:.1,BTH:0,BCX:0,LBTC:0,CHAT:20,bitCNY:20,HLC:20,BTP:0,BCW:0}},trading:{maker:.002,taker:.002}},commonCurrencies:{ENT:"ENTCash"}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)c=a[o],u=r[c],d=c.split("_"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,y={amount:this.safeInteger(u,"amountScale"),price:this.safeInteger(u,"priceScale")},s.push({id:c,symbol:m,baseId:l,quoteId:f,base:p,quote:v,active:!0,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:void 0},price:{min:Math.pow(10,-y.price),max:void 0},cost:{min:0,max:void 0}},info:u});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r.result,"coins"),a={info:r},s=0;s<n.length;s++)o=n[s],c=this.account(),u=this.safeString(o,"key"),d=this.safeCurrencyCode(u),c.free=this.safeFloat(o,"available"),c.used=this.safeFloat(o,"freez"),a[d]=c;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"key"),i=void 0,n=this.safeString(e,"memo");if(void 0!==n)i=n;else if(r.indexOf("_")>=0){var a=r.split("_");r=a[0],i=a[1]}var s=this.safeString(e,"blockChain"),o=this.safeCurrencyCode(s,t);return{currency:o,address:r,tag:i,info:e}}},{key:"parseDepositAddresses",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++){var n=this.parseDepositAddress(e[i]);r.push(n)}return t&&(r=this.filterByArray(r,"currency",t)),this.indexBy(r,"currency")}},{key:"fetchDepositAddresses",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetGetPayinAddress(r);case 6:return n=e.sent,a=this.safeValue(n,"message",{}),s=this.safeValue(a,"datas",[]),e.abrupt("return",this.parseDepositAddresses(s,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetGetUserAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"message",{}),c=this.safeValue(o,"datas",{}),e.abrupt("return",this.parseDepositAddress(c,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.size=r),e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetAllTicker(r);case 6:for(n=e.sent,a={},s={},o=Object.keys(this.marketsById),c=0;c<o.length;c++)u=o[c].replace("_",""),s[u]=this.marketsById[o[c]];for(d=Object.keys(n),h=0;h<d.length;h++)l=s[d[h]],a[l.symbol]=this.parseTicker(n[d[h]],l);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=s.ticker,e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=1e3),c={market:o.id,type:this.timeframes[r],limit:a},void 0!==n&&(c.since=n),e.next=12,this.publicGetKline(this.extend(c,s));case 12:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"trade_type");i="bid"===i?"buy":"sell";var n=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=void 0;void 0!==a&&void 0!==s&&(o=a*s);var c=void 0;return void 0!==t&&(c=t.symbol),{info:e,id:n,timestamp:r,datetime:this.iso8601(r),symbol:c,type:void 0,side:i,order:void 0,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},"limit"===r){e.next=4;break}throw new w(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c={price:this.priceToPrecision(t,s),amount:this.amountToPrecision(t,a),tradeType:"buy"===n?"1":"0",currency:this.marketId(t)},e.next=9,this.privateGetOrder(this.extend(c,o));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return a={id:t.toString(),currency:this.marketId(r)},e.next=7,this.privateGetCancelOrder(this.extend(a,n));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={id:t.toString(),currency:this.marketId(r)},e.next=9,this.privateGetGetOrder(this.extend(a,n));case 9:return s=e.sent,e.abrupt("return",this.parseOrder(s,void 0));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:50,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id,pageIndex:1,pageSize:n},c="privateGetGetOrdersIgnoreTradeType","tradeType"in a&&(c="privateGetGetOrdersNew"),u=void 0,e.prev=13,e.next=16,this[c](this.extend(o,a));case 16:u=e.sent,e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(13),!(e.t0 instanceof b)){e.next=23;break}return e.abrupt("return",[]);case 23:throw e.t0;case 24:return e.abrupt("return",this.parseOrders(u,s,r,n));case 25:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id,pageIndex:1,pageSize:10},e.next=12,this.privateGetGetFinishedAndPartialOrders(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:10,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+"fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id,pageIndex:1,pageSize:n},c="privateGetGetUnfinishedOrdersIgnoreTradeType","tradeType"in a&&(c="privateGetGetOrdersNew"),u=void 0,e.prev=13,e.next=16,this[c](this.extend(o,a));case 16:u=e.sent,e.next=24;break;case 19:if(e.prev=19,e.t0=e.catch(13),!(e.t0 instanceof b)){e.next=23;break}return e.abrupt("return",[]);case 23:throw e.t0;case 24:return e.abrupt("return",this.parseOrders(u,s,r,n));case 25:case"end":return e.stop()}}),e,this,[[13,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"type");r=1===r?"buy":"sell";var i="limit",n=this.safeInteger(e,"trade_date"),a=this.safeString(e,"currency"),s=this.safeSymbol(a,t,"_"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"trade_amount"),u=this.safeFloat(e,"total_amount"),d=this.safeFloat(e,"trade_money"),h=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeString(e,"id"),f=this.safeFloat(e,"fees"),p=void 0;if(void 0!==f){var v=void 0,m=this.safeValue(e,"useZbFee");!0===m?v="ZB":void 0!==t&&(v="sell"===r?t.quote:t.base),p={cost:f,currency:v}}return this.safeOrder({info:e,id:l,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:s,type:i,timeInForce:void 0,postOnly:void 0,side:r,price:o,stopPrice:void 0,average:void 0,cost:d,amount:u,filled:c,remaining:void 0,status:h,fee:p,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"canceled",2:"closed",3:"open"},e,e)}},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"failed",2:"ok",3:"canceled",5:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"hash"),n=this.safeFloat(e,"amount"),a=this.parse8601(this.safeString(e,"submit_time"));a=this.safeInteger(e,"submitTime",a);var s=this.safeString2(e,"toAddress","address"),o=void 0;if(void 0!==s){var c=s.split("_");s=this.safeString(c,0),o=this.safeString(c,1)}var u=this.safeInteger(e,"confirmTimes"),d=this.safeInteger(e,"manageTime"),h=void 0,l=this.safeString(e,"currency"),f=this.safeCurrencyCode(l,t);void 0!==s&&(h=void 0===u?"withdrawal":"deposit");var p=this.parseTransactionStatus(this.safeString(e,"status")),v=void 0,m=this.safeFloat(e,"fees");return void 0!==m&&(v={cost:m,currency:f}),{info:e,id:r,txid:i,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:s,addressTo:s,tagFrom:void 0,tag:o,tagTo:o,type:h,amount:n,currency:f,status:p,updated:d,fee:v}}},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==(o=this.safeString(s,"safePwd",this.password))){e.next=5;break}throw new m(this.id+" withdraw() requires exchange.password or a safePwd parameter");case 5:if(void 0!==(c=this.safeFloat(s,"fees"))){e.next=8;break}throw new m(this.id+" withdraw() requires a fees parameter");case 8:return this.checkAddress(n),e.next=11,this.loadMarkets();case 11:return u=this.currency(t),void 0!==a&&(n+="_"+a),d={amount:this.currencyToPrecision(t,r),currency:u.id,fees:this.currencyToPrecision(t,c),method:"withdraw",receiveAddr:n,safePwd:o},e.next=16,this.privateGetWithdraw(this.extend(d,s));case 16:return h=e.sent,l=this.parseTransaction(h,u),e.abrupt("return",this.extend(l,{type:"withdrawal",address:n,addressTo:n,amount:r}));case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.pageSize=n),e.next=12,this.privateGetGetWithdrawRecord(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"message",{}),d=this.safeValue(u,"datas",{}),h=this.safeValue(d,"list",[]),e.abrupt("return",this.parseTransactions(h,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.pageSize=n),e.next=12,this.privateGetGetChargeRecord(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"message",{}),d=this.safeValue(u,"datas",{}),h=this.safeValue(d,"list",[]),e.abrupt("return",this.parseTransactions(h,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];if("public"===t)s+="/"+this.version+"/"+e,Object.keys(i).length&&(s+="?"+this.urlencode(i));else{var o=this.keysort(this.extend({method:e,accesskey:this.apiKey},i)),c=this.nonce();o=this.keysort(o);var u=this.rawencode(o),d=this.hash(this.encode(this.secret),"sha1"),h=this.hmac(this.encode(u),this.encode(d),"md5"),l="sign="+h+"&reqTime="+c.toString();s+="/"+e+"?"+u+"&"+l}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"{"===a[0]){var u=this.id+" "+a;if(this.throwBroadlyMatchedException(this.exceptions.broad,a,u),"code"in s){var d=this.safeString(s,"code");if(this.throwExactlyMatchedException(this.exceptions.exact,d,u),"1000"!==d)throw new v(u)}var h=this.safeValue(s,"result");if(void 0!==h)if(!h)throw"\u670d\u52a1\u7aef\u5fd9\u788c"===this.safeString(s,"message")?new k(u):new v(u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.InsufficientFunds,p=l.ArgumentsRequired,v=l.ExchangeError,m=l.InvalidOrder,y=l.InvalidAddress,g=l.AuthenticationError,b=l.NotSupported,k=l.OrderNotFound,x=l.OnMaintenance,w=l.PermissionDenied,_=l.RateLimitExceeded,O=r(13).TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinbasepro",name:"Coinbase Pro",countries:["US"],rateLimit:1e3,userAgent:this.userAgents.chrome,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,deposit:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchClosedOrders:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTime:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0,withdraw:!0,fetchDeposits:!0,fetchWithdrawals:!0},timeframes:{"1m":60,"5m":300,"15m":900,"1h":3600,"6h":21600,"1d":86400},urls:{test:{public:"https://api-public.sandbox.pro.coinbase.com",private:"https://api-public.sandbox.pro.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/41764625-63b7ffde-760a-11e8-996d-a6328fa9347a.jpg",api:{public:"https://api.pro.coinbase.com",private:"https://api.pro.coinbase.com"},www:"https://pro.coinbase.com/",doc:"https://docs.pro.coinbase.com",fees:["https://docs.pro.coinbase.com/#fees","https://support.pro.coinbase.com/customer/en/portal/articles/2945310-fees"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["currencies","products","products/{id}","products/{id}/book","products/{id}/candles","products/{id}/stats","products/{id}/ticker","products/{id}/trades","time"]},private:{get:["accounts","accounts/{id}","accounts/{id}/holds","accounts/{id}/ledger","accounts/{id}/transfers","coinbase-accounts","fills","funding","fees","margin/profile_information","margin/buying_power","margin/withdrawal_power","margin/withdrawal_power_all","margin/exit_plan","margin/liquidation_history","margin/position_refresh_amounts","margin/status","oracle","orders","orders/{id}","orders/client:{client_oid}","otc/orders","payment-methods","position","profiles","profiles/{id}","reports/{report_id}","transfers","transfers/{transfer_id}","users/self/trailing-volume","users/self/exchange-limits","withdrawals/fee-estimate"],post:["conversions","deposits/coinbase-account","deposits/payment-method","coinbase-accounts/{id}/addresses","funding/repay","orders","position/close","profiles/margin-transfer","profiles/transfer","reports","withdrawals/coinbase","withdrawals/coinbase-account","withdrawals/crypto","withdrawals/payment-method"],delete:["orders","orders/client:{client_oid}","orders/{id}"]}},commonCurrencies:{CGLD:"CELO"},precisionMode:O,fees:{trading:{tierBased:!0,percentage:!0,maker:.005,taker:.005},funding:{tierBased:!1,percentage:!1,withdraw:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:25},deposit:{BCH:0,BTC:0,LTC:0,ETH:0,EUR:.15,USD:10}}},exceptions:{exact:{"Insufficient funds":f,NotFound:k,"Invalid API Key":g,"invalid signature":g,"Invalid Passphrase":g,"Invalid order id":m,"Private rate limit exceeded":_,"Trading pair not available":w,"Product not found":m},broad:{"Order already done":k,"order not found":k,"price too small":m,"price too precise":m,"under maintenance":x,"size is too small":m,"Cancel only mode":x}}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),c=this.safeString(s,"name"),u=this.safeCurrencyCode(o),d=this.safeValue(s,"details",{}),h=this.safeFloat(s,"max_precision"),l=this.safeString(s,"status"),f="online"===l,n[u]={id:o,code:u,info:s,type:this.safeString(d,"type"),name:c,active:f,fee:void 0,precision:h,limits:{amount:{min:this.safeFloat(d,"min_size"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(d,"min_withdrawal_amount"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetProducts(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),c=this.safeString(s,"base_currency"),u=this.safeString(s,"quote_currency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f={min:this.safeFloat(s,"quote_increment"),max:void 0},p={amount:this.safeFloat(s,"base_increment"),price:this.safeFloat(s,"quote_increment")},v=this.safeString(s,"status"),m="online"===v,n.push(this.extend(this.fees.trading,{id:o,symbol:l,baseId:c,quoteId:u,base:d,quote:h,precision:p,limits:{amount:{min:this.safeFloat(s,"base_min_size"),max:this.safeFloat(s,"base_max_size")},price:f,cost:{min:this.safeFloat(s,"min_market_funds"),max:this.safeFloat(s,"max_market_funds")}},active:m,info:s}));return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),c=this.safeString(s,"currency"),u=this.safeCurrencyCode(c),n.push({id:o,type:void 0,currency:u,info:s});return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),c=this.safeCurrencyCode(o),u={free:this.safeFloat(s,"available"),used:this.safeFloat(s,"hold"),total:this.safeFloat(s,"balance")},n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t),level:2},e.next=7,this.publicGetProductsIdBook(this.extend(n,r));case 7:return a=e.sent,(s=this.parseOrderBook(a)).nonce=this.safeInteger(a,"sequence"),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeValue(e,"time")),i=this.safeFloat(e,"bid"),n=this.safeFloat(e,"ask"),a=this.safeFloat(e,"price"),s=void 0===t?void 0:t.symbol;return{symbol:s,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:i,bidVolume:void 0,ask:n,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},s=this.safeString(this.options,"fetchTickerMethod","publicGetProductsIdTicker"),e.next=8,this[s](this.extend(a,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"time","created_at")),i=this.safeString(e,"product_id"),n=this.safeSymbol(i,t,"-"),a=void 0,s=void 0,o=void 0,c=void 0;if(void 0!==t){var u=this.safeStringLower(t,"quoteId"),d=u+"_value";c=this.safeFloat(e,d),s=t.quote;var h=this.safeString(e,"liquidity");void 0!==h&&(a=t[o="T"===h?"taker":"maker"])}var l=this.safeFloat2(e,"fill_fees","fee"),f={cost:l,currency:s,rate:a},p=void 0,v=this.safeString(e,"trade_id"),m="buy"===e.side?"sell":"buy",y=this.safeString(e,"order_id");void 0!==y&&(m="buy"===e.side?"buy":"sell");var g=this.safeFloat(e,"price"),b=this.safeFloat(e,"size");return void 0===c&&(c=b*g),{id:v,order:y,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:p,takerOrMaker:o,side:m,price:g,amount:b,fee:f,cost:c}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={product_id:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetFills(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetProductsIdTrades(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,3),this.safeFloat(e,2),this.safeFloat(e,1),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=this.timeframes[r],u={id:o.id,granularity:c},void 0!==n&&(u.start=this.iso8601(n),void 0===a&&(a=300),u.end=this.iso8601(this.sum((a-1)*c*1e3,n))),e.next=12,this.publicGetProductsIdCandles(this.extend(u,s));case 12:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"epoch"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",active:"open",open:"open",done:"closed",canceled:"canceled",canceling:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"product_id");t=this.safeMarket(i,t,"-");var n=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"filled_size"),o=this.safeFloat(e,"size",s),c=this.safeFloat(e,"executed_value"),u=this.safeFloat(e,"fill_fees"),d=void 0;if(void 0!==u){var h=void 0;void 0!==t&&(h=t.quote),d={cost:u,currency:h,rate:void 0}}var l=this.safeString(e,"id"),f=this.safeString(e,"type"),p=this.safeString(e,"side"),v=this.safeString(e,"time_in_force"),m=this.safeValue(e,"post_only"),y=this.safeFloat(e,"stop_price"),g=this.safeString(e,"client_oid");return this.safeOrder({id:l,clientOrderId:g,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:n,symbol:t.symbol,type:f,timeInForce:v,postOnly:m,side:p,price:a,stopPrice:y,cost:c,amount:o,filled:s,remaining:void 0,fee:d,average:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={},a=this.safeString2(r,"clientOrderId","client_oid"),s=void 0,void 0===a?(s="privateGetOrdersId",n.id=t):(s="privateGetOrdersClientClientOid",n.client_oid=a,r=this.omit(r,["clientOrderId","client_oid"])),e.next=10,this[s](this.extend(n,r));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==r&&(o=this.market(r)),c={order_id:t},e.next=11,this.privateGetFills(this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,o,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"all"},e.next=7,this.fetchOpenOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.product_id=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetOrders(this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"done"},e.next=7,this.fetchOpenOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={type:r,side:n,product_id:c.id},void 0!==(d=this.safeString2(o,"clientOrderId","client_oid"))&&(u.client_oid=d,o=this.omit(o,["clientOrderId","client_oid"])),void 0!==(h=this.safeFloat2(o,"stopPrice","stop_price"))&&(u.stop_price=this.priceToPrecision(t,h),o=this.omit(o,["stopPrice","stop_price"])),void 0!==(l=this.safeString2(o,"timeInForce","time_in_force"))&&(u.time_in_force=l,o=this.omit(o,["timeInForce","time_in_force"])),"limit"===r?(u.price=this.priceToPrecision(t,s),u.size=this.amountToPrecision(t,a)):"market"===r&&(void 0===(f=this.safeFloat2(o,"cost","funds"))?void 0!==s&&(f=a*s):o=this.omit(o,["cost","funds"]),void 0!==f?u.funds=this.costToPrecision(t,f):u.size=this.amountToPrecision(t,a)),e.next=15,this.privatePostOrders(this.extend(u,o));case 15:return p=e.sent,e.abrupt("return",this.parseOrder(p,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={},s=this.safeString2(n,"clientOrderId","client_oid"),o=void 0,void 0===s?(o="privateDeleteOrdersId",a.id=t):(o="privateDeleteOrdersClientClientOid",a.client_oid=s,n=this.omit(n,["clientOrderId","client_oid"])),c=void 0,void 0!==r&&(c=this.market(r),a.product_id=c.symbol),e.next=12,this[o](this.extend(a,n));case 12:return e.abrupt("return",e.sent);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.product_id=a.symbol),e.next=9,this.privateDeleteOrders(this.extend(n,r));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=s[a],c=i*n,u=s.quote;return{type:a,currency:u,rate:o,cost:parseFloat(this.currencyToPrecision(u,o*c))}}},{key:"fetchPaymentMethods",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.privateGetPaymentMethods(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"deposit",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=3,this.loadMarkets();case 3:if(s=this.currency(t),o={currency:s.id,amount:r},c="privatePostDeposits",!("payment_method_id"in a)){e.next=10;break}c+="PaymentMethod",e.next=15;break;case 10:if(!("coinbase_account_id"in a)){e.next=14;break}c+="CoinbaseAccount",e.next=15;break;case 14:throw new b(this.id+" deposit() requires one of `coinbase_account_id` or `payment_method_id` extra params");case 15:return e.next=17,this[c](this.extend(o,a));case 17:if(u=e.sent){e.next=20;break}throw new v(this.id+" deposit() error: "+this.json(u));case 20:return e.abrupt("return",{info:u,id:u.id});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,amount:r},u="privatePostWithdrawals","payment_method_id"in s?u+="PaymentMethod":"coinbase_account_id"in s?u+="CoinbaseAccount":(u+="Crypto",c.crypto_address=n,void 0!==a&&(c.destination_tag=a)),e.next=11,this[u](this.extend(c,s));case 11:if(d=e.sent){e.next=14;break}throw new v(this.id+" withdraw() error: "+this.json(d));case 14:return e.abrupt("return",{info:d,id:d.id});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:if(s=void 0,void 0!==(o=this.safeString(a,"id"))){e.next=18;break}if(void 0===t){e.next=18;break}if(s=this.currency(t),c=this.indexBy(this.accounts,"currency"),void 0!==(u=this.safeValue(c,t))){e.next=17;break}throw new v(this.id+" fetchTransactions() could not find account id for "+t);case 17:o=u.id;case 18:if(d={},void 0!==o&&(d.id=o),void 0!==n&&(d.limit=n),h=void 0,void 0!==o){e.next=29;break}return e.next=25,this.privateGetTransfers(this.extend(d,a));case 25:for(h=e.sent,l=0;l<h.length;l++)f=this.safeString(h[l],"account_id"),p=this.safeValue(this.accountsById,f),m=this.safeString(p,"currency"),h[l].currency=m;e.next=33;break;case 29:return e.next=31,this.privateGetAccountsIdTransfers(this.extend(d,a));case 31:for(h=e.sent,y=0;y<h.length;y++)h[y].currency=t;case 33:return e.abrupt("return",this.parseTransactions(h,s,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(a,{type:"deposit"})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(a,{type:"withdraw"})));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){if(this.safeValue(e,"canceled_at"))return"canceled";var t=this.safeValue(e,"processed_at"),r=this.safeValue(e,"completed_at");return r?"ok":t&&!r?"failed":"pending"}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"details",{}),i=this.safeString(e,"id"),n=this.safeString(r,"crypto_transaction_hash"),a=this.parse8601(this.safeString(e,"created_at")),s=this.parse8601(this.safeString(e,"processed_at")),o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o,t),u=this.parseTransactionStatus(e),d=this.safeFloat(e,"amount"),h=this.safeString(e,"type"),l=this.safeString(r,"crypto_address"),f=this.safeString(r,"destination_tag");l=this.safeString(e,"crypto_address",l);var p=void 0;if("withdraw"===h){h="withdrawal",l=this.safeString(r,"sent_to_address",l);var v=this.safeFloat(r,"fee");void 0!==v&&(void 0!==d&&(d-=v),p={cost:v,currency:c})}return{info:e,id:i,txid:n,timestamp:a,datetime:this.iso8601(a),address:l,tag:f,type:h,amount:d,currency:c,status:u,updated:s,fee:p}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var c=this.urls.api[t]+s;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d="";"GET"!==r&&Object.keys(o).length&&(d=a=this.json(o));var h=u+r+s+d,l=this.base64ToBinary(this.secret),f=this.hmac(this.encode(h),l,"sha256","base64");n={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":f,"CB-ACCESS-TIMESTAMP":u,"CB-ACCESS-PASSPHRASE":this.password,"Content-Type":"application/json"}}return{url:c,method:r,body:a,headers:n}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),void 0!==(a=this.safeValue(this.options,"coinbaseAccounts"))){e.next=11;break}return e.next=8,this.privateGetCoinbaseAccounts();case 8:a=e.sent,this.options.coinbaseAccounts=a,this.options.coinbaseAccountsByCurrencyId=this.indexBy(a,"currency");case 11:if(s=n.id,void 0!==(o=this.safeValue(this.options.coinbaseAccountsByCurrencyId,s))){e.next=15;break}throw new y(this.id+" fetchDepositAddress() could not find currency code "+t+" with id = "+s+" in this.options['coinbaseAccountsByCurrencyId']");case 15:return c={id:o.id},e.next=18,this.privatePostCoinbaseAccountsIdAddresses(this.extend(c,r));case 18:return u=e.sent,d=this.safeString(u,"address"),h=this.safeString(u,"destination_tag"),e.abrupt("return",{currency:t,address:this.checkAddress(d),tag:h,info:u});case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(400===e||404===e){if("{"===a[0]){var u=this.safeString(s,"message"),d=this.id+" "+u;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new v(d)}throw new v(this.id+" "+a)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if("string"===typeof(c=e.sent)){e.next=11;break}if(!("message"in c)){e.next=11;break}throw new v(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.ExchangeNotAvailable,m=l.ArgumentsRequired,y=l.InsufficientFunds,g=l.InvalidOrder,b=l.RateLimitExceeded,k=l.InvalidNonce,x=l.AuthenticationError,w=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"fcoin",name:"FCoin",countries:["CN"],rateLimit:2e3,userAgent:this.userAgents.chrome39,version:"v2",accounts:void 0,accountsById:void 0,hostname:"fcoin.com",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!1,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!1,withdraw:!1},timeframes:{"1m":"M1","3m":"M3","5m":"M5","15m":"M15","30m":"M30","1h":"H1","1d":"D1","1w":"W1","1M":"MN"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42244210-c8c42e1e-7f1c-11e8-8710-a5fb63b165c4.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}",market:"https://api.{hostname}",openapi:"https://www.{hostname}"},www:"https://www.fcoin.com",referral:"https://www.fcoin.com/i/Z5P7V",doc:"https://developer.fcoin.com",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371"},api:{openapi:{get:["symbols"]},market:{get:["ticker/{symbol}","depth/{level}/{symbol}","trades/{symbol}","candles/{timeframe}/{symbol}"]},public:{get:["symbols","currencies","server-time"]},private:{get:["accounts/balance","assets/accounts/balance","broker/otc/suborders","broker/otc/suborders/{id}","broker/otc/suborders/{id}/payments","broker/otc/users","broker/otc/users/me/balances","broker/otc/users/me/balance","broker/leveraged_accounts/account","broker/leveraged_accounts","orders","orders/{order_id}","orders/{order_id}/match-results"],post:["assets/accounts/assets-to-spot","accounts/spot-to-assets","broker/otc/assets/transfer/in","broker/otc/assets/transfer/out","broker/otc/suborders","broker/otc/suborders/{id}/pay_confirm","broker/otc/suborders/{id}/cancel","broker/leveraged/assets/transfer/in","broker/leveraged/assets/transfer/out","orders","orders/{order_id}/submit-cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:-2e-4,taker:3e-4}},limits:{amount:{min:.01,max:1e5}},options:{createMarketBuyOrderRequiresPrice:!0,fetchMarketsMethod:"fetch_markets_from_open_api",limits:{"BTM/USDT":{amount:{min:.1,max:1e7}},"ETC/USDT":{amount:{min:.001,max:4e5}},"ETH/USDT":{amount:{min:.001,max:1e4}},"LTC/USDT":{amount:{min:.001,max:4e4}},"BCH/USDT":{amount:{min:.001,max:5e3}},"BTC/USDT":{amount:{min:.001,max:1e3}},"ICX/ETH":{amount:{min:.01,max:3e6}},"OMG/ETH":{amount:{min:.01,max:5e5}},"FT/USDT":{amount:{min:1,max:1e7}},"ZIL/ETH":{amount:{min:1,max:1e7}},"ZIP/ETH":{amount:{min:1,max:1e7}},"FT/BTC":{amount:{min:1,max:1e7}},"FT/ETH":{amount:{min:1,max:1e7}}}},exceptions:{400:w,401:x,405:w,429:b,1002:v,1016:y,2136:x,3008:g,6004:k,6005:x,40003:f},commonCurrencies:{DAG:"DAGX",PAI:"PCHAIN",MT:"Mariana Token"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeString(this.options,"fetchMarketsMethod","fetch_markets_from_open_api"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromOpenAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.openapiGetSymbols(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"symbols",{}),s=Object.keys(a),o=[],c=0;c<s.length;c++)u=s[c],d=a[u],h=this.safeString(d,"symbol"),l=this.safeString(d,"base_currency"),f=this.safeString(d,"quote_currency"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,y={price:this.safeInteger(d,"price_decimal"),amount:this.safeInteger(d,"amount_decimal")},g={amount:{min:this.safeFloat(d,"limit_amount_min"),max:this.safeFloat(d,"limit_amount_max")},price:{min:Math.pow(10,-y.price),max:Math.pow(10,y.price)},cost:{min:void 0,max:void 0}},b=this.safeValue(d,"tradeable",!1),o.push({id:h,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:b,precision:y,limits:g,info:d});return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"data"),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"name"),u=this.safeString(o,"base_currency"),d=this.safeString(o,"quote_currency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={price:o.price_decimal,amount:o.amount_decimal},v={price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)}},m=this.safeValue(o,"tradable",!1),f in this.options.limits&&(v=this.extend(this.options.limits[f],v)),n.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:m,precision:p,limits:v,info:o});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsBalance(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data"),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"available"),d.total=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"frozen"),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidsAsks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],n=e.length,a=parseInt(n/2),s=0;s<a;s++){var o=2*s,c=this.sum(o,t),u=this.sum(o,r);i.push([this.safeFloat(e,c),this.safeFloat(e,u)])}return i}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=5,this.loadMarkets();case 5:if(void 0===r){e.next=13;break}if(20!==r&&150!==r){e.next=10;break}r="L"+r.toString(),e.next=11;break;case 10:throw new p(this.id+" fetchOrderBook supports limit of 20 or 150. Other values are not accepted");case 11:e.next=14;break;case 13:r="L20";case 14:return a={symbol:this.marketId(t),level:r},e.next=17,this.marketGetDepthLevelSymbol(this.extend(a,n));case 17:return s=e.sent,o=this.safeValue(s,"data"),e.abrupt("return",this.parseOrderBook(o,o.ts,"bids","asks",0,1));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.marketGetTickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.data,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0;if(void 0===t){var n=this.safeString(e,"type");if(void 0!==n){var a=n.split("."),s=a[1];i=this.safeSymbol(s,t)}}var o=e.ticker,c=this.safeFloat(o,0);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(o,7),low:this.safeFloat(o,8),bid:this.safeFloat(o,2),bidVolume:this.safeFloat(o,3),ask:this.safeFloat(o,4),askVolume:this.safeFloat(o,5),vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,9),quoteVolume:this.safeFloat(o,10),info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"ts"),n=this.safeStringLower(e,"side"),a=this.safeString(e,"id"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==s&&void 0!==o&&(c=o*s);var u=void 0;return{id:a,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,order:void 0,side:n,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:u}}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetServerTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:50,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id,limit:n},void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=10,this.marketGetTradesSymbol(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if(c={symbol:this.marketId(t),side:n,type:r},"market"!==r||"buy"!==n){e.next=17;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=14;break}if(void 0!==s){e.next=11;break}throw new g(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 11:c.amount=this.costToPrecision(t,a*s);case 12:e.next=15;break;case 14:c.amount=this.costToPrecision(t,a);case 15:e.next=18;break;case 17:c.amount=this.amountToPrecision(t,a);case 18:return"limit"!==r&&"ioc"!==r&&"fok"!==r||(c.price=this.priceToPrecision(t,s)),e.next=21,this.privatePostOrders(this.extend(c,o));case 21:return u=e.sent,e.abrupt("return",{info:u,id:u.data});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostOrdersOrderIdSubmitCancel(this.extend(n,r));case 7:return a=e.sent,s=this.parseOrder(a),e.abrupt("return",this.extend(s,{id:t,status:"canceled"}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open",canceled:"canceled",partial_filled:"open",partial_canceled:"canceled",filled:"closed",pending_cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"side"),n=this.parseOrderStatus(this.safeString(e,"state")),a=this.safeString(e,"symbol"),s=(t=this.safeMarket(a,t)).symbol,o=this.safeString(e,"type"),c=this.safeInteger(e,"created_at"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"filled_amount"),h=this.safeFloat(e,"price"),l=this.safeFloat(e,"executed_value"),f=void 0,p=void 0,v=this.safeFloat(e,"fees_income");return void 0!==v&&v>0?(void 0!==t&&(f="buy"===i?t.quote:t.base),p=-v):(p=this.safeFloat(e,"fill_fees"),void 0!==t&&(f="buy"===i?t.base:t.quote)),this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:s,type:o,timeInForce:void 0,postOnly:void 0,side:i,price:h,stopPrice:void 0,cost:l,amount:u,remaining:void 0,filled:d,average:void 0,status:n,fee:{cost:p,currency:f},trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:"submitted,partial_filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:"partial_canceled,filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id,states:"submitted,partial_filled,partial_canceled,filled,canceled"},void 0!==n&&(o.limit=n),e.next=13,this.privateGetOrders(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"base_vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=20),c={symbol:o.id,timeframe:this.timeframes[r],limit:a},void 0!==n&&(u=parseInt(n/1e3),d=a*this.parseTimeframe(r),c.before=this.sum(u,d)-1),e.next=12,this.marketGetCandlesTimeframeSymbol(this.extend(c,s));case 12:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOHLCVs(l,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/",o="openapi"===t,c="private"===t;s+=o?t+"/":"",s+=this.version+"/",s+=c||o?"":t+"/",s+=this.implodeParams(e,i);var u=this.omit(i,this.extractParams(e)),d=this.implodeParams(this.urls.api[t],{hostname:this.hostname});if(d+=s,c){this.checkRequiredCredentials();var h=this.nonce().toString();u=this.keysort(u),"GET"===r&&Object.keys(u).length&&(d+="?"+this.rawencode(u));var l=r+d+h;"POST"===r&&Object.keys(u).length&&(a=this.json(u),l+=this.urlencode(u));var f=this.stringToBase64(l),p=this.hmac(f,this.encode(this.secret),"sha1","binary");p=this.decode(this.stringToBase64(p)),n={"FC-ACCESS-KEY":this.apiKey,"FC-ACCESS-SIGNATURE":p,"FC-ACCESS-TIMESTAMP":h,"Content-Type":"application/json"}}else Object.keys(u).length&&(d+="?"+this.urlencode(u));return{url:d,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"status");if("0"!==u&&"ok"!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.OnMaintenance,y=f.ArgumentsRequired,g=f.BadRequest,b=f.AccountSuspended,k=f.InvalidAddress,x=f.PermissionDenied,w=f.DDoSProtection,_=f.InsufficientFunds,O=f.InvalidNonce,T=f.CancelPending,S=f.InvalidOrder,C=f.OrderNotFound,I=f.AuthenticationError,M=f.RequestTimeout,E=f.NotSupported,A=f.BadSymbol,F=f.RateLimitExceeded,P=r(13),B=P.TICK_SIZE,R=P.TRUNCATE;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"okex",name:"OKEX",countries:["CN","US"],version:"v3",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTime:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,futures:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2678400","3M":"8035200","6M":"16070400","1y":"31536000"},hostname:"okex.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/32552768-0d6dd3c6-c4a6-11e7-90f8-c043b64756a7.jpg",api:{rest:"https://www.{hostname}"},www:"https://www.okex.com",doc:"https://www.okex.com/docs/en/",fees:"https://www.okex.com/pages/products/fees.html",referral:"https://www.okex.com/join/1888677",test:{rest:"https://testnet.okex.com"}},api:{general:{get:["time"]},account:{get:["wallet","sub-account","asset-valuation","wallet/{currency}","withdrawal/history","withdrawal/history/{currency}","ledger","deposit/address","deposit/history","deposit/history/{currency}","currencies","withdrawal/fee"],post:["transfer","withdrawal"]},spot:{get:["accounts","accounts/{currency}","accounts/{currency}/ledger","orders","amend_order/{instrument_id}","orders_pending","orders/{order_id}","orders/{client_oid}","trade_fee","fills","algo","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles"],post:["order_algo","orders","batch_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_algos","cancel_batch_orders"]},margin:{get:["accounts","accounts/{instrument_id}","accounts/{instrument_id}/ledger","accounts/availability","accounts/{instrument_id}/availability","accounts/borrowed","accounts/{instrument_id}/borrowed","orders","accounts/{instrument_id}/leverage","orders/{order_id}","orders/{client_oid}","orders_pending","fills","instruments/{instrument_id}/mark_price"],post:["accounts/borrow","accounts/repayment","orders","batch_orders","cancel_orders","cancel_orders/{order_id}","cancel_orders/{client_oid}","cancel_batch_orders","accounts/{instrument_id}/leverage"]},futures:{get:["position","{instrument_id}/position","accounts","accounts/{underlying}","accounts/{underlying}/leverage","accounts/{underlying}/ledger","order_algo/{instrument_id}","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","trade_fee","accounts/{instrument_id}/holds","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/book","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/estimated_price","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/liquidation"],post:["accounts/{underlying}/leverage","order","amend_order/{instrument_id}","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","accounts/margin_mode","close_position","cancel_all","order_algo","cancel_algos"]},swap:{get:["position","{instrument_id}/position","accounts","{instrument_id}/accounts","accounts/{instrument_id}/settings","accounts/{instrument_id}/ledger","orders/{instrument_id}","orders/{instrument_id}/{order_id}","orders/{instrument_id}/{client_oid}","fills","accounts/{instrument_id}/holds","trade_fee","order_algo/{instrument_id}","instruments","instruments/{instrument_id}/depth","instruments/ticker","instruments/{instrument_id}/ticker","instruments/{instrument_id}/trades","instruments/{instrument_id}/candles","instruments/{instrument_id}/history/candles","instruments/{instrument_id}/index","rate","instruments/{instrument_id}/open_interest","instruments/{instrument_id}/price_limit","instruments/{instrument_id}/liquidation","instruments/{instrument_id}/funding_time","instruments/{instrument_id}/mark_price","instruments/{instrument_id}/historical_funding_rate"],post:["accounts/{instrument_id}/leverage","order","amend_order/{instrument_id}","orders","cancel_order/{instrument_id}/{order_id}","cancel_order/{instrument_id}/{client_oid}","cancel_batch_orders/{instrument_id}","order_algo","cancel_algos","close_position","cancel_all","order_algo","cancel_algos"]},option:{get:["accounts","position","{underlying}/position","accounts/{underlying}","orders/{underlying}","fills/{underlying}","accounts/{underlying}/ledger","trade_fee","orders/{underlying}/{order_id}","orders/{underlying}/{client_oid}","underlying","instruments/{underlying}","instruments/{underlying}/summary","instruments/{underlying}/summary/{instrument_id}","instruments/{instrument_id}/book","instruments/{instrument_id}/trades","instruments/{instrument_id}/ticker","instruments/{instrument_id}/candles"],post:["order","orders","cancel_order/{underlying}/{order_id}","cancel_order/{underlying}/{client_oid}","cancel_batch_orders/{underlying}","amend_order/{underlying}","amend_batch_orders/{underlying}"]},index:{get:["{instrument_id}/constituents"]}},fees:{trading:{taker:.0015,maker:.001},spot:{taker:.0015,maker:.001},futures:{taker:5e-4,maker:2e-4},swap:{taker:75e-5,maker:2e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:p,"failure to get a peer from the ring-balancer":v,"Server is busy, please try again.":v,"An unexpected error occurred":p,"System error":p,4010:x,4001:p,4002:p,30001:I,30002:I,30003:I,30004:I,30005:O,30006:I,30007:g,30008:M,30009:p,30010:I,30011:x,30012:I,30013:I,30014:w,30015:I,30016:p,30017:p,30018:p,30019:v,30020:g,30021:g,30022:x,30023:g,30024:A,30025:g,30026:w,30027:I,30028:x,30029:b,30030:v,30031:g,30032:A,30033:g,30034:p,30035:p,30036:p,30037:v,30038:m,30044:M,32001:b,32002:x,32003:T,32004:p,32005:S,32006:S,32007:S,32008:S,32009:S,32010:p,32011:p,32012:p,32013:p,32014:p,32015:p,32016:p,32017:p,32018:p,32019:p,32020:p,32021:p,32022:p,32023:p,32024:p,32025:p,32026:p,32027:p,32028:p,32029:p,32030:S,32031:y,32038:I,32040:p,32044:p,32045:p,32046:p,32047:p,32048:S,32049:p,32050:S,32051:S,32052:p,32053:p,32057:p,32054:p,32055:S,32056:p,32058:p,32059:S,32060:S,32061:S,32062:S,32063:S,32064:p,32065:p,32066:p,32067:p,32068:p,32069:p,32070:p,32071:p,32072:p,32073:p,32074:p,32075:p,32076:p,32077:p,32078:p,32079:p,32080:p,32083:p,33001:x,33002:b,33003:_,33004:p,33005:p,33006:p,33007:p,33008:_,33009:p,33010:p,33011:p,33012:p,33013:S,33014:C,33015:S,33016:p,33017:_,33018:p,33020:p,33021:g,33022:S,33023:p,33024:S,33025:S,33026:p,33027:S,33028:S,33029:S,33034:p,33035:p,33036:p,33037:p,33038:p,33039:p,33040:p,33041:p,33042:p,33043:p,33044:p,33045:p,33046:p,33047:p,33048:p,33049:p,33050:p,33051:p,33059:g,33060:g,33061:p,33062:p,33063:p,33064:p,33065:p,33085:S,21009:p,34001:x,34002:k,34003:p,34004:p,34005:p,34006:p,34007:p,34008:_,34009:p,34010:p,34011:p,34012:p,34013:p,34014:p,34015:p,34016:x,34017:b,34018:I,34019:x,34020:x,34021:k,34022:p,34023:x,34026:F,34036:p,34037:p,34038:p,34039:p,35001:p,35002:p,35003:p,35004:p,35005:I,35008:S,35010:S,35012:S,35014:S,35015:S,35017:p,35019:S,35020:S,35021:S,35022:g,35024:g,35025:_,35026:g,35029:C,35030:S,35031:S,35032:p,35037:p,35039:_,35040:S,35044:p,35046:_,35047:_,35048:p,35049:S,35050:S,35052:_,35053:p,35055:_,35057:p,35058:p,35059:g,35060:g,35061:g,35062:S,35063:S,35064:S,35066:S,35067:S,35068:S,35069:S,35070:S,35071:S,35072:S,35073:S,35074:S,35075:S,35076:S,35077:S,35078:S,35079:S,35080:S,35081:S,35082:S,35083:S,35084:S,35085:S,35086:S,35087:S,35088:S,35089:S,35090:p,35091:p,35092:p,35093:p,35094:p,35095:g,35096:p,35097:p,35098:p,35099:p,35102:F,36001:g,36002:g,36005:p,36101:I,36102:x,36103:x,36104:x,36105:x,36106:x,36107:x,36108:_,36109:x,36201:x,36202:x,36203:S,36204:p,36205:g,36206:g,36207:S,36208:S,36209:S,36210:S,36211:S,36212:S,36213:S,36214:p,36216:C,36217:S,36218:S,36219:S,36220:S,36221:S,36222:S,36223:S,36224:S,36225:S,36226:S,36227:S,36228:S,36229:S,36230:S},broad:{}},precisionMode:B,options:{fetchOHLCV:{type:"Candles"},createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","futures","swap","option"],defaultType:"spot",auth:{time:"public",currencies:"private",instruments:"public",rate:"public","{instrument_id}/constituents":"public"}},commonCurrencies:{AE:"AET",BOX:"DefiBox",HOT:"Hydro Protocol",HSR:"HC",MAG:"Maggie",SBTC:"Super Bitcoin",YOYO:"YOYOW",WIN:"WinToken"}})}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.generalGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.parse8601(this.safeString(r,"iso")));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},r=this.safeValue(this.options,"fetchMarkets"),i=[],a=0;case 4:if(!(a<r.length)){e.next=12;break}return e.next=7,this.fetchMarketsByType(r[a],t);case 7:s=e.sent,i=this.arrayConcat(i,s);case 9:a++,e.next=4;break;case 12:return e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarkets",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.parseMarket(e[r]));return t}},{key:"parseMarket",value:function(e){var t=this.safeString(e,"instrument_id"),r="spot",i=!0,n=!1,a=!1,s=!1,o=this.safeString(e,"base_currency"),c=this.safeString(e,"quote_currency");if(void 0!==this.safeFloat(e,"contract_val"))if("option_type"in e){r="option",i=!1,s=!0;var u=this.safeString(e,"underlying").split("-");o=this.safeString(u,0),c=this.safeString(u,1)}else{r="swap",i=!1,a=!0,void 0!==this.safeString(e,"alias")&&(a=!1,n=!0,r="futures",o=this.safeString(e,"underlying_index"))}var d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(c),l=i?d+"/"+h:t,f=this.safeFloat2(e,"lot_size","trade_increment"),p={amount:this.safeFloat(e,"size_increment",f),price:this.safeFloat(e,"tick_size")},v=this.safeFloat2(e,"min_size","base_min_size"),m=this.safeValue2(this.fees,r,"trading",{});return this.extend(m,{id:t,symbol:l,base:d,quote:h,baseId:o,quoteId:c,info:e,type:r,spot:i,futures:n,swap:a,option:s,active:!0,precision:p,limits:{amount:{min:v,max:void 0},price:{min:p.price,max:void 0},cost:{min:p.price,max:void 0}}})}},{key:"fetchMarketsByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},"option"!==t){e.next=18;break}return e.next=4,this.optionGetUnderlying(r);case 4:i=e.sent,a=[],s=0;case 7:if(!(s<i.length)){e.next=15;break}return e.next=10,this.optionGetInstrumentsUnderlying({underlying:i[s]});case 10:o=e.sent,a=this.arrayConcat(a,o);case 12:s++,e.next=7;break;case 15:return e.abrupt("return",this.parseMarkets(a));case 18:if("spot"!==t&&"futures"!==t&&"swap"!==t){e.next=26;break}return c=t+"GetInstruments",e.next=22,this[c](r);case 22:return u=e.sent,e.abrupt("return",this.parseMarkets(u));case 26:throw new E(this.id+" fetchMarketsByType does not support market type "+t);case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.accountGetCurrencies(t);case 3:for(r=e.sent,i={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),c=this.safeCurrencyCode(o),u=1e-8,d=this.safeString(s,"name"),h=this.safeInteger(s,"can_deposit"),l=this.safeInteger(s,"can_withdraw"),f=!(!h||!l),i[c]={id:o,code:c,info:s,type:void 0,name:d,active:f,fee:void 0,precision:u,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"min_withdrawal"),max:void 0}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s=a.type+"GetInstrumentsInstrumentId",s+="swap"===a.type?"Depth":"Book",o={instrument_id:a.id},void 0!==r&&(o.size=r),e.next=11,this[s](this.extend(o,i));case 11:return c=e.sent,u=this.parse8601(this.safeString(c,"timestamp")),e.abrupt("return",this.parseOrderBook(c,u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),n=void 0,a=this.safeString(e,"instrument_id");if(a in this.markets_by_id)n=(t=this.markets_by_id[a]).symbol;else if(void 0!==a){var s=a.split("-"),o=s.length;if(2===o){var c=i(s,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);n=h+"/"+l}else n=a}void 0===n&&void 0!==t&&(n=t.symbol);var f=this.safeFloat(e,"last"),p=this.safeFloat(e,"open_24h");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_24h"),low:this.safeFloat(e,"low_24h"),bid:this.safeFloat(e,"best_bid"),bidVolume:this.safeFloat(e,"best_bid_size"),ask:this.safeFloat(e,"best_ask"),askVolume:this.safeFloat(e,"best_ask_size"),vwap:void 0,open:p,close:f,last:f,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"base_volume_24h"),quoteVolume:this.safeFloat(e,"quote_volume_24h"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a=i.type+"GetInstrumentsInstrumentIdTicker",s={instrument_id:i.id},e.next=8,this[a](this.extend(s,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickersByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return a=t+"GetInstrumentsTicker",e.next=7,this[a](i);case 7:for(s=e.sent,o={},c=0;c<s.length;c++)u=this.parseTicker(s[c]),d=u.symbol,o[d]=u;return e.abrupt("return",this.filterByArray(o,"symbol",r));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},i=this.safeString2(this.options,"fetchTickers","defaultType"),a=this.safeString(r,"type",i),e.next=6,this.fetchTickersByType(a,t,this.omit(r,"type"));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"instrument_id"),a=void 0,s=void 0;if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol,a=t.base,s=t.quote;else if(void 0!==n){var o=n.split("-"),c=o.length;if(2===c){var u=i(o,2),d=u[0],h=u[1];r=(a=this.safeCurrencyCode(d))+"/"+(s=this.safeCurrencyCode(h))}else r=n}void 0===r&&void 0!==t&&(r=t.symbol,a=t.base,s=t.quote);var l=this.parse8601(this.safeString2(e,"timestamp","created_at")),f=this.safeFloat(e,"price"),p=this.safeFloat2(e,"size","qty");p=this.safeFloat(e,"order_qty",p);var v=this.safeString2(e,"exec_type","liquidity");"M"===v?v="maker":"T"===v&&(v="taker");var m=this.safeString(e,"side"),y=void 0;void 0!==p&&void 0!==f&&(y=p*f);var g=this.safeFloat(e,"fee"),b=void 0;if(void 0!==g){var k="buy"===m?a:s;b={cost:-g,currency:k}}var x=this.safeString(e,"order_id");return{info:e,timestamp:l,datetime:this.iso8601(l),symbol:r,id:this.safeString2(e,"trade_id","ledger_id"),order:x,type:void 0,takerOrMaker:v,side:m,price:f,amount:p,cost:y,fee:b}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=s.type+"GetInstrumentsInstrumentIdTrades",(void 0===i||i>100)&&(i=100),c={instrument_id:s.id,limit:i},e.next=11,this[o](this.extend(c,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){if(Array.isArray(e)){var t=e.length,r=t>6?6:5,i=this.safeValue(e,0);return"string"===typeof i&&(i=this.parse8601(i)),[i,this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,r)]}return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:"1m",i=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:void 0,s=y.length>4&&void 0!==y[4]?y[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c=this.parseTimeframe(r),u={instrument_id:o.id,granularity:this.timeframes[r]},d=this.safeValue(this.options,"fetchOHLCV",{}),h=this.safeString(d,"type","Candles"),l=this.safeString(s,"type",h),s=this.omit(s,"type"),f=o.type+"GetInstrumentsInstrumentId"+l,"Candles"!==l){e.next=18;break}void 0!==i?(void 0!==a&&(u.end=this.iso8601(this.sum(i,a*c*1e3))),u.start=this.iso8601(i)):void 0!==a&&(p=this.milliseconds(),u.start=this.iso8601(p-a*c*1e3),u.end=this.iso8601(p)),e.next=22;break;case 18:if("HistoryCandles"!==l){e.next=22;break}if(!o.option){e.next=21;break}throw new E(this.id+" fetchOHLCV does not have "+l+" for "+o.type+" markets");case 21:void 0!==i?(void 0===a&&(a=300),u.start=this.iso8601(this.sum(i,a*c*1e3)),u.end=this.iso8601(i)):void 0!==a&&(v=this.milliseconds(),u.end=this.iso8601(v-a*c*1e3),u.start=this.iso8601(v));case 22:return e.next=24,this[f](this.extend(u,s));case 24:return m=e.sent,e.abrupt("return",this.parseOHLCVs(m,o,r,i,a));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseAccountBalance",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var i=e[r],n=this.safeString(i,"currency"),a=this.safeCurrencyCode(n),s=this.account();s.total=this.safeFloat(i,"balance"),s.used=this.safeFloat(i,"hold"),s.free=this.safeFloat(i,"available"),t[a]=s}return this.parseBalance(t)}},{key:"parseMarginBalance",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var n=e[r],a=this.safeString(n,"instrument_id"),s=this.safeValue(this.markets_by_id,a),o=void 0;if(void 0===s){var c=a.split("-"),u=i(c,2),d=u[0],h=u[1];o=this.safeCurrencyCode(d)+"/"+this.safeCurrencyCode(h)}else o=s.symbol;for(var l=this.omit(n,["instrument_id","liquidation_price","product_id","risk_rate","margin_ratio","maint_margin_ratio","tiers"]),f=Object.keys(l),p={},v=0;v<f.length;v++){var m=f[v],y=n[m];if(!(m.indexOf(":")>=0))throw new E(this.id+" margin balance response format has changed!");var g=m.split(":")[1],b=this.safeCurrencyCode(g),k=this.account();k.total=this.safeFloat(y,"balance"),k.used=this.safeFloat(y,"hold"),k.free=this.safeFloat(y,"available"),p[b]=k}t[o]=this.parseBalance(p)}return t}},{key:"parseFuturesBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"info",{}),i=Object.keys(r),n=0;n<i.length;n++){var a=i[n],s=this.safeCurrencyCode(a),o=this.safeValue(r,a,{}),c=this.account(),u=this.safeFloat(o,"total_avail_balance");if("fixed"===this.safeString(o,"margin_mode")){for(var d=this.safeValue(o,"contracts",[]),h=u,l=0;l<d.length;l++){var f=d[l],p=this.safeFloat(f,"fixed_balance"),v=this.safeFloat(f,"realized_pnl"),m=this.safeFloat(f,"margin_frozen"),y=this.safeFloat(f,"margin_for_unfilled"),g=this.sum(p,v)-m-y;h=this.sum(h,g)}c.free=h}else{var b=this.safeFloat(o,"realized_pnl"),k=this.safeFloat(o,"unrealized_pnl"),x=this.safeFloat(o,"margin_frozen"),w=this.safeFloat(o,"margin_for_unfilled");c.free=this.sum(u,b,k)-x-w}c.total=this.safeFloat(o,"equity"),t[s]=c}return this.parseBalance(t)}},{key:"parseSwapBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"info",[]),i=0;i<r.length;i++){var n=r[i],a=this.safeString(n,"instrument_id"),s=a;a in this.markets_by_id&&(s=this.markets_by_id[a].symbol);var o=this.account();o.total=this.safeFloat(n,"equity"),o.free=this.safeFloat(n,"total_avail_balance"),t[s]=o}return this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeString2(this.options,"fetchBalance","defaultType"),void 0!==(i=this.safeString(t,"type",r))){e.next=5;break}throw new y(this.id+" fetchBalance() requires a type parameter (one of 'account', 'spot', 'margin', 'futures', 'swap')");case 5:return e.next=7,this.loadMarkets();case 7:return a=i+"Get"+("account"===i?"Wallet":"Accounts"),s=this.omit(t,"type"),e.next=12,this[a](s);case 12:return o=e.sent,e.abrupt("return",this.parseBalanceByType(i,o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceByType",value:function(e,t){if("account"===e||"spot"===e)return this.parseAccountBalance(t);if("margin"===e)return this.parseMarginBalance(t);if("futures"===e)return this.parseFuturesBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new E(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={instrument_id:c.id},void 0!==(d=this.safeString2(o,"client_oid","clientOrderId"))&&(u.client_oid=d,o=this.omit(o,["client_oid","clientOrderId"])),h=void 0,!c.futures&&!c.swap){e.next=19;break}l=c.futures?this.numberToString(a):this.amountToPrecision(t,a),u=this.extend(u,{type:r,size:l}),f=this.safeString(o,"order_type"),"market"===r||"4"===f?u.order_type="4":u.price=this.priceToPrecision(t,s),c.futures&&(u.leverage="10"),h=c.type+"PostOrder",e.next=46;break;case 19:if(p=this.safeString(o,"margin_trading","1"),u=this.extend(u,{side:i,type:r,margin_trading:p}),"limit"!==r){e.next=26;break}u.price=this.priceToPrecision(t,s),u.size=this.amountToPrecision(t,a),e.next=45;break;case 26:if("market"!==r){e.next=45;break}if("buy"!==i){e.next=44;break}if(v=this.safeFloat(o,"notional"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=39;break}if(void 0===s){e.next=35;break}void 0===v&&(v=a*s),e.next=37;break;case 35:if(void 0!==v){e.next=37;break}throw new S(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)");case 37:e.next=40;break;case 39:v=void 0===v?a:v;case 40:m=c.precision.price,u.notional=this.decimalToPrecision(v,R,m,this.precisionMode),e.next=45;break;case 44:u.size=this.amountToPrecision(t,a);case 45:h="2"===p?"marginPostOrders":"spotPostOrders";case 46:return e.next=48,this[h](this.extend(u,o));case 48:return y=e.sent,g=this.parseOrder(y,c),e.abrupt("return",this.extend(g,{type:r,side:i}));case 51:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),s=void 0,a.futures||a.swap?s=a.type:(o=this.safeString2(this.options,"cancelOrder","defaultType",a.type),s=this.safeString(i,"type",o)),void 0!==s){e.next=11;break}throw new y(this.id+" cancelOrder() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 11:return c=s+"PostCancelOrder",u={instrument_id:a.id},a.futures||a.swap?c+="InstrumentId":c+="s",void 0!==(d=this.safeString2(i,"client_oid","clientOrderId"))?(c+="ClientOid",u.client_oid=d):(c+="OrderId",u.order_id=t),h=this.omit(i,["type","client_oid","clientOrderId"]),e.next=19,this[c](this.extend(u,h));case 19:return l=e.sent,f="result"in l?l:this.safeValue(l,a.id,{}),e.abrupt("return",this.parseOrder(f,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrderSide",value:function(e){return this.safeString({1:"buy",2:"sell",3:"sell",4:"buy"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"side"),a=this.safeString(e,"type");"buy"!==n&&"sell"!==n&&(n=this.parseOrderSide(a));var s=void 0,o=this.safeString(e,"instrument_id");s=o in this.markets_by_id?(t=this.markets_by_id[o]).symbol:o,void 0!==t&&void 0===s&&(s=t.symbol);var c=this.safeFloat(e,"size"),u=this.safeFloat2(e,"filled_size","filled_qty"),d=void 0;void 0!==c&&void 0!==u&&(c=Math.max(c,u),d=Math.max(0,c-u)),"market"===a&&(d=0);var h=this.safeFloat2(e,"filled_notional","funds"),l=this.safeFloat(e,"price"),f=this.safeFloat(e,"price_avg");void 0===h?void 0!==u&&void 0!==f&&(h=f*u):void 0===f&&void 0!==u&&u>0&&(f=h/u);var p=this.parseOrderStatus(this.safeString(e,"state")),v=this.safeFloat(e,"fee"),m=void 0;if(void 0!==v){var y=void 0;m={cost:v,currency:y}}var g=this.safeString(e,"client_oid");void 0!==g&&g.length<1&&(g=void 0);var b=this.safeFloat(e,"trigger_price");return{info:e,id:r,clientOrderId:g,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:s,type:a,timeInForce:void 0,postOnly:void 0,side:n,price:l,stopPrice:b,average:f,cost:h,amount:c,filled:u,remaining:d,status:p,fee:m,trades:void 0}}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:void 0,i=p.length>2&&void 0!==p[2]?p[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),s=this.safeString2(this.options,"fetchOrder","defaultType",a.type),void 0!==(o=this.safeString(i,"type",s))){e.next=11;break}throw new y(this.id+" fetchOrder() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 11:return c=a.futures||a.swap?"InstrumentId":"",u=o+"GetOrders"+c,d={instrument_id:a.id},void 0!==(h=this.safeString(i,"client_oid"))?(u+="ClientOid",d.client_oid=h):(u+="OrderId",d.order_id=t),l=this.omit(i,"type"),e.next=19,this[u](this.extend(d,l));case 19:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByState",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:void 0,s=m.length>4&&void 0!==m[4]?m[4]:{},void 0!==r){e.next=6;break}throw new y(this.id+" fetchOrdersByState() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:if(o=this.market(r),c=void 0,o.futures||o.swap?c=o.type:(u=this.safeString2(this.options,"fetchOrder","defaultType",o.type),c=this.safeString(s,"type",u)),void 0!==c){e.next=13;break}throw new y(this.id+" fetchOrdersByState() requires a type parameter (one of 'spot', 'margin', 'futures', 'swap').");case 13:return d={instrument_id:o.id,state:t},h=c+"GetOrders",(o.futures||o.swap)&&(h+="InstrumentId"),l=this.omit(s,"type"),e.next=19,this[h](this.extend(d,l));case 19:if(f=e.sent,p=void 0,!o.swap&&!o.futures){e.next=25;break}p=this.safeValue(f,"order_info",[]),e.next=30;break;case 25:if(p=f,!((v=f.length)<1)){e.next=29;break}return e.abrupt("return",[]);case 29:v>1&&void 0!==this.safeValue(f[1],"before")&&(p=f[0]);case 30:return e.abrupt("return",this.parseOrders(p,o,i,a));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("6",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("7",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddresses",value:function(e){for(var t={},r=0;r<e.length;r++){var i=this.parseDepositAddress(e[r]);t[i.currency]=i}return t}},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString2(e,"tag","payment_id");r=this.safeString(e,"memo",r);var i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=t.split("-"),a=this.currency(i[0]),s={currency:a.id},e.next=8,this.accountGetDepositAddress(this.extend(s,r));case 8:if(o=e.sent,c=this.parseDepositAddresses(o),void 0!==(u=this.safeValue(c,t))){e.next=13;break}throw new k(this.id+" fetchDepositAddress cannot return nonexistent addresses, you should create withdrawal addresses with the exchange website first");case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),a&&(i=i+":"+a),void 0!==(c=this.safeString(s,"fee"))){e.next=10;break}throw new y(this.id+" withdraw() requires a `fee` string parameter, network transaction fee must be \u2265 0. Withdrawals to OKCoin or OKEx are fee-free, please set '0'. Withdrawing to external digital asset address requires network transaction fee.");case 10:if(u={currency:o.id,to_address:i,destination:"4",amount:this.numberToString(r),fee:c},"password"in s?u.trade_pwd=s.password:"trade_pwd"in s?u.trade_pwd=s.trade_pwd:this.password&&(u.trade_pwd=this.password),d=this.omit(s,["fee","password","trade_pwd"]),"trade_pwd"in u){e.next=15;break}throw new p(this.id+" withdraw() requires this.password set on the exchange instance or a password / trade_pwd parameter");case 15:return e.next=17,this.accountPostWithdrawal(this.extend(u,d));case 17:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h,"withdrawal_id")});case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="accountGetDepositHistory",c=void 0,void 0!==t&&(c=this.currency(t),s.currency=c.id,o+="Currency"),e.next=12,this[o](this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,c,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="accountGetWithdrawalHistory",c=void 0,void 0!==t&&(c=this.currency(t),s.currency=c.id,o+="Currency"),e.next=12,this[o](this.extend(s,a));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u,c,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({"-3":"pending","-2":"canceled","-1":"failed",0:"pending",1:"pending",2:"ok",3:"pending",4:"pending",5:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=void 0,r=void 0,i=void 0,n=this.safeString(e,"withdrawal_id"),a=this.safeString(e,"from"),s=this.safeString(e,"to"),o=this.safeString(e,"tag");void 0!==n?(t="withdrawal",r=n,i=s):(r=this.safeString2(e,"payment_id","deposit_id"),t="deposit",i=s);var c=this.safeString(e,"currency"),u=this.safeCurrencyCode(c),d=this.safeFloat(e,"amount"),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeString(e,"txid"),f=this.parse8601(this.safeString(e,"timestamp")),p=void 0;if("deposit"===t)p=0;else if(void 0!==c){var v=this.safeString(e,"fee");if(void 0!==v){var m=c.toLowerCase(),y=v.replace(m,"");p=parseFloat(y)}}return{info:e,id:r,currency:u,amount:d,addressFrom:a,addressTo:s,address:i,tagFrom:void 0,tagTo:o,tag:o,status:h,type:t,updated:void 0,txid:l,timestamp:f,datetime:this.iso8601(f),fee:{currency:u,cost:p}}}},{key:"parseMyTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,1),i=this.safeValue(e,0),n=this.safeString(i,"instrument_id"),a=this.safeString(r,"instrument_id");if(n!==a)throw new E(this.id+" parseMyTrade() received unrecognized response format, differing instrument_ids in one fill, the exchange API might have changed, paste your verbose output: https://github.com/ccxt/ccxt/wiki/FAQ#what-is-required-to-get-help");var s=n,o=(t=this.safeMarket(s,t)).symbol,c=t.quoteId,u=void 0,d=void 0,h=void 0,l=this.safeString(r,"currency"),f=void 0;l===c?(u=this.safeString(i,"side"),d=this.safeFloat(i,"size"),h=this.safeFloat(r,"size"),f=this.safeString(i,"currency")):(u=this.safeString(r,"side"),d=this.safeFloat(r,"size"),h=this.safeFloat(i,"size"),f=this.safeString(r,"currency"));var p=this.safeString(r,"trade_id"),v=this.safeFloat(r,"price"),m=this.safeFloat(i,"fee"),y=this.safeFloat(r,"fee"),g=this.safeCurrencyCode(this.safeString(i,"currency")),b=this.safeCurrencyCode(this.safeString(r,"currency")),k=void 0,x=void 0;void 0!==m&&0!==m?void 0!==y&&0!==y?x=[{cost:-m,currency:g},{cost:-y,currency:b}]:k={cost:-m,currency:g}:k=void 0!==y&&0!==y?{cost:-y,currency:b}:{cost:0,currency:this.safeCurrencyCode(f)};var w=this.parse8601(this.safeString2(r,"timestamp","created_at")),_=this.safeString2(r,"exec_type","liquidity");"M"===_?_="maker":"T"===_&&(_="taker");var O=this.safeString(r,"order_id"),T={info:e,timestamp:w,datetime:this.iso8601(w),symbol:o,id:p,order:O,type:void 0,takerOrMaker:_,side:u,price:v,amount:d,cost:h,fee:k};return void 0!==x&&(T.fees=x),T}},{key:"parseMyTrades",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=this.groupBy(e,"trade_id"),a=Object.keys(n),s=[],o=0;o<a.length;o++){var c=a[o],u=n[c],d=u.length;if(2===d){var h=this.parseMyTrade(u);s.push(h)}}var l=void 0;return void 0!==t&&(l=t.symbol),this.filterBySymbolSinceLimit(s,l,r,i)}},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),void 0!==i&&i>100&&(i=100),o={instrument_id:s.id},c=this.safeString2(this.options,"fetchMyTrades","defaultType"),u=this.safeString(a,"type",c),d=this.omit(a,"type"),h=u+"GetFills",e.next=17,this[h](this.extend(o,d));case 17:return l=e.sent,e.abrupt("return",this.parseMyTrades(l,s,r,i,a));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:void 0,s=c.length>4&&void 0!==c[4]?c[4]:{},o={order_id:t},e.next=7,this.fetchMyTrades(r,i,a,this.extend(o,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPosition",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:if(i=this.market(t),a=void 0,s={instrument_id:i.id},"futures"!==(o=i.type)&&"swap"!==o){e.next=11;break}a=o+"GetInstrumentIdPosition",e.next=19;break;case 11:if("option"!==o){e.next=18;break}if(void 0!==this.safeString(r,"underlying")){e.next=15;break}throw new y(this.id+" fetchPosition() requires an underlying parameter for "+o+" market "+t);case 15:a=o+"GetUnderlyingPosition",e.next=19;break;case 18:throw new E(this.id+" fetchPosition() does not support "+o+" market "+t+", supported market types are futures, swap or option");case 19:return e.next=21,this[a](this.extend(s,r));case 21:return c=e.sent,e.abrupt("return",c);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:if(r=void 0,i=this.safeString2(this.options,"fetchPositions","defaultType"),"futures"!==(a=this.safeString(t,"type",i))&&"swap"!==a){e.next=11;break}r=a+"GetPosition",e.next=19;break;case 11:if("option"!==a){e.next=18;break}if(void 0!==this.safeString(t,"underlying")){e.next=15;break}throw new y(this.id+" fetchPositions() requires an underlying parameter for "+a+" markets");case 15:r=a+"GetUnderlyingPosition",e.next=19;break;case 18:throw new E(this.id+" fetchPositions() does not support "+a+" markets, supported market types are futures, swap or option");case 19:return t=this.omit(t,"type"),e.next=22,this[r](t);case 22:return s=e.sent,e.abrupt("return",s);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,g,b,k,x,w,_,O,T=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:void 0,r=T.length>1&&void 0!==T[1]?T[1]:void 0,i=T.length>2&&void 0!==T[2]?T[2]:void 0,a=T.length>3&&void 0!==T[3]?T[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.safeString2(this.options,"fetchLedger","defaultType"),o=this.safeString(a,"type",s),c=this.omit(a,"type"),u="account"===o?"":"Accounts",d="",h={},void 0!==i&&(h.limit=i),l=void 0,"spot"!==o){e.next=22;break}if(void 0!==t){e.next=17;break}throw new y(this.id+" fetchLedger() requires a currency code argument for '"+o+"' markets");case 17:d="Currency",l=this.currency(t),h.currency=l.id,e.next=49;break;case 22:if("futures"!==o){e.next=35;break}if(void 0!==t){e.next=25;break}throw new y(this.id+" fetchLedger() requires an underlying symbol for '"+o+"' markets");case 25:d="Underlying",f=this.market(t),p=this.safeValue(f,"info",{}),v=this.safeString(p,"settlement_currency"),m=this.safeCurrencyCode(v),l=this.currency(m),g=this.safeString(p,"underlying"),h.underlying=g,e.next=49;break;case 35:if("margin"!==o&&"swap"!==o){e.next=44;break}if(void 0!==t){e.next=38;break}throw new y(this.id+" fetchLedger() requires a code argument (a market symbol) for '"+o+"' markets");case 38:d="InstrumentId",b=this.market(t),l=this.currency(b.base),h.instrument_id=b.id,e.next=49;break;case 44:if("account"!==o){e.next=48;break}void 0!==t&&(l=this.currency(t),h.currency=l.id),e.next=49;break;case 48:throw new E(this.id+" fetchLedger does not support the '"+o+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')");case 49:return k=o+"Get"+u+d+"Ledger",e.next=52,this[k](this.extend(h,c));case 52:if(x=e.sent,!(x.length<1)){e.next=56;break}return e.abrupt("return",[]);case 56:if(w=Array.isArray(x[0]),_="margin"===o&&w?x[0]:x,"swap"!==o){e.next=62;break}return O=this.parseLedger(_),e.abrupt("return",this.filterBySymbolSinceLimit(O,t,r,i));case 62:return e.abrupt("return",this.parseLedger(_,l,r,i));case 63:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({transfer:"transfer",trade:"trade",rebate:"rebate",match:"trade",fee:"fee",settlement:"trade",liquidation:"trade",funding:"fee",margin:"margin"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"ledger_id"),i=void 0,n=this.safeValue(e,"details",{}),a=this.safeString(n,"order_id"),s=void 0,o=this.parseLedgerEntryType(this.safeString(e,"type")),c=this.safeCurrencyCode(this.safeString(e,"currency"),t),u=this.safeFloat(e,"amount"),d=this.parse8601(this.safeString(e,"timestamp")),h={cost:this.safeFloat(e,"fee"),currency:c},l=void 0,f=this.safeFloat(e,"balance"),p="ok",v=this.safeString(e,"instrument_id"),m=void 0;if(v in this.markets_by_id){var y=this.markets_by_id[v];m=y.symbol}return{info:e,id:r,account:i,referenceId:a,referenceAccount:s,type:o,currency:c,symbol:m,amount:u,before:l,after:f,status:p,timestamp:d,datetime:this.iso8601(d),fee:h}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=Array.isArray(i),o="/api/"+t+"/"+this.version+"/";o+=s?e:this.implodeParams(e,i);var c=s?i:this.omit(i,this.extractParams(e)),u=this.implodeParams(this.urls.api.rest,{hostname:this.hostname})+o,d=this.getPathAuthenticationType(e);if("public"===d)Object.keys(c).length&&(u+="?"+this.urlencode(c));else if("private"===d){this.checkRequiredCredentials();var h=this.iso8601(this.milliseconds());n={"OK-ACCESS-KEY":this.apiKey,"OK-ACCESS-PASSPHRASE":this.password,"OK-ACCESS-TIMESTAMP":h};var l=h+r+o;if("GET"===r){if(Object.keys(c).length){var f="?"+this.urlencode(c);u+=f,l+=f}}else(s||Object.keys(c).length)&&(l+=a=this.json(c)),n["Content-Type"]="application/json";var p=this.hmac(this.encode(l),this.encode(this.secret),"sha256","base64");n["OK-ACCESS-SIGN"]=p}return{url:u,method:r,body:a,headers:n}}},{key:"getPathAuthenticationType",value:function(e){if("underlying"===e)return"public";var t=this.safeValue(this.options,"auth",{}),r=this.findBroadlyMatchedKey(t,e);return this.safeString(t,r,"private")}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(s){var u=this.id+" "+a;if(503===e)throw new v(u);var d=this.safeString(s,"message"),h=this.safeString2(s,"code","error_code"),l=void 0!==d&&""!==d,f=void 0!==h&&"0"!==h;if(l&&(this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u)),f&&this.throwExactlyMatchedException(this.exceptions.exact,h,u),f||l)throw new p(u)}}}]),r}(l)},function(e,t,r){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=r(151)},function(e,t,r){"use strict";function i(e,t,r,i,n,a,s){try{var o=e[a](s),c=o.value}catch(u){return void r(u)}o.done?t(c):Promise.resolve(c).then(i,n)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(n,a){var s=e.apply(t,r);function o(e){i(s,n,a,o,c,"next",e)}function c(e){i(s,n,a,o,c,"throw",e)}o(void 0)}))}}r.d(t,"a",(function(){return n}))},function(e,t,r){var i=r(87),n=r(167),a=r(171),s=r(173),o=r(174),c=r(176),u=Date.prototype.getTime;function d(e,t,r){var f=r||{};return!!(f.strict?a(e,t):e===t)||(!e||!t||"object"!==typeof e&&"object"!==typeof t?f.strict?a(e,t):e==t:function(e,t,r){var a,f;if(typeof e!==typeof t)return!1;if(h(e)||h(t))return!1;if(e.prototype!==t.prototype)return!1;if(n(e)!==n(t))return!1;var p=s(e),v=s(t);if(p!==v)return!1;if(p||v)return e.source===t.source&&o(e)===o(t);if(c(e)&&c(t))return u.call(e)===u.call(t);var m=l(e),y=l(t);if(m!==y)return!1;if(m||y){if(e.length!==t.length)return!1;for(a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0}if(typeof e!==typeof t)return!1;try{var g=i(e),b=i(t)}catch(k){return!1}if(g.length!==b.length)return!1;for(g.sort(),b.sort(),a=g.length-1;a>=0;a--)if(g[a]!=b[a])return!1;for(a=g.length-1;a>=0;a--)if(!d(e[f=g[a]],t[f],r))return!1;return!0}(e,t,f))}function h(e){return null===e||void 0===e}function l(e){return!(!e||"object"!==typeof e||"number"!==typeof e.length)&&("function"===typeof e.copy&&"function"===typeof e.slice&&!(e.length>0&&"number"!==typeof e[0]))}e.exports=d},function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var i=r(1),n=r(65),a=r(26);function s(){var e=i.useContext(n.a);return Object(a.c)(e),e}},,,function(e,t,r){"use strict";var i=r(11),n=r(97),a=r(10),s="1.44.2";i.ccxtVersion=s;var o={aax:r(270),acx:r(130),aofex:r(272),ascendex:r(131),bequant:r(273),bibox:r(274),bigone:r(275),binance:r(132),binanceus:r(276),bit2c:r(277),bitbank:r(278),bitbay:r(279),bitcoincom:r(280),bitfinex:r(133),bitfinex2:r(281),bitflyer:r(282),bitforex:r(283),bitget:r(284),bithumb:r(285),bitkk:r(286),bitmart:r(287),bitmax:r(288),bitmex:r(289),bitpanda:r(290),bitso:r(291),bitstamp:r(292),bitstamp1:r(293),bittrex:r(294),bitvavo:r(295),bitz:r(296),bl3p:r(297),bleutrade:r(298),braziliex:r(299),btcalpha:r(300),btcbox:r(301),btcmarkets:r(302),btctradeua:r(303),btcturk:r(304),buda:r(305),bw:r(306),bybit:r(307),bytetrade:r(308),cdax:r(309),cex:r(310),chilebit:r(311),coinbase:r(312),coinbaseprime:r(313),coinbasepro:r(135),coincheck:r(314),coinegg:r(315),coinex:r(316),coinfalcon:r(317),coinfloor:r(318),coingi:r(319),coinmarketcap:r(320),coinmate:r(321),coinone:r(322),coinspot:r(323),crex24:r(324),currencycom:r(325),delta:r(326),deribit:r(327),digifinex:r(328),equos:r(329),eterbase:r(330),exmo:r(331),exx:r(332),fcoin:r(136),fcoinjp:r(333),flowbtc:r(334),foxbit:r(62),ftx:r(335),gateio:r(336),gemini:r(337),gopax:r(338),hbtc:r(339),hitbtc:r(81),hollaex:r(340),huobijp:r(341),huobipro:r(82),idex:r(342),independentreserve:r(343),indodax:r(344),itbit:r(345),kraken:r(346),kucoin:r(347),kuna:r(348),lakebtc:r(349),latoken:r(350),lbank:r(351),liquid:r(352),luno:r(353),lykke:r(354),mercado:r(355),mixcoins:r(356),ndax:r(357),novadax:r(358),oceanex:r(359),okcoin:r(360),okex:r(137),paymium:r(361),phemex:r(362),poloniex:r(363),probit:r(364),qtrade:r(365),rightbtc:r(366),ripio:r(367),southxchange:r(368),stex:r(369),surbitcoin:r(370),therock:r(371),tidebit:r(372),tidex:r(373),timex:r(374),upbit:r(375),vbtc:r(376),vcc:r(377),wavesexchange:r(378),whitebit:r(379),xbtce:r(380),xena:r(381),yobit:r(382),zaif:r(383),zb:r(134)};e.exports=Object.assign({version:s,Exchange:i,exchanges:Object.keys(o)},o,n,a)},function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var i=r(52);var n=r(64);function a(e){return function(e){if(Array.isArray(e))return Object(i.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(n.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},,,,,function(e,t,r){"use strict";var i=r(55),n=60103,a=60106;t.Fragment=60107,t.StrictMode=60108,t.Profiler=60114;var s=60109,o=60110,c=60112;t.Suspense=60113;var u=60115,d=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;n=h("react.element"),a=h("react.portal"),t.Fragment=h("react.fragment"),t.StrictMode=h("react.strict_mode"),t.Profiler=h("react.profiler"),s=h("react.provider"),o=h("react.context"),c=h("react.forward_ref"),t.Suspense=h("react.suspense"),u=h("react.memo"),d=h("react.lazy")}var l="function"===typeof Symbol&&Symbol.iterator;function f(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v={};function m(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}function y(){}function g(e,t,r){this.props=e,this.context=t,this.refs=v,this.updater=r||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error(f(85));this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=m.prototype;var b=g.prototype=new y;b.constructor=g,i(b,m.prototype),b.isPureReactComponent=!0;var k={current:null},x=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var i,a={},s=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(s=""+t.key),t)x.call(t,i)&&!w.hasOwnProperty(i)&&(a[i]=t[i]);var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];a.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===a[i]&&(a[i]=c[i]);return{$$typeof:n,type:e,key:s,ref:o,props:a,_owner:k.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function S(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,r,i,s){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var c=!1;if(null===e)c=!0;else switch(o){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case a:c=!0}}if(c)return s=s(c=e),e=""===i?"."+S(c,0):i,Array.isArray(s)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),C(s,t,r,"",(function(e){return e}))):null!=s&&(O(s)&&(s=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,r+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(c=0,i=""===i?".":i+":",Array.isArray(e))for(var u=0;u<e.length;u++){var d=i+S(o=e[u],u);c+=C(o,t,r,d,s)}else if("function"===typeof(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=l&&e[l]||e["@@iterator"])?e:null}(e)))for(e=d.call(e),u=0;!(o=e.next()).done;)c+=C(o=o.value,t,r,d=i+S(o,u++),s);else if("object"===o)throw t=""+e,Error(f(31,"[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t));return c}function I(e,t,r){if(null==e)return e;var i=[],n=0;return C(e,i,"","",(function(e){return t.call(r,e,n++)})),i}function M(e){if(-1===e._status){var t=e._result;t=t(),e._status=0,e._result=t,t.then((function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)}),(function(t){0===e._status&&(e._status=2,e._result=t)}))}if(1===e._status)return e._result;throw e._result}var E={current:null};function A(){var e=E.current;if(null===e)throw Error(f(321));return e}var F={ReactCurrentDispatcher:E,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:k,IsSomeRendererActing:{current:!1},assign:i};t.Children={map:I,forEach:function(e,t,r){I(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return I(e,(function(){t++})),t},toArray:function(e){return I(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error(f(143));return e}},t.Component=m,t.PureComponent=g,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error(f(267,e));var a=i({},e.props),s=e.key,o=e.ref,c=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,c=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(d in t)x.call(t,d)&&!w.hasOwnProperty(d)&&(a[d]=void 0===t[d]&&void 0!==u?u[d]:t[d])}var d=arguments.length-2;if(1===d)a.children=r;else if(1<d){u=Array(d);for(var h=0;h<d;h++)u[h]=arguments[h+2];a.children=u}return{$$typeof:n,type:e.type,key:s,ref:o,props:a,_owner:c}},t.createContext=function(e,t){return void 0===t&&(t=null),(e={$$typeof:o,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:M}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.useCallback=function(e,t){return A().useCallback(e,t)},t.useContext=function(e,t){return A().useContext(e,t)},t.useDebugValue=function(){},t.useEffect=function(e,t){return A().useEffect(e,t)},t.useImperativeHandle=function(e,t,r){return A().useImperativeHandle(e,t,r)},t.useLayoutEffect=function(e,t){return A().useLayoutEffect(e,t)},t.useMemo=function(e,t){return A().useMemo(e,t)},t.useReducer=function(e,t,r){return A().useReducer(e,t,r)},t.useRef=function(e){return A().useRef(e)},t.useState=function(e){return A().useState(e)},t.version="17.0.1"},function(e,t,r){"use strict";var i=r(1),n=r(55),a=r(152);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(s(227));var o=new Set,c={};function u(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(c[e]=t,e=0;e<t.length;e++)o.add(t[e])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),l=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f=Object.prototype.hasOwnProperty,p={},v={};function m(e,t,r,i,n,a,s){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=n,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=s}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var g=/[\-:]([a-z])/g;function b(e){return e[1].toUpperCase()}function k(e,t,r,i){var n=y.hasOwnProperty(t)?y[t]:null;(null!==n?0===n.type:!i&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(function(e,t,r,i){if(null===t||"undefined"===typeof t||function(e,t,r,i){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,i))return!0;if(i)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,r,n,i)&&(r=null),i||null===n?function(e){return!!f.call(v,e)||!f.call(p,e)&&(l.test(e)?v[e]=!0:(p[e]=!0,!1))}(t)&&(null===r?e.removeAttribute(t):e.setAttribute(t,""+r)):n.mustUseProperty?e[n.propertyName]=null===r?3!==n.type&&"":r:(t=n.attributeName,i=n.attributeNamespace,null===r?e.removeAttribute(t):(r=3===(n=n.type)||4===n&&!0===r?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(g,b);y[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,_=60106,O=60107,T=60108,S=60114,C=60109,I=60110,M=60112,E=60113,A=60120,F=60115,P=60116,B=60121,R=60128,V=60129,L=60130,D=60131;if("function"===typeof Symbol&&Symbol.for){var q=Symbol.for;w=q("react.element"),_=q("react.portal"),O=q("react.fragment"),T=q("react.strict_mode"),S=q("react.profiler"),C=q("react.provider"),I=q("react.context"),M=q("react.forward_ref"),E=q("react.suspense"),A=q("react.suspense_list"),F=q("react.memo"),P=q("react.lazy"),B=q("react.block"),q("react.scope"),R=q("react.opaque.id"),V=q("react.debug_trace_mode"),L=q("react.offscreen"),D=q("react.legacy_hidden")}var N,G="function"===typeof Symbol&&Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=G&&e[G]||e["@@iterator"])?e:null}function U(e){if(void 0===N)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);N=t&&t[1]||""}return"\n"+N+e}var H=!1;function z(e,t){if(!e||H)return"";H=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var n=c.stack.split("\n"),a=i.stack.split("\n"),s=n.length-1,o=a.length-1;1<=s&&0<=o&&n[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(n[s]!==a[o]){if(1!==s||1!==o)do{if(s--,0>--o||n[s]!==a[o])return"\n"+n[s].replace(" at new "," at ")}while(1<=s&&0<=o);break}}}finally{H=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?U(e):""}function W(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 22:return e=z(e.type._render,!1);case 1:return e=z(e.type,!0);default:return""}}function K(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case O:return"Fragment";case _:return"Portal";case S:return"Profiler";case T:return"StrictMode";case E:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case M:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case F:return K(e.type);case B:return K(e._render);case P:t=e._payload,e=e._init;try{return K(e(t))}catch(r){}}return null}function X(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function Y(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Z(e){e._valueTracker||(e._valueTracker=function(e){var t=Y(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var n=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){i=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=Y(e)?e.checked?"true":"false":e.value),(e=i)!==r&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var r=t.checked;return n({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=r?r:e._wrapperState.initialChecked})}function ee(e,t){var r=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;r=X(null!=t.value?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function te(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function re(e,t){te(e,t);var r=X(t.value),i=t.type;if(null!=r)"number"===i?(0===r&&""===e.value||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ne(e,t.type,r):t.hasOwnProperty("defaultValue")&&ne(e,t.type,X(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ie(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}""!==(r=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==r&&(e.name=r)}function ne(e,t,r){"number"===t&&$(e.ownerDocument)===e||(null==r?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function ae(e,t){return e=n({children:void 0},t),(t=function(e){var t="";return i.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(t.children))&&(e.children=t),e}function se(e,t,r,i){if(e=e.options,t){t={};for(var n=0;n<r.length;n++)t["$"+r[n]]=!0;for(r=0;r<e.length;r++)n=t.hasOwnProperty("$"+e[r].value),e[r].selected!==n&&(e[r].selected=n),n&&i&&(e[r].defaultSelected=!0)}else{for(r=""+X(r),t=null,n=0;n<e.length;n++){if(e[n].value===r)return e[n].selected=!0,void(i&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function oe(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return n({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ce(e,t){var r=t.value;if(null==r){if(r=t.children,t=t.defaultValue,null!=r){if(null!=t)throw Error(s(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(s(93));r=r[0]}t=r}null==t&&(t=""),r=t}e._wrapperState={initialValue:X(r)}}function ue(e,t){var r=X(t.value),i=X(t.defaultValue);null!=r&&((r=""+r)!==e.value&&(e.value=r),null==t.defaultValue&&e.defaultValue!==r&&(e.defaultValue=r)),null!=i&&(e.defaultValue=""+i)}function de(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}var he="http://www.w3.org/1999/xhtml",le="http://www.w3.org/2000/svg";function fe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function pe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?fe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ve,me,ye=(me=function(e,t){if(e.namespaceURI!==le||"innerHTML"in e)e.innerHTML=t;else{for((ve=ve||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ve.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,r,i){MSApp.execUnsafeLocalFunction((function(){return me(e,t)}))}:me);function ge(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var be={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ke=["Webkit","ms","Moz","O"];function xe(e,t,r){return null==t||"boolean"===typeof t||""===t?"":r||"number"!==typeof t||0===t||be.hasOwnProperty(e)&&be[e]?(""+t).trim():t+"px"}function we(e,t){for(var r in e=e.style,t)if(t.hasOwnProperty(r)){var i=0===r.indexOf("--"),n=xe(r,t[r],i);"float"===r&&(r="cssFloat"),i?e.setProperty(r,n):e[r]=n}}Object.keys(be).forEach((function(e){ke.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),be[t]=be[e]}))}));var _e=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Oe(e,t){if(t){if(_e[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function Te(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Se(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ce=null,Ie=null,Me=null;function Ee(e){if(e=Ji(e)){if("function"!==typeof Ce)throw Error(s(280));var t=e.stateNode;t&&(t=tn(t),Ce(e.stateNode,e.type,t))}}function Ae(e){Ie?Me?Me.push(e):Me=[e]:Ie=e}function Fe(){if(Ie){var e=Ie,t=Me;if(Me=Ie=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Pe(e,t){return e(t)}function Be(e,t,r,i,n){return e(t,r,i,n)}function Re(){}var Ve=Pe,Le=!1,De=!1;function qe(){null===Ie&&null===Me||(Re(),Fe())}function Ne(e,t){var r=e.stateNode;if(null===r)return null;var i=tn(r);if(null===i)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(r&&"function"!==typeof r)throw Error(s(231,t,typeof r));return r}var Ge=!1;if(h)try{var je={};Object.defineProperty(je,"passive",{get:function(){Ge=!0}}),window.addEventListener("test",je,je),window.removeEventListener("test",je,je)}catch(me){Ge=!1}function Ue(e,t,r,i,n,a,s,o,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var He=!1,ze=null,We=!1,Ke=null,Xe={onError:function(e){He=!0,ze=e}};function Ye(e,t,r,i,n,a,s,o,c){He=!1,ze=null,Ue.apply(Xe,arguments)}function Ze(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(1026&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function $e(e){if(Ze(e)!==e)throw Error(s(188))}function Je(e){if(!(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ze(e)))throw Error(s(188));return t!==e?null:e}for(var r=e,i=t;;){var n=r.return;if(null===n)break;var a=n.alternate;if(null===a){if(null!==(i=n.return)){r=i;continue}break}if(n.child===a.child){for(a=n.child;a;){if(a===r)return $e(n),e;if(a===i)return $e(n),t;a=a.sibling}throw Error(s(188))}if(r.return!==i.return)r=n,i=a;else{for(var o=!1,c=n.child;c;){if(c===r){o=!0,r=n,i=a;break}if(c===i){o=!0,i=n,r=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===r){o=!0,r=a,i=n;break}if(c===i){o=!0,i=a,r=n;break}c=c.sibling}if(!o)throw Error(s(189))}}if(r.alternate!==i)throw Error(s(190))}if(3!==r.tag)throw Error(s(188));return r.stateNode.current===r?e:t}(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function et(e,t){for(var r=e.alternate;null!==t;){if(t===e||t===r)return!0;t=t.return}return!1}var tt,rt,it,nt,at=!1,st=[],ot=null,ct=null,ut=null,dt=new Map,ht=new Map,lt=[],ft="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function pt(e,t,r,i,n){return{blockedOn:e,domEventName:t,eventSystemFlags:16|r,nativeEvent:n,targetContainers:[i]}}function vt(e,t){switch(e){case"focusin":case"focusout":ot=null;break;case"dragenter":case"dragleave":ct=null;break;case"mouseover":case"mouseout":ut=null;break;case"pointerover":case"pointerout":dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ht.delete(t.pointerId)}}function mt(e,t,r,i,n,a){return null===e||e.nativeEvent!==a?(e=pt(t,r,i,n,a),null!==t&&(null!==(t=Ji(t))&&rt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function yt(e){var t=$i(e.target);if(null!==t){var r=Ze(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=Qe(r)))return e.blockedOn=t,void nt(e.lanePriority,(function(){a.unstable_runWithPriority(e.priority,(function(){it(r)}))}))}else if(3===t&&r.stateNode.hydrate)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function gt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r)return null!==(t=Ji(r))&&rt(t),e.blockedOn=r,!1;t.shift()}return!0}function bt(e,t,r){gt(e)&&r.delete(t)}function kt(){for(at=!1;0<st.length;){var e=st[0];if(null!==e.blockedOn){null!==(e=Ji(e.blockedOn))&&tt(e);break}for(var t=e.targetContainers;0<t.length;){var r=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==r){e.blockedOn=r;break}t.shift()}null===e.blockedOn&&st.shift()}null!==ot&&gt(ot)&&(ot=null),null!==ct&&gt(ct)&&(ct=null),null!==ut&&gt(ut)&&(ut=null),dt.forEach(bt),ht.forEach(bt)}function xt(e,t){e.blockedOn===t&&(e.blockedOn=null,at||(at=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,kt)))}function wt(e){function t(t){return xt(t,e)}if(0<st.length){xt(st[0],e);for(var r=1;r<st.length;r++){var i=st[r];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==ot&&xt(ot,e),null!==ct&&xt(ct,e),null!==ut&&xt(ut,e),dt.forEach(t),ht.forEach(t),r=0;r<lt.length;r++)(i=lt[r]).blockedOn===e&&(i.blockedOn=null);for(;0<lt.length&&null===(r=lt[0]).blockedOn;)yt(r),null===r.blockedOn&&lt.shift()}function _t(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Ot={animationend:_t("Animation","AnimationEnd"),animationiteration:_t("Animation","AnimationIteration"),animationstart:_t("Animation","AnimationStart"),transitionend:_t("Transition","TransitionEnd")},Tt={},St={};function Ct(e){if(Tt[e])return Tt[e];if(!Ot[e])return e;var t,r=Ot[e];for(t in r)if(r.hasOwnProperty(t)&&t in St)return Tt[e]=r[t];return e}h&&(St=document.createElement("div").style,"AnimationEvent"in window||(delete Ot.animationend.animation,delete Ot.animationiteration.animation,delete Ot.animationstart.animation),"TransitionEvent"in window||delete Ot.transitionend.transition);var It=Ct("animationend"),Mt=Ct("animationiteration"),Et=Ct("animationstart"),At=Ct("transitionend"),Ft=new Map,Pt=new Map,Bt=["abort","abort",It,"animationEnd",Mt,"animationIteration",Et,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",At,"transitionEnd","waiting","waiting"];function Rt(e,t){for(var r=0;r<e.length;r+=2){var i=e[r],n=e[r+1];n="on"+(n[0].toUpperCase()+n.slice(1)),Pt.set(i,t),Ft.set(i,n),u(n,[i])}}(0,a.unstable_now)();var Vt=8;function Lt(e){if(0!==(1&e))return Vt=15,1;if(0!==(2&e))return Vt=14,2;if(0!==(4&e))return Vt=13,4;var t=24&e;return 0!==t?(Vt=12,t):0!==(32&e)?(Vt=11,32):0!==(t=192&e)?(Vt=10,t):0!==(256&e)?(Vt=9,256):0!==(t=3584&e)?(Vt=8,t):0!==(4096&e)?(Vt=7,4096):0!==(t=4186112&e)?(Vt=6,t):0!==(t=62914560&e)?(Vt=5,t):67108864&e?(Vt=4,67108864):0!==(134217728&e)?(Vt=3,134217728):0!==(t=805306368&e)?(Vt=2,t):0!==(1073741824&e)?(Vt=1,1073741824):(Vt=8,e)}function Dt(e,t){var r=e.pendingLanes;if(0===r)return Vt=0;var i=0,n=0,a=e.expiredLanes,s=e.suspendedLanes,o=e.pingedLanes;if(0!==a)i=a,n=Vt=15;else if(0!==(a=134217727&r)){var c=a&~s;0!==c?(i=Lt(c),n=Vt):0!==(o&=a)&&(i=Lt(o),n=Vt)}else 0!==(a=r&~s)?(i=Lt(a),n=Vt):0!==o&&(i=Lt(o),n=Vt);if(0===i)return 0;if(i=r&((0>(i=31-Ht(i))?0:1<<i)<<1)-1,0!==t&&t!==i&&0===(t&s)){if(Lt(t),n<=Vt)return t;Vt=n}if(0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)n=1<<(r=31-Ht(t)),i|=e[r],t&=~n;return i}function qt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function Nt(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return 0===(e=Gt(24&~t))?Nt(10,t):e;case 10:return 0===(e=Gt(192&~t))?Nt(8,t):e;case 8:return 0===(e=Gt(3584&~t))&&(0===(e=Gt(4186112&~t))&&(e=512)),e;case 2:return 0===(t=Gt(805306368&~t))&&(t=268435456),t}throw Error(s(358,e))}function Gt(e){return e&-e}function jt(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Ut(e,t,r){e.pendingLanes|=t;var i=t-1;e.suspendedLanes&=i,e.pingedLanes&=i,(e=e.eventTimes)[t=31-Ht(t)]=r}var Ht=Math.clz32?Math.clz32:function(e){return 0===e?32:31-(zt(e)/Wt|0)|0},zt=Math.log,Wt=Math.LN2;var Kt=a.unstable_UserBlockingPriority,Xt=a.unstable_runWithPriority,Yt=!0;function Zt(e,t,r,i){Le||Re();var n=$t,a=Le;Le=!0;try{Be(n,e,t,r,i)}finally{(Le=a)||qe()}}function Qt(e,t,r,i){Xt(Kt,$t.bind(null,e,t,r,i))}function $t(e,t,r,i){var n;if(Yt)if((n=0===(4&t))&&0<st.length&&-1<ft.indexOf(e))e=pt(null,e,t,r,i),st.push(e);else{var a=Jt(e,t,r,i);if(null===a)n&&vt(e,i);else{if(n){if(-1<ft.indexOf(e))return e=pt(a,e,t,r,i),void st.push(e);if(function(e,t,r,i,n){switch(t){case"focusin":return ot=mt(ot,e,t,r,i,n),!0;case"dragenter":return ct=mt(ct,e,t,r,i,n),!0;case"mouseover":return ut=mt(ut,e,t,r,i,n),!0;case"pointerover":var a=n.pointerId;return dt.set(a,mt(dt.get(a)||null,e,t,r,i,n)),!0;case"gotpointercapture":return a=n.pointerId,ht.set(a,mt(ht.get(a)||null,e,t,r,i,n)),!0}return!1}(a,e,t,r,i))return;vt(e,i)}Ai(e,t,i,null,r)}}}function Jt(e,t,r,i){var n=Se(i);if(null!==(n=$i(n))){var a=Ze(n);if(null===a)n=null;else{var s=a.tag;if(13===s){if(null!==(n=Qe(a)))return n;n=null}else if(3===s){if(a.stateNode.hydrate)return 3===a.tag?a.stateNode.containerInfo:null;n=null}else a!==n&&(n=null)}}return Ai(e,t,i,n,r),null}var er=null,tr=null,rr=null;function ir(){if(rr)return rr;var e,t,r=tr,i=r.length,n="value"in er?er.value:er.textContent,a=n.length;for(e=0;e<i&&r[e]===n[e];e++);var s=i-e;for(t=1;t<=s&&r[i-t]===n[a-t];t++);return rr=n.slice(e,1<t?1-t:void 0)}function nr(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ar(){return!0}function sr(){return!1}function or(e){function t(t,r,i,n,a){for(var s in this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=n,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(s)&&(t=e[s],this[s]=t?t(n):n[s]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?ar:sr,this.isPropagationStopped=sr,this}return n(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ar)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ar)},persist:function(){},isPersistent:ar}),t}var cr,ur,dr,hr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=or(hr),fr=n({},hr,{view:0,detail:0}),pr=or(fr),vr=n({},fr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dr&&(dr&&"mousemove"===e.type?(cr=e.screenX-dr.screenX,ur=e.screenY-dr.screenY):ur=cr=0,dr=e),cr)},movementY:function(e){return"movementY"in e?e.movementY:ur}}),mr=or(vr),yr=or(n({},vr,{dataTransfer:0})),gr=or(n({},fr,{relatedTarget:0})),br=or(n({},hr,{animationName:0,elapsedTime:0,pseudoElement:0})),kr=or(n({},hr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),xr=or(n({},hr,{data:0})),wr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_r={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Or={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Tr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Or[e])&&!!t[e]}function Sr(){return Tr}var Cr=or(n({},fr,{key:function(e){if(e.key){var t=wr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=nr(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_r[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sr,charCode:function(e){return"keypress"===e.type?nr(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?nr(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),Ir=or(n({},vr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Mr=or(n({},fr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sr})),Er=or(n({},hr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ar=or(n({},vr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Fr=[9,13,27,32],Pr=h&&"CompositionEvent"in window,Br=null;h&&"documentMode"in document&&(Br=document.documentMode);var Rr=h&&"TextEvent"in window&&!Br,Vr=h&&(!Pr||Br&&8<Br&&11>=Br),Lr=String.fromCharCode(32),Dr=!1;function qr(e,t){switch(e){case"keyup":return-1!==Fr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nr(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gr=!1;var jr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!jr[e.type]:"textarea"===t}function Hr(e,t,r,i){Ae(i),0<(t=Pi(t,"onChange")).length&&(r=new lr("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var zr=null,Wr=null;function Kr(e){Ti(e,0)}function Xr(e){if(Q(en(e)))return e}function Yr(e,t){if("change"===e)return t}var Zr=!1;if(h){var Qr;if(h){var $r="oninput"in document;if(!$r){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),$r="function"===typeof Jr.oninput}Qr=$r}else Qr=!1;Zr=Qr&&(!document.documentMode||9<document.documentMode)}function ei(){zr&&(zr.detachEvent("onpropertychange",ti),Wr=zr=null)}function ti(e){if("value"===e.propertyName&&Xr(Wr)){var t=[];if(Hr(t,Wr,e,Se(e)),e=Kr,Le)e(t);else{Le=!0;try{Pe(e,t)}finally{Le=!1,qe()}}}}function ri(e,t,r){"focusin"===e?(ei(),Wr=r,(zr=t).attachEvent("onpropertychange",ti)):"focusout"===e&&ei()}function ii(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xr(Wr)}function ni(e,t){if("click"===e)return Xr(t)}function ai(e,t){if("input"===e||"change"===e)return Xr(t)}var si="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},oi=Object.prototype.hasOwnProperty;function ci(e,t){if(si(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++)if(!oi.call(t,r[i])||!si(e[r[i]],t[r[i]]))return!1;return!0}function ui(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function di(e,t){var r,i=ui(e);for(e=0;i;){if(3===i.nodeType){if(r=e+i.textContent.length,e<=t&&r>=t)return{node:i,offset:t-e};e=r}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ui(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function li(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var r="string"===typeof t.contentWindow.location.href}catch(i){r=!1}if(!r)break;t=$((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var pi=h&&"documentMode"in document&&11>=document.documentMode,vi=null,mi=null,yi=null,gi=!1;function bi(e,t,r){var i=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;gi||null==vi||vi!==$(i)||("selectionStart"in(i=vi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&ci(yi,i)||(yi=i,0<(i=Pi(mi,"onSelect")).length&&(t=new lr("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=vi)))}Rt("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),Rt("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),Rt(Bt,2);for(var ki="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),xi=0;xi<ki.length;xi++)Pt.set(ki[xi],0);d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),u("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),u("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),u("onBeforeInput",["compositionend","keypress","textInput","paste"]),u("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),u("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_i=new Set("cancel close invalid load scroll toggle".split(" ").concat(wi));function Oi(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,function(e,t,r,i,n,a,o,c,u){if(Ye.apply(this,arguments),He){if(!He)throw Error(s(198));var d=ze;He=!1,ze=null,We||(We=!0,Ke=d)}}(i,t,void 0,e),e.currentTarget=null}function Ti(e,t){t=0!==(4&t);for(var r=0;r<e.length;r++){var i=e[r],n=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var s=i.length-1;0<=s;s--){var o=i[s],c=o.instance,u=o.currentTarget;if(o=o.listener,c!==a&&n.isPropagationStopped())break e;Oi(n,o,u),a=c}else for(s=0;s<i.length;s++){if(c=(o=i[s]).instance,u=o.currentTarget,o=o.listener,c!==a&&n.isPropagationStopped())break e;Oi(n,o,u),a=c}}}if(We)throw e=Ke,We=!1,Ke=null,e}function Si(e,t){var r=rn(t),i=e+"__bubble";r.has(i)||(Ei(t,e,2,!1),r.add(i))}var Ci="_reactListening"+Math.random().toString(36).slice(2);function Ii(e){e[Ci]||(e[Ci]=!0,o.forEach((function(t){_i.has(t)||Mi(t,!1,e,null),Mi(t,!0,e,null)})))}function Mi(e,t,r,i){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=r;if("selectionchange"===e&&9!==r.nodeType&&(a=r.ownerDocument),null!==i&&!t&&_i.has(e)){if("scroll"!==e)return;n|=2,a=i}var s=rn(a),o=e+"__"+(t?"capture":"bubble");s.has(o)||(t&&(n|=4),Ei(a,e,n,t),s.add(o))}function Ei(e,t,r,i){var n=Pt.get(t);switch(void 0===n?2:n){case 0:n=Zt;break;case 1:n=Qt;break;default:n=$t}r=n.bind(null,t,r,e),n=void 0,!Ge||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),i?void 0!==n?e.addEventListener(t,r,{capture:!0,passive:n}):e.addEventListener(t,r,!0):void 0!==n?e.addEventListener(t,r,{passive:n}):e.addEventListener(t,r,!1)}function Ai(e,t,r,i,n){var a=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var s=i.tag;if(3===s||4===s){var o=i.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===s)for(s=i.return;null!==s;){var c=s.tag;if((3===c||4===c)&&((c=s.stateNode.containerInfo)===n||8===c.nodeType&&c.parentNode===n))return;s=s.return}for(;null!==o;){if(null===(s=$i(o)))return;if(5===(c=s.tag)||6===c){i=a=s;continue e}o=o.parentNode}}i=i.return}!function(e,t,r){if(De)return e(t,r);De=!0;try{Ve(e,t,r)}finally{De=!1,qe()}}((function(){var i=a,n=Se(r),s=[];e:{var o=Ft.get(e);if(void 0!==o){var c=lr,u=e;switch(e){case"keypress":if(0===nr(r))break e;case"keydown":case"keyup":c=Cr;break;case"focusin":u="focus",c=gr;break;case"focusout":u="blur",c=gr;break;case"beforeblur":case"afterblur":c=gr;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=yr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=Mr;break;case It:case Mt:case Et:c=br;break;case At:c=Er;break;case"scroll":c=pr;break;case"wheel":c=Ar;break;case"copy":case"cut":case"paste":c=kr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Ir}var d=0!==(4&t),h=!d&&"scroll"===e,l=d?null!==o?o+"Capture":null:o;d=[];for(var f,p=i;null!==p;){var v=(f=p).stateNode;if(5===f.tag&&null!==v&&(f=v,null!==l&&(null!=(v=Ne(p,l))&&d.push(Fi(p,v,f)))),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,r,n),s.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||0!==(16&t)||!(u=r.relatedTarget||r.fromElement)||!$i(u)&&!u[Zi])&&(c||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=i,null!==(u=(u=r.relatedTarget||r.toElement)?$i(u):null)&&(u!==(h=Ze(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(c=null,u=i),c!==u)){if(d=mr,v="onMouseLeave",l="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Ir,v="onPointerLeave",l="onPointerEnter",p="pointer"),h=null==c?o:en(c),f=null==u?o:en(u),(o=new d(v,p+"leave",c,r,n)).target=h,o.relatedTarget=f,v=null,$i(n)===i&&((d=new d(l,p+"enter",u,r,n)).target=f,d.relatedTarget=h,v=d),h=v,c&&u)e:{for(l=u,p=0,f=d=c;f;f=Bi(f))p++;for(f=0,v=l;v;v=Bi(v))f++;for(;0<p-f;)d=Bi(d),p--;for(;0<f-p;)l=Bi(l),f--;for(;p--;){if(d===l||null!==l&&d===l.alternate)break e;d=Bi(d),l=Bi(l)}d=null}else d=null;null!==c&&Ri(s,o,c,d,!1),null!==u&&null!==h&&Ri(s,h,u,d,!0)}if("select"===(c=(o=i?en(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var m=Yr;else if(Ur(o))if(Zr)m=ai;else{m=ii;var y=ri}else(c=o.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=ni);switch(m&&(m=m(e,i))?Hr(s,m,r,n):(y&&y(e,o,i),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ne(o,"number",o.value)),y=i?en(i):window,e){case"focusin":(Ur(y)||"true"===y.contentEditable)&&(vi=y,mi=i,yi=null);break;case"focusout":yi=mi=vi=null;break;case"mousedown":gi=!0;break;case"contextmenu":case"mouseup":case"dragend":gi=!1,bi(s,r,n);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":bi(s,r,n)}var g;if(Pr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Gr?qr(e,r)&&(b="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(b="onCompositionStart");b&&(Vr&&"ko"!==r.locale&&(Gr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Gr&&(g=ir()):(tr="value"in(er=n)?er.value:er.textContent,Gr=!0)),0<(y=Pi(i,b)).length&&(b=new xr(b,e,null,r,n),s.push({event:b,listeners:y}),g?b.data=g:null!==(g=Nr(r))&&(b.data=g))),(g=Rr?function(e,t){switch(e){case"compositionend":return Nr(t);case"keypress":return 32!==t.which?null:(Dr=!0,Lr);case"textInput":return(e=t.data)===Lr&&Dr?null:e;default:return null}}(e,r):function(e,t){if(Gr)return"compositionend"===e||!Pr&&qr(e,t)?(e=ir(),rr=tr=er=null,Gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Vr&&"ko"!==t.locale?null:t.data;default:return null}}(e,r))&&(0<(i=Pi(i,"onBeforeInput")).length&&(n=new xr("onBeforeInput","beforeinput",null,r,n),s.push({event:n,listeners:i}),n.data=g))}Ti(s,t)}))}function Fi(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Pi(e,t){for(var r=t+"Capture",i=[];null!==e;){var n=e,a=n.stateNode;5===n.tag&&null!==a&&(n=a,null!=(a=Ne(e,r))&&i.unshift(Fi(e,a,n)),null!=(a=Ne(e,t))&&i.push(Fi(e,a,n))),e=e.return}return i}function Bi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Ri(e,t,r,i,n){for(var a=t._reactName,s=[];null!==r&&r!==i;){var o=r,c=o.alternate,u=o.stateNode;if(null!==c&&c===i)break;5===o.tag&&null!==u&&(o=u,n?null!=(c=Ne(r,a))&&s.unshift(Fi(r,c,o)):n||null!=(c=Ne(r,a))&&s.push(Fi(r,c,o))),r=r.return}0!==s.length&&e.push({event:t,listeners:s})}function Vi(){}var Li=null,Di=null;function qi(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function Ni(e,t){return"textarea"===e||"option"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var Gi="function"===typeof setTimeout?setTimeout:void 0,ji="function"===typeof clearTimeout?clearTimeout:void 0;function Ui(e){1===e.nodeType?e.textContent="":9===e.nodeType&&(null!=(e=e.body)&&(e.textContent=""))}function Hi(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break}return e}function zi(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r){if(0===t)return e;t--}else"/$"===r&&t++}e=e.previousSibling}return null}var Wi=0;var Ki=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Ki,Yi="__reactProps$"+Ki,Zi="__reactContainer$"+Ki,Qi="__reactEvents$"+Ki;function $i(e){var t=e[Xi];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Zi]||r[Xi]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=zi(e);null!==e;){if(r=e[Xi])return r;e=zi(e)}return t}r=(e=r).parentNode}return null}function Ji(e){return!(e=e[Xi]||e[Zi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function en(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function tn(e){return e[Yi]||null}function rn(e){var t=e[Qi];return void 0===t&&(t=e[Qi]=new Set),t}var nn=[],an=-1;function sn(e){return{current:e}}function on(e){0>an||(e.current=nn[an],nn[an]=null,an--)}function cn(e,t){an++,nn[an]=e.current,e.current=t}var un={},dn=sn(un),hn=sn(!1),ln=un;function fn(e,t){var r=e.type.contextTypes;if(!r)return un;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var n,a={};for(n in r)a[n]=t[n];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pn(e){return null!==(e=e.childContextTypes)&&void 0!==e}function vn(){on(hn),on(dn)}function mn(e,t,r){if(dn.current!==un)throw Error(s(168));cn(dn,t),cn(hn,r)}function yn(e,t,r){var i=e.stateNode;if(e=t.childContextTypes,"function"!==typeof i.getChildContext)return r;for(var a in i=i.getChildContext())if(!(a in e))throw Error(s(108,K(t)||"Unknown",a));return n({},r,i)}function gn(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||un,ln=dn.current,cn(dn,e),cn(hn,hn.current),!0}function bn(e,t,r){var i=e.stateNode;if(!i)throw Error(s(169));r?(e=yn(e,t,ln),i.__reactInternalMemoizedMergedChildContext=e,on(hn),on(dn),cn(dn,e)):on(hn),cn(hn,r)}var kn=null,xn=null,wn=a.unstable_runWithPriority,_n=a.unstable_scheduleCallback,On=a.unstable_cancelCallback,Tn=a.unstable_shouldYield,Sn=a.unstable_requestPaint,Cn=a.unstable_now,In=a.unstable_getCurrentPriorityLevel,Mn=a.unstable_ImmediatePriority,En=a.unstable_UserBlockingPriority,An=a.unstable_NormalPriority,Fn=a.unstable_LowPriority,Pn=a.unstable_IdlePriority,Bn={},Rn=void 0!==Sn?Sn:function(){},Vn=null,Ln=null,Dn=!1,qn=Cn(),Nn=1e4>qn?Cn:function(){return Cn()-qn};function Gn(){switch(In()){case Mn:return 99;case En:return 98;case An:return 97;case Fn:return 96;case Pn:return 95;default:throw Error(s(332))}}function jn(e){switch(e){case 99:return Mn;case 98:return En;case 97:return An;case 96:return Fn;case 95:return Pn;default:throw Error(s(332))}}function Un(e,t){return e=jn(e),wn(e,t)}function Hn(e,t,r){return e=jn(e),_n(e,t,r)}function zn(){if(null!==Ln){var e=Ln;Ln=null,On(e)}Wn()}function Wn(){if(!Dn&&null!==Vn){Dn=!0;var e=0;try{var t=Vn;Un(99,(function(){for(;e<t.length;e++){var r=t[e];do{r=r(!0)}while(null!==r)}})),Vn=null}catch(r){throw null!==Vn&&(Vn=Vn.slice(e+1)),_n(Mn,zn),r}finally{Dn=!1}}}var Kn=x.ReactCurrentBatchConfig;function Xn(e,t){if(e&&e.defaultProps){for(var r in t=n({},t),e=e.defaultProps)void 0===t[r]&&(t[r]=e[r]);return t}return t}var Yn=sn(null),Zn=null,Qn=null,$n=null;function Jn(){$n=Qn=Zn=null}function ea(e){var t=Yn.current;on(Yn),e.type._context._currentValue=t}function ta(e,t){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)===t){if(null===r||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,null!==r&&(r.childLanes|=t);e=e.return}}function ra(e,t){Zn=e,$n=Qn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ps=!0),e.firstContext=null)}function ia(e,t){if($n!==e&&!1!==t&&0!==t)if("number"===typeof t&&1073741823!==t||($n=e,t=1073741823),t={context:e,observedBits:t,next:null},null===Qn){if(null===Zn)throw Error(s(308));Qn=t,Zn.dependencies={lanes:0,firstContext:t,responders:null}}else Qn=Qn.next=t;return e._currentValue}var na=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function sa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ca(e,t){if(null!==(e=e.updateQueue)){var r=(e=e.shared).pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function ua(e,t){var r=e.updateQueue,i=e.alternate;if(null!==i&&r===(i=i.updateQueue)){var n=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var s={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};null===a?n=a=s:a=a.next=s,r=r.next}while(null!==r);null===a?n=a=t:a=a.next=t}else n=a=t;return r={baseState:i.baseState,firstBaseUpdate:n,lastBaseUpdate:a,shared:i.shared,effects:i.effects},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function da(e,t,r,i){var a=e.updateQueue;na=!1;var s=a.firstBaseUpdate,o=a.lastBaseUpdate,c=a.shared.pending;if(null!==c){a.shared.pending=null;var u=c,d=u.next;u.next=null,null===o?s=d:o.next=d,o=u;var h=e.alternate;if(null!==h){var l=(h=h.updateQueue).lastBaseUpdate;l!==o&&(null===l?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u)}}if(null!==s){for(l=a.baseState,o=0,h=d=u=null;;){c=s.lane;var f=s.eventTime;if((i&c)===c){null!==h&&(h=h.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,v=s;switch(c=t,f=r,v.tag){case 1:if("function"===typeof(p=v.payload)){l=p.call(f,l,c);break e}l=p;break e;case 3:p.flags=-4097&p.flags|64;case 0:if(null===(c="function"===typeof(p=v.payload)?p.call(f,l,c):p)||void 0===c)break e;l=n({},l,c);break e;case 2:na=!0}}null!==s.callback&&(e.flags|=32,null===(c=a.effects)?a.effects=[s]:c.push(s))}else f={eventTime:f,lane:c,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===h?(d=h=f,u=l):h=h.next=f,o|=c;if(null===(s=s.next)){if(null===(c=a.shared.pending))break;s=c.next,c.next=null,a.lastBaseUpdate=c,a.shared.pending=null}}null===h&&(u=l),a.baseState=u,a.firstBaseUpdate=d,a.lastBaseUpdate=h,Do|=o,e.lanes=o,e.memoizedState=l}}function ha(e,t,r){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],n=i.callback;if(null!==n){if(i.callback=null,i=r,"function"!==typeof n)throw Error(s(191,n));n.call(i)}}}var la=(new i.Component).refs;function fa(e,t,r,i){r=null===(r=r(i,t=e.memoizedState))||void 0===r?t:n({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}var pa={isMounted:function(e){return!!(e=e._reactInternals)&&Ze(e)===e},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=uc(),n=dc(e),a=oa(i,n);a.payload=t,void 0!==r&&null!==r&&(a.callback=r),ca(e,a),hc(e,n,i)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=uc(),n=dc(e),a=oa(i,n);a.tag=1,a.payload=t,void 0!==r&&null!==r&&(a.callback=r),ca(e,a),hc(e,n,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=uc(),i=dc(e),n=oa(r,i);n.tag=2,void 0!==t&&null!==t&&(n.callback=t),ca(e,n),hc(e,i,r)}};function va(e,t,r,i,n,a,s){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,a,s):!t.prototype||!t.prototype.isPureReactComponent||(!ci(r,i)||!ci(n,a))}function ma(e,t,r){var i=!1,n=un,a=t.contextType;return"object"===typeof a&&null!==a?a=ia(a):(n=pn(t)?ln:dn.current,a=(i=null!==(i=t.contextTypes)&&void 0!==i)?fn(e,n):un),t=new t(r,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=pa,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=a),t}function ya(e,t,r,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&pa.enqueueReplaceState(t,t.state,null)}function ga(e,t,r,i){var n=e.stateNode;n.props=r,n.state=e.memoizedState,n.refs=la,aa(e);var a=t.contextType;"object"===typeof a&&null!==a?n.context=ia(a):(a=pn(t)?ln:dn.current,n.context=fn(e,a)),da(e,r,n,i),n.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(fa(e,t,a,r),n.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(t=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),t!==n.state&&pa.enqueueReplaceState(n,n.state,null),da(e,r,n,i),n.state=e.memoizedState),"function"===typeof n.componentDidMount&&(e.flags|=4)}var ba=Array.isArray;function ka(e,t,r){if(null!==(e=r.ref)&&"function"!==typeof e&&"object"!==typeof e){if(r._owner){if(r=r._owner){if(1!==r.tag)throw Error(s(309));var i=r.stateNode}if(!i)throw Error(s(147,e));var n=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===n?t.ref:((t=function(e){var t=i.refs;t===la&&(t=i.refs={}),null===e?delete t[n]:t[n]=e})._stringRef=n,t)}if("string"!==typeof e)throw Error(s(284));if(!r._owner)throw Error(s(290,e))}return e}function xa(e,t){if("textarea"!==e.type)throw Error(s(31,"[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function wa(e){function t(t,r){if(e){var i=t.lastEffect;null!==i?(i.nextEffect=r,t.lastEffect=r):t.firstEffect=t.lastEffect=r,r.nextEffect=null,r.flags=8}}function r(r,i){if(!e)return null;for(;null!==i;)t(r,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function n(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function a(t,r,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<r?(t.flags=2,r):i:(t.flags=2,r):r}function o(t){return e&&null===t.alternate&&(t.flags=2),t}function c(e,t,r,i){return null===t||6!==t.tag?((t=Kc(r,e.mode,i)).return=e,t):((t=n(t,r)).return=e,t)}function u(e,t,r,i){return null!==t&&t.elementType===r.type?((i=n(t,r.props)).ref=ka(e,t,r),i.return=e,i):((i=Hc(r.type,r.key,r.props,null,e.mode,i)).ref=ka(e,t,r),i.return=e,i)}function d(e,t,r,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Xc(r,e.mode,i)).return=e,t):((t=n(t,r.children||[])).return=e,t)}function h(e,t,r,i,a){return null===t||7!==t.tag?((t=zc(r,e.mode,i,a)).return=e,t):((t=n(t,r)).return=e,t)}function l(e,t,r){if("string"===typeof t||"number"===typeof t)return(t=Kc(""+t,e.mode,r)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(r=Hc(t.type,t.key,t.props,null,e.mode,r)).ref=ka(e,null,t),r.return=e,r;case _:return(t=Xc(t,e.mode,r)).return=e,t}if(ba(t)||j(t))return(t=zc(t,e.mode,r,null)).return=e,t;xa(e,t)}return null}function f(e,t,r,i){var n=null!==t?t.key:null;if("string"===typeof r||"number"===typeof r)return null!==n?null:c(e,t,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return r.key===n?r.type===O?h(e,t,r.props.children,i,n):u(e,t,r,i):null;case _:return r.key===n?d(e,t,r,i):null}if(ba(r)||j(r))return null!==n?null:h(e,t,r,i,null);xa(e,r)}return null}function p(e,t,r,i,n){if("string"===typeof i||"number"===typeof i)return c(t,e=e.get(r)||null,""+i,n);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return e=e.get(null===i.key?r:i.key)||null,i.type===O?h(t,e,i.props.children,n,i.key):u(t,e,i,n);case _:return d(t,e=e.get(null===i.key?r:i.key)||null,i,n)}if(ba(i)||j(i))return h(t,e=e.get(r)||null,i,n,null);xa(t,i)}return null}function v(n,s,o,c){for(var u=null,d=null,h=s,v=s=0,m=null;null!==h&&v<o.length;v++){h.index>v?(m=h,h=null):m=h.sibling;var y=f(n,h,o[v],c);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(n,h),s=a(y,s,v),null===d?u=y:d.sibling=y,d=y,h=m}if(v===o.length)return r(n,h),u;if(null===h){for(;v<o.length;v++)null!==(h=l(n,o[v],c))&&(s=a(h,s,v),null===d?u=h:d.sibling=h,d=h);return u}for(h=i(n,h);v<o.length;v++)null!==(m=p(h,n,v,o[v],c))&&(e&&null!==m.alternate&&h.delete(null===m.key?v:m.key),s=a(m,s,v),null===d?u=m:d.sibling=m,d=m);return e&&h.forEach((function(e){return t(n,e)})),u}function m(n,o,c,u){var d=j(c);if("function"!==typeof d)throw Error(s(150));if(null==(c=d.call(c)))throw Error(s(151));for(var h=d=null,v=o,m=o=0,y=null,g=c.next();null!==v&&!g.done;m++,g=c.next()){v.index>m?(y=v,v=null):y=v.sibling;var b=f(n,v,g.value,u);if(null===b){null===v&&(v=y);break}e&&v&&null===b.alternate&&t(n,v),o=a(b,o,m),null===h?d=b:h.sibling=b,h=b,v=y}if(g.done)return r(n,v),d;if(null===v){for(;!g.done;m++,g=c.next())null!==(g=l(n,g.value,u))&&(o=a(g,o,m),null===h?d=g:h.sibling=g,h=g);return d}for(v=i(n,v);!g.done;m++,g=c.next())null!==(g=p(v,n,m,g.value,u))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),o=a(g,o,m),null===h?d=g:h.sibling=g,h=g);return e&&v.forEach((function(e){return t(n,e)})),d}return function(e,i,a,c){var u="object"===typeof a&&null!==a&&a.type===O&&null===a.key;u&&(a=a.props.children);var d="object"===typeof a&&null!==a;if(d)switch(a.$$typeof){case w:e:{for(d=a.key,u=i;null!==u;){if(u.key===d){switch(u.tag){case 7:if(a.type===O){r(e,u.sibling),(i=n(u,a.props.children)).return=e,e=i;break e}break;default:if(u.elementType===a.type){r(e,u.sibling),(i=n(u,a.props)).ref=ka(e,u,a),i.return=e,e=i;break e}}r(e,u);break}t(e,u),u=u.sibling}a.type===O?((i=zc(a.props.children,e.mode,c,a.key)).return=e,e=i):((c=Hc(a.type,a.key,a.props,null,e.mode,c)).ref=ka(e,i,a),c.return=e,e=c)}return o(e);case _:e:{for(u=a.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===a.containerInfo&&i.stateNode.implementation===a.implementation){r(e,i.sibling),(i=n(i,a.children||[])).return=e,e=i;break e}r(e,i);break}t(e,i),i=i.sibling}(i=Xc(a,e.mode,c)).return=e,e=i}return o(e)}if("string"===typeof a||"number"===typeof a)return a=""+a,null!==i&&6===i.tag?(r(e,i.sibling),(i=n(i,a)).return=e,e=i):(r(e,i),(i=Kc(a,e.mode,c)).return=e,e=i),o(e);if(ba(a))return v(e,i,a,c);if(j(a))return m(e,i,a,c);if(d&&xa(e,a),"undefined"===typeof a&&!u)switch(e.tag){case 1:case 22:case 0:case 11:case 15:throw Error(s(152,K(e.type)||"Component"))}return r(e,i)}}var _a=wa(!0),Oa=wa(!1),Ta={},Sa=sn(Ta),Ca=sn(Ta),Ia=sn(Ta);function Ma(e){if(e===Ta)throw Error(s(174));return e}function Ea(e,t){switch(cn(Ia,t),cn(Ca,e),cn(Sa,Ta),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:pe(null,"");break;default:t=pe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}on(Sa),cn(Sa,t)}function Aa(){on(Sa),on(Ca),on(Ia)}function Fa(e){Ma(Ia.current);var t=Ma(Sa.current),r=pe(t,e.type);t!==r&&(cn(Ca,e),cn(Sa,r))}function Pa(e){Ca.current===e&&(on(Sa),on(Ca))}var Ba=sn(0);function Ra(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||"$?"===r.data||"$!"===r.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(64&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Va=null,La=null,Da=!1;function qa(e,t){var r=Gc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,null!==e.lastEffect?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Na(e,t){switch(e.tag){case 5:var r=e.type;return null!==(t=1!==t.nodeType||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,!0);case 13:default:return!1}}function Ga(e){if(Da){var t=La;if(t){var r=t;if(!Na(e,t)){if(!(t=Hi(r.nextSibling))||!Na(e,t))return e.flags=-1025&e.flags|2,Da=!1,void(Va=e);qa(Va,r)}Va=e,La=Hi(t.firstChild)}else e.flags=-1025&e.flags|2,Da=!1,Va=e}}function ja(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Va=e}function Ua(e){if(e!==Va)return!1;if(!Da)return ja(e),Da=!0,!1;var t=e.type;if(5!==e.tag||"head"!==t&&"body"!==t&&!Ni(t,e.memoizedProps))for(t=La;t;)qa(e,t),t=Hi(t.nextSibling);if(ja(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r){if(0===t){La=Hi(e.nextSibling);break e}t--}else"$"!==r&&"$!"!==r&&"$?"!==r||t++}e=e.nextSibling}La=null}}else La=Va?Hi(e.stateNode.nextSibling):null;return!0}function Ha(){La=Va=null,Da=!1}var za=[];function Wa(){for(var e=0;e<za.length;e++)za[e]._workInProgressVersionPrimary=null;za.length=0}var Ka=x.ReactCurrentDispatcher,Xa=x.ReactCurrentBatchConfig,Ya=0,Za=null,Qa=null,$a=null,Ja=!1,es=!1;function ts(){throw Error(s(321))}function rs(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!si(e[r],t[r]))return!1;return!0}function is(e,t,r,i,n,a){if(Ya=a,Za=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ka.current=null===e||null===e.memoizedState?Ms:Es,e=r(i,n),es){a=0;do{if(es=!1,!(25>a))throw Error(s(301));a+=1,$a=Qa=null,t.updateQueue=null,Ka.current=As,e=r(i,n)}while(es)}if(Ka.current=Is,t=null!==Qa&&null!==Qa.next,Ya=0,$a=Qa=Za=null,Ja=!1,t)throw Error(s(300));return e}function ns(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===$a?Za.memoizedState=$a=e:$a=$a.next=e,$a}function as(){if(null===Qa){var e=Za.alternate;e=null!==e?e.memoizedState:null}else e=Qa.next;var t=null===$a?Za.memoizedState:$a.next;if(null!==t)$a=t,Qa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(Qa=e).memoizedState,baseState:Qa.baseState,baseQueue:Qa.baseQueue,queue:Qa.queue,next:null},null===$a?Za.memoizedState=$a=e:$a=$a.next=e}return $a}function ss(e,t){return"function"===typeof t?t(e):t}function os(e){var t=as(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var i=Qa,n=i.baseQueue,a=r.pending;if(null!==a){if(null!==n){var o=n.next;n.next=a.next,a.next=o}i.baseQueue=n=a,r.pending=null}if(null!==n){n=n.next,i=i.baseState;var c=o=a=null,u=n;do{var d=u.lane;if((Ya&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null}),i=u.eagerReducer===e?u.eagerState:e(i,u.action);else{var h={lane:d,action:u.action,eagerReducer:u.eagerReducer,eagerState:u.eagerState,next:null};null===c?(o=c=h,a=i):c=c.next=h,Za.lanes|=d,Do|=d}u=u.next}while(null!==u&&u!==n);null===c?a=i:c.next=o,si(i,t.memoizedState)||(Ps=!0),t.memoizedState=i,t.baseState=a,t.baseQueue=c,r.lastRenderedState=i}return[t.memoizedState,r.dispatch]}function cs(e){var t=as(),r=t.queue;if(null===r)throw Error(s(311));r.lastRenderedReducer=e;var i=r.dispatch,n=r.pending,a=t.memoizedState;if(null!==n){r.pending=null;var o=n=n.next;do{a=e(a,o.action),o=o.next}while(o!==n);si(a,t.memoizedState)||(Ps=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),r.lastRenderedState=a}return[a,i]}function us(e,t,r){var i=t._getVersion;i=i(t._source);var n=t._workInProgressVersionPrimary;if(null!==n?e=n===i:(e=e.mutableReadLanes,(e=(Ya&e)===e)&&(t._workInProgressVersionPrimary=i,za.push(t))),e)return r(t._source);throw za.push(t),Error(s(350))}function ds(e,t,r,i){var n=Eo;if(null===n)throw Error(s(349));var a=t._getVersion,o=a(t._source),c=Ka.current,u=c.useState((function(){return us(n,t,r)})),d=u[1],h=u[0];u=$a;var l=e.memoizedState,f=l.refs,p=f.getSnapshot,v=l.source;l=l.subscribe;var m=Za;return e.memoizedState={refs:f,source:t,subscribe:i},c.useEffect((function(){f.getSnapshot=r,f.setSnapshot=d;var e=a(t._source);if(!si(o,e)){e=r(t._source),si(h,e)||(d(e),e=dc(m),n.mutableReadLanes|=e&n.pendingLanes),e=n.mutableReadLanes,n.entangledLanes|=e;for(var i=n.entanglements,s=e;0<s;){var c=31-Ht(s),u=1<<c;i[c]|=e,s&=~u}}}),[r,t,i]),c.useEffect((function(){return i(t._source,(function(){var e=f.getSnapshot,r=f.setSnapshot;try{r(e(t._source));var i=dc(m);n.mutableReadLanes|=i&n.pendingLanes}catch(a){r((function(){throw a}))}}))}),[t,i]),si(p,r)&&si(v,t)&&si(l,i)||((e={pending:null,dispatch:null,lastRenderedReducer:ss,lastRenderedState:h}).dispatch=d=Cs.bind(null,Za,e),u.queue=e,u.baseQueue=null,h=us(n,t,r),u.memoizedState=u.baseState=h),h}function hs(e,t,r){return ds(as(),e,t,r)}function ls(e){var t=ns();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e=(e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ss,lastRenderedState:e}).dispatch=Cs.bind(null,Za,e),[t.memoizedState,e]}function fs(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},null===(t=Za.updateQueue)?(t={lastEffect:null},Za.updateQueue=t,t.lastEffect=e.next=e):null===(r=t.lastEffect)?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e),e}function ps(e){return e={current:e},ns().memoizedState=e}function vs(){return as().memoizedState}function ms(e,t,r,i){var n=ns();Za.flags|=e,n.memoizedState=fs(1|t,r,void 0,void 0===i?null:i)}function ys(e,t,r,i){var n=as();i=void 0===i?null:i;var a=void 0;if(null!==Qa){var s=Qa.memoizedState;if(a=s.destroy,null!==i&&rs(i,s.deps))return void fs(t,r,a,i)}Za.flags|=e,n.memoizedState=fs(1|t,r,a,i)}function gs(e,t){return ms(516,4,e,t)}function bs(e,t){return ys(516,4,e,t)}function ks(e,t){return ys(4,2,e,t)}function xs(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ws(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ys(4,2,xs.bind(null,t,e),r)}function _s(){}function Os(e,t){var r=as();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&rs(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Ts(e,t){var r=as();t=void 0===t?null:t;var i=r.memoizedState;return null!==i&&null!==t&&rs(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Ss(e,t){var r=Gn();Un(98>r?98:r,(function(){e(!0)})),Un(97<r?97:r,(function(){var r=Xa.transition;Xa.transition=1;try{e(!1),t()}finally{Xa.transition=r}}))}function Cs(e,t,r){var i=uc(),n=dc(e),a={lane:n,action:r,eagerReducer:null,eagerState:null,next:null},s=t.pending;if(null===s?a.next=a:(a.next=s.next,s.next=a),t.pending=a,s=e.alternate,e===Za||null!==s&&s===Za)es=Ja=!0;else{if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var o=t.lastRenderedState,c=s(o,r);if(a.eagerReducer=s,a.eagerState=c,si(c,o))return}catch(u){}hc(e,n,i)}}var Is={readContext:ia,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useOpaqueIdentifier:ts,unstable_isNewReconciler:!1},Ms={readContext:ia,useCallback:function(e,t){return ns().memoizedState=[e,void 0===t?null:t],e},useContext:ia,useEffect:gs,useImperativeHandle:function(e,t,r){return r=null!==r&&void 0!==r?r.concat([e]):null,ms(4,2,xs.bind(null,t,e),r)},useLayoutEffect:function(e,t){return ms(4,2,e,t)},useMemo:function(e,t){var r=ns();return t=void 0===t?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=ns();return t=void 0!==r?r(t):t,i.memoizedState=i.baseState=t,e=(e=i.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t}).dispatch=Cs.bind(null,Za,e),[i.memoizedState,e]},useRef:ps,useState:ls,useDebugValue:_s,useDeferredValue:function(e){var t=ls(e),r=t[0],i=t[1];return gs((function(){var t=Xa.transition;Xa.transition=1;try{i(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=ls(!1),t=e[0];return ps(e=Ss.bind(null,e[1])),[e,t]},useMutableSource:function(e,t,r){var i=ns();return i.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},ds(i,e,t,r)},useOpaqueIdentifier:function(){if(Da){var e=!1,t=function(e){return{$$typeof:R,toString:e,valueOf:e}}((function(){throw e||(e=!0,r("r:"+(Wi++).toString(36))),Error(s(355))})),r=ls(t)[1];return 0===(2&Za.mode)&&(Za.flags|=516,fs(5,(function(){r("r:"+(Wi++).toString(36))}),void 0,null)),t}return ls(t="r:"+(Wi++).toString(36)),t},unstable_isNewReconciler:!1},Es={readContext:ia,useCallback:Os,useContext:ia,useEffect:bs,useImperativeHandle:ws,useLayoutEffect:ks,useMemo:Ts,useReducer:os,useRef:vs,useState:function(){return os(ss)},useDebugValue:_s,useDeferredValue:function(e){var t=os(ss),r=t[0],i=t[1];return bs((function(){var t=Xa.transition;Xa.transition=1;try{i(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=os(ss)[0];return[vs().current,e]},useMutableSource:hs,useOpaqueIdentifier:function(){return os(ss)[0]},unstable_isNewReconciler:!1},As={readContext:ia,useCallback:Os,useContext:ia,useEffect:bs,useImperativeHandle:ws,useLayoutEffect:ks,useMemo:Ts,useReducer:cs,useRef:vs,useState:function(){return cs(ss)},useDebugValue:_s,useDeferredValue:function(e){var t=cs(ss),r=t[0],i=t[1];return bs((function(){var t=Xa.transition;Xa.transition=1;try{i(e)}finally{Xa.transition=t}}),[e]),r},useTransition:function(){var e=cs(ss)[0];return[vs().current,e]},useMutableSource:hs,useOpaqueIdentifier:function(){return cs(ss)[0]},unstable_isNewReconciler:!1},Fs=x.ReactCurrentOwner,Ps=!1;function Bs(e,t,r,i){t.child=null===e?Oa(t,null,r,i):_a(t,e.child,r,i)}function Rs(e,t,r,i,n){r=r.render;var a=t.ref;return ra(t,n),i=is(e,t,r,i,a,n),null===e||Ps?(t.flags|=1,Bs(e,t,i,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,to(e,t,n))}function Vs(e,t,r,i,n,a){if(null===e){var s=r.type;return"function"!==typeof s||jc(s)||void 0!==s.defaultProps||null!==r.compare||void 0!==r.defaultProps?((e=Hc(r.type,null,i,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Ls(e,t,s,i,n,a))}return s=e.child,0===(n&a)&&(n=s.memoizedProps,(r=null!==(r=r.compare)?r:ci)(n,i)&&e.ref===t.ref)?to(e,t,a):(t.flags|=1,(e=Uc(s,i)).ref=t.ref,e.return=t,t.child=e)}function Ls(e,t,r,i,n,a){if(null!==e&&ci(e.memoizedProps,i)&&e.ref===t.ref){if(Ps=!1,0===(a&n))return t.lanes=e.lanes,to(e,t,a);0!==(16384&e.flags)&&(Ps=!0)}return Ns(e,t,r,i,a)}function Ds(e,t,r){var i=t.pendingProps,n=i.children,a=null!==e?e.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&t.mode))t.memoizedState={baseLanes:0},bc(t,r);else{if(0===(1073741824&r))return e=null!==a?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},bc(t,e),null;t.memoizedState={baseLanes:0},bc(t,null!==a?a.baseLanes:r)}else null!==a?(i=a.baseLanes|r,t.memoizedState=null):i=r,bc(t,i);return Bs(e,t,n,r),t.child}function qs(e,t){var r=t.ref;(null===e&&null!==r||null!==e&&e.ref!==r)&&(t.flags|=128)}function Ns(e,t,r,i,n){var a=pn(r)?ln:dn.current;return a=fn(t,a),ra(t,n),r=is(e,t,r,i,a,n),null===e||Ps?(t.flags|=1,Bs(e,t,r,n),t.child):(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~n,to(e,t,n))}function Gs(e,t,r,i,n){if(pn(r)){var a=!0;gn(t)}else a=!1;if(ra(t,n),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ma(t,r,i),ga(t,r,i,n),i=!0;else if(null===e){var s=t.stateNode,o=t.memoizedProps;s.props=o;var c=s.context,u=r.contextType;"object"===typeof u&&null!==u?u=ia(u):u=fn(t,u=pn(r)?ln:dn.current);var d=r.getDerivedStateFromProps,h="function"===typeof d||"function"===typeof s.getSnapshotBeforeUpdate;h||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==i||c!==u)&&ya(t,s,i,u),na=!1;var l=t.memoizedState;s.state=l,da(t,i,s,n),c=t.memoizedState,o!==i||l!==c||hn.current||na?("function"===typeof d&&(fa(t,r,d,i),c=t.memoizedState),(o=na||va(t,r,o,i,l,c,u))?(h||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||("function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount()),"function"===typeof s.componentDidMount&&(t.flags|=4)):("function"===typeof s.componentDidMount&&(t.flags|=4),t.memoizedProps=i,t.memoizedState=c),s.props=i,s.state=c,s.context=u,i=o):("function"===typeof s.componentDidMount&&(t.flags|=4),i=!1)}else{s=t.stateNode,sa(e,t),o=t.memoizedProps,u=t.type===t.elementType?o:Xn(t.type,o),s.props=u,h=t.pendingProps,l=s.context,"object"===typeof(c=r.contextType)&&null!==c?c=ia(c):c=fn(t,c=pn(r)?ln:dn.current);var f=r.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof s.getSnapshotBeforeUpdate)||"function"!==typeof s.UNSAFE_componentWillReceiveProps&&"function"!==typeof s.componentWillReceiveProps||(o!==h||l!==c)&&ya(t,s,i,c),na=!1,l=t.memoizedState,s.state=l,da(t,i,s,n);var p=t.memoizedState;o!==h||l!==p||hn.current||na?("function"===typeof f&&(fa(t,r,f,i),p=t.memoizedState),(u=na||va(t,r,u,i,l,p,c))?(d||"function"!==typeof s.UNSAFE_componentWillUpdate&&"function"!==typeof s.componentWillUpdate||("function"===typeof s.componentWillUpdate&&s.componentWillUpdate(i,p,c),"function"===typeof s.UNSAFE_componentWillUpdate&&s.UNSAFE_componentWillUpdate(i,p,c)),"function"===typeof s.componentDidUpdate&&(t.flags|=4),"function"===typeof s.getSnapshotBeforeUpdate&&(t.flags|=256)):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=256),t.memoizedProps=i,t.memoizedState=p),s.props=i,s.state=p,s.context=c,i=u):("function"!==typeof s.componentDidUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=4),"function"!==typeof s.getSnapshotBeforeUpdate||o===e.memoizedProps&&l===e.memoizedState||(t.flags|=256),i=!1)}return js(e,t,r,i,a,n)}function js(e,t,r,i,n,a){qs(e,t);var s=0!==(64&t.flags);if(!i&&!s)return n&&bn(t,r,!1),to(e,t,a);i=t.stateNode,Fs.current=t;var o=s&&"function"!==typeof r.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&s?(t.child=_a(t,e.child,null,a),t.child=_a(t,null,o,a)):Bs(e,t,o,a),t.memoizedState=i.state,n&&bn(t,r,!0),t.child}function Us(e){var t=e.stateNode;t.pendingContext?mn(0,t.pendingContext,t.pendingContext!==t.context):t.context&&mn(0,t.context,!1),Ea(e,t.containerInfo)}var Hs,zs,Ws,Ks={dehydrated:null,retryLane:0};function Xs(e,t,r){var i,n=t.pendingProps,a=Ba.current,s=!1;return(i=0!==(64&t.flags))||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(s=!0,t.flags&=-65):null!==e&&null===e.memoizedState||void 0===n.fallback||!0===n.unstable_avoidThisFallback||(a|=1),cn(Ba,1&a),null===e?(void 0!==n.fallback&&Ga(t),e=n.children,a=n.fallback,s?(e=Ys(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Ks,e):"number"===typeof n.unstable_expectedLoadTime?(e=Ys(t,e,a,r),t.child.memoizedState={baseLanes:r},t.memoizedState=Ks,t.lanes=33554432,e):((r=Wc({mode:"visible",children:e},t.mode,r,null)).return=t,t.child=r)):(e.memoizedState,s?(n=Qs(e,t,n.children,n.fallback,r),s=t.child,a=e.child.memoizedState,s.memoizedState=null===a?{baseLanes:r}:{baseLanes:a.baseLanes|r},s.childLanes=e.childLanes&~r,t.memoizedState=Ks,n):(r=Zs(e,t,n.children,r),t.memoizedState=null,r))}function Ys(e,t,r,i){var n=e.mode,a=e.child;return t={mode:"hidden",children:t},0===(2&n)&&null!==a?(a.childLanes=0,a.pendingProps=t):a=Wc(t,n,0,null),r=zc(r,n,i,null),a.return=e,r.return=e,a.sibling=r,e.child=a,r}function Zs(e,t,r,i){var n=e.child;return e=n.sibling,r=Uc(n,{mode:"visible",children:r}),0===(2&t.mode)&&(r.lanes=i),r.return=t,r.sibling=null,null!==e&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function Qs(e,t,r,i,n){var a=t.mode,s=e.child;e=s.sibling;var o={mode:"hidden",children:r};return 0===(2&a)&&t.child!==s?((r=t.child).childLanes=0,r.pendingProps=o,null!==(s=r.lastEffect)?(t.firstEffect=r.firstEffect,t.lastEffect=s,s.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Uc(s,o),null!==e?i=Uc(e,i):(i=zc(i,a,n,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,i}function $s(e,t){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ta(e.return,t)}function Js(e,t,r,i,n,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:n,lastEffect:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=r,s.tailMode=n,s.lastEffect=a)}function eo(e,t,r){var i=t.pendingProps,n=i.revealOrder,a=i.tail;if(Bs(e,t,i.children,r),0!==(2&(i=Ba.current)))i=1&i|2,t.flags|=64;else{if(null!==e&&0!==(64&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&$s(e,r);else if(19===e.tag)$s(e,r);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(cn(Ba,i),0===(2&t.mode))t.memoizedState=null;else switch(n){case"forwards":for(r=t.child,n=null;null!==r;)null!==(e=r.alternate)&&null===Ra(e)&&(n=r),r=r.sibling;null===(r=n)?(n=t.child,t.child=null):(n=r.sibling,r.sibling=null),Js(t,!1,n,r,a,t.lastEffect);break;case"backwards":for(r=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===Ra(e)){t.child=n;break}e=n.sibling,n.sibling=r,r=n,n=e}Js(t,!0,r,null,a,t.lastEffect);break;case"together":Js(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function to(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Do|=t.lanes,0!==(r&t.childLanes)){if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(r=Uc(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=Uc(e,e.pendingProps)).return=t;r.sibling=null}return t.child}return null}function ro(e,t){if(!Da)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;null!==r;)null!==r.alternate&&(i=r),r=r.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function io(e,t,r){var i=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return pn(t.type)&&vn(),null;case 3:return Aa(),on(hn),on(dn),Wa(),(i=t.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Ua(t)?t.flags|=4:i.hydrate||(t.flags|=256)),null;case 5:Pa(t);var a=Ma(Ia.current);if(r=t.type,null!==e&&null!=t.stateNode)zs(e,t,r,i),e.ref!==t.ref&&(t.flags|=128);else{if(!i){if(null===t.stateNode)throw Error(s(166));return null}if(e=Ma(Sa.current),Ua(t)){i=t.stateNode,r=t.type;var o=t.memoizedProps;switch(i[Xi]=t,i[Yi]=o,r){case"dialog":Si("cancel",i),Si("close",i);break;case"iframe":case"object":case"embed":Si("load",i);break;case"video":case"audio":for(e=0;e<wi.length;e++)Si(wi[e],i);break;case"source":Si("error",i);break;case"img":case"image":case"link":Si("error",i),Si("load",i);break;case"details":Si("toggle",i);break;case"input":ee(i,o),Si("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},Si("invalid",i);break;case"textarea":ce(i,o),Si("invalid",i)}for(var u in Oe(r,o),e=null,o)o.hasOwnProperty(u)&&(a=o[u],"children"===u?"string"===typeof a?i.textContent!==a&&(e=["children",a]):"number"===typeof a&&i.textContent!==""+a&&(e=["children",""+a]):c.hasOwnProperty(u)&&null!=a&&"onScroll"===u&&Si("scroll",i));switch(r){case"input":Z(i),ie(i,o,!0);break;case"textarea":Z(i),de(i);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(i.onclick=Vi)}i=e,t.updateQueue=i,null!==i&&(t.flags|=4)}else{switch(u=9===a.nodeType?a:a.ownerDocument,e===he&&(e=fe(r)),e===he?"script"===r?((e=u.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=u.createElement(r,{is:i.is}):(e=u.createElement(r),"select"===r&&(u=e,i.multiple?u.multiple=!0:i.size&&(u.size=i.size))):e=u.createElementNS(e,r),e[Xi]=t,e[Yi]=i,Hs(e,t),t.stateNode=e,u=Te(r,i),r){case"dialog":Si("cancel",e),Si("close",e),a=i;break;case"iframe":case"object":case"embed":Si("load",e),a=i;break;case"video":case"audio":for(a=0;a<wi.length;a++)Si(wi[a],e);a=i;break;case"source":Si("error",e),a=i;break;case"img":case"image":case"link":Si("error",e),Si("load",e),a=i;break;case"details":Si("toggle",e),a=i;break;case"input":ee(e,i),a=J(e,i),Si("invalid",e);break;case"option":a=ae(e,i);break;case"select":e._wrapperState={wasMultiple:!!i.multiple},a=n({},i,{value:void 0}),Si("invalid",e);break;case"textarea":ce(e,i),a=oe(e,i),Si("invalid",e);break;default:a=i}Oe(r,a);var d=a;for(o in d)if(d.hasOwnProperty(o)){var h=d[o];"style"===o?we(e,h):"dangerouslySetInnerHTML"===o?null!=(h=h?h.__html:void 0)&&ye(e,h):"children"===o?"string"===typeof h?("textarea"!==r||""!==h)&&ge(e,h):"number"===typeof h&&ge(e,""+h):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(c.hasOwnProperty(o)?null!=h&&"onScroll"===o&&Si("scroll",e):null!=h&&k(e,o,h,u))}switch(r){case"input":Z(e),ie(e,i,!1);break;case"textarea":Z(e),de(e);break;case"option":null!=i.value&&e.setAttribute("value",""+X(i.value));break;case"select":e.multiple=!!i.multiple,null!=(o=i.value)?se(e,!!i.multiple,o,!1):null!=i.defaultValue&&se(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Vi)}qi(r,i)&&(t.flags|=4)}null!==t.ref&&(t.flags|=128)}return null;case 6:if(e&&null!=t.stateNode)Ws(0,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));r=Ma(Ia.current),Ma(Sa.current),Ua(t)?(i=t.stateNode,r=t.memoizedProps,i[Xi]=t,i.nodeValue!==r&&(t.flags|=4)):((i=(9===r.nodeType?r:r.ownerDocument).createTextNode(i))[Xi]=t,t.stateNode=i)}return null;case 13:return on(Ba),i=t.memoizedState,0!==(64&t.flags)?(t.lanes=r,t):(i=null!==i,r=!1,null===e?void 0!==t.memoizedProps.fallback&&Ua(t):r=null!==e.memoizedState,i&&!r&&0!==(2&t.mode)&&(null===e&&!0!==t.memoizedProps.unstable_avoidThisFallback||0!==(1&Ba.current)?0===Ro&&(Ro=3):(0!==Ro&&3!==Ro||(Ro=4),null===Eo||0===(134217727&Do)&&0===(134217727&qo)||vc(Eo,Fo))),(i||r)&&(t.flags|=4),null);case 4:return Aa(),null===e&&Ii(t.stateNode.containerInfo),null;case 10:return ea(t),null;case 17:return pn(t.type)&&vn(),null;case 19:if(on(Ba),null===(i=t.memoizedState))return null;if(o=0!==(64&t.flags),null===(u=i.rendering))if(o)ro(i,!1);else{if(0!==Ro||null!==e&&0!==(64&e.flags))for(e=t.child;null!==e;){if(null!==(u=Ra(e))){for(t.flags|=64,ro(i,!1),null!==(o=u.updateQueue)&&(t.updateQueue=o,t.flags|=4),null===i.lastEffect&&(t.firstEffect=null),t.lastEffect=i.lastEffect,i=r,r=t.child;null!==r;)e=i,(o=r).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(u=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return cn(Ba,1&Ba.current|2),t.child}e=e.sibling}null!==i.tail&&Nn()>Uo&&(t.flags|=64,o=!0,ro(i,!1),t.lanes=33554432)}else{if(!o)if(null!==(e=Ra(u))){if(t.flags|=64,o=!0,null!==(r=e.updateQueue)&&(t.updateQueue=r,t.flags|=4),ro(i,!0),null===i.tail&&"hidden"===i.tailMode&&!u.alternate&&!Da)return null!==(t=t.lastEffect=i.lastEffect)&&(t.nextEffect=null),null}else 2*Nn()-i.renderingStartTime>Uo&&1073741824!==r&&(t.flags|=64,o=!0,ro(i,!1),t.lanes=33554432);i.isBackwards?(u.sibling=t.child,t.child=u):(null!==(r=i.last)?r.sibling=u:t.child=u,i.last=u)}return null!==i.tail?(r=i.tail,i.rendering=r,i.tail=r.sibling,i.lastEffect=t.lastEffect,i.renderingStartTime=Nn(),r.sibling=null,t=Ba.current,cn(Ba,o?1&t|2:1&t),r):null;case 23:case 24:return kc(),null!==e&&null!==e.memoizedState!==(null!==t.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(t.flags|=4),null}throw Error(s(156,t.tag))}function no(e){switch(e.tag){case 1:pn(e.type)&&vn();var t=e.flags;return 4096&t?(e.flags=-4097&t|64,e):null;case 3:if(Aa(),on(hn),on(dn),Wa(),0!==(64&(t=e.flags)))throw Error(s(285));return e.flags=-4097&t|64,e;case 5:return Pa(e),null;case 13:return on(Ba),4096&(t=e.flags)?(e.flags=-4097&t|64,e):null;case 19:return on(Ba),null;case 4:return Aa(),null;case 10:return ea(e),null;case 23:case 24:return kc(),null;default:return null}}function ao(e,t){try{var r="",i=t;do{r+=W(i),i=i.return}while(i);var n=r}catch(a){n="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:n}}function so(e,t){try{console.error(t.value)}catch(r){setTimeout((function(){throw r}))}}Hs=function(e,t){for(var r=t.child;null!==r;){if(5===r.tag||6===r.tag)e.appendChild(r.stateNode);else if(4!==r.tag&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},zs=function(e,t,r,i){var a=e.memoizedProps;if(a!==i){e=t.stateNode,Ma(Sa.current);var s,o=null;switch(r){case"input":a=J(e,a),i=J(e,i),o=[];break;case"option":a=ae(e,a),i=ae(e,i),o=[];break;case"select":a=n({},a,{value:void 0}),i=n({},i,{value:void 0}),o=[];break;case"textarea":a=oe(e,a),i=oe(e,i),o=[];break;default:"function"!==typeof a.onClick&&"function"===typeof i.onClick&&(e.onclick=Vi)}for(h in Oe(r,i),r=null,a)if(!i.hasOwnProperty(h)&&a.hasOwnProperty(h)&&null!=a[h])if("style"===h){var u=a[h];for(s in u)u.hasOwnProperty(s)&&(r||(r={}),r[s]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(c.hasOwnProperty(h)?o||(o=[]):(o=o||[]).push(h,null));for(h in i){var d=i[h];if(u=null!=a?a[h]:void 0,i.hasOwnProperty(h)&&d!==u&&(null!=d||null!=u))if("style"===h)if(u){for(s in u)!u.hasOwnProperty(s)||d&&d.hasOwnProperty(s)||(r||(r={}),r[s]="");for(s in d)d.hasOwnProperty(s)&&u[s]!==d[s]&&(r||(r={}),r[s]=d[s])}else r||(o||(o=[]),o.push(h,r)),r=d;else"dangerouslySetInnerHTML"===h?(d=d?d.__html:void 0,u=u?u.__html:void 0,null!=d&&u!==d&&(o=o||[]).push(h,d)):"children"===h?"string"!==typeof d&&"number"!==typeof d||(o=o||[]).push(h,""+d):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(c.hasOwnProperty(h)?(null!=d&&"onScroll"===h&&Si("scroll",e),o||u===d||(o=[])):"object"===typeof d&&null!==d&&d.$$typeof===R?d.toString():(o=o||[]).push(h,d))}r&&(o=o||[]).push("style",r);var h=o;(t.updateQueue=h)&&(t.flags|=4)}},Ws=function(e,t,r,i){r!==i&&(t.flags|=4)};var oo="function"===typeof WeakMap?WeakMap:Map;function co(e,t,r){(r=oa(-1,r)).tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){Ko||(Ko=!0,Xo=i),so(0,t)},r}function uo(e,t,r){(r=oa(-1,r)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var n=t.value;r.payload=function(){return so(0,t),i(n)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(r.callback=function(){"function"!==typeof i&&(null===Yo?Yo=new Set([this]):Yo.add(this),so(0,t));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),r}var ho="function"===typeof WeakSet?WeakSet:Set;function lo(e){var t=e.ref;if(null!==t)if("function"===typeof t)try{t(null)}catch(r){Lc(e,r)}else t.current=null}function fo(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&t.flags&&null!==e){var r=e.memoizedProps,i=e.memoizedState;t=(e=t.stateNode).getSnapshotBeforeUpdate(t.elementType===t.type?r:Xn(t.type,r),i),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:return void(256&t.flags&&Ui(t.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(s(163))}function po(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{if(3===(3&e.tag)){var i=e.create;e.destroy=i()}e=e.next}while(e!==t)}if(null!==(t=null!==(t=r.updateQueue)?t.lastEffect:null)){e=t=t.next;do{var n=e;i=n.next,0!==(4&(n=n.tag))&&0!==(1&n)&&(Bc(r,e),Pc(r,e)),e=i}while(e!==t)}return;case 1:return e=r.stateNode,4&r.flags&&(null===t?e.componentDidMount():(i=r.elementType===r.type?t.memoizedProps:Xn(r.type,t.memoizedProps),e.componentDidUpdate(i,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),void(null!==(t=r.updateQueue)&&ha(r,t,e));case 3:if(null!==(t=r.updateQueue)){if(e=null,null!==r.child)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode}ha(r,t,e)}return;case 5:return e=r.stateNode,void(null===t&&4&r.flags&&qi(r.type,r.memoizedProps)&&e.focus());case 6:case 4:case 12:return;case 13:return void(null===r.memoizedState&&(r=r.alternate,null!==r&&(r=r.memoizedState,null!==r&&(r=r.dehydrated,null!==r&&wt(r)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(s(163))}function vo(e,t){for(var r=e;;){if(5===r.tag){var i=r.stateNode;if(t)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=r.stateNode;var n=r.memoizedProps.style;n=void 0!==n&&null!==n&&n.hasOwnProperty("display")?n.display:null,i.style.display=xe("display",n)}}else if(6===r.tag)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((23!==r.tag&&24!==r.tag||null===r.memoizedState||r===e)&&null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function mo(e,t){if(xn&&"function"===typeof xn.onCommitFiberUnmount)try{xn.onCommitFiberUnmount(kn,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,n=i.destroy;if(i=i.tag,void 0!==n)if(0!==(4&i))Bc(t,r);else{i=t;try{n()}catch(a){Lc(i,a)}}r=r.next}while(r!==e)}break;case 1:if(lo(t),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Lc(t,a)}break;case 5:lo(t);break;case 4:wo(e,t)}}function yo(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function go(e){return 5===e.tag||3===e.tag||4===e.tag}function bo(e){e:{for(var t=e.return;null!==t;){if(go(t))break e;t=t.return}throw Error(s(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var i=!1;break;case 3:case 4:t=t.containerInfo,i=!0;break;default:throw Error(s(161))}16&r.flags&&(ge(t,""),r.flags&=-17);e:t:for(r=e;;){for(;null===r.sibling;){if(null===r.return||go(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;5!==r.tag&&6!==r.tag&&18!==r.tag;){if(2&r.flags)continue t;if(null===r.child||4===r.tag)continue t;r.child.return=r,r=r.child}if(!(2&r.flags)){r=r.stateNode;break e}}i?ko(e,r,t):xo(e,r,t)}function ko(e,t,r){var i=e.tag,n=5===i||6===i;if(n)e=n?e.stateNode:e.stateNode.instance,t?8===r.nodeType?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(8===r.nodeType?(t=r.parentNode).insertBefore(e,r):(t=r).appendChild(e),null!==(r=r._reactRootContainer)&&void 0!==r||null!==t.onclick||(t.onclick=Vi));else if(4!==i&&null!==(e=e.child))for(ko(e,t,r),e=e.sibling;null!==e;)ko(e,t,r),e=e.sibling}function xo(e,t,r){var i=e.tag,n=5===i||6===i;if(n)e=n?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==i&&null!==(e=e.child))for(xo(e,t,r),e=e.sibling;null!==e;)xo(e,t,r),e=e.sibling}function wo(e,t){for(var r,i,n=t,a=!1;;){if(!a){a=n.return;e:for(;;){if(null===a)throw Error(s(160));switch(r=a.stateNode,a.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}a=a.return}a=!0}if(5===n.tag||6===n.tag){e:for(var o=e,c=n,u=c;;)if(mo(o,u),null!==u.child&&4!==u.tag)u.child.return=u,u=u.child;else{if(u===c)break e;for(;null===u.sibling;){if(null===u.return||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}i?(o=r,c=n.stateNode,8===o.nodeType?o.parentNode.removeChild(c):o.removeChild(c)):r.removeChild(n.stateNode)}else if(4===n.tag){if(null!==n.child){r=n.stateNode.containerInfo,i=!0,n.child.return=n,n=n.child;continue}}else if(mo(e,n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;4===(n=n.return).tag&&(a=!1)}n.sibling.return=n.return,n=n.sibling}}function _o(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{3===(3&i.tag)&&(e=i.destroy,i.destroy=void 0,void 0!==e&&e()),i=i.next}while(i!==r)}return;case 1:return;case 5:if(null!=(r=t.stateNode)){i=t.memoizedProps;var n=null!==e?e.memoizedProps:i;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,null!==a){for(r[Yi]=i,"input"===e&&"radio"===i.type&&null!=i.name&&te(r,i),Te(e,n),t=Te(e,i),n=0;n<a.length;n+=2){var o=a[n],c=a[n+1];"style"===o?we(r,c):"dangerouslySetInnerHTML"===o?ye(r,c):"children"===o?ge(r,c):k(r,o,c,t)}switch(e){case"input":re(r,i);break;case"textarea":ue(r,i);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!i.multiple,null!=(a=i.value)?se(r,!!i.multiple,a,!1):e!==!!i.multiple&&(null!=i.defaultValue?se(r,!!i.multiple,i.defaultValue,!0):se(r,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===t.stateNode)throw Error(s(162));return void(t.stateNode.nodeValue=t.memoizedProps);case 3:return void((r=t.stateNode).hydrate&&(r.hydrate=!1,wt(r.containerInfo)));case 12:return;case 13:return null!==t.memoizedState&&(jo=Nn(),vo(t.child,!0)),void Oo(t);case 19:return void Oo(t);case 17:return;case 23:case 24:return void vo(t,null!==t.memoizedState)}throw Error(s(163))}function Oo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var r=e.stateNode;null===r&&(r=e.stateNode=new ho),t.forEach((function(t){var i=qc.bind(null,e,t);r.has(t)||(r.add(t),t.then(i,i))}))}}function To(e,t){return null!==e&&(null===(e=e.memoizedState)||null!==e.dehydrated)&&(null!==(t=t.memoizedState)&&null===t.dehydrated)}var So=Math.ceil,Co=x.ReactCurrentDispatcher,Io=x.ReactCurrentOwner,Mo=0,Eo=null,Ao=null,Fo=0,Po=0,Bo=sn(0),Ro=0,Vo=null,Lo=0,Do=0,qo=0,No=0,Go=null,jo=0,Uo=1/0;function Ho(){Uo=Nn()+500}var zo,Wo=null,Ko=!1,Xo=null,Yo=null,Zo=!1,Qo=null,$o=90,Jo=[],ec=[],tc=null,rc=0,ic=null,nc=-1,ac=0,sc=0,oc=null,cc=!1;function uc(){return 0!==(48&Mo)?Nn():-1!==nc?nc:nc=Nn()}function dc(e){if(0===(2&(e=e.mode)))return 1;if(0===(4&e))return 99===Gn()?1:2;if(0===ac&&(ac=Lo),0!==Kn.transition){0!==sc&&(sc=null!==Go?Go.pendingLanes:0),e=ac;var t=4186112&~sc;return 0===(t&=-t)&&(0===(t=(e=4186112&~e)&-e)&&(t=8192)),t}return e=Gn(),0!==(4&Mo)&&98===e?e=Nt(12,ac):e=Nt(e=function(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(e),ac),e}function hc(e,t,r){if(50<rc)throw rc=0,ic=null,Error(s(185));if(null===(e=lc(e,t)))return null;Ut(e,t,r),e===Eo&&(qo|=t,4===Ro&&vc(e,Fo));var i=Gn();1===t?0!==(8&Mo)&&0===(48&Mo)?mc(e):(fc(e,r),0===Mo&&(Ho(),zn())):(0===(4&Mo)||98!==i&&99!==i||(null===tc?tc=new Set([e]):tc.add(e)),fc(e,r)),Go=e}function lc(e,t){e.lanes|=t;var r=e.alternate;for(null!==r&&(r.lanes|=t),r=e,e=e.return;null!==e;)e.childLanes|=t,null!==(r=e.alternate)&&(r.childLanes|=t),r=e,e=e.return;return 3===r.tag?r.stateNode:null}function fc(e,t){for(var r=e.callbackNode,i=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,o=e.pendingLanes;0<o;){var c=31-Ht(o),u=1<<c,d=a[c];if(-1===d){if(0===(u&i)||0!==(u&n)){d=t,Lt(u);var h=Vt;a[c]=10<=h?d+250:6<=h?d+5e3:-1}}else d<=t&&(e.expiredLanes|=u);o&=~u}if(i=Dt(e,e===Eo?Fo:0),t=Vt,0===i)null!==r&&(r!==Bn&&On(r),e.callbackNode=null,e.callbackPriority=0);else{if(null!==r){if(e.callbackPriority===t)return;r!==Bn&&On(r)}15===t?(r=mc.bind(null,e),null===Vn?(Vn=[r],Ln=_n(Mn,Wn)):Vn.push(r),r=Bn):14===t?r=Hn(99,mc.bind(null,e)):r=Hn(r=function(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(s(358,e))}}(t),pc.bind(null,e)),e.callbackPriority=t,e.callbackNode=r}}function pc(e){if(nc=-1,sc=ac=0,0!==(48&Mo))throw Error(s(327));var t=e.callbackNode;if(Fc()&&e.callbackNode!==t)return null;var r=Dt(e,e===Eo?Fo:0);if(0===r)return null;var i=r,n=Mo;Mo|=16;var a=_c();for(Eo===e&&Fo===i||(Ho(),xc(e,i));;)try{Sc();break}catch(c){wc(e,c)}if(Jn(),Co.current=a,Mo=n,null!==Ao?i=0:(Eo=null,Fo=0,i=Ro),0!==(Lo&qo))xc(e,0);else if(0!==i){if(2===i&&(Mo|=64,e.hydrate&&(e.hydrate=!1,Ui(e.containerInfo)),0!==(r=qt(e))&&(i=Oc(e,r))),1===i)throw t=Vo,xc(e,0),vc(e,r),fc(e,Nn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,i){case 0:case 1:throw Error(s(345));case 2:Mc(e);break;case 3:if(vc(e,r),(62914560&r)===r&&10<(i=jo+500-Nn())){if(0!==Dt(e,0))break;if(((n=e.suspendedLanes)&r)!==r){uc(),e.pingedLanes|=e.suspendedLanes&n;break}e.timeoutHandle=Gi(Mc.bind(null,e),i);break}Mc(e);break;case 4:if(vc(e,r),(4186112&r)===r)break;for(i=e.eventTimes,n=-1;0<r;){var o=31-Ht(r);a=1<<o,(o=i[o])>n&&(n=o),r&=~a}if(r=n,10<(r=(120>(r=Nn()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*So(r/1960))-r)){e.timeoutHandle=Gi(Mc.bind(null,e),r);break}Mc(e);break;case 5:Mc(e);break;default:throw Error(s(329))}}return fc(e,Nn()),e.callbackNode===t?pc.bind(null,e):null}function vc(e,t){for(t&=~No,t&=~qo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ht(t),i=1<<r;e[r]=-1,t&=~i}}function mc(e){if(0!==(48&Mo))throw Error(s(327));if(Fc(),e===Eo&&0!==(e.expiredLanes&Fo)){var t=Fo,r=Oc(e,t);0!==(Lo&qo)&&(r=Oc(e,t=Dt(e,t)))}else r=Oc(e,t=Dt(e,0));if(0!==e.tag&&2===r&&(Mo|=64,e.hydrate&&(e.hydrate=!1,Ui(e.containerInfo)),0!==(t=qt(e))&&(r=Oc(e,t))),1===r)throw r=Vo,xc(e,0),vc(e,t),fc(e,Nn()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Mc(e),fc(e,Nn()),null}function yc(e,t){var r=Mo;Mo|=1;try{return e(t)}finally{0===(Mo=r)&&(Ho(),zn())}}function gc(e,t){var r=Mo;Mo&=-2,Mo|=8;try{return e(t)}finally{0===(Mo=r)&&(Ho(),zn())}}function bc(e,t){cn(Bo,Po),Po|=t,Lo|=t}function kc(){Po=Bo.current,on(Bo)}function xc(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(-1!==r&&(e.timeoutHandle=-1,ji(r)),null!==Ao)for(r=Ao.return;null!==r;){var i=r;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&vn();break;case 3:Aa(),on(hn),on(dn),Wa();break;case 5:Pa(i);break;case 4:Aa();break;case 13:case 19:on(Ba);break;case 10:ea(i);break;case 23:case 24:kc()}r=r.return}Eo=e,Ao=Uc(e.current,null),Fo=Po=Lo=t,Ro=0,Vo=null,No=qo=Do=0}function wc(e,t){for(;;){var r=Ao;try{if(Jn(),Ka.current=Is,Ja){for(var i=Za.memoizedState;null!==i;){var n=i.queue;null!==n&&(n.pending=null),i=i.next}Ja=!1}if(Ya=0,$a=Qa=Za=null,es=!1,Io.current=null,null===r||null===r.return){Ro=1,Vo=t,Ao=null;break}e:{var a=e,s=r.return,o=r,c=t;if(t=Fo,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c;if(0===(2&o.mode)){var d=o.alternate;d?(o.updateQueue=d.updateQueue,o.memoizedState=d.memoizedState,o.lanes=d.lanes):(o.updateQueue=null,o.memoizedState=null)}var h=0!==(1&Ba.current),l=s;do{var f;if(f=13===l.tag){var p=l.memoizedState;if(null!==p)f=null!==p.dehydrated;else{var v=l.memoizedProps;f=void 0!==v.fallback&&(!0!==v.unstable_avoidThisFallback||!h)}}if(f){var m=l.updateQueue;if(null===m){var y=new Set;y.add(u),l.updateQueue=y}else m.add(u);if(0===(2&l.mode)){if(l.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var g=oa(-1,1);g.tag=2,ca(o,g)}o.lanes|=1;break e}c=void 0,o=t;var b=a.pingCache;if(null===b?(b=a.pingCache=new oo,c=new Set,b.set(u,c)):void 0===(c=b.get(u))&&(c=new Set,b.set(u,c)),!c.has(o)){c.add(o);var k=Dc.bind(null,a,u,o);u.then(k,k)}l.flags|=4096,l.lanes=t;break e}l=l.return}while(null!==l);c=Error((K(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ro&&(Ro=2),c=ao(c,o),l=s;do{switch(l.tag){case 3:a=c,l.flags|=4096,t&=-t,l.lanes|=t,ua(l,co(0,a,t));break e;case 1:a=c;var x=l.type,w=l.stateNode;if(0===(64&l.flags)&&("function"===typeof x.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Yo||!Yo.has(w)))){l.flags|=4096,t&=-t,l.lanes|=t,ua(l,uo(l,a,t));break e}}l=l.return}while(null!==l)}Ic(r)}catch(_){t=_,Ao===r&&null!==r&&(Ao=r=r.return);continue}break}}function _c(){var e=Co.current;return Co.current=Is,null===e?Is:e}function Oc(e,t){var r=Mo;Mo|=16;var i=_c();for(Eo===e&&Fo===t||xc(e,t);;)try{Tc();break}catch(n){wc(e,n)}if(Jn(),Mo=r,Co.current=i,null!==Ao)throw Error(s(261));return Eo=null,Fo=0,Ro}function Tc(){for(;null!==Ao;)Cc(Ao)}function Sc(){for(;null!==Ao&&!Tn();)Cc(Ao)}function Cc(e){var t=zo(e.alternate,e,Po);e.memoizedProps=e.pendingProps,null===t?Ic(e):Ao=t,Io.current=null}function Ic(e){var t=e;do{var r=t.alternate;if(e=t.return,0===(2048&t.flags)){if(null!==(r=io(r,t,Po)))return void(Ao=r);if(24!==(r=t).tag&&23!==r.tag||null===r.memoizedState||0!==(1073741824&Po)||0===(4&r.mode)){for(var i=0,n=r.child;null!==n;)i|=n.lanes|n.childLanes,n=n.sibling;r.childLanes=i}null!==e&&0===(2048&e.flags)&&(null===e.firstEffect&&(e.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==e.lastEffect&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(null!==e.lastEffect?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(null!==(r=no(t)))return r.flags&=2047,void(Ao=r);null!==e&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(null!==(t=t.sibling))return void(Ao=t);Ao=t=e}while(null!==t);0===Ro&&(Ro=5)}function Mc(e){var t=Gn();return Un(99,Ec.bind(null,e,t)),null}function Ec(e,t){do{Fc()}while(null!==Qo);if(0!==(48&Mo))throw Error(s(327));var r=e.finishedWork;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(s(177));e.callbackNode=null;var i=r.lanes|r.childLanes,n=i,a=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;for(var o=e.eventTimes,c=e.expirationTimes;0<a;){var u=31-Ht(a),d=1<<u;n[u]=0,o[u]=-1,c[u]=-1,a&=~d}if(null!==tc&&0===(24&i)&&tc.has(e)&&tc.delete(e),e===Eo&&(Ao=Eo=null,Fo=0),1<r.flags?null!==r.lastEffect?(r.lastEffect.nextEffect=r,i=r.firstEffect):i=r:i=r.firstEffect,null!==i){if(n=Mo,Mo|=32,Io.current=null,Li=Yt,fi(o=li())){if("selectionStart"in o)c={start:o.selectionStart,end:o.selectionEnd};else e:if(c=(c=o.ownerDocument)&&c.defaultView||window,(d=c.getSelection&&c.getSelection())&&0!==d.rangeCount){c=d.anchorNode,a=d.anchorOffset,u=d.focusNode,d=d.focusOffset;try{c.nodeType,u.nodeType}catch(S){c=null;break e}var h=0,l=-1,f=-1,p=0,v=0,m=o,y=null;t:for(;;){for(var g;m!==c||0!==a&&3!==m.nodeType||(l=h+a),m!==u||0!==d&&3!==m.nodeType||(f=h+d),3===m.nodeType&&(h+=m.nodeValue.length),null!==(g=m.firstChild);)y=m,m=g;for(;;){if(m===o)break t;if(y===c&&++p===a&&(l=h),y===u&&++v===d&&(f=h),null!==(g=m.nextSibling))break;y=(m=y).parentNode}m=g}c=-1===l||-1===f?null:{start:l,end:f}}else c=null;c=c||{start:0,end:0}}else c=null;Di={focusedElem:o,selectionRange:c},Yt=!1,oc=null,cc=!1,Wo=i;do{try{Ac()}catch(S){if(null===Wo)throw Error(s(330));Lc(Wo,S),Wo=Wo.nextEffect}}while(null!==Wo);oc=null,Wo=i;do{try{for(o=e;null!==Wo;){var b=Wo.flags;if(16&b&&ge(Wo.stateNode,""),128&b){var k=Wo.alternate;if(null!==k){var x=k.ref;null!==x&&("function"===typeof x?x(null):x.current=null)}}switch(1038&b){case 2:bo(Wo),Wo.flags&=-3;break;case 6:bo(Wo),Wo.flags&=-3,_o(Wo.alternate,Wo);break;case 1024:Wo.flags&=-1025;break;case 1028:Wo.flags&=-1025,_o(Wo.alternate,Wo);break;case 4:_o(Wo.alternate,Wo);break;case 8:wo(o,c=Wo);var w=c.alternate;yo(c),null!==w&&yo(w)}Wo=Wo.nextEffect}}catch(S){if(null===Wo)throw Error(s(330));Lc(Wo,S),Wo=Wo.nextEffect}}while(null!==Wo);if(x=Di,k=li(),b=x.focusedElem,o=x.selectionRange,k!==b&&b&&b.ownerDocument&&hi(b.ownerDocument.documentElement,b)){null!==o&&fi(b)&&(k=o.start,void 0===(x=o.end)&&(x=k),"selectionStart"in b?(b.selectionStart=k,b.selectionEnd=Math.min(x,b.value.length)):(x=(k=b.ownerDocument||document)&&k.defaultView||window).getSelection&&(x=x.getSelection(),c=b.textContent.length,w=Math.min(o.start,c),o=void 0===o.end?w:Math.min(o.end,c),!x.extend&&w>o&&(c=o,o=w,w=c),c=di(b,w),a=di(b,o),c&&a&&(1!==x.rangeCount||x.anchorNode!==c.node||x.anchorOffset!==c.offset||x.focusNode!==a.node||x.focusOffset!==a.offset)&&((k=k.createRange()).setStart(c.node,c.offset),x.removeAllRanges(),w>o?(x.addRange(k),x.extend(a.node,a.offset)):(k.setEnd(a.node,a.offset),x.addRange(k))))),k=[];for(x=b;x=x.parentNode;)1===x.nodeType&&k.push({element:x,left:x.scrollLeft,top:x.scrollTop});for("function"===typeof b.focus&&b.focus(),b=0;b<k.length;b++)(x=k[b]).element.scrollLeft=x.left,x.element.scrollTop=x.top}Yt=!!Li,Di=Li=null,e.current=r,Wo=i;do{try{for(b=e;null!==Wo;){var _=Wo.flags;if(36&_&&po(b,Wo.alternate,Wo),128&_){k=void 0;var O=Wo.ref;if(null!==O){var T=Wo.stateNode;switch(Wo.tag){case 5:k=T;break;default:k=T}"function"===typeof O?O(k):O.current=k}}Wo=Wo.nextEffect}}catch(S){if(null===Wo)throw Error(s(330));Lc(Wo,S),Wo=Wo.nextEffect}}while(null!==Wo);Wo=null,Rn(),Mo=n}else e.current=r;if(Zo)Zo=!1,Qo=e,$o=t;else for(Wo=i;null!==Wo;)t=Wo.nextEffect,Wo.nextEffect=null,8&Wo.flags&&((_=Wo).sibling=null,_.stateNode=null),Wo=t;if(0===(i=e.pendingLanes)&&(Yo=null),1===i?e===ic?rc++:(rc=0,ic=e):rc=0,r=r.stateNode,xn&&"function"===typeof xn.onCommitFiberRoot)try{xn.onCommitFiberRoot(kn,r,void 0,64===(64&r.current.flags))}catch(S){}if(fc(e,Nn()),Ko)throw Ko=!1,e=Xo,Xo=null,e;return 0!==(8&Mo)||zn(),null}function Ac(){for(;null!==Wo;){var e=Wo.alternate;cc||null===oc||(0!==(8&Wo.flags)?et(Wo,oc)&&(cc=!0):13===Wo.tag&&To(e,Wo)&&et(Wo,oc)&&(cc=!0));var t=Wo.flags;0!==(256&t)&&fo(e,Wo),0===(512&t)||Zo||(Zo=!0,Hn(97,(function(){return Fc(),null}))),Wo=Wo.nextEffect}}function Fc(){if(90!==$o){var e=97<$o?97:$o;return $o=90,Un(e,Rc)}return!1}function Pc(e,t){Jo.push(t,e),Zo||(Zo=!0,Hn(97,(function(){return Fc(),null})))}function Bc(e,t){ec.push(t,e),Zo||(Zo=!0,Hn(97,(function(){return Fc(),null})))}function Rc(){if(null===Qo)return!1;var e=Qo;if(Qo=null,0!==(48&Mo))throw Error(s(331));var t=Mo;Mo|=32;var r=ec;ec=[];for(var i=0;i<r.length;i+=2){var n=r[i],a=r[i+1],o=n.destroy;if(n.destroy=void 0,"function"===typeof o)try{o()}catch(u){if(null===a)throw Error(s(330));Lc(a,u)}}for(r=Jo,Jo=[],i=0;i<r.length;i+=2){n=r[i],a=r[i+1];try{var c=n.create;n.destroy=c()}catch(u){if(null===a)throw Error(s(330));Lc(a,u)}}for(c=e.current.firstEffect;null!==c;)e=c.nextEffect,c.nextEffect=null,8&c.flags&&(c.sibling=null,c.stateNode=null),c=e;return Mo=t,zn(),!0}function Vc(e,t,r){ca(e,t=co(0,t=ao(r,t),1)),t=uc(),null!==(e=lc(e,1))&&(Ut(e,1,t),fc(e,t))}function Lc(e,t){if(3===e.tag)Vc(e,e,t);else for(var r=e.return;null!==r;){if(3===r.tag){Vc(r,e,t);break}if(1===r.tag){var i=r.stateNode;if("function"===typeof r.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Yo||!Yo.has(i))){var n=uo(r,e=ao(t,e),1);if(ca(r,n),n=uc(),null!==(r=lc(r,1)))Ut(r,1,n),fc(r,n);else if("function"===typeof i.componentDidCatch&&(null===Yo||!Yo.has(i)))try{i.componentDidCatch(t,e)}catch(a){}break}}r=r.return}}function Dc(e,t,r){var i=e.pingCache;null!==i&&i.delete(t),t=uc(),e.pingedLanes|=e.suspendedLanes&r,Eo===e&&(Fo&r)===r&&(4===Ro||3===Ro&&(62914560&Fo)===Fo&&500>Nn()-jo?xc(e,0):No|=r),fc(e,t)}function qc(e,t){var r=e.stateNode;null!==r&&r.delete(t),0===(t=0)&&(0===(2&(t=e.mode))?t=1:0===(4&t)?t=99===Gn()?1:2:(0===ac&&(ac=Lo),0===(t=Gt(62914560&~ac))&&(t=4194304))),r=uc(),null!==(e=lc(e,t))&&(Ut(e,t,r),fc(e,r))}function Nc(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Gc(e,t,r,i){return new Nc(e,t,r,i)}function jc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var r=e.alternate;return null===r?((r=Gc(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Hc(e,t,r,i,n,a){var o=2;if(i=e,"function"===typeof e)jc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case O:return zc(r.children,n,a,t);case V:o=8,n|=16;break;case T:o=8,n|=1;break;case S:return(e=Gc(12,r,t,8|n)).elementType=S,e.type=S,e.lanes=a,e;case E:return(e=Gc(13,r,t,n)).type=E,e.elementType=E,e.lanes=a,e;case A:return(e=Gc(19,r,t,n)).elementType=A,e.lanes=a,e;case L:return Wc(r,n,a,t);case D:return(e=Gc(24,r,t,n)).elementType=D,e.lanes=a,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case I:o=9;break e;case M:o=11;break e;case F:o=14;break e;case P:o=16,i=null;break e;case B:o=22;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Gc(o,r,t,n)).elementType=e,t.type=i,t.lanes=a,t}function zc(e,t,r,i){return(e=Gc(7,e,i,t)).lanes=r,e}function Wc(e,t,r,i){return(e=Gc(23,e,i,t)).elementType=L,e.lanes=r,e}function Kc(e,t,r){return(e=Gc(6,e,null,t)).lanes=r,e}function Xc(e,t,r){return(t=Gc(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yc(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=jt(0),this.expirationTimes=jt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=jt(0),this.mutableSourceEagerHydrationData=null}function Zc(e,t,r){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==i?null:""+i,children:e,containerInfo:t,implementation:r}}function Qc(e,t,r,i){var n=t.current,a=uc(),o=dc(n);e:if(r){t:{if(Ze(r=r._reactInternals)!==r||1!==r.tag)throw Error(s(170));var c=r;do{switch(c.tag){case 3:c=c.stateNode.context;break t;case 1:if(pn(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break t}}c=c.return}while(null!==c);throw Error(s(171))}if(1===r.tag){var u=r.type;if(pn(u)){r=yn(r,u,c);break e}}r=c}else r=un;return null===t.context?t.context=r:t.pendingContext=r,(t=oa(a,o)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),ca(n,t),hc(n,o,a),o}function $c(e){if(!(e=e.current).child)return null;switch(e.child.tag){case 5:default:return e.child.stateNode}}function Jc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function eu(e,t){Jc(e,t),(e=e.alternate)&&Jc(e,t)}function tu(e,t,r){var i=null!=r&&null!=r.hydrationOptions&&r.hydrationOptions.mutableSources||null;if(r=new Yc(e,t,null!=r&&!0===r.hydrate),t=Gc(3,null,null,2===t?7:1===t?3:0),r.current=t,t.stateNode=r,aa(t),e[Zi]=r.current,Ii(8===e.nodeType?e.parentNode:e),i)for(e=0;e<i.length;e++){var n=(t=i[e])._getVersion;n=n(t._source),null==r.mutableSourceEagerHydrationData?r.mutableSourceEagerHydrationData=[t,n]:r.mutableSourceEagerHydrationData.push(t,n)}this._internalRoot=r}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function iu(e,t,r,i,n){var a=r._reactRootContainer;if(a){var s=a._internalRoot;if("function"===typeof n){var o=n;n=function(){var e=$c(s);o.call(e)}}Qc(t,s,e,n)}else{if(a=r._reactRootContainer=function(e,t){if(t||(t=!(!(t=e?9===e.nodeType?e.documentElement:e.firstChild:null)||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new tu(e,0,t?{hydrate:!0}:void 0)}(r,i),s=a._internalRoot,"function"===typeof n){var c=n;n=function(){var e=$c(s);c.call(e)}}gc((function(){Qc(t,s,e,n)}))}return $c(s)}function nu(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ru(t))throw Error(s(200));return Zc(e,t,null,r)}zo=function(e,t,r){var i=t.lanes;if(null!==e)if(e.memoizedProps!==t.pendingProps||hn.current)Ps=!0;else{if(0===(r&i)){switch(Ps=!1,t.tag){case 3:Us(t),Ha();break;case 5:Fa(t);break;case 1:pn(t.type)&&gn(t);break;case 4:Ea(t,t.stateNode.containerInfo);break;case 10:i=t.memoizedProps.value;var n=t.type._context;cn(Yn,n._currentValue),n._currentValue=i;break;case 13:if(null!==t.memoizedState)return 0!==(r&t.child.childLanes)?Xs(e,t,r):(cn(Ba,1&Ba.current),null!==(t=to(e,t,r))?t.sibling:null);cn(Ba,1&Ba.current);break;case 19:if(i=0!==(r&t.childLanes),0!==(64&e.flags)){if(i)return eo(e,t,r);t.flags|=64}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),cn(Ba,Ba.current),i)break;return null;case 23:case 24:return t.lanes=0,Ds(e,t,r)}return to(e,t,r)}Ps=0!==(16384&e.flags)}else Ps=!1;switch(t.lanes=0,t.tag){case 2:if(i=t.type,null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=fn(t,dn.current),ra(t,r),n=is(null,t,i,e,n,r),t.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(i)){var a=!0;gn(t)}else a=!1;t.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,aa(t);var o=i.getDerivedStateFromProps;"function"===typeof o&&fa(t,i,o,e),n.updater=pa,t.stateNode=n,n._reactInternals=t,ga(t,i,e,r),t=js(null,t,i,!0,a,r)}else t.tag=0,Bs(null,t,n,r),t=t.child;return t;case 16:n=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,n=(a=n._init)(n._payload),t.type=n,a=t.tag=function(e){if("function"===typeof e)return jc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===M)return 11;if(e===F)return 14}return 2}(n),e=Xn(n,e),a){case 0:t=Ns(null,t,n,e,r);break e;case 1:t=Gs(null,t,n,e,r);break e;case 11:t=Rs(null,t,n,e,r);break e;case 14:t=Vs(null,t,n,Xn(n.type,e),i,r);break e}throw Error(s(306,n,""))}return t;case 0:return i=t.type,n=t.pendingProps,Ns(e,t,i,n=t.elementType===i?n:Xn(i,n),r);case 1:return i=t.type,n=t.pendingProps,Gs(e,t,i,n=t.elementType===i?n:Xn(i,n),r);case 3:if(Us(t),i=t.updateQueue,null===e||null===i)throw Error(s(282));if(i=t.pendingProps,n=null!==(n=t.memoizedState)?n.element:null,sa(e,t),da(t,i,null,r),(i=t.memoizedState.element)===n)Ha(),t=to(e,t,r);else{if((a=(n=t.stateNode).hydrate)&&(La=Hi(t.stateNode.containerInfo.firstChild),Va=t,a=Da=!0),a){if(null!=(e=n.mutableSourceEagerHydrationData))for(n=0;n<e.length;n+=2)(a=e[n])._workInProgressVersionPrimary=e[n+1],za.push(a);for(r=Oa(t,null,i,r),t.child=r;r;)r.flags=-3&r.flags|1024,r=r.sibling}else Bs(e,t,i,r),Ha();t=t.child}return t;case 5:return Fa(t),null===e&&Ga(t),i=t.type,n=t.pendingProps,a=null!==e?e.memoizedProps:null,o=n.children,Ni(i,n)?o=null:null!==a&&Ni(i,a)&&(t.flags|=16),qs(e,t),Bs(e,t,o,r),t.child;case 6:return null===e&&Ga(t),null;case 13:return Xs(e,t,r);case 4:return Ea(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=_a(t,null,i,r):Bs(e,t,i,r),t.child;case 11:return i=t.type,n=t.pendingProps,Rs(e,t,i,n=t.elementType===i?n:Xn(i,n),r);case 7:return Bs(e,t,t.pendingProps,r),t.child;case 8:case 12:return Bs(e,t,t.pendingProps.children,r),t.child;case 10:e:{i=t.type._context,n=t.pendingProps,o=t.memoizedProps,a=n.value;var c=t.type._context;if(cn(Yn,c._currentValue),c._currentValue=a,null!==o)if(c=o.value,0===(a=si(c,a)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(c,a):1073741823))){if(o.children===n.children&&!hn.current){t=to(e,t,r);break e}}else for(null!==(c=t.child)&&(c.return=t);null!==c;){var u=c.dependencies;if(null!==u){o=c.child;for(var d=u.firstContext;null!==d;){if(d.context===i&&0!==(d.observedBits&a)){1===c.tag&&((d=oa(-1,r&-r)).tag=2,ca(c,d)),c.lanes|=r,null!==(d=c.alternate)&&(d.lanes|=r),ta(c.return,r),u.lanes|=r;break}d=d.next}}else o=10===c.tag&&c.type===t.type?null:c.child;if(null!==o)o.return=c;else for(o=c;null!==o;){if(o===t){o=null;break}if(null!==(c=o.sibling)){c.return=o.return,o=c;break}o=o.return}c=o}Bs(e,t,n.children,r),t=t.child}return t;case 9:return n=t.type,i=(a=t.pendingProps).children,ra(t,r),i=i(n=ia(n,a.unstable_observedBits)),t.flags|=1,Bs(e,t,i,r),t.child;case 14:return a=Xn(n=t.type,t.pendingProps),Vs(e,t,n,a=Xn(n.type,a),i,r);case 15:return Ls(e,t,t.type,t.pendingProps,i,r);case 17:return i=t.type,n=t.pendingProps,n=t.elementType===i?n:Xn(i,n),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pn(i)?(e=!0,gn(t)):e=!1,ra(t,r),ma(t,i,n),ga(t,i,n,r),js(null,t,i,!0,e,r);case 19:return eo(e,t,r);case 23:case 24:return Ds(e,t,r)}throw Error(s(156,t.tag))},tu.prototype.render=function(e){Qc(e,this._internalRoot,null,null)},tu.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Qc(null,e,null,(function(){t[Zi]=null}))},tt=function(e){13===e.tag&&(hc(e,4,uc()),eu(e,4))},rt=function(e){13===e.tag&&(hc(e,67108864,uc()),eu(e,67108864))},it=function(e){if(13===e.tag){var t=uc(),r=dc(e);hc(e,r,t),eu(e,r)}},nt=function(e,t){return t()},Ce=function(e,t,r){switch(t){case"input":if(re(e,r),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var n=tn(i);if(!n)throw Error(s(90));Q(i),re(i,n)}}}break;case"textarea":ue(e,r);break;case"select":null!=(t=r.value)&&se(e,!!r.multiple,t,!1)}},Pe=yc,Be=function(e,t,r,i,n){var a=Mo;Mo|=4;try{return Un(98,e.bind(null,t,r,i,n))}finally{0===(Mo=a)&&(Ho(),zn())}},Re=function(){0===(49&Mo)&&(function(){if(null!==tc){var e=tc;tc=null,e.forEach((function(e){e.expiredLanes|=24&e.pendingLanes,fc(e,Nn())}))}zn()}(),Fc())},Ve=function(e,t){var r=Mo;Mo|=2;try{return e(t)}finally{0===(Mo=r)&&(Ho(),zn())}};var au={Events:[Ji,en,tn,Ae,Fe,Fc,{current:!1}]},su={findFiberByHostInstance:$i,bundleType:0,version:"17.0.1",rendererPackageName:"react-dom"},ou={bundleType:su.bundleType,version:su.version,rendererPackageName:su.rendererPackageName,rendererConfig:su.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Je(e))?null:e.stateNode},findFiberByHostInstance:su.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{kn=cu.inject(ou),xn=cu}catch(me){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=au,t.createPortal=nu,t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw Error(s(268,Object.keys(e)))}return e=null===(e=Je(t))?null:e.stateNode},t.flushSync=function(e,t){var r=Mo;if(0!==(48&r))return e(t);Mo|=1;try{if(e)return Un(99,e.bind(null,t))}finally{Mo=r,zn()}},t.hydrate=function(e,t,r){if(!ru(t))throw Error(s(200));return iu(null,e,t,!0,r)},t.render=function(e,t,r){if(!ru(t))throw Error(s(200));return iu(null,e,t,!1,r)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(s(40));return!!e._reactRootContainer&&(gc((function(){iu(null,null,e,!1,(function(){e._reactRootContainer=null,e[Zi]=null}))})),!0)},t.unstable_batchedUpdates=yc,t.unstable_createPortal=function(e,t){return nu(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},t.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!ru(r))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return iu(e,t,r,!1,i)},t.version="17.0.1"},function(e,t,r){"use strict";e.exports=r(153)},function(e,t,r){"use strict";var i,n,a,s;if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var d=null,h=null,l=function e(){if(null!==d)try{var r=t.unstable_now();d(!0,r),d=null}catch(i){throw setTimeout(e,0),i}};i=function(e){null!==d?setTimeout(i,0,e):(d=e,setTimeout(l,0))},n=function(e,t){h=setTimeout(e,t)},a=function(){clearTimeout(h)},t.unstable_shouldYield=function(){return!1},s=t.unstable_forceFrameRate=function(){}}else{var f=window.setTimeout,p=window.clearTimeout;if("undefined"!==typeof console){var v=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof v&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var m=!1,y=null,g=-1,b=5,k=0;t.unstable_shouldYield=function(){return t.unstable_now()>=k},s=function(){},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<e?Math.floor(1e3/e):5};var x=new MessageChannel,w=x.port2;x.port1.onmessage=function(){if(null!==y){var e=t.unstable_now();k=e+b;try{y(!0,e)?w.postMessage(null):(m=!1,y=null)}catch(r){throw w.postMessage(null),r}}else m=!1},i=function(e){y=e,m||(m=!0,w.postMessage(null))},n=function(e,r){g=f((function(){e(t.unstable_now())}),r)},a=function(){p(g),g=-1}}function _(e,t){var r=e.length;e.push(t);e:for(;;){var i=r-1>>>1,n=e[i];if(!(void 0!==n&&0<S(n,t)))break e;e[i]=t,e[r]=n,r=i}}function O(e){return void 0===(e=e[0])?null:e}function T(e){var t=e[0];if(void 0!==t){var r=e.pop();if(r!==t){e[0]=r;e:for(var i=0,n=e.length;i<n;){var a=2*(i+1)-1,s=e[a],o=a+1,c=e[o];if(void 0!==s&&0>S(s,r))void 0!==c&&0>S(c,s)?(e[i]=c,e[o]=r,i=o):(e[i]=s,e[a]=r,i=a);else{if(!(void 0!==c&&0>S(c,r)))break e;e[i]=c,e[o]=r,i=o}}}return t}return null}function S(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}var C=[],I=[],M=1,E=null,A=3,F=!1,P=!1,B=!1;function R(e){for(var t=O(I);null!==t;){if(null===t.callback)T(I);else{if(!(t.startTime<=e))break;T(I),t.sortIndex=t.expirationTime,_(C,t)}t=O(I)}}function V(e){if(B=!1,R(e),!P)if(null!==O(C))P=!0,i(L);else{var t=O(I);null!==t&&n(V,t.startTime-e)}}function L(e,r){P=!1,B&&(B=!1,a()),F=!0;var i=A;try{for(R(r),E=O(C);null!==E&&(!(E.expirationTime>r)||e&&!t.unstable_shouldYield());){var s=E.callback;if("function"===typeof s){E.callback=null,A=E.priorityLevel;var o=s(E.expirationTime<=r);r=t.unstable_now(),"function"===typeof o?E.callback=o:E===O(C)&&T(C),R(r)}else T(C);E=O(C)}if(null!==E)var c=!0;else{var u=O(I);null!==u&&n(V,u.startTime-r),c=!1}return c}finally{E=null,A=i,F=!1}}var D=s;t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){P||F||(P=!0,i(L))},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_getFirstCallbackNode=function(){return O(C)},t.unstable_next=function(e){switch(A){case 1:case 2:case 3:var t=3;break;default:t=A}var r=A;A=t;try{return e()}finally{A=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=D,t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=A;A=e;try{return t()}finally{A=r}},t.unstable_scheduleCallback=function(e,r,s){var o=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?o+s:o:s=o,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return e={id:M++,callback:r,priorityLevel:e,startTime:s,expirationTime:c=s+c,sortIndex:-1},s>o?(e.sortIndex=s,_(I,e),null===O(C)&&e===O(I)&&(B?a():B=!0,n(V,s-o))):(e.sortIndex=c,_(C,e),P||F||(P=!0,i(L))),e},t.unstable_wrapCallback=function(e){var t=A;return function(){var r=A;A=t;try{return e.apply(this,arguments)}finally{A=r}}}},,,function(e,t,r){var i=function(e){"use strict";var t,r=Object.prototype,i=r.hasOwnProperty,n="function"===typeof Symbol?Symbol:{},a=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",o=n.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(A){c=function(e,t,r){return e[t]=r}}function u(e,t,r,i){var n=t&&t.prototype instanceof m?t:m,a=Object.create(n.prototype),s=new I(i||[]);return a._invoke=function(e,t,r){var i=h;return function(n,a){if(i===f)throw new Error("Generator is already running");if(i===p){if("throw"===n)throw a;return E()}for(r.method=n,r.arg=a;;){var s=r.delegate;if(s){var o=T(s,r);if(o){if(o===v)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===h)throw i=p,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=f;var c=d(e,t,r);if("normal"===c.type){if(i=r.done?p:l,c.arg===v)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=p,r.method="throw",r.arg=c.arg)}}}(e,r,s),a}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(A){return{type:"throw",arg:A}}}e.wrap=u;var h="suspendedStart",l="suspendedYield",f="executing",p="completed",v={};function m(){}function y(){}function g(){}var b={};b[a]=function(){return this};var k=Object.getPrototypeOf,x=k&&k(k(M([])));x&&x!==r&&i.call(x,a)&&(b=x);var w=g.prototype=m.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(n,a,s,o){var c=d(e[n],e,a);if("throw"!==c.type){var u=c.arg,h=u.value;return h&&"object"===typeof h&&i.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(h).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,o)}))}o(c.arg)}var n;this._invoke=function(e,i){function a(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(a,a):a()}}function T(e,r){var i=e.iterator[r.method];if(i===t){if(r.delegate=null,"throw"===r.method){if(e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method))return v;r.method="throw",r.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var n=d(i,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,v;var a=n.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,v):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function M(e){if(e){var r=e[a];if(r)return r.call(e);if("function"===typeof e.next)return e;if(!isNaN(e.length)){var n=-1,s=function r(){for(;++n<e.length;)if(i.call(e,n))return r.value=e[n],r.done=!1,r;return r.value=t,r.done=!0,r};return s.next=s}}return{next:E}}function E(){return{value:t,done:!0}}return y.prototype=w.constructor=g,g.constructor=y,y.displayName=c(g,o,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"===typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,c(e,o,"GeneratorFunction")),e.prototype=Object.create(w),e},e.awrap=function(e){return{__await:e}},_(O.prototype),O.prototype[s]=function(){return this},e.AsyncIterator=O,e.async=function(t,r,i,n,a){void 0===a&&(a=Promise);var s=new O(u(t,r,i,n),a);return e.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},_(w),c(w,o,"Generator"),w[a]=function(){return this},w.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},e.values=M,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(C),!e)for(var r in this)"t"===r.charAt(0)&&i.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function n(i,n){return o.type="throw",o.arg=e,r.next=i,n&&(r.method="next",r.arg=t),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var c=i.call(s,"catchLoc"),u=i.call(s,"finallyLoc");if(c&&u){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;C(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:M(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=i}catch(n){Function("r","regeneratorRuntime = r")(i)}},function(e,t,r){"use strict";var i=r(158);function n(){}function a(){}a.resetWarningCache=n,e.exports=function(){function e(e,t,r,n,a,s){if(s!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:n};return r.PropTypes=r,r}},function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var s=a(r(66)),o=a(r(56)),c=a(r(67)),u=a(r(68)),d=a(r(69)),h=a(r(70)),l=a(r(1)),f=a(r(0)),p=1e3/60,v=function(e){function t(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,r),this.wasAnimating=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyle=null,this.clearUnreadPropStyle=function(e){var t=!1,r=n.state,a=r.currentStyle,s=r.currentVelocity,o=r.lastIdealStyle,c=r.lastIdealVelocity;for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)){var d=e[u];"number"===typeof d&&(t||(t=!0,a=i({},a),s=i({},s),o=i({},o),c=i({},c)),a[u]=d,s[u]=0,o[u]=d,c[u]=0)}t&&n.setState({currentStyle:a,currentVelocity:s,lastIdealStyle:o,lastIdealVelocity:c})},this.startAnimationIfNecessary=function(){n.animationID=d.default((function(e){var t=n.props.style;if(h.default(n.state.currentStyle,t,n.state.currentVelocity))return n.wasAnimating&&n.props.onRest&&n.props.onRest(),n.animationID=null,n.wasAnimating=!1,void(n.accumulatedTime=0);n.wasAnimating=!0;var r=e||u.default(),i=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*p&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();var a=(n.accumulatedTime-Math.floor(n.accumulatedTime/p)*p)/p,s=Math.floor(n.accumulatedTime/p),o={},d={},l={},f={};for(var v in t)if(Object.prototype.hasOwnProperty.call(t,v)){var m=t[v];if("number"===typeof m)l[v]=m,f[v]=0,o[v]=m,d[v]=0;else{for(var y=n.state.lastIdealStyle[v],g=n.state.lastIdealVelocity[v],b=0;b<s;b++){var k=c.default(p/1e3,y,g,m.val,m.stiffness,m.damping,m.precision);y=k[0],g=k[1]}var x=c.default(p/1e3,y,g,m.val,m.stiffness,m.damping,m.precision),w=x[0],_=x[1];l[v]=y+(w-y)*a,f[v]=g+(_-g)*a,o[v]=y,d[v]=g}}n.animationID=null,n.accumulatedTime-=s*p,n.setState({currentStyle:l,currentVelocity:f,lastIdealStyle:o,lastIdealVelocity:d}),n.unreadPropStyle=null,n.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"propTypes",value:{defaultStyle:f.default.objectOf(f.default.number),style:f.default.objectOf(f.default.oneOfType([f.default.number,f.default.object])).isRequired,children:f.default.func.isRequired,onRest:f.default.func},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyle,r=e.style,i=t||o.default(r),n=s.default(i);return{currentStyle:i,currentVelocity:n,lastIdealStyle:i,lastIdealVelocity:n}},t.prototype.componentDidMount=function(){this.prevTime=u.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyle&&this.clearUnreadPropStyle(this.unreadPropStyle),this.unreadPropStyle=e.style,null==this.animationID&&(this.prevTime=u.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(d.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyle);return e&&l.default.Children.only(e)},t}(l.default.Component);t.default=v,e.exports=t.default},function(e,t,r){(function(t){(function(){var r,i,n,a,s,o;"undefined"!==typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:"undefined"!==typeof t&&null!==t&&t.hrtime?(e.exports=function(){return(r()-s)/1e6},i=t.hrtime,a=(r=function(){var e;return 1e9*(e=i())[0]+e[1]})(),o=1e9*t.uptime(),s=a-o):Date.now?(e.exports=function(){return Date.now()-n},n=Date.now()):(e.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(this)}).call(this,r(23))},function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var s=a(r(66)),o=a(r(56)),c=a(r(67)),u=a(r(68)),d=a(r(69)),h=a(r(70)),l=a(r(1)),f=a(r(0)),p=1e3/60;var v=function(e){function t(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,r),this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=n.state,r=t.currentStyles,a=t.currentVelocities,s=t.lastIdealStyles,o=t.lastIdealVelocities,c=!1,u=0;u<e.length;u++){var d=e[u],h=!1;for(var l in d)if(Object.prototype.hasOwnProperty.call(d,l)){var f=d[l];"number"===typeof f&&(h||(h=!0,c=!0,r[u]=i({},r[u]),a[u]=i({},a[u]),s[u]=i({},s[u]),o[u]=i({},o[u])),r[u][l]=f,a[u][l]=0,s[u][l]=f,o[u][l]=0)}}c&&n.setState({currentStyles:r,currentVelocities:a,lastIdealStyles:s,lastIdealVelocities:o})},this.startAnimationIfNecessary=function(){n.animationID=d.default((function(e){var t=n.props.styles(n.state.lastIdealStyles);if(function(e,t,r){for(var i=0;i<e.length;i++)if(!h.default(e[i],t[i],r[i]))return!1;return!0}(n.state.currentStyles,t,n.state.currentVelocities))return n.animationID=null,void(n.accumulatedTime=0);var r=e||u.default(),i=r-n.prevTime;if(n.prevTime=r,n.accumulatedTime=n.accumulatedTime+i,n.accumulatedTime>10*p&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var a=(n.accumulatedTime-Math.floor(n.accumulatedTime/p)*p)/p,s=Math.floor(n.accumulatedTime/p),o=[],d=[],l=[],f=[],v=0;v<t.length;v++){var m=t[v],y={},g={},b={},k={};for(var x in m)if(Object.prototype.hasOwnProperty.call(m,x)){var w=m[x];if("number"===typeof w)y[x]=w,g[x]=0,b[x]=w,k[x]=0;else{for(var _=n.state.lastIdealStyles[v][x],O=n.state.lastIdealVelocities[v][x],T=0;T<s;T++){var S=c.default(p/1e3,_,O,w.val,w.stiffness,w.damping,w.precision);_=S[0],O=S[1]}var C=c.default(p/1e3,_,O,w.val,w.stiffness,w.damping,w.precision),I=C[0],M=C[1];y[x]=_+(I-_)*a,g[x]=O+(M-O)*a,b[x]=_,k[x]=O}}l[v]=y,f[v]=g,o[v]=b,d[v]=k}n.animationID=null,n.accumulatedTime-=s*p,n.setState({currentStyles:l,currentVelocities:f,lastIdealStyles:o,lastIdealVelocities:d}),n.unreadPropStyles=null,n.startAnimationIfNecessary()}))},this.state=this.defaultState()}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"propTypes",value:{defaultStyles:f.default.arrayOf(f.default.objectOf(f.default.number)),styles:f.default.func.isRequired,children:f.default.func.isRequired},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,i=t||r().map(o.default),n=i.map((function(e){return s.default(e)}));return{currentStyles:i,currentVelocities:n,lastIdealStyles:i,lastIdealVelocities:n}},t.prototype.componentDidMount=function(){this.prevTime=u.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){null!=this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles),this.unreadPropStyles=e.styles(this.state.lastIdealStyles),null==this.animationID&&(this.prevTime=u.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){null!=this.animationID&&(d.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=this.props.children(this.state.currentStyles);return e&&l.default.Children.only(e)},t}(l.default.Component);t.default=v,e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();function a(e){return e&&e.__esModule?e:{default:e}}var s=a(r(66)),o=a(r(56)),c=a(r(67)),u=a(r(163)),d=a(r(68)),h=a(r(69)),l=a(r(70)),f=a(r(1)),p=a(r(0)),v=1e3/60;function m(e,t,r){var i=t;return null==i?e.map((function(e,t){return{key:e.key,data:e.data,style:r[t]}})):e.map((function(e,t){for(var n=0;n<i.length;n++)if(i[n].key===e.key)return{key:i[n].key,data:i[n].data,style:r[t]};return{key:e.key,data:e.data,style:r[t]}}))}function y(e,t,r,i,n,a,o,c,d){for(var h=u.default(i,n,(function(e,i){var n=t(i);return null==n||l.default(a[e],n,o[e])?(r({key:i.key,data:i.data}),null):{key:i.key,data:i.data,style:n}})),f=[],p=[],v=[],m=[],y=0;y<h.length;y++){for(var g=h[y],b=null,k=0;k<i.length;k++)if(i[k].key===g.key){b=k;break}if(null==b){var x=e(g);f[y]=x,v[y]=x;var w=s.default(g.style);p[y]=w,m[y]=w}else f[y]=a[b],v[y]=c[b],p[y]=o[b],m[y]=d[b]}return[h,f,p,v,m]}var g=function(e){function t(r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.call(this,r),this.unmounting=!1,this.animationID=null,this.prevTime=0,this.accumulatedTime=0,this.unreadPropStyles=null,this.clearUnreadPropStyle=function(e){for(var t=y(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,e,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),r=t[0],a=t[1],s=t[2],o=t[3],c=t[4],u=0;u<e.length;u++){var d=e[u].style,h=!1;for(var l in d)if(Object.prototype.hasOwnProperty.call(d,l)){var f=d[l];"number"===typeof f&&(h||(h=!0,a[u]=i({},a[u]),s[u]=i({},s[u]),o[u]=i({},o[u]),c[u]=i({},c[u]),r[u]={key:r[u].key,data:r[u].data,style:i({},r[u].style)}),a[u][l]=f,s[u][l]=0,o[u][l]=f,c[u][l]=0,r[u].style[l]=f)}}n.setState({currentStyles:a,currentVelocities:s,mergedPropsStyles:r,lastIdealStyles:o,lastIdealVelocities:c})},this.startAnimationIfNecessary=function(){n.unmounting||(n.animationID=h.default((function(e){if(!n.unmounting){var t=n.props.styles,r="function"===typeof t?t(m(n.state.mergedPropsStyles,n.unreadPropStyles,n.state.lastIdealStyles)):t;if(function(e,t,r,i){if(i.length!==t.length)return!1;for(var n=0;n<i.length;n++)if(i[n].key!==t[n].key)return!1;for(n=0;n<i.length;n++)if(!l.default(e[n],t[n].style,r[n]))return!1;return!0}(n.state.currentStyles,r,n.state.currentVelocities,n.state.mergedPropsStyles))return n.animationID=null,void(n.accumulatedTime=0);var i=e||d.default(),a=i-n.prevTime;if(n.prevTime=i,n.accumulatedTime=n.accumulatedTime+a,n.accumulatedTime>10*v&&(n.accumulatedTime=0),0===n.accumulatedTime)return n.animationID=null,void n.startAnimationIfNecessary();for(var s=(n.accumulatedTime-Math.floor(n.accumulatedTime/v)*v)/v,o=Math.floor(n.accumulatedTime/v),u=y(n.props.willEnter,n.props.willLeave,n.props.didLeave,n.state.mergedPropsStyles,r,n.state.currentStyles,n.state.currentVelocities,n.state.lastIdealStyles,n.state.lastIdealVelocities),h=u[0],f=u[1],p=u[2],g=u[3],b=u[4],k=0;k<h.length;k++){var x=h[k].style,w={},_={},O={},T={};for(var S in x)if(Object.prototype.hasOwnProperty.call(x,S)){var C=x[S];if("number"===typeof C)w[S]=C,_[S]=0,O[S]=C,T[S]=0;else{for(var I=g[k][S],M=b[k][S],E=0;E<o;E++){var A=c.default(v/1e3,I,M,C.val,C.stiffness,C.damping,C.precision);I=A[0],M=A[1]}var F=c.default(v/1e3,I,M,C.val,C.stiffness,C.damping,C.precision),P=F[0],B=F[1];w[S]=I+(P-I)*s,_[S]=M+(B-M)*s,O[S]=I,T[S]=M}}g[k]=O,b[k]=T,f[k]=w,p[k]=_}n.animationID=null,n.accumulatedTime-=o*v,n.setState({currentStyles:f,currentVelocities:p,lastIdealStyles:g,lastIdealVelocities:b,mergedPropsStyles:h}),n.unreadPropStyles=null,n.startAnimationIfNecessary()}})))},this.state=this.defaultState()}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,null,[{key:"propTypes",value:{defaultStyles:p.default.arrayOf(p.default.shape({key:p.default.string.isRequired,data:p.default.any,style:p.default.objectOf(p.default.number).isRequired})),styles:p.default.oneOfType([p.default.func,p.default.arrayOf(p.default.shape({key:p.default.string.isRequired,data:p.default.any,style:p.default.objectOf(p.default.oneOfType([p.default.number,p.default.object])).isRequired}))]).isRequired,children:p.default.func.isRequired,willEnter:p.default.func,willLeave:p.default.func,didLeave:p.default.func},enumerable:!0},{key:"defaultProps",value:{willEnter:function(e){return o.default(e.style)},willLeave:function(){return null},didLeave:function(){}},enumerable:!0}]),t.prototype.defaultState=function(){var e=this.props,t=e.defaultStyles,r=e.styles,i=e.willEnter,n=e.willLeave,a=e.didLeave,c="function"===typeof r?r(t):r,u=void 0;u=null==t?c:t.map((function(e){for(var t=0;t<c.length;t++)if(c[t].key===e.key)return c[t];return e}));var d=null==t?c.map((function(e){return o.default(e.style)})):t.map((function(e){return o.default(e.style)})),h=null==t?c.map((function(e){return s.default(e.style)})):t.map((function(e){return s.default(e.style)})),l=y(i,n,a,u,c,d,h,d,h),f=l[0];return{currentStyles:l[1],currentVelocities:l[2],lastIdealStyles:l[3],lastIdealVelocities:l[4],mergedPropsStyles:f}},t.prototype.componentDidMount=function(){this.prevTime=d.default(),this.startAnimationIfNecessary()},t.prototype.componentWillReceiveProps=function(e){this.unreadPropStyles&&this.clearUnreadPropStyle(this.unreadPropStyles);var t=e.styles;this.unreadPropStyles="function"===typeof t?t(m(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.lastIdealStyles)):t,null==this.animationID&&(this.prevTime=d.default(),this.startAnimationIfNecessary())},t.prototype.componentWillUnmount=function(){this.unmounting=!0,null!=this.animationID&&(h.default.cancel(this.animationID),this.animationID=null)},t.prototype.render=function(){var e=m(this.state.mergedPropsStyles,this.unreadPropStyles,this.state.currentStyles),t=this.props.children(e);return t&&f.default.Children.only(t)},t}(f.default.Component);t.default=g,e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(e,t,r){for(var i={},n=0;n<e.length;n++)i[e[n].key]=n;var a={};for(n=0;n<t.length;n++)a[t[n].key]=n;var s=[];for(n=0;n<t.length;n++)s[n]=t[n];for(n=0;n<e.length;n++)if(!Object.prototype.hasOwnProperty.call(a,e[n].key)){var o=r(n,e[n]);null!=o&&s.push(o)}return s.sort((function(e,r){var n=a[e.key],s=a[r.key],o=i[e.key],c=i[r.key];if(null!=n&&null!=s)return a[e.key]-a[r.key];if(null!=o&&null!=c)return i[e.key]-i[r.key];if(null!=n){for(var u=0;u<t.length;u++){var d=t[u].key;if(Object.prototype.hasOwnProperty.call(i,d)){if(n<a[d]&&c>i[d])return-1;if(n>a[d]&&c<i[d])return 1}}return 1}for(u=0;u<t.length;u++){d=t[u].key;if(Object.prototype.hasOwnProperty.call(i,d)){if(s<a[d]&&o>i[d])return 1;if(s>a[d]&&o<i[d])return-1}}return-1}))},e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0;var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};t.default=function(e,t){return i({},o,t,{val:e})};var n,a=r(86),s=(n=a)&&n.__esModule?n:{default:n},o=i({},s.default.noWobble,{precision:.01});e.exports=t.default},function(e,t,r){"use strict";t.__esModule=!0,t.default=function(){0};e.exports=t.default},function(e,t,r){"use strict";var i;if(!Object.keys){var n=Object.prototype.hasOwnProperty,a=Object.prototype.toString,s=r(88),o=Object.prototype.propertyIsEnumerable,c=!o.call({toString:null},"toString"),u=o.call((function(){}),"prototype"),d=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=function(e){var t=e.constructor;return t&&t.prototype===e},l={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"===typeof window)return!1;for(var e in window)try{if(!l["$"+e]&&n.call(window,e)&&null!==window[e]&&"object"===typeof window[e])try{h(window[e])}catch(t){return!0}}catch(t){return!0}return!1}();i=function(e){var t=null!==e&&"object"===typeof e,r="[object Function]"===a.call(e),i=s(e),o=t&&"[object String]"===a.call(e),l=[];if(!t&&!r&&!i)throw new TypeError("Object.keys called on a non-object");var p=u&&r;if(o&&e.length>0&&!n.call(e,0))for(var v=0;v<e.length;++v)l.push(String(v));if(i&&e.length>0)for(var m=0;m<e.length;++m)l.push(String(m));else for(var y in e)p&&"prototype"===y||!n.call(e,y)||l.push(String(y));if(c)for(var g=function(e){if("undefined"===typeof window||!f)return h(e);try{return h(e)}catch(t){return!1}}(e),b=0;b<d.length;++b)g&&"constructor"===d[b]||!n.call(e,d[b])||l.push(d[b]);return l}}e.exports=i},function(e,t,r){"use strict";var i="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag,n=r(89)("Object.prototype.toString"),a=function(e){return!(i&&e&&"object"===typeof e&&Symbol.toStringTag in e)&&"[object Arguments]"===n(e)},s=function(e){return!!a(e)||null!==e&&"object"===typeof e&&"number"===typeof e.length&&e.length>=0&&"[object Array]"!==n(e)&&"[object Function]"===n(e.callee)},o=function(){return a(arguments)}();a.isLegacyArguments=s,e.exports=o?a:s},function(e,t,r){"use strict";e.exports=function(){if("function"!==typeof Symbol||"function"!==typeof Object.getOwnPropertySymbols)return!1;if("symbol"===typeof Symbol.iterator)return!0;var e={},t=Symbol("test"),r=Object(t);if("string"===typeof t)return!1;if("[object Symbol]"!==Object.prototype.toString.call(t))return!1;if("[object Symbol]"!==Object.prototype.toString.call(r))return!1;for(t in e[t]=42,e)return!1;if("function"===typeof Object.keys&&0!==Object.keys(e).length)return!1;if("function"===typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(e).length)return!1;var i=Object.getOwnPropertySymbols(e);if(1!==i.length||i[0]!==t)return!1;if(!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if("function"===typeof Object.getOwnPropertyDescriptor){var n=Object.getOwnPropertyDescriptor(e,t);if(42!==n.value||!0!==n.enumerable)return!1}return!0}},function(e,t,r){"use strict";var i="Function.prototype.bind called on incompatible ",n=Array.prototype.slice,a=Object.prototype.toString,s="[object Function]";e.exports=function(e){var t=this;if("function"!==typeof t||a.call(t)!==s)throw new TypeError(i+t);for(var r,o=n.call(arguments,1),c=function(){if(this instanceof r){var i=t.apply(this,o.concat(n.call(arguments)));return Object(i)===i?i:this}return t.apply(e,o.concat(n.call(arguments)))},u=Math.max(0,t.length-o.length),d=[],h=0;h<u;h++)d.push("$"+h);if(r=Function("binder","return function ("+d.join(",")+"){ return binder.apply(this,arguments); }")(c),t.prototype){var l=function(){};l.prototype=t.prototype,r.prototype=new l,l.prototype=null}return r}},function(e,t,r){"use strict";var i=r(71);e.exports=i.call(Function.call,Object.prototype.hasOwnProperty)},function(e,t,r){"use strict";var i=r(48),n=r(72),a=r(92),s=r(93),o=r(172),c=n(s(),Object);i(c,{getPolyfill:s,implementation:a,shim:o}),e.exports=c},function(e,t,r){"use strict";var i=r(93),n=r(48);e.exports=function(){var e=i();return n(Object,{is:e},{is:function(){return Object.is!==e}}),e}},function(e,t,r){"use strict";var i,n,a,s,o=r(89),c=r(91)()&&"symbol"===typeof Symbol.toStringTag;if(c){i=o("Object.prototype.hasOwnProperty"),n=o("RegExp.prototype.exec"),a={};var u=function(){throw a};s={toString:u,valueOf:u},"symbol"===typeof Symbol.toPrimitive&&(s[Symbol.toPrimitive]=u)}var d=o("Object.prototype.toString"),h=Object.getOwnPropertyDescriptor;e.exports=c?function(e){if(!e||"object"!==typeof e)return!1;var t=h(e,"lastIndex");if(!(t&&i(t,"value")))return!1;try{n(e,s)}catch(r){return r===a}}:function(e){return!(!e||"object"!==typeof e&&"function"!==typeof e)&&"[object RegExp]"===d(e)}},function(e,t,r){"use strict";var i=r(48),n=r(72),a=r(94),s=r(95),o=r(175),c=n(a);i(c,{getPolyfill:s,implementation:a,shim:o}),e.exports=c},function(e,t,r){"use strict";var i=r(48).supportsDescriptors,n=r(95),a=Object.getOwnPropertyDescriptor,s=Object.defineProperty,o=TypeError,c=Object.getPrototypeOf,u=/a/;e.exports=function(){if(!i||!c)throw new o("RegExp.prototype.flags requires a true ES5 environment that supports property descriptors");var e=n(),t=c(u),r=a(t,"flags");return r&&r.get===e||s(t,"flags",{configurable:!0,enumerable:!1,get:e}),e}},function(e,t,r){"use strict";var i=Date.prototype.getDay,n=Object.prototype.toString,a="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;e.exports=function(e){return"object"===typeof e&&null!==e&&(a?function(e){try{return i.call(e),!0}catch(t){return!1}}(e):"[object Date]"===n.call(e))}},,function(e,t,r){"use strict";r(55);var i=r(1),n=60103;if(t.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var a=Symbol.for;n=a("react.element"),t.Fragment=a("react.fragment")}var s=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var i,a={},u=null,d=null;for(i in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,i)&&!c.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===a[i]&&(a[i]=t[i]);return{$$typeof:n,type:e,key:u,ref:d,props:a,_owner:s.current}}t.jsx=u,t.jsxs=u},function(e,t,r){"use strict";e.exports=r(180)},function(e,t,r){"use strict";var i="function"===typeof Symbol&&Symbol.for,n=i?Symbol.for("react.element"):60103,a=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,o=i?Symbol.for("react.strict_mode"):60108,c=i?Symbol.for("react.profiler"):60114,u=i?Symbol.for("react.provider"):60109,d=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.async_mode"):60111,l=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,p=i?Symbol.for("react.suspense"):60113,v=i?Symbol.for("react.suspense_list"):60120,m=i?Symbol.for("react.memo"):60115,y=i?Symbol.for("react.lazy"):60116,g=i?Symbol.for("react.block"):60121,b=i?Symbol.for("react.fundamental"):60117,k=i?Symbol.for("react.responder"):60118,x=i?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case h:case l:case s:case c:case o:case p:return e;default:switch(e=e&&e.$$typeof){case d:case f:case y:case m:case u:return e;default:return t}}case a:return t}}}function _(e){return w(e)===l}t.AsyncMode=h,t.ConcurrentMode=l,t.ContextConsumer=d,t.ContextProvider=u,t.Element=n,t.ForwardRef=f,t.Fragment=s,t.Lazy=y,t.Memo=m,t.Portal=a,t.Profiler=c,t.StrictMode=o,t.Suspense=p,t.isAsyncMode=function(e){return _(e)||w(e)===h},t.isConcurrentMode=_,t.isContextConsumer=function(e){return w(e)===d},t.isContextProvider=function(e){return w(e)===u},t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===n},t.isForwardRef=function(e){return w(e)===f},t.isFragment=function(e){return w(e)===s},t.isLazy=function(e){return w(e)===y},t.isMemo=function(e){return w(e)===m},t.isPortal=function(e){return w(e)===a},t.isProfiler=function(e){return w(e)===c},t.isStrictMode=function(e){return w(e)===o},t.isSuspense=function(e){return w(e)===p},t.isValidElementType=function(e){return"string"===typeof e||"function"===typeof e||e===s||e===l||e===c||e===o||e===p||e===v||"object"===typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===d||e.$$typeof===f||e.$$typeof===b||e.$$typeof===k||e.$$typeof===x||e.$$typeof===g)},t.typeOf=w},function(e,t,r){},,,,,,function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var r=[],i=!0,n=!1,a=void 0;try{for(var s,o=e[Symbol.iterator]();!(i=(s=o.next()).done)&&(r.push(s.value),!t||r.length!==t);i=!0);}catch(c){n=!0,a=c}finally{try{i||null==o.return||o.return()}finally{if(n)throw a}}return r}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";(function(t){var i="undefined"!==typeof window,n="undefined"!==typeof t&&"undefined"!==typeof t.versions&&"undefined"!==typeof t.versions.electron,a="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,s="undefined"!==typeof t&&"win32"===t.platform,o=!(i||a),c="undefined"===typeof fetch?r(191)().fetch:fetch;e.exports={isBrowser:i,isElectron:n,isWebWorker:a,isNode:o,isWindows:s,defaultFetch:c}}).call(this,r(23))},function(e,t,r){"use strict";var i=r(192);function n(e){var t=function(t,r){return"string"===typeof t&&"//"===t.slice(0,2)?e("https:"+t,r):e(t,r)};return t.http=e.http,t.https=e.https,t}e.exports=function(e){return e&&e.Promise&&(i.Promise=e.Promise),{fetch:n(i),Headers:i.Headers,Request:i.Request,Response:i.Response}}},function(e,t,r){"use strict";(function(i,n){var a=r(98),s=r(99),o=r(2),c=r(4);Object.defineProperty(t,"__esModule",{value:!0});var u=Symbol("buffer"),d=Symbol("type"),h=function(){function e(){o(this,e),this[d]="";var t=arguments[0],r=arguments[1],n=[];if(t)for(var a=t,s=Number(a.length),c=0;c<s;c++){var h=a[c],l=void 0;l=h instanceof i?h:ArrayBuffer.isView(h)?i.from(h.buffer,h.byteOffset,h.byteLength):h instanceof ArrayBuffer?i.from(h):h instanceof e?h[u]:i.from("string"===typeof h?h:String(h)),n.push(l)}this[u]=i.concat(n);var f=r&&void 0!==r.type&&String(r.type).toLowerCase();f&&!/[^\u0020-\u007E]/.test(f)&&(this[d]=f)}return c(e,[{key:"size",get:function(){return this[u].length}},{key:"type",get:function(){return this[d]}},{key:"slice",value:function(){var t,r,i=this.size,n=arguments[0],a=arguments[1];t=void 0===n?0:n<0?Math.max(i+n,0):Math.min(n,i),r=void 0===a?i:a<0?Math.max(i+a,0):Math.min(a,i);var s=Math.max(r-t,0),o=this[u],c=o.slice(t,t+s),d=new e([],{type:arguments[2]});return d[u]=c,d}}]),e}();function l(e,t,r){Error.call(this,e),this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(h.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(h.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),l.prototype=Object.create(Error.prototype),l.prototype.constructor=l,l.prototype.name="FetchError";var f=r(57),p=r(57).PassThrough,v=Symbol("Body internals");function m(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.size,a=void 0===n?0:n,s=r.timeout,o=void 0===s?0:s;null==e?e=null:"string"===typeof e||g(e)||e instanceof h||i.isBuffer(e)||"[object ArrayBuffer]"===Object.prototype.toString.call(e)||e instanceof f||(e=String(e)),this[v]={body:e,disturbed:!1,error:null},this.size=a,this.timeout=o,e instanceof f&&e.on("error",(function(e){t[v].error=new l("Invalid response body while trying to fetch ".concat(t.url,": ").concat(e.message),"system",e)}))}function y(){var e=this;if(this[v].disturbed)return m.Promise.reject(new TypeError("body used already for: ".concat(this.url)));if(this[v].disturbed=!0,this[v].error)return m.Promise.reject(this[v].error);if(null===this.body)return m.Promise.resolve(i.alloc(0));if("string"===typeof this.body)return m.Promise.resolve(i.from(this.body));if(this.body instanceof h)return m.Promise.resolve(this.body[u]);if(i.isBuffer(this.body))return m.Promise.resolve(this.body);if("[object ArrayBuffer]"===Object.prototype.toString.call(this.body))return m.Promise.resolve(i.from(this.body));if(!(this.body instanceof f))return m.Promise.resolve(i.alloc(0));var t=[],r=0,n=!1;return new m.Promise((function(a,s){var o;e.timeout&&(o=setTimeout((function(){n=!0,s(new l("Response timeout while trying to fetch ".concat(e.url," (over ").concat(e.timeout,"ms)"),"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){s(new l("Invalid response body while trying to fetch ".concat(e.url,": ").concat(t.message),"system",t))})),e.body.on("data",(function(i){if(!n&&null!==i){if(e.size&&r+i.length>e.size)return n=!0,void s(new l("content size at ".concat(e.url," over limit: ").concat(e.size),"max-size"));r+=i.length,t.push(i)}})),e.body.on("end",(function(){if(!n){clearTimeout(o);try{a(i.concat(t))}catch(r){s(new l("Could not create Buffer from response body for ".concat(e.url,": ").concat(r.message),"system",r))}}}))}))}function g(e){return"object"===typeof e&&"function"===typeof e.append&&"function"===typeof e.delete&&"function"===typeof e.get&&"function"===typeof e.getAll&&"function"===typeof e.has&&"function"===typeof e.set&&("URLSearchParams"===e.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(e)||"function"===typeof e.sort)}function b(e){var t,r,i=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return i instanceof f&&"function"!==typeof i.getBoundary&&(t=new p,r=new p,i.pipe(t),i.pipe(r),e[v].body=t,i=r),i}function k(e){var t=e.body;return null===t?null:"string"===typeof t?"text/plain;charset=UTF-8":g(t)?"application/x-www-form-urlencoded;charset=UTF-8":t instanceof h?t.type||null:i.isBuffer(t)||"[object ArrayBuffer]"===Object.prototype.toString.call(t)?null:"function"===typeof t.getBoundary?"multipart/form-data;boundary=".concat(t.getBoundary()):null}function x(e){var t=e.body;return null===t?0:"string"===typeof t?i.byteLength(t):g(t)?i.byteLength(String(t)):t instanceof h?t.size:i.isBuffer(t)?t.length:"[object ArrayBuffer]"===Object.prototype.toString.call(t)?t.byteLength:t&&"function"===typeof t.getLengthSync&&(t._lengthRetrievers&&0==t._lengthRetrievers.length||t.hasKnownLength&&t.hasKnownLength())?t.getLengthSync():null}m.prototype={get body(){return this[v].body},get bodyUsed(){return this[v].disturbed},arrayBuffer:function(){return y.call(this).then((function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}))},blob:function(){var e=this.headers&&this.headers.get("content-type")||"";return y.call(this).then((function(t){return Object.assign(new h([],{type:e.toLowerCase()}),s({},u,t))}))},json:function(){var e=this;return y.call(this).then((function(t){try{return JSON.parse(t.toString())}catch(r){return m.Promise.reject(new l("invalid json response body at ".concat(e.url," reason: ").concat(r.message),"invalid-json"))}}))},text:function(){return y.call(this).then((function(e){return e.toString()}))},buffer:function(){return y.call(this)},textConverted:function(){var e=this;return y.call(this).then((function(t){return function(e,t){if("function"!==typeof convert)throw new Error("The package `encoding` must be installed to use the textConverted() function");var r,i,n=t.get("content-type"),a="utf-8";n&&(r=/charset=([^;]*)/i.exec(n));i=e.slice(0,1024).toString(),!r&&i&&(r=/<meta.+?charset=(['"])(.+?)\1/i.exec(i));!r&&i&&(r=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(i))&&(r=/charset=(.*)/i.exec(r.pop()));!r&&i&&(r=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(i));r&&("gb2312"!==(a=r.pop())&&"gbk"!==a||(a="gb18030"));return convert(e,"UTF-8",a).toString()}(t,e.headers)}))}},Object.defineProperties(m.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),m.mixIn=function(e){var t,r=a(Object.getOwnPropertyNames(m.prototype));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(!(i in e)){var n=Object.getOwnPropertyDescriptor(m.prototype,i);Object.defineProperty(e,i,n)}}}catch(s){r.e(s)}finally{r.f()}},m.Promise=n.Promise;var w=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,_=/[^\t\x20-\x7e\x80-\xff]/;function O(e){if(e="".concat(e),w.test(e))throw new TypeError("".concat(e," is not a legal HTTP header name"))}function T(e){if(e="".concat(e),_.test(e))throw new TypeError("".concat(e," is not a legal HTTP header value"))}function S(e,t){for(var r in t=t.toLowerCase(),e)if(r.toLowerCase()===t)return r}var C=Symbol("map"),I=function(){function e(){o(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[C]=Object.create(null),t instanceof e)for(var r=t.raw(),i=Object.keys(r),n=0,s=i;n<s.length;n++){var c,u=s[n],d=a(r[u]);try{for(d.s();!(c=d.n()).done;){var h=c.value;this.append(u,h)}}catch(O){d.e(O)}finally{d.f()}}else if(null==t);else{if("object"!==typeof t)throw new TypeError("Provided initializer must be an object");var l=t[Symbol.iterator];if(null!=l){if("function"!==typeof l)throw new TypeError("Header pairs must be iterable");var f,p=[],v=a(t);try{for(v.s();!(f=v.n()).done;){var m=f.value;if("object"!==typeof m||"function"!==typeof m[Symbol.iterator])throw new TypeError("Each header pair must be iterable");p.push(Array.from(m))}}catch(O){v.e(O)}finally{v.f()}for(var y=0,g=p;y<g.length;y++){var b=g[y];if(2!==b.length)throw new TypeError("Each header pair must be a name/value tuple");this.append(b[0],b[1])}}else for(var k=0,x=Object.keys(t);k<x.length;k++){var w=x[k],_=t[w];this.append(w,_)}}}return c(e,[{key:"get",value:function(e){O(e="".concat(e));var t=S(this[C],e);return void 0===t?null:this[C][t].join(", ")}},{key:"forEach",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=M(this),i=0;i<r.length;){var n=r[i],a=n[0],s=n[1];e.call(t,s,a,this),r=M(this),i++}}},{key:"set",value:function(e,t){e="".concat(e),t="".concat(t),O(e),T(t);var r=S(this[C],e);this[C][void 0!==r?r:e]=[t]}},{key:"append",value:function(e,t){e="".concat(e),t="".concat(t),O(e),T(t);var r=S(this[C],e);void 0!==r?this[C][r].push(t):this[C][e]=[t]}},{key:"has",value:function(e){return O(e="".concat(e)),void 0!==S(this[C],e)}},{key:"delete",value:function(e){O(e="".concat(e));var t=S(this[C],e);void 0!==t&&delete this[C][t]}},{key:"raw",value:function(){return this[C]}},{key:"keys",value:function(){return A(this,"key")}},{key:"values",value:function(){return A(this,"value")}},{key:Symbol.iterator,value:function(){return A(this,"key+value")}}]),e}();function M(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value",r=Object.keys(e[C]).sort();return r.map("key"===t?function(e){return e.toLowerCase()}:"value"===t?function(t){return e[C][t].join(", ")}:function(t){return[t.toLowerCase(),e[C][t].join(", ")]})}I.prototype.entries=I.prototype[Symbol.iterator],Object.defineProperty(I.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(I.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});var E=Symbol("internal");function A(e,t){var r=Object.create(F);return r[E]={target:e,kind:t,index:0},r}var F=Object.setPrototypeOf({next:function(){if(!this||Object.getPrototypeOf(this)!==F)throw new TypeError("Value of `this` is not a HeadersIterator");var e=this[E],t=e.target,r=e.kind,i=e.index,n=M(t,r);return i>=n.length?{value:void 0,done:!0}:(this[E].index=i+1,{value:n[i],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));function P(e){var t=Object.assign({__proto__:null},e[C]),r=S(e[C],"Host");return void 0!==r&&(t[r]=t[r][0]),t}Object.defineProperty(F,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});var B=r(78).STATUS_CODES,R=Symbol("Response internals"),V=function(){function e(){o(this,e);var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};m.call(this,t,r);var i=r.status||200;this[R]={url:r.url,status:i,statusText:r.statusText||B[i],headers:new I(r.headers)}}return c(e,[{key:"url",get:function(){return this[R].url}},{key:"status",get:function(){return this[R].status}},{key:"ok",get:function(){return this[R].status>=200&&this[R].status<300}},{key:"statusText",get:function(){return this[R].statusText}},{key:"headers",get:function(){return this[R].headers}},{key:"clone",value:function(){return new e(b(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}}]),e}();m.mixIn(V.prototype),Object.defineProperties(V.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(V.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});var L=r(59),D=L.format,q=L.parse,N=Symbol("Request internals");function G(e){return"object"===typeof e&&"object"===typeof e[N]}var j=function(){function e(t){o(this,e);var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};G(t)?r=q(t.url):(r=t&&t.href?q(t.href):q("".concat(t)),t={});var n=i.method||t.method||"GET";if(n=n.toUpperCase(),(null!=i.body||G(t)&&null!==t.body)&&("GET"===n||"HEAD"===n))throw new TypeError("Request with GET/HEAD method cannot have body");var a=null!=i.body?i.body:G(t)&&null!==t.body?b(t):null;m.call(this,a,{timeout:i.timeout||t.timeout||0,size:i.size||t.size||0});var s=new I(i.headers||t.headers||{});if(null!=i.body){var c=k(this);null===c||s.has("Content-Type")||s.append("Content-Type",c)}this[N]={method:n,redirect:i.redirect||t.redirect||"follow",headers:s,parsedURL:r},this.follow=void 0!==i.follow?i.follow:void 0!==t.follow?t.follow:20,this.compress=void 0!==i.compress?i.compress:void 0===t.compress||t.compress,this.counter=i.counter||t.counter||0,this.agent=i.agent||t.agent}return c(e,[{key:"method",get:function(){return this[N].method}},{key:"url",get:function(){return D(this[N].parsedURL)}},{key:"headers",get:function(){return this[N].headers}},{key:"redirect",get:function(){return this[N].redirect}},{key:"clone",value:function(){return new e(this)}}]),e}();m.mixIn(j.prototype),Object.defineProperty(j.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(j.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0}});var U=r(78),H=r(218),z=r(57).PassThrough,W=r(59).resolve,K=r(219);function X(e,t){if(!X.Promise)throw new Error("native promise missing, set fetch.Promise to your favorite alternative");return m.Promise=X.Promise,new X.Promise((function(r,n){var s,o=new j(e,t),c=function(e){var t=e[N].parsedURL,r=new I(e[N].headers);if(r.has("Accept")||r.set("Accept","*/*"),!t.protocol||!t.hostname)throw new TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(t.protocol))throw new TypeError("Only HTTP(S) protocols are supported");var i=null;if(null==e.body&&/^(POST|PUT)$/i.test(e.method)&&(i="0"),null!=e.body){var n=x(e);"number"===typeof n&&(i=String(n))}return i&&r.set("Content-Length",i),r.has("User-Agent")||r.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),e.compress&&r.set("Accept-Encoding","gzip,deflate"),r.has("Connection")||e.agent||r.set("Connection","close"),Object.assign({},t,{method:e.method,headers:P(r),agent:e.agent})}(o),d=(0,("https:"===c.protocol?H:U).request)(c);function f(){d.abort(),clearTimeout(s)}o.timeout&&d.once("socket",(function(e){s=setTimeout((function(){n(new l("network timeout at: ".concat(o.url),"request-timeout")),f()}),o.timeout)})),d.on("error",(function(e){n(new l("request to ".concat(o.url," failed, reason: ").concat(e.message),"system",e)),f()})),d.on("response",(function(e){clearTimeout(s);var t=function(e){for(var t=new I,r=0,i=Object.keys(e);r<i.length;r++){var n=i[r];if(!w.test(n))if(Array.isArray(e[n])){var s,o=a(e[n]);try{for(o.s();!(s=o.n()).done;){var c=s.value;_.test(c)||(void 0===t[C][n]?t[C][n]=[c]:t[C][n].push(c))}}catch(u){o.e(u)}finally{o.f()}}else _.test(e[n])||(t[C][n]=[e[n]])}return t}(e.headers);if(X.isRedirect(e.statusCode)){var i=t.get("Location"),c=null===i?null:W(o.url,i);switch(o.redirect){case"error":return n(new l("redirect mode is set to error: ".concat(o.url),"no-redirect")),void f();case"manual":null!==c&&t.set("Location",c);break;case"follow":if(null===c)break;if(o.counter>=o.follow)return n(new l("maximum redirect reached at: ".concat(o.url),"max-redirect")),void f();var u={headers:new I(o.headers),follow:o.follow,counter:o.counter+1,agent:o.agent,compress:o.compress,method:o.method,body:o.body};return 303!==e.statusCode&&o.body&&null===x(o)?(n(new l("Cannot follow redirect with body being a readable stream","unsupported-redirect")),void f()):(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==o.method)||(u.method="GET",u.body=void 0,u.headers.delete("content-length")),r(X(new j(c,u))),void f())}}var d=e.pipe(new z),h={url:o.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:o.size,timeout:o.timeout},p=t.get("Content-Encoding");if(o.compress&&"HEAD"!==o.method&&null!==p&&204!==e.statusCode&&304!==e.statusCode){var v={flush:K.Z_SYNC_FLUSH,finishFlush:K.Z_SYNC_FLUSH};if("gzip"==p||"x-gzip"==p)return d=d.pipe(K.createGunzip(v)),void r(new V(d,h));if("deflate"!=p&&"x-deflate"!=p)r(new V(d,h));else e.pipe(new z).once("data",(function(e){d=8===(15&e[0])?d.pipe(K.createInflate()):d.pipe(K.createInflateRaw()),r(new V(d,h))}))}else r(new V(d,h))})),function(e,t){var r=t.body;null===r?e.end():"string"===typeof r?(e.write(r),e.end()):g(r)?(e.write(i.from(String(r))),e.end()):r instanceof h?(e.write(r[u]),e.end()):i.isBuffer(r)?(e.write(r),e.end()):"[object ArrayBuffer]"===Object.prototype.toString.call(r)?(e.write(i.from(r)),e.end()):r.pipe(e)}(d,o)}))}X.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},X.default=X,X.Promise=n.Promise,X.http=U,X.https=H,e.exports=t=X,t.Headers=I,t.Request=j,t.Response=V,t.FetchError=l}).call(this,r(21).Buffer,r(19))},function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],i=t[1];return 3*(r+i)/4-i},t.toByteArray=function(e){var t,r,i=u(e),s=i[0],o=i[1],c=new a(function(e,t,r){return 3*(t+r)/4-r}(0,s,o)),d=0,h=o>0?s-4:s;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[d++]=t>>16&255,c[d++]=t>>8&255,c[d++]=255&t;2===o&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[d++]=255&t);1===o&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[d++]=t>>8&255,c[d++]=255&t);return c},t.fromByteArray=function(e){for(var t,r=e.length,n=r%3,a=[],s=16383,o=0,c=r-n;o<c;o+=s)a.push(d(e,o,o+s>c?c:o+s));1===n?(t=e[r-1],a.push(i[t>>2]+i[t<<4&63]+"==")):2===n&&(t=(e[r-2]<<8)+e[r-1],a.push(i[t>>10]+i[t>>4&63]+i[t<<2&63]+"="));return a.join("")};for(var i=[],n=[],a="undefined"!==typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,c=s.length;o<c;++o)i[o]=s[o],n[s.charCodeAt(o)]=o;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function d(e,t,r){for(var n,a,s=[],o=t;o<r;o+=3)n=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),s.push(i[(a=n)>>18&63]+i[a>>12&63]+i[a>>6&63]+i[63&a]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(e,t){t.read=function(e,t,r,i,n){var a,s,o=8*n-i-1,c=(1<<o)-1,u=c>>1,d=-7,h=r?n-1:0,l=r?-1:1,f=e[t+h];for(h+=l,a=f&(1<<-d)-1,f>>=-d,d+=o;d>0;a=256*a+e[t+h],h+=l,d-=8);for(s=a&(1<<-d)-1,a>>=-d,d+=i;d>0;s=256*s+e[t+h],h+=l,d-=8);if(0===a)a=1-u;else{if(a===c)return s?NaN:1/0*(f?-1:1);s+=Math.pow(2,i),a-=u}return(f?-1:1)*s*Math.pow(2,a-i)},t.write=function(e,t,r,i,n,a){var s,o,c,u=8*a-n-1,d=(1<<u)-1,h=d>>1,l=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=i?0:a-1,p=i?1:-1,v=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(o=isNaN(t)?1:0,s=d):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+h>=1?l/c:l*Math.pow(2,1-h))*c>=2&&(s++,c/=2),s+h>=d?(o=0,s=d):s+h>=1?(o=(t*c-1)*Math.pow(2,n),s+=h):(o=t*Math.pow(2,h-1)*Math.pow(2,n),s=0));n>=8;e[r+f]=255&o,f+=p,o/=256,n-=8);for(s=s<<n|o,u+=n;u>0;e[r+f]=255&s,f+=p,s/=256,u-=8);e[r+f-p]|=128*v}},,function(e,t,r){"use strict";var i=r(42).Buffer,n=r(197);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n,a=i.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,r=a,n=o,t.copy(r,n),o+=s.data.length,s=s.next;return a},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},,function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var i,n=1,a={},s=!1,o=e.document,c=Object.getPrototypeOf&&Object.getPrototypeOf(e);c=c&&c.setTimeout?c:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"===typeof r.data&&0===r.data.indexOf(t)&&d(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),i=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){d(e.data)},i=function(t){e.port2.postMessage(t)}}():o&&"onreadystatechange"in o.createElement("script")?function(){var e=o.documentElement;i=function(t){var r=o.createElement("script");r.onreadystatechange=function(){d(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():i=function(e){setTimeout(d,0,e)},c.setImmediate=function(e){"function"!==typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var s={callback:e,args:t};return a[n]=s,i(n),n++},c.clearImmediate=u}function u(e){delete a[e]}function d(e){if(s)setTimeout(d,0,e);else{var t=a[e];if(t){s=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{u(e),s=!1}}}}}("undefined"===typeof self?"undefined"===typeof e?this:e:self)}).call(this,r(19),r(23))},function(e,t,r){var i=r(21),n=i.Buffer;function a(e,t){for(var r in e)t[r]=e[r]}function s(e,t,r){return n(e,t,r)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?e.exports=i:(a(i,t),t.Buffer=s),s.prototype=Object.create(n.prototype),a(n,s),s.from=function(e,t,r){if("number"===typeof e)throw new TypeError("Argument must not be a number");return n(e,t,r)},s.alloc=function(e,t,r){if("number"!==typeof e)throw new TypeError("Argument must be a number");var i=n(e);return void 0!==t?"string"===typeof r?i.fill(t,r):i.fill(t):i.fill(0),i},s.allocUnsafe=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return n(e)},s.allocUnsafeSlow=function(e){if("number"!==typeof e)throw new TypeError("Argument must be a number");return i.SlowBuffer(e)}},function(e,t,r){"use strict";e.exports=a;var i=r(105),n=Object.create(r(28));function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}n.inherits=r(24),n.inherits(a,i),a.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){e.exports=r(77)},function(e,t,r){e.exports=r(36)},function(e,t,r){e.exports=r(76).Transform},function(e,t,r){e.exports=r(76).PassThrough},function(e,t,r){(function(t,i,n){var a=r(106),s=r(24),o=r(107),c=r(108),u=r(210),d=o.IncomingMessage,h=o.readyStates;var l=e.exports=function(e){var r,i=this;c.Writable.call(i),i._opts=e,i._body=[],i._headers={},e.auth&&i.setHeader("Authorization","Basic "+new t(e.auth).toString("base64")),Object.keys(e.headers).forEach((function(t){i.setHeader(t,e.headers[t])}));var n=!0;if("disable-fetch"===e.mode||"requestTimeout"in e&&!a.abortController)n=!1,r=!0;else if("prefer-streaming"===e.mode)r=!1;else if("allow-wrong-content-type"===e.mode)r=!a.overrideMimeType;else{if(e.mode&&"default"!==e.mode&&"prefer-fast"!==e.mode)throw new Error("Invalid value for opts.mode");r=!0}i._mode=function(e,t){return a.fetch&&t?"fetch":a.mozchunkedarraybuffer?"moz-chunked-arraybuffer":a.msstream?"ms-stream":a.arraybuffer&&e?"arraybuffer":a.vbArray&&e?"text:vbarray":"text"}(r,n),i._fetchTimer=null,i.on("finish",(function(){i._onFinish()}))};s(l,c.Writable),l.prototype.setHeader=function(e,t){var r=e.toLowerCase();-1===f.indexOf(r)&&(this._headers[r]={name:e,value:t})},l.prototype.getHeader=function(e){var t=this._headers[e.toLowerCase()];return t?t.value:null},l.prototype.removeHeader=function(e){delete this._headers[e.toLowerCase()]},l.prototype._onFinish=function(){var e=this;if(!e._destroyed){var r=e._opts,s=e._headers,o=null;"GET"!==r.method&&"HEAD"!==r.method&&(o=a.arraybuffer?u(t.concat(e._body)):a.blobConstructor?new i.Blob(e._body.map((function(e){return u(e)})),{type:(s["content-type"]||{}).value||""}):t.concat(e._body).toString());var c=[];if(Object.keys(s).forEach((function(e){var t=s[e].name,r=s[e].value;Array.isArray(r)?r.forEach((function(e){c.push([t,e])})):c.push([t,r])})),"fetch"===e._mode){var d=null;if(a.abortController){var l=new AbortController;d=l.signal,e._fetchAbortController=l,"requestTimeout"in r&&0!==r.requestTimeout&&(e._fetchTimer=i.setTimeout((function(){e.emit("requestTimeout"),e._fetchAbortController&&e._fetchAbortController.abort()}),r.requestTimeout))}i.fetch(e._opts.url,{method:e._opts.method,headers:c,body:o||void 0,mode:"cors",credentials:r.withCredentials?"include":"same-origin",signal:d}).then((function(t){e._fetchResponse=t,e._connect()}),(function(t){i.clearTimeout(e._fetchTimer),e._destroyed||e.emit("error",t)}))}else{var f=e._xhr=new i.XMLHttpRequest;try{f.open(e._opts.method,e._opts.url,!0)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}"responseType"in f&&(f.responseType=e._mode.split(":")[0]),"withCredentials"in f&&(f.withCredentials=!!r.withCredentials),"text"===e._mode&&"overrideMimeType"in f&&f.overrideMimeType("text/plain; charset=x-user-defined"),"requestTimeout"in r&&(f.timeout=r.requestTimeout,f.ontimeout=function(){e.emit("requestTimeout")}),c.forEach((function(e){f.setRequestHeader(e[0],e[1])})),e._response=null,f.onreadystatechange=function(){switch(f.readyState){case h.LOADING:case h.DONE:e._onXHRProgress()}},"moz-chunked-arraybuffer"===e._mode&&(f.onprogress=function(){e._onXHRProgress()}),f.onerror=function(){e._destroyed||e.emit("error",new Error("XHR error"))};try{f.send(o)}catch(p){return void n.nextTick((function(){e.emit("error",p)}))}}}},l.prototype._onXHRProgress=function(){var e=this;(function(e){try{var t=e.status;return null!==t&&0!==t}catch(r){return!1}})(e._xhr)&&!e._destroyed&&(e._response||e._connect(),e._response._onXHRProgress())},l.prototype._connect=function(){var e=this;e._destroyed||(e._response=new d(e._xhr,e._fetchResponse,e._mode,e._fetchTimer),e._response.on("error",(function(t){e.emit("error",t)})),e.emit("response",e._response))},l.prototype._write=function(e,t,r){this._body.push(e),r()},l.prototype.abort=l.prototype.destroy=function(){var e=this;e._destroyed=!0,i.clearTimeout(e._fetchTimer),e._response&&(e._response._destroyed=!0),e._xhr?e._xhr.abort():e._fetchAbortController&&e._fetchAbortController.abort()},l.prototype.end=function(e,t,r){"function"===typeof e&&(r=e,e=void 0),c.Writable.prototype.end.call(this,e,t,r)},l.prototype.flushHeaders=function(){},l.prototype.setTimeout=function(){},l.prototype.setNoDelay=function(){},l.prototype.setSocketKeepAlive=function(){};var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","date","dnt","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","via"]}).call(this,r(21).Buffer,r(19),r(23))},,function(e,t,r){"use strict";var i=r(42).Buffer,n=r(208);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},e.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},e.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r},e.prototype.concat=function(e){if(0===this.length)return i.alloc(0);if(1===this.length)return this.head.data;for(var t,r,n,a=i.allocUnsafe(e>>>0),s=this.head,o=0;s;)t=s.data,r=a,n=o,t.copy(r,n),o+=s.data.length,s=s.next;return a},e}(),n&&n.inspect&&n.inspect.custom&&(e.exports.prototype[n.inspect.custom]=function(){var e=n.inspect({length:this.length});return this.constructor.name+" "+e})},,function(e,t,r){"use strict";e.exports=a;var i=r(113),n=Object.create(r(28));function a(e){if(!(this instanceof a))return new a(e);i.call(this,e)}n.inherits=r(24),n.inherits(a,i),a.prototype._transform=function(e,t,r){r(null,e)}},function(e,t,r){var i=r(21).Buffer;e.exports=function(e){if(e instanceof Uint8Array){if(0===e.byteOffset&&e.byteLength===e.buffer.byteLength)return e.buffer;if("function"===typeof e.buffer.slice)return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)}if(i.isBuffer(e)){for(var t=new Uint8Array(e.length),r=e.length,n=0;n<r;n++)t[n]=e[n];return t.buffer}throw new Error("Argument must be a Buffer")}},function(e,t){e.exports=function(){for(var e={},t=0;t<arguments.length;t++){var i=arguments[t];for(var n in i)r.call(i,n)&&(e[n]=i[n])}return e};var r=Object.prototype.hasOwnProperty},function(e,t){e.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},function(e,t,r){(function(e,i){var n;!function(a){t&&t.nodeType,e&&e.nodeType;var s="object"==typeof i&&i;s.global!==s&&s.window!==s&&s.self;var o,c=2147483647,u=36,d=/^xn--/,h=/[^\x20-\x7E]/,l=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},p=Math.floor,v=String.fromCharCode;function m(e){throw new RangeError(f[e])}function y(e,t){for(var r=e.length,i=[];r--;)i[r]=t(e[r]);return i}function g(e,t){var r=e.split("@"),i="";return r.length>1&&(i=r[0]+"@",e=r[1]),i+y((e=e.replace(l,".")).split("."),t).join(".")}function b(e){for(var t,r,i=[],n=0,a=e.length;n<a;)(t=e.charCodeAt(n++))>=55296&&t<=56319&&n<a?56320==(64512&(r=e.charCodeAt(n++)))?i.push(((1023&t)<<10)+(1023&r)+65536):(i.push(t),n--):i.push(t);return i}function k(e){return y(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=v(e)})).join("")}function x(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function w(e,t,r){var i=0;for(e=r?p(e/700):e>>1,e+=p(e/t);e>455;i+=u)e=p(e/35);return p(i+36*e/(e+38))}function _(e){var t,r,i,n,a,s,o,d,h,l,f,v=[],y=e.length,g=0,b=128,x=72;for((r=e.lastIndexOf("-"))<0&&(r=0),i=0;i<r;++i)e.charCodeAt(i)>=128&&m("not-basic"),v.push(e.charCodeAt(i));for(n=r>0?r+1:0;n<y;){for(a=g,s=1,o=u;n>=y&&m("invalid-input"),((d=(f=e.charCodeAt(n++))-48<10?f-22:f-65<26?f-65:f-97<26?f-97:u)>=u||d>p((c-g)/s))&&m("overflow"),g+=d*s,!(d<(h=o<=x?1:o>=x+26?26:o-x));o+=u)s>p(c/(l=u-h))&&m("overflow"),s*=l;x=w(g-a,t=v.length+1,0==a),p(g/t)>c-b&&m("overflow"),b+=p(g/t),g%=t,v.splice(g++,0,b)}return k(v)}function O(e){var t,r,i,n,a,s,o,d,h,l,f,y,g,k,_,O=[];for(y=(e=b(e)).length,t=128,r=0,a=72,s=0;s<y;++s)(f=e[s])<128&&O.push(v(f));for(i=n=O.length,n&&O.push("-");i<y;){for(o=c,s=0;s<y;++s)(f=e[s])>=t&&f<o&&(o=f);for(o-t>p((c-r)/(g=i+1))&&m("overflow"),r+=(o-t)*g,t=o,s=0;s<y;++s)if((f=e[s])<t&&++r>c&&m("overflow"),f==t){for(d=r,h=u;!(d<(l=h<=a?1:h>=a+26?26:h-a));h+=u)_=d-l,k=u-l,O.push(v(x(l+_%k,0))),d=p(_/k);O.push(v(x(d,0))),a=w(r,g,i==n),r=0,++i}++r,++t}return O.join("")}o={version:"1.4.1",ucs2:{decode:b,encode:k},decode:_,encode:O,toASCII:function(e){return g(e,(function(e){return h.test(e)?"xn--"+O(e):e}))},toUnicode:function(e){return g(e,(function(e){return d.test(e)?_(e.slice(4).toLowerCase()):e}))}},void 0===(n=function(){return o}.call(t,r,t,e))||(e.exports=n)}()}).call(this,r(114)(e),r(19))},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"===typeof e},isObject:function(e){return"object"===typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(216),t.encode=t.stringify=r(217)},function(e,t,r){"use strict";function i(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,r,a){t=t||"&",r=r||"=";var s={};if("string"!==typeof e||0===e.length)return s;var o=/\+/g;e=e.split(t);var c=1e3;a&&"number"===typeof a.maxKeys&&(c=a.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var d=0;d<u;++d){var h,l,f,p,v=e[d].replace(o,"%20"),m=v.indexOf(r);m>=0?(h=v.substr(0,m),l=v.substr(m+1)):(h=v,l=""),f=decodeURIComponent(h),p=decodeURIComponent(l),i(s,f)?n(s[f])?s[f].push(p):s[f]=[s[f],p]:s[f]=p}return s};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var i=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,r,o){return t=t||"&",r=r||"=",null===e&&(e=void 0),"object"===typeof e?a(s(e),(function(s){var o=encodeURIComponent(i(s))+r;return n(e[s])?a(e[s],(function(e){return o+encodeURIComponent(i(e))})).join(t):o+encodeURIComponent(i(e[s]))})).join(t):o?encodeURIComponent(i(o))+r+encodeURIComponent(i(e)):""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function a(e,t){if(e.map)return e.map(t);for(var r=[],i=0;i<e.length;i++)r.push(t(e[i],i));return r}var s=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){var i=r(78),n=r(59),a=e.exports;for(var s in i)i.hasOwnProperty(s)&&(a[s]=i[s]);function o(e){if("string"===typeof e&&(e=n.parse(e)),e.protocol||(e.protocol="https:"),"https:"!==e.protocol)throw new Error('Protocol "'+e.protocol+'" not supported. Expected "https:"');return e}a.request=function(e,t){return e=o(e),i.request.call(this,e,t)},a.get=function(e,t){return e=o(e),i.get.call(this,e,t)}},function(e,t,r){"use strict";(function(e){var i=r(21).Buffer,n=r(57).Transform,a=r(220),s=r(115),o=r(79).ok,c=r(21).kMaxLength,u="Cannot create final Buffer. It would be larger than 0x"+c.toString(16)+" bytes";a.Z_MIN_WINDOWBITS=8,a.Z_MAX_WINDOWBITS=15,a.Z_DEFAULT_WINDOWBITS=15,a.Z_MIN_CHUNK=64,a.Z_MAX_CHUNK=1/0,a.Z_DEFAULT_CHUNK=16384,a.Z_MIN_MEMLEVEL=1,a.Z_MAX_MEMLEVEL=9,a.Z_DEFAULT_MEMLEVEL=8,a.Z_MIN_LEVEL=-1,a.Z_MAX_LEVEL=9,a.Z_DEFAULT_LEVEL=a.Z_DEFAULT_COMPRESSION;for(var d=Object.keys(a),h=0;h<d.length;h++){var l=d[h];l.match(/^Z/)&&Object.defineProperty(t,l,{enumerable:!0,value:a[l],writable:!1})}for(var f={Z_OK:a.Z_OK,Z_STREAM_END:a.Z_STREAM_END,Z_NEED_DICT:a.Z_NEED_DICT,Z_ERRNO:a.Z_ERRNO,Z_STREAM_ERROR:a.Z_STREAM_ERROR,Z_DATA_ERROR:a.Z_DATA_ERROR,Z_MEM_ERROR:a.Z_MEM_ERROR,Z_BUF_ERROR:a.Z_BUF_ERROR,Z_VERSION_ERROR:a.Z_VERSION_ERROR},p=Object.keys(f),v=0;v<p.length;v++){var m=p[v];f[f[m]]=m}function y(e,t,r){var n=[],a=0;function s(){for(var t;null!==(t=e.read());)n.push(t),a+=t.length;e.once("readable",s)}function o(){var t,s=null;a>=c?s=new RangeError(u):t=i.concat(n,a),n=[],e.close(),r(s,t)}e.on("error",(function(t){e.removeListener("end",o),e.removeListener("readable",s),r(t)})),e.on("end",o),e.end(t),s()}function g(e,t){if("string"===typeof t&&(t=i.from(t)),!i.isBuffer(t))throw new TypeError("Not a string or buffer");var r=e._finishFlushFlag;return e._processChunk(t,r)}function b(e){if(!(this instanceof b))return new b(e);C.call(this,e,a.DEFLATE)}function k(e){if(!(this instanceof k))return new k(e);C.call(this,e,a.INFLATE)}function x(e){if(!(this instanceof x))return new x(e);C.call(this,e,a.GZIP)}function w(e){if(!(this instanceof w))return new w(e);C.call(this,e,a.GUNZIP)}function _(e){if(!(this instanceof _))return new _(e);C.call(this,e,a.DEFLATERAW)}function O(e){if(!(this instanceof O))return new O(e);C.call(this,e,a.INFLATERAW)}function T(e){if(!(this instanceof T))return new T(e);C.call(this,e,a.UNZIP)}function S(e){return e===a.Z_NO_FLUSH||e===a.Z_PARTIAL_FLUSH||e===a.Z_SYNC_FLUSH||e===a.Z_FULL_FLUSH||e===a.Z_FINISH||e===a.Z_BLOCK}function C(e,r){var s=this;if(this._opts=e=e||{},this._chunkSize=e.chunkSize||t.Z_DEFAULT_CHUNK,n.call(this,e),e.flush&&!S(e.flush))throw new Error("Invalid flush flag: "+e.flush);if(e.finishFlush&&!S(e.finishFlush))throw new Error("Invalid flush flag: "+e.finishFlush);if(this._flushFlag=e.flush||a.Z_NO_FLUSH,this._finishFlushFlag="undefined"!==typeof e.finishFlush?e.finishFlush:a.Z_FINISH,e.chunkSize&&(e.chunkSize<t.Z_MIN_CHUNK||e.chunkSize>t.Z_MAX_CHUNK))throw new Error("Invalid chunk size: "+e.chunkSize);if(e.windowBits&&(e.windowBits<t.Z_MIN_WINDOWBITS||e.windowBits>t.Z_MAX_WINDOWBITS))throw new Error("Invalid windowBits: "+e.windowBits);if(e.level&&(e.level<t.Z_MIN_LEVEL||e.level>t.Z_MAX_LEVEL))throw new Error("Invalid compression level: "+e.level);if(e.memLevel&&(e.memLevel<t.Z_MIN_MEMLEVEL||e.memLevel>t.Z_MAX_MEMLEVEL))throw new Error("Invalid memLevel: "+e.memLevel);if(e.strategy&&e.strategy!=t.Z_FILTERED&&e.strategy!=t.Z_HUFFMAN_ONLY&&e.strategy!=t.Z_RLE&&e.strategy!=t.Z_FIXED&&e.strategy!=t.Z_DEFAULT_STRATEGY)throw new Error("Invalid strategy: "+e.strategy);if(e.dictionary&&!i.isBuffer(e.dictionary))throw new Error("Invalid dictionary: it should be a Buffer instance");this._handle=new a.Zlib(r);var o=this;this._hadError=!1,this._handle.onerror=function(e,r){I(o),o._hadError=!0;var i=new Error(e);i.errno=r,i.code=t.codes[r],o.emit("error",i)};var c=t.Z_DEFAULT_COMPRESSION;"number"===typeof e.level&&(c=e.level);var u=t.Z_DEFAULT_STRATEGY;"number"===typeof e.strategy&&(u=e.strategy),this._handle.init(e.windowBits||t.Z_DEFAULT_WINDOWBITS,c,e.memLevel||t.Z_DEFAULT_MEMLEVEL,u,e.dictionary),this._buffer=i.allocUnsafe(this._chunkSize),this._offset=0,this._level=c,this._strategy=u,this.once("end",this.close),Object.defineProperty(this,"_closed",{get:function(){return!s._handle},configurable:!0,enumerable:!0})}function I(t,r){r&&e.nextTick(r),t._handle&&(t._handle.close(),t._handle=null)}function M(e){e.emit("close")}Object.defineProperty(t,"codes",{enumerable:!0,value:Object.freeze(f),writable:!1}),t.Deflate=b,t.Inflate=k,t.Gzip=x,t.Gunzip=w,t.DeflateRaw=_,t.InflateRaw=O,t.Unzip=T,t.createDeflate=function(e){return new b(e)},t.createInflate=function(e){return new k(e)},t.createDeflateRaw=function(e){return new _(e)},t.createInflateRaw=function(e){return new O(e)},t.createGzip=function(e){return new x(e)},t.createGunzip=function(e){return new w(e)},t.createUnzip=function(e){return new T(e)},t.deflate=function(e,t,r){return"function"===typeof t&&(r=t,t={}),y(new b(t),e,r)},t.deflateSync=function(e,t){return g(new b(t),e)},t.gzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),y(new x(t),e,r)},t.gzipSync=function(e,t){return g(new x(t),e)},t.deflateRaw=function(e,t,r){return"function"===typeof t&&(r=t,t={}),y(new _(t),e,r)},t.deflateRawSync=function(e,t){return g(new _(t),e)},t.unzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),y(new T(t),e,r)},t.unzipSync=function(e,t){return g(new T(t),e)},t.inflate=function(e,t,r){return"function"===typeof t&&(r=t,t={}),y(new k(t),e,r)},t.inflateSync=function(e,t){return g(new k(t),e)},t.gunzip=function(e,t,r){return"function"===typeof t&&(r=t,t={}),y(new w(t),e,r)},t.gunzipSync=function(e,t){return g(new w(t),e)},t.inflateRaw=function(e,t,r){return"function"===typeof t&&(r=t,t={}),y(new O(t),e,r)},t.inflateRawSync=function(e,t){return g(new O(t),e)},s.inherits(C,n),C.prototype.params=function(r,i,n){if(r<t.Z_MIN_LEVEL||r>t.Z_MAX_LEVEL)throw new RangeError("Invalid compression level: "+r);if(i!=t.Z_FILTERED&&i!=t.Z_HUFFMAN_ONLY&&i!=t.Z_RLE&&i!=t.Z_FIXED&&i!=t.Z_DEFAULT_STRATEGY)throw new TypeError("Invalid strategy: "+i);if(this._level!==r||this._strategy!==i){var s=this;this.flush(a.Z_SYNC_FLUSH,(function(){o(s._handle,"zlib binding closed"),s._handle.params(r,i),s._hadError||(s._level=r,s._strategy=i,n&&n())}))}else e.nextTick(n)},C.prototype.reset=function(){return o(this._handle,"zlib binding closed"),this._handle.reset()},C.prototype._flush=function(e){this._transform(i.alloc(0),"",e)},C.prototype.flush=function(t,r){var n=this,s=this._writableState;("function"===typeof t||void 0===t&&!r)&&(r=t,t=a.Z_FULL_FLUSH),s.ended?r&&e.nextTick(r):s.ending?r&&this.once("end",r):s.needDrain?r&&this.once("drain",(function(){return n.flush(t,r)})):(this._flushFlag=t,this.write(i.alloc(0),"",r))},C.prototype.close=function(t){I(this,t),e.nextTick(M,this)},C.prototype._transform=function(e,t,r){var n,s=this._writableState,o=(s.ending||s.ended)&&(!e||s.length===e.length);return null===e||i.isBuffer(e)?this._handle?(o?n=this._finishFlushFlag:(n=this._flushFlag,e.length>=s.length&&(this._flushFlag=this._opts.flush||a.Z_NO_FLUSH)),void this._processChunk(e,n,r)):r(new Error("zlib binding closed")):r(new Error("invalid input"))},C.prototype._processChunk=function(e,t,r){var n=e&&e.length,a=this._chunkSize-this._offset,s=0,d=this,h="function"===typeof r;if(!h){var l,f=[],p=0;this.on("error",(function(e){l=e})),o(this._handle,"zlib binding closed");do{var v=this._handle.writeSync(t,e,s,n,this._buffer,this._offset,a)}while(!this._hadError&&g(v[0],v[1]));if(this._hadError)throw l;if(p>=c)throw I(this),new RangeError(u);var m=i.concat(f,p);return I(this),m}o(this._handle,"zlib binding closed");var y=this._handle.write(t,e,s,n,this._buffer,this._offset,a);function g(c,u){if(this&&(this.buffer=null,this.callback=null),!d._hadError){var l=a-u;if(o(l>=0,"have should not go down"),l>0){var v=d._buffer.slice(d._offset,d._offset+l);d._offset+=l,h?d.push(v):(f.push(v),p+=v.length)}if((0===u||d._offset>=d._chunkSize)&&(a=d._chunkSize,d._offset=0,d._buffer=i.allocUnsafe(d._chunkSize)),0===u){if(s+=n-c,n=c,!h)return!0;var m=d._handle.write(t,e,s,n,d._buffer,d._offset,d._chunkSize);return m.callback=g,void(m.buffer=e)}if(!h)return!1;r()}}y.buffer=e,y.callback=g},s.inherits(b,C),s.inherits(k,C),s.inherits(x,C),s.inherits(w,C),s.inherits(_,C),s.inherits(O,C),s.inherits(T,C)}).call(this,r(23))},function(e,t,r){"use strict";(function(e,i){var n=r(79),a=r(223),s=r(224),o=r(227),c=r(230);for(var u in c)t[u]=c[u];t.NONE=0,t.DEFLATE=1,t.INFLATE=2,t.GZIP=3,t.GUNZIP=4,t.DEFLATERAW=5,t.INFLATERAW=6,t.UNZIP=7;function d(e){if("number"!==typeof e||e<t.DEFLATE||e>t.UNZIP)throw new TypeError("Bad argument");this.dictionary=null,this.err=0,this.flush=0,this.init_done=!1,this.level=0,this.memLevel=0,this.mode=e,this.strategy=0,this.windowBits=0,this.write_in_progress=!1,this.pending_close=!1,this.gzip_id_bytes_read=0}d.prototype.close=function(){this.write_in_progress?this.pending_close=!0:(this.pending_close=!1,n(this.init_done,"close before init"),n(this.mode<=t.UNZIP),this.mode===t.DEFLATE||this.mode===t.GZIP||this.mode===t.DEFLATERAW?s.deflateEnd(this.strm):this.mode!==t.INFLATE&&this.mode!==t.GUNZIP&&this.mode!==t.INFLATERAW&&this.mode!==t.UNZIP||o.inflateEnd(this.strm),this.mode=t.NONE,this.dictionary=null)},d.prototype.write=function(e,t,r,i,n,a,s){return this._write(!0,e,t,r,i,n,a,s)},d.prototype.writeSync=function(e,t,r,i,n,a,s){return this._write(!1,e,t,r,i,n,a,s)},d.prototype._write=function(r,a,s,o,c,u,d,h){if(n.equal(arguments.length,8),n(this.init_done,"write before init"),n(this.mode!==t.NONE,"already finalized"),n.equal(!1,this.write_in_progress,"write already in progress"),n.equal(!1,this.pending_close,"close is pending"),this.write_in_progress=!0,n.equal(!1,void 0===a,"must provide flush value"),this.write_in_progress=!0,a!==t.Z_NO_FLUSH&&a!==t.Z_PARTIAL_FLUSH&&a!==t.Z_SYNC_FLUSH&&a!==t.Z_FULL_FLUSH&&a!==t.Z_FINISH&&a!==t.Z_BLOCK)throw new Error("Invalid flush value");if(null==s&&(s=e.alloc(0),c=0,o=0),this.strm.avail_in=c,this.strm.input=s,this.strm.next_in=o,this.strm.avail_out=h,this.strm.output=u,this.strm.next_out=d,this.flush=a,!r)return this._process(),this._checkError()?this._afterSync():void 0;var l=this;return i.nextTick((function(){l._process(),l._after()})),this},d.prototype._afterSync=function(){var e=this.strm.avail_out,t=this.strm.avail_in;return this.write_in_progress=!1,[t,e]},d.prototype._process=function(){var e=null;switch(this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflate(this.strm,this.flush);break;case t.UNZIP:switch(this.strm.avail_in>0&&(e=this.strm.next_in),this.gzip_id_bytes_read){case 0:if(null===e)break;if(31!==this.strm.input[e]){this.mode=t.INFLATE;break}if(this.gzip_id_bytes_read=1,e++,1===this.strm.avail_in)break;case 1:if(null===e)break;139===this.strm.input[e]?(this.gzip_id_bytes_read=2,this.mode=t.GUNZIP):this.mode=t.INFLATE;break;default:throw new Error("invalid number of gzip magic number bytes read")}case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:for(this.err=o.inflate(this.strm,this.flush),this.err===t.Z_NEED_DICT&&this.dictionary&&(this.err=o.inflateSetDictionary(this.strm,this.dictionary),this.err===t.Z_OK?this.err=o.inflate(this.strm,this.flush):this.err===t.Z_DATA_ERROR&&(this.err=t.Z_NEED_DICT));this.strm.avail_in>0&&this.mode===t.GUNZIP&&this.err===t.Z_STREAM_END&&0!==this.strm.next_in[0];)this.reset(),this.err=o.inflate(this.strm,this.flush);break;default:throw new Error("Unknown mode "+this.mode)}},d.prototype._checkError=function(){switch(this.err){case t.Z_OK:case t.Z_BUF_ERROR:if(0!==this.strm.avail_out&&this.flush===t.Z_FINISH)return this._error("unexpected end of file"),!1;break;case t.Z_STREAM_END:break;case t.Z_NEED_DICT:return null==this.dictionary?this._error("Missing dictionary"):this._error("Bad dictionary"),!1;default:return this._error("Zlib error"),!1}return!0},d.prototype._after=function(){if(this._checkError()){var e=this.strm.avail_out,t=this.strm.avail_in;this.write_in_progress=!1,this.callback(t,e),this.pending_close&&this.close()}},d.prototype._error=function(e){this.strm.msg&&(e=this.strm.msg),this.onerror(e,this.err),this.write_in_progress=!1,this.pending_close&&this.close()},d.prototype.init=function(e,r,i,a,s){n(4===arguments.length||5===arguments.length,"init(windowBits, level, memLevel, strategy, [dictionary])"),n(e>=8&&e<=15,"invalid windowBits"),n(r>=-1&&r<=9,"invalid compression level"),n(i>=1&&i<=9,"invalid memlevel"),n(a===t.Z_FILTERED||a===t.Z_HUFFMAN_ONLY||a===t.Z_RLE||a===t.Z_FIXED||a===t.Z_DEFAULT_STRATEGY,"invalid strategy"),this._init(r,e,i,a,s),this._setDictionary()},d.prototype.params=function(){throw new Error("deflateParams Not supported")},d.prototype.reset=function(){this._reset(),this._setDictionary()},d.prototype._init=function(e,r,i,n,c){switch(this.level=e,this.windowBits=r,this.memLevel=i,this.strategy=n,this.flush=t.Z_NO_FLUSH,this.err=t.Z_OK,this.mode!==t.GZIP&&this.mode!==t.GUNZIP||(this.windowBits+=16),this.mode===t.UNZIP&&(this.windowBits+=32),this.mode!==t.DEFLATERAW&&this.mode!==t.INFLATERAW||(this.windowBits=-1*this.windowBits),this.strm=new a,this.mode){case t.DEFLATE:case t.GZIP:case t.DEFLATERAW:this.err=s.deflateInit2(this.strm,this.level,t.Z_DEFLATED,this.windowBits,this.memLevel,this.strategy);break;case t.INFLATE:case t.GUNZIP:case t.INFLATERAW:case t.UNZIP:this.err=o.inflateInit2(this.strm,this.windowBits);break;default:throw new Error("Unknown mode "+this.mode)}this.err!==t.Z_OK&&this._error("Init error"),this.dictionary=c,this.write_in_progress=!1,this.init_done=!0},d.prototype._setDictionary=function(){if(null!=this.dictionary){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:this.err=s.deflateSetDictionary(this.strm,this.dictionary)}this.err!==t.Z_OK&&this._error("Failed to set dictionary")}},d.prototype._reset=function(){switch(this.err=t.Z_OK,this.mode){case t.DEFLATE:case t.DEFLATERAW:case t.GZIP:this.err=s.deflateReset(this.strm);break;case t.INFLATE:case t.INFLATERAW:case t.GUNZIP:this.err=o.inflateReset(this.strm)}this.err!==t.Z_OK&&this._error("Failed to reset stream")},t.Zlib=d}).call(this,r(21).Buffer,r(23))},function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";e.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(e,t,r){"use strict";var i,n=r(60),a=r(225),s=r(116),o=r(117),c=r(226),u=-2,d=258,h=262,l=103,f=113,p=666;function v(e,t){return e.msg=c[t],t}function m(e){return(e<<1)-(e>4?9:0)}function y(e){for(var t=e.length;--t>=0;)e[t]=0}function g(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(n.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function b(e,t){a._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,g(e.strm)}function k(e,t){e.pending_buf[e.pending++]=t}function x(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function w(e,t,r,i){var a=e.avail_in;return a>i&&(a=i),0===a?0:(e.avail_in-=a,n.arraySet(t,e.input,e.next_in,a,r),1===e.state.wrap?e.adler=s(e.adler,t,a,r):2===e.state.wrap&&(e.adler=o(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)}function _(e,t){var r,i,n=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match,c=e.strstart>e.w_size-h?e.strstart-(e.w_size-h):0,u=e.window,l=e.w_mask,f=e.prev,p=e.strstart+d,v=u[a+s-1],m=u[a+s];e.prev_length>=e.good_match&&(n>>=2),o>e.lookahead&&(o=e.lookahead);do{if(u[(r=t)+s]===m&&u[r+s-1]===v&&u[r]===u[a]&&u[++r]===u[a+1]){a+=2,r++;do{}while(u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&u[++a]===u[++r]&&a<p);if(i=d-(p-a),a=p-d,i>s){if(e.match_start=t,s=i,i>=o)break;v=u[a+s-1],m=u[a+s]}}}while((t=f[t&l])>c&&0!==--n);return s<=e.lookahead?s:e.lookahead}function O(e){var t,r,i,a,s,o=e.w_size;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=o+(o-h)){n.arraySet(e.window,e.window,o,o,0),e.match_start-=o,e.strstart-=o,e.block_start-=o,t=r=e.hash_size;do{i=e.head[--t],e.head[t]=i>=o?i-o:0}while(--r);t=r=o;do{i=e.prev[--t],e.prev[t]=i>=o?i-o:0}while(--r);a+=o}if(0===e.strm.avail_in)break;if(r=w(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=r,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+3-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<h&&0!==e.strm.avail_in)}function T(e,t){for(var r,i;;){if(e.lookahead<h){if(O(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-h&&(e.match_length=_(e,r)),e.match_length>=3)if(i=a._tr_tally(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!==--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function S(e,t){for(var r,i,n;;){if(e.lookahead<h){if(O(e),e.lookahead<h&&0===t)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-h&&(e.match_length=_(e,r),e.match_length<=5&&(1===e.strategy||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=a._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+3-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!==--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(b(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((i=a._tr_tally(e,0,e.window[e.strstart-1]))&&b(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=a._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}function C(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}function I(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=8,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new n.Buf16(1146),this.dyn_dtree=new n.Buf16(122),this.bl_tree=new n.Buf16(78),y(this.dyn_ltree),y(this.dyn_dtree),y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new n.Buf16(16),this.heap=new n.Buf16(573),y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new n.Buf16(573),y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function M(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=2,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:f,e.adler=2===t.wrap?0:1,t.last_flush=0,a._tr_init(t),0):v(e,u)}function E(e){var t,r=M(e);return 0===r&&((t=e.state).window_size=2*t.w_size,y(t.head),t.max_lazy_match=i[t.level].max_lazy,t.good_match=i[t.level].good_length,t.nice_match=i[t.level].nice_length,t.max_chain_length=i[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),r}function A(e,t,r,i,a,s){if(!e)return u;var o=1;if(-1===t&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),a<1||a>9||8!==r||i<8||i>15||t<0||t>9||s<0||s>4)return v(e,u);8===i&&(i=9);var c=new I;return e.state=c,c.strm=e,c.wrap=o,c.gzhead=null,c.w_bits=i,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=a+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+3-1)/3),c.window=new n.Buf8(2*c.w_size),c.head=new n.Buf16(c.hash_size),c.prev=new n.Buf16(c.w_size),c.lit_bufsize=1<<a+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new n.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=s,c.method=r,E(e)}i=[new C(0,0,0,0,(function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(O(e),0===e.lookahead&&0===t)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,b(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-h&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(b(e,!1),e.strm.avail_out),1)})),new C(4,4,8,4,T),new C(4,5,16,8,T),new C(4,6,32,32,T),new C(4,4,16,16,S),new C(8,16,32,32,S),new C(8,16,128,128,S),new C(8,32,128,256,S),new C(32,128,258,1024,S),new C(32,258,258,4096,S)],t.deflateInit=function(e,t){return A(e,t,8,15,8,0)},t.deflateInit2=A,t.deflateReset=E,t.deflateResetKeep=M,t.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?u:(e.state.gzhead=t,0):u},t.deflate=function(e,t){var r,n,s,c;if(!e||!e.state||t>5||t<0)return e?v(e,u):u;if(n=e.state,!e.output||!e.input&&0!==e.avail_in||n.status===p&&4!==t)return v(e,0===e.avail_out?-5:u);if(n.strm=e,r=n.last_flush,n.last_flush=t,42===n.status)if(2===n.wrap)e.adler=0,k(n,31),k(n,139),k(n,8),n.gzhead?(k(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),k(n,255&n.gzhead.time),k(n,n.gzhead.time>>8&255),k(n,n.gzhead.time>>16&255),k(n,n.gzhead.time>>24&255),k(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),k(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(k(n,255&n.gzhead.extra.length),k(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=o(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69):(k(n,0),k(n,0),k(n,0),k(n,0),k(n,0),k(n,9===n.level?2:n.strategy>=2||n.level<2?4:0),k(n,3),n.status=f);else{var h=8+(n.w_bits-8<<4)<<8;h|=(n.strategy>=2||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(h|=32),h+=31-h%31,n.status=f,x(n,h),0!==n.strstart&&(x(n,e.adler>>>16),x(n,65535&e.adler)),e.adler=1}if(69===n.status)if(n.gzhead.extra){for(s=n.pending;n.gzindex<(65535&n.gzhead.extra.length)&&(n.pending!==n.pending_buf_size||(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),g(e),s=n.pending,n.pending!==n.pending_buf_size));)k(n,255&n.gzhead.extra[n.gzindex]),n.gzindex++;n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),n.gzindex===n.gzhead.extra.length&&(n.gzindex=0,n.status=73)}else n.status=73;if(73===n.status)if(n.gzhead.name){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),g(e),s=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,k(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),0===c&&(n.gzindex=0,n.status=91)}else n.status=91;if(91===n.status)if(n.gzhead.comment){s=n.pending;do{if(n.pending===n.pending_buf_size&&(n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),g(e),s=n.pending,n.pending===n.pending_buf_size)){c=1;break}c=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,k(n,c)}while(0!==c);n.gzhead.hcrc&&n.pending>s&&(e.adler=o(e.adler,n.pending_buf,n.pending-s,s)),0===c&&(n.status=l)}else n.status=l;if(n.status===l&&(n.gzhead.hcrc?(n.pending+2>n.pending_buf_size&&g(e),n.pending+2<=n.pending_buf_size&&(k(n,255&e.adler),k(n,e.adler>>8&255),e.adler=0,n.status=f)):n.status=f),0!==n.pending){if(g(e),0===e.avail_out)return n.last_flush=-1,0}else if(0===e.avail_in&&m(t)<=m(r)&&4!==t)return v(e,-5);if(n.status===p&&0!==e.avail_in)return v(e,-5);if(0!==e.avail_in||0!==n.lookahead||0!==t&&n.status!==p){var w=2===n.strategy?function(e,t){for(var r;;){if(0===e.lookahead&&(O(e),0===e.lookahead)){if(0===t)return 1;break}if(e.match_length=0,r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(n,t):3===n.strategy?function(e,t){for(var r,i,n,s,o=e.window;;){if(e.lookahead<=d){if(O(e),e.lookahead<=d&&0===t)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(i=o[n=e.strstart-1])===o[++n]&&i===o[++n]&&i===o[++n]){s=e.strstart+d;do{}while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<s);e.match_length=d-(s-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=a._tr_tally(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=a._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(b(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,4===t?(b(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(b(e,!1),0===e.strm.avail_out)?1:2}(n,t):i[n.level].func(n,t);if(3!==w&&4!==w||(n.status=p),1===w||3===w)return 0===e.avail_out&&(n.last_flush=-1),0;if(2===w&&(1===t?a._tr_align(n):5!==t&&(a._tr_stored_block(n,0,0,!1),3===t&&(y(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),g(e),0===e.avail_out))return n.last_flush=-1,0}return 4!==t?0:n.wrap<=0?1:(2===n.wrap?(k(n,255&e.adler),k(n,e.adler>>8&255),k(n,e.adler>>16&255),k(n,e.adler>>24&255),k(n,255&e.total_in),k(n,e.total_in>>8&255),k(n,e.total_in>>16&255),k(n,e.total_in>>24&255)):(x(n,e.adler>>>16),x(n,65535&e.adler)),g(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?0:1)},t.deflateEnd=function(e){var t;return e&&e.state?42!==(t=e.state.status)&&69!==t&&73!==t&&91!==t&&t!==l&&t!==f&&t!==p?v(e,u):(e.state=null,t===f?v(e,-3):0):u},t.deflateSetDictionary=function(e,t){var r,i,a,o,c,d,h,l,f=t.length;if(!e||!e.state)return u;if(2===(o=(r=e.state).wrap)||1===o&&42!==r.status||r.lookahead)return u;for(1===o&&(e.adler=s(e.adler,t,f,0)),r.wrap=0,f>=r.w_size&&(0===o&&(y(r.head),r.strstart=0,r.block_start=0,r.insert=0),l=new n.Buf8(r.w_size),n.arraySet(l,t,f-r.w_size,r.w_size,0),t=l,f=r.w_size),c=e.avail_in,d=e.next_in,h=e.input,e.avail_in=f,e.next_in=0,e.input=t,O(r);r.lookahead>=3;){i=r.strstart,a=r.lookahead-2;do{r.ins_h=(r.ins_h<<r.hash_shift^r.window[i+3-1])&r.hash_mask,r.prev[i&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=i,i++}while(--a);r.strstart=i,r.lookahead=2,O(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=d,e.input=h,e.avail_in=c,r.wrap=o,0},t.deflateInfo="pako deflate (from Nodeca project)"},function(e,t,r){"use strict";var i=r(60);function n(e){for(var t=e.length;--t>=0;)e[t]=0}var a=256,s=286,o=30,c=15,u=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],d=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],l=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],f=new Array(576);n(f);var p=new Array(60);n(p);var v=new Array(512);n(v);var m=new Array(256);n(m);var y=new Array(29);n(y);var g,b,k,x=new Array(o);function w(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function O(e){return e<256?v[e]:v[256+(e>>>7)]}function T(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function S(e,t,r){e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,T(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function C(e,t,r){S(e,r[2*t],r[2*t+1])}function I(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function M(e,t,r){var i,n,a=new Array(16),s=0;for(i=1;i<=c;i++)a[i]=s=s+r[i-1]<<1;for(n=0;n<=t;n++){var o=e[2*n+1];0!==o&&(e[2*n]=I(a[o]++,o))}}function E(e){var t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<o;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function A(e){e.bi_valid>8?T(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function F(e,t,r,i){var n=2*t,a=2*r;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]}function P(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&F(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!F(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}function B(e,t,r){var i,n,s,o,c=0;if(0!==e.last_lit)do{i=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],n=e.pending_buf[e.l_buf+c],c++,0===i?C(e,n,t):(C(e,(s=m[n])+a+1,t),0!==(o=u[s])&&S(e,n-=y[s],o),C(e,s=O(--i),r),0!==(o=d[s])&&S(e,i-=x[s],o))}while(c<e.last_lit);C(e,256,t)}function R(e,t){var r,i,n,a=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,u=t.stat_desc.elems,d=-1;for(e.heap_len=0,e.heap_max=573,r=0;r<u;r++)0!==a[2*r]?(e.heap[++e.heap_len]=d=r,e.depth[r]=0):a[2*r+1]=0;for(;e.heap_len<2;)a[2*(n=e.heap[++e.heap_len]=d<2?++d:0)]=1,e.depth[n]=0,e.opt_len--,o&&(e.static_len-=s[2*n+1]);for(t.max_code=d,r=e.heap_len>>1;r>=1;r--)P(e,a,r);n=u;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],P(e,a,1),i=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=i,a[2*n]=a[2*r]+a[2*i],e.depth[n]=(e.depth[r]>=e.depth[i]?e.depth[r]:e.depth[i])+1,a[2*r+1]=a[2*i+1]=n,e.heap[1]=n++,P(e,a,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,i,n,a,s,o,u=t.dyn_tree,d=t.max_code,h=t.stat_desc.static_tree,l=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,v=t.stat_desc.max_length,m=0;for(a=0;a<=c;a++)e.bl_count[a]=0;for(u[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<573;r++)(a=u[2*u[2*(i=e.heap[r])+1]+1]+1)>v&&(a=v,m++),u[2*i+1]=a,i>d||(e.bl_count[a]++,s=0,i>=p&&(s=f[i-p]),o=u[2*i],e.opt_len+=o*(a+s),l&&(e.static_len+=o*(h[2*i+1]+s)));if(0!==m){do{for(a=v-1;0===e.bl_count[a];)a--;e.bl_count[a]--,e.bl_count[a+1]+=2,e.bl_count[v]--,m-=2}while(m>0);for(a=v;0!==a;a--)for(i=e.bl_count[a];0!==i;)(n=e.heap[--r])>d||(u[2*n+1]!==a&&(e.opt_len+=(a-u[2*n+1])*u[2*n],u[2*n+1]=a),i--)}}(e,t),M(a,d,e.bl_count)}function V(e,t,r){var i,n,a=-1,s=t[1],o=0,c=7,u=4;for(0===s&&(c=138,u=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=s,s=t[2*(i+1)+1],++o<c&&n===s||(o<u?e.bl_tree[2*n]+=o:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=n,0===s?(c=138,u=3):n===s?(c=6,u=3):(c=7,u=4))}function L(e,t,r){var i,n,a=-1,s=t[1],o=0,c=7,u=4;for(0===s&&(c=138,u=3),i=0;i<=r;i++)if(n=s,s=t[2*(i+1)+1],!(++o<c&&n===s)){if(o<u)do{C(e,n,e.bl_tree)}while(0!==--o);else 0!==n?(n!==a&&(C(e,n,e.bl_tree),o--),C(e,16,e.bl_tree),S(e,o-3,2)):o<=10?(C(e,17,e.bl_tree),S(e,o-3,3)):(C(e,18,e.bl_tree),S(e,o-11,7));o=0,a=n,0===s?(c=138,u=3):n===s?(c=6,u=3):(c=7,u=4)}}n(x);var D=!1;function q(e,t,r,n){S(e,0+(n?1:0),3),function(e,t,r,n){A(e),n&&(T(e,r),T(e,~r)),i.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}t._tr_init=function(e){D||(!function(){var e,t,r,i,n,a=new Array(16);for(r=0,i=0;i<28;i++)for(y[i]=r,e=0;e<1<<u[i];e++)m[r++]=i;for(m[r-1]=i,n=0,i=0;i<16;i++)for(x[i]=n,e=0;e<1<<d[i];e++)v[n++]=i;for(n>>=7;i<o;i++)for(x[i]=n<<7,e=0;e<1<<d[i]-7;e++)v[256+n++]=i;for(t=0;t<=c;t++)a[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,a[8]++;for(;e<=255;)f[2*e+1]=9,e++,a[9]++;for(;e<=279;)f[2*e+1]=7,e++,a[7]++;for(;e<=287;)f[2*e+1]=8,e++,a[8]++;for(M(f,287,a),e=0;e<o;e++)p[2*e+1]=5,p[2*e]=I(e,5);g=new w(f,u,257,s,c),b=new w(p,d,0,o,c),k=new w(new Array(0),h,0,19,7)}(),D=!0),e.l_desc=new _(e.dyn_ltree,g),e.d_desc=new _(e.dyn_dtree,b),e.bl_desc=new _(e.bl_tree,k),e.bi_buf=0,e.bi_valid=0,E(e)},t._tr_stored_block=q,t._tr_flush_block=function(e,t,r,i){var n,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<a;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0}(e)),R(e,e.l_desc),R(e,e.d_desc),o=function(e){var t;for(V(e,e.dyn_ltree,e.l_desc.max_code),V(e,e.dyn_dtree,e.d_desc.max_code),R(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*l[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=n&&(n=s)):n=s=r+5,r+4<=n&&-1!==t?q(e,t,r,i):4===e.strategy||s===n?(S(e,2+(i?1:0),3),B(e,f,p)):(S(e,4+(i?1:0),3),function(e,t,r,i){var n;for(S(e,t-257,5),S(e,r-1,5),S(e,i-4,4),n=0;n<i;n++)S(e,e.bl_tree[2*l[n]+1],3);L(e,e.dyn_ltree,t-1),L(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),B(e,e.dyn_ltree,e.dyn_dtree)),E(e),i&&A(e)},t._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(m[r]+a+1)]++,e.dyn_dtree[2*O(t)]++),e.last_lit===e.lit_bufsize-1},t._tr_align=function(e){S(e,2,3),C(e,256,f),function(e){16===e.bi_valid?(T(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},function(e,t,r){"use strict";e.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(e,t,r){"use strict";var i=r(60),n=r(116),a=r(117),s=r(228),o=r(229),c=-2,u=12,d=30;function h(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function l(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new i.Buf32(852),t.distcode=t.distdyn=new i.Buf32(592),t.sane=1,t.back=-1,0):c}function p(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,f(e)):c}function v(e,t){var r,i;return e&&e.state?(i=e.state,t<0?(r=0,t=-t):(r=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?c:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,p(e))):c}function m(e,t){var r,i;return e?(i=new l,e.state=i,i.window=null,0!==(r=v(e,t))&&(e.state=null),r):c}var y,g,b=!0;function k(e){if(b){var t;for(y=new i.Buf32(512),g=new i.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(1,e.lens,0,288,y,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(2,e.lens,0,32,g,0,e.work,{bits:5}),b=!1}e.lencode=y,e.lenbits=9,e.distcode=g,e.distbits=5}function x(e,t,r,n){var a,s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new i.Buf8(s.wsize)),n>=s.wsize?(i.arraySet(s.window,t,r-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((a=s.wsize-s.wnext)>n&&(a=n),i.arraySet(s.window,t,r-n,a,s.wnext),(n-=a)?(i.arraySet(s.window,t,r-n,n,0),s.wnext=n,s.whave=s.wsize):(s.wnext+=a,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=a))),0}t.inflateReset=p,t.inflateReset2=v,t.inflateResetKeep=f,t.inflateInit=function(e){return m(e,15)},t.inflateInit2=m,t.inflate=function(e,t){var r,l,f,p,v,m,y,g,b,w,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L=0,D=new i.Buf8(4),q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return c;(r=e.state).mode===u&&(r.mode=13),v=e.next_out,f=e.output,y=e.avail_out,p=e.next_in,l=e.input,m=e.avail_in,g=r.hold,b=r.bits,w=m,_=y,B=0;e:for(;;)switch(r.mode){case 1:if(0===r.wrap){r.mode=13;break}for(;b<16;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(2&r.wrap&&35615===g){r.check=0,D[0]=255&g,D[1]=g>>>8&255,r.check=a(r.check,D,2,0),g=0,b=0,r.mode=2;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&g)<<8)+(g>>8))%31){e.msg="incorrect header check",r.mode=d;break}if(8!==(15&g)){e.msg="unknown compression method",r.mode=d;break}if(b-=4,P=8+(15&(g>>>=4)),0===r.wbits)r.wbits=P;else if(P>r.wbits){e.msg="invalid window size",r.mode=d;break}r.dmax=1<<P,e.adler=r.check=1,r.mode=512&g?10:u,g=0,b=0;break;case 2:for(;b<16;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(r.flags=g,8!==(255&r.flags)){e.msg="unknown compression method",r.mode=d;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=d;break}r.head&&(r.head.text=g>>8&1),512&r.flags&&(D[0]=255&g,D[1]=g>>>8&255,r.check=a(r.check,D,2,0)),g=0,b=0,r.mode=3;case 3:for(;b<32;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}r.head&&(r.head.time=g),512&r.flags&&(D[0]=255&g,D[1]=g>>>8&255,D[2]=g>>>16&255,D[3]=g>>>24&255,r.check=a(r.check,D,4,0)),g=0,b=0,r.mode=4;case 4:for(;b<16;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}r.head&&(r.head.xflags=255&g,r.head.os=g>>8),512&r.flags&&(D[0]=255&g,D[1]=g>>>8&255,r.check=a(r.check,D,2,0)),g=0,b=0,r.mode=5;case 5:if(1024&r.flags){for(;b<16;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}r.length=g,r.head&&(r.head.extra_len=g),512&r.flags&&(D[0]=255&g,D[1]=g>>>8&255,r.check=a(r.check,D,2,0)),g=0,b=0}else r.head&&(r.head.extra=null);r.mode=6;case 6:if(1024&r.flags&&((O=r.length)>m&&(O=m),O&&(r.head&&(P=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),i.arraySet(r.head.extra,l,p,O,P)),512&r.flags&&(r.check=a(r.check,l,O,p)),m-=O,p+=O,r.length-=O),r.length))break e;r.length=0,r.mode=7;case 7:if(2048&r.flags){if(0===m)break e;O=0;do{P=l[p+O++],r.head&&P&&r.length<65536&&(r.head.name+=String.fromCharCode(P))}while(P&&O<m);if(512&r.flags&&(r.check=a(r.check,l,O,p)),m-=O,p+=O,P)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=8;case 8:if(4096&r.flags){if(0===m)break e;O=0;do{P=l[p+O++],r.head&&P&&r.length<65536&&(r.head.comment+=String.fromCharCode(P))}while(P&&O<m);if(512&r.flags&&(r.check=a(r.check,l,O,p)),m-=O,p+=O,P)break e}else r.head&&(r.head.comment=null);r.mode=9;case 9:if(512&r.flags){for(;b<16;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(g!==(65535&r.check)){e.msg="header crc mismatch",r.mode=d;break}g=0,b=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=u;break;case 10:for(;b<32;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}e.adler=r.check=h(g),g=0,b=0,r.mode=11;case 11:if(0===r.havedict)return e.next_out=v,e.avail_out=y,e.next_in=p,e.avail_in=m,r.hold=g,r.bits=b,2;e.adler=r.check=1,r.mode=u;case u:if(5===t||6===t)break e;case 13:if(r.last){g>>>=7&b,b-=7&b,r.mode=27;break}for(;b<3;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}switch(r.last=1&g,b-=1,3&(g>>>=1)){case 0:r.mode=14;break;case 1:if(k(r),r.mode=20,6===t){g>>>=2,b-=2;break e}break;case 2:r.mode=17;break;case 3:e.msg="invalid block type",r.mode=d}g>>>=2,b-=2;break;case 14:for(g>>>=7&b,b-=7&b;b<32;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if((65535&g)!==(g>>>16^65535)){e.msg="invalid stored block lengths",r.mode=d;break}if(r.length=65535&g,g=0,b=0,r.mode=15,6===t)break e;case 15:r.mode=16;case 16:if(O=r.length){if(O>m&&(O=m),O>y&&(O=y),0===O)break e;i.arraySet(f,l,p,O,v),m-=O,p+=O,y-=O,v+=O,r.length-=O;break}r.mode=u;break;case 17:for(;b<14;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(r.nlen=257+(31&g),g>>>=5,b-=5,r.ndist=1+(31&g),g>>>=5,b-=5,r.ncode=4+(15&g),g>>>=4,b-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=d;break}r.have=0,r.mode=18;case 18:for(;r.have<r.ncode;){for(;b<3;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}r.lens[q[r.have++]]=7&g,g>>>=3,b-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,R={bits:r.lenbits},B=o(0,r.lens,0,19,r.lencode,0,r.work,R),r.lenbits=R.bits,B){e.msg="invalid code lengths set",r.mode=d;break}r.have=0,r.mode=19;case 19:for(;r.have<r.nlen+r.ndist;){for(;I=(L=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&L,!((C=L>>>24)<=b);){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(M<16)g>>>=C,b-=C,r.lens[r.have++]=M;else{if(16===M){for(V=C+2;b<V;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(g>>>=C,b-=C,0===r.have){e.msg="invalid bit length repeat",r.mode=d;break}P=r.lens[r.have-1],O=3+(3&g),g>>>=2,b-=2}else if(17===M){for(V=C+3;b<V;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}b-=C,P=0,O=3+(7&(g>>>=C)),g>>>=3,b-=3}else{for(V=C+7;b<V;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}b-=C,P=0,O=11+(127&(g>>>=C)),g>>>=7,b-=7}if(r.have+O>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=d;break}for(;O--;)r.lens[r.have++]=P}}if(r.mode===d)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=d;break}if(r.lenbits=9,R={bits:r.lenbits},B=o(1,r.lens,0,r.nlen,r.lencode,0,r.work,R),r.lenbits=R.bits,B){e.msg="invalid literal/lengths set",r.mode=d;break}if(r.distbits=6,r.distcode=r.distdyn,R={bits:r.distbits},B=o(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,R),r.distbits=R.bits,B){e.msg="invalid distances set",r.mode=d;break}if(r.mode=20,6===t)break e;case 20:r.mode=21;case 21:if(m>=6&&y>=258){e.next_out=v,e.avail_out=y,e.next_in=p,e.avail_in=m,r.hold=g,r.bits=b,s(e,_),v=e.next_out,f=e.output,y=e.avail_out,p=e.next_in,l=e.input,m=e.avail_in,g=r.hold,b=r.bits,r.mode===u&&(r.back=-1);break}for(r.back=0;I=(L=r.lencode[g&(1<<r.lenbits)-1])>>>16&255,M=65535&L,!((C=L>>>24)<=b);){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(I&&0===(240&I)){for(E=C,A=I,F=M;I=(L=r.lencode[F+((g&(1<<E+A)-1)>>E)])>>>16&255,M=65535&L,!(E+(C=L>>>24)<=b);){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}g>>>=E,b-=E,r.back+=E}if(g>>>=C,b-=C,r.back+=C,r.length=M,0===I){r.mode=26;break}if(32&I){r.back=-1,r.mode=u;break}if(64&I){e.msg="invalid literal/length code",r.mode=d;break}r.extra=15&I,r.mode=22;case 22:if(r.extra){for(V=r.extra;b<V;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}r.length+=g&(1<<r.extra)-1,g>>>=r.extra,b-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=23;case 23:for(;I=(L=r.distcode[g&(1<<r.distbits)-1])>>>16&255,M=65535&L,!((C=L>>>24)<=b);){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(0===(240&I)){for(E=C,A=I,F=M;I=(L=r.distcode[F+((g&(1<<E+A)-1)>>E)])>>>16&255,M=65535&L,!(E+(C=L>>>24)<=b);){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}g>>>=E,b-=E,r.back+=E}if(g>>>=C,b-=C,r.back+=C,64&I){e.msg="invalid distance code",r.mode=d;break}r.offset=M,r.extra=15&I,r.mode=24;case 24:if(r.extra){for(V=r.extra;b<V;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}r.offset+=g&(1<<r.extra)-1,g>>>=r.extra,b-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=d;break}r.mode=25;case 25:if(0===y)break e;if(O=_-y,r.offset>O){if((O=r.offset-O)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=d;break}O>r.wnext?(O-=r.wnext,T=r.wsize-O):T=r.wnext-O,O>r.length&&(O=r.length),S=r.window}else S=f,T=v-r.offset,O=r.length;O>y&&(O=y),y-=O,r.length-=O;do{f[v++]=S[T++]}while(--O);0===r.length&&(r.mode=21);break;case 26:if(0===y)break e;f[v++]=r.length,y--,r.mode=21;break;case 27:if(r.wrap){for(;b<32;){if(0===m)break e;m--,g|=l[p++]<<b,b+=8}if(_-=y,e.total_out+=_,r.total+=_,_&&(e.adler=r.check=r.flags?a(r.check,f,_,v-_):n(r.check,f,_,v-_)),_=y,(r.flags?g:h(g))!==r.check){e.msg="incorrect data check",r.mode=d;break}g=0,b=0}r.mode=28;case 28:if(r.wrap&&r.flags){for(;b<32;){if(0===m)break e;m--,g+=l[p++]<<b,b+=8}if(g!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=d;break}g=0,b=0}r.mode=29;case 29:B=1;break e;case d:B=-3;break e;case 31:return-4;case 32:default:return c}return e.next_out=v,e.avail_out=y,e.next_in=p,e.avail_in=m,r.hold=g,r.bits=b,(r.wsize||_!==e.avail_out&&r.mode<d&&(r.mode<27||4!==t))&&x(e,e.output,e.next_out,_-e.avail_out)?(r.mode=31,-4):(w-=e.avail_in,_-=e.avail_out,e.total_in+=w,e.total_out+=_,r.total+=_,r.wrap&&_&&(e.adler=r.check=r.flags?a(r.check,f,_,e.next_out-_):n(r.check,f,_,e.next_out-_)),e.data_type=r.bits+(r.last?64:0)+(r.mode===u?128:0)+(20===r.mode||15===r.mode?256:0),(0===w&&0===_||4===t)&&0===B&&(B=-5),B)},t.inflateEnd=function(e){if(!e||!e.state)return c;var t=e.state;return t.window&&(t.window=null),e.state=null,0},t.inflateGetHeader=function(e,t){var r;return e&&e.state?0===(2&(r=e.state).wrap)?c:(r.head=t,t.done=!1,0):c},t.inflateSetDictionary=function(e,t){var r,i=t.length;return e&&e.state?0!==(r=e.state).wrap&&11!==r.mode?c:11===r.mode&&n(1,t,i,0)!==r.check?-3:x(e,t,i,i)?(r.mode=31,-4):(r.havedict=1,0):c},t.inflateInfo="pako inflate (from Nodeca project)"},function(e,t,r){"use strict";e.exports=function(e,t){var r,i,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S;r=e.state,i=e.next_in,T=e.input,n=i+(e.avail_in-5),a=e.next_out,S=e.output,s=a-(t-e.avail_out),o=a+(e.avail_out-257),c=r.dmax,u=r.wsize,d=r.whave,h=r.wnext,l=r.window,f=r.hold,p=r.bits,v=r.lencode,m=r.distcode,y=(1<<r.lenbits)-1,g=(1<<r.distbits)-1;e:do{p<15&&(f+=T[i++]<<p,p+=8,f+=T[i++]<<p,p+=8),b=v[f&y];t:for(;;){if(f>>>=k=b>>>24,p-=k,0===(k=b>>>16&255))S[a++]=65535&b;else{if(!(16&k)){if(0===(64&k)){b=v[(65535&b)+(f&(1<<k)-1)];continue t}if(32&k){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}x=65535&b,(k&=15)&&(p<k&&(f+=T[i++]<<p,p+=8),x+=f&(1<<k)-1,f>>>=k,p-=k),p<15&&(f+=T[i++]<<p,p+=8,f+=T[i++]<<p,p+=8),b=m[f&g];r:for(;;){if(f>>>=k=b>>>24,p-=k,!(16&(k=b>>>16&255))){if(0===(64&k)){b=m[(65535&b)+(f&(1<<k)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(w=65535&b,p<(k&=15)&&(f+=T[i++]<<p,(p+=8)<k&&(f+=T[i++]<<p,p+=8)),(w+=f&(1<<k)-1)>c){e.msg="invalid distance too far back",r.mode=30;break e}if(f>>>=k,p-=k,w>(k=a-s)){if((k=w-k)>d&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(_=0,O=l,0===h){if(_+=u-k,k<x){x-=k;do{S[a++]=l[_++]}while(--k);_=a-w,O=S}}else if(h<k){if(_+=u+h-k,(k-=h)<x){x-=k;do{S[a++]=l[_++]}while(--k);if(_=0,h<x){x-=k=h;do{S[a++]=l[_++]}while(--k);_=a-w,O=S}}}else if(_+=h-k,k<x){x-=k;do{S[a++]=l[_++]}while(--k);_=a-w,O=S}for(;x>2;)S[a++]=O[_++],S[a++]=O[_++],S[a++]=O[_++],x-=3;x&&(S[a++]=O[_++],x>1&&(S[a++]=O[_++]))}else{_=a-w;do{S[a++]=S[_++],S[a++]=S[_++],S[a++]=S[_++],x-=3}while(x>2);x&&(S[a++]=S[_++],x>1&&(S[a++]=S[_++]))}break}}break}}while(i<n&&a<o);i-=x=p>>3,f&=(1<<(p-=x<<3))-1,e.next_in=i,e.next_out=a,e.avail_in=i<n?n-i+5:5-(i-n),e.avail_out=a<o?o-a+257:257-(a-o),r.hold=f,r.bits=p}},function(e,t,r){"use strict";var i=r(60),n=15,a=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];e.exports=function(e,t,r,u,d,h,l,f){var p,v,m,y,g,b,k,x,w,_=f.bits,O=0,T=0,S=0,C=0,I=0,M=0,E=0,A=0,F=0,P=0,B=null,R=0,V=new i.Buf16(16),L=new i.Buf16(16),D=null,q=0;for(O=0;O<=n;O++)V[O]=0;for(T=0;T<u;T++)V[t[r+T]]++;for(I=_,C=n;C>=1&&0===V[C];C--);if(I>C&&(I=C),0===C)return d[h++]=20971520,d[h++]=20971520,f.bits=1,0;for(S=1;S<C&&0===V[S];S++);for(I<S&&(I=S),A=1,O=1;O<=n;O++)if(A<<=1,(A-=V[O])<0)return-1;if(A>0&&(0===e||1!==C))return-1;for(L[1]=0,O=1;O<n;O++)L[O+1]=L[O]+V[O];for(T=0;T<u;T++)0!==t[r+T]&&(l[L[t[r+T]]++]=T);if(0===e?(B=D=l,b=19):1===e?(B=a,R-=257,D=s,q-=257,b=256):(B=o,D=c,b=-1),P=0,T=0,O=S,g=h,M=I,E=0,m=-1,y=(F=1<<I)-1,1===e&&F>852||2===e&&F>592)return 1;for(;;){k=O-E,l[T]<b?(x=0,w=l[T]):l[T]>b?(x=D[q+l[T]],w=B[R+l[T]]):(x=96,w=0),p=1<<O-E,S=v=1<<M;do{d[g+(P>>E)+(v-=p)]=k<<24|x<<16|w|0}while(0!==v);for(p=1<<O-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,T++,0===--V[O]){if(O===C)break;O=t[r+l[T]]}if(O>I&&(P&y)!==m){for(0===E&&(E=I),g+=S,A=1<<(M=O-E);M+E<C&&!((A-=V[M+E])<=0);)M++,A<<=1;if(F+=1<<M,1===e&&F>852||2===e&&F>592)return 1;d[m=P&y]=I<<24|M<<16|g-h|0}}return 0!==P&&(d[g+P]=O-E<<24|64<<16|0),f.bits=I,0}},function(e,t,r){"use strict";e.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(e,t,r){"use strict";var i=r(98),n=r(118),a=(n.isObject,n.isNumber),s=n.isDictionary,o=n.isArray,c=Object.keys,u=function(e){return o(e)?e:Object.values(e)},d=function(e){return new Set(u(e))},h=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return Object.assign.apply(Object,[{}].concat(t))},l=function(e){return o(e)?Array.from(e):h(e)};e.exports={keys:c,values:u,extend:h,clone:l,index:d,ordered:function(e){return e},unique:function(e){return Array.from(d(e))},arrayConcat:function(e,t){return e.concat(t)},inArray:function(e,t){return t.includes(e)},toArray:function(e){return Object.values(e)},isEmpty:function(e){return!e||(Array.isArray(e)?e:Object.keys(e)).length<1},keysort:function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=i(c(e).sort());try{for(n.s();!(t=n.n()).done;){var a=t.value;r[a]=e[a]}}catch(s){n.e(s)}finally{n.f()}return r},indexBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i(u(e));try{for(a.s();!(r=a.n()).done;){var s=r.value;t in s&&(n[s[t]]=s)}}catch(o){a.e(o)}finally{a.f()}return n},groupBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=i(u(e));try{for(a.s();!(r=a.n()).done;){var s=r.value;if(t in s){var o=s[t];n[o]=n[o]||[],n[o].push(s)}}}catch(c){a.e(c)}finally{a.f()}return n},filterBy:function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=i(u(e));try{for(s.s();!(r=s.n()).done;){var o=r.value;o[t]===n&&a.push(o)}}catch(c){s.e(c)}finally{s.f()}return a},sortBy:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r?-1:1;return e.sort((function(e,r){return e[t]<r[t]?-i:e[t]>r[t]?i:0}))},flatten:function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=i(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;o(s)?e(s,n):n.push(s)}}catch(c){a.e(c)}finally{a.f()}return n},pluck:function(e,t){return u(e).filter((function(e){return t in e})).map((function(e){return e[t]}))},omit:function(e){if(!Array.isArray(e)){for(var t=l(e),r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];for(var s=0,c=n;s<c.length;s++){var u=c[s];if(o(u)){var d,h=i(u);try{for(h.s();!(d=h.n()).done;){var f=d.value;delete t[f]}}catch(p){h.e(p)}finally{h.f()}}else delete t[u]}return t}return e},sum:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t.filter(a);return i.length>0?i.reduce((function(e,t){return e+t}),0):void 0},deepExtend:function e(){for(var t=void 0,r=arguments.length,i=new Array(r),n=0;n<r;n++)i[n]=arguments[n];for(var a=0,o=i;a<o.length;a++){var c=o[a];if(s(c))for(var u in s(t)||(t={}),c)t[u]=e(t[u],c[u]);else t=c}return t}}},function(e,t,r){var i=r(233),n=r(234),a=r(73),s=r(235);e.exports=function(e){return i(e)||n(e)||a(e)||s()}},function(e,t,r){var i=r(96);e.exports=function(e){if(Array.isArray(e))return i(e)}},function(e,t){e.exports=function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t,r){"use strict";var i=r(237),n=r(238),a=r(120);e.exports={formats:a,parse:n,stringify:i}},function(e,t,r){"use strict";var i=r(119),n=r(120),a=Object.prototype.hasOwnProperty,s={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},o=Array.isArray,c=Array.prototype.push,u=function(e,t){c.apply(e,o(t)?t:[t])},d=Date.prototype.toISOString,h={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:i.encode,encodeValuesOnly:!1,formatter:n.formatters[n.default],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},l=function e(t,r,n,a,s,c,d,l,f,p,v,m,y){var g=t;if("function"===typeof d?g=d(r,g):g instanceof Date?g=p(g):"comma"===n&&o(g)&&(g=g.join(",")),null===g){if(a)return c&&!m?c(r,h.encoder,y):r;g=""}if("string"===typeof g||"number"===typeof g||"boolean"===typeof g||i.isBuffer(g))return c?[v(m?r:c(r,h.encoder,y))+"="+v(c(g,h.encoder,y))]:[v(r)+"="+v(String(g))];var b,k=[];if("undefined"===typeof g)return k;if(o(d))b=d;else{var x=Object.keys(g);b=l?x.sort(l):x}for(var w=0;w<b.length;++w){var _=b[w];s&&null===g[_]||(o(g)?u(k,e(g[_],"function"===typeof n?n(r,_):r,n,a,s,c,d,l,f,p,v,m,y)):u(k,e(g[_],r+(f?"."+_:"["+_+"]"),n,a,s,c,d,l,f,p,v,m,y)))}return k};e.exports=function(e,t){var r,i=e,c=function(e){if(!e)return h;if(null!==e.encoder&&void 0!==e.encoder&&"function"!==typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||h.charset;if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=n.default;if("undefined"!==typeof e.format){if(!a.call(n.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=n.formatters[r],s=h.filter;return("function"===typeof e.filter||o(e.filter))&&(s=e.filter),{addQueryPrefix:"boolean"===typeof e.addQueryPrefix?e.addQueryPrefix:h.addQueryPrefix,allowDots:"undefined"===typeof e.allowDots?h.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:h.charsetSentinel,delimiter:"undefined"===typeof e.delimiter?h.delimiter:e.delimiter,encode:"boolean"===typeof e.encode?e.encode:h.encode,encoder:"function"===typeof e.encoder?e.encoder:h.encoder,encodeValuesOnly:"boolean"===typeof e.encodeValuesOnly?e.encodeValuesOnly:h.encodeValuesOnly,filter:s,formatter:i,serializeDate:"function"===typeof e.serializeDate?e.serializeDate:h.serializeDate,skipNulls:"boolean"===typeof e.skipNulls?e.skipNulls:h.skipNulls,sort:"function"===typeof e.sort?e.sort:null,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:h.strictNullHandling}}(t);"function"===typeof c.filter?i=(0,c.filter)("",i):o(c.filter)&&(r=c.filter);var d,f=[];if("object"!==typeof i||null===i)return"";d=t&&t.arrayFormat in s?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=s[d];r||(r=Object.keys(i)),c.sort&&r.sort(c.sort);for(var v=0;v<r.length;++v){var m=r[v];c.skipNulls&&null===i[m]||u(f,l(i[m],m,p,c.strictNullHandling,c.skipNulls,c.encode?c.encoder:null,c.filter,c.sort,c.allowDots,c.serializeDate,c.formatter,c.encodeValuesOnly,c.charset))}var y=f.join(c.delimiter),g=!0===c.addQueryPrefix?"?":"";return c.charsetSentinel&&("iso-8859-1"===c.charset?g+="utf8=%26%2310003%3B&":g+="utf8=%E2%9C%93&"),y.length>0?g+y:""}},function(e,t,r){"use strict";var i=r(119),n=Object.prototype.hasOwnProperty,a={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:i.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},s=function(e){return e.replace(/&#(\d+);/g,(function(e,t){return String.fromCharCode(parseInt(t,10))}))},o=function(e,t,r){if(e){var i=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,a=/(\[[^[\]]*])/g,s=/(\[[^[\]]*])/.exec(i),o=s?i.slice(0,s.index):i,c=[];if(o){if(!r.plainObjects&&n.call(Object.prototype,o)&&!r.allowPrototypes)return;c.push(o)}for(var u=0;null!==(s=a.exec(i))&&u<r.depth;){if(u+=1,!r.plainObjects&&n.call(Object.prototype,s[1].slice(1,-1))&&!r.allowPrototypes)return;c.push(s[1])}return s&&c.push("["+i.slice(s.index)+"]"),function(e,t,r){for(var i=t,n=e.length-1;n>=0;--n){var a,s=e[n];if("[]"===s&&r.parseArrays)a=[].concat(i);else{a=r.plainObjects?Object.create(null):{};var o="["===s.charAt(0)&&"]"===s.charAt(s.length-1)?s.slice(1,-1):s,c=parseInt(o,10);r.parseArrays||""!==o?!isNaN(c)&&s!==o&&String(c)===o&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(a=[])[c]=i:a[o]=i:a={0:i}}i=a}return i}(c,t,r)}};e.exports=function(e,t){var r=function(e){if(!e)return a;if(null!==e.decoder&&void 0!==e.decoder&&"function"!==typeof e.decoder)throw new TypeError("Decoder has to be a function.");if("undefined"!==typeof e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new Error("The charset option must be either utf-8, iso-8859-1, or undefined");var t="undefined"===typeof e.charset?a.charset:e.charset;return{allowDots:"undefined"===typeof e.allowDots?a.allowDots:!!e.allowDots,allowPrototypes:"boolean"===typeof e.allowPrototypes?e.allowPrototypes:a.allowPrototypes,arrayLimit:"number"===typeof e.arrayLimit?e.arrayLimit:a.arrayLimit,charset:t,charsetSentinel:"boolean"===typeof e.charsetSentinel?e.charsetSentinel:a.charsetSentinel,comma:"boolean"===typeof e.comma?e.comma:a.comma,decoder:"function"===typeof e.decoder?e.decoder:a.decoder,delimiter:"string"===typeof e.delimiter||i.isRegExp(e.delimiter)?e.delimiter:a.delimiter,depth:"number"===typeof e.depth?e.depth:a.depth,ignoreQueryPrefix:!0===e.ignoreQueryPrefix,interpretNumericEntities:"boolean"===typeof e.interpretNumericEntities?e.interpretNumericEntities:a.interpretNumericEntities,parameterLimit:"number"===typeof e.parameterLimit?e.parameterLimit:a.parameterLimit,parseArrays:!1!==e.parseArrays,plainObjects:"boolean"===typeof e.plainObjects?e.plainObjects:a.plainObjects,strictNullHandling:"boolean"===typeof e.strictNullHandling?e.strictNullHandling:a.strictNullHandling}}(t);if(""===e||null===e||"undefined"===typeof e)return r.plainObjects?Object.create(null):{};for(var c="string"===typeof e?function(e,t){var r,o={},c=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,u=t.parameterLimit===1/0?void 0:t.parameterLimit,d=c.split(t.delimiter,u),h=-1,l=t.charset;if(t.charsetSentinel)for(r=0;r<d.length;++r)0===d[r].indexOf("utf8=")&&("utf8=%E2%9C%93"===d[r]?l="utf-8":"utf8=%26%2310003%3B"===d[r]&&(l="iso-8859-1"),h=r,r=d.length);for(r=0;r<d.length;++r)if(r!==h){var f,p,v=d[r],m=v.indexOf("]="),y=-1===m?v.indexOf("="):m+1;-1===y?(f=t.decoder(v,a.decoder,l),p=t.strictNullHandling?null:""):(f=t.decoder(v.slice(0,y),a.decoder,l),p=t.decoder(v.slice(y+1),a.decoder,l)),p&&t.interpretNumericEntities&&"iso-8859-1"===l&&(p=s(p)),p&&t.comma&&p.indexOf(",")>-1&&(p=p.split(",")),n.call(o,f)?o[f]=i.combine(o[f],p):o[f]=p}return o}(e,r):e,u=r.plainObjects?Object.create(null):{},d=Object.keys(c),h=0;h<d.length;++h){var l=d[h],f=o(l,c[l],r);u=i.merge(u,f,r)}return i.compact(u)}},function(e,t,r){"use strict";var i=r(51),n=r(74).capitalize,a=r(50),s=a.stringToBase64,o=a.urlencodeBase64,c=r(240),u=r(50),d=u.binaryToBase58,h=u.byteArrayToWordArray,l=r(29),f=l.ec,p=l.eddsa,v=(r(10).ArgumentsRequired,r(25)),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"md5",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"hex",a={};"keccak"===t&&(t="SHA3",a.outputLength=256);var s=i[t.toUpperCase()](e,a);return"binary"===r?s:s.toString(i.enc[n(r)])},y=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sha256",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hex",s=i["Hmac"+r.toUpperCase()](e,t);if(a){var o="binary"===a?"Latin1":n(a);return s.toString(i.enc[n(o)])}return s};function g(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"RS256",i={RS256:"pkcs1-sha256",RS512:"pkcs1-sha512"};if(!(r in i))throw new ExchangeError(r+" is not a supported rsa signing algorithm.");var n=i[r],a=new c(t,{environment:"browser",signingScheme:n});return a.sign(e,"base64","binary")}e.exports={hash:m,hmac:y,jwt:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HS256",i={HS256:"sha256",HS384:"sha384",HS512:"sha512"},n=o(s(JSON.stringify({alg:r,typ:"JWT"}))),a=o(s(JSON.stringify(e))),c=[n,a].join("."),u=r.slice(0,2),d=i[r],h=void 0;return"HS"===u?h=o(y(c,t,d,"base64")):"RS"===u&&(h=o(g(c,t,r))),[c,h].join(".")},totp:function(e){var t=function(e){return parseInt(e,16)},r=function(e,t){return(t+e).slice(-t.length)};return function(e){e=e.replace(" ","");var n,a=Math.round((new Date).getTime()/1e3),s=r(((n=Math.floor(a/30))<15.5?"0":"")+Math.round(n).toString(16),"0000000000000000"),o=y(i.enc.Hex.parse(s),i.enc.Hex.parse(function(e){for(var t="",i="",n=0;n<e.length;n++){var a="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567".indexOf(e.charAt(n).toUpperCase());t+=r(a.toString(2),"00000")}for(var s=0;s+4<=t.length;s+=4){var o=t.substr(s,4);i+=parseInt(o,2).toString(16)}return i}(e)),"sha1","hex"),c=t(o.substring(o.length-1)),u=(t(o.substr(2*c,8))&t("7fffffff"))+"";return u=u.substr(u.length-6,6)}(e)},rsa:g,ecdsa:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"p256",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=e;void 0!==i&&(a=m(e,i,"hex"));for(var s=new f(r),o=s.sign(a,t,"hex",{canonical:!0}),c=new v("0"),u=new v("1").shln(248).sub(new v("1"));n&&(o.r.gt(s.nh)||o.r.lte(u)||o.s.lte(u));)o=s.sign(a,t,"hex",{canonical:!0,extraEntropy:c.toArray("le",32)}),c=c.add(new v("1"));return{r:o.r.toString(16).padStart(64,"0"),s:o.s.toString(16).padStart(64,"0"),v:o.recoveryParam}},eddsa:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"ed25519",i=new p(r),n=i.signModified(e,t);return d(h(n.toBytes()))}}},function(e,t,r){(function(t){var i=r(241),n=r(27)._,a=r(122),s=r(244);e.exports=function(){var e={browser:["md5","ripemd160","sha1","sha256","sha512"]},r="pkcs1",o="pkcs1",c={private:"pkcs1-private-pem","private-der":"pkcs1-private-der",public:"pkcs8-public-pem","public-der":"pkcs8-public-der"};function u(e,a,s){if(!(this instanceof u))return new u(e,a,s);n.isObject(a)&&(s=a,a=void 0),this.$options={signingScheme:o,signingSchemeOptions:{hash:"sha256",saltLength:null},encryptionScheme:r,encryptionSchemeOptions:{hash:"sha1",label:null},environment:"browser",rsaUtils:this},this.keyPair=new i.Key,this.$cache={},t.isBuffer(e)||n.isString(e)?this.importKey(e,a):n.isObject(e)&&this.generateKeyPair(e.b,e.e),this.setOptions(s)}return u.prototype.setOptions=function(t){if((t=t||{}).environment&&(this.$options.environment=t.environment),t.signingScheme){if(n.isString(t.signingScheme)){var i=t.signingScheme.toLowerCase().split("-");1==i.length?e.node.indexOf(i[0])>-1?(this.$options.signingSchemeOptions={hash:i[0]},this.$options.signingScheme=o):(this.$options.signingScheme=i[0],this.$options.signingSchemeOptions={hash:null}):(this.$options.signingSchemeOptions={hash:i[1]},this.$options.signingScheme=i[0])}else n.isObject(t.signingScheme)&&(this.$options.signingScheme=t.signingScheme.scheme||o,this.$options.signingSchemeOptions=n.omit(t.signingScheme,"scheme"));if(!a.isSignature(this.$options.signingScheme))throw Error("Unsupported signing scheme");if(this.$options.signingSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.signingSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}if(t.encryptionScheme){if(n.isString(t.encryptionScheme)?(this.$options.encryptionScheme=t.encryptionScheme.toLowerCase(),this.$options.encryptionSchemeOptions={}):n.isObject(t.encryptionScheme)&&(this.$options.encryptionScheme=t.encryptionScheme.scheme||r,this.$options.encryptionSchemeOptions=n.omit(t.encryptionScheme,"scheme")),!a.isEncryption(this.$options.encryptionScheme))throw Error("Unsupported encryption scheme");if(this.$options.encryptionSchemeOptions.hash&&-1===e[this.$options.environment].indexOf(this.$options.encryptionSchemeOptions.hash))throw Error("Unsupported hashing algorithm for "+this.$options.environment+" environment")}this.keyPair.setOptions(this.$options)},u.prototype.importKey=function(e,t){if(!e)throw Error("Empty key given");if(t&&(t=c[t]||t),!s.detectAndImport(this.keyPair,e,t)&&void 0===t)throw Error("Key format must be specified");return this.$cache={},this},u.prototype.isPrivate=function(){return this.keyPair.isPrivate()},u.prototype.isPublic=function(e){return this.keyPair.isPublic(e)},u.prototype.isEmpty=function(e){return!(this.keyPair.n||this.keyPair.e||this.keyPair.d)},u.prototype.sign=function(e,t,r){if(!this.isPrivate())throw Error("This is not private key");var i=this.keyPair.sign(this.$getDataForEncrypt(e,r));return t&&"buffer"!=t&&(i=i.toString(t)),i},u.prototype.$getDataForEncrypt=function(e,r){if(n.isString(e)||n.isNumber(e))return t.from(""+e,r||"utf8");if(t.isBuffer(e))return e;if(n.isObject(e))return t.from(JSON.stringify(e));throw Error("Unexpected data type")},u}()}).call(this,r(21).Buffer)},function(e,t,r){var i=r(27)._,n=r(121),a=r(27),s=r(122);e.exports.Key=function(){function e(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}return e.prototype.setOptions=function(e){var t=s[e.signingScheme],r=s[e.encryptionScheme];t===r?this.signingScheme=this.encryptionScheme=r.makeScheme(this,e):(this.encryptionScheme=r.makeScheme(this,e),this.signingScheme=t.makeScheme(this,e))},e.prototype.setPrivate=function(e,t,r,s,o,c,u,d){if(!(e&&t&&r&&e.length>0&&(i.isNumber(t)||t.length>0)&&r.length>0))throw Error("Invalid RSA private key");this.n=new n(e),this.e=i.isNumber(t)?t:a.get32IntFromBuffer(t,0),this.d=new n(r),s&&o&&c&&u&&d&&(this.p=new n(s),this.q=new n(o),this.dmp1=new n(c),this.dmq1=new n(u),this.coeff=new n(d)),this.$$recalculateCache()},e.prototype.$doPrivate=function(e){if(this.p||this.q)return e.modPow(this.d,this.n);for(var t=e.mod(this.p).modPow(this.dmp1,this.p),r=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(r)<0;)t=t.add(this.p);return t.subtract(r).multiply(this.coeff).mod(this.p).multiply(this.q).add(r)},e.prototype.sign=function(e){return this.signingScheme.sign.apply(this.signingScheme,arguments)},e.prototype.isPrivate=function(){return this.n&&this.e&&this.d||!1},Object.defineProperty(e.prototype,"keySize",{get:function(){return this.cache.keyBitLength}}),Object.defineProperty(e.prototype,"encryptedDataLength",{get:function(){return this.cache.keyByteLength}}),Object.defineProperty(e.prototype,"maxMessageLength",{get:function(){return this.encryptionScheme.maxMessageLength()}}),e.prototype.$$recalculateCache=function(){this.cache=this.cache||{},this.cache.keyBitLength=this.n.bitLength(),this.cache.keyByteLength=this.cache.keyBitLength+6>>3},e}()},function(e,t,r){(function(t){var i=r(121),n=r(51),a=3;r(243);var s={md2:t.from("3020300c06082a864886f70d020205000410","hex"),md5:t.from("3020300c06082a864886f70d020505000410","hex"),sha1:t.from("3021300906052b0e03021a05000414","hex"),sha224:t.from("302d300d06096086480165030402040500041c","hex"),sha256:t.from("3031300d060960864801650304020105000420","hex"),sha384:t.from("3041300d060960864801650304020205000430","hex"),sha512:t.from("3051300d060960864801650304020305000440","hex"),ripemd160:t.from("3021300906052b2403020105000414","hex"),rmd160:t.from("3021300906052b2403020105000414","hex")},o={ripemd160:"rmd160"};function c(e,t){var r=[];return t>0&&r.push(e>>>24),t>1&&r.push(e>>>16&255),t>2&&r.push(e>>>8&255),t>3&&r.push(255&e),r}e.exports={isEncryption:!0,isSignature:!0},e.exports.makeScheme=function(e,r){function u(e,t){this.key=e,this.options=t}return u.prototype.maxMessageLength=function(){return this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==a?this.key.encryptedDataLength:this.key.encryptedDataLength-11},u.prototype.encUnPad=function(e,t){t=t||{};var r=0;if(this.options.encryptionSchemeOptions&&this.options.encryptionSchemeOptions.padding==a)return"function"==typeof e.lastIndexOf?e.slice(e.lastIndexOf("\0")+1,e.length):e.slice(String.prototype.lastIndexOf.call(e,"\0")+1,e.length);if(e.length<4)return null;if(1===t.type){if(0!==e[0]&&1!==e[1])return null;for(r=3;0!==e[r];)if(255!=e[r]||++r>=e.length)return null}else{if(0!==e[0]&&2!==e[1])return null;for(r=3;0!==e[r];)if(++r>=e.length)return null}return e.slice(r+1,e.length)},u.prototype.sign=function(e){var r=this.options.signingSchemeOptions.hash||"sha256";if("browser"===this.options.environment){var a=function(e){var r=void 0;if(!e.hasOwnProperty("sigBytes")||!e.hasOwnProperty("words"))throw Error("Argument not a wordArray");r=e.sigBytes,e=e.words;var i=[],n=[],a=0;for(;r>0;)r-=(n=c(e[a],Math.min(4,r))).length,i.push(n),a++;return new t.from([].concat.apply([],i),"hex")}(n[(r=o[r]||r).toUpperCase()](e.toString())),s=this.pkcs1pad(a,r);return this.key.$doPrivate(new i(s)).toBuffer(this.key.encryptedDataLength)}throw new Error("CCXT only supports browser mode :P")},u.prototype.pkcs1pad=function(e,r){var i=s[r];if(!i)throw Error("Unsupported hash algorithm");var n=t.concat([i,e]);if(n.length+10>this.key.encryptedDataLength)throw Error("Key is too short for signing algorithm ("+r+")");var a=t.alloc(this.key.encryptedDataLength-n.length-1);return a.fill(255,0,a.length-1),a[0]=1,a[a.length-1]=0,t.concat([a,n])},new u(e,r)}}).call(this,r(21).Buffer)},function(e){e.exports=JSON.parse('{"O_RDONLY":0,"O_WRONLY":1,"O_RDWR":2,"S_IFMT":61440,"S_IFREG":32768,"S_IFDIR":16384,"S_IFCHR":8192,"S_IFBLK":24576,"S_IFIFO":4096,"S_IFLNK":40960,"S_IFSOCK":49152,"O_CREAT":512,"O_EXCL":2048,"O_NOCTTY":131072,"O_TRUNC":1024,"O_APPEND":8,"O_DIRECTORY":1048576,"O_NOFOLLOW":256,"O_SYNC":128,"O_SYMLINK":2097152,"O_NONBLOCK":4,"S_IRWXU":448,"S_IRUSR":256,"S_IWUSR":128,"S_IXUSR":64,"S_IRWXG":56,"S_IRGRP":32,"S_IWGRP":16,"S_IXGRP":8,"S_IRWXO":7,"S_IROTH":4,"S_IWOTH":2,"S_IXOTH":1,"E2BIG":7,"EACCES":13,"EADDRINUSE":48,"EADDRNOTAVAIL":49,"EAFNOSUPPORT":47,"EAGAIN":35,"EALREADY":37,"EBADF":9,"EBADMSG":94,"EBUSY":16,"ECANCELED":89,"ECHILD":10,"ECONNABORTED":53,"ECONNREFUSED":61,"ECONNRESET":54,"EDEADLK":11,"EDESTADDRREQ":39,"EDOM":33,"EDQUOT":69,"EEXIST":17,"EFAULT":14,"EFBIG":27,"EHOSTUNREACH":65,"EIDRM":90,"EILSEQ":92,"EINPROGRESS":36,"EINTR":4,"EINVAL":22,"EIO":5,"EISCONN":56,"EISDIR":21,"ELOOP":62,"EMFILE":24,"EMLINK":31,"EMSGSIZE":40,"EMULTIHOP":95,"ENAMETOOLONG":63,"ENETDOWN":50,"ENETRESET":52,"ENETUNREACH":51,"ENFILE":23,"ENOBUFS":55,"ENODATA":96,"ENODEV":19,"ENOENT":2,"ENOEXEC":8,"ENOLCK":77,"ENOLINK":97,"ENOMEM":12,"ENOMSG":91,"ENOPROTOOPT":42,"ENOSPC":28,"ENOSR":98,"ENOSTR":99,"ENOSYS":78,"ENOTCONN":57,"ENOTDIR":20,"ENOTEMPTY":66,"ENOTSOCK":38,"ENOTSUP":45,"ENOTTY":25,"ENXIO":6,"EOPNOTSUPP":102,"EOVERFLOW":84,"EPERM":1,"EPIPE":32,"EPROTO":100,"EPROTONOSUPPORT":43,"EPROTOTYPE":41,"ERANGE":34,"EROFS":30,"ESPIPE":29,"ESRCH":3,"ESTALE":70,"ETIME":101,"ETIMEDOUT":60,"ETXTBSY":26,"EWOULDBLOCK":35,"EXDEV":18,"SIGHUP":1,"SIGINT":2,"SIGQUIT":3,"SIGILL":4,"SIGTRAP":5,"SIGABRT":6,"SIGIOT":6,"SIGBUS":10,"SIGFPE":8,"SIGKILL":9,"SIGUSR1":30,"SIGSEGV":11,"SIGUSR2":31,"SIGPIPE":13,"SIGALRM":14,"SIGTERM":15,"SIGCHLD":20,"SIGCONT":19,"SIGSTOP":17,"SIGTSTP":18,"SIGTTIN":21,"SIGTTOU":22,"SIGURG":16,"SIGXCPU":24,"SIGXFSZ":25,"SIGVTALRM":26,"SIGPROF":27,"SIGWINCH":28,"SIGIO":23,"SIGSYS":12,"SSL_OP_ALL":2147486719,"SSL_OP_ALLOW_UNSAFE_LEGACY_RENEGOTIATION":262144,"SSL_OP_CIPHER_SERVER_PREFERENCE":4194304,"SSL_OP_CISCO_ANYCONNECT":32768,"SSL_OP_COOKIE_EXCHANGE":8192,"SSL_OP_CRYPTOPRO_TLSEXT_BUG":2147483648,"SSL_OP_DONT_INSERT_EMPTY_FRAGMENTS":2048,"SSL_OP_EPHEMERAL_RSA":0,"SSL_OP_LEGACY_SERVER_CONNECT":4,"SSL_OP_MICROSOFT_BIG_SSLV3_BUFFER":32,"SSL_OP_MICROSOFT_SESS_ID_BUG":1,"SSL_OP_MSIE_SSLV2_RSA_PADDING":0,"SSL_OP_NETSCAPE_CA_DN_BUG":536870912,"SSL_OP_NETSCAPE_CHALLENGE_BUG":2,"SSL_OP_NETSCAPE_DEMO_CIPHER_CHANGE_BUG":1073741824,"SSL_OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG":8,"SSL_OP_NO_COMPRESSION":131072,"SSL_OP_NO_QUERY_MTU":4096,"SSL_OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION":65536,"SSL_OP_NO_SSLv2":16777216,"SSL_OP_NO_SSLv3":33554432,"SSL_OP_NO_TICKET":16384,"SSL_OP_NO_TLSv1":67108864,"SSL_OP_NO_TLSv1_1":268435456,"SSL_OP_NO_TLSv1_2":134217728,"SSL_OP_PKCS1_CHECK_1":0,"SSL_OP_PKCS1_CHECK_2":0,"SSL_OP_SINGLE_DH_USE":1048576,"SSL_OP_SINGLE_ECDH_USE":524288,"SSL_OP_SSLEAY_080_CLIENT_DH_BUG":128,"SSL_OP_SSLREF2_REUSE_CERT_TYPE_BUG":0,"SSL_OP_TLS_BLOCK_PADDING_BUG":512,"SSL_OP_TLS_D5_BUG":256,"SSL_OP_TLS_ROLLBACK_BUG":8388608,"ENGINE_METHOD_DSA":2,"ENGINE_METHOD_DH":4,"ENGINE_METHOD_RAND":8,"ENGINE_METHOD_ECDH":16,"ENGINE_METHOD_ECDSA":32,"ENGINE_METHOD_CIPHERS":64,"ENGINE_METHOD_DIGESTS":128,"ENGINE_METHOD_STORE":256,"ENGINE_METHOD_PKEY_METHS":512,"ENGINE_METHOD_PKEY_ASN1_METHS":1024,"ENGINE_METHOD_ALL":65535,"ENGINE_METHOD_NONE":0,"DH_CHECK_P_NOT_SAFE_PRIME":2,"DH_CHECK_P_NOT_PRIME":1,"DH_UNABLE_TO_CHECK_GENERATOR":4,"DH_NOT_SUITABLE_GENERATOR":8,"NPN_ENABLED":1,"RSA_PKCS1_PADDING":1,"RSA_SSLV23_PADDING":2,"RSA_NO_PADDING":3,"RSA_PKCS1_OAEP_PADDING":4,"RSA_X931_PADDING":5,"RSA_PKCS1_PSS_PADDING":6,"POINT_CONVERSION_COMPRESSED":2,"POINT_CONVERSION_UNCOMPRESSED":4,"POINT_CONVERSION_HYBRID":6,"F_OK":0,"R_OK":4,"W_OK":2,"X_OK":1,"UV_UDP_REUSEADDR":4}')},function(e,t,r){r(27)._;e.exports={pkcs1:r(245),pkcs8:r(248),components:r(249),detectAndImport:function(t,r,i){if(void 0===i){for(var n in e.exports)if("function"===typeof e.exports[n].autoImport&&e.exports[n].autoImport(t,r))return!0}else if(i){var a=formatParse(i);if(!e.exports[a.scheme])throw Error("Unsupported key format");"private"===a.keyType?e.exports[a.scheme].privateImport(t,r,a.keyOpt):e.exports[a.scheme].publicImport(t,r,a.keyOpt)}return!1}}},function(e,t,r){(function(t){var i=r(123).Ber,n=r(27)._,a=r(27),s="-----BEGIN RSA PRIVATE KEY-----",o="-----END RSA PRIVATE KEY-----",c="-----BEGIN RSA PUBLIC KEY-----",u="-----END RSA PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=e.d.toBuffer(),c=e.p.toBuffer(),u=e.q.toBuffer(),d=e.dmp1.toBuffer(),h=e.dmq1.toBuffer(),l=e.coeff.toBuffer(),f=r.length+n.length+c.length+u.length+d.length+h.length+l.length+512,p=new i.Writer({size:f});return p.startSequence(),p.writeInt(0),p.writeBuffer(r,2),p.writeInt(e.e),p.writeBuffer(n,2),p.writeBuffer(c,2),p.writeBuffer(u,2),p.writeBuffer(d,2),p.writeBuffer(h,2),p.writeBuffer(l,2),p.endSequence(),"der"===t.type?p.buffer:s+"\n"+a.linebrk(p.buffer.toString("base64"),64)+"\n"+o},privateImport:function(e,r,c){var u;if("der"!==(c=c||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),!n.isString(r))throw Error("Unsupported key format");var d=a.trimSurroundingText(r,s,o).replace(/\s+|\n\r|\n|\r$/gm,"");u=t.from(d,"base64")}else{if(!t.isBuffer(r))throw Error("Unsupported key format");u=r}var h=new i.Reader(u);h.readSequence(),h.readString(2,!0),e.setPrivate(h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0),h.readString(2,!0))},publicExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=r.length+512,s=new i.Writer({size:n});return s.startSequence(),s.writeBuffer(r,2),s.writeInt(e.e),s.endSequence(),"der"===t.type?s.buffer:c+"\n"+a.linebrk(s.buffer.toString("base64"),64)+"\n"+u},publicImport:function(e,r,s){var o;if("der"!==(s=s||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),n.isString(r)){var d=a.trimSurroundingText(r,c,u).replace(/\s+|\n\r|\n|\r$/gm,"");o=t.from(d,"base64")}}else{if(!t.isBuffer(r))throw Error("Unsupported key format");o=r}var h=new i.Reader(o);h.readSequence(),e.setPublic(h.readString(2,!0),h.readString(2,!0))},autoImport:function(t,r){return/^[\S\s]*-----BEGIN RSA PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PRIVATE KEY-----[\S\s]*$/g.test(r)?(e.exports.privateImport(t,r),!0):!!/^[\S\s]*-----BEGIN RSA PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END RSA PUBLIC KEY-----[\S\s]*$/g.test(r)&&(e.exports.publicImport(t,r),!0)}}}).call(this,r(21).Buffer)},function(e,t,r){var i=r(124),n=r(125),a=r(247);for(var s in e.exports={Reader:a},n)n.hasOwnProperty(s)&&(e.exports[s]=n[s]);for(var o in i)i.hasOwnProperty(o)&&(e.exports[o]=i[o])},function(e,t,r){(function(t){var i=r(79),n=r(125),a=r(124).newInvalidAsn1Error;function s(e){if(!e||!t.isBuffer(e))throw new TypeError("data must be a node Buffer");this._buf=e,this._size=e.length,this._len=0,this._offset=0}Object.defineProperty(s.prototype,"length",{enumerable:!0,get:function(){return this._len}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){return this._offset}}),Object.defineProperty(s.prototype,"remain",{get:function(){return this._size-this._offset}}),Object.defineProperty(s.prototype,"buffer",{get:function(){return this._buf.slice(this._offset)}}),s.prototype.readByte=function(e){if(this._size-this._offset<1)return null;var t=255&this._buf[this._offset];return e||(this._offset+=1),t},s.prototype.peek=function(){return this.readByte(!0)},s.prototype.readLength=function(e){if(void 0===e&&(e=this._offset),e>=this._size)return null;var t=255&this._buf[e++];if(null===t)return null;if(128===(128&t)){if(0===(t&=127))throw a("Indefinite length not supported");if(t>4)throw a("encoding too long");if(this._size-e<t)return null;this._len=0;for(var r=0;r<t;r++)this._len=(this._len<<8)+(255&this._buf[e++])}else this._len=t;return e},s.prototype.readSequence=function(e){var t=this.peek();if(null===t)return null;if(void 0!==e&&e!==t)throw a("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);return null===r?null:(this._offset=r,t)},s.prototype.readInt=function(){return this._readTag(n.Integer)},s.prototype.readBoolean=function(){return 0!==this._readTag(n.Boolean)},s.prototype.readEnumeration=function(){return this._readTag(n.Enumeration)},s.prototype.readString=function(e,r){e||(e=n.OctetString);var i=this.peek();if(null===i)return null;if(i!==e)throw a("Expected 0x"+e.toString(16)+": got 0x"+i.toString(16));var s=this.readLength(this._offset+1);if(null===s)return null;if(this.length>this._size-s)return null;if(this._offset=s,0===this.length)return r?t.alloc(0):"";var o=this._buf.slice(this._offset,this._offset+this.length);return this._offset+=this.length,r?o:o.toString("utf8")},s.prototype.readOID=function(e){e||(e=n.OID);var t=this.readString(e,!0);if(null===t)return null;for(var r=[],i=0,a=0;a<t.length;a++){var s=255&t[a];i<<=7,i+=127&s,0===(128&s)&&(r.push(i),i=0)}return i=r.shift(),r.unshift(i%40),r.unshift(i/40>>0),r.join(".")},s.prototype._readTag=function(e){i.ok(void 0!==e);var t=this.peek();if(null===t)return null;if(t!==e)throw a("Expected 0x"+e.toString(16)+": got 0x"+t.toString(16));var r=this.readLength(this._offset+1);if(null===r)return null;if(this.length>4)throw a("Integer too long: "+this.length);if(this.length>this._size-r)return null;this._offset=r;for(var n=this._buf[this._offset],s=0,o=0;o<this.length;o++)s<<=8,s|=255&this._buf[this._offset++];return 128===(128&n)&&4!==o&&(s-=1<<8*o),s>>0},e.exports=s}).call(this,r(21).Buffer)},function(e,t,r){(function(t){var i=r(123).Ber,n=r(27)._,a="1.2.840.113549.1.1.1",s=r(27),o="-----BEGIN PRIVATE KEY-----",c="-----END PRIVATE KEY-----",u="-----BEGIN PUBLIC KEY-----",d="-----END PUBLIC KEY-----";e.exports={privateExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=e.d.toBuffer(),u=e.p.toBuffer(),d=e.q.toBuffer(),h=e.dmp1.toBuffer(),l=e.dmq1.toBuffer(),f=e.coeff.toBuffer(),p=r.length+n.length+u.length+d.length+h.length+l.length+f.length+512,v=new i.Writer({size:p});v.startSequence(),v.writeInt(0),v.writeBuffer(r,2),v.writeInt(e.e),v.writeBuffer(n,2),v.writeBuffer(u,2),v.writeBuffer(d,2),v.writeBuffer(h,2),v.writeBuffer(l,2),v.writeBuffer(f,2),v.endSequence();var m=new i.Writer({size:p});return m.startSequence(),m.writeInt(0),m.startSequence(),m.writeOID(a),m.writeNull(),m.endSequence(),m.writeBuffer(v.buffer,4),m.endSequence(),"der"===t.type?m.buffer:o+"\n"+s.linebrk(m.buffer.toString("base64"),64)+"\n"+c},privateImport:function(e,r,u){var d;if("der"!==(u=u||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),!n.isString(r))throw Error("Unsupported key format");var h=s.trimSurroundingText(r,o,c).replace("-----END PRIVATE KEY-----","").replace(/\s+|\n\r|\n|\r$/gm,"");d=t.from(h,"base64")}else{if(!t.isBuffer(r))throw Error("Unsupported key format");d=r}var l=new i.Reader(d);if(l.readSequence(),l.readInt(0),new i.Reader(l.readString(48,!0)).readOID(6,!0)!==a)throw Error("Invalid Public key format");var f=new i.Reader(l.readString(4,!0));f.readSequence(),f.readString(2,!0),e.setPrivate(f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0),f.readString(2,!0))},publicExport:function(e,t){t=t||{};var r=e.n.toBuffer(),n=r.length+512,o=new i.Writer({size:n});o.writeByte(0),o.startSequence(),o.writeBuffer(r,2),o.writeInt(e.e),o.endSequence();var c=new i.Writer({size:n});return c.startSequence(),c.startSequence(),c.writeOID(a),c.writeNull(),c.endSequence(),c.writeBuffer(o.buffer,3),c.endSequence(),"der"===t.type?c.buffer:u+"\n"+s.linebrk(c.buffer.toString("base64"),64)+"\n"+d},publicImport:function(e,r,o){var c;if("der"!==(o=o||{}).type){if(t.isBuffer(r)&&(r=r.toString("utf8")),n.isString(r)){var h=s.trimSurroundingText(r,u,d).replace(/\s+|\n\r|\n|\r$/gm,"");c=t.from(h,"base64")}}else{if(!t.isBuffer(r))throw Error("Unsupported key format");c=r}var l=new i.Reader(c);if(l.readSequence(),new i.Reader(l.readString(48,!0)).readOID(6,!0)!==a)throw Error("Invalid Public key format");var f=new i.Reader(l.readString(3,!0));f.readByte(),f.readSequence(),e.setPublic(f.readString(2,!0),f.readString(2,!0))},autoImport:function(t,r){return/^[\S\s]*-----BEGIN PRIVATE KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PRIVATE KEY-----[\S\s]*$/g.test(r)?(e.exports.privateImport(t,r),!0):!!/^[\S\s]*-----BEGIN PUBLIC KEY-----\s*(?=(([A-Za-z0-9+/=]+\s*)+))\1-----END PUBLIC KEY-----[\S\s]*$/g.test(r)&&(e.exports.publicImport(t,r),!0)}}}).call(this,r(21).Buffer)},function(e,t,r){r(27)._,r(27);e.exports={privateExport:function(e,t){return{n:e.n.toBuffer(),e:e.e,d:e.d.toBuffer(),p:e.p.toBuffer(),q:e.q.toBuffer(),dmp1:e.dmp1.toBuffer(),dmq1:e.dmq1.toBuffer(),coeff:e.coeff.toBuffer()}},privateImport:function(e,t,r){if(!(t.n&&t.e&&t.d&&t.p&&t.q&&t.dmp1&&t.dmq1&&t.coeff))throw Error("Invalid key data");e.setPrivate(t.n,t.e,t.d,t.p,t.q,t.dmp1,t.dmq1,t.coeff)},publicExport:function(e,t){return{n:e.n.toBuffer(),e:e.e}},publicImport:function(e,t,r){if(!t.n||!t.e)throw Error("Invalid key data");e.setPublic(t.n,t.e)},autoImport:function(t,r){return!(!r.n||!r.e)&&(r.d&&r.p&&r.q&&r.dmp1&&r.dmq1&&r.coeff?(e.exports.privateImport(t,r),!0):(e.exports.publicImport(t,r),!0))}}},function(e,t,r){"use strict";var i=r(25),n=r(29).utils,a=n.getNAF,s=n.getJSF,o=n.assert;function c(e,t){this.type=e,this.p=new i(t.p,16),this.red=t.prime?i.red(t.prime):i.mont(this.p),this.zero=new i(0).toRed(this.red),this.one=new i(1).toRed(this.red),this.two=new i(2).toRed(this.red),this.n=t.n&&new i(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4);var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function u(e,t){this.curve=e,this.type=t,this.precomputed=null}e.exports=c,c.prototype.point=function(){throw new Error("Not implemented")},c.prototype.validate=function(){throw new Error("Not implemented")},c.prototype._fixedNafMul=function(e,t){o(e.precomputed);var r=e._getDoubles(),i=a(t,1),n=(1<<r.step+1)-(r.step%2===0?2:1);n/=3;for(var s=[],c=0;c<i.length;c+=r.step){var u=0;for(t=c+r.step-1;t>=c;t--)u=(u<<1)+i[t];s.push(u)}for(var d=this.jpoint(null,null,null),h=this.jpoint(null,null,null),l=n;l>0;l--){for(c=0;c<s.length;c++){(u=s[c])===l?h=h.mixedAdd(r.points[c]):u===-l&&(h=h.mixedAdd(r.points[c].neg()))}d=d.add(h)}return d.toP()},c.prototype._wnafMul=function(e,t){var r=4,i=e._getNAFPoints(r);r=i.wnd;for(var n=i.points,s=a(t,r),c=this.jpoint(null,null,null),u=s.length-1;u>=0;u--){for(t=0;u>=0&&0===s[u];u--)t++;if(u>=0&&t++,c=c.dblp(t),u<0)break;var d=s[u];o(0!==d),c="affine"===e.type?d>0?c.mixedAdd(n[d-1>>1]):c.mixedAdd(n[-d-1>>1].neg()):d>0?c.add(n[d-1>>1]):c.add(n[-d-1>>1].neg())}return"affine"===e.type?c.toP():c},c.prototype._wnafMulAdd=function(e,t,r,i,n){for(var o=this._wnafT1,c=this._wnafT2,u=this._wnafT3,d=0,h=0;h<i;h++){var l=(T=t[h])._getNAFPoints(e);o[h]=l.wnd,c[h]=l.points}for(h=i-1;h>=1;h-=2){var f=h-1,p=h;if(1===o[f]&&1===o[p]){var v=[t[f],null,null,t[p]];0===t[f].y.cmp(t[p].y)?(v[1]=t[f].add(t[p]),v[2]=t[f].toJ().mixedAdd(t[p].neg())):0===t[f].y.cmp(t[p].y.redNeg())?(v[1]=t[f].toJ().mixedAdd(t[p]),v[2]=t[f].add(t[p].neg())):(v[1]=t[f].toJ().mixedAdd(t[p]),v[2]=t[f].toJ().mixedAdd(t[p].neg()));var m=[-3,-1,-5,-7,0,7,5,1,3],y=s(r[f],r[p]);d=Math.max(y[0].length,d),u[f]=new Array(d),u[p]=new Array(d);for(var g=0;g<d;g++){var b=0|y[0][g],k=0|y[1][g];u[f][g]=m[3*(b+1)+(k+1)],u[p][g]=0,c[f]=v}}else u[f]=a(r[f],o[f]),u[p]=a(r[p],o[p]),d=Math.max(u[f].length,d),d=Math.max(u[p].length,d)}var x=this.jpoint(null,null,null),w=this._wnafT4;for(h=d;h>=0;h--){for(var _=0;h>=0;){var O=!0;for(g=0;g<i;g++)w[g]=0|u[g][h],0!==w[g]&&(O=!1);if(!O)break;_++,h--}if(h>=0&&_++,x=x.dblp(_),h<0)break;for(g=0;g<i;g++){var T,S=w[g];0!==S&&(S>0?T=c[g][S-1>>1]:S<0&&(T=c[g][-S-1>>1].neg()),x="affine"===T.type?x.mixedAdd(T):x.add(T))}}for(h=0;h<i;h++)c[h]=null;return n?x:x.toP()},c.BasePoint=u,u.prototype.eq=function(){throw new Error("Not implemented")},u.prototype.validate=function(){return this.curve.validate(this)},c.prototype.decodePoint=function(e,t){e=n.toArray(e,t);var r=this.p.byteLength();if((4===e[0]||6===e[0]||7===e[0])&&e.length-1===2*r)return 6===e[0]?o(e[e.length-1]%2===0):7===e[0]&&o(e[e.length-1]%2===1),this.point(e.slice(1,1+r),e.slice(1+r,1+2*r));if((2===e[0]||3===e[0])&&e.length-1===r)return this.pointFromX(e.slice(1,1+r),3===e[0]);throw new Error("Unknown point format")},u.prototype.encodeCompressed=function(e){return this.encode(e,!0)},u.prototype._encode=function(e){var t=this.curve.p.byteLength(),r=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(r):[4].concat(r,this.getY().toArray("be",t))},u.prototype.encode=function(e,t){return n.encode(this._encode(t),e)},u.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this},u.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return!!t&&t.points.length>=Math.ceil((e.bitLength()+1)/t.step)},u.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var r=[this],i=this,n=0;n<t;n+=e){for(var a=0;a<e;a++)i=i.dbl();r.push(i)}return{step:e,points:r}},u.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],r=(1<<e)-1,i=1===r?null:this.dbl(),n=1;n<r;n++)t[n]=t[n-1].add(i);return{wnd:e,points:t}},u.prototype._getBeta=function(){return null},u.prototype.dblp=function(e){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}},function(e,t,r){"use strict";var i=r(61),n=r(29),a=r(25),s=n.inherits,o=i.base,c=n.utils.assert;function u(e){o.call(this,"short",e),this.a=new a(e.a,16).toRed(this.red),this.b=new a(e.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(e),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function d(e,t,r,i){o.BasePoint.call(this,e,"affine"),null===t&&null===r?(this.x=null,this.y=null,this.inf=!0):(this.x=new a(t,16),this.y=new a(r,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function h(e,t,r,i){o.BasePoint.call(this,e,"jacobian"),null===t&&null===r&&null===i?(this.x=this.curve.one,this.y=this.curve.one,this.z=new a(0)):(this.x=new a(t,16),this.y=new a(r,16),this.z=new a(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(u,o),e.exports=u,u.prototype._getEndomorphism=function(e){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var t,r;if(e.beta)t=new a(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=(t=i[0].cmp(i[1])<0?i[0]:i[1]).toRed(this.red)}if(e.lambda)r=new a(e.lambda,16);else{var n=this._getEndoRoots(this.n);0===this.g.mul(n[0]).x.cmp(this.g.x.redMul(t))?r=n[0]:(r=n[1],c(0===this.g.mul(r).x.cmp(this.g.x.redMul(t))))}return{beta:t,lambda:r,basis:e.basis?e.basis.map((function(e){return{a:new a(e.a,16),b:new a(e.b,16)}})):this._getEndoBasis(r)}}},u.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:a.mont(e),r=new a(2).toRed(t).redInvm(),i=r.redNeg(),n=new a(3).toRed(t).redNeg().redSqrt().redMul(r);return[i.redAdd(n).fromRed(),i.redSub(n).fromRed()]},u.prototype._getEndoBasis=function(e){for(var t,r,i,n,s,o,c,u,d,h=this.n.ushrn(Math.floor(this.n.bitLength()/2)),l=e,f=this.n.clone(),p=new a(1),v=new a(0),m=new a(0),y=new a(1),g=0;0!==l.cmpn(0);){var b=f.div(l);u=f.sub(b.mul(l)),d=m.sub(b.mul(p));var k=y.sub(b.mul(v));if(!i&&u.cmp(h)<0)t=c.neg(),r=p,i=u.neg(),n=d;else if(i&&2===++g)break;c=u,f=l,l=u,m=p,p=d,y=v,v=k}s=u.neg(),o=d;var x=i.sqr().add(n.sqr());return s.sqr().add(o.sqr()).cmp(x)>=0&&(s=t,o=r),i.negative&&(i=i.neg(),n=n.neg()),s.negative&&(s=s.neg(),o=o.neg()),[{a:i,b:n},{a:s,b:o}]},u.prototype._endoSplit=function(e){var t=this.endo.basis,r=t[0],i=t[1],n=i.b.mul(e).divRound(this.n),a=r.b.neg().mul(e).divRound(this.n),s=n.mul(r.a),o=a.mul(i.a),c=n.mul(r.b),u=a.mul(i.b);return{k1:e.sub(s).sub(o),k2:c.add(u).neg()}},u.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=r.redSqrt();if(0!==i.redSqr().redSub(r).cmp(this.zero))throw new Error("invalid point");var n=i.fromRed().isOdd();return(t&&!n||!t&&n)&&(i=i.redNeg()),this.point(e,i)},u.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,r=e.y,i=this.a.redMul(t),n=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return 0===r.redSqr().redISub(n).cmpn(0)},u.prototype._endoWnafMulAdd=function(e,t,r){for(var i=this._endoWnafT1,n=this._endoWnafT2,a=0;a<e.length;a++){var s=this._endoSplit(t[a]),o=e[a],c=o._getBeta();s.k1.negative&&(s.k1.ineg(),o=o.neg(!0)),s.k2.negative&&(s.k2.ineg(),c=c.neg(!0)),i[2*a]=o,i[2*a+1]=c,n[2*a]=s.k1,n[2*a+1]=s.k2}for(var u=this._wnafMulAdd(1,i,n,2*a,r),d=0;d<2*a;d++)i[d]=null,n[d]=null;return u},s(d,o.BasePoint),u.prototype.point=function(e,t,r){return new d(this,e,t,r)},u.prototype.pointFromJSON=function(e,t){return d.fromJSON(this,e,t)},d.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var r=this.curve,i=function(e){return r.point(e.x.redMul(r.endo.beta),e.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t}},d.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},d.fromJSON=function(e,t,r){"string"===typeof t&&(t=JSON.parse(t));var i=e.point(t[0],t[1],r);if(!t[2])return i;function n(t){return e.point(t[0],t[1],r)}var a=t[2];return i.precomputed={beta:null,doubles:a.doubles&&{step:a.doubles.step,points:[i].concat(a.doubles.points.map(n))},naf:a.naf&&{wnd:a.naf.wnd,points:[i].concat(a.naf.points.map(n))}},i},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return this.inf},d.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(0===this.x.cmp(e.x))return this.curve.point(null,null);var t=this.y.redSub(e.y);0!==t.cmpn(0)&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var r=t.redSqr().redISub(this.x).redISub(e.x),i=t.redMul(this.x.redSub(r)).redISub(this.y);return this.curve.point(r,i)},d.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(0===e.cmpn(0))return this.curve.point(null,null);var t=this.curve.a,r=this.x.redSqr(),i=e.redInvm(),n=r.redAdd(r).redIAdd(r).redIAdd(t).redMul(i),a=n.redSqr().redISub(this.x.redAdd(this.x)),s=n.redMul(this.x.redSub(a)).redISub(this.y);return this.curve.point(a,s)},d.prototype.getX=function(){return this.x.fromRed()},d.prototype.getY=function(){return this.y.fromRed()},d.prototype.mul=function(e){return e=new a(e,16),this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n):this.curve._wnafMulAdd(1,i,n,2)},d.prototype.jmulAdd=function(e,t,r){var i=[this,t],n=[e,r];return this.curve.endo?this.curve._endoWnafMulAdd(i,n,!0):this.curve._wnafMulAdd(1,i,n,2,!0)},d.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||0===this.x.cmp(e.x)&&0===this.y.cmp(e.y))},d.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var r=this.precomputed,i=function(e){return e.neg()};t.precomputed={naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t},d.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(h,o.BasePoint),u.prototype.jpoint=function(e,t,r){return new h(this,e,t,r)},h.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),r=this.x.redMul(t),i=this.y.redMul(t).redMul(e);return this.curve.point(r,i)},h.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},h.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),r=this.z.redSqr(),i=this.x.redMul(t),n=e.x.redMul(r),a=this.y.redMul(t.redMul(e.z)),s=e.y.redMul(r.redMul(this.z)),o=i.redSub(n),c=a.redSub(s);if(0===o.cmpn(0))return 0!==c.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var u=o.redSqr(),d=u.redMul(o),h=i.redMul(u),l=c.redSqr().redIAdd(d).redISub(h).redISub(h),f=c.redMul(h.redISub(l)).redISub(a.redMul(d)),p=this.z.redMul(e.z).redMul(o);return this.curve.jpoint(l,f,p)},h.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),r=this.x,i=e.x.redMul(t),n=this.y,a=e.y.redMul(t).redMul(this.z),s=r.redSub(i),o=n.redSub(a);if(0===s.cmpn(0))return 0!==o.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var c=s.redSqr(),u=c.redMul(s),d=r.redMul(c),h=o.redSqr().redIAdd(u).redISub(d).redISub(d),l=o.redMul(d.redISub(h)).redISub(n.redMul(u)),f=this.z.redMul(s);return this.curve.jpoint(h,l,f)},h.prototype.dblp=function(e){if(0===e)return this;if(this.isInfinity())return this;if(!e)return this.dbl();if(this.curve.zeroA||this.curve.threeA){for(var t=this,r=0;r<e;r++)t=t.dbl();return t}var i=this.curve.a,n=this.curve.tinv,a=this.x,s=this.y,o=this.z,c=o.redSqr().redSqr(),u=s.redAdd(s);for(r=0;r<e;r++){var d=a.redSqr(),h=u.redSqr(),l=h.redSqr(),f=d.redAdd(d).redIAdd(d).redIAdd(i.redMul(c)),p=a.redMul(h),v=f.redSqr().redISub(p.redAdd(p)),m=p.redISub(v),y=f.redMul(m);y=y.redIAdd(y).redISub(l);var g=u.redMul(o);r+1<e&&(c=c.redMul(l)),a=v,o=g,u=y}return this.curve.jpoint(a,u.redMul(n),o)},h.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},h.prototype._zeroDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i),c=o.redSqr().redISub(s).redISub(s),u=a.redIAdd(a);u=(u=u.redIAdd(u)).redIAdd(u),e=c,t=o.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.x.redSqr(),h=this.y.redSqr(),l=h.redSqr(),f=this.x.redAdd(h).redSqr().redISub(d).redISub(l);f=f.redIAdd(f);var p=d.redAdd(d).redIAdd(d),v=p.redSqr(),m=l.redIAdd(l);m=(m=m.redIAdd(m)).redIAdd(m),e=v.redISub(f).redISub(f),t=p.redMul(f.redISub(e)).redISub(m),r=(r=this.y.redMul(this.z)).redIAdd(r)}return this.curve.jpoint(e,t,r)},h.prototype._threeDbl=function(){var e,t,r;if(this.zOne){var i=this.x.redSqr(),n=this.y.redSqr(),a=n.redSqr(),s=this.x.redAdd(n).redSqr().redISub(i).redISub(a);s=s.redIAdd(s);var o=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),c=o.redSqr().redISub(s).redISub(s);e=c;var u=a.redIAdd(a);u=(u=u.redIAdd(u)).redIAdd(u),t=o.redMul(s.redISub(c)).redISub(u),r=this.y.redAdd(this.y)}else{var d=this.z.redSqr(),h=this.y.redSqr(),l=this.x.redMul(h),f=this.x.redSub(d).redMul(this.x.redAdd(d));f=f.redAdd(f).redIAdd(f);var p=l.redIAdd(l),v=(p=p.redIAdd(p)).redAdd(p);e=f.redSqr().redISub(v),r=this.y.redAdd(this.z).redSqr().redISub(h).redISub(d);var m=h.redSqr();m=(m=(m=m.redIAdd(m)).redIAdd(m)).redIAdd(m),t=f.redMul(p.redISub(e)).redISub(m)}return this.curve.jpoint(e,t,r)},h.prototype._dbl=function(){var e=this.curve.a,t=this.x,r=this.y,i=this.z,n=i.redSqr().redSqr(),a=t.redSqr(),s=r.redSqr(),o=a.redAdd(a).redIAdd(a).redIAdd(e.redMul(n)),c=t.redAdd(t),u=(c=c.redIAdd(c)).redMul(s),d=o.redSqr().redISub(u.redAdd(u)),h=u.redISub(d),l=s.redSqr();l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=o.redMul(h).redISub(l),p=r.redAdd(r).redMul(i);return this.curve.jpoint(d,f,p)},h.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr(),i=t.redSqr(),n=e.redAdd(e).redIAdd(e),a=n.redSqr(),s=this.x.redAdd(t).redSqr().redISub(e).redISub(i),o=(s=(s=(s=s.redIAdd(s)).redAdd(s).redIAdd(s)).redISub(a)).redSqr(),c=i.redIAdd(i);c=(c=(c=c.redIAdd(c)).redIAdd(c)).redIAdd(c);var u=n.redIAdd(s).redSqr().redISub(a).redISub(o).redISub(c),d=t.redMul(u);d=(d=d.redIAdd(d)).redIAdd(d);var h=this.x.redMul(o).redISub(d);h=(h=h.redIAdd(h)).redIAdd(h);var l=this.y.redMul(u.redMul(c.redISub(u)).redISub(s.redMul(o)));l=(l=(l=l.redIAdd(l)).redIAdd(l)).redIAdd(l);var f=this.z.redAdd(s).redSqr().redISub(r).redISub(o);return this.curve.jpoint(h,l,f)},h.prototype.mul=function(e,t){return e=new a(e,t),this.curve._wnafMul(this,e)},h.prototype.eq=function(e){if("affine"===e.type)return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),r=e.z.redSqr();if(0!==this.x.redMul(r).redISub(e.x.redMul(t)).cmpn(0))return!1;var i=t.redMul(this.z),n=r.redMul(e.z);return 0===this.y.redMul(n).redISub(e.y.redMul(i)).cmpn(0)},h.prototype.eqXToP=function(e){var t=this.z.redSqr(),r=e.toRed(this.curve.red).redMul(t);if(0===this.x.cmp(r))return!0;for(var i=e.clone(),n=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(r.redIAdd(n),0===this.x.cmp(r))return!0}return!1},h.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},function(e,t,r){"use strict";var i=r(61),n=r(25),a=r(29).inherits,s=i.base,o=r(29).utils;function c(e){s.call(this,"mont",e),this.a=new n(e.a,16).toRed(this.red),this.b=new n(e.b,16).toRed(this.red),this.i4=new n(4).toRed(this.red).redInvm(),this.two=new n(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function u(e,t,r){s.BasePoint.call(this,e,"projective"),null===t&&null===r?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new n(t,16),this.z=new n(r,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}a(c,s),e.exports=c,c.prototype.validate=function(e){var t=e.normalize().x,r=t.redSqr(),i=r.redMul(t).redAdd(r.redMul(this.a)).redAdd(t);return 0===i.redSqrt().redSqr().cmp(i)},a(u,s.BasePoint),c.prototype.decodePoint=function(e,t){return this.point(o.toArray(e,t),1)},c.prototype.point=function(e,t){return new u(this,e,t)},c.prototype.pointFromJSON=function(e){return u.fromJSON(this,e)},u.prototype.precompute=function(){},u.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},u.fromJSON=function(e,t){return new u(e,t[0],t[1]||e.one)},u.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},u.prototype.dbl=function(){var e=this.x.redAdd(this.z).redSqr(),t=this.x.redSub(this.z).redSqr(),r=e.redSub(t),i=e.redMul(t),n=r.redMul(t.redAdd(this.curve.a24.redMul(r)));return this.curve.point(i,n)},u.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.diffAdd=function(e,t){var r=this.x.redAdd(this.z),i=this.x.redSub(this.z),n=e.x.redAdd(e.z),a=e.x.redSub(e.z).redMul(r),s=n.redMul(i),o=t.z.redMul(a.redAdd(s).redSqr()),c=t.x.redMul(a.redISub(s).redSqr());return this.curve.point(o,c)},u.prototype.mul=function(e){for(var t=e.clone(),r=this,i=this.curve.point(null,null),n=[];0!==t.cmpn(0);t.iushrn(1))n.push(t.andln(1));for(var a=n.length-1;a>=0;a--)0===n[a]?(r=r.diffAdd(i,this),i=i.dbl()):(i=r.diffAdd(i,this),r=r.dbl());return i},u.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},u.prototype.eq=function(e){return 0===this.getX().cmp(e.getX())},u.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},u.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},function(e,t,r){"use strict";var i=r(61),n=r(29),a=r(25),s=n.inherits,o=i.base,c=n.utils.assert;function u(e){this.twisted=1!==(0|e.a),this.mOneA=this.twisted&&-1===(0|e.a),this.extended=this.mOneA,o.call(this,"edwards",e),this.a=new a(e.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new a(e.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new a(e.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),c(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1===(0|e.c)}function d(e,t,r,i,n){o.BasePoint.call(this,e,"projective"),null===t&&null===r&&null===i?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new a(t,16),this.y=new a(r,16),this.z=i?new a(i,16):this.curve.one,this.t=n&&new a(n,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(u,o),e.exports=u,u.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)},u.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)},u.prototype.jpoint=function(e,t,r,i){return this.point(e,t,r,i)},u.prototype.pointFromX=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=this.c2.redSub(this.a.redMul(r)),n=this.one.redSub(this.c2.redMul(this.d).redMul(r)),s=i.redMul(n.redInvm()),o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");var c=o.fromRed().isOdd();return(t&&!c||!t&&c)&&(o=o.redNeg()),this.point(e,o)},u.prototype.pointFromY=function(e,t){(e=new a(e,16)).red||(e=e.toRed(this.red));var r=e.redSqr(),i=r.redSub(this.one),n=r.redMul(this.d).redAdd(this.one),s=i.redMul(n.redInvm());if(0===s.cmp(this.zero)){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var o=s.redSqrt();if(0!==o.redSqr().redSub(s).cmp(this.zero))throw new Error("invalid point");return o.isOdd()!==t&&(o=o.redNeg()),this.point(o,e)},u.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),r=e.y.redSqr(),i=t.redMul(this.a).redAdd(r),n=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(r)));return 0===i.cmp(n)},s(d,o.BasePoint),u.prototype.pointFromJSON=function(e){return d.fromJSON(this,e)},u.prototype.point=function(e,t,r,i){return new d(this,e,t,r,i)},d.fromJSON=function(e,t){return new d(e,t[0],t[1],t[2])},d.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},d.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&0===this.y.cmp(this.z)},d.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),r=this.z.redSqr();r=r.redIAdd(r);var i=this.curve._mulA(e),n=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),a=i.redAdd(t),s=a.redSub(r),o=i.redSub(t),c=n.redMul(s),u=a.redMul(o),d=n.redMul(o),h=s.redMul(a);return this.curve.point(c,u,h,d)},d.prototype._projDbl=function(){var e,t,r,i=this.x.redAdd(this.y).redSqr(),n=this.x.redSqr(),a=this.y.redSqr();if(this.curve.twisted){var s=(u=this.curve._mulA(n)).redAdd(a);if(this.zOne)e=i.redSub(n).redSub(a).redMul(s.redSub(this.curve.two)),t=s.redMul(u.redSub(a)),r=s.redSqr().redSub(s).redSub(s);else{var o=this.z.redSqr(),c=s.redSub(o).redISub(o);e=i.redSub(n).redISub(a).redMul(c),t=s.redMul(u.redSub(a)),r=s.redMul(c)}}else{var u=n.redAdd(a);o=this.curve._mulC(this.c.redMul(this.z)).redSqr(),c=u.redSub(o).redSub(o);e=this.curve._mulC(i.redISub(u)).redMul(c),t=this.curve._mulC(u).redMul(n.redISub(a)),r=u.redMul(c)}return this.curve.point(e,t,r)},d.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},d.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),r=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),i=this.t.redMul(this.curve.dd).redMul(e.t),n=this.z.redMul(e.z.redAdd(e.z)),a=r.redSub(t),s=n.redSub(i),o=n.redAdd(i),c=r.redAdd(t),u=a.redMul(s),d=o.redMul(c),h=a.redMul(c),l=s.redMul(o);return this.curve.point(u,d,l,h)},d.prototype._projAdd=function(e){var t,r,i=this.z.redMul(e.z),n=i.redSqr(),a=this.x.redMul(e.x),s=this.y.redMul(e.y),o=this.curve.d.redMul(a).redMul(s),c=n.redSub(o),u=n.redAdd(o),d=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(a).redISub(s),h=i.redMul(c).redMul(d);return this.curve.twisted?(t=i.redMul(u).redMul(s.redSub(this.curve._mulA(a))),r=c.redMul(u)):(t=i.redMul(u).redMul(s.redSub(a)),r=this.curve._mulC(c).redMul(u)),this.curve.point(h,t,r)},d.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)},d.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)},d.prototype.mulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!1)},d.prototype.jmulAdd=function(e,t,r){return this.curve._wnafMulAdd(1,[this,t],[e,r],2,!0)},d.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this},d.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},d.prototype.getX=function(){return this.normalize(),this.x.fromRed()},d.prototype.getY=function(){return this.normalize(),this.y.fromRed()},d.prototype.eq=function(e){return this===e||0===this.getX().cmp(e.getX())&&0===this.getY().cmp(e.getY())},d.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(t))return!0;for(var r=e.clone(),i=this.curve.redN.redMul(this.z);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(i),0===this.x.cmp(t))return!0}return!1},d.prototype.toP=d.prototype.normalize,d.prototype.mixedAdd=d.prototype.add},function(e,t){e.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},function(e,t,r){"use strict";var i=r(25),n=r(256),a=r(29),s=a.utils.assert,o=r(257),c=r(258);function u(e){if(!(this instanceof u))return new u(e);"string"===typeof e&&(s(a.curves.hasOwnProperty(e),"Unknown curve "+e),e=a.curves[e]),e instanceof a.curves.PresetCurve&&(e={curve:e}),this.curve=e.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=e.curve.g,this.g.precompute(e.curve.n.bitLength()+1),this.hash=e.hash||e.curve.hash}e.exports=u,u.prototype.keyPair=function(e){return new o(this,e)},u.prototype.keyFromPrivate=function(e,t){return o.fromPrivate(this,e,t)},u.prototype.keyFromPublic=function(e,t){return o.fromPublic(this,e,t)},u.prototype.genKeyPair=function(e){e||(e={});for(var t=new n({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||null,entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),r=this.n.byteLength(),a=this.n.sub(new i(2));;){var s=new i(t.generate(r));if(!(s.cmp(a)>0))return s.iaddn(1),this.keyFromPrivate(s)}},u.prototype._truncateToN=function(e,t){var r=8*e.byteLength()-this.n.bitLength();return r>0&&(e=e.ushrn(r)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e},u.prototype.sign=function(e,t,r,a){"object"===typeof r&&(a=r,r=null),a||(a={}),t=this.keyFromPrivate(t,r),e=this._truncateToN(new i(e,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),u=e.toArray("be",s),d=new n({hash:this.hash,entropy:a.extraEntropy?o.concat(a.extraEntropy):o,nonce:u,pers:a.pers,persEnc:a.persEnc||"utf8"}),h=this.n.sub(new i(1)),l=0;;l++){var f=a.k?a.k(l):new i(d.generate(this.n.byteLength()));if(!((f=this._truncateToN(f,!0)).cmpn(1)<=0||f.cmp(h)>=0)){var p=this.g.mul(f);if(!p.isInfinity()){var v=p.getX(),m=v.umod(this.n);if(0!==m.cmpn(0)){var y=f.invm(this.n).mul(m.mul(t.getPrivate()).iadd(e));if(0!==(y=y.umod(this.n)).cmpn(0)){var g=(p.getY().isOdd()?1:0)|(0!==v.cmp(m)?2:0);return a.canonical&&y.cmp(this.nh)>0&&(y=this.n.sub(y),g^=1),new c({r:m,s:y,recoveryParam:g})}}}}}},u.prototype.verify=function(e,t,r,n){e=this._truncateToN(new i(e,16)),r=this.keyFromPublic(r,n);var a=(t=new c(t,"hex")).r,s=t.s;if(a.cmpn(1)<0||a.cmp(this.n)>=0)return!1;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;var o,u=s.invm(this.n),d=u.mul(e).umod(this.n),h=u.mul(a).umod(this.n);return this.curve._maxwellTrick?!(o=this.g.jmulAdd(d,r.getPublic(),h)).isInfinity()&&o.eqXToP(a):!(o=this.g.mulAdd(d,r.getPublic(),h)).isInfinity()&&0===o.getX().umod(this.n).cmp(a)},u.prototype.recoverPubKey=function(e,t,r,n){s((3&r)===r,"The recovery param is more than two bits"),t=new c(t,n);var a=this.n,o=new i(e),u=t.r,d=t.s,h=1&r,l=r>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&l)throw new Error("Unable to find sencond key candinate");u=l?this.curve.pointFromX(u.add(this.curve.n),h):this.curve.pointFromX(u,h);var f=t.r.invm(a),p=a.sub(o).mul(f).umod(a),v=d.mul(f).umod(a);return this.g.mulAdd(p,u,v)},u.prototype.getKeyRecoveryParam=function(e,t,r,i){if(null!==(t=new c(t,i)).recoveryParam)return t.recoveryParam;for(var n=0;n<4;n++){var a;try{a=this.recoverPubKey(e,t,n)}catch(e){continue}if(a.eq(r))return n}throw new Error("Unable to find valid recovery factor")}},function(e,t,r){"use strict";var i=r(51),n=r(44).assert,a=r(44),s=r(50).byteArrayToWordArray,o=i.enc.Utf8.parse("\x01"),c=i.enc.Utf8.parse("\0");function u(e){if(!(this instanceof u))return new u(e);this.hash=e.hash,this.predResist=!!e.predResist,this.outLen=this.hash.slice(3,6),this.minEntropy=e.minEntropy||192,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=e.entropy,r=e.nonce;n(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,r,[])}e.exports=u,u.prototype._init=function(e,t,r){var n=e.concat(t).concat(r);this.K=new i.lib.WordArray.init,this.V=new i.lib.WordArray.init;this.V.words=Array(this.outLen/32).fill(16843009),this.V.sigBytes=32,this._update(n),this._reseed=1,this.reseedInterval=281474976710656},u.prototype._hmac=function(){return new i.lib.WordArray.init},u.prototype._update=function(e){var t=this._hmac();t.concat(this.V),t.concat(c),e&&t.concat(s(e)),this.K=i["Hmac"+this.hash](t,this.K),this.V=i["Hmac"+this.hash](this.V,this.K),e&&((t=this._hmac()).concat(this.V),t.concat(o),t.concat(s(e)),this.K=i["Hmac"+this.hash](t,this.K),this.V=i["Hmac"+this.hash](this.V,this.K))},u.prototype.reseed=function(e,t,r,i){"string"!==typeof t&&(r,r=t,t=null),n(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(r||[])),this._reseed=1},u.prototype.generate=function(e,t,r,n){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!==typeof t&&(r,r=t,t=null),r&&(r=i.enc.Utf8.parse(r),this._update(r));for(var s=new i.lib.WordArray.init;s.sigBytes<e;)this.V=i["Hmac"+this.hash](this.V,this.K),s.concat(this.V);return this._update(r),this._reseed++,a.wordArrayToBuffer(s)}},function(e,t,r){"use strict";var i=r(25),n=r(29).utils.assert;function a(e,t){this.ec=e,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}e.exports=a,a.fromPublic=function(e,t,r){return t instanceof a?t:new a(e,{pub:t,pubEnc:r})},a.fromPrivate=function(e,t,r){return t instanceof a?t:new a(e,{priv:t,privEnc:r})},a.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},a.prototype.getPublic=function(e,t){return"string"===typeof e&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub},a.prototype.getPrivate=function(e){return"hex"===e?this.priv.toString(16,2):this.priv},a.prototype._importPrivate=function(e,t){this.priv=new i(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)},a.prototype._importPublic=function(e,t){if(e.x||e.y)return"mont"===this.ec.curve.type?n(e.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(e.x&&e.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(e.x,e.y));this.pub=this.ec.curve.decodePoint(e,t)},a.prototype.derive=function(e){return e.mul(this.priv).getX()},a.prototype.sign=function(e,t,r){return this.ec.sign(e,this,t,r)},a.prototype.verify=function(e,t){return this.ec.verify(e,t,this)},a.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},function(e,t,r){"use strict";var i=r(25),n=r(29).utils.assert;e.exports=function e(t,r){if(t instanceof e)return t;n(t.r&&t.s,"Signature without r or s"),this.r=new i(t.r,16),this.s=new i(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam}},function(e,t,r){"use strict";var i=r(126),n=r(44),a=n.assert,s=n.parseBytes,o=r(260),c=r(261),u=r(25),d=r(50).byteArrayToWordArray,h=r(51);function l(e){if(a("ed25519"===e,"only tested with ed25519 so far"),!(this instanceof l))return new l(e);var t=i[e].curve;this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8)}e.exports=l,l.prototype.sign=function(e,t){e=s(e);var r=this.keyFromSecret(t),i=this.hashInt(r.secret(),e),n=this.g.mul(i),a=this.encodePoint(n),o=this.hashInt(a,r.pubBytes(),e);o=o.mul(r.priv());var c=i.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:c,Rencoded:a})},l.prototype.signModified=function(e,t){e=s(e);var r=this.keyFromSecret(t),i=new u(r.secret(),16,"le"),n=this.encodePoint(this.g.mul(i)),a=128&n[31],o=this.hashInt(r.secret(),e),c=this.g.mul(o),d=this.encodePoint(c),h=this.hashInt(d,n,e);h=h.mul(i);var l=o.add(h).umod(this.curve.n),f=l.toArray("le");return f[31]|=a,this.makeSignature({R:c,S:l,Rencoded:d,Sencoded:f})},l.prototype.verify=function(e,t,r){e=s(e),t=this.makeSignature(t);var i=this.keyFromPublic(r),n=this.hashInt(t.Rencoded(),i.pubBytes(),e),a=this.g.mul(t.S());return t.R().add(i.pub().mul(n)).eq(a)},l.prototype.hashInt=function(){var e=Array.from(arguments).reduce((function(e,t){return e.concat(t)}));e=d(e);var t=h.SHA512(e).toString(h.enc.Hex);return n.intFromLE(t).umod(this.curve.n)},l.prototype.keyFromPublic=function(e){return o.fromPublic(this,e)},l.prototype.keyFromSecret=function(e){return o.fromSecret(this,e)},l.prototype.makeSignature=function(e){return e instanceof c?e:new c(this,e)},l.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t},l.prototype.decodePoint=function(e){var t=(e=n.parseBytes(e)).length-1,r=e.slice(0,t).concat(-129&e[t]),i=0!==(128&e[t]),a=n.intFromLE(r);return this.curve.pointFromY(a,i)},l.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)},l.prototype.decodeInt=function(e){return n.intFromLE(e)},l.prototype.isPoint=function(e){return e instanceof this.pointClass}},function(e,t,r){"use strict";var i=r(44),n=i.assert,a=i.parseBytes,s=i.cachedProperty;function o(e,t){this.eddsa=e,this._secret=a(t.secret),e.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=a(t.pub)}o.fromPublic=function(e,t){return t instanceof o?t:new o(e,{pub:t})},o.fromSecret=function(e,t){return t instanceof o?t:new o(e,{secret:t})},o.prototype.secret=function(){return this._secret},s(o,"pubBytes",(function(){return this.eddsa.encodePoint(this.pub())})),s(o,"pub",(function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())})),s(o,"privBytes",(function(){var e=this.eddsa,t=this.hash(),r=e.encodingLength-1,i=t.slice(0,e.encodingLength);return i[0]&=248,i[r]&=127,i[r]|=64,i})),s(o,"priv",(function(){return this.eddsa.decodeInt(this.privBytes())})),s(o,"hash",(function(){return this.eddsa.hash().update(this.secret()).digest()})),s(o,"messagePrefix",(function(){return this.hash().slice(this.eddsa.encodingLength)})),o.prototype.sign=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)},o.prototype.signModified=function(e){return n(this._secret,"KeyPair can only verify"),this.eddsa.signModified(e,this)},o.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)},o.prototype.getSecret=function(e){return n(this._secret,"KeyPair is public only"),i.encode(this.secret(),e)},o.prototype.getPublic=function(e){return i.encode(this.pubBytes(),e)},e.exports=o},function(e,t,r){"use strict";var i=r(25),n=r(44),a=n.assert,s=n.cachedProperty,o=n.parseBytes;function c(e,t){this.eddsa=e,"object"!==typeof t&&(t=o(t)),Array.isArray(t)&&(t={R:t.slice(0,e.encodingLength),S:t.slice(e.encodingLength)}),a(t.R&&t.S,"Signature without R or S"),e.isPoint(t.R)&&(this._R=t.R),t.S instanceof i&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}s(c,"S",(function(){return this.eddsa.decodeInt(this.Sencoded())})),s(c,"R",(function(){return this.eddsa.decodePoint(this.Rencoded())})),s(c,"Rencoded",(function(){return this.eddsa.encodePoint(this.R())})),s(c,"Sencoded",(function(){return this.eddsa.encodeInt(this.S())})),c.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},c.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},e.exports=c},function(e,t,r){var i=r(263),n=r(127);e.exports=function(e,t){return!t||"object"!==i(t)&&"function"!==typeof t?n(e):t}},function(e,t){function r(t){return"function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?e.exports=r=function(e){return typeof e}:e.exports=r=function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(t)}e.exports=r},function(e,t,r){"use strict";e.exports={BaseError:{ExchangeError:{AuthenticationError:{PermissionDenied:{},AccountSuspended:{}},ArgumentsRequired:{},BadRequest:{BadSymbol:{}},BadResponse:{NullResponse:{}},InsufficientFunds:{},InvalidAddress:{AddressPending:{}},InvalidOrder:{OrderNotFound:{},OrderNotCached:{},CancelPending:{},OrderImmediatelyFillable:{},OrderNotFillable:{},DuplicateOrderId:{}},NotSupported:{}},NetworkError:{DDoSProtection:{RateLimitExceeded:{}},ExchangeNotAvailable:{OnMaintenance:{}},InvalidNonce:{},RequestTimeout:{}}}}},function(e,t,r){var i=r(3),n=r(80),a=r(266),s=r(267);function o(t){var r="function"===typeof Map?new Map:void 0;return e.exports=o=function(e){if(null===e||!a(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof r){if(r.has(e))return r.get(e);r.set(e,t)}function t(){return s(e,arguments,i(this).constructor)}return t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n(t,e)},o(t)}e.exports=o},function(e,t){e.exports=function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}},function(e,t,r){var i=r(80),n=r(128);function a(t,r,s){return n()?e.exports=a=Reflect.construct:e.exports=a=function(e,t,r){var n=[null];n.push.apply(n,t);var a=new(Function.bind.apply(e,n));return r&&i(a,r.prototype),a},a.apply(null,arguments)}e.exports=a},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(129),s=a.sleep,o=a.now;e.exports={throttle:function e(t){var r=o(),a=void 0!==t.numTokens?t.numTokens:t.capacity,c=!1,u=[];return Object.assign((function(e,d){if(u.length>t.maxCapacity)throw new Error("Backlog is over max capacity of "+t.maxCapacity);return new Promise(function(){var h=n(i.mark((function n(h,l){var f,p,v,m,y;return i.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,u.push({cost:d,resolve:h,reject:l}),c){i.next=15;break}c=!0;case 4:if(!(u.length>0)){i.next=14;break}return(t.capacity?a>0:a>=0)&&u.length>0&&(f=u[0],p=f.cost,v=f.resolve,f.reject,p=p||t.defaultCost,a>=Math.min(p,t.capacity)&&(a-=p,u.shift(),v())),m=o(),y=m-r,r=m,a=Math.min(t.capacity,a+y*(1/e)),i.next=12,s(t.delay);case 12:i.next=4;break;case 14:c=!1;case 15:i.next=20;break;case 17:i.prev=17,i.t0=i.catch(0),l(i.t0);case 20:case"end":return i.stop()}}),n,null,[[0,17]])})));return function(e,t){return h.apply(this,arguments)}}())}),t,{configure:function(r){return e(Object.assign({},t,r))}})}}},function(e,t,r){"use strict";var i=r(16),n=r(13),a=n.ROUND_UP,s=n.ROUND_DOWN,o=r(10).NotSupported,c=function(e){var t=e.slice(0,-1),r=e.slice(-1),i=void 0;if("y"===r)i=31536e3;else if("M"===r)i=2592e3;else if("w"===r)i=604800;else if("d"===r)i=86400;else if("h"===r)i=3600;else if("m"===r)i=60;else{if("s"!==r)throw new o("timeframe unit "+r+" is not supported");i=1}return t*i};e.exports={aggregate:function(e){for(var t={},r=0;r<e.length;r++){var n=i(e[r],2),a=n[0],s=n[1];s>0&&(t[a]=(t[a]||0)+s)}return Object.keys(t).map((function(e){return[parseFloat(e),parseFloat(t[e])]}))},parseTimeframe:c,roundTimeframe:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,i=1e3*c(e),n=t%i;return t-n+(r===a?i:0)},buildOHLCVC:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1m",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1/0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,n=1e3*c(t),a=[],s=[0,1,2,3,4,5,6],o=s[0],u=s[2],d=s[3],h=s[4],l=s[5],f=s[6],p=Math.min(e.length-1,i),v=0;v<=p;v++){var m=e[v];if(!(m.timestamp<r)){var y=Math.floor(m.timestamp/n)*n,g=a.length-1;-1===g||y>=a[g][o]+n?a.push([y,m.price,m.price,m.price,m.price,m.amount,1]):(a[g][u]=Math.max(a[g][u],m.price),a[g][d]=Math.min(a[g][d],m.price),a[g][h]=m.price,a[g][l]+=m.amount,a[g][f]++)}}return a},ROUND_UP:a,ROUND_DOWN:s,implodeParams:function(e,t){if(!Array.isArray(t))for(var r=Object.keys(t),i=0;i<r.length;i++){var n=r[i];Array.isArray(t[n])||(e=e.replace("{"+n+"}",t[n]))}return e},extractParams:function(e){for(var t=/{([\w-]+)}/g,r=[],i=t.exec(e);i;)r.push(i[1]),i=t.exec(e);return r},vwap:function(e,t){return void 0!==e&&void 0!==t&&e>0?t/e:void 0}}},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.AuthenticationError,v=l.ExchangeError,m=l.ExchangeNotAvailable,y=l.OrderNotFound,g=l.InvalidOrder,b=l.CancelPending,k=l.RateLimitExceeded,x=l.InsufficientFunds,w=l.BadRequest,_=l.BadSymbol,O=l.PermissionDenied,T=r(13).TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"aax",name:"AAX",countries:["MT"],enableRateLimit:!0,rateLimit:500,version:"v2",hostname:"aaxpro.com",certified:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchStatus:!0,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","12h":"12h","1d":"1d","3d":"3d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/104140087-a27f2580-53c0-11eb-87c1-5d9e81208fe9.jpg",test:{v1:"https://api.testnet.{hostname}/marketdata/v1",public:"https://api.testnet.{hostname}",private:"https://api.testnet.{hostname}"},api:{v1:"https://api.{hostname}/marketdata/v1",public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://www.aaxpro.com",doc:"https://www.aaxpro.com/apidoc/index.html",fees:"https://www.aaxpro.com/en-US/fees/",referral:"https://www.aaxpro.com/invite/sign-up?inviteCode=JXGm5Fy7R2MB"},api:{v1:{get:["getHistMarketData"]},public:{get:["announcement/maintenance","instruments","market/orderbook","futures/position/openInterest","market/tickers","market/candles","market/history/candles","market/trades","market/markPrice","futures/funding/predictedFunding/{symbol}","futures/funding/prevFundingRate/{symbol}","market/candles/index"]},private:{get:["user/info","account/balances","account/deposit/address","spot/trades","spot/openOrders","spot/orders","futures/position","futures/position/closed","futures/trades","futures/openOrders","futures/orders","futures/funding/predictedFundingFee/{symbol}"],post:["account/transfer","spot/orders","spot/orders/cancelAllOnTimeout","futures/orders","futures/orders/cancelAllOnTimeout","futures/position/sltp","futures/position/close","futures/position/leverage","futures/position/margin"],put:["spot/orders","futures/orders"],delete:["spot/orders/cancel/{orderID}","spot/orders/cancel/all","futures/orders/cancel/{orderID}","futures/orders/cancel/all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:6e-4,taker:.001},funding:{tierBased:!1,percentage:!0,withdraw:{}}},commonCurrencies:{XBT:"XBT"},exceptions:{exact:{2002:x,2003:y,10003:w,10006:p,10007:p,11007:p,20001:x,20009:g,3e4:y,30001:g,30004:g,30005:g,30006:g,30007:g,30008:g,30009:g,30010:g,30011:b,30012:w,30013:_,30014:y,30015:g,30016:v,30017:g,30018:g,30019:g,30020:g,30021:g,30022:g,30023:g,30024:g,30025:g,30026:g,30027:g,30028:_,30029:g,30030:g,30031:g,30032:g,30033:g,30034:k,30035:k,30036:m,30037:g,30038:v,30039:x,30040:g,30041:g,30042:g,30043:g,30044:w,30045:g,30046:g,30047:g,30048:g,30049:g,30050:g,40004:w,40009:k,40102:p,40103:p,40303:O,41001:w,41002:w,42001:m,50001:v,50002:v},broad:{}},precisionMode:T,options:{defaultType:"spot"}})}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetAnnouncementMaintenance(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.milliseconds(),s=this.parse8601(this.safeString(n,"startTime")),o=this.parse8601(this.safeString(n,"endTime")),c={updated:this.safeInteger(r,"ts",a)},void 0!==o&&(u=void 0===s||a<s,d=a>o||u,c.eta=o,c.status=d?"ok":"maintenance"),this.status=this.extend(this.status,c),e.abrupt("return",this.status);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.publicGetInstruments(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"symbol"),u=this.safeString(o,"base"),d=this.safeString(o,"quote"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=this.safeString(o,"status"),p="enable"===f,v=this.safeFloat(o,"takerFee"),m=this.safeFloat(o,"makerFee"),y=this.safeString(o,"type"),g=void 0,b=void 0,k=void 0,x="spot"===y,w="futures"===y,void 0!==(_=this.safeStringLower(o,"settleType"))&&(g="inverse"===_,b="vanilla"===_,k="quanto"===_),O=c,"spot"===y&&(O=h+"/"+l),T={amount:this.safeFloat(o,"lotSize"),price:this.safeFloat(o,"tickSize")},a.push({id:c,symbol:O,base:h,quote:l,baseId:u,quoteId:d,type:y,spot:x,futures:w,inverse:g,linear:b,quanto:k,precision:T,info:o,active:p,taker:v,maker:m,percentage:!1,tierBased:!0,limits:{amount:{min:this.safeString(o,"minQuantity"),max:this.safeString(o,"maxQuantity")},price:{min:this.safeString(o,"minPrice"),max:this.safeString(o,"maxPrice")},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"t"),i=this.safeString(e,"s"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"c"),s=this.safeFloat(e,"o"),o=void 0,c=void 0,u=void 0;void 0!==a&&void 0!==s&&(o=a-s,s>0&&(c=o/s*100),u=this.sum(a,s)/2);var d=this.safeFloat(e,"v");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"h"),low:this.safeFloat(e,"l"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:u,baseVolume:void 0,quoteVolume:d,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers(void 0,r);case 3:if(n=e.sent,!(t in n)){e.next=6;break}return e.abrupt("return",n[t]);case 6:throw new _(this.id+" fetchTicker() symbol "+t+" ticker not found");case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"tickers",[]),s=[],o=this.safeInteger(n,"t"),c=0;c<a.length;c++)u=this.parseTicker(this.extend(a[c],{t:o})),s.push(u);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:if(a=this.market(t),void 0!==r){e.next=9;break}r=20,e.next=11;break;case 9:if(20===r||50===r){e.next=11;break}throw new w(this.id+" fetchOrderBook() limit argument must be undefined, 20 or 50");case 11:return s={symbol:a.id,level:r},e.next=14,this.publicGetMarketOrderbook(this.extend(s,n));case 14:return o=e.sent,c=this.safeInteger(o,"t"),e.abrupt("return",this.parseOrderBook(o,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"t");void 0===r&&(r=this.parse8601(this.safeString(e,"createTime")));var i=this.safeString2(e,"tid","tradeID"),n=void 0,a=this.safeString(e,"symbol");void 0!==(t=this.safeMarket(a,t))&&(n=t.symbol);var s=this.safeFloat2(e,"p","filledPrice"),o=this.safeFloat2(e,"q","filledQty"),c=this.safeString(e,"orderID"),u=this.safeValue(e,"taker"),d=void 0;void 0!==u&&(d=u?"taker":"maker");var h=this.safeString(e,"side");"1"===h?h="buy":"2"===h&&(h="sell"),void 0===h&&(h=s>0?"buy":"sell"),h=s>0?"buy":"sell";var l=void 0;void 0!==(s=Math.abs(s))&&void 0!==o&&(l=s*o);var f=this.parseOrderType(this.safeString(e,"orderType")),p=void 0,v=this.safeFloat(e,"commission");if(void 0!==v){var m=void 0;void 0!==t&&("buy"===h?m=t.base:"sell"===h&&(m=t.quote)),p={currency:m,cost:v}}return{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:n,type:f,side:h,order:c,takerOrMaker:d,price:s,amount:o,cost:l,fee:p}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),n=void 0===n?2e3:n,n=Math.min(n,2e3),s={symbol:a.id,limit:n},e.next=11,this.publicGetMarketTrades(s);case 11:return o=e.sent,c=this.safeValue(o,"trades",[]),e.abrupt("return",this.parseTrades(c,a,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,5),this.safeFloat(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1h",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,timeFrame:this.timeframes[r]},a=void 0===a?500:a,u=this.parseTimeframe(r),void 0===n?(d=this.seconds(),c.start=d-u*a,c.end=d):(h=parseInt(n/1e3),c.start=h,c.end=this.sum(h,u*a)),e.next=13,this.publicGetMarketHistoryCandles(this.extend(c,s));case 13:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString2(this.options,"fetchBalance","defaultType","spot"),n=this.safeString(t,"type",r),a={spot:"SPTP",future:"FUTP",otc:"F2CP",saving:"VLTP"},s=this.safeString(a,n,n),o={purseType:s},t=this.omit(t,"type"),e.next=11,this.privateGetAccountBalances(this.extend(o,t));case 11:for(c=e.sent,u=this.safeValue(c,"data"),d={info:c},h=0;h<u.length;h++)l=u[h],this.safeString(l,"purseType")===s&&(f=this.safeString(l,"currency"),p=this.safeCurrencyCode(f),(v=this.account()).free=this.safeFloat(l,"available"),v.used=this.safeFloat(l,"unavailable"),d[p]=v);return e.abrupt("return",this.parseBalance(d));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},c=r.toUpperCase(),u=n.toUpperCase(),e.next=6,this.loadMarkets();case 6:if(d=this.market(t),h={symbol:d.id,orderQty:this.amountToPrecision(t,a),side:u},void 0!==(l=this.safeString(o,"timeInForce"))&&(h.timeInForce=l,o=this.omit(o,"timeInForce")),void 0!==(p=this.safeString2(o,"clOrdID","clientOrderId"))&&(h.clOrdID=p,o=this.omit(o,["clOrdID","clientOrderId"])),void 0!==(v=this.safeFloat(o,"stopPrice"))){e.next=18;break}if("STOP-LIMIT"!==c&&"STOP"!==c){e.next=16;break}throw new f(this.id+" createOrder() requires a stopPrice parameter for "+c+" orders");case 16:e.next=21;break;case 18:"LIMIT"===c?c="STOP-LIMIT":"MARKET"===c&&(c="STOP"),h.stopPrice=this.priceToPrecision(t,v),o=this.omit(o,"stopPrice");case 21:return"LIMIT"!==c&&"STOP-LIMIT"!==c||(h.price=this.priceToPrecision(t,s)),h.orderType=c,m=void 0,d.spot?m="privatePostSpotOrders":d.futures&&(m="privatePostFuturesOrders"),e.next=27,this[m](this.extend(h,o));case 27:return y=e.sent,g=this.safeValue(y,"data",{}),e.abrupt("return",this.parseOrder(g,d));case 30:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=v.length>5&&void 0!==v[5]?v[5]:void 0,c=v.length>6&&void 0!==v[6]?v[6]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(r),d={orderID:t},void 0!==(h=this.safeFloat(c,"stopPrice"))&&(d.stopPrice=this.priceToPrecision(r,h),c=this.omit(c,"stopPrice")),void 0!==o&&(d.price=this.priceToPrecision(r,o)),void 0!==s&&(d.orderQty=this.amountToPrecision(r,s)),l=void 0,u.spot?l="privatePutSpotOrders":u.futures&&(l="privatePutFuturesOrders"),e.next=14,this[l](this.extend(d,c));case 14:return f=e.sent,p=this.safeValue(f,"data",{}),e.abrupt("return",this.parseOrder(p,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderID:t},s=void 0,o=this.safeString2(this.options,"cancelOrder","defaultType","spot"),c=this.safeString(n,"type",o),n=this.omit(n,"type"),u=void 0,void 0!==r&&(u=this.market(r),c=u.type),"spot"===c?s="privateDeleteSpotOrdersCancelOrderID":"futures"===c&&(s="privateDeleteFuturesOrdersCancelOrderID"),e.next=14,this[s](this.extend(a,n));case 14:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h,u));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},void 0!==t){e.next=4;break}throw new f(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},s=void 0,n.spot?s="privateDeleteSpotOrdersCancelAll":n.futures&&(s="privateDeleteFuturesOrdersCancelAll"),e.next=12,this[s](this.extend(a,r));case 12:return o=e.sent,e.abrupt("return",o);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.safeString2(this.options,"fetchOrder","defaultType","spot"),n.type=this.safeString(n,"type",a),s={},void 0===(o=this.safeString2(n,"clOrdID","clientOrderId"))?s.orderID=t:(s.clOrdID=o,n=this.omit(n,["clOrdID","clientOrderId"])),e.next=11,this.fetchOrders(r,void 0,void 0,this.extend(s,n));case 11:if(c=e.sent,void 0!==(u=this.safeValue(c,0))){e.next=19;break}if(void 0!==o){e.next=18;break}throw new y(this.id+" fetchOrder() could not find order id "+t);case 18:throw new y(this.id+" fetchOrder() could not find order clientOrderID "+o);case 19:return e.abrupt("return",u);case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=this.safeString2(this.options,"fetchOpenOrders","defaultType","spot"),c=this.safeString(a,"type",o),a=this.omit(a,"type"),u=void 0,void 0!==t&&(u=this.market(t),s.symbol=u.id,c=u.type),void 0!==(d=this.safeString2(a,"clOrdID","clientOrderId"))&&(s.clOrdID=d,a=this.omit(a,["clOrdID","clientOrderId"])),h=void 0,"spot"===c?h="privateGetSpotOpenOrders":"futures"===c&&(h="privateGetFuturesOpenOrders"),void 0!==n&&(s.pageSize=n),e.next=19,this[h](this.extend(s,a));case 19:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.safeValue(f,"list",[]),e.abrupt("return",this.parseOrders(p,u,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={orderStatus:"2"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={orderStatus:"3"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,c=this.safeString2(this.options,"fetchOrders","defaultType","spot"),u=this.safeString(a,"type",c),a=this.omit(a,"type"),d=void 0,void 0!==t&&(d=this.market(t),s.symbol=d.id,u=d.type),"spot"===u?o="privateGetSpotOrders":"futures"===u&&(o="privateGetFuturesOrders"),void 0!==(h=this.safeString2(a,"clOrdID","clientOrderId"))&&(s.clOrdID=h,a=this.omit(a,["clOrdID","clientOrderId"])),void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymd(r)),e.next=20,this[o](this.extend(s,a));case 20:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.safeValue(f,"list",[]),e.abrupt("return",this.parseOrders(p,d,r,n));case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"rejected",10:"expired",11:"rejected"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({1:"market",2:"limit",3:"stop",4:"stop-limit",7:"stop-loss",8:"take-profit"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({1:"GTC",3:"IOC",4:"FOK"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"createTime");"string"===typeof r&&(r=this.parse8601(r));var i=this.parseOrderStatus(this.safeString(e,"orderStatus")),n=this.parseOrderType(this.safeString(e,"orderType")),a=this.safeString(e,"side");"1"===a?a="buy":"2"===a&&(a="sell");var s=this.safeString(e,"orderID"),o=this.safeString(e,"clOrdID"),c=this.safeString(e,"symbol"),u=(t=this.safeMarket(c,t)).symbol,d=this.safeFloat(e,"price"),h=this.safeFloat(e,"stopPrice"),l=this.parseTimeInForce(this.safeString(e,"timeInForce")),f=this.safeString(e,"execInst"),p="Post-Only"===f,v=this.safeFloat(e,"avgPrice"),m=this.safeFloat(e,"orderQty"),y=this.safeFloat(e,"cumQty"),g=this.safeString(e,"leavesQty"),b=void 0,k=void 0;void 0!==y&&(void 0!==d&&(b=y*d),y>0&&"string"===typeof(k=this.safeValue(e,"transactTime"))&&(k=this.parse8601(k)));var x=void 0,w=this.safeFloat(e,"commission");if(void 0!==w){var _=void 0;void 0!==t&&("buy"===a?_=t.base:"sell"===a&&(_=t.quote)),x={currency:_,cost:w}}return{id:s,info:e,clientOrderId:o,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:k,status:i,symbol:u,type:n,timeInForce:l,postOnly:p,side:a,price:d,stopPrice:h,average:v,amount:m,filled:y,remaining:g,cost:b,trades:void 0,fee:x}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,c=this.safeString2(this.options,"fetchMyTrades","defaultType","spot"),u=this.safeString(a,"type",c),a=this.omit(a,"type"),d=void 0,void 0!==t&&(d=this.market(t),s.symbol=d.id,u=d.type),"spot"===u?o="privateGetSpotTrades":"futures"===u&&(o="privateGetFuturesTrades"),void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymd(r)),e.next=18,this[o](this.extend(s,a));case 18:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.safeValue(l,"list",[]),e.abrupt("return",this.parseTrades(f,d,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetAccountDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseDepositAddress(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"tag"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return{info:e,code:n,address:t,tag:r}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("v1"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if(s="/"+this.version+s,"public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString();n={"X-ACCESS-KEY":this.apiKey,"X-ACCESS-NONCE":c};var u=c+":"+r;"GET"===r?(Object.keys(o).length&&(s+="?"+this.urlencode(o)),u+=s):(n["Content-Type"]="application/json",u+=s+(a=this.json(o)));var d=this.hmac(this.encode(u),this.encode(this.secret));n["X-ACCESS-SIGN"]=d}return{url:s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"code");if(void 0!==u&&"1"!==u){var d=this.id+" "+this.json(s);this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d)}}}}]),r}(h)},function(e,t,r){var i=r(3);e.exports=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=i(e)););return e}},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.ExchangeError,v=l.BadSymbol,m=l.InvalidOrder,y=l.PermissionDenied,g=l.InvalidAddress,b=l.AuthenticationError,k=l.InvalidNonce,x=l.BadRequest,w=l.InsufficientFunds,_=l.OrderNotFound,O=r(13).TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"aofex",name:"AOFEX",countries:["GB"],rateLimit:1e3,has:{fetchMarkets:!0,fetchCurrencies:!1,fetchOrderBook:!0,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchClosedOrder:!0,fetchOrderTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","6h":"6hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77670271-056d1080-6f97-11ea-9ac2-4268e9ed0c1f.jpg",api:{public:"https://openapi.aofex.com/openApi",private:"https://openapi.aofex.com/openApi"},www:"https://aofex.com",doc:"https://aofex.zendesk.com/hc/en-us/sections/360005576574-API",fees:"https://aofex.zendesk.com/hc/en-us/articles/360025814934-Fees-on-AOFEX",referral:"https://aofex.com/#/register?key=9763840"},api:{public:{get:["market/symbols","market/trade","market/depth","market/kline","market/precision","market/24kline","market/gears_depth","market/detail"]},private:{get:["entrust/currentList","entrust/historyList","entrust/rate","wallet/list","entrust/detail"],post:["entrust/add","entrust/cancel"]}},fees:{trading:{maker:.0019,taker:.002}},exceptions:{exact:{20001:p,20401:y,20500:p,20501:v,20502:p,20503:p,20504:w,20505:x,20506:b,20507:p,20508:g,20509:w,20510:m,20511:m,20512:m,20513:m,20514:m,20515:m,20516:m,20517:m,50518:m,20519:k,20520:k,20521:x,20522:p,20523:b,20524:y,20525:b,20526:y,20527:y,20528:y,20529:b,20530:y},broad:{}},options:{fetchBalance:{show_all:"0"}},commonCurrencies:{CPC:"Consensus Planet Coin"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetMarketSymbols(t);case 3:return r=e.sent,e.next=6,this.publicGetMarketPrecision();case 6:for(n=e.sent,n=this.safeValue(n,"result",{}),r=this.safeValue(r,"result",[]),a=[],s=0;s<r.length;s++)o=r[s],c=this.safeString(o,"symbol"),u=this.safeString(o,"base_currency"),d=this.safeString(o,"quote_currency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeInteger(o,"id"),v=this.safeValue(n,c,{}),m=this.safeFloat(o,"maker_fee"),y=this.safeFloat(o,"taker_fee"),a.push({id:c,numericId:p,symbol:f,baseId:u,quoteId:d,base:h,quote:l,active:void 0,maker:m/1e3,taker:y/1e3,precision:{amount:this.safeInteger(v,"amount"),price:this.safeInteger(v,"price")},limits:{amount:{min:this.safeFloat(o,"min_size"),max:this.safeFloat(o,"max_size")},price:{min:this.safeFloat(o,"min_price"),max:this.safeFloat(o,"max_price")},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"amount")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=150),c={symbol:o.id,period:this.timeframes[r],size:a},e.next=11,this.publicGetMarketKline(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"result",{}),h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOHLCVs(h,o,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeValue(this.options,"fetchBalance",{}),n=this.safeValue(r,"show_all","0"),a={show_all:n},e.next=8,this.privateGetWalletList(this.extend(a,t));case 8:for(s=e.sent,o={info:s},c=this.safeValue(s,"result",[]),u=0;u<c.length;u++)d=c[u],h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).free=this.safeFloat(d,"available"),f.used=this.safeFloat(d,"frozen"),o[l]=f;return e.abrupt("return",this.parseBalance(o));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.privateGetEntrustRate(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",{info:s,symbol:t,maker:this.safeFloat(o,"fromFee"),taker:this.safeFloat(o,"toFee")});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetMarketDepth(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result",{}),o=this.safeInteger(s,"ts"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"id"),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"open"),a=this.safeFloat(e,"close"),s=void 0;s=void 0!==i?parseFloat(this.priceToPrecision(i,a-n)):a-n;var o=this.sum(a,n)/2,c=s/n*100,u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"vol"),h=this.vwap(u,d);return void 0!==h&&(h=parseFloat(this.priceToPrecision(i,h))),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:h,open:n,close:a,last:a,previousClose:void 0,change:s,percentage:c,average:o,baseVolume:u,quoteVolume:d,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.symbol=a.join(",")),e.next=8,this.publicGetMarket24kline(this.extend(n,r));case 8:for(s=e.sent,o=this.safeValue(s,"result",[]),c={},u=0;u<o.length;u++)d=this.safeString(o[u],"symbol"),h=this.safeMarket(d,void 0,"-"),l=h.symbol,f=this.safeValue(o[u],"data",{}),c[l]=this.parseTicker(f,h);return e.abrupt("return",this.filterByArray(c,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetMarketDetail(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"ctime")),n=this.safeTimestamp(e,"ts",i)-288e5,a=void 0;void 0===a&&void 0!==t&&(a=t.symbol);var s=this.safeString(e,"direction"),o=this.safeFloat(e,"price"),c=this.safeFloat2(e,"amount","number"),u=this.safeFloat(e,"total_price");void 0===u&&void 0!==o&&void 0!==c&&(u=o*c);var d=this.safeFloat(e,"fee"),h=void 0;if(void 0!==d){var l=void 0;void 0!==t&&("buy"===s?l=t.base:"sell"===s&&(l=t.quote)),h={cost:d,currency:l}}return{id:r,info:e,timestamp:n,datetime:this.iso8601(n),symbol:a,order:void 0,type:void 0,side:s,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetMarketTrade(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_sn"),i=this.safeString(e,"status"),n=this.parseOrderStatus(i),a=this.safeString(e,"symbol");t=this.safeMarket(a,t,"-");var s=this.parse8601(this.safeString(e,"ctime"));void 0!==s&&(s-=288e5);var o=this.safeString(e,"type"),c="2"===o?"limit":"market",u=this.safeString(e,"side"),d=void 0,h=void 0,l=void 0,f=void 0,p=this.safeFloat(e,"number"),v=this.safeFloat(e,"total_price");"limit"===c?(l=p,h=this.safeFloat(e,"price")):(f=this.safeFloat(e,"deal_price"),l="buy"===u?this.safeFloat(e,"deal_number"):p);var m=void 0,y=void 0,g=void 0,b=void 0,k=void 0,x=void 0;if("1"!==i&&"6"!==i){var w=this.safeValue(e,"trades");if(void 0!==w){for(var _=0;_<w.length;_++)w[_].direction=u;var O=(y=this.parseTrades(w,t,void 0,void 0,{symbol:t.symbol,order:r,side:u,type:c})).length;if(O>0){var T=y[0];b=T.fee.cost,x=T.timestamp,g=T.amount,d=T.cost;for(var S=1;S<y.length;S++){var C=y[S];b=this.sum(b,C.fee.cost),g=this.sum(g,C.amount),d=this.sum(d,C.cost),x=Math.max(x,C.timestamp)}void 0!==l&&(g=Math.min(l,g)),g>0&&(f=d/g)}if(void 0!==b){var I="buy"===u?t.base:t.quote;m={cost:b,currency:I}}}}else g=0,d=0;return void 0===d&&("limit"===c?d=v:"buy"===u&&(d=p)),void 0===g&&"limit"===c&&"3"===i&&(g=l),void 0!==g&&void 0!==l&&(k=Math.max(l-g,0)),{info:e,id:r,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:x,status:n,symbol:t.symbol,type:c,timeInForce:void 0,postOnly:void 0,side:u,price:h,stopPrice:void 0,cost:d,average:f,amount:l,filled:g,remaining:k,trades:y,fee:m}}},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_sn:t},e.next=7,this.privateGetEntrustDetail(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result",{}),o=this.safeValue(s,"trades",[]),(c=this.safeValue(s,"entrust",{})).trades=o,e.abrupt("return",this.parseOrder(c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,n=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.fetchClosedOrder(t,r,n);case 6:return a=e.sent,e.abrupt("return",this.safeValue(a,"trades",[]));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={direct:"prev"},c=void 0,void 0!==r&&(c=this.market(r),o.symbol=c.id),void 0!==a&&(o.limit=a),e.next=12,this[t](this.extend(o,s));case 12:return u=e.sent,d=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOrders(d,c,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetEntrustCurrentList",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetEntrustHistoryList",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=n+"-"+r,d={symbol:c.id,type:u},"limit"!==r){e.next=12;break}d.amount=this.amountToPrecision(t,a),d.price=this.priceToPrecision(t,s),e.next=27;break;case 12:if("market"!==r){e.next=27;break}if("buy"!==n){e.next=26;break}if(h=this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0),l=a,!h){e.next=22;break}if(void 0===s){e.next=21;break}l=a*s,e.next=22;break;case 21:throw new m(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument");case 22:f=c.precision.price,d.amount=this.decimalToPrecision(l,O,f,this.precisionMode),e.next=27;break;case 26:d.amount=this.amountToPrecision(t,a);case 27:return e.next=29,this.privatePostEntrustAdd(this.extend(d,o));case 29:return p=e.sent,v=this.safeValue(p,"result",{}),y=this.parseOrder(v,c),g=this.milliseconds(),e.abrupt("return",this.extend(y,{timestamp:g,datetime:this.iso8601(g),amount:a,price:s,type:r,side:n}));case 34:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a={order_ids:t},e.next=7,this.privatePostEntrustCancel(this.extend(a,n));case 7:if(s=e.sent,o=this.safeValue(s,"result",{}),c=this.safeValue(o,"success",[]),this.inArray(t,c)){e.next=12;break}throw new _(this.id+" order id "+t+" not found in successfully canceled orders: "+this.json(s));case 12:return u=void 0,e.abrupt("return",{info:s,id:t,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,status:"canceled",symbol:r,type:void 0,side:void 0,price:void 0,cost:void 0,average:void 0,amount:void 0,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,clientOrderId:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},void 0!==t){e.next=4;break}throw new f(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},e.next=10,this.privatePostEntrustCancel(this.extend(a,r));case 10:return s=e.sent,e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+e,o=Object.keys(i),c=o.length;if("public"===t)c>0&&(s+="?"+this.urlencode(i));else{var u=this.nonce().toString(),d=this.uuid(),h=d.slice(0,5),l=u+"_"+h,f={};f[this.apiKey]=this.apiKey,f[this.secret]=this.secret,f[l]=l;for(var p=0;p<c;p++){var v=o[p];f[v]=v+"="+i[v]}var m=this.keysort(f),y="";o=Object.keys(m);for(var g=0;g<o.length;g++){var b=o[g];y+=m[b]}var k=this.hash(this.encode(y),"sha1");n={Nonce:l,Token:this.apiKey,Signature:k},"POST"===r?(n["Content-Type"]="application/x-www-form-urlencoded",c>0&&(a=this.urlencode(i))):c>0&&(s+="?"+this.urlencode(i))}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"errno");if(void 0!==u&&"0"!==u){var d=this.safeString(s,"errmsg"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new p(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(81);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bequant",name:"Bequant",countries:["MT"],pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/55248342-a75dfe00-525a-11e9-8aa2-05e9dca943c6.jpg",api:{public:"https://api.bequant.io",private:"https://api.bequant.io"},www:"https://bequant.io",doc:["https://api.bequant.io/"],fees:["https://bequant.io/fees-and-limits"],referral:"https://bequant.io"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AccountSuspended,v=l.ArgumentsRequired,m=l.AuthenticationError,y=l.DDoSProtection,g=l.ExchangeNotAvailable,b=l.InvalidOrder,k=l.OrderNotFound,x=l.PermissionDenied,w=l.InsufficientFunds,_=l.BadSymbol,O=l.RateLimitExceeded,T=l.BadRequest;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bibox",name:"Bibox",countries:["CN","US","KR"],version:"v1",hostname:"bibox365.com",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,publicAPI:!1,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"day","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/77257418-3262b000-6c85-11ea-8fb8-20bdf20b3592.jpg",api:"https://api.{hostname}",www:"https://www.bibox365.com",doc:["https://biboxcom.github.io/en/"],fees:"https://bibox.zendesk.com/hc/en-us/articles/360002336133",referral:"https://w2.bibox365.com/login/register?invite_code=05Kj3I"},api:{public:{post:["mdata"],get:["cquery","mdata","cdata"]},private:{post:["cquery","ctrade","user","orderpending","transfer"]},v2private:{post:["assets/transfer/spot"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:8e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{2011:p,2015:m,2021:w,2027:w,2033:k,2065:b,2066:b,2067:b,2068:b,2078:b,2085:b,2091:O,2092:b,3e3:T,3002:T,3012:m,3016:_,3024:x,3025:m,4e3:g,4003:y},commonCurrencies:{BOX:"DefiBox",BPT:"BlockPool Token",KEY:"Bihu",MTC:"MTC Mesh Network",PAI:"PCHAIN",TERN:"Ternio-ERC20"},options:{fetchCurrencies:"fetch_currencies_public"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},r={cmd:"marketAll"},e.next=4,this.publicGetMdata(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"result"),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeInteger(c,"id"),d=this.safeString(c,"coin_symbol"),h=this.safeString(c,"currency_symbol"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=d+"_"+h,m={amount:4,price:8},s.push({id:v,numericId:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:!0,info:c,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0;if(void 0!==t)i=t.symbol;else{var n=this.safeString(e,"coin_symbol"),a=this.safeString(e,"currency_symbol"),s=this.safeCurrencyCode(n),o=this.safeCurrencyCode(a);i=s+"/"+o}var c=this.safeFloat(e,"last"),u=this.safeFloat(e,"change"),d=this.safeFloat2(e,"vol","vol24H"),h=void 0;void 0!==c&&void 0!==u&&(h=c-u);var l=this.safeString(e,"percent");return void 0!==l&&(l=l.replace("%",""),l=parseFloat(l)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:h,close:c,last:c,previousClose:void 0,change:u,percentage:l,average:void 0,baseVolume:d,quoteVolume:this.safeFloat(e,"amount"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={cmd:"ticker",pair:n.id},e.next=7,this.publicGetMdata(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.result,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++){var n=this.parseTicker(e[i]);(void 0===t||this.inArray(n.symbol,t))&&r.push(n)}return r}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},n={cmd:"marketAll"},e.next=5,this.publicGetMdata(this.extend(n,r));case 5:return a=e.sent,s=this.parseTickers(a.result,t),o=this.indexBy(s,"symbol"),e.abrupt("return",this.filterByArray(o,"symbol",t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"time","createdAt"),i=this.safeInteger2(e,"side","order_side");i=1===i?"buy":"sell";var n=void 0;if(void 0===t){var a=this.safeString(e,"pair");if(void 0===a){var s=this.safeString(e,"coin_symbol"),o=this.safeString(e,"currency_symbol");void 0!==s&&void 0!==o&&(a=s+"_"+o)}a in this.markets_by_id&&(t=this.markets_by_id[a])}void 0!==t&&(n=t.symbol);var c=void 0,u=this.safeFloat(e,"fee"),d=this.safeString(e,"fee_symbol");void 0!==d&&(d=d in this.currencies_by_id?this.currencies_by_id[d].code:this.safeCurrencyCode(d));var h=void 0,l=this.safeFloat(e,"price"),f=this.safeFloat(e,"amount"),p=void 0;void 0!==l&&void 0!==f&&(p=l*f),void 0!==u&&(c={cost:-u,currency:d,rate:h});var v=this.safeString(e,"id");return{info:e,id:v,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:n,type:"limit",takerOrMaker:void 0,side:i,price:l,amount:f,cost:p,fee:c}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={cmd:"deals",pair:s.id},void 0!==n&&(o.size=n),e.next=10,this.publicGetMdata(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={cmd:"depth",pair:a.id},void 0!==r&&(s.size=r),e.next=9,this.publicGetMdata(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o.result,this.safeFloat(o.result,"update_time"),"bids","asks","price","volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:1e3,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={cmd:"kline",pair:o.id,period:this.timeframes[r],size:a},e.next=10,this.publicGetMdata(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeString(this.options,"fetchCurrencies","fetch_currencies_public"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesPublic",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r={cmd:"currencies"},e.next=4,this.publicGetCdata(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"result"),s={},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"symbol"),d=this.safeString(c,"name"),h=this.safeCurrencyCode(u),l=this.safeInteger(c,"valid_decimals"),f=this.safeValue(c,"enable_deposit"),p=this.safeValue(c,"enable_withdraw"),v=f&&p,s[h]={id:u,code:h,info:c,name:d,active:v,fee:void 0,precision:l,limits:{amount:{min:Math.pow(10,-l),max:void 0},price:{min:Math.pow(10,-l),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(c,"withdraw_min"),max:void 0}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesPrivate",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:{},this.apiKey&&this.secret){e.next=3;break}throw new m(this.id+" fetchCurrencies is an authenticated endpoint, therefore it requires 'apiKey' and 'secret' credentials. If you don't need currency details, set exchange.has['fetchCurrencies'] = false before calling its methods.");case 3:return r={cmd:"transfer/coinList",body:{}},e.next=6,this.privatePostTransfer(this.extend(r,t));case 6:for(n=e.sent,a=this.safeValue(n,"result"),s={},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"symbol"),d=c.name,h=this.safeCurrencyCode(u),l=8,f=this.safeValue(c,"enable_deposit"),p=this.safeValue(c,"enable_withdraw"),v=f&&p,s[h]={id:u,code:h,info:c,name:d,active:v,fee:void 0,precision:l,limits:{amount:{min:Math.pow(10,-l),max:Math.pow(10,l)},price:{min:Math.pow(10,-l),max:Math.pow(10,l)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,l)}}};return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(t,"type","assets"),t=this.omit(t,"type"),n={cmd:"transfer/"+r,body:this.extend({select:1},t)},e.next=8,this.privatePostTransfer(n);case 8:a=e.sent,s=this.safeValue(a,"result"),o={info:s},c=void 0,c="assets_list"in s?this.indexBy(s.assets_list,"coin_symbol"):s,u=Object.keys(c);for(d=0;d<u.length;d++)h=u[d],(l=h.toUpperCase()).indexOf("TOTAL_")>=0&&(l=l.slice(6)),l in this.currencies_by_id&&(l=this.currencies_by_id[l].code),f=this.account(),"string"===typeof(p=c[h])?(p=parseFloat(p),f.free=p,f.used=0,f.total=p):(f.free=this.safeFloat(p,"balance"),f.used=this.safeFloat(p,"freeze")),o[l]=f;return e.abrupt("return",this.parseBalance(o));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={page:1},void 0!==t&&(s=this.currency(t),o.symbol=s.id),o.size=void 0!==n?n:100,e.next=12,this.privatePostTransfer({cmd:"transfer/transferInList",body:this.extend(o,a)});case 12:for(c=e.sent,u=this.safeValue(c.result,"items",[]),d=0;d<u.length;d++)u[d].type="deposit";return e.abrupt("return",this.parseTransactions(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={page:1},void 0!==t&&(s=this.currency(t),o.symbol=s.id),o.size=void 0!==n?n:100,e.next=12,this.privatePostTransfer({cmd:"transfer/transferOutList",body:this.extend(o,a)});case 12:for(c=e.sent,u=this.safeValue(c.result,"items",[]),d=0;d<u.length;d++)u[d].type="withdrawal";return e.abrupt("return",this.parseTransactions(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"to_address"),n=this.safeString(e,"coin_symbol"),a=this.safeCurrencyCode(n,t),s=this.safeString(e,"createdAt"),o=this.safeString(e,"addr_remark"),c=this.safeString(e,"type"),u=this.parseTransactionStatusByType(this.safeString(e,"status"),c),d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"fee");"deposit"===c&&(h=0,o=void 0);var l={cost:h,currency:a};return{info:e,id:r,txid:void 0,timestamp:s,datetime:this.iso8601(s),address:i,tag:o,type:c,amount:d,currency:a,status:u,updated:void 0,fee:l}}},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{1:"pending",2:"ok"},withdrawal:{0:"pending",3:"ok"}};return this.safeString(this.safeValue(r,t,{}),e,e)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u="limit"===r?2:1,d="buy"===n?1:2,h={cmd:"orderpending/trade",body:this.extend({pair:c.id,account_type:0,order_type:u,order_side:d,pay_bix:0,amount:a,price:s},o)},e.next=10,this.privatePostOrderpending(h);case 10:return l=e.sent,e.abrupt("return",{info:l,id:this.safeString(l,"result")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={cmd:"orderpending/cancelTrade",body:this.extend({orders_id:t},r)},e.next=5,this.privatePostOrderpending(n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={cmd:"orderpending/order",body:this.extend({id:t.toString(),account_type:0},r)},e.next=7,this.privatePostOrderpending(n);case 7:if(a=e.sent,s=this.safeValue(a,"result"),!this.isEmpty(s)){e.next=11;break}throw new k(this.id+" order "+t+" not found");case 11:return e.abrupt("return",this.parseOrder(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=void 0,n=this.safeString(e,"coin_symbol"),a=this.safeString(e,"currency_symbol");void 0!==n&&void 0!==a&&(i=n+"_"+a),i in this.markets_by_id&&(t=this.markets_by_id[i])}void 0!==t&&(r=t.symbol);var s=this.safeString(e,"order_type"),o="1"===s?"market":"limit",c=this.safeInteger(e,"createdAt"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"deal_price"),h=this.safeFloat(e,"deal_amount"),l=this.safeFloat(e,"amount"),f=this.safeFloat2(e,"deal_money","money"),p=this.safeString(e,"order_side"),v="1"===p?"buy":"sell",m=this.parseOrderStatus(this.safeString(e,"status")),y=this.safeString(e,"id"),g=this.safeFloat(e,"fee"),b=void 0;return void 0!==g&&(b={cost:g,currency:void 0}),this.safeOrder({info:e,id:y,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:r,type:o,timeInForce:void 0,postOnly:void 0,side:v,price:u,stopPrice:void 0,amount:l,cost:f,average:d,filled:h,remaining:void 0,status:m,fee:b,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"open",3:"closed",4:"canceled",5:"canceled",6:"canceled"},e,e)}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o=void 0,void 0!==t&&(s=this.market(t),o=s.id),c=n||200,u={cmd:"orderpending/orderPendingList",body:this.extend({pair:o,account_type:0,page:1,size:c},a)},e.next=13,this.privatePostOrderpending(u);case 13:return d=e.sent,h=this.safeValue(d.result,"items",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:200,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchClosedOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={cmd:"orderpending/pendingHistoryList",body:this.extend({pair:s.id,account_type:0,page:1,size:n},a)},e.next=12,this.privatePostOrderpending(o);case 12:return c=e.sent,u=this.safeValue(c.result,"items",[]),e.abrupt("return",this.parseOrders(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=n||200,c={cmd:"orderpending/orderHistoryList",body:this.extend({pair:s.id,account_type:0,page:1,size:o,coin_symbol:s.baseId,currency_symbol:s.quoteId},a)},e.next=13,this.privatePostOrderpending(c);case 13:return u=e.sent,d=this.safeValue(u.result,"items",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={cmd:"transfer/transferIn",body:this.extend({coin_symbol:n.id},r)},e.next=7,this.privatePostTransfer(a);case 7:return s=e.sent,o=this.safeString(s,"result"),c=o,u=void 0,this.isJsonEncodedObject(o)&&(d=JSON.parse(o),c=this.safeString(d,"account"),u=this.safeString(d,"memo")),e.abrupt("return",{currency:t,address:c,tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),void 0!==this.password){e.next=9;break}if("trade_pwd"in s){e.next=9;break}throw new f(this.id+" withdraw() requires this.password set on the exchange instance or a trade_pwd parameter");case 9:if("totp_code"in s){e.next=11;break}throw new f(this.id+" withdraw() requires a totp_code parameter for 2FA authentication");case 11:return c={trade_pwd:this.password,coin_symbol:o.id,amount:r,addr:n},void 0!==a&&(c.address_remark=a),e.next=15,this.privatePostTransfer({cmd:"transfer/transferOut",body:this.extend(c,s)});case 15:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:n={},a={},void 0===t&&(t=Object.keys(this.currencies)),s=0;case 8:if(!(s<t.length)){e.next=20;break}return o=t[s],c=this.currency(o),u={cmd:"transfer/coinConfig",body:this.extend({coin_symbol:c.id},r)},e.next=14,this.privatePostTransfer(u);case 14:d=e.sent,a[o]=d,n[o]=this.safeFloat(d.result,"withdraw_fee");case 17:s++,e.next=8;break;case 20:return e.abrupt("return",{info:a,withdraw:n,deposit:{}});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+this.version+"/"+e,s=this.json([i]);if("public"===t)"GET"!==r?n={cmds:s}:Object.keys(i).length&&(a+="?"+this.urlencode(i));else if("v2private"===t){this.checkRequiredCredentials(),a=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/v2/"+e;var o=this.json(i);n={body:o,apikey:this.apiKey,sign:this.hmac(this.encode(o),this.encode(this.secret),"md5")}}else this.checkRequiredCredentials(),n={cmds:s,apikey:this.apiKey,sign:this.hmac(this.encode(s),this.encode(this.secret),"md5")};return void 0!==n&&(n=this.json(n,{convertArraysToObjects:!0})),{url:a,method:r,body:n,headers:{"Content-Type":"application/json"}}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){if("error"in s){if("code"in s.error){var u=this.safeString(s.error,"code"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,d),new f(d)}throw new f(this.id+" "+a)}if(!("result"in s))throw new f(this.id+" "+a)}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(c=e.sent,"GET"!==n){e.next=12;break}return e.abrupt("return",c);case 12:return e.abrupt("return",c.result[0]);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.OrderNotFound,y=l.InsufficientFunds,g=l.PermissionDenied,b=l.BadRequest,k=l.RateLimitExceeded,x=l.InvalidOrder;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bigone",name:"BigONE",countries:["CN"],version:"v3",rateLimit:1200,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hour1","3h":"hour3","4h":"hour4","6h":"hour6","12h":"hour12","1d":"day1","1w":"week1","1M":"month1"},hostname:"big.one",urls:{logo:"https://user-images.githubusercontent.com/1294454/69354403-1d532180-0c91-11ea-88ed-44c06cefdf87.jpg",api:{public:"https://{hostname}/api/v3",private:"https://{hostname}/api/v3/viewer"},www:"https://big.one",doc:"https://open.big.one/docs/api.html",fees:"https://bigone.zendesk.com/hc/en-us/articles/115001933374-BigONE-Fee-Policy",referral:"https://b1.run/users/new?code=D3LLBVFT"},api:{public:{get:["ping","asset_pairs","asset_pairs/{asset_pair_name}/depth","asset_pairs/{asset_pair_name}/trades","asset_pairs/{asset_pair_name}/ticker","asset_pairs/{asset_pair_name}/candles","asset_pairs/tickers"]},private:{get:["accounts","fund/accounts","assets/{asset_symbol}/address","orders","orders/{id}","orders/multi","trades","withdrawals","deposits"],post:["orders","orders/{id}/cancel","orders/cancel","withdrawals","transfer"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.001,ETH:.005,EOS:.01,ZEC:.003,LTC:.01,QTUM:.01,ETC:.01,GAS:0,BTS:1,GXS:.1,BITCNY:19}}},exceptions:{exact:{10001:b,10005:f,"Amount's scale must greater than AssetPair's base scale":x,10007:b,10011:f,10013:m,10014:y,10403:g,10429:k,40004:v,40103:v,40104:v,40301:g,40302:f,40601:f,40602:f,40603:y,40120:x,40121:x},broad:{}},commonCurrencies:{MBN:"Mobilian Coin",ONE:"BigONE Token"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetAssetPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",[]),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"name"),u=this.safeString(o,"id"),d=this.safeValue(o,"base_asset",{}),h=this.safeValue(o,"quote_asset",{}),l=this.safeString(d,"symbol"),f=this.safeString(h,"symbol"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,y={amount:this.safeInteger(o,"base_scale"),price:this.safeInteger(o,"quote_scale")},g=this.safeInteger(o,"min_quote_value"),b={id:c,uuid:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:!0,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:void 0},price:{min:Math.pow(10,-y.price),max:void 0},cost:{min:g,max:void 0}},info:o},a.push(b);return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=n(i.mark((function e(){var t,n,a,s,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]&&f[0],n=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,o(c(r.prototype),"loadMarkets",this).call(this,t,n);case 4:if(a=e.sent,void 0===(s=this.safeValue(this.options,"marketsByUuid"))||t){for(s={},u=0;u<this.symbols.length;u++)d=this.symbols[u],h=this.markets[d],l=this.safeString(h,"uuid"),s[l]=h;this.options.marketsByUuid=s}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"asset_pair_name"),i=this.safeSymbol(r,t,"-"),n=void 0,a=this.safeFloat(e,"close"),s=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(s,"price"),bidVolume:this.safeFloat(s,"quantity"),ask:this.safeFloat(o,"price"),askVolume:this.safeFloat(o,"quantity"),vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:a,previousClose:void 0,change:this.safeFloat(e,"daily_change"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={asset_pair_name:n.id},e.next=7,this.publicGetAssetPairsAssetPairNameTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.pair_names=a.join(",")),e.next=8,this.publicGetAssetPairsTickers(this.extend(n,r));case 8:for(s=e.sent,o=this.safeValue(s,"data",[]),c={},u=0;u<o.length;u++)d=this.parseTicker(o[u]),h=d.symbol,c[h]=d;return e.abrupt("return",this.filterByArray(c,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeInteger(n,"timestamp"),e.abrupt("return",parseInt(a/1e6));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={asset_pair_name:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetAssetPairsAssetPairNameDepth(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),e.abrupt("return",this.parseOrderBook(c,void 0,"bids","asks","price","quantity"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"created_at","inserted_at")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=this.safeString(e,"asset_pair_name"),s=this.safeSymbol(a,t,"-"),o=void 0;void 0!==n&&void 0!==i&&(o=this.costToPrecision(s,i*n));var c=this.safeString(e,"side"),u=this.safeString(e,"taker_side"),d=void 0;void 0!==u&&void 0!==c&&"SELF_TRADING"!==c&&(d=u===c?"taker":"maker"),void 0===c?c="ASK"===u?"sell":"buy":"BID"===c?c="buy":"ASK"===c&&(c="sell");var h=this.safeString(e,"maker_order_id"),l=this.safeString(e,"taker_order_id"),f=void 0;void 0!==h?f=void 0!==l?[h,l]:h:void 0!==l&&(f=l);var p=this.safeString(e,"id"),v={id:p,timestamp:r,datetime:this.iso8601(r),symbol:s,order:f,type:"limit",side:c,takerOrMaker:d,price:i,amount:n,cost:parseFloat(o),info:e},m=void 0,y=void 0;void 0!==t&&void 0!==d?"buy"===c?"maker"===d?(m=t.base,y=t.quote):(m=t.quote,y=t.base):"maker"===d?(m=t.quote,y=t.base):(m=t.base,y=t.quote):"SELF_TRADING"===c&&("BID"===u?(m=t.quote,y=t.base):"ASK"===u&&(m=t.base,y=t.quote));var g=this.safeFloat(e,"maker_fee"),b=this.safeFloat(e,"taker_fee");return void 0!==g?void 0!==b?v.fees=[{cost:g,currency:m},{cost:b,currency:y}]:v.fee={cost:g,currency:m}:v.fee=void 0!==b?{cost:b,currency:y}:void 0,v}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={asset_pair_name:s.id},e.next=9,this.publicGetAssetPairsAssetPairNameTrades(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=100),c={asset_pair_name:o.id,period:this.timeframes[r],limit:a},void 0!==n&&(u=this.sum(n,a*this.parseTimeframe(r)*1e3),c.time=this.iso8601(u)),e.next=12,this.publicGetAssetPairsAssetPairNameCandles(this.extend(c,s));case 12:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(t,"type",""),t=this.omit(t,"type"),n="privateGet"+this.capitalize(r)+"Accounts",e.next=8,this[n](t);case 8:for(a=e.sent,s={info:a},o=this.safeValue(a,"data",[]),c=0;c<o.length;c++)u=o[c],d=this.safeString(u,"asset_symbol"),h=this.safeCurrencyCode(d),(l=this.account()).total=this.safeFloat(u,"balance"),l.used=this.safeFloat(u,"locked_balance"),s[h]=l;return e.abrupt("return",this.parseBalance(s));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"asset_pair_name"),n=this.safeSymbol(i,t,"-"),a=this.parse8601(this.safeString(e,"created_at")),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"filled_amount"),u=this.parseOrderStatus(this.safeString(e,"state")),d=this.safeString(e,"side");d="BID"===d?"buy":"sell";var h=this.parse8601(this.safeString(e,"updated_at")),l=this.safeFloat(e,"avg_deal_price");return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:h,symbol:n,type:void 0,timeInForce:void 0,postOnly:void 0,side:d,price:s,stopPrice:void 0,amount:o,cost:void 0,average:l,filled:c,remaining:void 0,status:u,fee:void 0,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),n="buy"===n?"BID":"ASK",u=r.toUpperCase(),d={asset_pair_name:c.id,side:n,amount:this.amountToPrecision(t,a),type:u},"LIMIT"!==u){e.next=12;break}d.price=this.priceToPrecision(t,s),e.next=21;break;case 12:if(l="STOP_MARKET"===u,!(h="STOP_LIMIT"===u)&&!l){e.next=20;break}if(void 0!==(f=this.safeFloat2(o,"stop_price","stopPrice"))){e.next=18;break}throw new p(this.id+" createOrder() requires a stop_price parameter");case 18:d.stop_price=this.priceToPrecision(t,f),o=this.omit(o,["stop_price","stopPrice"]);case 20:h&&(d.price=this.priceToPrecision(t,s));case 21:return e.next=23,this.privatePostOrders(this.extend(d,o));case 23:return v=e.sent,m=this.safeValue(v,"data"),e.abrupt("return",this.parseOrder(m,c));case 26:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrdersIdCancel(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={asset_pair_name:n.id},e.next=8,this.privatePostOrdersCancel(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={asset_pair_name:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetOrders(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 8:return s=this.market(t),o={asset_pair_name:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetTrades(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PENDING:"open",FILLED:"closed",CANCELLED:"canceled"},e)}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"PENDING"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"FILLED"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return 1e3*this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),c=o+"/"+this.implodeParams(e,i);if("public"===t)Object.keys(s).length&&(c+="?"+this.urlencode(s));else{this.checkRequiredCredentials();var u=this.nonce().toString(),d={type:"OpenAPIV2",sub:this.apiKey,nonce:u},h=this.jwt(d,this.encode(this.secret));n={Authorization:"Bearer "+h},"GET"===r?Object.keys(s).length&&(c+="?"+this.urlencode(s)):"POST"===r&&(n["Content-Type"]="application/json",a=this.json(s))}return{url:c,method:r,body:a,headers:n}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset_symbol:n.id},e.next=7,this.privateGetAssetsAssetSymbolAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),!(o.length<1)){e.next=12;break}throw new f(this.id+"fetchDepositAddress() returned empty address response");case 12:return c=o[0],u=this.safeString(c,"value"),d=this.safeString(c,"memo"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:s});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({WITHHOLD:"ok",UNCONFIRMED:"pending",CONFIRMED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"asset_symbol"),r=this.safeCurrencyCode(t),i=this.safeInteger(e,"id"),n=this.safeFloat(e,"amount"),a=this.parseTransactionStatus(this.safeString(e,"state")),s=this.parse8601(this.safeString(e,"inserted_at")),o=this.parse8601(this.safeString2(e,"updated_at","completed_at")),c=this.safeString(e,"txid"),u=this.safeString(e,"target_address"),d=this.safeString(e,"memo"),h="customer_id"in e?"deposit":"withdrawal";return{info:e,id:i,txid:c,timestamp:s,datetime:this.iso8601(s),addressFrom:void 0,address:void 0,addressTo:u,tagFrom:void 0,tag:d,tagTo:void 0,type:h,amount:n,currency:r,status:a,updated:o,fee:void 0}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset_symbol=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetDeposits(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset_symbol=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetWithdrawals(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),c={symbol:o.id,target_address:n,amount:this.currencyToPrecision(t,r)},void 0!==a&&(c.memo=a),e.next=9,this.privatePostWithdrawals(this.extend(c,s));case 9:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"code"),d=this.safeString(s,"message");if("0"!==u){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(132);e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"binanceus",name:"Binance US",countries:["US"],certified:!1,pro:!0,urls:{logo:"https://user-images.githubusercontent.com/1294454/65177307-217b7c80-da5f-11e9-876e-0b748ba0a358.jpg",api:{web:"https://www.binance.us",wapi:"https://api.binance.us/wapi/v3",public:"https://api.binance.us/api/v1",private:"https://api.binance.us/api/v3",v3:"https://api.binance.us/api/v3",v1:"https://api.binance.us/api/v1"},www:"https://www.binance.us",referral:"https://www.binance.us/?ref=35005074",doc:"https://github.com/binance-us/binance-official-api-docs",fees:"https://www.binance.us/en/fee/schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:.001}},options:{quoteOrderQty:!1}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.length>0&&void 0!==t[0]?t[0]:{},e.abrupt("return",void 0);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.ExchangeError,v=l.InvalidNonce,m=l.AuthenticationError,y=l.PermissionDenied;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bit2c",name:"Bit2C",countries:["IL"],rateLimit:3e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766119-3593220e-5ece-11e7-8b3a-5a041f6bcc3f.jpg",api:"https://bit2c.co.il",www:"https://www.bit2c.co.il",referral:"https://bit2c.co.il/Aff/63bfed10-e359-420c-ab5a-ad368dab0baf",doc:["https://www.bit2c.co.il/home/api","https://github.com/OferE/bit2c"]},api:{public:{get:["Exchanges/{pair}/Ticker","Exchanges/{pair}/orderbook","Exchanges/{pair}/trades","Exchanges/{pair}/lasttrades"]},private:{post:["Merchant/CreateCheckout","Order/AddCoinFundsRequest","Order/AddFund","Order/AddOrder","Order/AddOrderMarketPriceBuy","Order/AddOrderMarketPriceSell","Order/CancelOrder","Order/AddCoinFundsRequest","Order/AddStopOrder","Payment/GetMyId","Payment/Send","Payment/Pay"],get:["Account/Balance","Account/Balance/v2","Order/MyOrders","Order/GetById","Order/AccountHistory","Order/OrderHistory"]}},markets:{"BTC/NIS":{id:"BtcNis",symbol:"BTC/NIS",base:"BTC",quote:"NIS",baseId:"Btc",quoteId:"Nis"},"ETH/NIS":{id:"EthNis",symbol:"ETH/NIS",base:"ETH",quote:"NIS",baseId:"Eth",quoteId:"Nis"},"BCH/NIS":{id:"BchabcNis",symbol:"BCH/NIS",base:"BCH",quote:"NIS",baseId:"Bchabc",quoteId:"Nis"},"LTC/NIS":{id:"LtcNis",symbol:"LTC/NIS",base:"LTC",quote:"NIS",baseId:"Ltc",quoteId:"Nis"},"ETC/NIS":{id:"EtcNis",symbol:"ETC/NIS",base:"ETC",quote:"NIS",baseId:"Etc",quoteId:"Nis"},"BTG/NIS":{id:"BtgNis",symbol:"BTG/NIS",base:"BTG",quote:"NIS",baseId:"Btg",quoteId:"Nis"},"BSV/NIS":{id:"BchsvNis",symbol:"BSV/NIS",base:"BSV",quote:"NIS",baseId:"Bchsv",quoteId:"Nis"},"GRIN/NIS":{id:"GrinNis",symbol:"GRIN/NIS",base:"GRIN",quote:"NIS",baseId:"Grin",quoteId:"Nis"}},fees:{trading:{maker:.005,taker:.005}},options:{fetchTradesMethod:"public_get_exchanges_pair_trades"},exceptions:{exact:{"Please provide valid APIkey":m},broad:{"Please provide valid nonce":v,"please approve new terms of use on site":y}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalanceV2(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],c=this.account(),u=this.currencyId(o),(d=u.toUpperCase())in r&&(c.free=this.safeFloat(r,"AVAILABLE_"+d),c.total=this.safeFloat(r,d)),n[o]=c;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetExchangesPairOrderbook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetExchangesPairTicker(this.extend(n,r));case 6:return a=e.sent,s=this.milliseconds(),o=this.safeFloat(a,"av"),c=this.safeFloat(a,"a"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(a,"ll"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeFloat(a,"h"),bidVolume:void 0,ask:this.safeFloat(a,"l"),askVolume:void 0,vwap:void 0,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:o,baseVolume:c,quoteVolume:u,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=this.options.fetchTradesMethod,c={pair:s.id},void 0!==r&&(c.date=parseInt(r)),void 0!==n&&(c.limit=n),e.next=12,this[o](this.extend(c,a));case 12:if("string"!==typeof(u=e.sent)){e.next=15;break}throw new p(u);case 15:return e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c="privatePostOrderAddOrder",u={Amount:a,Pair:this.marketId(t)},"market"===r?c+="MarketPrice"+this.capitalize(n):(u.Price=s,u.Total=a*s,u.IsBid="buy"===n),e.next=9,this[c](this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",{info:d,id:d.NewOrder.id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privatePostOrderCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new f(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},e.next=12,this.privateGetOrderMyOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,s.id,{}),d=this.safeValue(u,"ask",[]),h=this.safeValue(u,"bid",[]),e.abrupt("return",this.parseOrders(this.arrayConcat(d,h),s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"created"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=void 0;void 0!==t&&(a=t.symbol);var s=this.safeValue(e,"type");0===s?s="buy":1===s&&(s="sell");var o=this.safeString(e,"id"),c=this.safeString(e,"status");return this.safeOrder({id:o,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:c,symbol:a,type:void 0,timeInForce:void 0,postOnly:void 0,side:s,price:i,stopPrice:void 0,amount:n,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,info:e,average:void 0})}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==n&&(o.take=n),o.take=n,void 0!==r&&(o.toTime=this.ymd(this.milliseconds(),"."),o.fromTime=this.ymd(r,".")),void 0!==t&&(s=this.market(t),o.pair=s.id),e.next=14,this.privateGetOrderOrderHistory(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,c=void 0,u=this.safeString(e,"reference");if(void 0!==u){r=this.safeTimestamp(e,"ticks"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"firstAmount");var d=u.split("|");if(void 0===t){var h=this.safeString(e,"pair");h in this.markets_by_id[h]?t=this.markets_by_id[h]:d[0]in this.markets_by_id&&(t=this.markets_by_id[d[0]])}s=d[1],i=d[2],0===(c=this.safeInteger(e,"action"))?c="buy":1===c&&(c="sell"),o=this.safeFloat(e,"feeAmount")}else r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),void 0!==(c=this.safeValue(e,"isBid"))&&(c=c?"buy":"sell");var l=void 0;return void 0!==t&&(l=t.symbol),{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:l,order:s,type:void 0,side:c,takerOrMaker:void 0,price:n,amount:a,cost:n*a,fee:{cost:o,currency:"NIS",rate:void 0}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i);if("public"===t)s+=".json";else{this.checkRequiredCredentials();var o=this.nonce(),c=this.extend({nonce:o},i),u=this.urlencode(c);"GET"===r?Object.keys(c).length&&(s+="?"+u):a=u;var d=this.hmac(this.encode(u),this.encode(this.secret),"sha512","base64");n={"Content-Type":"application/x-www-form-urlencoded",key:this.apiKey,sign:d}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"error");if(void 0!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.InvalidNonce,m=l.InsufficientFunds,y=l.InvalidOrder,g=l.OrderNotFound,b=l.PermissionDenied;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitbank",name:"bitbank",countries:["JP"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","4h":"4hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/1294454/37808081-b87f2d9c-2e59-11e8-894d-c1900b7584fe.jpg",api:{public:"https://public.bitbank.cc",private:"https://api.bitbank.cc"},www:"https://bitbank.cc/",doc:"https://docs.bitbank.cc/",fees:"https://bitbank.cc/docs/fees/"},api:{public:{get:["{pair}/ticker","{pair}/depth","{pair}/transactions","{pair}/transactions/{yyyymmdd}","{pair}/candlestick/{candletype}/{yyyymmdd}"]},private:{get:["user/assets","user/spot/order","user/spot/active_orders","user/spot/trade_history","user/withdrawal_account"],post:["user/spot/order","user/spot/cancel_order","user/spot/cancel_orders","user/spot/orders_info","user/request_withdrawal"]}},markets:{"BAT/JPY":{id:"bat_jpy",symbol:"BAT/JPY",base:"BAT",quote:"JPY",baseId:"bat",quoteId:"jpy"},"BAT/BTC":{id:"bat_btc",symbol:"BAT/BTC",base:"BAT",quote:"BTC",baseId:"bat",quoteId:"btc"},"BCH/BTC":{id:"bcc_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bcc",quoteId:"btc"},"BCH/JPY":{id:"bcc_jpy",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bcc",quoteId:"jpy"},"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc"},"ETH/JPY":{id:"eth_jpy",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"LTC/JPY":{id:"ltc_jpy",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy"},"MONA/BTC":{id:"mona_btc",symbol:"MONA/BTC",base:"MONA",quote:"BTC",baseId:"mona",quoteId:"btc"},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy"},"QTUM/BTC":{id:"qtum_btc",symbol:"QTUM/BTC",base:"QTUM",quote:"BTC",baseId:"qtum",quoteId:"btc"},"QTUM/JPY":{id:"qtum_jpy",symbol:"QTUM/JPY",base:"QTUM",quote:"JPY",baseId:"qtum",quoteId:"jpy"},"XLM/BTC":{id:"xlm_btc",symbol:"XLM/BTC",base:"XLM",quote:"BTC",baseId:"xlm",quoteId:"btc"},"XLM/JPY":{id:"xlm_jpy",symbol:"XLM/JPY",base:"XLM",quote:"JPY",baseId:"xlm",quoteId:"jpy"},"XRP/BTC":{id:"xrp_btc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc"},"XRP/JPY":{id:"xrp_jpy",symbol:"XRP/JPY",base:"XRP",quote:"JPY",baseId:"xrp",quoteId:"jpy"}},fees:{trading:{maker:-2e-4,taker:.0012},funding:{withdraw:{BTC:.001,LTC:.001,XRP:.15,ETH:5e-4,MONA:.001,BCC:.001}}},precision:{price:8,amount:8},exceptions:{20001:p,20002:p,20003:p,20005:p,20004:v,40020:y,40021:y,40025:f,40013:g,40014:g,50008:b,50009:g,50010:g,60001:m,60005:y}})}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"timestamp"),n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetPairTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetPairDepth(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeInteger(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"executed_at"),i=void 0,n=void 0;void 0!==t&&(i=t.symbol,n=t.quote);var a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=void 0;void 0!==a&&void 0!==s&&(o=parseFloat(this.costToPrecision(i,a*s)));var c=this.safeString2(e,"transaction_id","trade_id"),u=this.safeString(e,"maker_taker"),d=void 0,h=this.safeFloat(e,"fee_amount_quote");void 0!==h&&(d={currency:n,cost:h});var l=this.safeString(e,"order_id"),f=this.safeString(e,"type"),p=this.safeString(e,"side");return{timestamp:r,datetime:this.iso8601(r),symbol:i,id:c,order:l,type:f,side:p,takerOrMaker:u,price:a,amount:s,cost:o,fee:d,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetPairTransactions(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"transactions",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,5),this.safeFloat(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"5m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=this.milliseconds(),c=(c=this.ymd(c)).split("-"),u={pair:o.id,candletype:this.timeframes[r],yyyymmdd:c.join("")},e.next=13,this.publicGetPairCandlestickCandletypeYyyymmdd(this.extend(u,s));case 13:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"candlestick",[]),f=this.safeValue(l,0,{}),p=this.safeValue(f,"ohlcv",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserAssets(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data",{}),s=this.safeValue(a,"assets",[]),o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"asset"),d=this.safeCurrencyCode(u),h={free:this.safeFloat(c,"free_amount"),used:this.safeFloat(c,"locked_amount"),total:this.safeFloat(c,"onhand_amount")},n[d]=h;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({UNFILLED:"open",PARTIALLY_FILLED:"open",FULLY_FILLED:"closed",CANCELED_UNFILLED:"canceled",CANCELED_PARTIALLY_FILLED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeString(e,"pair"),n=void 0;i&&!t&&i in this.marketsById&&(t=this.marketsById[i]),void 0!==t&&(n=t.symbol);var a=this.safeInteger(e,"ordered_at"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"start_amount"),c=this.safeFloat(e,"executed_amount"),u=this.safeFloat(e,"remaining_amount"),d=this.safeFloat(e,"average_price"),h=this.parseOrderStatus(this.safeString(e,"status")),l=this.safeStringLower(e,"type"),f=this.safeStringLower(e,"side");return this.safeOrder({id:r,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:void 0,status:h,symbol:n,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:s,stopPrice:void 0,cost:void 0,average:d,amount:o,filled:c,remaining:u,trades:void 0,fee:void 0,info:e})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),void 0!==s){e.next=7;break}throw new y(this.id+" createOrder() requires a price argument for both market and limit orders");case 7:return u={pair:c.id,amount:this.amountToPrecision(t,a),price:this.priceToPrecision(t,s),side:n,type:r},e.next=10,this.privatePostUserSpotOrder(this.extend(u,o));case 10:return d=e.sent,h=this.safeValue(d,"data"),e.abrupt("return",this.parseOrder(h,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={order_id:t,pair:a.id},e.next=8,this.privatePostUserSpotCancelOrder(this.extend(s,n));case 8:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={order_id:t,pair:a.id},e.next=8,this.privateGetUserSpotOrder(this.extend(s,n));case 8:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.count=n),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=12,this.privateGetUserSpotActiveOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o={},void 0!==s&&(o.pair=s.id),void 0!==n&&(o.count=n),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=14,this.privateGetUserSpotTradeHistory(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset:n.id},e.next=7,this.privateGetUserWithdrawalAccount(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeValue(o,"accounts",[]),u=this.safeValue(c,0,{}),d=this.safeString(u,"address"),e.abrupt("return",{currency:n,address:d,tag:void 0,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h.length>3&&void 0!==h[3]?h[3]:void 0,"uuid"in(a=h.length>4&&void 0!==h[4]?h[4]:{})){e.next=4;break}throw new f(this.id+" uuid is required for withdrawal");case 4:return e.next=6,this.loadMarkets();case 6:return s=this.currency(t),o={asset:s.id,amount:r},e.next=10,this.privatePostUserRequestWithdrawal(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeString(u,"txid"),e.abrupt("return",{info:c,id:d});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.urls.api[t]+"/";if("public"===t)o+=this.implodeParams(e,i),Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c;o+=this.version+"/"+this.implodeParams(e,i),"POST"===r?u+=a=this.json(s):(u+="/"+this.version+"/"+e,Object.keys(s).length&&(o+="?"+(s=this.urlencode(s)),u+="?"+s)),n={"Content-Type":"application/json","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":c,"ACCESS-SIGNATURE":this.hmac(this.encode(u),this.encode(this.secret))}}return{url:o,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:"public",n=y.length>2&&void 0!==y[2]?y[2]:"GET",a=y.length>3&&void 0!==y[3]?y[3]:{},s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(c=e.sent,u=this.safeInteger(c,"success"),d=this.safeValue(c,"data"),u&&d){e.next=21;break}if(h={1e4:"URL does not exist",10001:"A system error occurred. Please contact support",10002:"Invalid JSON format. Please check the contents of transmission",10003:"A system error occurred. Please contact support",10005:"A timeout error occurred. Please wait for a while and try again",20001:"API authentication failed",20002:"Illegal API key",20003:"API key does not exist",20004:"API Nonce does not exist",20005:"API signature does not exist",20011:"Two-step verification failed",20014:"SMS authentication failed",30001:"Please specify the order quantity",30006:"Please specify the order ID",30007:"Please specify the order ID array",30009:"Please specify the stock",30012:"Please specify the order price",30013:"Trade Please specify either",30015:"Please specify the order type",30016:"Please specify asset name",30019:"Please specify uuid",30039:"Please specify the amount to be withdrawn",40001:"The order quantity is invalid",40006:"Count value is invalid",40007:"End time is invalid",40008:"end_id Value is invalid",40009:"The from_id value is invalid",40013:"The order ID is invalid",40014:"The order ID array is invalid",40015:"Too many specified orders",40017:"Incorrect issue name",40020:"The order price is invalid",40021:"The trading classification is invalid",40022:"Start date is invalid",40024:"The order type is invalid",40025:"Incorrect asset name",40028:"uuid is invalid",40048:"The amount of withdrawal is illegal",50003:"Currently, this account is in a state where you can not perform the operation you specified. Please contact support",50004:"Currently, this account is temporarily registered. Please try again after registering your account",50005:"Currently, this account is locked. Please contact support",50006:"Currently, this account is locked. Please contact support",50008:"User identification has not been completed",50009:"Your order does not exist",50010:"Can not cancel specified order",50011:"API not found",60001:"The number of possessions is insufficient",60002:"It exceeds the quantity upper limit of the tender buying order",60003:"The specified quantity exceeds the limit",60004:"The specified quantity is below the threshold",60005:"The specified price is above the limit",60006:"The specified price is below the lower limit",70001:"A system error occurred. Please contact support",70002:"A system error occurred. Please contact support",70003:"A system error occurred. Please contact support",70004:"We are unable to accept orders as the transaction is currently suspended",70005:"Order can not be accepted because purchase order is currently suspended",70006:"We can not accept orders because we are currently unsubscribed ",70009:"We are currently temporarily restricting orders to be carried out. Please use the limit order.",70010:"We are temporarily raising the minimum order quantity as the system load is now rising."},l=this.exceptions,p=this.safeString(d,"code"),v=this.safeString(h,p,"Error"),void 0===(m=this.safeValue(l,p))){e.next=20;break}throw new m(v);case 20:throw new f(this.id+" "+this.json(c));case 21:return e.abrupt("return",c);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.InvalidNonce,p=l.InsufficientFunds,v=l.AuthenticationError,m=l.InvalidOrder,y=l.ExchangeError,g=l.OrderNotFound,b=l.AccountSuspended,k=l.BadSymbol,x=l.OrderImmediatelyFillable,w=l.RateLimitExceeded,_=l.OnMaintenance,O=l.PermissionDenied;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitbay",name:"BitBay",countries:["MT","EU"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","3d":"259200","1w":"604800"},urls:{referral:"https://auth.bitbay.net/ref/jHlbB4mIkdS1",logo:"https://user-images.githubusercontent.com/1294454/27766132-978a7bd8-5ece-11e7-9540-bc96d1e9bbb8.jpg",www:"https://bitbay.net",api:{public:"https://bitbay.net/API/Public",private:"https://bitbay.net/API/Trading/tradingApi.php",v1_01Public:"https://api.bitbay.net/rest",v1_01Private:"https://api.bitbay.net/rest"},doc:["https://bitbay.net/public-api","https://bitbay.net/en/private-api","https://bitbay.net/account/tab-api","https://github.com/BitBayNet/API","https://docs.bitbay.net/v1.0.1-en/reference"],support:"https://support.bitbay.net",fees:"https://bitbay.net/en/fees"},api:{public:{get:["{id}/all","{id}/market","{id}/orderbook","{id}/ticker","{id}/trades"]},private:{post:["info","trade","cancel","orderbook","orders","transfer","withdraw","history","transactions"]},v1_01Public:{get:["trading/ticker","trading/ticker/{symbol}","trading/stats","trading/orderbook/{symbol}","trading/transactions/{symbol}","trading/candle/history/{symbol}/{resolution}"]},v1_01Private:{get:["payments/withdrawal/{detailId}","payments/deposit/{detailId}","trading/offer","trading/config/{symbol}","trading/history/transactions","balances/BITBAY/history","balances/BITBAY/balance","fiat_cantor/rate/{baseId}/{quoteId}","fiat_cantor/history"],post:["trading/offer/{symbol}","trading/config/{symbol}","balances/BITBAY/balance","balances/BITBAY/balance/transfer/{source}/{destination}","fiat_cantor/exchange"],delete:["trading/offer/{symbol}/{id}/{side}/{price}"],put:["balances/BITBAY/balance/{id}"]}},fees:{trading:{maker:0,taker:.001,percentage:!0,tierBased:!1},fiat:{maker:.003,taker:.0043,percentage:!0,tierBased:!0,tiers:{taker:[[.0043,0],[.0042,1250],[.0041,3750],[.004,7500],[.0039,1e4],[.0038,15e3],[.0037,2e4],[.0036,25e3],[.0035,37500],[.0034,5e4],[.0033,75e3],[.0032,1e5],[.0031,15e4],[.003,2e5],[.0029,25e4],[.0028,375e3],[.0027,5e5],[.0026,625e3],[.0025,875e3]],maker:[[.003,0],[.0029,1250],[.0028,3750],[.0028,7500],[.0027,1e4],[.0026,15e3],[.0025,2e4],[.0025,25e3],[.0024,37500],[.0023,5e4],[.0023,75e3],[.0022,1e5],[.0021,15e4],[.0021,2e5],[.002,25e4],[.0019,375e3],[.0018,5e5],[.0018,625e3],[.0017,875e3]]}},funding:{withdraw:{BTC:9e-4,LTC:.005,ETH:.00126,LSK:.2,BCH:6e-4,GAME:.005,DASH:.001,BTG:8e-4,PLN:4,EUR:1.5}}},options:{fiatCurrencies:["EUR","USD","GBP","PLN"]},exceptions:{400:y,401:m,402:m,403:m,404:m,405:m,406:p,408:m,501:v,502:v,503:f,504:y,505:v,506:b,509:y,510:k,FUNDS_NOT_SUFFICIENT:p,OFFER_FUNDS_NOT_EXCEEDING_MINIMUMS:m,OFFER_NOT_FOUND:g,OFFER_WOULD_HAVE_BEEN_PARTIALLY_FILLED:x,ACTION_LIMIT_EXCEEDED:w,UNDER_MAINTENANCE:_,REQUEST_TIMESTAMP_TOO_OLD:f,PERMISSIONS_NOT_SUFFICIENT:O},commonCurrencies:{GGC:"Global Game Coin"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.v1_01PublicGetTradingTicker(t);case 3:for(r=e.sent,n=this.safeValue(this.options,"fiatCurrencies",[]),a=[],s=this.safeValue(r,"items"),o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=s[u],h=this.safeValue(d,"market",{}),l=this.safeValue(h,"first",{}),f=this.safeValue(h,"second",{}),p=this.safeString(l,"currency"),v=this.safeString(f,"currency"),m=p+v,y=this.safeCurrencyCode(p),g=this.safeCurrencyCode(v),b=y+"/"+g,k={amount:this.safeInteger(l,"scale"),price:this.safeInteger(f,"scale")},x=this.safeValue(this.fees,"trading",{}),(this.inArray(y,n)||this.inArray(g,n))&&(x=this.safeValue(this.fees,"fiat",{})),w=this.safeFloat(x,"maker"),_=this.safeFloat(x,"taker"),a.push({id:m,symbol:b,base:y,quote:g,baseId:p,quoteId:v,precision:k,active:void 0,maker:w,taker:_,limits:{amount:{min:this.safeFloat(l,"minOffer"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(f,"minOffer"),max:void 0}},info:d});return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,n=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return a={},e.next=9,this.v1_01PrivateGetTradingOffer(this.extend(a,n));case 9:return s=e.sent,o=this.safeValue(s,"items",[]),e.abrupt("return",this.parseOrders(o,void 0,t,r,{status:"open"}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.safeInteger(e,"time"),a=this.safeFloat(e,"startAmount"),s=this.safeFloat(e,"currentAmount"),o=this.safeValue(e,"postOnly");return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,info:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:void 0,symbol:i,type:this.safeString(e,"mode"),timeInForce:void 0,postOnly:o,side:this.safeStringLower(e,"offerType"),price:this.safeFloat(e,"rate"),stopPrice:void 0,amount:a,cost:void 0,filled:void 0,remaining:s,average:void 0,fee:void 0,trades:void 0})}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},t&&(o=[this.marketId(t)],s.markets=o),c={query:this.json(this.extend(s,a))},e.next=11,this.v1_01PrivateGetTradingHistoryTransactions(c);case 11:if(u=e.sent,d=this.safeValue(u,"items"),h=this.parseTrades(d,void 0,r,n),void 0!==t){e.next=16;break}return e.abrupt("return",h);case 16:return e.abrupt("return",this.filterBySymbol(h,t));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.v1_01PrivateGetBalancesBITBAYBalance(t);case 5:if(r=e.sent,void 0!==(n=this.safeValue(r,"balances"))){e.next=9;break}throw new y(this.id+" empty balance response "+this.json(r));case 9:for(a={info:r},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).used=this.safeFloat(o,"lockedFunds"),d.free=this.safeFloat(o,"availableFunds"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetIdOrderbook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={id:this.marketId(t)},e.next=6,this.publicGetIdTicker(this.extend(n,r));case 6:return a=e.sent,s=this.milliseconds(),o=this.safeFloat(a,"volume"),c=this.safeFloat(a,"vwap"),u=void 0,void 0!==o&&void 0!==c&&(u=o*c),d=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(a,"max"),low:this.safeFloat(a,"min"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:c,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(a,"average"),baseVolume:o,quoteVolume:u,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=[],void 0!==t&&(o=this.currency(t),s.push(o.id)),c={balanceCurrencies:s},void 0!==r&&(c.fromTime=r),void 0!==n&&(c.limit=n),c=this.extend(c,a),e.next=12,this.v1_01PrivateGetBalancesBITBAYHistory({query:this.json(c)});case 12:return u=e.sent,d=u.items,e.abrupt("return",this.parseLedger(d,void 0,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=this.safeInteger(e,"time"),r=this.safeValue(e,"balance",{}),i=this.safeString(r,"currency"),n=this.safeCurrencyCode(i),a=this.safeValue(e,"change",{}),s=this.safeFloat(a,"total"),o="in";s<0&&(o="out",s=-s);var c=this.safeString(e,"historyId"),u=this.safeString(e,"detailId"),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeValue(e,"fundsBefore",{}),l=this.safeFloat(h,"total"),f=this.safeValue(e,"fundsAfter",{}),p=this.safeFloat(f,"total");return{info:e,id:c,direction:o,account:void 0,referenceId:u,referenceAccount:void 0,type:d,currency:n,amount:s,before:l,after:p,status:"ok",timestamp:t,datetime:this.iso8601(t),fee:void 0}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({ADD_FUNDS:"transaction",BITCOIN_GOLD_FORK:"transaction",CREATE_BALANCE:"transaction",FUNDS_MIGRATION:"transaction",WITHDRAWAL_LOCK_FUNDS:"transaction",WITHDRAWAL_SUBTRACT_FUNDS:"transaction",WITHDRAWAL_UNLOCK_FUNDS:"transaction",TRANSACTION_COMMISSION_OUTCOME:"fee",TRANSACTION_COMMISSION_RETURN:"fee",TRANSACTION_OFFER_ABORTED_RETURN:"trade",TRANSACTION_OFFER_COMPLETED_RETURN:"trade",TRANSACTION_POST_INCOME:"trade",TRANSACTION_POST_OUTCOME:"trade",TRANSACTION_PRE_LOCKING:"trade"},e,e)}},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,1,{});return[this.safeInteger(e,0),this.safeFloat(t,"o"),this.safeFloat(t,"h"),this.safeFloat(t,"l"),this.safeFloat(t,"c"),this.safeFloat(t,"v")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=o.baseId+"-"+o.quoteId,u={symbol:c,resolution:this.timeframes[r]},void 0===a&&(a=100),d=this.parseTimeframe(r),h=a*d*1e3,void 0===n?(u.to=this.milliseconds(),u.from=u.to-h):(u.from=parseInt(n),u.to=this.sum(u.from,h)),e.next=15,this.v1_01PublicGetTradingCandleHistorySymbolResolution(this.extend(u,s));case 15:return l=e.sent,f=this.safeValue(l,"items",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"time","t"),i=this.safeString(e,"userAction"),n="Buy"===i?"buy":"sell",a=this.safeValue(e,"wasTaker"),s=void 0;void 0!==a&&(s=a?"taker":"maker");var o=this.safeFloat2(e,"rate","r"),c=this.safeFloat2(e,"amount","a"),u=void 0;void 0!==c&&void 0!==o&&(u=o*c);var d=this.safeFloat(e,"commissionValue"),h=this.safeString(e,"market"),l=(t=this.safeMarket(h,t,"-")).symbol,f=void 0;if(void 0!==d){var p="buy"===n?t.base:t.quote;f={currency:p,cost:d}}var v=this.safeString(e,"offerId"),m=void 0;return void 0!==v&&(m=v?"limit":"market"),{id:this.safeString(e,"id"),order:v,timestamp:r,datetime:this.iso8601(r),symbol:l,type:m,side:n,price:o,amount:c,cost:u,takerOrMaker:s,fee:f,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=s.baseId+"-"+s.quoteId,c={symbol:o},void 0!==r&&(c.fromTime=r-1),void 0!==n&&(c.limit=n),e.next=12,this.v1_01PublicGetTradingTransactionsSymbol(this.extend(c,a));case 12:return u=e.sent,d=this.safeValue(u,"items"),e.abrupt("return",this.parseTrades(d,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=w.length>4&&void 0!==w[4]?w[4]:void 0,o=w.length>5&&void 0!==w[5]?w[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=c.baseId+"-"+c.quoteId,d={symbol:u,offerType:n,amount:a,mode:r},"limit"===r&&(d.rate=s,s=parseFloat(s)),a=parseFloat(a),e.next=11,this.v1_01PrivatePostTradingOfferSymbol(this.extend(d,o));case 11:if(h=e.sent,l=this.milliseconds(),f=this.safeString(h,"offerId"),p=this.safeValue(h,"completed",!1),v=p?"closed":"open",m=0,y=void 0,g=this.safeValue(h,"transactions"),b=void 0,void 0!==g)for(b=this.parseTrades(g,c,void 0,void 0,{timestamp:l,datetime:this.iso8601(l),symbol:t,side:n,type:r,orderId:f}),y=0,k=0;k<b.length;k++)m=this.sum(m,b[k].amount),y=this.sum(y,b[k].cost);return x=a-m,e.abrupt("return",{id:f,info:h,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:v,symbol:t,type:r,side:n,price:s,amount:a,cost:y,filled:m,remaining:x,average:void 0,fee:void 0,trades:b,clientOrderId:void 0});case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==(a=this.safeString(n,"side"))){e.next=5;break}throw new y(this.id+' cancelOrder() requires a `side` parameter ("buy" or "sell")');case 5:if(void 0!==(s=this.safeValue(n,"price"))){e.next=8;break}throw new y(this.id+" cancelOrder() requires a `price` parameter (float or string)");case 8:return e.next=10,this.loadMarkets();case 10:return o=this.market(r),c=o.baseId+"-"+o.quoteId,u={symbol:c,id:t,side:a,price:s},e.abrupt("return",this.v1_01PrivateDeleteTradingOfferSymbolIdSidePrice(this.extend(u,n)));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"isFiat",value:function(e){return this.safeValue({USD:!0,EUR:!0,PLN:!0},e,!1)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=void 0,c=this.currency(t),u={currency:c.id,quantity:r},this.isFiat(t)?o="privatePostWithdraw":(o="privatePostTransfer",void 0!==a&&(n+="?dt="+a.toString()),u.address=n),e.next=11,this[o](this.extend(u,s));case 11:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];if("public"===t){var o=this.omit(i,this.extractParams(e));s+="/"+this.implodeParams(e,i)+".json",Object.keys(o).length&&(s+="?"+this.urlencode(o))}else if("v1_01Public"===t){var c=this.omit(i,this.extractParams(e));s+="/"+this.implodeParams(e,i),Object.keys(c).length&&(s+="?"+this.urlencode(c))}else if("v1_01Private"===t){this.checkRequiredCredentials();var u=this.omit(i,this.extractParams(e));s+="/"+this.implodeParams(e,i);var d=this.milliseconds().toString(),h=void 0;"POST"!==r?(Object.keys(u).length&&(s+="?"+this.urlencode(u)),h=this.apiKey+d):void 0===a&&(a=this.json(u),h=this.apiKey+d+a),n={"Request-Timestamp":d,"Operation-Id":this.uuid(),"API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(h),this.encode(this.secret),"sha512"),"Content-Type":"application/json"}}else this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,moment:this.nonce()},i)),n={"Content-Type":"application/x-www-form-urlencoded","API-Key":this.apiKey,"API-Hash":this.hmac(this.encode(a),this.encode(this.secret),"sha512")};return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){if("code"in s){var u=this.safeString(s,"code"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,d),new y(d)}if("status"in s&&"Fail"===this.safeString(s,"status")){for(var h=this.safeValue(s,"errors"),l=this.id+" "+a,f=0;f<h.length;f++){var p=h[f];this.throwExactlyMatchedException(this.exceptions,p,l)}throw new y(l)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(81);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bitcoincom",name:"bitcoin.com",countries:["KN"],urls:{logo:"https://user-images.githubusercontent.com/1294454/97296144-514fa300-1861-11eb-952b-3d55d492200b.jpg",api:{public:"https://api.exchange.bitcoin.com",private:"https://api.exchange.bitcoin.com"},www:"https://exchange.bitcoin.com",doc:"https://api.exchange.bitcoin.com/api/2/explore",fees:"https://exchange.bitcoin.com/fees-and-limits",referral:"https://exchange.bitcoin.com/referral/da948b21d6c92d69"},fees:{trading:{maker:.0015,taker:.002}}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(133),l=r(10),f=l.ExchangeError,p=l.InvalidAddress,v=l.ArgumentsRequired,m=l.InsufficientFunds,y=l.AuthenticationError,g=l.OrderNotFound,b=l.InvalidOrder,k=l.BadRequest,x=l.InvalidNonce,w=l.BadSymbol,_=l.OnMaintenance,O=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitfinex2",name:"Bitfinex",countries:["VG"],version:"v2",certified:!1,pro:!1,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createLimitOrder:!0,createMarketOrder:!0,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchClosedOrder:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!1,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrderTrades:!0,fetchStatus:!0,fetchTickers:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"7D","2w":"14D","1M":"1M"},rateLimit:1500,urls:{logo:"https://user-images.githubusercontent.com/1294454/27766244-e328a50c-5ed2-11e7-947b-041416579bb3.jpg",api:{v1:"https://api.bitfinex.com",public:"https://api-pub.bitfinex.com",private:"https://api.bitfinex.com"},www:"https://www.bitfinex.com",doc:["https://docs.bitfinex.com/v2/docs/","https://github.com/bitfinexcom/bitfinex-api-node"],fees:"https://www.bitfinex.com/fees"},api:{v1:{get:["symbols","symbols_details"]},public:{get:["conf/{config}","conf/pub:{action}:{object}","conf/pub:{action}:{object}:{detail}","conf/pub:map:{object}","conf/pub:map:{object}:{detail}","conf/pub:map:currency:{detail}","conf/pub:map:currency:sym","conf/pub:map:currency:label","conf/pub:map:currency:unit","conf/pub:map:currency:undl","conf/pub:map:currency:pool","conf/pub:map:currency:explorer","conf/pub:map:currency:tx:fee","conf/pub:map:tx:method","conf/pub:list:{object}","conf/pub:list:{object}:{detail}","conf/pub:list:currency","conf/pub:list:pair:exchange","conf/pub:list:pair:margin","conf/pub:list:pair:futures","conf/pub:list:competitions","conf/pub:info:{object}","conf/pub:info:{object}:{detail}","conf/pub:info:pair","conf/pub:info:tx:status","conf/pub:fees","platform/status","tickers","ticker/{symbol}","trades/{symbol}/hist","book/{symbol}/{precision}","book/{symbol}/P0","book/{symbol}/P1","book/{symbol}/P2","book/{symbol}/P3","book/{symbol}/R0","stats1/{key}:{size}:{symbol}:{side}/{section}","stats1/{key}:{size}:{symbol}:{side}/last","stats1/{key}:{size}:{symbol}:{side}/hist","stats1/{key}:{size}:{symbol}/{section}","stats1/{key}:{size}:{symbol}/last","stats1/{key}:{size}:{symbol}/hist","stats1/{key}:{size}:{symbol}:long/last","stats1/{key}:{size}:{symbol}:long/hist","stats1/{key}:{size}:{symbol}:short/last","stats1/{key}:{size}:{symbol}:short/hist","candles/trade:{timeframe}:{symbol}/{section}","candles/trade:{timeframe}:{symbol}/last","candles/trade:{timeframe}:{symbol}/hist","status/{type}","status/deriv","liquidations/hist","rankings/{key}:{timeframe}:{symbol}/{section}","rankings/{key}:{timeframe}:{symbol}/hist"],post:["calc/trade/avg","calc/fx"]},private:{post:["auth/r/wallets","auth/r/wallets/hist","auth/r/orders","auth/r/orders/{symbol}","auth/w/order/submit","auth/w/order/update","auth/w/order/cancel","auth/w/order/multi","auth/w/order/cancel/multi","auth/r/orders/{symbol}/hist","auth/r/orders/hist","auth/r/order/{symbol}:{id}/trades","auth/r/trades/{symbol}/hist","auth/r/trades/hist","auth/r/ledgers/{currency}/hist","auth/r/ledgers/hist","auth/r/info/margin/{key}","auth/r/info/margin/base","auth/r/info/margin/sym_all","auth/r/positions","auth/w/position/claim","auth/r/positions/hist","auth/r/positions/audit","auth/r/positions/snap","auth/w/deriv/collateral/set","auth/w/deriv/collateral/limits","auth/r/funding/offers","auth/r/funding/offers/{symbol}","auth/w/funding/offer/submit","auth/w/funding/offer/cancel","auth/w/funding/offer/cancel/all","auth/w/funding/close","auth/w/funding/auto","auth/w/funding/keep","auth/r/funding/offers/{symbol}/hist","auth/r/funding/offers/hist","auth/r/funding/loans","auth/r/funding/loans/hist","auth/r/funding/loans/{symbol}","auth/r/funding/loans/{symbol}/hist","auth/r/funding/credits","auth/r/funding/credits/hist","auth/r/funding/credits/{symbol}","auth/r/funding/credits/{symbol}/hist","auth/r/funding/trades/{symbol}/hist","auth/r/funding/trades/hist","auth/r/info/funding/{key}","auth/r/info/user","auth/r/logins/hist","auth/w/transfer","auth/w/deposit/address","auth/w/deposit/invoice","auth/w/withdraw","auth/r/movements/{currency}/hist","auth/r/movements/hist","auth/r/alerts","auth/w/alert/set","auth/w/alert/price:{symbol}:{price}/del","auth/w/alert/{type}:{symbol}:{price}/del","auth/calc/order/avail","auth/w/settings/set","auth/r/settings","auth/w/settings/del"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{BTC:4e-4,BCH:1e-4,ETH:.00135,EOS:0,LTC:.001,OMG:.15097,IOT:0,NEO:0,ETC:.01,XRP:.02,ETP:.01,ZEC:.001,BTG:0,DASH:.01,XMR:1e-4,QTM:.01,EDO:.23687,DAT:9.8858,AVT:1.1251,SAN:.35977,USDT:5,SPK:16.971,BAT:1.1209,GNT:2.8789,SNT:9.0848,QASH:1.726,YYW:7.9464}}},options:{precision:"R0",exchangeTypes:{"EXCHANGE MARKET":"market","EXCHANGE LIMIT":"limit"},orderTypes:{market:"EXCHANGE MARKET",limit:"EXCHANGE LIMIT"},fiat:{USD:"USD",EUR:"EUR",JPY:"JPY",GBP:"GBP"}},exceptions:{exact:{10020:k,10100:y,10114:x,20060:_},broad:{address:p,"available balance is only":m,"not enough exchange balance":m,"Order not found":g,"symbol: invalid":w,"Invalid order":b}}})}},{key:"isFiat",value:function(e){return e in this.options.fiat}},{key:"getCurrencyId",value:function(e){return"f"+e}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetPlatformStatus(t);case 3:return r=e.sent,n=this.safeValue(r,0),a=1===n?"ok":"maintenance",this.status=this.extend(this.status,{status:a,updated:this.milliseconds()}),e.abrupt("return",this.status);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetConfPubListPairFutures(t);case 3:return r=e.sent,e.next=6,this.v1GetSymbolsDetails(t);case 6:for(n=e.sent,a=this.safeValue(r,0,[]),s=[],o=0;o<n.length;o++)c=n[o],u=this.safeStringUpper(c,"pair"),d=!0,this.inArray(u,a)&&(d=!1),h=!d,l=d?"spot":"futures",f=void 0,p=void 0,u.indexOf(":")>=0?(v=u.split(":"),f=v[0],p=v[1]):(f=u.slice(0,3),p=u.slice(3,6)),m=this.safeCurrencyCode(f),y=this.safeCurrencyCode(p),g=m+"/"+y,u="t"+u,f=this.getCurrencyId(f),p=this.getCurrencyId(p),b={price:this.safeInteger(c,"price_precision"),amount:8},(k={amount:{min:this.safeFloat(c,"minimum_order_size"),max:this.safeFloat(c,"maximum_order_size")},price:{min:Math.pow(10,-b.price),max:Math.pow(10,b.price)}}).cost={min:k.amount.min*k.price.min,max:void 0},x=this.safeValue(c,"margin"),s.push({id:u,symbol:g,base:m,quote:y,baseId:f,quoteId:p,active:!0,precision:b,limits:k,info:c,type:l,swap:!1,spot:d,margin:x,futures:h});return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},r=["pub:list:currency","pub:map:currency:sym","pub:map:currency:label","pub:map:currency:unit","pub:map:currency:undl","pub:map:currency:pool","pub:map:currency:explorer","pub:map:currency:tx:fee"].join(","),n={config:r},e.next=6,this.publicGetConfConfig(this.extend(n,t));case 6:for(a=e.sent,s={sym:this.indexBy(this.safeValue(a,1,[]),0),label:this.indexBy(this.safeValue(a,2,[]),0),unit:this.indexBy(this.safeValue(a,3,[]),0),undl:this.indexBy(this.safeValue(a,4,[]),0),pool:this.indexBy(this.safeValue(a,5,[]),0),explorer:this.indexBy(this.safeValue(a,6,[]),0),fees:this.indexBy(this.safeValue(a,7,[]),0)},o=this.safeValue(a,0,[]),c={},u=0;u<o.length;u++)d=o[u],h=this.safeCurrencyCode(d),l=this.safeValue(s.label,d,[]),f=this.safeString(l,1),p=this.safeValue(s.pool,d,[]),v=this.safeString(p,1),m=this.safeValue(s.fees,d,[]),y=this.safeValue(m,1,[]),g=this.safeFloat(y,1),b=8,d="f"+d,c[h]={id:d,code:h,info:[d,l,p,m],type:v,name:f,active:!0,fee:g,precision:b,limits:{amount:{min:1/Math.pow(10,b),max:void 0},price:{min:1/Math.pow(10,b),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:g,max:void 0}}};return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAuthRWallets(t);case 5:for(r=e.sent,n=this.safeString(t,"type","exchange"),a={info:r},s=0;s<r.length;s++)o=r[s],c=o[0],u=o[1],d=o[2],h=o[4],c===n&&("t"===u[0]&&(u=u.slice(1)),l=this.safeCurrencyCode(u),(f=this.account()).total=d,h?(f.free=h,f.used=f.total-f.free):0===h?(f.free=0,f.used=d):f.free=d,a[l]=f);return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new O(this.id+" fetchOrder is not implemented yet");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.safeValue(this.options,"precision","R0"),s={symbol:this.marketId(t),precision:a},void 0!==r&&(s.len=r),o=this.extend(s,n),e.next=10,this.publicGetBookSymbolPrecision(o);case 10:for(c=e.sent,u=this.milliseconds(),d={bids:[],asks:[],timestamp:u,datetime:this.iso8601(u),nonce:void 0},h="R0"===o.precision?1:0,l=0;l<c.length;l++)f=c[l],p=this.safeFloat(f,h),v=this.safeFloat(f,2),m=Math.abs(v),d[v>0?"bids":"asks"].push([p,m]);return d.bids=this.sortBy(d.bids,0,!0),d.asks=this.sortBy(d.asks,0),e.abrupt("return",d);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=e.length,a=e[n-4];return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:e[n-2],low:e[n-1],bid:e[n-10],bidVolume:void 0,ask:e[n-8],askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:e[n-6],percentage:100*e[n-5],average:void 0,baseVolume:e[n-3],quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t?(a=this.marketIds(t),n.symbols=a.join(",")):n.symbols="ALL",e.next=8,this.publicGetTickers(this.extend(n,r));case 8:for(s=e.sent,o={},c=0;c<s.length;c++)u=s[c],(d=u[0])in this.markets_by_id&&(h=this.markets_by_id[d],l=h.symbol,o[l]=this.parseTicker(u,h));return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSymbol",value:function(e){if(void 0===e)return e;var t=void 0,r=void 0;if((e=e.replace("t","")).indexOf(":")>=0){var i=e.split(":");t=i[0],r=i[1]}else t=e.slice(0,3),r=e.slice(3,6);return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(r)}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.length,i=r>5,n=this.safeString(e,0),a=i?4:2,s=this.safeFloat(e,a),o=void 0,c=i?5:3,u=this.safeFloat(e,c),d=void 0,h=void 0,l=void 0,f=void 0,p=void 0,v=void 0,m=i?2:1,y=this.safeInteger(e,m);if(i){var g=e[1];v=g in this.markets_by_id?(t=this.markets_by_id[g]).symbol:this.parseSymbol(g),h=this.safeString(e,3);var b=this.safeInteger(e,8);l=1===b?"maker":"taker";var k=this.safeFloat(e,9),x=this.safeString(e,10),w=this.safeCurrencyCode(x);if(void 0!==k){if(k=-k,v in this.markets)k=this.feeToPrecision(v,k);else{var _="f"+w;if(_ in this.currencies_by_id){var O=this.currencies_by_id[_];k=this.currencyToPrecision(O.code,k)}}p={cost:parseFloat(k),currency:w}}var T=e[6];f=this.safeString(this.options.exchangeTypes,T)}return void 0===v&&void 0!==t&&(v=t.symbol),void 0!==s&&(d=s<0?"sell":"buy",s=Math.abs(s),void 0===o&&void 0!==u&&(o=s*u)),{id:n,timestamp:y,datetime:this.iso8601(y),symbol:v,order:h,side:d,type:f,takerOrMaker:l,price:u,amount:s,cost:o,fee:p,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o="-1",c={symbol:s.id},void 0!==r&&(c.start=r,o="1"),void 0!==n&&(c.limit=n),c.sort=o,e.next=13,this.publicGetTradesSymbolHist(this.extend(c,a));case 13:return u=e.sent,d=this.sortBy(u,1),e.abrupt("return",this.parseTrades(d,s,void 0,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:100,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=100),void 0===n&&(n=this.milliseconds()-this.parseTimeframe(r)*a*1e3),c={symbol:o.id,timeframe:this.timeframes[r],sort:1,start:n,limit:a},e.next=12,this.publicGetCandlesTradeTimeframeSymbolHist(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){if(void 0===e)return e;var t=e.split(" "),r=this.safeString(t,0);return this.safeString({ACTIVE:"open",PARTIALLY:"open",EXECUTED:"closed",CANCELED:"canceled",INSUFFICIENT:"canceled",RSN_DUST:"rejected",RSN_PAUSE:"rejected"},r,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,0),i=void 0,n=this.safeString(e,3);n in this.markets_by_id?t=this.markets_by_id[n]:i=this.parseSymbol(n),void 0===i&&void 0!==t&&(i=t.symbol);var a=this.safeInteger(e,5),s=Math.abs(this.safeFloat(e,6)),o=Math.abs(this.safeFloat(e,7)),c=o-s,u=e[7]<0?"sell":"buy",d=this.safeString(e,8),h=this.safeString(this.safeValue(this.options,"exchangeTypes"),d),l=void 0,f=this.safeString(e,13);if(void 0!==f){var p=f.split(" @ ");l=this.parseOrderStatus(this.safeString(p,0))}var v=this.safeFloat(e,16),m=this.safeFloat(e,17),y=v*c,g=this.safeString(e,2);return{info:e,id:r,clientOrderId:g,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:i,type:h,timeInForce:void 0,postOnly:void 0,side:u,price:v,stopPrice:void 0,amount:o,cost:y,average:m,filled:c,remaining:s,status:l,fee:void 0,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,p,m,y,g,b,k,x,w,_,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=T.length>4&&void 0!==T[4]?T[4]:void 0,o=T.length>5&&void 0!==T[5]?T[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=this.safeValue(this.options,"orderTypes",{}),d=this.safeStringUpper(u,r,r),a="sell"===n?-a:a,h={symbol:c.id,type:d,amount:this.numberToString(a)},"LIMIT"!==d&&"EXCHANGE LIMIT"!==d){e.next=13;break}h.price=this.numberToString(s),e.next=35;break;case 13:if("STOP"!==d&&"EXCHANGE STOP"!==d){e.next=18;break}l=this.safeFloat(o,"stopPrice",s),h.price=this.numberToString(l),e.next=35;break;case 18:if("STOP LIMIT"!==d&&"EXCHANGE STOP LIMIT"!==d){e.next=34;break}if(p=this.safeFloat(o,"price_aux_limit"),m=this.safeFloat(o,"stopPrice"),void 0!==p){e.next=29;break}if(void 0!==m){e.next=26;break}throw new v(this.id+" createOrder() requires a stopPrice parameter or a price_aux_limit parameter for a "+d+" order");case 26:h.price_aux_limit=this.numberToString(s);case 27:e.next=31;break;case 29:h.price_aux_limit=this.numberToString(p),void 0===m&&(m=s);case 31:h.price=this.numberToString(m),e.next=35;break;case 34:"TRAILING STOP"===d||"EXCHANGE TRAILING STOP"===d?(y=this.safeFloat(o,"price_trailing"),h.price_trailing=this.numberToString(y),g=this.safeFloat(o,"stopPrice",s),h.price=this.numberToString(g)):"FOK"!==d&&"EXCHANGE FOK"!==d&&"IOC"!==d&&"EXCHANGE IOC"!==d||(h.price=this.numberToString(s));case 35:return o=this.omit(o,["stopPrice","price_aux_limit","price_trailing"]),void 0!==(b=this.safeValue2(o,"cid","clientOrderId"))&&(h.cid=b,o=this.omit(o,["cid","clientOrderId"])),e.next=40,this.privatePostAuthWOrderSubmit(this.extend(h,o));case 40:if(k=e.sent,"SUCCESS"===this.safeString(k,6)){e.next=46;break}throw x=k[5],w=k[7],new f(this.id+" "+k[6]+": "+w+" (#"+x+")");case 46:return _=this.safeValue(k,4,[]),O=this.safeValue(_,0),e.abrupt("return",this.parseOrder(O,c));case 49:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,t=s.length>1&&void 0!==s[1]?s[1]:{},r={all:1},e.next=5,this.privatePostAuthWOrderCancelMulti(this.extend(r,t));case 5:return n=e.sent,a=this.safeValue(n,4,[]),e.abrupt("return",this.parseOrders(a));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},n=this.safeValue2(r,"cid","clientOrderId"),a=void 0,void 0===n){e.next=12;break}if(void 0!==(s=this.safeValue(r,"cidDate"))){e.next=8;break}throw new b(this.id+" canceling an order by clientOrderId ('cid') requires both 'cid' and 'cid_date' ('YYYY-MM-DD')");case 8:a={cid:n,cid_date:s},r=this.omit(r,["cid","clientOrderId"]),e.next=13;break;case 12:a={id:parseInt(t)};case 13:return e.next=15,this.privatePostAuthWOrderCancel(this.extend(a,r));case 15:return o=e.sent,c=this.safeValue(o,4),e.abrupt("return",this.parseOrder(c));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},a={id:[parseInt(t)]},e.next=5,this.fetchOpenOrders(r,void 0,void 0,this.extend(a,n));case 5:if(s=e.sent,void 0!==(o=this.safeValue(s,0))){e.next=9;break}throw new g(this.id+" order "+t+" not found");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},a={id:[parseInt(t)]},e.next=5,this.fetchClosedOrders(r,void 0,void 0,this.extend(a,n));case 5:if(s=e.sent,void 0!==(o=this.safeValue(s,0))){e.next=9;break}throw new g(this.id+" order "+t+" not found");case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,c=void 0,void 0!==t){e.next=15;break}return e.next=12,this.privatePostAuthROrders(this.extend(s,a));case 12:c=e.sent,e.next=20;break;case 15:return o=this.market(t),s.symbol=o.id,e.next=19,this.privatePostAuthROrdersSymbol(this.extend(s,a));case 19:c=e.sent;case 20:return e.abrupt("return",this.parseOrders(c,o,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,c=void 0,void 0!==t){e.next=15;break}return e.next=12,this.privatePostAuthROrdersHist(this.extend(s,a));case 12:c=e.sent,e.next=20;break;case 15:return o=this.market(t),s.symbol=o.id,e.next=19,this.privatePostAuthROrdersSymbolHist(this.extend(s,a));case 19:c=e.sent;case 20:return void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.abrupt("return",this.parseOrders(c,o,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c=parseInt(t),u={id:c,symbol:o.id},e.next=13,this.privatePostAuthROrderSymbolIdTrades(this.extend(u,s));case 13:return d=e.sent,e.abrupt("return",this.parseTrades(d,o,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={end:this.milliseconds()},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),c="privatePostAuthRTradesHist",void 0!==t&&(s=this.market(t),o.symbol=s.id,c="privatePostAuthRTradesSymbolHist"),e.next=14,this[c](this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n={op_renew:1},e.next=6,this.fetchDepositAddress(t,this.extend(n,r));case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.getCurrencyName(t),a={method:n,wallet:"exchange",op_renew:0},e.next=7,this.privatePostAuthWDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,4,[]),c=this.safeString(o,5),u=void 0===c?this.safeString(o,4):c,d=void 0===c?void 0:this.safeString(o,4),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({SUCCESS:"ok",ERROR:"failed",FAILURE:"failed",CANCELED:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.length,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,c=void 0,u=void 0,d=void 0,h=void 0,l=void 0,f=void 0;if(r<9){var p=this.safeValue(e,4,[]);i=this.safeInteger(e,0),void 0!==t&&(a=t.code),void 0!==(h=this.safeFloat(p,8))&&(h=-h),s=this.safeFloat(p,5),c="ok",0===(o=this.safeValue(p,0))&&(o=void 0,c="failed"),u=this.safeString(p,3),d="withdrawal"}else o=this.safeString(e,0),i=this.safeInteger(e,5),n=this.safeInteger(e,6),c=this.parseTransactionStatus(this.safeString(e,9)),void 0!==(s=this.safeFloat(e,12))&&(d=s<0?"withdrawal":"deposit"),void 0!==(h=this.safeFloat(e,13))&&(h=-h),f=this.safeString(e,16),l=this.safeString(e,20);return{info:e,id:o,txid:l,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:f,addressTo:f,tagFrom:void 0,tag:u,tagTo:u,type:d,amount:s,currency:a,status:c,updated:n,fee:{currency:a,cost:h,rate:void 0}}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},c="privatePostAuthRMovementsHist",void 0!==t&&(s=this.currency(t),o.currency=s.id,c="privatePostAuthRMovementsCurrencyHist"),void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=14,this[c](this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseTransactions(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=this.getCurrencyName(t),u={method:c,wallet:"exchange",amount:this.numberToString(r),address:n},void 0!==a&&(u.payment_id=a),e.next=11,this.privatePostAuthWWithdraw(this.extend(u,s));case 11:return d=e.sent,"success"!==(h=this.safeString(d,7))&&this.throwBroadlyMatchedException(this.exceptions.broad,h,h),l=this.parseTransaction(d,o),e.abrupt("return",this.extend(l,{address:n}));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostPositions(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));s="v1"===t?t+s:this.version+s;var c=this.urls.api[t]+"/"+s;if("public"===t&&Object.keys(o).length&&(c+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d="/api/"+s+u+(a=this.json(o)),h=this.hmac(this.encode(d),this.encode(this.secret),"sha384");n={"bfx-nonce":u,"bfx-apikey":this.apiKey,"bfx-signature":h,"Content-Type":"application/json"}}return{url:c,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!(c=e.sent)){e.next=16;break}if(!("message"in c)){e.next=13;break}if(!(c.message.indexOf("not enough exchange balance")>=0)){e.next=12;break}throw new m(this.id+" "+this.json(c));case 12:throw new f(this.id+" "+this.json(c));case 13:return e.abrupt("return",c);case 16:if(""!==c){e.next=18;break}throw new f(this.id+" returned empty response");case 18:return e.abrupt("return",c);case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(500===e){var u=this.numberToString(s[1]),d=s[2],h=this.id+" "+d;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(this.id+" "+d+" (#"+u+")")}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.OrderNotFound;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitflyer",name:"bitFlyer",countries:["JP"],version:"v1",rateLimit:1e3,hostname:"bitflyer.com",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:"emulated",fetchOrder:"emulated",fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28051642-56154182-660e-11e7-9b0d-6042d1e6edd8.jpg",api:"https://api.{hostname}",www:"https://bitflyer.com",doc:"https://lightning.bitflyer.com/docs?lang=en"},api:{public:{get:["getmarkets/usa","getmarkets/eu","getmarkets","getboard","getticker","getexecutions","gethealth","getboardstate","getchats"]},private:{get:["getpermissions","getbalance","getbalancehistory","getcollateral","getcollateralhistory","getcollateralaccounts","getaddresses","getcoinins","getcoinouts","getbankaccounts","getdeposits","getwithdrawals","getchildorders","getparentorders","getparentorder","getexecutions","getpositions","gettradingcommission"],post:["sendcoin","withdraw","sendchildorder","cancelchildorder","sendparentorder","cancelparentorder","cancelallchildorders"]}},fees:{trading:{maker:.002,taker:.002},"BTC/JPY":{maker:.0015,taker:.0015}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetGetmarkets(t);case 3:return r=e.sent,e.next=6,this.publicGetGetmarketsUsa(t);case 6:return n=e.sent,e.next=9,this.publicGetGetmarketsEu(t);case 9:for(a=e.sent,s=this.arrayConcat(r,n),s=this.arrayConcat(s,a),o=[],c=0;c<s.length;c++)u=s[c],d=this.safeString(u,"product_code"),h=d.split("_"),l=void 0,f=void 0,p=void 0,v=void 0,1===(m=h.length)?(l=d.slice(0,3),f=d.slice(3,6)):2===m?(l=h[0],f=h[1]):(l=h[1],f=h[2]),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),y=2===m?p+"/"+v:d,g=this.safeValue(this.fees,y,this.fees.trading),b=this.safeValue(g,"maker",this.fees.trading.maker),k=this.safeValue(g,"taker",this.fees.trading.taker),x=!0,w=!1,_="spot",("alias"in u||"FX"===h[0])&&(_="future",w=!0,x=!1,b=0,k=0),o.push({id:d,symbol:y,base:p,quote:v,baseId:l,quoteId:f,maker:b,taker:k,type:_,spot:x,future:w,info:u});return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetbalance(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency_code"),c=this.safeCurrencyCode(o),(u=this.account()).total=this.safeFloat(s,"amount"),u.free=this.safeFloat(s,"available"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={product_code:this.marketId(t)},e.next=7,this.publicGetGetboard(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","size"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n={product_code:this.marketId(t)},e.next=6,this.publicGetGetticker(this.extend(n,r));case 6:return a=e.sent,s=this.parse8601(this.safeString(a,"timestamp")),o=this.safeFloat(a,"ltp"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:void 0,low:void 0,bid:this.safeFloat(a,"best_bid"),bidVolume:void 0,ask:this.safeFloat(a,"best_ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a,"volume_by_product"),quoteVolume:void 0,info:a});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeStringLower(e,"side");void 0!==r&&r.length<1&&(r=void 0);var i=void 0;if(void 0!==r){var n=r+"_child_order_acceptance_id";n in e&&(i=e[n])}void 0===i&&(i=this.safeString(e,"child_order_acceptance_id"));var a=this.parse8601(this.safeString(e,"exec_date")),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"size"),c=void 0;void 0!==o&&void 0!==s&&(c=s*o);var u=this.safeString(e,"id"),d=void 0;return void 0!==t&&(d=t.symbol),{id:u,info:e,timestamp:a,datetime:this.iso8601(a),symbol:d,order:i,type:void 0,side:r,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={product_code:s.id},e.next=9,this.publicGetGetexecutions(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c={product_code:this.marketId(t),child_order_type:r.toUpperCase(),side:n.toUpperCase(),price:s,size:a},e.next=7,this.privatePostSendchildorder(this.extend(c,o));case 7:return u=e.sent,d=this.safeString(u,"child_order_acceptance_id"),e.abrupt("return",{info:u,id:d});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a `symbol` argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={product_code:this.marketId(r),child_order_acceptance_id:t},e.next=9,this.privatePostCancelchildorder(this.extend(a,n));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({ACTIVE:"open",COMPLETED:"closed",CANCELED:"canceled",EXPIRED:"canceled",REJECTED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"child_order_date")),i=this.safeFloat(e,"size"),n=this.safeFloat(e,"outstanding_size"),a=this.safeFloat(e,"executed_size"),s=this.safeFloat(e,"price"),o=this.parseOrderStatus(this.safeString(e,"child_order_state")),c=this.safeStringLower(e,"child_order_type"),u=this.safeStringLower(e,"side"),d=this.safeString(e,"product_code"),h=this.safeSymbol(d,t),l=void 0,f=this.safeFloat(e,"total_commission");void 0!==f&&(l={cost:f,currency:void 0,rate:void 0});var p=this.safeString(e,"child_order_acceptance_id");return this.safeOrder({id:p,clientOrderId:void 0,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:o,symbol:h,type:c,timeInForce:void 0,postOnly:void 0,side:u,price:s,stopPrice:void 0,cost:void 0,amount:i,filled:a,remaining:n,fee:l,average:void 0,trades:void 0})}},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:100,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={product_code:s.id,count:n},e.next=12,this.privateGetGetchildorders(this.extend(o,a));case 12:return c=e.sent,u=this.parseOrders(c,s,r,n),void 0!==t&&(u=this.filterBy(u,"symbol",t)),e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:100,a=o.length>3&&void 0!==o[3]?o[3]:{},s={child_order_state:"ACTIVE"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:100,a=o.length>3&&void 0!==o[3]?o[3]:{},s={child_order_state:"COMPLETED"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a `symbol` argument");case 4:return e.next=6,this.fetchOrders(r);case 6:if(n=e.sent,a=this.indexBy(n,"id"),!(t in a)){e.next=10;break}return e.abrupt("return",a[t]);case 10:throw new v(this.id+" No order found with id "+t);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={product_code:s.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetexecutions(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" fetchPositions() requires a `symbols` argument, exactly one symbol in an array");case 4:return e.next=6,this.loadMarkets();case 6:return n={product_code:this.marketIds(t)},e.next=9,this.privateGetpositions(this.extend(n,r));case 9:return a=e.sent,e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if("JPY"===t||"USD"===t||"EUR"===t){e.next=7;break}throw new f(this.id+" allows withdrawing JPY, USD, EUR only, "+t+" is not supported");case 7:return s=this.currency(t),o={currency_code:s.id,amount:r},e.next=11,this.privatePostWithdraw(this.extend(o,a));case 11:return c=e.sent,u=this.safeString(c,"message_id"),e.abrupt("return",{info:c,id:u});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/";"private"===t&&(s+="me/"),s+=e,"GET"===r&&Object.keys(i).length&&(s+="?"+this.urlencode(i));var o=this.implodeParams(this.urls.api,{hostname:this.hostname}),c=o+s;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=[u,r,s].join("");Object.keys(i).length&&"GET"!==r&&(d+=a=this.json(i)),n={"ACCESS-KEY":this.apiKey,"ACCESS-TIMESTAMP":u,"ACCESS-SIGN":this.hmac(this.encode(d),this.encode(this.secret)),"Content-Type":"application/json"}}return{url:c,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.OrderNotFound,m=l.InsufficientFunds,y=l.DDoSProtection,g=l.PermissionDenied,b=l.BadSymbol;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitforex",name:"Bitforex",countries:["CN"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","12h":"12hour","1d":"1day","1w":"1week","1M":"1month"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295553-1160ec00-c50e-11ea-8ea0-df79276a9646.jpg",api:"https://api.bitforex.com",www:"https://www.bitforex.com",doc:"https://github.com/githubdev2020/API_Doc_en/wiki",fees:"https://help.bitforex.com/en_us/?cat=13",referral:"https://www.bitforex.com/en/invitationRegister?inviterId=1867438"},api:{public:{get:["api/v1/market/symbols","api/v1/market/ticker","api/v1/market/depth","api/v1/market/trades","api/v1/market/kline"]},private:{post:["api/v1/fund/mainAccount","api/v1/fund/allAccount","api/v1/trade/placeOrder","api/v1/trade/placeMultiOrder","api/v1/trade/cancelOrder","api/v1/trade/orderInfo","api/v1/trade/orderInfos"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001},funding:{tierBased:!1,percentage:!0,deposit:{},withdraw:{BTC:5e-4,ETH:.01,BCH:1e-4,LTC:.001,ETC:.005,USDT:5,CMCT:30,AION:3,LVT:0,DATA:40,RHP:50,NEO:0,AIDOC:10,BQT:2,R:2,DPY:.8,GTC:40,AGI:30,DENT:100,SAN:1,SPANK:8,AID:5,OMG:.1,BFT:5,SHOW:150,TRX:20,ABYSS:10,THM:25,ZIL:20,PPT:.2,WTC:.4,LRC:7,BNT:1,CTXC:1,MITH:20,TRUE:4,LYM:10,VEE:100,AUTO:200,REN:50,TIO:2.5,NGC:1.5,PST:10,CRE:200,IPC:5,PTT:1e3,XMCT:20,ATMI:40,TERN:40,XLM:.01,ODE:15,FTM:100,RTE:100,DCC:100,IMT:500,GOT:3,EGT:500,DACC:1e3,UBEX:500,ABL:100,OLT:100,DAV:40,THRT:10,RMESH:3,UPP:20,SDT:0,SHR:10,MTV:3,ESS:100,MET:3,TTC:20,LXT:10,XCLP:100,LUK:100,UBC:100,DTX:10,BEAT:20,DEED:2,BGX:3e3,PRL:20,ELY:50,CARD:300,SQR:15,VRA:400,BWX:3500,MAS:75,FLP:.6,UNC:300,CRNC:15,MFG:70,ZXC:70,TRT:30,ZIX:35,XRA:10,AMO:1600,IPG:3,uDoo:50,URB:30,ARCONA:3,CRAD:5,NOBS:1e3,ADF:2,ELF:5,LX:20,PATH:15,SILK:120,SKYFT:50,EDN:50,ADE:50,EDR:10,TIME:.25,SPRK:20,QTUM:.01,BF:5,ZPR:100,HYB:10,CAN:30,CEL:10,ATS:50,KCASH:1,ACT:.01,MT:300,DXT:30,WAB:4e3,HYDRO:400,LQD:5,OPTC:200,EQUAD:80,LATX:50,LEDU:100,RIT:70,ACDC:500,FSN:2}}},commonCurrencies:{CREDIT:"TerraCredit",HBC:"Hybrid Bank Cash",IQ:"IQ.Cash",UOS:"UOS Network"},exceptions:{4004:v,1013:p,1016:p,1017:g,1019:b,3002:m,10204:y}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetApiV1MarketSymbols(t);case 3:for(r=e.sent,n=r.data,a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"symbol"),u=c.split("-"),d=u[2],h=u[1],l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=!0,m={amount:this.safeInteger(o,"amountPrecision"),price:this.safeInteger(o,"pricePrecision")},y={amount:{min:this.safeFloat(o,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},a.push({id:c,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:v,precision:m,limits:y,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"time"),n=this.safeString(e,"tid"),a=void 0,s=this.safeFloat(e,"amount"),o=this.safeFloat(e,"price"),c=void 0;void 0!==o&&void 0!==s&&(c=s*o);var u=this.safeInteger(e,"direction"),d=this.parseSide(u);return{info:e,id:n,timestamp:i,datetime:this.iso8601(i),symbol:r,type:void 0,side:d,price:o,amount:s,cost:c,order:a,fee:void 0,takerOrMaker:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s={symbol:this.marketId(t)},void 0!==n&&(s.size=n),o=this.market(t),e.next=10,this.publicGetApiV1MarketTrades(this.extend(s,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,o,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostApiV1FundAllAccount(t);case 5:for(r=e.sent,n=r.data,a={info:r},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).used=this.safeFloat(o,"frozen"),d.free=this.safeFloat(o,"active"),d.total=this.safeFloat(o,"fix"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.markets[t],a={symbol:n.id},e.next=7,this.publicGetApiV1MarketTicker(this.extend(a,r));case 7:return s=e.sent,o=s.data,c=this.safeInteger(o,"date"),e.abrupt("return",{symbol:t,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(o,"high"),low:this.safeFloat(o,"low"),bid:this.safeFloat(o,"buy"),bidVolume:void 0,ask:this.safeFloat(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(o,"last"),last:this.safeFloat(o,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,"vol"),quoteVolume:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"vol")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,ktype:this.timeframes[r]},void 0!==a&&(c.size=a),e.next=11,this.publicGetApiV1MarketKline(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.marketId(t),s={symbol:a},void 0!==r&&(s.size=r),e.next=9,this.publicGetApiV1MarketDepth(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"data"),u=this.safeInteger(o,"time"),e.abrupt("return",this.parseOrderBook(c,u,"bids","asks","price","amount"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"};return e in t?t[e]:e}},{key:"parseSide",value:function(e){return 1===e?"buy":2===e?"sell":void 0}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeFloat(e,"createTime"),n=this.safeFloat(e,"lastTime"),a=t.symbol,s=this.safeInteger(e,"tradeType"),o=this.parseSide(s),c=void 0,u=this.safeFloat(e,"orderPrice"),d=this.safeFloat(e,"avgPrice"),h=this.safeFloat(e,"orderAmount"),l=this.safeFloat(e,"dealAmount"),f=this.parseOrderStatus(this.safeString(e,"orderState")),p="buy"===o?"base":"quote",v=t[p],m={cost:this.safeFloat(e,"tradeFee"),currency:v};return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:n,symbol:a,type:c,timeInForce:void 0,postOnly:void 0,side:o,price:u,stopPrice:void 0,cost:void 0,average:d,amount:h,filled:l,remaining:void 0,status:f,fee:m,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={symbol:this.marketId(r),orderId:t},e.next=8,this.privatePostApiV1TradeOrderInfo(this.extend(s,n));case 8:return o=e.sent,c=this.parseOrder(o.data,a),e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={symbol:this.marketId(t),state:0},e.next=10,this.privatePostApiV1TradeOrderInfos(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={symbol:this.marketId(t),state:1},e.next=10,this.privatePostApiV1TradeOrderInfos(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=void 0,"buy"===n?c=1:"sell"===n&&(c=2),u={symbol:this.marketId(t),price:s,amount:a,tradeType:c},e.next=9,this.privatePostApiV1TradePlaceOrder(this.extend(u,o));case 9:return d=e.sent,h=d.data,e.abrupt("return",{info:d,id:this.safeString(h,"orderId")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},void 0!==r&&(a.symbol=this.marketId(r)),e.next=8,this.privatePostApiV1TradeCancelOrder(this.extend(a,n));case 8:return s=e.sent,o=s.success,c={info:s,success:o},e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.urlencode({accessKey:this.apiKey});o.nonce=this.milliseconds(),Object.keys(o).length&&(c+="&"+this.urlencode(this.keysort(o)));var u="/"+e+"?"+c,d=this.hmac(this.encode(u),this.encode(this.secret));a=c+"&signData="+d,n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if("string"===typeof a&&("{"===a[0]||"["===a[0])){var u=this.id+" "+a,d=this.safeValue(s,"success");if(void 0!==d&&!d){var h=this.safeString(s,"code");throw this.throwExactlyMatchedException(this.exceptions,h,u),new f(u)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.OnMaintenance,y=f.ArgumentsRequired,g=f.BadRequest,b=f.AccountSuspended,k=f.InvalidAddress,x=f.PermissionDenied,w=f.DDoSProtection,_=f.InsufficientFunds,O=f.InvalidNonce,T=f.CancelPending,S=f.InvalidOrder,C=f.OrderNotFound,I=f.AuthenticationError,M=f.RequestTimeout,E=f.NotSupported,A=f.BadSymbol,F=f.RateLimitExceeded,P=r(13).TICK_SIZE;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"bitget",name:"Bitget",countries:["SG"],version:"v3",rateLimit:1e3,has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w"},hostname:"bitget.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/88317935-a8a21c80-cd22-11ea-8e2b-4b9fac5975eb.jpg",api:{data:"https://api.{hostname}",api:"https://api.{hostname}",capi:"https://capi.{hostname}",swap:"https://capi.{hostname}"},www:"https://www.bitget.com",doc:["https://bitgetlimited.github.io/apidoc/en/swap","https://bitgetlimited.github.io/apidoc/en/spot"],fees:"https://www.bitget.cc/zh-CN/rate?tab=1",test:{rest:"https://testnet.bitget.com"},referral:"https://www.bitget.com/expressly?languageType=0&channelCode=ccxt&vipCode=tg9j"},api:{data:{get:["market/history/kline","market/detail/merged","market/tickers","market/allticker","market/depth","market/trade","market/history/trade","market/detail","common/symbols","common/currencys","common/timestamp"]},api:{get:["account/accounts","accounts/{account_id}/balance","order/orders","order/orders/openOrders","order/orders/history","order/deposit_withdraw"],post:["order/orders/place","order/orders/{order_id}/submitcancel","order/orders/batchcancel","order/orders/{order_id}","order/orders/{order_id}/matchresults","order/matchresults"]},capi:{get:["market/time","market/contracts","market/depth","market/tickers","market/ticker","market/trades","market/candles","market/index","market/open_count","market/open_interest","market/price_limit","market/funding_time","market/mark_price","market/open_count","market/historyFundRate"]},swap:{get:["account/accounts","account/account","account/settings","position/allPosition","position/singlePosition","position/holds","order/detail","order/orders","order/fills","order/current","order/currentPlan","order/history","order/historyPlan","trace/closeTrack","trace/currentTrack","trace/historyTrack"],post:["account/leverage","account/adjustMargin","account/modifyAutoAppendMargin","order/placeOrder","order/batchOrders","order/cancel_order","order/cancel_batch_orders","order/plan_order","order/cancel_plan","position/changeHoldModel"]}},fees:{spot:{taker:.002,maker:.002},swap:{taker:6e-4,maker:4e-4}},requiredCredentials:{apiKey:!0,secret:!0,password:!0},exceptions:{exact:{1:p,"failure to get a peer from the ring-balancer":v,4010:x,4001:p,4002:p,30001:I,30002:I,30003:I,30004:I,30005:O,30006:I,30007:g,30008:M,30009:p,30010:I,30011:x,30012:I,30013:I,30014:w,30015:I,30016:p,30017:p,30018:p,30019:v,30020:g,30021:g,30022:x,30023:g,30024:A,30025:g,30026:w,30027:I,30028:x,30029:b,30030:p,30031:g,30032:A,30033:g,30034:p,30035:p,30036:p,30037:v,30038:m,32001:b,32002:x,32003:T,32004:p,32005:S,32006:S,32007:S,32008:S,32009:S,32010:p,32011:p,32012:p,32013:p,32014:p,32015:p,32016:p,32017:p,32018:p,32019:p,32020:p,32021:p,32022:p,32023:p,32024:p,32025:p,32026:p,32027:p,32028:b,32029:p,32030:S,32031:y,32038:I,32040:p,32044:p,32045:p,32046:p,32047:p,32048:S,32049:p,32050:S,32051:S,32052:p,32053:p,32057:p,32054:p,32055:S,32056:p,32058:p,32059:S,32060:S,32061:S,32062:S,32063:S,32064:p,32065:p,32066:p,32067:p,32068:p,32069:p,32070:p,32071:p,32072:p,32073:p,32074:p,32075:p,32076:p,32077:p,32078:p,32079:p,32080:p,32083:p,33001:x,33002:b,33003:_,33004:p,33005:p,33006:p,33007:p,33008:_,33009:p,33010:p,33011:p,33012:p,33013:S,33014:C,33015:S,33016:p,33017:_,33018:p,33020:p,33021:g,33022:S,33023:p,33024:S,33025:S,33026:p,33027:S,33028:S,33029:S,33034:p,33035:p,33036:p,33037:p,33038:p,33039:p,33040:p,33041:p,33042:p,33043:p,33044:p,33045:p,33046:p,33047:p,33048:p,33049:p,33050:p,33051:p,33059:g,33060:g,33061:p,33062:p,33063:p,33064:p,33065:p,21009:p,34001:x,34002:k,34003:p,34004:p,34005:p,34006:p,34007:p,34008:_,34009:p,34010:p,34011:p,34012:p,34013:p,34014:p,34015:p,34016:x,34017:b,34018:I,34019:x,34020:x,34021:k,34022:p,34023:x,34026:p,34036:p,34037:p,34038:p,34039:p,35001:p,35002:p,35003:p,35004:p,35005:I,35008:S,35010:S,35012:S,35014:S,35015:S,35017:p,35019:S,35020:S,35021:S,35022:p,35024:p,35025:_,35026:p,35029:C,35030:S,35031:S,35032:p,35037:p,35039:p,35040:S,35044:p,35046:_,35047:_,35048:p,35049:S,35050:S,35052:_,35053:p,35055:_,35057:p,35058:p,35059:g,35060:g,35061:g,35062:S,35063:S,35064:S,35066:S,35067:S,35068:S,35069:S,35070:S,35071:S,35072:S,35073:S,35074:S,35075:S,35076:S,35077:S,35078:S,35079:S,35080:S,35081:S,35082:S,35083:S,35084:S,35085:S,35086:S,35087:S,35088:S,35089:S,35090:p,35091:p,35092:p,35093:p,35094:p,35095:g,35096:p,35097:p,35098:p,35099:p,36001:g,36002:g,36005:p,36101:I,36102:x,36103:b,36104:x,36105:x,36106:b,36107:x,36108:_,36109:x,36201:x,36202:x,36203:S,36204:p,36205:g,36206:g,36207:S,36208:S,36209:S,36210:S,36211:S,36212:S,36213:S,36214:p,36216:C,36217:S,36218:S,36219:S,36220:S,36221:S,36222:S,36223:S,36224:S,36225:S,36226:S,36227:S,36228:S,36229:S,36230:S,400:g,401:I,403:x,404:g,405:g,415:g,429:w,500:v,1001:F,1002:p,1003:p,40001:I,40002:I,40003:I,40004:O,40005:O,40006:I,40007:g,40008:O,40009:I,40010:I,40011:I,40012:I,40013:p,40014:x,40015:p,40016:x,40017:p,40018:x,40102:g,40103:g,40104:p,40105:p,40106:p,40107:p,40108:S,40109:C,40200:m,40201:S,40202:p,40203:g,40204:g,40205:g,40206:g,40207:g,40208:g,40209:g,40300:p,40301:x,40302:g,40303:g,40304:g,40305:g,40306:p,40308:m,40309:A,40400:p,40401:p,40402:g,40403:g,40404:g,40405:g,40406:g,40407:p,40408:p,40409:p,40500:S,40501:p,40502:p,40503:p,40504:p,40505:p,40506:I,40507:I,40508:p,40509:p,40600:p,40601:p,40602:p,40603:p,40604:v,40605:p,40606:p,40607:p,40608:p,40609:p,40700:g,40701:p,40702:p,40703:p,40704:p,40705:g,40706:S,40707:g,40708:g,40709:p,40710:p,40711:_,40712:_,40713:p,40714:p,"invalid sign":I,"invalid currency":A,"invalid symbol":A,"invalid period":g,"invalid user":p,"invalid amount":S,"invalid type":S,"invalid orderId":S,"invalid record":p,"invalid accountId":g,"invalid address":g,"accesskey not null":I,"illegal accesskey":I,"sign not null":I,"req_time is too much difference from server time":O,"permissions not right":x,"illegal sign invalid":I,"user locked":b,"Request Frequency Is Too High":F,"more than a daily rate of cash":g,"more than the maximum daily withdrawal amount":g,"need to bind email or mobile":p,"user forbid":x,"User Prohibited Cash Withdrawal":x,"Cash Withdrawal Is Less Than The Minimum Value":g,"Cash Withdrawal Is More Than The Maximum Value":g,"the account with in 24 hours ban coin":x,"order cancel fail":g,"base symbol error":A,"base date error":p,"api signature not valid":I,"gateway internal error":p,"audit failed":p,"order queryorder invalid":g,"market no need price":S,"limit need price":S,"userid not equal to account_id":p,"your balance is low":_,"address invalid cointype":p,"system exception":p,50003:p,50004:A,50006:x,50007:x,50008:M,50009:F,50010:p,50014:S,50015:S,50016:S,50017:S,50018:S,50019:S,50020:_,50021:S,50026:S,"invalid order query time":p,"invalid start time":g,"invalid end time":g,20003:p,"01001":p},broad:{"invalid size, valid range":p}},precisionMode:P,options:{createMarketBuyOrderRequiresPrice:!0,fetchMarkets:["spot","swap"],parseOHLCV:{volume:{spot:"amount",swap:5}},defaultType:"spot",accountId:void 0,timeframes:{spot:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","2h":"120min","4h":"240min","6h":"360min","12h":"720min","1d":"1day","1w":"1week"},swap:{"1m":"60","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800"}}}})}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.dataGetCommonTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=o.length>0&&void 0!==o[0]?o[0]:{},(r=this.safeValue(this.options,"fetchMarkets")).length||(r=[this.options.defaultType]),i=[],a=0;case 5:if(!(a<r.length)){e.next=13;break}return e.next=8,this.fetchMarketsByType(r[a],t);case 8:s=e.sent,i=this.arrayConcat(i,s);case 10:a++,e.next=5;break;case 13:return e.abrupt("return",i);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarkets",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.parseMarket(e[r]));return t}},{key:"parseMarket",value:function(e){var t=this.safeString(e,"symbol"),r="spot",i=!0,n=!1,a=this.safeString2(e,"base_currency","coin"),s=this.safeString(e,"quote_currency");void 0!==this.safeFloat(e,"contract_val")&&(r="swap",i=!1,n=!0);var o=this.safeCurrencyCode(a),c=this.safeCurrencyCode(s),u=t.toUpperCase();i&&(u=o+"/"+c);var d=this.safeString(e,"tick_size"),h=this.safeString(e,"size_increment"),l={amount:parseFloat("1e-"+h),price:parseFloat("1e-"+d)},f=this.safeFloat2(e,"min_size","base_min_size"),p=this.safeString(e,"status"),v=void 0;void 0!==p&&(v="1"===p);var m=this.safeValue2(this.fees,r,"trading",{});return this.extend(m,{id:t,symbol:u,base:o,quote:c,baseId:a,quoteId:s,info:e,type:r,spot:i,swap:n,active:v,precision:l,limits:{amount:{min:f,max:void 0},price:{min:l.price,max:void 0},cost:{min:l.price,max:void 0}}})}},{key:"fetchMarketsByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:{},"spot"!==t){e.next=9;break}return e.next=4,this.dataGetCommonSymbols(r);case 4:return i=e.sent,a=this.safeValue(i,"data",[]),e.abrupt("return",this.parseMarkets(a));case 9:if("swap"!==t){e.next=16;break}return e.next=12,this.capiGetMarketContracts(r);case 12:return s=e.sent,e.abrupt("return",this.parseMarkets(s));case 16:throw new E(this.id+" fetchMarketsByType does not support market type "+t);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.dataGetCommonCurrencys(t);case 3:for(r=e.sent,i={},a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],c=this.safeCurrencyCode(o),i[c]={id:o,code:c,info:o,type:void 0,name:void 0,active:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},o=void 0,a.spot?(o="dataGetMarketDepth",s.type="step0"):a.swap&&(o="capiGetMarketDepth",s.limit=void 0===r?100:r),e.next=10,this[o](this.extend(s,i));case 10:return c=e.sent,u=this.safeValue(c,"data",c),d=this.safeInteger2(u,"timestamp","ts"),h=this.safeInteger(u,"id"),(l=this.parseOrderBook(u,d)).nonce=h,e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"timestamp","id"),n=void 0,a=this.safeString2(e,"instrument_id","symbol");if(a in this.markets_by_id)n=(t=this.markets_by_id[a]).symbol;else if(void 0!==a){var s=a.split("_"),o=s.length;if(2===o){var c=i(s,2),u=c[0],d=c[1],h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);n=h+"/"+l}else n=a}void 0===n&&void 0!==t&&(n=t.symbol);var f=this.safeFloat2(e,"last","close"),p=this.safeFloat(e,"open"),v=void 0,m=void 0,y=this.safeValue(e,"bid");void 0===y?y=this.safeFloat(e,"best_bid"):(v=this.safeFloat(y,1),y=this.safeFloat(y,0));var g=this.safeValue(e,"ask");void 0===g?g=this.safeFloat(e,"best_ask"):(m=this.safeFloat(g,1),g=this.safeFloat(g,0));var b=this.safeFloat2(e,"amount","volume_24h"),k=this.safeFloat(e,"vol"),x=this.vwap(b,k),w=void 0,_=void 0,O=void 0;return void 0!==f&&void 0!==p&&(_=(w=f-p)/p*100,O=this.sum(p,f)/2),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat2(e,"high","high_24h"),low:this.safeFloat2(e,"low","low_24h"),bid:y,bidVolume:v,ask:g,askVolume:m,vwap:x,open:p,close:f,last:f,previousClose:void 0,change:w,percentage:_,average:O,baseVolume:b,quoteVolume:k,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a=void 0,i.spot?a="dataGetMarketDetailMerged":i.swap&&(a="capiGetMarketTicker"),s={symbol:i.id},e.next=9,this[a](this.extend(s,r));case 9:return o=e.sent,c=this.safeValue(o,"data",o),e.abrupt("return",this.parseTicker(c,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickersByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return a=void 0,"spot"===t?a="dataGetMarketTickers":"swap"===t&&(a="capiGetMarketTickers"),e.next=8,this[a](i);case 8:for(s=e.sent,o=this.safeValue(s,"data",s),c=void 0,Array.isArray(s)||(c=this.safeInteger(s,"ts")),u={},d=0;d<o.length;d++)h=this.parseTicker(this.extend({timestamp:c},o[d])),l=h.symbol,u[l]=h;return e.abrupt("return",this.filterByArray(u,"symbol",r));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},i=this.safeString2(this.options,"fetchTickers","defaultType"),a=this.safeString(r,"type",i),e.next=6,this.fetchTickersByType(a,t,this.omit(r,"type"));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"symbol"),a=void 0,s=void 0;if(n in this.markets_by_id)r=(t=this.markets_by_id[n]).symbol,a=t.base,s=t.quote;else if(void 0!==n){var o=n.split("_"),c=o.length;if(2===c){var u=i(o,2),d=u[0],h=u[1];r=(a=this.safeCurrencyCode(d))+"/"+(s=this.safeCurrencyCode(h))}else r=n.toUpperCase()}void 0===r&&void 0!==t&&(r=t.symbol,a=t.base,s=t.quote);var l=this.safeInteger(e,"created_at");l=this.safeInteger2(e,"timestamp","ts",l);var f=this.safeFloat(e,"price"),p=this.safeFloat2(e,"filled_amount","order_qty");p=this.safeFloat2(e,"size","amount",p);var v=this.safeString2(e,"exec_type","liquidity");"M"===v?v="maker":"T"===v&&(v="taker");var m=this.safeString(e,"type"),y=void 0,g=void 0;void 0!==m?(y=this.safeString(e,"type"),g=this.parseOrderType(y),y=this.parseOrderSide(y)):(y=this.safeString2(e,"side","direction"),g=this.parseOrderType(y),y=this.parseOrderSide(y));var b=void 0;void 0!==p&&void 0!==f&&(b=p*f);var k=this.safeFloat(e,"fee"),x=void 0;if(void 0!==(k=void 0===k?this.safeFloat(e,"filled_fees"):-k)){var w="buy"===y?a:s;x={cost:k,currency:w}}var _=this.safeString(e,"order_id"),O=this.safeString2(e,"trade_id","id");return{info:e,timestamp:l,datetime:this.iso8601(l),symbol:r,id:O,order:_,type:g,takerOrMaker:v,side:y,price:f,amount:p,cost:b,fee:x}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},c=void 0,s.spot?c="dataGetMarketHistoryTrade":s.swap&&(c="capiGetMarketTrades"),s.spot?void 0!==r&&(o.size=r):s.swap&&(void 0===r&&(r=100),o.limit=r),e.next=12,this[c](this.extend(o,a));case 12:return u=e.sent,d=void 0,Array.isArray(u)?d=u:(h=this.safeValue(u,"data",{}),d=this.safeValue2(h,"data",[])),e.abrupt("return",this.parseTrades(d,s,i,r));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(this.options,"parseOHLCV",{}),i=this.safeValue(r,"volume",{});if(Array.isArray(e)){var n=this.safeString(i,t.type,"amount");return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,n)]}var a=this.safeValue(i,t.type,6);return[this.safeInteger(e,"id"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,a)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:"1m",i=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:void 0,s=g.length>4&&void 0!==g[4]?g[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id},u=void 0,d=o.type,h=this.safeValue(this.options,"timeframes",{}),l=this.safeValue(h,d,{}),f=this.safeValue(l,this.timeframes[r]),o.spot?(u="dataGetMarketHistoryKline",c.period=f,void 0!==a&&(c.size=a)):o.swap&&(p=this.parseTimeframe(r),u="capiGetMarketCandles",c.granularity=f,v=this.milliseconds(),void 0===i?(void 0===a&&(a=1e3),c.start=this.iso8601(v-a*p*1e3),c.end=this.iso8601(v)):(c.start=this.iso8601(i),c.end=void 0===a?this.iso8601(v):this.iso8601(this.sum(i,a*p*1e3)))),e.next=16,this[u](this.extend(c,s));case 16:return m=e.sent,y=m,Array.isArray(m)||(y=this.safeValue(m,"data",[])),e.abrupt("return",this.parseOHLCVs(y,o,r,i,a));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSpotBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"data"),i=this.safeValue(r,"list"),n=0;n<i.length;n++){var a=i[n],s=this.safeString(a,"currency"),o=this.safeCurrencyCode(s);if(!(o in t)){var c=this.account();t[o]=c}var u=this.safeValue(a,"type");if("trade"===u)t[o].free=this.safeFloat(a,"balance");else if("frozen"===u||"lock"===u){var d=this.safeFloat(t[o],"used");t[o].used=this.sum(d,this.safeFloat(a,"balance"))}}return this.parseBalance(t)}},{key:"parseSwapBalance",value:function(e){for(var t={},r=0;r<e.length;r++){var i=e[r],n=this.safeString(i,"symbol"),a=n;n in this.markets_by_id&&(a=this.markets_by_id[n].symbol);var s=this.account();s.total=this.safeFloat(i,"equity"),s.free=this.safeFloat(i,"total_avail_balance"),t[a]=s}return this.parseBalance(t)}},{key:"fetchAccounts",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},r={method:"accounts"},e.next=4,this.apiGetAccountAccounts(this.extend(r,t));case 4:for(i=e.sent,a=this.safeValue(i,"data",[]),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"id"),d=this.safeStringLower(c,"type"),s.push({id:u,type:d,currency:void 0,info:c});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findAccountByType",value:function(){var e=a(n.mark((function e(t){var r,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.groupBy(this.accounts,"type"),void 0!==(i=this.safeValue(r,t))){e.next=8;break}throw new p(this.id+" findAccountByType() could not find an accountId with type '"+t+"', specify the 'accountId' parameter instead");case 8:if(!(i.length>1)){e.next=11;break}throw new p(this.id+" findAccountByType() found more than one accountId with type '"+t+"', specify the 'accountId' parameter instead");case 11:return e.abrupt("return",i[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountId",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.safeString(this.options,"accountId"),void 0===(i=this.safeString(t,"accountId",r))){e.next=8;break}return e.abrupt("return",i);case 8:if(a=this.safeString(this.options,"defaultType","margin"),s=this.safeString(t,"type",a),t=this.omit(t,"type"),void 0!==s){e.next=13;break}throw new y(this.id+" getAccountId() requires an 'accountId' parameter");case 13:return e.next=15,this.findAccountByType(s);case 15:return o=e.sent,e.abrupt("return",o.id);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:if(r=this.safeString2(this.options,"fetchBalance","defaultType"),void 0!==(i=this.safeString(t,"type",r))){e.next=9;break}throw new y(this.id+" fetchBalance() requires a 'type' parameter, one of 'spot', 'swap'");case 9:if(a=void 0,s=this.omit(t,"type"),"spot"!==i){e.next=20;break}return e.next=14,this.getAccountId(t);case 14:o=e.sent,a="apiGetAccountsAccountIdBalance",s.account_id=o,s.method="balance",e.next=21;break;case 20:"swap"===i&&(a="swapGetAccountAccounts");case 21:return e.next=23,this[a](s);case 23:return c=e.sent,e.abrupt("return",this.parseBalanceByType(i,c));case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceByType",value:function(e,t){if("spot"===e)return this.parseSpotBalance(t);if("swap"===e)return this.parseSwapBalance(t);throw new E(this.id+" fetchBalance does not support the '"+e+"' type (the type must be one of 'account', 'spot', 'margin', 'futures', 'swap')")}},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open","partial-filled":"open","partial-canceled":"canceled",filled:"closed",canceled:"canceled","-2":"failed","-1":"canceled",0:"open",1:"open",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrderSide",value:function(e){return this.safeString({"buy-market":"buy","sell-market":"sell","buy-limit":"buy","sell-limit":"sell",1:"long",2:"short",3:"long",4:"short"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({"buy-market":"market","sell-market":"market","buy-limit":"limit","sell-limit":"limit",1:"open",2:"open",3:"close",4:"close"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id");r=this.safeString2(e,"id","data",r);var i=this.safeInteger2(e,"created_at","createTime"),n=this.safeString(e,"type"),a=this.parseOrderSide(n);n=this.parseOrderType(n);var s=void 0,o=this.safeString(e,"symbol");void 0!==o&&(o in this.markets_by_id?t=this.markets_by_id[o]:s=o.toUpperCase()),void 0===s&&void 0!==t&&(s=t.symbol);var c=this.safeFloat2(e,"amount","size"),u=this.safeFloat2(e,"filled_amount","filled_qty"),d=this.safeFloat(e,"filled_cash_amount"),h=this.safeFloat(e,"price"),l=this.safeFloat(e,"price_avg"),f=this.parseOrderStatus(this.safeString2(e,"state","status")),p=this.safeFloat2(e,"filled_fees","fee"),v=void 0;if(void 0!==p){var m=void 0;v={cost:p,currency:m}}var y=this.safeString(e,"client_oid");return this.safeOrder({info:e,id:r,clientOrderId:y,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:s,type:n,timeInForce:void 0,postOnly:void 0,side:a,price:h,stopPrice:void 0,average:l,cost:d,amount:c,filled:u,remaining:void 0,status:f,fee:v,trades:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:if(c=this.market(t),u={symbol:c.id},d=this.safeString2(o,"client_oid","clientOrderId",this.uuid()),o=this.omit(o,["client_oid","clientOrderId"]),h=void 0,!c.spot){e.next=44;break}return e.next=14,this.getAccountId({type:c.type});case 14:if(l=e.sent,h="apiPostOrderOrdersPlace",u.account_id=l,u.method="place",u.type=i+"-"+r,"limit"!==r){e.next=24;break}u.amount=this.amountToPrecision(t,a),u.price=this.priceToPrecision(t,s),e.next=42;break;case 24:if("market"!==r){e.next=42;break}if("buy"!==i){e.next=41;break}if(f=this.safeFloat(o,"amount"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=37;break}if(void 0===s){e.next=33;break}void 0===f&&(f=a*s),e.next=35;break;case 33:if(void 0!==f){e.next=35;break}throw new S(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'amount' extra parameter (the exchange-specific behaviour)");case 35:e.next=38;break;case 37:f=void 0===f?a:f;case 38:u.amount=this.costToPrecision(t,f),e.next=42;break;case 41:"sell"===i&&(u.amount=this.amountToPrecision(t,a));case 42:e.next=54;break;case 44:if(!c.swap){e.next=54;break}if(u.order_type="0",u.client_oid=d,void 0!==(p=this.safeString(o,"type"))){e.next=50;break}throw new y(this.id+" createOrder() requires a type parameter, '1' = open long, '2' = open short, '3' = close long, '4' = close short for "+c.type+" orders");case 50:u.size=this.amountToPrecision(t,a),u.type=p,"limit"===r?(u.match_price="0",u.price=this.priceToPrecision(t,s)):"market"===r&&(u.match_price="1"),h="swapPostOrderPlaceOrder";case 54:return e.next=56,this[h](this.extend(u,o));case 56:return v=e.sent,e.abrupt("return",this.parseOrder(v,c));case 58:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:if(a=void 0,s=void 0,void 0!==r){e.next=14;break}if(o=this.safeString2(this.options,"cancelOrder","defaultType"),"spot"!==this.safeString(i,"type",o)){e.next=12;break}if(void 0!==r){e.next=12;break}throw new y(this.id+" cancelOrder() requires a symbol argument for spot orders");case 12:e.next=16;break;case 14:a=this.market(r),s=a.type;case 16:return c=this.omit(i,"type"),u=void 0,d={},"spot"===s?(u="apiPostOrderOrdersOrderIdSubmitcancel",d.order_id=t,d.method="submitcancel"):"swap"===s&&(u="swapPostOrderCancelOrder",d.orderId=t,d.symbol=a.id),e.next=22,this[u](this.extend(d,c));case 22:return h=e.sent,e.abrupt("return",this.parseOrder(h,a));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" cancelOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),void 0!==(s=this.safeString(i,"type",a.type))){e.next=10;break}throw new y(this.id+" cancelOrders() requires a type parameter (one of 'spot', 'swap').");case 10:return i=this.omit(i,"type"),o={},c=void 0,"spot"===s?(c="apiPostOrderOrdersBatchcancel",o.method="batchcancel",u=this.json(t),d=u.split('"'),o.order_ids=d.join("")):"swap"===s&&(c="swapPostOrderCancelBatchOrders",o.symbol=a.id,o.ids=t),e.next=16,this[c](this.extend(o,i));case 16:return h=e.sent,e.abrupt("return",h);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if(a=this.market(r),void 0!==(s=this.safeString(i,"type",a.type))){e.next=10;break}throw new y(this.id+" fetchOrder() requires a type parameter (one of 'spot', 'swap').");case 10:return o=void 0,c={},"spot"===s?(void 0!==(u=this.safeString(i,"client_oid"))?(o="apiPostOrderOrdersClientOid",c.client_oid=u):(o="apiPostOrderOrdersOrderId",c.order_id=t),c.method="getOrder"):"swap"===s&&(o="swapGetOrderDetail",c.symbol=a.id,c.orderId=t),d=this.omit(i,"type"),e.next=16,this[o](this.extend(c,d));case 16:return h=e.sent,l=this.safeValue(h,"data",h),e.abrupt("return",this.parseOrder(l,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:void 0,i=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(t),s=this.safeString(i,"type",a.type),o={symbol:a.id},c=void 0,"spot"===s?(c="apiGetOrderOrdersOpenOrders",o.method="openOrders",void 0===r&&(o.size=r)):"swap"===s&&(c="swapGetOrderOrders",o.status="3",o.from="1",o.to="1",void 0===r&&(o.limit=100)),u=this.omit(i,"type"),e.next=16,this[c](this.extend(o,u));case 16:return d=e.sent,h=d,Array.isArray(d)||(h=this.safeValue(d,"data",[])),e.abrupt("return",this.parseOrders(h,a,void 0,r));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeString(a,"type",s.type),c={symbol:s.id},u=void 0,"spot"===o?(u="apiGetOrderOrdersHistory",void 0!==r&&(c.start_time=r),c.method="openOrders",void 0===i&&(c.size=i)):"swap"===o&&(u="swapGetOrderOrders",c.status="2",c.from="1",c.to="1",void 0===i&&(c.limit=100)),d=this.omit(a,"type"),e.next=16,this[u](this.extend(c,d));case 16:return h=e.sent,l=h,Array.isArray(h)||(l=this.safeValue(h,"data",[])),e.abrupt("return",this.parseOrders(l,s,void 0,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id,method:"deposit_withdraw",type:"deposit",size:12},e.next=12,this.apiGetOrderDepositWithdraw(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,s,r,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id,method:"deposit_withdraw",type:"withdraw",size:12},e.next=12,this.apiGetOrderDepositWithdraw(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,s,r,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({WaitForOperation:"pending",OperationLock:"pending",OperationSuccess:"ok",Cancel:"canceled",Sure:"ok",Fail:"failed",WaitForChainSure:"ok",WAIT_0:"pending",WAIT_1:"pending",DATA_CHANGE:"pending",SUCCESS:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.safeString(e,"address"),i=this.safeString(e,"address_tag"),n=void 0,a=i,s=void 0,o=r,c=this.safeString(e,"type");"withdraw"===c?c="withdrawal":"deposit"===c&&(c="deposit");var u=this.safeString(e,"currency"),d=this.safeCurrencyCode(u),h=this.safeFloat(e,"amount"),l=this.parseTransactionStatus(this.safeString(e,"state")),f=this.safeString(e,"tx_hash"),p=this.safeInteger(e,"created_at"),v=this.safeInteger(e,"updated_at"),m=this.safeFloat(e,"fee"),y=void 0;return void 0!==m&&(y={currency:d,cost:m}),{info:e,id:t,currency:d,amount:h,addressFrom:s,addressTo:o,address:r,tagFrom:n,tagTo:a,tag:i,status:l,type:c,updated:v,txid:f,timestamp:p,datetime:this.iso8601(p),fee:y}}},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:if(s=this.market(t),o=this.safeString(a,"type",s.type),c=this.omit(a,"type"),"swap"!==o){e.next=13;break}throw new y(this.id+" fetchMyTrades() is not supported for "+o+" type");case 13:return u={symbol:s.id,method:"matchresults"},void 0!==r&&(u.start_date=this.ymd(r),d=this.sum(r,1728e5),u.end_date=this.ymd(d)),void 0!==i&&(u.size=i),e.next=18,this.apiPostOrderMatchresults(this.extend(u,c));case 18:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseTrades(l,s,r,i));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new y(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c=this.safeString(s,"type",o.type),s=this.omit(s,"type"),u=void 0,d={},"spot"===c?(d.order_id=t,d.method="matchresults",u="apiPostOrderOrdersOrderIdMatchresults"):"swap"===c&&(d.orderId=t,d.symbol=o.id,u="swapGetOrderFills"),e.next=16,this[u](this.extend(d,s));case 16:return h=e.sent,l=h,Array.isArray(l)||(l=this.safeValue(h,"data",[])),e.next=21,this.parseTrades(l,o,i,a);case 21:return e.abrupt("return",e.sent);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPosition",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.swapGetPositionSinglePosition(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.swapGetPositionAllPosition(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i);s="capi"===t||"swap"===t?"/api/swap/"+this.version+s:"/"+t+"/v1"+s;var o=this.omit(i,this.extractParams(e)),c=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s;if("data"===t||"capi"===t)Object.keys(o).length&&(c+="?"+this.urlencode(o));else if("swap"===t){this.checkRequiredCredentials();var u=this.milliseconds().toString(),d=u+r+s;if("POST"===r)d+=a=this.json(i);else if(Object.keys(i).length){var h=this.urlencode(this.keysort(i));c+="?"+h,d+="?"+h}var l=this.hmac(this.encode(d),this.encode(this.secret),"sha256","base64");n={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":l,"ACCESS-TIMESTAMP":u,"ACCESS-PASSPHRASE":this.password},"POST"===r&&(n["Content-Type"]="application/json")}else if("api"===t){var f=this.milliseconds().toString(),p="";o=this.keysort(o),p=this.rawencode(o);var v=this.hash(this.encode(this.secret),"sha1"),m=p,y=this.hmac(this.encode(p),this.encode(v),"md5");p.length>0&&(m+="&"),m+="sign="+y+"&req_time="+f+"&accesskey="+this.apiKey,"GET"===r?Object.keys(o).length&&(c+="?"+m):"POST"===r&&(c+="?sign="+y+"&req_time="+f+"&accesskey="+this.apiKey,a=p,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(s){var u=this.safeString(s,"err_msg"),d=this.safeString2(s,"code","err_code"),h=this.id+" "+a,l=void 0!==u&&""!==u;l&&(this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwBroadlyMatchedException(this.exceptions.broad,u,h));var f=void 0!==d&&"00000"!==d;if(f&&this.throwExactlyMatchedException(this.exceptions.exact,d,h),f||l)throw new p(h)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ExchangeNotAvailable,v=l.AuthenticationError,m=l.BadRequest,y=l.PermissionDenied,g=l.InvalidAddress,b=l.ArgumentsRequired,k=l.InvalidOrder,x=r(13),w=x.DECIMAL_PLACES,_=x.SIGNIFICANT_DIGITS,O=x.TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bithumb",name:"Bithumb",countries:["KR"],rateLimit:500,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30597177-ea800172-9d5e-11e7-804c-b9d4fa9b56b0.jpg",api:{public:"https://api.bithumb.com/public",private:"https://api.bithumb.com"},www:"https://www.bithumb.com",doc:"https://apidocs.bithumb.com",fees:"https://en.bithumb.com/customer_support/info_fee"},api:{public:{get:["ticker/{currency}","ticker/all","ticker/ALL_BTC","ticker/ALL_KRW","orderbook/{currency}","orderbook/all","transaction_history/{currency}","transaction_history/all","candlestick/{currency}/{interval}"]},private:{post:["info/account","info/balance","info/wallet_address","info/ticker","info/orders","info/user_transactions","info/order_detail","trade/place","trade/cancel","trade/btc_withdrawal","trade/krw_deposit","trade/krw_withdrawal","trade/market_buy","trade/market_sell"]}},fees:{trading:{maker:.0025,taker:.0025}},precisionMode:_,exceptions:{"Bad Request(SSL)":m,"Bad Request(Bad Method)":m,"Bad Request.(Auth Data)":v,"Not Member":v,"Invalid Apikey":v,"Method Not Allowed.(Access IP)":y,"Method Not Allowed.(BTC Adress)":g,"Method Not Allowed.(Access)":y,"Database Fail":p,"Invalid Parameter":m,5600:f,"Unknown Error":f,"After May 23th, recent_transactions is no longer, hence users will not be able to connect to recent_transactions":f},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"24h"},options:{quoteCurrencies:{BTC:{precision:{price:8}},KRW:{}}}})}},{key:"amountToPrecision",value:function(e,t){return this.decimalToPrecision(t,O,this.markets[e].precision.amount,w)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=k.length>0&&void 0!==k[0]?k[0]:{},r=[],n=this.safeValue(this.options,"quoteCurrencies",{}),a=Object.keys(n),s=0;case 5:if(!(s<a.length)){e.next=32;break}return o=a[s],c=this.safeValue(n,o,{}),u="publicGetTickerALL"+o,e.next=11,this[u](t);case 11:d=e.sent,h=this.safeValue(d,"data"),l=Object.keys(h),f=0;case 15:if(!(f<l.length)){e.next=29;break}if("date"!==(p=l[f])){e.next=19;break}return e.abrupt("continue",26);case 19:v=h[p],m=this.safeCurrencyCode(p),y=p+"/"+o,g=!0,Array.isArray(v)&&0===v.length&&(g=!1),b=this.deepExtend({id:p,symbol:y,base:m,quote:o,info:v,active:g,precision:{amount:4,price:4},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:500,max:5e9}},baseId:void 0,quoteId:void 0},c),r.push(b);case 26:f++,e.next=15;break;case 29:s++,e.next=5;break;case 32:return e.abrupt("return",r);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return r={currency:"ALL"},e.next=6,this.privatePostInfoBalance(this.extend(r,t));case 6:for(n=e.sent,a={info:n},s=this.safeValue(n,"data"),o=Object.keys(this.currencies),c=0;c<o.length;c++)u=o[c],d=this.account(),h=this.currency(u),l=this.safeStringLower(h,"id"),d.total=this.safeFloat(s,"total_"+l),d.used=this.safeFloat(s,"in_use_"+l),d.free=this.safeFloat(s,"available_"+l),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={currency:a.base},void 0!==r&&(s.count=r),e.next=9,this.publicGetOrderbookCurrency(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeInteger(c,"timestamp"),e.abrupt("return",this.parseOrderBook(c,u,"bids","asks","price","quantity"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"opening_price"),a=this.safeFloat(e,"closing_price"),s=void 0,o=void 0,c=void 0;void 0!==a&&void 0!==n&&(s=a-n,n>0&&(o=s/n*100),c=this.sum(n,a)/2);var u=this.safeFloat(e,"units_traded_24H"),d=this.safeFloat(e,"acc_trade_value_24H"),h=this.vwap(u,d);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:h,open:n,close:a,last:a,previousClose:void 0,change:s,percentage:o,average:c,baseVolume:u,quoteVolume:d,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickerAll(r);case 6:for(n=e.sent,a={},s=this.safeValue(n,"data",{}),o=this.safeInteger(s,"date"),c=this.omit(s,"date"),u=Object.keys(c),d=0;d<u.length;d++)h=u[d],l=h,f=void 0,h in this.markets_by_id&&(f=this.markets_by_id[h],l=f.symbol),p=c[h],Array.isArray(p)||(p.date=o,a[l]=this.parseTicker(p,f));return e.abrupt("return",this.filterByArray(a,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.base},e.next=7,this.publicGetTickerCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={currency:o.base,interval:this.timeframes[r]},e.next=10,this.publicGetCandlestickCurrencyInterval(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"transaction_date");if(void 0!==i){var n=i.split(" "),a=n.length;if(a>1){var s=n[0],o=n[1];o.length<8&&(o="0"+o),r=this.parse8601(s+" "+o)}else r=this.safeIntegerProduct(e,"transaction_date",.001)}void 0!==r&&(r-=324e5);var c=void 0,u=this.safeString(e,"type");u="ask"===u?"sell":"buy";var d=this.safeString(e,"cont_no"),h=void 0;void 0!==t&&(h=t.symbol);var l=this.safeFloat(e,"price"),f=this.safeFloat2(e,"units_traded","units"),p=this.safeFloat(e,"total");void 0===p&&void 0!==f&&void 0!==l&&(p=l*f);var v=void 0,m=this.safeFloat(e,"fee");if(void 0!==m){var y=this.safeString(e,"fee_currency"),g=this.commonCurrencyCode(y);v={cost:m,currency:g}}return{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,order:void 0,type:c,side:u,takerOrMaker:void 0,price:l,amount:f,cost:p,fee:v}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.base},void 0===n&&(o.count=n),e.next=10,this.publicGetTransactionHistoryCurrency(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={order_currency:c.id,payment_currency:c.quote,units:a},d="privatePostTradePlace","limit"===r?(u.price=s,u.type="buy"===n?"bid":"ask"):d="privatePostTradeMarket"+this.capitalize(n),e.next=10,this[d](this.extend(u,o));case 10:if(h=e.sent,void 0!==(l=this.safeString(h,"order_id"))){e.next=14;break}throw new k(this.id+" createOrder() did not return an order id");case 14:return e.abrupt("return",{info:h,symbol:t,type:r,side:n,id:l});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={order_id:t,count:1,order_currency:a.base,payment_currency:a.quote},e.next=10,this.privatePostInfoOrderDetail(this.extend(s,n));case 10:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(this.extend(c,{order_id:t}),a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Pending:"open",Completed:"closed",Cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeIntegerProduct(e,"order_date",.001),i=this.safeValue2(e,"type","side"),n="bid"===i?"buy":"sell",a=this.parseOrderStatus(this.safeString(e,"order_status")),s=this.safeFloat2(e,"order_price","price"),o="limit";0===s&&(s=void 0,o="market");var c=this.safeFloat2(e,"order_qty","units"),u=this.safeFloat(e,"units_remaining");void 0===u&&("closed"===a?u=0:"canceled"!==a&&(u=c));var d=void 0,h=this.safeString(e,"order_currency"),l=this.safeString(e,"payment_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l);void 0!==f&&void 0!==p&&(d=f+"/"+p),void 0===d&&void 0!==t&&(d=t.symbol);var v=void 0,m=void 0,y=void 0,g=this.safeString(e,"order_id"),b=this.safeValue(e,"contract"),k=void 0,x=void 0,w=void 0,_=void 0;if(void 0!==b){k=this.parseTrades(b,t,void 0,void 0,{side:n,symbol:d,order:g}),v=0,_={};for(var O=0;O<k.length;O++){var T=k[O];v=this.sum(v,T.amount),m=this.sum(m,T.cost);var S=T.fee,C=S.currency;_[C]=C in _?{currency:C,cost:this.sum(_[C].cost,S.cost)}:{currency:C,cost:S.cost}}var I=Object.keys(_),M=I.length;if(M>1){w=[];for(var E=0;E<I.length;E++){var A=I[E];w.push(_[A])}}else x=this.safeValue(_,I[0]);0!==v&&(y=m/v)}void 0!==c&&(void 0===v&&void 0!==u&&(v=Math.max(0,c-u)),void 0===u&&void 0!==v&&(u=Math.max(0,c-v)));var F={info:e,id:g,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:d,type:o,timeInForce:void 0,postOnly:void 0,side:n,price:s,stopPrice:void 0,amount:c,cost:m,average:y,filled:v,remaining:u,status:a,fee:void 0,trades:k};return void 0!==x?F.fee=x:void 0!==w&&(F.fees=w),F}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),void 0===n&&(n=100),o={count:n,order_currency:s.base,payment_currency:s.quote},void 0!==r&&(o.after=r),e.next=14,this.privatePostInfoOrders(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},"side"in n){e.next=5;break}throw new b(this.id+" cancelOrder() requires a `symbol` argument and a `side` parameter (sell or buy)");case 5:if(void 0!==r){e.next=7;break}throw new b(this.id+" cancelOrder() requires a `symbol` argument and a `side` parameter (sell or buy)");case 7:return a=this.market(r),s="buy"===n.side?"bid":"ask",n=this.omit(n,["side","currency"]),o={order_id:t,type:s,order_currency:a.base,payment_currency:a.quote},e.next=13,this.privatePostTradeCancel(this.extend(o,n));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelUnifiedOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={side:e.side};return this.cancelOrder(e.id,e.symbol,this.extend(r,t))}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={units:r,address:n,currency:o.id},"XRP"!==o&&"XMR"!==o&&"EOS"!==o&&"STEEM"!==o){e.next=14;break}if(u=this.safeString(s,"destination"),void 0!==a||void 0!==u){e.next=13;break}throw new b(this.id+" "+t+" withdraw() requires a tag argument or an extra destination param");case 13:void 0!==a&&(c.destination=a);case 14:return e.next=16,this.privatePostTradeBtcWithdrawal(this.extend(c,s));case 16:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.urls.api[t]+s,c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials(),a=this.urlencode(this.extend({endpoint:s},c));var u=this.nonce().toString(),d=s+"\0"+a+"\0"+u,h=this.hmac(this.encode(d),this.encode(this.secret),"sha512"),l=this.decode(this.stringToBase64(h));n={Accept:"application/json","Content-Type":"application/x-www-form-urlencoded","Api-Key":this.apiKey,"Api-Sign":l,"Api-Nonce":u}}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"status"in s){var u=this.safeString(s,"status"),d=this.safeString(s,"message");if(void 0!==u){if("0000"===u)return;var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,h),this.throwExactlyMatchedException(this.exceptions,d,h),new f(h)}}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("status"in(c=e.sent))){e.next=12;break}if("0000"!==c.status){e.next=11;break}return e.abrupt("return",c);case 11:throw new f(this.id+" "+this.json(c));case 12:return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(134);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bitkk",name:"bitkk",comment:"a Chinese ZB clone",urls:{api:{public:"http://api.bitkk.com/data",private:"https://trade.bitkk.com/api"},www:"https://www.bitkk.com",doc:"https://www.bitkk.com/i/developer",fees:"https://www.bitkk.com/i/rate"},commonCurrencies:{BCH:"BCHOLD"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeNotAvailable,v=l.AccountSuspended,m=l.PermissionDenied,y=l.RateLimitExceeded,g=l.InvalidNonce,b=l.InvalidAddress,k=l.ArgumentsRequired,x=l.ExchangeError,w=l.InvalidOrder,_=l.InsufficientFunds,O=l.BadRequest,T=l.OrderNotFound,S=l.BadSymbol,C=l.NotSupported,I=r(13),M=I.ROUND,E=I.TICK_SIZE,A=I.TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitmart",name:"BitMart",countries:["US","CN","HK","KR"],rateLimit:1e3,version:"v1",has:{cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchStatus:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},hostname:"bitmart.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/61835713-a2662f80-ae85-11e9-9d00-6442919701fd.jpg",api:"https://api-cloud.{hostname}",www:"https://www.bitmart.com/",doc:"https://developer-pro.bitmart.com/",referral:"http://www.bitmart.com/?r=rQCFLh",fees:"https://www.bitmart.com/fee/en"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{system:{get:["time","service"]},account:{get:["currencies"]},spot:{get:["currencies","symbols","symbols/details","ticker","steps","symbols/kline","symbols/book","symbols/trades"]},contract:{get:["contracts","pnls","indexes","tickers","quote","indexquote","trades","depth","fundingrate"]}},private:{account:{get:["wallet","deposit/address","withdraw/charge","deposit-withdraw/history","deposit-withdraw/detail"],post:["withdraw/apply"]},spot:{get:["wallet","order_detail","orders","trades"],post:["submit_order","cancel_order","cancel_orders"]},contract:{get:["userOrders","userOrderInfo","userTrades","orderTrades","accounts","userPositions","userLiqRecords","positionFee"],post:["batchOrders","submitOrder","cancelOrders","marginOper"]}}},timeframes:{"1m":1,"3m":3,"5m":5,"15m":15,"30m":30,"45m":45,"1h":60,"2h":120,"3h":180,"4h":240,"1d":1440,"1w":10080,"1M":43200},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.0025,tiers:{taker:[[0,.002],[10,.0018],[50,.0016],[250,.14/100],[1e3,.0012],[5e3,.001],[25e3,8e-4],[5e4,6e-4]],maker:[[0,.001],[10,9e-4],[50,8e-4],[250,.07/100],[1e3,6e-4],[5e3,5e-4],[25e3,4e-4],[5e4,3e-4]]}}},precisionMode:E,exceptions:{exact:{3e4:x,30001:f,30002:f,30003:v,30004:f,30005:f,30006:f,30007:f,30008:f,30010:m,30011:f,30012:f,30013:y,30014:p,6e4:O,60001:O,60002:O,60003:x,60004:x,60005:x,60006:x,60007:b,60008:_,60009:x,60010:x,60011:b,60012:x,60020:m,60021:m,60022:m,60030:O,60031:O,60050:x,60051:x,5e4:O,50001:S,50002:O,50003:O,50004:O,50005:T,50006:w,50007:w,50008:w,50009:w,50010:w,50011:w,50012:w,50013:w,50014:O,50015:O,50016:O,50017:O,50018:O,50019:O,50020:_,50021:O,50022:p,50023:S,53e3:v,57001:O,58001:O,59001:x,59002:x,40001:x,40002:x,40003:x,40004:x,40005:x,40006:m,40007:O,40008:g,40009:O,40010:O,40011:O,40012:x,40013:x,40014:S,40015:S,40016:w,40017:w,40018:w,40019:x,40020:w,40021:x,40022:x,40023:x,40024:x,40025:x,40026:x,40027:_,40028:m,40029:w,40030:w,40031:w,40032:w,40033:w,40034:S},broad:{}},commonCurrencies:{COT:"Community Coin",CPC:"CPCoin",ONE:"Menlo One",PLA:"Plair"},options:{defaultType:"spot",fetchBalance:{type:"spot"},createMarketBuyOrderRequiresPrice:!0}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicSystemGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),e.abrupt("return",this.safeInteger(n,"server_time"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},r=this.safeValue(this.options,"fetchBalance",{}),n=this.safeString(this.options,"defaultType"),a=this.safeString(r,"type",n),a=this.safeString(t,"type",a),t=this.omit(t,"type"),e.next=8,this.publicSystemGetService(t);case 8:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeValue(o,"service",[]),u=this.indexBy(c,"service_type"),"swap"!==a&&"future"!==a||(a="contract"),d=this.safeValue(u,a),h=void 0,l=void 0,void 0!==d&&(2===this.safeInteger(d,"status")?h="ok":(h="maintenance",l=this.safeInteger(d,"end_time"))),this.status=this.extend(this.status,{status:h,updated:this.milliseconds(),eta:l}),e.abrupt("return",this.status);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchSpotMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicSpotGetSymbolsDetails(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"symbols",[]),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"symbol"),d=this.safeInteger(c,"symbol_id"),h=this.safeString(c,"base_currency"),l=this.safeString(c,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m=this.safeInteger(c,"price_max_precision"),y={amount:this.safeFloat(c,"base_min_size"),price:parseFloat(this.decimalToPrecision(Math.pow(10,-m),M,10))},g=this.safeFloat(c,"min_buy_amount"),b=this.safeFloat(c,"min_sell_amount"),k=Math.max(g,b),x={amount:{min:this.safeFloat(c,"base_min_size"),max:this.safeFloat(c,"base_max_size")},price:{min:void 0,max:void 0},cost:{min:k,max:void 0}},s.push({id:u,numericId:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,type:"spot",spot:!0,future:!1,swap:!1,precision:y,limits:x,info:c,active:void 0});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchContractMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:{},e.next=3,this.publicContractGetContracts(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"contracts",[]),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeValue(c,"contract",{}),d=this.safeString(u,"contract_id"),h=this.safeInteger(u,"contract_id"),l=this.safeString(u,"base_coin"),f=this.safeString(u,"quote_coin"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=this.safeString(u,"name"),y=this.safeFloat(u,"vol_unit"),g=this.safeFloat(u,"price_unit"),b={amount:y,price:g},k={amount:{min:this.safeFloat(u,"min_vol"),max:this.safeFloat(u,"max_vol")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},x=this.safeValue(u,"contract_type"),w=!1,_=!1,O="contract",1===x?(O="swap",_=!0):2===x&&(O="future",w=!0),T=this.safeValue(c,"fee_config",{}),S=this.safeFloat(T,"maker_fee"),C=this.safeFloat(T,"taker_fee"),s.push({id:d,numericId:h,symbol:m,base:p,quote:v,baseId:l,quoteId:f,maker:S,taker:C,type:O,spot:!1,future:w,swap:_,precision:b,limits:k,info:c,active:void 0});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchSpotMarkets();case 3:return t=e.sent,e.next=6,this.fetchContractMarkets();case 6:return r=e.sent,n=this.arrayConcat(t,r),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp",this.milliseconds()),i=this.safeString2(e,"symbol","contract_id"),n=this.safeSymbol(i,t,"_"),a=this.safeFloat2(e,"close_24h","last_price"),s=this.safeFloat(e,"fluctuation","rise_fall_rate");void 0!==s&&(s*=100);var o=this.safeFloat2(e,"base_volume_24h","base_coin_volume"),c=this.safeFloat2(e,"quote_volume_24h","quote_coin_volume"),u=this.vwap(o,c),d=this.safeFloat2(e,"open_24h","open"),h=void 0;void 0!==a&&void 0!==d&&(h=this.sum(a,d)/2),h=this.safeFloat(e,"avg_price",h);var l=this.safeValue(e,"depth_price",e);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat2(e,"high","high_24h"),low:this.safeFloat2(e,"low","low_24h"),bid:this.safeFloat(l,"best_bid","bid_price"),bidVolume:this.safeFloat(e,"best_bid_size"),ask:this.safeFloat(l,"best_ask","ask_price"),askVolume:this.safeFloat(e,"best_ask_size"),vwap:u,open:this.safeFloat(e,"open_24h"),close:a,last:a,previousClose:void 0,change:void 0,percentage:s,average:h,baseVolume:o,quoteVolume:c,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={},s=void 0,n.swap||n.future?(s="publicContractGetTickers",a.contractID=n.id):n.spot&&(s="publicSpotGetTicker",a.symbol=n.id),e.next=9,this[s](this.extend(a,r));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"tickers",[]),d=this.indexBy(u,"symbol"),h=this.safeValue(d,n.id),e.abrupt("return",this.parseTicker(h,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString(this.options,"defaultType","spot"),a=this.safeString(r,"type",n),r=this.omit(r,"type"),s=void 0,"swap"===a||"future"===a?s="publicContractGetTickers":"spot"===a&&(s="publicSpotGetTicker"),e.next=11,this[s](r);case 11:for(o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"tickers",[]),d={},h=0;h<u.length;h++)l=this.parseTicker(u[h]),f=l.symbol,d[f]=l;return e.abrupt("return",this.filterByArray(d,"symbol",t));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicAccountGetCurrencies(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"currencies",[]),s={},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"currency"),d=this.safeCurrencyCode(u),h=this.safeString(c,"name"),l=this.safeValue(c,"withdraw_enabled"),f=this.safeValue(c,"deposit_enabled"),p=l&&f,s[d]={id:u,code:d,name:h,info:c,active:p,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={},o=void 0,a.spot?(o="publicSpotGetSymbolsBook",s.symbol=a.id):(a.swap||a.future)&&(o="publicContractGetDepth",s.contractID=a.id,void 0!==r&&(s.count=r)),e.next=10,this[o](this.extend(s,n));case 10:if(c=e.sent,u=this.safeValue(c,"data",{}),!a.spot){e.next=16;break}return e.abrupt("return",this.parseOrderBook(u,void 0,"buys","sells","price","amount"));case 16:if(!a.swap&&!a.future){e.next=18;break}return e.abrupt("return",this.parseOrderBook(u,void 0,"buys","sells","price","vol"));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"trade_id","detail_id"),i=this.safeInteger2(e,"order_time","create_time");void 0===i&&(i=this.parse8601(this.safeString(e,"created_at")));var n=void 0,a=this.safeInteger(e,"way"),s=this.safeStringLower2(e,"type","side");void 0===s&&void 0!==a&&(s=a<5?"buy":"sell");var o=void 0,c=this.safeString(e,"exec_type");void 0!==c&&(o="M"===c?"maker":"taker");var u=this.safeFloat2(e,"price","deal_price");u=this.safeFloat(e,"price_avg",u);var d=this.safeFloat2(e,"amount","deal_vol");d=this.safeFloat(e,"size",d);var h=this.safeFloat2(e,"count","notional");void 0===h&&void 0!==u&&void 0!==d&&(h=d*u);var l=this.safeInteger(e,"order_id"),f=this.safeString2(e,"contract_id","symbol"),p=this.safeSymbol(f,t,"_"),v=this.safeFloat(e,"fees"),m=void 0;if(void 0!==v){var y=this.safeString(e,"fee_coin_name"),g=this.safeCurrencyCode(y);void 0===g&&void 0!==t&&(g="buy"===s?t.base:t.quote),m={cost:v,currency:g}}return{info:e,id:r,order:l,timestamp:i,datetime:this.iso8601(i),symbol:p,type:n,side:s,price:u,amount:d,cost:h,takerOrMaker:o,fee:m}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},c=void 0,s.spot?(o.symbol=s.id,c="publicSpotGetSymbolsTrades"):(s.swap||s.future)&&(c="publicContractGetTrades",o.contractID=s.id),e.next=11,this[c](this.extend(o,a));case 11:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=T.length>1&&void 0!==T[1]?T[1]:"1m",n=T.length>2&&void 0!==T[2]?T[2]:void 0,a=T.length>3&&void 0!==T[3]?T[3]:void 0,s=T.length>4&&void 0!==T[4]?T[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=o.type,u=void 0,d={},h=this.parseTimeframe(r),"spot"===c?(u="publicSpotGetSymbolsKline",d.symbol=o.id,d.step=this.timeframes[r],l=500,void 0===a&&(a=l),a=Math.min(l,a),void 0===n?(f=parseInt(this.milliseconds()/1e3),p=f-a*h,d.from=p,d.to=f):(v=parseInt(n/1e3),m=this.sum(v,a*h),d.from=v,d.to=m)):"swap"!==c&&"future"!==c||(u="publicContractGetQuote",d.contractID=o.id,y=500,void 0===a&&(a=y),void 0===n?(g=parseInt(this.milliseconds()/1e3),b=g-a*h,d.startTime=b,d.endTime=g):(k=parseInt(n/1e3),x=this.sum(k,a*h),d.startTime=k,d.endTime=x),d.unit=this.timeframes[r],d.resolution="M"),e.next=14,this[u](this.extend(d,s));case 14:if(w=e.sent,_=this.safeValue(w,"data",{}),!Array.isArray(_)){e.next=20;break}return e.abrupt("return",this.parseOHLCVs(_,o,r,n,a));case 20:return O=this.safeValue(_,"klines",[]),e.abrupt("return",this.parseOHLCVs(O,o,r,n,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new k(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=void 0,c={},s.spot?(c.symbol=s.id,c.offset=1,void 0===n&&(n=100),c.limit=n,o="privateSpotGetTrades"):(s.swap||s.future)&&(c.contractID=s.id,void 0!==n&&(c.size=n),o="privateContractGetUserTrades"),e.next=14,this[o](this.extend(c,a));case 14:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new k(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c=void 0,u={},o.spot?(u.symbol=o.id,u.order_id=t,c="privateSpotGetTrades"):(o.swap||o.future)&&(u.contractID=o.id,u.orderID=t,c="privateContractGetOrderTrades"),e.next=14,this[c](this.extend(u,s));case 14:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"trades",[]),e.abrupt("return",this.parseTrades(l,o,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r=void 0,n=this.safeValue(this.options,"fetchBalance",{}),a=this.safeString(this.options,"defaultType","spot"),s=this.safeString(n,"type",a),s=this.safeString(t,"type",s),t=this.omit(t,"type"),"spot"===s?r="privateSpotGetWallet":"account"===s?r="privateAccountGetWallet":"swap"!==s&&"future"!==s&&"contract"!==s||(r="privateContractGetAccounts"),e.next=12,this[r](t);case 12:for(o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue2(c,"wallet","accounts",[]),d={info:o},h=0;h<u.length;h++)l=u[h],f=this.safeString2(l,"id","currency"),f=this.safeString(l,"coind_code",f),p=this.safeCurrencyCode(f),(v=this.account()).free=this.safeFloat2(l,"available","available_vol"),v.used=this.safeFloat2(l,"frozen","freeze_vol"),d[p]=v;return e.abrupt("return",this.parseBalance(d));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"string"===typeof e&&(r=e,e={}),r=this.safeString(e,"order_id",r);var i=this.parse8601(this.safeString(e,"created_at"));i=this.safeInteger(e,"create_time",i);var n=this.safeString2(e,"symbol","contract_id"),a=this.safeSymbol(n,t,"_"),s=void 0;void 0!==t&&(s=this.parseOrderStatusByType(t.type,this.safeString(e,"status")));var o=this.safeFloat(e,"price"),c=this.safeFloat2(e,"price_avg","done_avg_price"),u=this.safeFloat2(e,"size","vol"),d=this.safeFloat2(e,"filled_size","done_vol"),h=this.safeString(e,"side");h=this.safeString(e,"way",h);var l=this.safeInteger(e,"category"),f=this.safeString(e,"type");return 1===l?f="limit":2===l&&(f="market"),"market"===f&&(0===o&&(o=void 0),0===c&&(c=void 0)),this.safeOrder({id:r,clientOrderId:void 0,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:a,type:f,timeInForce:void 0,postOnly:void 0,side:h,price:o,stopPrice:void 0,amount:u,cost:void 0,average:c,filled:d,remaining:void 0,status:s,fee:void 0,trades:void 0})}},{key:"parseOrderStatusByType",value:function(e,t){var r=this.safeValue({spot:{1:"failed",2:"open",3:"failed",4:"open",5:"open",6:"closed",7:"canceling",8:"canceled"},swap:{1:"open",2:"open",4:"closed"}},e,{});return this.safeString(r,t,t)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={},d=void 0,!c.spot){e.next=38;break}if(u.symbol=c.id,u.side=n,u.type=r,d="privateSpotPostSubmitOrder","limit"!==r){e.next=17;break}u.size=this.amountToPrecision(t,a),u.price=this.priceToPrecision(t,s),e.next=36;break;case 17:if("market"!==r){e.next=36;break}if("buy"!==n){e.next=35;break}if(h=this.safeFloat(o,"notional"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=30;break}if(void 0===s){e.next=26;break}void 0===h&&(h=a*s),e.next=28;break;case 26:if(void 0!==h){e.next=28;break}throw new w(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'notional' extra parameter (the exchange-specific behaviour)");case 28:e.next=31;break;case 30:h=void 0===h?a:h;case 31:l=c.precision.price,u.notional=this.decimalToPrecision(h,A,l,this.precisionMode),e.next=36;break;case 35:"sell"===n&&(u.size=this.amountToPrecision(t,a));case 36:e.next=39;break;case 38:(c.swap||c.future)&&(d="privateContractPostSubmitOrder",u.contractID=c.id,"limit"===r?u.category=1:"market"===r&&(u.category=2),u.way=n,u.custom_id=this.nonce(),u.open_type=1,u.leverage=1,u.price=this.priceToPrecision(t,s),u.vol=this.amountToPrecision(t,a));case 39:return e.next=41,this[d](this.extend(u,o));case 41:return f=e.sent,p=this.safeValue(f,"data",{}),e.abrupt("return",this.parseOrder(p,c));case 44:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new k(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={},o=void 0,a.spot?(o="privateSpotPostCancelOrder",s.order_id=parseInt(t),s.symbol=a.id):(a.swap||a.future)&&(o="privateContractPostCancelOrders",s.contractID=a.id,s.orders=[parseInt(t)]),e.next=12,this[o](this.extend(s,n));case 12:if(c=e.sent,!0!==(u=this.safeValue(c,"data"))){e.next=16;break}return e.abrupt("return",this.parseOrder(t,a));case 16:if(void 0===(d=this.safeValue(u,"succeed"))){e.next=23;break}if(void 0!==(t=this.safeString(d,0))){e.next=21;break}throw new w(this.id+" cancelOrder() failed to cancel "+r+" order id "+t);case 21:e.next=26;break;case 23:if(this.safeValue(u,"result")){e.next=26;break}throw new w(this.id+" cancelOrder() "+r+" order id "+t+" is filled or canceled");case 26:return h=this.parseOrder(t,a),e.abrupt("return",this.extend(h,{id:t}));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},void 0!==t){e.next=4;break}throw new k(this.id+" cancelAllOrders() requires a symbol argument");case 4:if(void 0!==(n=this.safeString(r,"side"))){e.next=7;break}throw new k(this.id+" cancelAllOrders() requires a `side` parameter ('buy' or 'sell')");case 7:return e.next=9,this.loadMarkets();case 9:if((a=this.market(t)).spot){e.next=12;break}throw new C(this.id+" cancelAllOrders() does not support "+a.type+" orders, only spot orders are accepted");case 12:return s={symbol:a.id,side:n},e.next=15,this.privateSpotPostCancelOrders(this.extend(s,r));case 15:return o=e.sent,e.abrupt("return",o);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new k(this.id+" canelOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:if((a=this.market(r)).spot){e.next=9;break}throw new C(this.id+" cancelOrders() does not support "+a.type+" orders, only contract orders are accepted");case 9:for(s=[],o=0;o<t.length;o++)s.push(parseInt(t[o]));return c={orders:s},e.next=14,this.privateContractPostCancelOrders(this.extend(c,n));case 14:return u=e.sent,e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new k(this.id+" fetchOrdersByStatus() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={},u=void 0,o.spot?(u="privateSpotGetOrders",c.symbol=o.id,c.offset=1,c.limit=100,c.status="open"===t?9:"closed"===t?6:t):(o.swap||o.future)&&(u="privateContractGetUserOrders",c.contractID=o.id,void 0!==a&&(c.size=a),c.status="open"===t?3:"closed"===t?4:t),e.next=14,this[u](this.extend(c,s));case 14:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"orders",[]),e.abrupt("return",this.parseOrders(l,o,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("open",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("closed",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},void 0!==t){e.next=6;break}throw new k(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:if((s=this.market(t)).swap||s.future){e.next=11;break}throw new C(this.id+" fetchOrders does not support "+s.type+" markets, only contracts are supported");case 11:return e.next=13,this.fetchOrdersByStatus(0,t,r,n,a);case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new k(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={},s=this.market(r),o=void 0,"string"!==typeof t&&(t=t.toString()),s.spot?(a.symbol=s.id,a.order_id=t,o="privateSpotGetOrderDetail"):(s.swap||s.future)&&(a.contractID=s.id,a.orderID=t,o="privateContractGetUserOrderInfo"),e.next=13,this[o](this.extend(a,n));case 13:if(c=e.sent,!("orders"in(u=this.safeValue(c,"data")))){e.next=23;break}if(d=this.safeValue(u,"orders",[]),void 0!==(h=this.safeValue(d,0))){e.next=20;break}throw new T(this.id+" fetchOrder() could not find "+r+" order id "+t);case 20:return e.abrupt("return",this.parseOrder(h,s));case 23:return e.abrupt("return",this.parseOrder(u,s));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateAccountGetDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeString(o,"address"),u=this.safeString(o,"address_memo"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,amount:r,destination:"To Digital Address",address:n},void 0!==a&&(c.address_memo=a),e.next=10,this.privateAccountPostWithdrawApply(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data"),h=this.parseTransaction(d,o),e.abrupt("return",this.extend(h,{code:t,address:n,tag:a}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===a&&(a=50),o={operation_type:t,offset:1,limit:a},c=void 0,void 0!==r&&(c=this.currenc(r),o.currency=c.id),e.next=12,this.privateAccountGetDepositWithdrawHistory(this.extend(o,s));case 12:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"records",[]),e.abrupt("return",this.parseTransactions(h,c,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposit",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdraw",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"pending",2:"pending",3:"ok",4:"canceled",5:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"withdraw_id"),n=this.safeString(e,"deposit_id"),a=void 0;void 0!==i&&""!==i?(a="withdraw",r=i):void 0!==n&&""!==n&&(a="deposit",r=n);var s=this.safeFloat(e,"arrival_amount"),o=this.safeInteger(e,"tapply_timeime"),c=this.safeString(e,"currency"),u=this.safeCurrencyCode(c,t),d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeFloat(e,"fee"),l=void 0;void 0!==h&&(l={cost:h,currency:u});var f=this.safeString(e,"tx_id");""===f&&(f=void 0);var p=this.safeString(e,"address"),v=this.safeString(e,"address_memo");return{info:e,id:r,currency:u,amount:s,address:p,addressFrom:void 0,addressTo:void 0,tag:v,tagFrom:void 0,tagTo:void 0,status:d,type:a,updated:void 0,txid:f,timestamp:o,datetime:this.iso8601(o),fee:l}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api,{hostname:this.hostname}),o=this.safeString(t,0),c=this.safeString(t,1),u=s+"/"+c;"system"!==c&&(u+="/"+this.version),"contract"===c&&(u+="/ifcontract"),u+="/"+this.implodeParams(e,i);var d=this.omit(i,this.extractParams(e));if("system"===c)Object.keys(d).length&&(u+="?"+this.urlencode(d));else if("public"===o)Object.keys(d).length&&(u+="?"+this.urlencode(d));else if("private"===o){this.checkRequiredCredentials();var h=this.milliseconds().toString(),l="";n={"X-BM-KEY":this.apiKey,"X-BM-TIMESTAMP":h},"POST"===r||"PUT"===r?(n["Content-Type"]="application/json",l=a=this.json(d)):Object.keys(d).length&&(u+="?"+(l=this.urlencode(d)));var f=h+"#"+this.uid+"#"+l,p=this.hmac(this.encode(f),this.encode(this.secret));n["X-BM-SIGN"]=p}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"message"),d=this.safeString(s,"code");if(void 0!==d&&"1000"!==d||void 0!==u&&"OK"!==u){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwBroadlyMatchedException(this.exceptions.broad,u,h),new x(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(131);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"bitmax",name:"BitMax",urls:{logo:"https://user-images.githubusercontent.com/1294454/66820319-19710880-ef49-11e9-8fbe-16be62a11992.jpg",api:"https://bitmax.io",test:"https://bitmax-test.io",www:"https://bitmax.io",doc:["https://bitmax-exchange.github.io/bitmax-pro-api/#bitmax-pro-api-documentation"],fees:"https://bitmax.io/#/feeRate/tradeRate",referral:"https://bitmax.io/#/register?inviteCode=EL6BXBQM"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(13).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.BadRequest,m=f.DDoSProtection,y=f.ExchangeError,g=f.ExchangeNotAvailable,b=f.InsufficientFunds,k=f.InvalidOrder,x=f.OrderNotFound,w=f.PermissionDenied,_=f.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitmex",name:"BitMEX",countries:["SC"],version:"v1",userAgent:void 0,rateLimit:2e3,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",withdraw:!0},timeframes:{"1m":"1m","5m":"5m","1h":"1h","1d":"1d"},urls:{test:{public:"https://testnet.bitmex.com",private:"https://testnet.bitmex.com"},logo:"https://user-images.githubusercontent.com/1294454/27766319-f653c6e6-5ed4-11e7-933d-f0bc3699ae8f.jpg",api:{public:"https://www.bitmex.com",private:"https://www.bitmex.com"},www:"https://www.bitmex.com",doc:["https://www.bitmex.com/app/apiOverview","https://github.com/BitMEX/api-connectors/tree/master/official-http"],fees:"https://www.bitmex.com/app/fees",referral:"https://www.bitmex.com/register/upZpOX"},api:{public:{get:["announcement","announcement/urgent","funding","instrument","instrument/active","instrument/activeAndIndices","instrument/activeIntervals","instrument/compositeIndex","instrument/indices","insurance","leaderboard","liquidation","orderBook","orderBook/L2","quote","quote/bucketed","schema","schema/websocketHelp","settlement","stats","stats/history","trade","trade/bucketed"]},private:{get:["apiKey","chat","chat/channels","chat/connected","execution","execution/tradeHistory","notification","order","position","user","user/affiliateStatus","user/checkReferralCode","user/commission","user/depositAddress","user/executionHistory","user/margin","user/minWithdrawalFee","user/wallet","user/walletHistory","user/walletSummary"],post:["apiKey","apiKey/disable","apiKey/enable","chat","order","order/bulk","order/cancelAllAfter","order/closePosition","position/isolate","position/leverage","position/riskLimit","position/transferMargin","user/cancelWithdrawal","user/confirmEmail","user/confirmEnableTFA","user/confirmWithdrawal","user/disableTFA","user/logout","user/logoutAll","user/preferences","user/requestEnableTFA","user/requestWithdrawal"],put:["order","order/bulk","user"],delete:["apiKey","order","order/all"]}},exceptions:{exact:{"Invalid API Key.":p,"This key is disabled.":w,"Access Denied":w,"Duplicate clOrdID":k,"orderQty is invalid":k,"Invalid price":k,"Invalid stopPx for ordType":k},broad:{"Signature not valid":p,overloaded:g,"Account has insufficient Available Balance":b,"Service unavailable":g,"Server Error":y,"Unable to cancel order due to existing state":k}},precisionMode:l,options:{"api-expires":5,fetchOHLCVOpenTimestamp:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetInstrumentActiveAndIndices(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o="Unlisted"!==s.state,c=s.symbol,u=s.underlying,d=s.quoteCurrency,h=u+d,l=this.safeCurrencyCode(u),f=this.safeCurrencyCode(d),p=c===h,v=this.safeString2(s,"positionCurrency","quoteCurrency"),m=void 0,y=!1,g=!1,b=this.safeCurrencyCode(v),k=c,p?(m="swap",k=l+"/"+f):c.indexOf("B_")>=0?(g=!0,m="prediction"):(y=!0,m="future"),x={amount:void 0,price:void 0},w=this.safeFloat(s,"lotSize"),_=this.safeFloat(s,"tickSize"),void 0!==w&&(x.amount=w),void 0!==_&&(x.price=_),(O={amount:{min:void 0,max:void 0},price:{min:_,max:this.safeFloat(s,"maxPrice")},cost:{min:void 0,max:void 0}})[b===f?"cost":"amount"]={min:w,max:this.safeFloat(s,"maxOrderQty")},n.push({id:c,symbol:k,base:l,quote:f,baseId:u,quoteId:d,active:o,precision:x,limits:O,taker:this.safeFloat(s,"takerFee"),maker:this.safeFloat(s,"makerFee"),type:m,spot:!1,swap:p,future:y,prediction:g,info:s});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceResponse",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var i=e[r],n=this.safeString(i,"currency"),a=this.safeCurrencyCode(n),s=this.account(),o=this.safeFloat(i,"availableMargin"),c=this.safeFloat(i,"marginBalance");"BTC"===a&&(void 0!==o&&(o/=1e8),void 0!==c&&(c/=1e8)),s.free=o,s.total=c,t[a]=s}return this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.loadMarkets();case 3:return r={currency:"all"},e.next=6,this.privateGetUserMargin(this.extend(r,t));case 6:return n=e.sent,e.abrupt("return",this.parseBalanceResponse(n));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.depth=r),e.next=9,this.publicGetOrderBookL2(this.extend(s,n));case 9:for(o=e.sent,c={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0},u=0;u<o.length;u++)d=o[u],h="Sell"===d.side?"asks":"bids",l=this.safeFloat(d,"size"),void 0!==(f=this.safeFloat(d,"price"))&&c[h].push([f,l]);return c.bids=this.sortBy(c.bids,0,!0),c.asks=this.sortBy(c.asks,0),e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},a={filter:{orderID:t}},e.next=5,this.fetchOrders(r,void 0,void 0,this.deepExtend(a,n));case 5:if(s=e.sent,1!==s.length){e.next=9;break}return e.abrupt("return",s[0]);case 9:throw new x(this.id+": The order "+t+" not found.");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==r&&(o.startTime=this.iso8601(r)),void 0!==n&&(o.count=n),"filter"in(o=this.deepExtend(o,a))&&(o.filter=this.json(o.filter)),e.next=15,this.privateGetOrder(o);case 15:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={filter:{open:!0}},e.next=7,this.fetchOrders(t,r,n,this.deepExtend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,n,a);case 6:return s=e.sent,e.abrupt("return",this.filterBy(s,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==r&&(o.startTime=this.iso8601(r)),void 0!==n&&(o.count=n),"filter"in(o=this.deepExtend(o,a))&&(o.filter=this.json(o.filter)),e.next=15,this.privateGetExecutionTradeHistory(o);case 15:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Withdrawal:"transaction",RealisedPNL:"margin",UnrealisedPNL:"margin",Deposit:"transaction",Transfer:"transfer",AffiliatePayout:"referral"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"transactID"),i=this.safeString(e,"account"),n=this.safeString(e,"tx"),a=void 0,s=this.parseLedgerEntryType(this.safeString(e,"transactType")),o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o,t),u=this.safeFloat(e,"amount");void 0!==u&&(u/=1e8);var d=this.parse8601(this.safeString(e,"transactTime"));void 0===d&&(d=0);var h=this.safeFloat(e,"fee",0);void 0!==h&&(h/=1e8);var l={cost:h,currency:c},f=this.safeFloat(e,"walletBalance");void 0!==f&&(f/=1e8);var p=this.sum(f,-u),v=void 0;u<0?(v="out",u=Math.abs(u)):v="in";var m=this.parseTransactionStatus(this.safeString(e,"transactStatus"));return{id:r,info:e,timestamp:d,datetime:this.iso8601(d),direction:v,account:i,referenceId:n,referenceAccount:a,type:s,currency:c,amount:u,before:p,after:f,status:m,fee:l}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),o={},void 0!==n&&(o.count=n),e.next=12,this.privateGetUserWalletHistory(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseLedger(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.count=n),e.next=10,this.privateGetUserWalletHistory(this.extend(s,a));case 10:return o=e.sent,c=this.filterByArray(o,"transactType",["Withdrawal","Deposit"],!1),u=void 0,void 0!==t&&(u=this.currency(t)),e.abrupt("return",this.parseTransactions(c,u,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Canceled:"canceled",Completed:"ok",Pending:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"transactID"),r=this.parse8601(this.safeString(e,"transactTime")),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeStringLower(e,"transactType"),a=void 0,s=void 0,o=void 0;"withdrawal"===n&&(a=this.safeString(e,"address"),s=this.safeString(e,"tx"),o=a);var c=this.safeInteger(e,"amount");void 0!==c&&(c=Math.abs(c)/1e7);var u=this.safeInteger(e,"fee");void 0!==u&&(u/=1e7);var d={cost:u,currency:"BTC"},h=this.safeString(e,"transactStatus");return void 0!==h&&(h=this.parseTransactionStatus(h)),{info:e,id:t,txid:void 0,timestamp:r,datetime:this.iso8601(r),addressFrom:s,address:a,addressTo:o,tagFrom:void 0,tag:void 0,tagTo:void 0,type:n,amount:c,currency:"BTC",status:h,updated:i,comment:void 0,fee:d}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:if(this.market(t).active){e.next=6;break}throw new y(this.id+": symbol "+t+" is delisted");case 6:return e.next=8,this.fetchTickers([t],r);case 8:if(n=e.sent,void 0!==(a=this.safeValue(n,t))){e.next=12;break}throw new y(this.id+" ticker symbol "+t+" not found");case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetInstrumentActiveAndIndices(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),void 0!==(c=this.safeString(o,"symbol"))&&(a[c]=o);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol");void 0!==(t=this.safeValue(this.markets_by_id,i,t))&&(r=t.symbol);var n=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"prevPrice24h"),s=this.safeFloat(e,"lastPrice"),o=void 0,c=void 0;return void 0!==s&&void 0!==a&&(o=s-a,a>0&&(c=o/a*100)),{symbol:r,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"askPrice"),askVolume:void 0,vwap:this.safeFloat(e,"vwap"),open:a,close:s,last:s,previousClose:void 0,change:o,percentage:c,average:this.sum(a,s)/2,baseVolume:this.safeFloat(e,"homeNotional24h"),quoteVolume:this.safeFloat(e,"foreignNotional24h"),info:e}}},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=m.length>1&&void 0!==m[1]?m[1]:"1m",n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:void 0,s=m.length>4&&void 0!==m[4]?m[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,binSize:this.timeframes[r],partial:!0},void 0!==a&&(c.count=a),u=1e3*this.parseTimeframe(r),d=this.safeValue(this.options,"fetchOHLCVOpenTimestamp",!0),void 0!==n?(h=n,d&&(h=this.sum(h,u)),l=this.ymdhms(h),c.startTime=l):c.reverse=!0,e.next=14,this.publicGetTradeBucketed(this.extend(c,s));case 14:if(f=e.sent,p=this.parseOHLCVs(f,o,r,n,a),d)for(v=0;v<p.length;v++)p[v][0]=p[v][0]-u;return e.abrupt("return",p);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),i=this.safeFloat2(e,"avgPx","price"),n=this.safeFloat2(e,"size","lastQty"),a=this.safeString(e,"trdMatchID"),s=this.safeString(e,"orderID"),o=this.safeStringLower(e,"side"),c=this.safeFloat(e,"execCost");void 0!==c&&(c=Math.abs(c)/1e8);var u=void 0;if("execComm"in e){var d=this.safeFloat(e,"execComm");d/=1e8;var h=this.safeString(e,"settlCurrency"),l=this.safeCurrencyCode(h),f=this.safeFloat(e,"commission");u={cost:d,currency:l,rate:f}}var p=void 0;void 0!==u&&(p=u.cost<0?"maker":"taker");var v=this.safeString(e,"symbol"),m=this.safeSymbol(v,t),y=this.safeStringLower(e,"ordType");return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:m,id:a,order:s,type:y,takerOrMaker:p,side:o,price:i,cost:c,amount:n,fee:u}}},{key:"parseOrderStatus",value:function(e){return this.safeString({New:"open",PartiallyFilled:"open",Filled:"closed",DoneForDay:"open",Canceled:"canceled",PendingCancel:"open",PendingNew:"open",Rejected:"rejected",Expired:"expired",Stopped:"open",Untriggered:"open",Triggered:"open"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({Day:"Day",GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"ordStatus")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"timestamp")),s=this.parse8601(this.safeString(e,"transactTime")),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"orderQty"),u=this.safeFloat(e,"cumQty",0),d=this.safeFloat(e,"avgPx"),h=this.safeString(e,"orderID"),l=this.safeStringLower(e,"ordType"),f=this.safeStringLower(e,"side"),p=this.safeString(e,"clOrdID"),v=this.parseTimeInForce(this.safeString(e,"timeInForce")),m=this.safeFloat(e,"stopPx"),y=this.safeString(e,"execInst"),g="ParticipateDoNotInitiate"===y;return this.safeOrder({info:e,id:h,clientOrderId:p,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:s,symbol:n,type:l,timeInForce:v,postOnly:g,side:f,price:o,stopPrice:m,amount:c,cost:void 0,average:d,filled:u,remaining:void 0,status:r,fee:void 0,trades:void 0})}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r?o.startTime=this.iso8601(r):o.reverse=!0,void 0!==n&&(o.count=n),e.next=11,this.publicGetTrade(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=this.capitalize(r),d={symbol:c.id,side:this.capitalize(n),orderQty:parseFloat(this.amountToPrecision(t,a)),ordType:u},"Stop"!==u&&"StopLimit"!==u&&"MarketIfTouched"!==u&&"LimitIfTouched"!==u){e.next=15;break}if(void 0!==(h=this.safeFloat2(o,"stopPx","stopPrice"))){e.next=13;break}throw new _(this.id+" createOrder() requires a stopPx or stopPrice parameter for the "+u+" order type");case 13:d.stopPx=parseFloat(this.priceToPrecision(t,h)),o=this.omit(o,["stopPx","stopPrice"]);case 15:return"Limit"!==u&&"StopLimit"!==u&&"LimitIfTouched"!==u||(d.price=parseFloat(this.priceToPrecision(t,s))),void 0!==(l=this.safeString2(o,"clOrdID","clientOrderId"))&&(d.clOrdID=l,o=this.omit(o,["clOrdID","clientOrderId"])),e.next=20,this.privatePostOrder(this.extend(d,o));case 20:return f=e.sent,e.abrupt("return",this.parseOrder(f,c));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:void 0,c=f.length>6&&void 0!==f[6]?f[6]:{},e.next=5,this.loadMarkets();case 5:return u={},void 0!==(d=this.safeString2(c,"origClOrdID","clientOrderId"))?(u.origClOrdID=d,void 0!==(h=this.safeString(c,"clOrdID","clientOrderId"))&&(u.clOrdID=h),c=this.omit(c,["origClOrdID","clOrdID","clientOrderId"])):u.orderID=t,void 0!==s&&(u.orderQty=s),void 0!==o&&(u.price=o),e.next=12,this.privatePutOrder(this.extend(u,c));case 12:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString2(r,"clOrdID","clientOrderId"),a={},void 0===n?a.orderID=t:(a.clOrdID=n,r=this.omit(r,["clOrdID","clientOrderId"])),e.next=9,this.privateDeleteOrder(this.extend(a,r));case 9:if(s=e.sent,o=this.safeValue(s,0,{}),void 0===(c=this.safeString(o,"error"))){e.next=15;break}if(!(c.indexOf("Unable to cancel order due to existing state")>=0)){e.next=15;break}throw new x(this.id+" cancelOrder() failed: "+c);case 15:return e.abrupt("return",this.parseOrder(o));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.symbol=a.id),e.next=9,this.privateDeleteOrderAll(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",this.parseOrders(s,a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetPosition(t);case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isFiat",value:function(e){return"EUR"===e||"PLN"===e}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>3&&void 0!==c[3]?c[3]:void 0,a=c.length>4&&void 0!==c[4]?c[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if("BTC"===t){e.next=7;break}throw new y(this.id+" supoprts BTC withdrawals only, other currencies coming soon...");case 7:return s={currency:"XBt",amount:r,address:n},e.next=10,this.privatePostUserRequestWithdrawal(this.extend(s,a));case 10:return o=e.sent,e.abrupt("return",{info:o,id:this.safeString(o,"transactID")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){if(429===e)throw new m(this.id+" "+a);if(e>=400){var u=this.safeValue(s,"error",{}),d=this.safeString(u,"message"),h=this.id+" "+a;if(this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),400===e)throw new v(h);throw new y(h)}}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+e;if("GET"===r)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{var o=this.safeString(i,"_format");void 0!==o&&(s+="?"+this.urlencode({_format:o}),i=this.omit(i,"_format"))}var c=this.urls.api[t]+s;if(this.apiKey&&this.secret){var u=r+s,d=this.safeInteger(this.options,"api-expires");n={"Content-Type":"application/json","api-key":this.apiKey},u+=d=(d=this.sum(this.seconds(),d)).toString(),n["api-expires"]=d,"POST"!==r&&"PUT"!==r&&"DELETE"!==r||Object.keys(i).length&&(u+=a=this.json(i)),n["api-signature"]=this.hmac(this.encode(u),this.encode(this.secret))}return{url:c,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.PermissionDenied,y=f.BadRequest,g=f.ArgumentsRequired,b=f.OrderNotFound,k=f.InsufficientFunds,x=f.ExchangeNotAvailable,w=f.DDoSProtection,_=f.InvalidAddress,O=f.InvalidOrder;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"bitpanda",name:"Bitpanda Pro",countries:["AT"],rateLimit:300,version:"v1",has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelAllOrders:!0,cancelOrder:!0,cancelOrders:!0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFees:!0,fetchTicker:!0,fetchTickers:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1/MINUTES","5m":"5/MINUTES","15m":"15/MINUTES","30m":"30/MINUTES","1h":"1/HOURS","4h":"4/HOURS","1d":"1/DAYS","1w":"1/WEEKS","1M":"1/MONTHS"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87591171-9a377d80-c6f0-11ea-94ac-97a126eac3bc.jpg",api:{public:"https://api.exchange.bitpanda.com/public",private:"https://api.exchange.bitpanda.com/public"},www:"https://www.bitpanda.com/en/pro",doc:["https://developers.bitpanda.com/exchange/"],fees:"https://www.bitpanda.com/en/pro/fees"},api:{public:{get:["currencies","candlesticks/{instrument_code}","fees","instruments","order-book/{instrument_code}","market-ticker","market-ticker/{instrument_code}","price-ticks/{instrument_code}","time"]},private:{get:["account/balances","account/deposit/crypto/{currency_code}","account/deposit/fiat/EUR","account/deposits","account/deposits/bitpanda","account/withdrawals","account/withdrawals/bitpanda","account/fees","account/orders","account/orders/{order_id}","account/orders/{order_id}/trades","account/trades","account/trades/{trade_id}","account/trading-volume"],post:["account/deposit/crypto","account/withdraw/crypto","account/withdraw/fiat","account/fees","account/orders"],delete:["account/orders","account/orders/{order_id}","account/orders/client/{client_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:.001,tiers:[{taker:[[0,.0015],[100,.0013],[250,.0013],[1e3,.001],[5e3,9e-4],[1e4,75e-5],[2e4,65e-5]],maker:[[0,.001],[100,.001],[250,9e-4],[1e3,75e-5],[5e3,6e-4],[1e4,5e-4],[2e4,5e-4]]}]}},requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{INVALID_CLIENT_UUID:O,ORDER_NOT_FOUND:b,ONLY_ONE_ERC20_ADDRESS_ALLOWED:_,DEPOSIT_ADDRESS_NOT_USED:_,INVALID_CREDENTIALS:p,MISSING_CREDENTIALS:p,INVALID_APIKEY:p,INVALID_SCOPES:p,INVALID_SUBJECT:p,INVALID_ISSUER:p,INVALID_AUDIENCE:p,INVALID_DEVICE_ID:p,INVALID_IP_RESTRICTION:p,APIKEY_REVOKED:p,APIKEY_EXPIRED:p,SYNCHRONIZER_TOKEN_MISMATCH:p,SESSION_EXPIRED:p,INTERNAL_ERROR:p,CLIENT_IP_BLOCKED:m,MISSING_PERMISSION:m,ILLEGAL_CHARS:y,UNSUPPORTED_MEDIA_TYPE:y,ACCOUNT_HISTORY_TIME_RANGE_TOO_BIG:y,CANDLESTICKS_TIME_RANGE_TOO_BIG:y,INVALID_INSTRUMENT_CODE:y,INVALID_ORDER_TYPE:y,INVALID_UNIT:y,INVALID_PERIOD:y,INVALID_TIME:y,INVALID_DATE:y,INVALID_CURRENCY:y,INVALID_AMOUNT:y,INVALID_PRICE:y,INVALID_LIMIT:y,INVALID_QUERY:y,INVALID_CURSOR:y,INVALID_ACCOUNT_ID:y,INVALID_SIDE:O,INVALID_ACCOUNT_HISTORY_FROM_TIME:y,INVALID_ACCOUNT_HISTORY_MAX_PAGE_SIZE:y,INVALID_ACCOUNT_HISTORY_TIME_PERIOD:y,INVALID_ACCOUNT_HISTORY_TO_TIME:y,INVALID_CANDLESTICKS_GRANULARITY:y,INVALID_CANDLESTICKS_UNIT:y,INVALID_ORDER_BOOK_DEPTH:y,INVALID_ORDER_BOOK_LEVEL:y,INVALID_PAGE_CURSOR:y,INVALID_TIME_RANGE:y,INVALID_TRADE_ID:y,INVALID_UI_ACCOUNT_SETTINGS:y,NEGATIVE_AMOUNT:O,NEGATIVE_PRICE:O,MIN_SIZE_NOT_SATISFIED:O,BAD_AMOUNT_PRECISION:O,BAD_PRICE_PRECISION:O,BAD_TRIGGER_PRICE_PRECISION:O,MAX_OPEN_ORDERS_EXCEEDED:y,MISSING_PRICE:O,MISSING_ORDER_TYPE:O,MISSING_SIDE:O,MISSING_CANDLESTICKS_PERIOD_PARAM:g,MISSING_CANDLESTICKS_UNIT_PARAM:g,MISSING_FROM_PARAM:g,MISSING_INSTRUMENT_CODE:g,MISSING_ORDER_ID:O,MISSING_TO_PARAM:g,MISSING_TRADE_ID:g,INVALID_ORDER_ID:b,NOT_FOUND:b,INSUFFICIENT_LIQUIDITY:k,INSUFFICIENT_FUNDS:k,NO_TRADING:x,SERVICE_UNAVAILABLE:x,GATEWAY_TIMEOUT:x,RATELIMIT:w,CF_RATELIMIT:w,INTERNAL_SERVER_ERROR:v},broad:{}},commonCurrencies:{MIOTA:"IOTA"},options:{fetchTradingFees:{method:"fetchPrivateTradingFees"},fiat:["EUR","CHF"]}})}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"epoch_millis"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"code"),c=this.safeCurrencyCode(o),i[c]={id:o,code:c,name:void 0,info:s,active:void 0,fee:void 0,precision:this.safeInteger(s,"precision"),limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetInstruments(t);case 3:for(r=e.sent,i=[],a=0;a<r.length;a++)s=r[a],o=this.safeValue(s,"base",{}),c=this.safeValue(s,"quote",{}),u=this.safeString(o,"code"),d=this.safeString(c,"code"),h=u+"_"+d,l=this.safeCurrencyCode(u),f=this.safeCurrencyCode(d),p=l+"/"+f,v={amount:this.safeInteger(s,"amount_precision"),price:this.safeInteger(s,"market_precision")},m={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(s,"min_size"),max:void 0}},y=this.safeString(s,"state"),g="ACTIVE"===y,i.push({id:h,symbol:p,base:l,quote:f,baseId:u,quoteId:d,precision:v,limits:m,info:s,active:g});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=this.safeString(t,"method"),t=this.omit(t,"method"),void 0===r&&(i=this.safeValue(this.options,"fetchTradingFees",{}),r=this.safeString(i,"method","fetchPrivateTradingFees")),e.next=6,this[r](t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPublicTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetFees(t);case 5:for(r=e.sent,i=this.indexBy(r,"fee_group_id"),a=this.safeValue(this.options,"fee_group_id","default"),s=this.safeValue(i,a,{}),o=this.safeValue(s,"fee_tiers"),c={},u=0;u<this.symbols.length;u++){for(d=this.symbols[u],h={info:s,symbol:d,maker:void 0,taker:void 0,percentage:!0,tierBased:!0},l=[],f=[],p=0;p<o.length;p++)v=o[p],m=this.safeFloat(v,"volume"),y=this.safeFloat(v,"taker_fee"),g=this.safeFloat(v,"maker_fee"),y/=100,g/=100,l.push([m,y]),f.push([m,g]),0===p&&(h.taker=y,h.maker=g);b={taker:l,maker:f},h.tiers=b,c[d]=h}return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPrivateTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountFees(t);case 5:for(r=e.sent,i=this.safeValue(r,"active_fee_tier",{}),a={info:r,maker:this.safeFloat(i,"maker_fee"),taker:this.safeFloat(i,"taker_fee"),percentage:!0,tierBased:!0},s=this.safeValue(r,"fee_tiers"),o=[],c=[],u=0;u<s.length;u++)d=s[u],h=this.safeFloat(d,"volume"),l=this.safeFloat(d,"taker_fee"),f=this.safeFloat(d,"maker_fee"),l/=100,f/=100,o.push([h,l]),c.push([h,f]);return p={taker:o,maker:c},a.tiers=p,e.abrupt("return",a);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeString(e,"instrument_code"),n=this.safeSymbol(i,t,"_"),a=this.safeFloat(e,"last_price"),s=this.safeFloat(e,"price_change_percentage"),o=this.safeFloat(e,"price_change"),c=void 0,u=void 0;void 0!==a&&void 0!==o&&(c=a-o,u=this.sum(a,c)/2);var d=this.safeFloat(e,"base_volume"),h=this.safeFloat(e,"quote_volume"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"best_bid"),bidVolume:void 0,ask:this.safeFloat(e,"best_ask"),askVolume:void 0,vwap:l,open:c,close:a,last:a,previousClose:void 0,change:o,percentage:s,average:u,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={instrument_code:i.id},e.next=7,this.publicGetMarketTickerInstrumentCode(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTicker(r);case 6:for(i=e.sent,a={},s=0;s<i.length;s++)o=this.parseTicker(i[s]),c=o.symbol,a[c]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={instrument_code:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetOrderBookInstrumentCode(this.extend(a,i));case 8:return s=e.sent,o=this.parse8601(this.safeString(s,"time")),e.abrupt("return",this.parseOrderBook(s,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,"granularity"),r=this.safeString(t,"unit"),i=this.safeString(t,"period"),n={MINUTES:"m",HOURS:"h",DAYS:"d",WEEKS:"w",MONTHS:"M"},a=this.safeString(n,r),s=i+a,o=this.parseTimeframe(s),c=1e3*o,u=this.parse8601(this.safeString(e,"time")),d=c*parseInt(u/c),h=this.safeValue(this.options,"fetchOHLCV",{}),l=this.safeString(h,"volume","total_amount");return[d,this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,l)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"1m",a=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:void 0,o=b.length>4&&void 0!==b[4]?b[4]:{},e.next=6,this.loadMarkets();case 6:return c=this.market(t),u=this.safeString(this.timeframes,r),d=u.split("/"),h=i(d,2),l=h[0],f=h[1],p=this.parseTimeframe(r),v=1e3*p,void 0===s&&(s=1500),m={instrument_code:c.id,period:l,unit:f},void 0===a?(y=this.milliseconds(),m.to=this.iso8601(y),m.from=this.iso8601(y-s*v)):(m.from=this.iso8601(a),m.to=this.iso8601(this.sum(a,s*v))),e.next=16,this.publicGetCandlesticksInstrumentCode(this.extend(m,o));case 16:return g=e.sent,e.abrupt("return",this.parseOHLCVs(g,c,r,a,s));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"fee",{});e=this.safeValue(e,"trade",e);var i=this.safeInteger(e,"trade_timestamp");void 0===i&&(i=this.parse8601(this.safeString(e,"time")));var n=this.safeStringLower2(e,"side","taker_side"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=this.safeFloat(e,"volume");void 0===o&&void 0!==s&&void 0!==a&&(o=s*a);var c=this.safeString(e,"instrument_code"),u=this.safeSymbol(c,t,"_"),d=this.safeFloat(r,"fee_amount"),h=void 0,l=void 0;if(void 0!==d){var f=this.safeString(r,"fee_currency"),p=this.safeCurrencyCode(f),v=this.safeFloat(r,"fee_percentage");l={cost:d,currency:p,rate:v},h=this.safeStringLower(r,"fee_type")}return{id:this.safeString2(e,"trade_id","sequence"),order:this.safeString(e,"order_id"),timestamp:i,datetime:this.iso8601(i),symbol:u,type:void 0,side:n,price:a,amount:s,cost:o,takerOrMaker:h,fee:l,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={instrument_code:s.id},void 0!==r&&(o.from=this.iso8601(r),o.to=this.iso8601(this.sum(r,144e5))),e.next=10,this.publicGetPriceTicksInstrumentCode(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalances(t);case 5:for(r=e.sent,i=this.safeValue(r,"balances",[]),a={info:r},s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"currency_code"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"available"),d.used=this.safeFloat(o,"locked"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.code);var i=this.safeString(e,"address"),n=this.safeString(e,"destination_tag");return this.checkAddress(i),{currency:r,address:i,tag:n,info:e}}},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privatePostAccountDepositCrypto(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseDepositAddress(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency_code:i.id},e.next=7,this.privateGetAccountDepositCryptoCurrencyCode(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseDepositAddress(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency_code=o.id),void 0!==i&&(s.max_page_size=i),void 0===r){e.next=15;break}if(void 0!==this.safeString(a,"to")){e.next=14;break}throw new g(this.id+' fetchDeposits() requires a "to" iso8601 string param with the since argument is specified');case 14:s.from=this.iso8601(r);case 15:return e.next=17,this.privateGetAccountDeposits(this.extend(s,a));case 17:return c=e.sent,u=this.safeValue(c,"deposit_history",[]),e.abrupt("return",this.parseTransactions(u,o,r,i,{type:"deposit"}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency_code=o.id),void 0!==i&&(s.max_page_size=i),void 0===r){e.next=15;break}if(void 0!==this.safeString(a,"to")){e.next=14;break}throw new g(this.id+' fetchWithdrawals() requires a "to" iso8601 string param with the since argument is specified');case 14:s.from=this.iso8601(r);case 15:return e.next=17,this.privateGetAccountWithdrawals(this.extend(s,a));case 17:return c=e.sent,u=this.safeValue(c,"withdrawal_history",[]),e.abrupt("return",this.parseTransactions(u,o,r,i,{type:"withdrawal"}));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={currency:t,amount:this.currencyToPrecision(t,r)},u=this.safeValue(this.options,"fiat",[]),d=this.inArray(t,u),h=d?"privatePostAccountWithdrawFiat":"privatePostAccountWithdrawCrypto",!d){e.next=16;break}if(void 0!==this.safeString(s,"payout_account_id")){e.next=14;break}throw g(this.id+" withdraw() requires a payout_account_id param for fiat "+t+" withdrawals");case 14:e.next=19;break;case 16:l={address:i},void 0!==a&&(l.destination_tag=a),c.recipient=l;case 19:return e.next=21,this[h](this.extend(c,s));case 21:return f=e.sent,e.abrupt("return",this.parseTransaction(f,o));case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"transaction_id"),i=this.safeFloat(e,"amount"),n=this.parse8601(this.safeString(e,"time")),a=this.safeString(e,"currency");t=this.safeCurrency(a,t);var s="ok",o=this.safeFloat2(e,"fee_amount","fee"),c=void 0,u=this.safeString(e,"recipient"),d=this.safeString(e,"destination_tag");if(void 0!==o){var h=this.safeString(e,"fee_currency",a),l=this.safeCurrencyCode(h);c={cost:o,currency:l}}return{info:e,id:r,currency:t.code,amount:i,address:u,addressFrom:void 0,addressTo:u,tag:d,tagFrom:void 0,tagTo:d,status:s,type:void 0,updated:void 0,txid:this.safeString(e,"blockchain_transaction_id"),timestamp:n,datetime:this.iso8601(n),fee:c}}},{key:"parseOrderStatus",value:function(e){return this.safeString({FILLED:"open",FILLED_FULLY:"closed",FILLED_CLOSED:"canceled",FILLED_REJECTED:"rejected",OPEN:"open",REJECTED:"rejected",CLOSED:"canceled",FAILED:"failed",STOP_TRIGGERED:"triggered"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"trades",[]);e=this.safeValue(e,"order",e);var i=this.safeString(e,"order_id"),n=this.safeString(e,"client_id"),a=this.parse8601(this.safeString(e,"time")),s=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeString(e,"instrument_code"),c=this.safeSymbol(o,t,"_"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),h=void 0,l=this.safeFloat(e,"filled_amount"),f=void 0;void 0!==l&&void 0!==d&&(f=Math.max(0,d-l),void 0===s&&(s=f>0?"open":"closed"));var p=this.safeStringLower(e,"side"),v=this.safeStringLower(e,"type"),m=this.parseTrades(r,t,void 0,void 0),y=[],g=m.length,b=void 0,k=void 0,x=void 0;if(g>0){b=m[0].timestamp,k=0,x=0;for(var w=0;w<m.length;w++){var _=m[w];y.push(_.fee),b=Math.max(b,_.timestamp),k=this.sum(k,_.cost),x=this.sum(x,_.amount)}}var O=this.safeFloat(e,"average_price");void 0===O&&void 0!==k&&void 0!==x&&0!==x&&(O=k/x),void 0===h&&void 0!==O&&void 0!==l&&(h=O*l);var T=this.parseTimeInForce(this.safeString(e,"time_in_force")),S=this.safeFloat(e,"trigger_price"),C=this.safeValue(e,"is_post_only"),I={id:i,clientOrderId:n,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:b,symbol:c,type:v,timeInForce:T,postOnly:C,side:p,price:u,stopPrice:S,amount:d,cost:h,average:O,filled:l,remaining:f,status:s,trades:m},M=y.length;if(M>0)if(1===M)I.fee=y[0];else{var E=this.groupBy(y,"currency"),A=Object.keys(E),F=A.length;if(1===F){for(var P=A[0],B=this.safeValue(E,P),R=0,V=0;V<B.length;V++)R=this.sum(R,B[V].cost);I.fee={cost:R,currency:P}}else I.fees=y}else I.fee=void 0;return I}},{key:"parseTimeInForce",value:function(e){return this.safeString({GOOD_TILL_CANCELLED:"GTC",GOOD_TILL_TIME:"GTT",IMMEDIATE_OR_CANCELLED:"IOC",FILL_OR_KILL:"FOK"},e,e)}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=r.toUpperCase(),d={instrument_code:c.id,type:u,side:i.toUpperCase(),amount:this.amountToPrecision(t,a)},h=!1,"LIMIT"!==u&&"STOP"!==u||(h=!0),"STOP"!==u){e.next=15;break}if(void 0!==(l=this.safeFloat(o,"trigger_price"))){e.next=13;break}throw new g(this.id+" createOrder() requires a trigger_price param for "+r+" orders");case 13:d.trigger_price=this.priceToPrecision(t,l),o=this.omit(o,"trigger_price");case 15:return h&&(d.price=this.priceToPrecision(t,s)),void 0!==(f=this.safeString2(o,"clientOrderId","client_id"))&&(d.client_id=f,o=this.omit(o,["clientOrderId","client_id"])),e.next=20,this.privatePostAccountOrders(this.extend(d,o));case 20:return p=e.sent,e.abrupt("return",this.parseOrder(p,c));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString2(r,"clientOrderId","client_id"),r=this.omit(r,["clientOrderId","client_id"]),a="privateDeleteAccountOrdersOrderId",s={},void 0!==i?(a="privateDeleteAccountOrdersClientClientId",s.client_id=i):s.order_id=t,e.next=11,this[a](this.extend(s,r));case 11:return o=e.sent,e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==t&&(a=this.market(t),i.instrument_code=a.id),e.next=8,this.privateDeleteAccountOrders(this.extend(i,r));case 8:return s=e.sent,e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={ids:t.join(",")},e.next=7,this.privateDeleteAccountOrders(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privateGetAccountOrdersOrderId(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.market(t),s.instrument_code=o.id),void 0===r){e.next=14;break}if(void 0!==this.safeString(a,"to")){e.next=13;break}throw new g(this.id+' fetchOrders() requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');case 13:s.from=this.iso8601(r);case 14:return void 0!==i&&(s.max_page_size=i),e.next=17,this.privateGetAccountOrders(this.extend(s,a));case 17:return c=e.sent,u=this.safeValue(c,"order_history",[]),e.abrupt("return",this.parseOrders(u,o,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={with_cancelled_and_rejected:!0},e.next=7,this.fetchOpenOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={order_id:t},void 0!==a&&(o.max_page_size=a),e.next=10,this.privateGetAccountOrdersOrderIdTrades(this.extend(o,s));case 10:return c=e.sent,u=this.safeValue(c,"trade_history",[]),d=void 0,void 0!==r&&(d=this.market(r)),e.abrupt("return",this.parseTrades(u,d,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.market(t),s.instrument_code=o.id),void 0===r){e.next=14;break}if(void 0!==this.safeString(a,"to")){e.next=13;break}throw new g(this.id+' fetchMyTrades() requires a "to" iso8601 string param with the since argument is specified, max range is 100 days');case 13:s.from=this.iso8601(r);case 14:return void 0!==i&&(s.max_page_size=i),e.next=17,this.privateGetAccountTrades(this.extend(s,a));case 17:return c=e.sent,u=this.safeValue(c,"trade_history",[]),e.abrupt("return",this.parseTrades(u,o,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"public"===t?Object.keys(o).length&&(s+="?"+this.urlencode(o)):"private"===t&&(this.checkRequiredCredentials(),n={Accept:"application/json",Authorization:"Bearer "+this.apiKey},"POST"===r?(a=this.json(o),n["Content-Type"]="application/json"):Object.keys(o).length&&(s+="?"+this.urlencode(o))),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"error");if(void 0!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new v(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidNonce,m=f.AuthenticationError,y=f.OrderNotFound,g=r(13),b=g.TICK_SIZE,k=g.ROUND;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"bitso",name:"Bitso",countries:["MX"],rateLimit:2e3,version:"v3",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295554-11f98280-c50e-11ea-80d6-15b3bafa8cbf.jpg",api:"https://api.bitso.com",www:"https://bitso.com",doc:"https://bitso.com/api_info",fees:"https://bitso.com/fees",referral:"https://bitso.com/?ref=itej"},precisionMode:b,options:{precision:{XRP:1e-6,MXN:.01,TUSD:.01},defaultPrecision:1e-8},api:{public:{get:["available_books","ticker","order_book","trades"]},private:{get:["account_status","balance","fees","fundings","fundings/{fid}","funding_destination","kyc_documents","ledger","ledger/trades","ledger/fees","ledger/fundings","ledger/withdrawals","mx_bank_codes","open_orders","order_trades/{oid}","orders/{oid}","user_trades","user_trades/{tid}","withdrawals/","withdrawals/{wid}"],post:["bitcoin_withdrawal","debit_card_withdrawal","ether_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal","orders","phone_number","phone_verification","phone_withdrawal","spei_withdrawal","ripple_withdrawal","bcash_withdrawal","litecoin_withdrawal"],delete:["orders/{oid}","orders/all"]}},exceptions:{"0201":m,104:v}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,x,w,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L,D,q=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=q.length>0&&void 0!==q[0]?q[0]:{},e.next=3,this.publicGetAvailableBooks(t);case 3:for(r=e.sent,a=this.safeValue(r,"payload"),s=[],o=0;o<a.length;o++){for(c=a[o],u=this.safeString(c,"book"),d=u.split("_"),h=n(d,2),l=h[0],f=h[1],p=l.toUpperCase(),v=f.toUpperCase(),p=this.safeCurrencyCode(p),v=this.safeCurrencyCode(v),m=p+"/"+v,y={amount:{min:this.safeFloat(c,"minimum_amount"),max:this.safeFloat(c,"maximum_amount")},price:{min:this.safeFloat(c,"minimum_price"),max:this.safeFloat(c,"maximum_price")},cost:{min:this.safeFloat(c,"minimum_value"),max:this.safeFloat(c,"maximum_value")}},g=this.safeFloat(this.options.precision,v,this.options.defaultPrecision),x=this.safeFloat(c,"tick_size",g),w={amount:this.safeFloat(this.options.precision,p,this.options.defaultPrecision),price:x},_=this.safeValue(c,"fees",{}),O=this.safeValue(_,"flat_rate",{}),T=this.safeFloat(O,"maker"),S=this.safeFloat(O,"taker"),C=this.safeValue(_,"structure",[]),I={taker:parseFloat(this.decimalToPrecision(S/100,k,1e-8,b)),maker:parseFloat(this.decimalToPrecision(T/100,k,1e-8,b)),percentage:!0,tierBased:!0},M=[],E=[],A=0;A<C.length;A++)F=C[A],P=this.safeFloat(F,"volume"),B=this.safeFloat(F,"taker"),R=this.safeFloat(F,"maker"),V=parseFloat(this.decimalToPrecision(B/100,k,1e-8,b)),L=parseFloat(this.decimalToPrecision(R/100,k,1e-8,b)),M.push([P,V]),E.push([P,L]),0===A&&(I.taker=parseFloat(this.decimalToPrecision(S/100,k,1e-8,b)),I.maker=parseFloat(this.decimalToPrecision(T/100,k,1e-8,b)));D={taker:M,maker:E},I.tiers=D,s.push(this.extend({id:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,info:c,limits:y,precision:w,active:void 0},I))}return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r.payload,"balances"),a={info:r},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),d={free:this.safeFloat(o,"available"),used:this.safeFloat(o,"locked"),total:this.safeFloat(o,"total")},a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={book:this.marketId(t)},e.next=7,this.publicGetOrderBook(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"payload"),o=this.parse8601(this.safeString(s,"updated_at")),e.abrupt("return",this.parseOrderBook(s,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n={book:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeValue(a,"payload"),o=this.parse8601(this.safeString(s,"created_at")),c=this.safeFloat(s,"vwap"),u=this.safeFloat(s,"volume"),d=void 0,void 0!==u&&void 0!==c&&(d=u*c),h=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:c,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:d,info:s});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"book"),n=this.safeSymbol(i,t,"_"),a=this.safeString2(e,"side","maker_side"),s=this.safeFloat2(e,"amount","major");void 0!==s&&(s=Math.abs(s));var o=void 0,c=this.safeFloat(e,"fees_amount");if(void 0!==c){var u=this.safeString(e,"fees_currency"),d=this.safeCurrencyCode(u);o={cost:c,currency:d}}var h=this.safeFloat(e,"minor");void 0!==h&&(h=Math.abs(h));var l=this.safeFloat(e,"price"),f=this.safeString(e,"oid"),p=this.safeString(e,"tid");return{id:p,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,order:f,type:void 0,side:a,takerOrMaker:void 0,price:l,amount:s,cost:h,fee:o}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={book:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.payload,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:25,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.market(t),o="marker"in a,void 0===r||o){e.next=10;break}throw new p(this.id+" fetchMyTrades does not support fetching trades starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");case 10:return o&&(a=this.extend(a,{marker:parseInt(a.marker)})),c={book:s.id,limit:n},e.next=14,this.privateGetUserTrades(this.extend(c,a));case 14:return u=e.sent,e.abrupt("return",this.parseTrades(u.payload,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c={book:this.marketId(t),side:n,type:r,major:this.amountToPrecision(t,a)},"limit"===r&&(c.price=this.priceToPrecision(t,s)),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,d=this.safeString(u.payload,"oid"),e.abrupt("return",{info:u,id:d});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={oid:t},e.next=7,this.privateDeleteOrdersOid(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"partial-fill":"open",completed:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"oid"),i=this.safeString(e,"side"),n=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeString(e,"book"),s=this.safeSymbol(a,t,"_"),o=this.safeString(e,"type"),c=this.parse8601(this.safeString(e,"created_at")),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"original_amount"),h=this.safeFloat(e,"unfilled_amount"),l=this.safeString(e,"client_id");return this.safeOrder({info:e,id:r,clientOrderId:l,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:s,type:o,timeInForce:void 0,postOnly:void 0,side:i,price:u,stopPrice:void 0,amount:d,cost:void 0,remaining:h,filled:void 0,status:n,fee:void 0,average:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:25,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:if(s=this.market(t),o="marker"in a,void 0===r||o){e.next=10;break}throw new p(this.id+" fetchOpenOrders does not support fetching orders starting from a timestamp with the `since` argument, use the `marker` extra param to filter starting from an integer trade id");case 10:return o&&(a=this.extend(a,{marker:parseInt(a.marker)})),c={book:s.id,limit:n},e.next=14,this.privateGetOpenOrders(this.extend(c,a));case 14:return u=e.sent,d=this.parseOrders(u.payload,s,r,n),e.abrupt("return",d);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetOrdersOid({oid:t});case 6:if(r=e.sent,n=this.safeValue(r,"payload"),!Array.isArray(n)){e.next=12;break}if(1!==r.payload.length){e.next=12;break}return e.abrupt("return",this.parseOrder(n[0]));case 12:throw new y(this.id+": The order "+t+" not found.");case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,c.length>2&&void 0!==c[2]?c[2]:void 0,c.length>3&&void 0!==c[3]?c[3]:void 0,n=c.length>4&&void 0!==c[4]?c[4]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={oid:t},e.next=10,this.privateGetOrderTradesOid(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseTrades(o.payload,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={fund_currency:n.id},e.next=7,this.privateGetFundingDestination(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s.payload,"account_identifier"),c=void 0,o.indexOf("?dt=")>=0&&(u=o.split("?dt="),o=this.safeString(u,0),c=this.safeString(u,1)),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(void 0!==(c=t in(o={BTC:"Bitcoin",ETH:"Ether",XRP:"Ripple",BCH:"Bcash",LTC:"Litecoin"})?o[t]:void 0)){e.next=9;break}throw new p(this.id+" not valid withdraw coin: "+t);case 9:return u={amount:r,address:n,destination_tag:a},d="privatePost"+c+"Withdrawal",e.next=13,this[d](this.extend(u,s));case 13:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h.payload,"wid")});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var c=this.urls.api+s;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=[u,r,s].join("");"GET"!==r&&Object.keys(o).length&&(d+=a=this.json(o));var h=this.hmac(this.encode(d),this.encode(this.secret)),l=this.apiKey+":"+u+":"+h;n={Authorization:"Bitso "+l,"Content-Type":"application/json"}}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"success"in s){var u=this.safeValue(s,"success",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=this.id+" "+this.json(s),h=this.safeValue(s,"error");if(void 0===h)throw new p(d);var l=this.safeString(h,"code");throw this.throwExactlyMatchedException(this.exceptions,l,d),new p(d)}}}},{key:"request",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("success"in(c=e.sent))){e.next=11;break}if(!c.success){e.next=11;break}return e.abrupt("return",c);case 11:throw new p(this.id+" "+this.json(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.NotSupported,y=f.PermissionDenied,g=f.InvalidNonce,b=f.OrderNotFound,k=f.InsufficientFunds,x=f.InvalidAddress,w=f.InvalidOrder,_=f.ArgumentsRequired,O=f.OnMaintenance,T=f.ExchangeNotAvailable;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"bitstamp",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v2",userAgent:this.userAgents.chrome,pro:!0,has:{CORS:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchFundingFees:!0,fetchFees:!0,fetchLedger:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:{public:"https://www.bitstamp.net/api",private:"https://www.bitstamp.net/api",v1:"https://www.bitstamp.net/api"},www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"259200"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ohlc/{pair}/","order_book/{pair}/","ticker_hour/{pair}/","ticker/{pair}/","transactions/{pair}/","trading-pairs-info/"]},private:{post:["balance/","balance/{pair}/","bch_withdrawal/","bch_address/","user_transactions/","user_transactions/{pair}/","open_orders/all/","open_orders/{pair}/","order_status/","cancel_order/","buy/{pair}/","buy/market/{pair}/","buy/instant/{pair}/","sell/{pair}/","sell/market/{pair}/","sell/instant/{pair}/","ltc_withdrawal/","ltc_address/","eth_withdrawal/","eth_address/","xrp_withdrawal/","xrp_address/","xlm_withdrawal/","xlm_address/","pax_withdrawal/","pax_address/","link_withdrawal/","link_address/","usdc_withdrawal/","usdc_address/","omg_withdrawal/","omg_address/","dai_withdrawal/","dai_address/","knc_withdrawal/","knc_address/","mkr_withdrawal/","mkr_address/","zrx_withdrawal/","zrx_address/","gusd_withdrawal/","gusd_address/","transfer-to-main/","transfer-from-main/","withdrawal-requests/","withdrawal/open/","withdrawal/status/","withdrawal/cancel/","liquidation_address/new/","liquidation_address/info/"]},v1:{post:["bitcoin_deposit_address/","unconfirmed_btc/","bitcoin_withdrawal/","ripple_withdrawal/","ripple_address/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.005,maker:.005,tiers:{taker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[5e7,.001],[1e8,.07/100],[5e8,5e-4],[2e9,3e-4],[6e9,1e-4],[1e10,5e-5],[10000000001,0]],maker:[[0,.005],[2e4,.0025],[1e5,.0024],[2e5,.0022],[4e5,.002],[6e5,.0015],[1e6,.14/100],[2e6,.0013],[4e6,.0012],[2e7,.0011],[5e7,.001],[1e8,.07/100],[5e8,5e-4],[2e9,3e-4],[6e9,1e-4],[1e10,5e-5],[10000000001,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:1e-4,LTC:.001,ETH:.001,XRP:.02,XLM:.005,PAX:.5,USD:25,EUR:3},deposit:{BTC:0,BCH:0,LTC:0,ETH:0,XRP:0,XLM:0,PAX:0,USD:7.5,EUR:0}}},exceptions:{exact:{"No permission found":y,"API key not found":p,"IP address not allowed":y,"Invalid nonce":g,"Invalid signature":p,"Authentication failed":p,"Missing key, signature and nonce parameters":p,"Your account is frozen":y,"Please update your profile with your FATCA information, before using API.":y,"Order not found":b,"Price is more than 20% below market price.":w,"Bitstamp.net is under scheduled maintenance.":O,"Order could not be placed.":T},broad:{"Minimum order size is":w,"Check your account balance for details.":k,"Ensure this value has at least":x}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.fetchMarketsFromCache(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],c=this.safeString(o,"name"),u=c.split("/"),d=n(u,2),h=d[0],l=d[1],f=h.toLowerCase(),p=l.toLowerCase(),h=this.safeCurrencyCode(h),l=this.safeCurrencyCode(l),v=h+"/"+l,m=f+"_"+p,y=this.safeString(o,"url_symbol"),g={amount:this.safeInteger(o,"base_decimals"),price:this.safeInteger(o,"counter_decimals")},b=this.safeString(o,"minimum_order"),k=b.split(" "),x=k[0],w=this.safeString(o,"trading"),_="Enabled"===w,a.push({id:y,symbol:v,base:h,quote:l,baseId:f,quoteId:p,symbolId:m,info:o,active:_,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0},cost:{min:parseFloat(x),max:void 0}}});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"constructCurrencyObject",value:function(e,t,r,i,n,a){var s="crypto",o=this.describe();return this.isFiat(t)&&(s="fiat"),{id:e,code:t,info:a,type:s,name:r,active:!0,fee:this.safeFloat(o.fees.funding.withdraw,t),precision:i,limits:{amount:{min:Math.pow(10,-i),max:void 0},price:{min:Math.pow(10,-i),max:void 0},cost:{min:n,max:void 0},withdraw:{min:void 0,max:void 0}}}}},{key:"fetchMarketsFromCache",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchMarkets",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=10;break}return e.next=8,this.publicGetTradingPairsInfo(t);case 8:o=e.sent,this.options.fetchMarkets=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchMarkets,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.fetchMarketsFromCache(t);case 3:for(r=e.sent,a={},s=0;s<r.length;s++)o=r[s],c=this.safeString(o,"name"),u=c.split("/"),d=n(u,2),h=d[0],l=d[1],f=h.toLowerCase(),p=l.toLowerCase(),h=this.safeCurrencyCode(h),l=this.safeCurrencyCode(l),v=this.safeString(o,"description"),m=v.split(" / "),y=n(m,2),g=y[0],b=y[1],k=this.safeString(o,"minimum_order"),x=k.split(" "),w=x[0],h in a||(_=this.safeInteger(o,"base_decimals"),a[h]=this.constructCurrencyObject(f,h,g,_,void 0,o)),l in a||(O=this.safeInteger(o,"counter_decimals"),a[l]=this.constructCurrencyObject(p,l,b,O,parseFloat(w),o));return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetOrderBookPair(this.extend(n,r));case 7:return a=e.sent,s=this.safeInteger(a,"microtimestamp"),o=parseInt(s/1e3),(c=this.parseOrderBook(a,o)).nonce=s,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetTickerPair(this.extend(n,r));case 6:return a=e.sent,s=this.safeTimestamp(a,"timestamp"),o=this.safeFloat(a,"vwap"),c=this.safeFloat(a,"volume"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:o,open:this.safeFloat(a,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:u,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCurrencyIdFromTransaction",value:function(e){var t=this.safeStringLower(e,"currency");if(void 0!==t)return t;e=this.omit(e,["fee","price","datetime","type","status","id"]);for(var r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(n.indexOf("_")<0){var a=this.safeFloat(e,n);if(void 0!==a&&0!==a)return n}}}},{key:"getMarketFromTrade",value:function(e){e=this.omit(e,["fee","price","datetime","tid","type","order_id","side"]);var t=Object.keys(e),r=t.length;if(r>2)throw new v(this.id+" getMarketFromTrade too many keys: "+this.json(t)+" in the trade: "+this.json(e));if(2===r){var i=t[0]+t[1];if(i in this.markets_by_id)return this.markets_by_id[i];if((i=t[1]+t[0])in this.markets_by_id)return this.markets_by_id[i]}}},{key:"getMarketFromTrades",value:function(e){var t=this.indexBy(e,"symbol"),r=Object.keys(t);if(1===r.length)return this.markets[r[0]]}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","tid"),i=void 0,n=void 0,a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=this.safeString(e,"order_id"),c=void 0,u=this.safeFloat(e,"cost");if(void 0===t){for(var d=Object.keys(e),h=0;h<d.length;h++)if(d[h].indexOf("_")>=0){var l=d[h].replace("_","");l in this.markets_by_id&&(t=this.markets_by_id[l])}void 0===t&&(t=this.getMarketFromTrade(e))}var f=this.safeFloat(e,"fee"),p=void 0;void 0!==t&&(a=this.safeFloat(e,t.symbolId,a),s=this.safeFloat(e,t.baseId,s),u=this.safeFloat(e,t.quoteId,u),p=t.quote,i=t.symbol);var v=this.safeString2(e,"date","datetime");void 0!==v&&(v.indexOf(" ")>=0?v=this.parse8601(v):(v=parseInt(v),v*=1e3)),"id"in e?void 0!==s&&(s<0?(n="sell",s=-s):n="buy"):"1"===(n=this.safeString(e,"type"))?n="sell":"0"===n&&(n="buy"),void 0===u&&void 0!==a&&void 0!==s&&(u=a*s),void 0!==u&&(u=Math.abs(u));var m=void 0;return void 0!==f&&(m={cost:f,currency:p}),{id:r,info:e,timestamp:v,datetime:this.iso8601(v),symbol:i,order:o,type:c,side:n,takerOrMaker:void 0,price:a,amount:s,cost:u,fee:m}}},{key:"parseTradingFee",value:function(e,t){var r=this.market(t),i=this.safeFloat(e,r.id+"_fee");return{symbol:t,maker:i,taker:i}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id,time:"hour"},e.next=9,this.publicGetTransactionsPair(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={pair:o.id,step:this.timeframes[r]},u=this.parseTimeframe(r),void 0!==a){e.next=21;break}if(void 0!==n){e.next=14;break}throw new _(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 14:a=1e3,d=parseInt(n/1e3),c.start=d,c.end=this.sum(d,a*u),c.limit=a;case 19:e.next=23;break;case 21:void 0!==n&&(h=parseInt(n/1e3),c.start=h,c.end=this.sum(h,a*u)),c.limit=Math.min(a,1e3);case 23:return e.next=25,this.publicGetOhlcPair(this.extend(c,s));case 25:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.safeValue(f,"ohlc",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 29:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],c=this.currency(o),u=c.id,(d=this.account()).free=this.safeFloat(r,u+"_available"),d.used=this.safeFloat(r,u+"_reserved"),d.total=this.safeFloat(r,u+"_balance"),n[o]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n={},a="privatePostBalance",s=void 0,void 0!==t&&(s=this.market(t),n.pair=s.id,a+="Pair"),e.next=9,this[a](this.extend(n,r));case 9:return o=e.sent,e.abrupt("return",{info:o,symbol:t,maker:o.fee,taker:o.fee});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"praseTradingFees",value:function(e){for(var t={info:e},r=Object.keys(this.markets),i=0;i<r.length;i++){var n=r[i],a=this.parseTradingFee(e,n);t[n]=a}return t}},{key:"fetchTradingFees",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:return r=e.sent,e.abrupt("return",this.praseTradingFees(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFundingFees",value:function(e){for(var t={},r=Object.keys(e),i=0;i<r.length;i++){var n=r[i];if(n.indexOf("_withdrawal_fee")>=0){var a=n.split("_")[0];t[this.safeCurrencyCode(a)]=this.safeFloat(e,n)}}return{info:e,withdraw:t,deposit:{}}}},{key:"fetchFundingFees",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:return r=e.sent,e.abrupt("return",this.parseFundingFees(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFees",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:return r=e.sent,delete(n=this.praseTradingFees(r)).info,delete(a=this.parseFundingFees(r)).info,e.abrupt("return",{info:r,trading:n,funding:a});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u="privatePost"+this.capitalize(n),d={pair:c.id,amount:this.amountToPrecision(t,a)},"market"===r?u+="Market":"instant"===r?u+="Instant":d.price=this.priceToPrecision(t,s),u+="Pair",e.next=11,this[u](this.extend(d,o));case 11:return h=e.sent,l=this.parseOrder(h,c),e.abrupt("return",this.extend(l,{type:r}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}},{key:"fetchOrderStatus",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderStatus(this.safeString(a,"status")));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=void 0,void 0!==r&&(a=this.market(r)),s={id:t},e.next=9,this.privatePostOrderStatus(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="privatePostUserTransactions",c=void 0,void 0!==t&&(c=this.market(t),s.pair=c.id,o+="Pair"),void 0!==n&&(s.limit=n),e.next=13,this[o](this.extend(s,a));case 13:return u=e.sent,d=this.filterBy(u,"type","2"),e.abrupt("return",this.parseTrades(d,c,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.limit=n),e.next=10,this.privatePostUserTransactions(this.extend(s,a));case 10:return o=e.sent,c=void 0,void 0!==t&&(c=this.currency(t)),u=this.filterByArray(o,"type",["0","1"],!1),e.abrupt("return",this.parseTransactions(u,c,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return(a={}).timedelta=void 0!==t?this.milliseconds()-t:5e7,e.next=10,this.privatePostWithdrawalRequests(this.extend(a,n));case 10:return s=e.sent,e.abrupt("return",this.parseTransactions(s,void 0,t,r));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"datetime")),i=this.safeString(e,"id"),n=this.getCurrencyIdFromTransaction(e),a=this.safeCurrencyCode(n,t),s=this.safeFloat(e,"fee"),o=void 0,c=void 0;"amount"in e?c=this.safeFloat(e,"amount"):void 0!==t?(c=this.safeFloat(e,t.id,c),o=t.code):void 0!==a&&void 0!==n&&(c=this.safeFloat(e,n,c),o=a),void 0!==c&&(c=Math.abs(c));var u="ok";"status"in e&&(u=this.parseTransactionStatus(this.safeString(e,"status")));var d=void 0;if("type"in e){var h=this.safeString(e,"type");"0"===h?d="deposit":"1"===h&&(d="withdrawal")}else d="withdrawal";var l=this.safeString(e,"transaction_id"),f=void 0,p=this.safeString(e,"address");if(void 0!==p){var v=p.split("?dt="),m=v.length;m>1&&(p=v[0],f=v[1])}var y=void 0,g=p,b=void 0,k=f,x=void 0;return void 0!==s&&(x={currency:o,cost:s,rate:void 0}),{info:e,id:i,txid:l,timestamp:r,datetime:this.iso8601(r),addressFrom:y,addressTo:g,address:p,tagFrom:b,tagTo:k,tag:f,type:d,amount:c,currency:a,status:u,updated:void 0,fee:x}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"pending",2:"ok",3:"canceled",4:"failed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"type");void 0!==i&&(i="1"===i?"sell":"buy");var n=this.parse8601(this.safeString(e,"datetime")),a=void 0,s=void 0,o=this.safeStringLower(e,"currency_pair");void 0!==o&&(o=o.replace("/",""))in this.markets_by_id&&(s=(t=this.markets_by_id[o]).symbol);var c=this.safeFloat(e,"amount"),u=0,d=[],h=this.safeValue(e,"transactions",[]),l=void 0,f=void 0,p=h.length;if(p>0){l=0;for(var v=0;v<p;v++){var m=this.parseTrade(this.extend({order_id:r,side:i},h[v]),t);u=this.sum(u,m.amount),l=this.sum(l,m.fee.cost),void 0===f&&(f=0),f=this.sum(f,m.cost),d.push(m)}a=d[p-1].timestamp}var y=this.parseOrderStatus(this.safeString(e,"status"));"closed"===y&&void 0===c&&(c=u);var g=void 0;void 0!==c&&(g=c-u);var b=this.safeFloat(e,"price");void 0===t&&(t=this.getMarketFromTrades(d));var k=void 0;void 0!==t&&(void 0===s&&(s=t.symbol),k=t.quote),void 0===f?void 0!==b&&(f=b*u):void 0===b&&u>0&&(b=f/u);var x=void 0;return void 0!==l&&void 0!==k&&(x={cost:l,currency:k}),{id:r,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:a,status:y,symbol:s,type:void 0,timeInForce:void 0,postOnly:void 0,side:i,price:b,stopPrice:void 0,cost:f,amount:c,filled:u,remaining:g,trades:d,fee:x,info:e,average:void 0}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({0:"transaction",1:"transaction",2:"trade",14:"transfer"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=this.parseLedgerEntryType(this.safeString(e,"type"));if("trade"===t){for(var r=this.parseTrade(e),i=void 0,n=Object.keys(e),a=0;a<n.length;a++)if(n[a].indexOf("_")>=0){var s=n[a].replace("_","");s in this.markets_by_id&&(i=this.markets_by_id[s])}void 0===i&&(i=this.getMarketFromTrade(e));var o="buy"===r.side?"in":"out";return{id:r.id,info:e,timestamp:r.timestamp,datetime:r.datetime,direction:o,account:void 0,referenceId:r.order,referenceAccount:void 0,type:t,currency:i.base,amount:r.amount,before:void 0,after:void 0,status:"ok",fee:r.fee}}var c=this.parseTransaction(e),u=void 0;if("amount"in e){var d=this.safeFloat(e,"amount");u=d>0?"in":"out"}else if("currency"in c&&void 0!==c.currency){var h=this.currencyId(c.currency),l=this.safeFloat(e,h);u=l>0?"in":"out"}return{id:c.id,info:e,timestamp:c.timestamp,datetime:c.datetime,direction:u,account:void 0,referenceId:c.txid,referenceAccount:void 0,type:t,currency:c.currency,amount:c.amount,before:void 0,after:void 0,status:c.status,fee:c.fee}}},{key:"fetchLedger",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.limit=n),e.next=10,this.privatePostUserTransactions(this.extend(s,a));case 10:return o=e.sent,c=void 0,void 0!==t&&(c=this.currency(t)),e.abrupt("return",this.parseLedger(o,c,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},s=void 0,e.next=7,this.loadMarkets();case 7:return void 0!==t&&(s=this.market(t)),e.next=10,this.privatePostOpenOrdersAll(a);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o,s,r,n,{status:"open",type:"limit"}));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getCurrencyName",value:function(e){return"BTC"===e?"bitcoin":e.toLowerCase()}},{key:"isFiat",value:function(e){return"USD"===e||"EUR"===e||"GBP"===e}},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},!this.isFiat(t)){e.next=3;break}throw new m(this.id+" fiat fetchDepositAddress() for "+t+" is not supported!");case 3:return n=this.getCurrencyName(t),s=(a="BTC"===t)?"v1":"private",s+="Post"+this.capitalize(n),s+=a?"Deposit":"",s+="Address",e.next=11,this[s](r);case 11:return o=e.sent,a&&(o=JSON.parse(o)),c=a?o:this.safeString(o,"address"),u=a?void 0:this.safeString2(o,"memo_id","destination_tag"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(n),o={amount:r},c=void 0,this.isFiat(t)?(c="privatePostWithdrawalOpen",d=this.currency(t),o.iban=n,o.account_currency=d.id):(u=this.getCurrencyName(t),c="BTC"===t?"v1":"private",c+="Post"+this.capitalize(u)+"Withdrawal","XRP"===t&&void 0!==a&&(o.destination_tag=a),o.address=n),e.next=10,this[c](this.extend(o,s));case 10:return h=e.sent,e.abrupt("return",{info:h,id:h.id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/";"v1"!==t&&(s+=this.version+"/"),s+=this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.safeValue(this.options,"auth","v2");if("v1"===c||"v1"===t){var u=this.nonce().toString(),d=u+this.uid+this.apiKey,h=this.encode(this.hmac(this.encode(d),this.encode(this.secret)));o=this.extend({key:this.apiKey,signature:h.toUpperCase(),nonce:u},o),a=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded"}}else{var l="BITSTAMP "+this.apiKey,f=this.uuid(),p=this.milliseconds().toString(),v="v2",m="";n={"X-Auth":l,"X-Auth-Nonce":f,"X-Auth-Timestamp":p,"X-Auth-Version":v},"POST"===r&&(Object.keys(o).length?(a=this.urlencode(o),m="application/x-www-form-urlencoded",n["Content-Type"]=m):(a=this.urlencode({foo:"bar"}),m="application/x-www-form-urlencoded",n["Content-Type"]=m));var y=a||"",g=l+r+s.replace("https://","")+m+f+p+v+y,b=this.hmac(this.encode(g),this.encode(this.secret));n["X-Auth-Signature"]=b}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"status"),d=this.safeValue(s,"error");if("error"===u||void 0!==d){var h=[];if("string"===typeof d)h.push(d);else if(void 0!==d)for(var l=Object.keys(d),f=0;f<l.length;f++){var m=l[f],y=this.safeValue(d,m);Array.isArray(y)?h=this.arrayConcat(h,y):h.push(y)}var g=this.safeValue(s,"reason",{});if("string"===typeof g)h.push(g);else for(var b=this.safeValue(g,"__all__",[]),k=0;k<b.length;k++)h.push(b[k]);if("API0005"===this.safeString(s,"code"))throw new p(this.id+" invalid signature, use the uid for the main account if you have subaccounts");for(var x=this.id+" "+a,w=0;w<h.length;w++){var _=h[w];this.throwExactlyMatchedException(this.exceptions.exact,_,x),this.throwBroadlyMatchedException(this.exceptions.broad,_,x)}throw new v(x)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitstamp1",name:"Bitstamp",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOrder:!1,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27786377-8c8ab57e-5fe9-11e7-8ea4-2b05b6bcceec.jpg",api:"https://www.bitstamp.net/api",www:"https://www.bitstamp.net",doc:"https://www.bitstamp.net/api"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["ticker","ticker_hour","order_book","transactions","eur_usd"]},private:{post:["balance","user_transactions","open_orders","order_status","cancel_order","cancel_all_orders","buy","sell","bitcoin_deposit_address","unconfirmed_btc","ripple_withdrawal","ripple_address","withdrawal_requests","bitcoin_withdrawal"]}},markets:{"BTC/USD":{id:"btcusd",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"btc",quoteId:"usd",maker:.005,taker:.005},"BTC/EUR":{id:"btceur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur",maker:.005,taker:.005},"EUR/USD":{id:"eurusd",symbol:"EUR/USD",base:"EUR",quote:"USD",baseId:"eur",quoteId:"usd",maker:.005,taker:.005},"XRP/USD":{id:"xrpusd",symbol:"XRP/USD",base:"XRP",quote:"USD",baseId:"xrp",quoteId:"usd",maker:.005,taker:.005},"XRP/EUR":{id:"xrpeur",symbol:"XRP/EUR",base:"XRP",quote:"EUR",baseId:"xrp",quoteId:"eur",maker:.005,taker:.005},"XRP/BTC":{id:"xrpbtc",symbol:"XRP/BTC",base:"XRP",quote:"BTC",baseId:"xrp",quoteId:"btc",maker:.005,taker:.005},"LTC/USD":{id:"ltcusd",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"ltc",quoteId:"usd",maker:.005,taker:.005},"LTC/EUR":{id:"ltceur",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"ltc",quoteId:"eur",maker:.005,taker:.005},"LTC/BTC":{id:"ltcbtc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc",maker:.005,taker:.005},"ETH/USD":{id:"ethusd",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"eth",quoteId:"usd",maker:.005,taker:.005},"ETH/EUR":{id:"etheur",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"eth",quoteId:"eur",maker:.005,taker:.005},"ETH/BTC":{id:"ethbtc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.005,taker:.005}}})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},"BTC/USD"===t){e.next=4;break}throw new p(this.id+" "+this.version+" fetchOrderBook doesn't support "+t+", use it for BTC/USD only");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.publicGetOrderBook(r);case 8:return n=e.sent,a=this.safeTimestamp(n,"timestamp"),e.abrupt("return",this.parseOrderBook(n,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:{},"BTC/USD"===t){e.next=3;break}throw new p(this.id+" "+this.version+" fetchTicker doesn't support "+t+", use it for BTC/USD only");case 3:return e.next=5,this.loadMarkets();case 5:return e.next=7,this.publicGetTicker(r);case 7:return n=e.sent,a=this.safeTimestamp(n,"timestamp"),s=this.safeFloat(n,"vwap"),o=this.safeFloat(n,"volume"),c=void 0,void 0!==o&&void 0!==s&&(c=o*s),u=this.safeFloat(n,"last"),e.abrupt("return",{symbol:t,timestamp:a,datetime:this.iso8601(a),high:this.safeFloat(n,"high"),low:this.safeFloat(n,"low"),bid:this.safeFloat(n,"bid"),bidVolume:void 0,ask:this.safeFloat(n,"ask"),askVolume:void 0,vwap:s,open:this.safeFloat(n,"open"),close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:o,quoteVolume:c,info:n});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"date","datetime"),i=0===e.type?"buy":"sell",n=this.safeString(e,"order_id");"currency_pair"in e&&e.currency_pair in this.markets_by_id&&(t=this.markets_by_id[e.currency_pair]);var a=this.safeString(e,"tid"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==s&&void 0!==o&&(c=s*o);var u=void 0;return void 0!==t&&(u=t.symbol),{id:a,info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,order:n,type:void 0,side:i,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},"BTC/USD"===t){e.next=5;break}throw new f(this.id+" "+this.version+" fetchTrades doesn't support "+t+", use it for BTC/USD only");case 5:return e.next=7,this.loadMarkets();case 7:return s=this.market(t),o={time:"minute"},e.next=11,this.publicGetTransactions(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privatePostBalance(t);case 3:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],c=this.currency(o),u=c.id,(d=this.account()).free=this.safeFloat(r,u+"_available"),d.used=this.safeFloat(r,u+"_reserved"),d.total=this.safeFloat(r,u+"_balance"),n[o]=d;return e.abrupt("return",this.parseBalance(n));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" "+this.version+" accepts limit orders only");case 4:if("BTC/USD"===t){e.next=6;break}throw new p(this.id+" v1 supports BTC/USD orders only");case 6:return e.next=8,this.loadMarkets();case 8:return c="privatePost"+this.capitalize(n),u={amount:a,price:s},e.next=12,this[c](this.extend(u,o));case 12:return d=e.sent,h=this.safeString(d,"id"),e.abrupt("return",{info:d,id:h});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},e.next=4,this.privatePostCancelOrder({id:t});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"In Queue":"open",Open:"open",Finished:"closed",Canceled:"canceled"},e,e)}},{key:"fetchOrderStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderStatus(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o=s?s.id:"all",c={id:o},e.next=12,this.privatePostOpenOrdersId(this.extend(c,a));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new v(this.id+" fetchOrder is not implemented yet");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c+this.uid+this.apiKey,d=this.encode(this.hmac(this.encode(u),this.encode(this.secret)));o=this.extend({key:this.apiKey,signature:d.toUpperCase(),nonce:c},o),a=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("status"in(c=e.sent))){e.next=11;break}if("error"!==c.status){e.next=11;break}throw new p(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError,v=l.ExchangeNotAvailable,m=l.AuthenticationError,y=l.InvalidOrder,g=l.InsufficientFunds,b=l.OrderNotFound,k=l.DDoSProtection,x=l.PermissionDenied,w=l.AddressPending,_=l.OnMaintenance,O=l.BadRequest,T=l.InvalidAddress,S=r(13),C=S.TRUNCATE,I=S.DECIMAL_PLACES;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bittrex",name:"Bittrex",countries:["US"],version:"v3",rateLimit:1500,certified:!0,pro:!0,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchDeposits:!0,fetchDepositAddress:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOrder:!0,fetchOrderTrades:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"MINUTE_1","5m":"MINUTE_5","1h":"HOUR_1","1d":"DAY_1"},hostname:"bittrex.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/87153921-edf53180-c2c0-11ea-96b9-f2a9a95a455b.jpg",api:{public:"https://api.bittrex.com",private:"https://api.bittrex.com"},www:"https://bittrex.com",doc:["https://bittrex.github.io/api/v3"],fees:["https://bittrex.zendesk.com/hc/en-us/articles/115003684371-BITTREX-SERVICE-FEES-AND-WITHDRAWAL-LIMITATIONS","https://bittrex.zendesk.com/hc/en-us/articles/115000199651-What-fees-does-Bittrex-charge-"],referral:"https://bittrex.com/Account/Register?referralCode=1ZE-G0G-M3B"},api:{public:{get:["ping","currencies","currencies/{symbol}","markets","markets/tickers","markets/summaries","markets/{marketSymbol}","markets/{marketSymbol}/summary","markets/{marketSymbol}/orderbook","markets/{marketSymbol}/trades","markets/{marketSymbol}/ticker","markets/{marketSymbol}/candles/{candleInterval}/recent","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}/{day}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}/{month}","markets/{marketSymbol}/candles/{candleInterval}/historical/{year}"]},private:{get:["account","account/volume","addresses","addresses/{currencySymbol}","balances","balances/{currencySymbol}","deposits/open","deposits/closed","deposits/ByTxId/{txId}","deposits/{depositId}","orders/closed","orders/open","orders/{orderId}","orders/{orderId}/executions","ping","subaccounts/{subaccountId}","subaccounts","withdrawals/open","withdrawals/closed","withdrawals/ByTxId/{txId}","withdrawals/{withdrawalId}","withdrawals/whitelistAddresses","conditional-orders/{conditionalOrderId}","conditional-orders/closed","conditional-orders/open","transfers/sent","transfers/received","transfers/{transferId}"],post:["addresses","orders","subaccounts","withdrawals","conditional-orders","transfers"],delete:["orders/open","orders/{orderId}","withdrawals/{withdrawalId}","conditional-orders/{conditionalOrderId}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0035,taker:.0035},funding:{tierBased:!1,percentage:!1}},exceptions:{exact:{BAD_REQUEST:O,STARTDATE_OUT_OF_RANGE:O,APISIGN_NOT_PROVIDED:m,INVALID_SIGNATURE:m,INVALID_CURRENCY:p,INVALID_PERMISSION:m,INSUFFICIENT_FUNDS:g,INVALID_CEILING_MARKET_BUY:y,INVALID_FIAT_ACCOUNT:y,INVALID_ORDER_TYPE:y,QUANTITY_NOT_PROVIDED:y,MIN_TRADE_REQUIREMENT_NOT_MET:y,ORDER_NOT_OPEN:b,INVALID_ORDER:y,UUID_INVALID:b,RATE_NOT_PROVIDED:y,INVALID_MARKET:f,WHITELIST_VIOLATION_IP:x,DUST_TRADE_DISALLOWED_MIN_VALUE:y,RESTRICTED_MARKET:f,"We are down for scheduled maintenance, but we\u2019ll be back up shortly.":_},broad:{throttled:k,problem:v}},options:{fetchTicker:{method:"publicGetMarketsMarketSymbolTicker"},fetchTickers:{method:"publicGetMarketsTickers"},parseOrderStatus:!1,hasAlreadyAuthenticatedSuccessfully:!1,tag:{NXT:!0,CRYPTO_NOTE_PAYMENTID:!0,BITSHAREX:!0,RIPPLE:!0,NEM:!0,STELLAR:!0,STEEM:!0},subaccountId:void 0,fetchClosedOrdersFilterBySince:!0},commonCurrencies:{REPV2:"REP"}})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,C,this.markets[e].precision.price,I)}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,C,this.markets[e].precision.price,I)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"baseCurrencySymbol"),c=this.safeString(s,"quoteCurrencySymbol"),u=this.safeString(s,"symbol"),d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(c),l=d+"/"+h,f=this.safeInteger(s,"precision",8),p={amount:8,price:f},v=this.safeString(s,"status"),m="ONLINE"===v,n.push({id:u,symbol:l,base:d,quote:h,baseId:o,quoteId:c,active:m,info:s,precision:p,limits:{amount:{min:this.safeFloat(s,"minTradeSize"),max:void 0},price:{min:1/Math.pow(10,p.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n={info:r},a=this.indexBy(r,"currencySymbol"),s=Object.keys(a),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),d=this.account(),h=a[c],d.free=this.safeFloat(h,"available"),d.total=this.safeFloat(h,"total"),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:if(a={marketSymbol:this.marketId(t)},void 0===r){e.next=9;break}if(1===r||25===r||500===r){e.next=8;break}throw new O(this.id+" fetchOrderBook() limit argument must be undefined, 1, 25 or 500, default is 25");case 8:a.depth=r;case 9:return e.next=11,this.publicGetMarketsMarketSymbolOrderbook(this.extend(a,n));case 11:return s=e.sent,o=this.safeInteger(this.last_response_headers,"Sequence"),(c=this.parseOrderBook(s,void 0,"bid","ask","rate","quantity")).nonce=o,e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeCurrencyCode(o),u=8,d=this.safeFloat(s,"txFee"),h=this.safeString(s,"status"),n[c]={id:o,code:c,address:this.safeString(s,"baseAddress"),info:s,type:this.safeString(s,"coinType"),name:this.safeString(s,"name"),active:"ONLINE"===h,fee:d,precision:u,limits:{amount:{min:1/Math.pow(10,u),max:void 0},price:{min:1/Math.pow(10,u),max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:d,max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"updatedAt")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"-"),a=this.safeFloat(e,"percentChange"),s=this.safeFloat(e,"lastTradeRate");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidRate"),bidVolume:void 0,ask:this.safeFloat(e,"askRate"),askVolume:void 0,vwap:void 0,open:void 0,close:s,last:s,previousClose:void 0,change:void 0,percentage:a,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue(this.options,"fetchTickers",{}),a=this.safeString(n,"method","publicGetMarketsTickers"),s=this.safeString(r,"method",a),r=this.omit(r,"method"),e.next=10,this[s](r);case 10:for(o=e.sent,c=[],u=0;u<o.length;u++)d=this.parseTicker(o[u]),c.push(d);return e.abrupt("return",this.filterByArray(c,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={marketSymbol:n.id},s=this.safeValue(this.options,"fetchTicker",{}),o=this.safeString(s,"method","publicGetMarketsMarketSymbolTicker"),c=this.safeString(r,"method",o),r=this.omit(r,"method"),e.next=11,this[c](this.extend(a,r));case 11:return u=e.sent,e.abrupt("return",this.parseTicker(u,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"executedAt")),i=this.safeString(e,"id"),n=this.safeString(e,"orderId"),a=this.safeString(e,"marketSymbol");t=this.safeMarket(a,t,"-");var s=void 0,o=this.safeFloat(e,"rate"),c=this.safeFloat(e,"quantity");void 0!==c&&void 0!==o&&(s=o*c);var u=void 0,d=this.safeValue(e,"isTaker");void 0!==d&&(u=d?"taker":"maker");var h=void 0,l=this.safeFloat(e,"commission");void 0!==l&&(h={cost:l,currency:t.quote});var f=this.safeStringLower(e,"takerSide");return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,id:i,order:n,takerOrMaker:u,type:void 0,side:f,price:o,amount:c,cost:s,fee:h}}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={marketSymbol:this.marketId(t)},e.next=9,this.publicGetMarketsMarketSymbolTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"startsAt")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"1m",n=b.length>2&&void 0!==b[2]?b[2]:void 0,a=b.length>3&&void 0!==b[3]?b[3]:void 0,s=b.length>4&&void 0!==b[4]?b[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=o.baseId+"-"+o.quoteId,u={candleInterval:this.timeframes[r],marketSymbol:c},d="publicGetMarketsMarketSymbolCandlesCandleIntervalRecent",void 0!==n&&(h=this.milliseconds(),l=Math.abs(h-n),f=this.ymd(n),p=f.split("-"),v=this.safeInteger(p,0),m=this.safeInteger(p,1),y=this.safeInteger(p,2),"1d"===r?l>316224e5&&(d="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYear",u.year=v):"1h"===r?l>26784e5&&(d="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonth",u.year=v,u.month=m):l>864e5&&(d="publicGetMarketsMarketSymbolCandlesCandleIntervalHistoricalYearMonthDay",u.year=v,u.month=m,u.day=y)),e.next=13,this[d](this.extend(u,s));case 13:return g=e.sent,e.abrupt("return",this.parseOHLCVs(g,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.marketSymbol=o.id),e.next=11,this.privateGetOrdersOpen(this.extend(s,a));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={orderId:t},e.next=9,this.privateGetOrdersOrderIdExecutions(this.extend(o,s));case 9:return c=e.sent,u=void 0,void 0!==r&&(u=this.market(r)),e.abrupt("return",this.parseTrades(c,u,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=r.toUpperCase(),d=c.baseId+"-"+c.quoteId,h={marketSymbol:d,direction:n.toUpperCase(),type:u},f="CEILING_MARKET"===u,(l="CEILING_LIMIT"===u)||f?(p=void 0,l?(h.limit=this.priceToPrecision(t,s),p=this.safeFloat2(o,"ceiling","cost",a)):f&&void 0===(p=this.safeFloat2(o,"ceiling","cost"))&&(p=void 0===s?a:a*s),o=this.omit(o,["ceiling","cost"]),h.ceiling=this.costToPrecision(t,p),h.timeInForce="IMMEDIATE_OR_CANCEL"):(h.quantity=this.amountToPrecision(t,a),"LIMIT"===u?(h.limit=this.priceToPrecision(t,s),h.timeInForce="GOOD_TIL_CANCELLED"):h.timeInForce="IMMEDIATE_OR_CANCEL"),e.next=14,this.privatePostOrders(this.extend(h,o));case 14:return v=e.sent,e.abrupt("return",this.parseOrder(v,c));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privateDeleteOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.extend(this.parseOrder(a),{id:t,info:a,status:"canceled"}));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.marketSymbol=a.id),e.next=9,this.privateDeleteOrdersOpen(this.extend(n,r));case 9:for(s=e.sent,o=[],c=0;c<s.length;c++)u=this.safeValue(s[c],"result",{}),o.push(u);return e.abrupt("return",this.parseOrders(o,a));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,n=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return a={},s=void 0,void 0!==t&&(s=this.currency(t),a.currencySymbol=s.id),e.next=11,this.privateGetDepositsClosed(this.extend(a,n));case 11:return o=e.sent,e.abrupt("return",this.parseTransactions(o,s,void 0,r));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currencySymbol=o.id),e.next=11,this.privateGetWithdrawalsClosed(this.extend(s,a));case 11:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeFloat(e,"quantity"),n=this.safeString(e,"cryptoAddress"),a=this.safeString(e,"txId"),s=this.parse8601(this.safeString(e,"updatedAt")),o=this.parse8601(this.safeString(e,"createdAt")),c=o||s,u=void 0===o?"deposit":"withdrawal",d=this.safeString(e,"currencySymbol"),h=this.safeCurrencyCode(d,t),l="pending";if("deposit"===u)l="ok";else{var f=this.safeString(e,"status");"ERROR_INVALID_ADDRESS"===f?l="failed":"CANCELLED"===f?l="canceled":"PENDING"===f?l="pending":("COMPLETED"===f||"AUTHORIZED"===f&&void 0!==a)&&(l="ok")}var p=this.safeFloat(e,"txCost");return void 0===p&&"deposit"===u&&(p=0),{info:e,id:r,currency:h,amount:i,address:n,tag:void 0,status:l,type:u,updated:s,txid:a,timestamp:c,datetime:this.iso8601(c),fee:{currency:h,cost:p}}}},{key:"parseTimeInForce",value:function(e){return this.safeString({GOOD_TIL_CANCELLED:"GTC",IMMEDIATE_OR_CANCEL:"IOC",FILL_OR_KILL:"FOK",POST_ONLY_GOOD_TIL_CANCELLED:"PO"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketSymbol"),i=(t=this.safeMarket(r,t,"-")).symbol,n=t.quote,a=this.safeStringLower(e,"direction"),s=this.safeString(e,"createdAt"),o=this.safeString(e,"updatedAt"),c=this.safeString(e,"closedAt"),u=void 0;void 0!==c?u=this.parse8601(c):o&&(u=this.parse8601(o));var d=this.parse8601(s),h=this.safeStringLower(e,"type"),l=this.safeFloat(e,"quantity"),f=this.safeFloat(e,"limit"),p=this.safeFloat(e,"fillQuantity"),v=this.safeFloat(e,"commission"),m=this.safeFloat(e,"proceeds"),y=this.safeStringLower(e,"status"),g=this.parseTimeInForce(this.safeString(e,"timeInForce")),b="PO"===g;return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:u,symbol:i,type:h,timeInForce:g,postOnly:b,side:a,price:f,stopPrice:void 0,cost:m,average:void 0,amount:l,filled:p,remaining:void 0,status:y,fee:{cost:v,currency:n},info:e,trades:void 0})}},{key:"parseOrders",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return this.options.fetchClosedOrdersFilterBySince?o(c(r.prototype),"parseOrders",this).call(this,e,t,i,n,a):o(c(r.prototype),"parseOrders",this).call(this,e,t,void 0,n,a)}},{key:"parseOrderStatus",value:function(e){return this.safeString({CLOSED:"closed",OPEN:"open",CANCELLED:"canceled",CANCELED:"canceled"},e,e)}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n=void 0,e.prev=5,a={orderId:t},e.next=9,this.privateGetOrdersOrderId(this.extend(a,r));case 9:n=e.sent,e.next=19;break;case 12:if(e.prev=12,e.t0=e.catch(5),!this.last_json_response){e.next=18;break}if("UUID_INVALID"!==this.safeString(this.last_json_response,"message")){e.next=18;break}throw new b(this.id+" fetchOrder() error: "+this.last_http_response);case 18:throw e.t0;case 19:return e.abrupt("return",this.parseOrder(n));case 20:case"end":return e.stop()}}),e,this,[[5,12]])})));return function(t){return e.apply(this,arguments)}}()},{key:"orderToTrade",value:function(e){var t=this.safeInteger2(e,"lastTradeTimestamp","timestamp");return{id:this.safeString(e,"id"),side:this.safeString(e,"side"),order:this.safeString(e,"id"),type:this.safeString(e,"type"),price:this.safeFloat(e,"average"),amount:this.safeFloat(e,"filled"),cost:this.safeFloat(e,"cost"),symbol:this.safeString(e,"symbol"),timestamp:t,datetime:this.iso8601(t),fee:this.safeValue(e,"fee"),info:e,takerOrMaker:void 0}}},{key:"ordersToTrades",value:function(e){for(var t=[],r=0;r<e.length;r++)t.push(this.orderToTrade(e[r]));return t}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymdhms(r,"T")+"Z"),o=void 0,void 0!==t&&(o=this.market(t),s.marketSymbol=o.base+"-"+o.quote),e.next=13,this.privateGetOrdersClosed(this.extend(s,a));case 13:return c=e.sent,u=this.parseOrders(c,o),d=this.ordersToTrades(u),e.abrupt("return",this.filterBySymbolSinceLimit(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==n&&(s.pageSize=n),void 0!==r&&(s.startDate=this.ymdhms(r,"T")+"Z"),o=void 0,void 0!==t&&(o=this.market(t),s.marketSymbol=o.base+"-"+o.quote),e.next=13,this.privateGetOrdersClosed(this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencySymbol:n.id},e.next=7,this.privatePostAddresses(this.extend(a,r));case 7:if(s=e.sent,o=this.safeString(s,"cryptoAddress"),c=this.safeString(s,"status"),o&&"REQUESTED"!==c){e.next=12;break}throw new w(this.id+" the address for "+t+" is being generated (pending, not ready yet, retry again later)");case 12:return void 0===(u=this.safeString(s,"cryptoAddressTag"))&&n.type in this.options.tag&&(u=o,o=n.address),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:s});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencySymbol:n.id},e.next=7,this.privateGetAddressesCurrencySymbol(this.extend(a,r));case 7:if(s=e.sent,o=this.safeString(s,"cryptoAddress"),c=this.safeString(s,"status"),o&&"REQUESTED"!==c){e.next=12;break}throw new w(this.id+" the address for "+t+" is being generated (pending, not ready yet, retry again later)");case 12:return void 0===(u=this.safeString(s,"cryptoAddressTag"))&&n.type in this.options.tag&&(u=o,o=n.address),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:u,info:s});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currencySymbol:o.id,quantity:r,cryptoAddress:n},void 0!==a&&(c.cryptoAddressTag=a),e.next=10,this.privatePostWithdrawals(this.extend(c,s));case 10:return u=e.sent,d=this.safeString(u,"id"),e.abrupt("return",{info:u,id:d});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"v3",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("private"===t){s+=this.version+"/",this.checkRequiredCredentials(),s+=this.implodeParams(e,i),i=this.omit(i,this.extractParams(e));var o="";"POST"===r?o=a=this.json(i):Object.keys(i).length&&(s+="?"+this.rawencode(i));var c=this.hash(this.encode(o),"sha512","hex"),u=this.milliseconds().toString(),d=u+s+r+c,h=this.safeValue(this.options,"subaccountId");void 0!==h&&(d+=h);var l=this.hmac(this.encode(d),this.encode(this.secret),"sha512");n={"Api-Key":this.apiKey,"Api-Timestamp":u,"Api-Content-Hash":c,"Api-Signature":l},void 0!==h&&(n["Api-Subaccount-Id"]=h),"POST"===r&&(n["Content-Type"]="application/json")}else"public"===t&&(s+=this.version+"/"),s+=this.implodeParams(e,i),i=this.omit(i,this.extractParams(e)),Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"{"===a[0]){var u=this.id+" "+a,d=this.safeValue(s,"success");if(void 0===d){var h=this.safeString(s,"code");if(void 0!==h&&(this.throwExactlyMatchedException(this.exceptions.exact,h,u),this.throwBroadlyMatchedException(this.exceptions.broad,h,u)),"NOT_FOUND"===h&&r.indexOf("addresses")>=0)throw new T(u);return}if("string"===typeof d&&(d="true"===d),!d){var l=this.safeString(s,"message");if("APIKEY_INVALID"===l)throw this.options.hasAlreadyAuthenticatedSuccessfully?new k(u):new m(u);if("INVALID_ORDER"===l){if(r.indexOf("cancel")>=0){var f=r.split("?");if(f.length>1){for(var v=f[1].split("&"),y=v.length,g=void 0,x=0;x<y;x++){var w=v[x].split("=");if("uuid"===w[0]){g=w[1];break}}throw new b(void 0!==g?this.id+" cancelOrder "+g+" "+this.json(s):this.id+" cancelOrder "+this.json(s))}}}throw this.throwExactlyMatchedException(this.exceptions.exact,l,u),void 0!==l&&this.throwBroadlyMatchedException(this.exceptions.broad,l,u),new p(u)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.BadSymbol,v=l.AuthenticationError,m=l.InsufficientFunds,y=l.InvalidOrder,g=l.ArgumentsRequired,b=l.OrderNotFound,k=l.InvalidAddress,x=l.BadRequest,w=l.RateLimitExceeded,_=l.PermissionDenied,O=l.ExchangeNotAvailable,T=l.AccountSuspended,S=l.OnMaintenance,C=r(13),I=C.SIGNIFICANT_DIGITS,M=C.DECIMAL_PLACES,E=C.TRUNCATE,A=C.ROUND;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bitvavo",name:"Bitvavo",countries:["NL"],rateLimit:500,version:"v2",certified:!0,pro:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderBook:!0,fetchMarkets:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83165440-2f1cf200-a116-11ea-9046-a255d09fb2ed.jpg",api:{public:"https://api.bitvavo.com",private:"https://api.bitvavo.com"},www:"https://bitvavo.com/",doc:"https://docs.bitvavo.com/",fees:"https://bitvavo.com/en/fees",referral:"https://bitvavo.com/?a=24F34952F7"},api:{public:{get:["time","markets","assets","{market}/book","{market}/trades","{market}/candles","ticker/price","ticker/book","ticker/24h"]},private:{get:["order","orders","ordersOpen","trades","balance","deposit","depositHistory","withdrawalHistory"],post:["order","withdrawal"],put:["order"],delete:["order","orders"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:.002,tiers:{taker:[[0,.0025],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,.001]],maker:[[0,.002],[5e4,.0015],[1e5,.001],[25e4,6e-4],[5e5,3e-4],[1e6,1e-4],[25e5,-1e-4],[5e6,-3e-4],[1e7,-5e-4]]}}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{101:f,102:x,103:w,104:w,105:_,107:O,108:O,109:O,110:x,200:x,201:x,202:x,203:p,204:x,205:x,206:x,210:y,211:y,212:y,213:y,214:y,215:y,216:m,217:y,230:f,231:f,232:x,233:y,234:y,235:f,236:x,240:b,300:v,301:v,302:v,303:v,304:v,305:v,306:v,307:_,308:v,309:v,310:_,311:_,312:_,315:x,317:T,400:f,401:f,402:_,403:_,404:S,405:f,406:x,407:f,408:m,409:k,410:f,411:x,412:k,413:k,414:f},broad:{"start parameter is invalid":x,"symbol parameter is invalid":p,"amount parameter is invalid":y,"orderId parameter is invalid":y}},options:{"BITVAVO-ACCESS-WINDOW":1e4,fetchCurrencies:{expires:1e3}},precisionMode:I,commonCurrencies:{MIOTA:"IOTA"}})}},{key:"currencyToPrecision",value:function(e,t){return this.decimalToPrecision(t,0,this.currencies[e].precision)}},{key:"amountToPrecision",value:function(e,t){return this.decimalToPrecision(t,E,this.markets[e].precision.amount,M)}},{key:"priceToPrecision",value:function(e,t){return t=this.decimalToPrecision(t,A,this.markets[e].precision.price,this.precisionMode),this.decimalToPrecision(t,E,8,M)}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:return r=e.sent,e.next=6,this.fetchCurrenciesFromCache(t);case 6:for(n=e.sent,a=this.indexBy(n,"symbol"),s=[],o=0;o<r.length;o++)c=r[o],u=this.safeString(c,"market"),d=this.safeString(c,"base"),h=this.safeString(c,"quote"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v=this.safeString(c,"status"),m="trading"===v,y=this.safeValue(a,d),g=void 0,void 0!==y&&(g=this.safeInteger(y,"decimals",8)),b={price:this.safeInteger(c,"pricePrecision"),amount:g},s.push({id:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,info:c,active:m,precision:b,limits:{amount:{min:this.safeFloat(c,"minOrderInBaseAsset"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(c,"minOrderInQuoteAsset"),max:void 0}}});return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=10;break}return e.next=8,this.publicGetAssets(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeCurrencyCode(o),u=this.safeValue(s,"depositStatus"),d="OK"===u,h=this.safeValue(s,"withdrawalStatus"),l="OK"===h,f=d&&l,p=this.safeString(s,"name"),v=this.safeInteger(s,"decimals",8),n[c]={id:o,info:s,code:c,name:p,active:f,fee:this.safeFloat(s,"withdrawalFee"),precision:v,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"withdrawalMinAmount"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTicker24h(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.safeInteger(e,"timestamp"),a=this.safeFloat(e,"last"),s=this.safeFloat(e,"volume"),o=this.safeFloat(e,"volumeQuote"),c=this.vwap(s,o),u=void 0,d=void 0,h=void 0,l=this.safeFloat(e,"open");void 0!==l&&void 0!==a&&(u=a-l,l>0&&(d=u/l*100),h=this.sum(l,a)/2);var f={symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bidSize"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"askSize"),vwap:c,open:l,close:a,last:a,previousClose:void 0,change:u,percentage:d,average:h,baseVolume:s,quoteVolume:o,info:e};return f}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker24h(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.start=r),e.next=11,this.publicGetMarketTrades(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"price"),i=this.safeFloat(e,"amount"),n=void 0;void 0!==r&&void 0!==i&&(n=r*i);var a=this.safeInteger(e,"timestamp"),s=this.safeString(e,"side"),o=this.safeString2(e,"id","fillId"),c=this.safeInteger(e,"market"),u=this.safeSymbol(c,t,"-"),d=this.safeValue(e,"taker"),h=void 0;void 0!==d&&(h=d?"taker":"maker");var l=this.safeFloat(e,"fee"),f=void 0;if(void 0!==l){var p=this.safeString(e,"feeCurrency"),v=this.safeCurrencyCode(p);f={cost:l,currency:v}}var m=this.safeString(e,"orderId");return{info:e,id:o,symbol:u,timestamp:a,datetime:this.iso8601(a),order:m,type:void 0,side:s,takerOrMaker:h,price:r,amount:i,cost:n,fee:f}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={market:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetMarketBook(this.extend(a,n));case 8:return s=e.sent,(o=this.parseOrderBook(s)).nonce=this.safeInteger(s,"nonce"),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,interval:this.timeframes[r]},void 0!==n&&(c.start=n),void 0!==a&&(c.limit=a),e.next=12,this.publicGetMarketCandles(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeCurrencyCode(o),u={free:this.safeFloat(s,"available"),used:this.safeFloat(s,"inOrder")},n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={symbol:n.id},e.next=7,this.privateGetDeposit(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),c=this.safeString(s,"paymentId"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={market:c.id,side:n,orderType:r},d="stopLossLimit"===r||"takeProfitLimit"===r,h="stopLoss"===r||"takeProfit"===r,"market"!==r){e.next=15;break}l=void 0,void 0!==(l=void 0!==s?a*s:this.safeFloat2(o,"cost","amountQuote"))?(f=c.precision.price,u.amountQuote=this.decimalToPrecision(l,E,f,this.precisionMode)):u.amount=this.amountToPrecision(t,a),o=this.omit(o,["cost","amountQuote"]),e.next=38;break;case 15:if("limit"!==r){e.next=20;break}u.price=this.priceToPrecision(t,s),u.amount=this.amountToPrecision(t,a),e.next=38;break;case 20:if(!h&&!d){e.next=38;break}if(void 0!==(p=this.safeFloat2(o,"stopPrice","triggerAmount"))){e.next=33;break}if(!d){e.next=27;break}throw new g(this.id+" createOrder requires a stopPrice parameter for a "+r+" order");case 27:if(!h){e.next=33;break}if(void 0!==s){e.next=32;break}throw new g(this.id+" createOrder requires a price argument or a stopPrice parameter for a "+r+" order");case 32:p=s;case 33:d&&(u.price=this.priceToPrecision(t,s)),o=this.omit(o,["stopPrice","triggerAmount"]),u.triggerAmount=this.priceToPrecision(t,p),u.triggerType="price",u.amount=this.amountToPrecision(t,a);case 38:return e.next=40,this.privatePostOrder(this.extend(u,o));case 40:return v=e.sent,e.abrupt("return",this.parseOrder(v,c));case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:void 0,c=f.length>6&&void 0!==f[6]?f[6]:{},e.next=5,this.loadMarkets();case 5:if(u=this.market(r),d={},h=this.safeFloat(c,"amountRemaining"),c=this.omit(c,"amountRemaining"),void 0!==o&&(d.price=this.priceToPrecision(r,o)),void 0!==s&&(d.amount=this.amountToPrecision(r,s)),void 0!==h&&(d.amountRemaining=this.amountToPrecision(r,h)),d=this.extend(d,c),!Object.keys(d).length){e.next=22;break}return d.orderId=t,d.market=u.id,e.next=18,this.privatePutOrder(this.extend(d,c));case 18:return l=e.sent,e.abrupt("return",this.parseOrder(l,u));case 22:throw new g(this.id+" editOrder() requires an amount argument, or a price argument, or non-empty params");case 23:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={orderId:t,market:a.id},e.next=10,this.privateDeleteOrder(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.market(t),n.market=a.id),e.next=9,this.privateDeleteOrders(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",this.parseOrders(s,a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(r),s={orderId:t,market:a.id},e.next=12,this.privateGetOrder(this.extend(s,n));case 12:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=14,this.privateGetOrders(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),e.next=11,this.privateGetOrdersOpen(this.extend(s,a));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",canceled:"canceled",canceledAuction:"canceled",canceledSelfTradePrevention:"canceled",canceledIOC:"canceled",canceledFOK:"canceled",canceledMarketProtection:"canceled",canceledPostOnly:"canceled",filled:"closed",partiallyFilled:"open",expired:"canceled",rejected:"canceled",awaitingTrigger:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeInteger(e,"created"),n=this.safeString(e,"market"),a=this.safeSymbol(n,t,"-"),s=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeString(e,"side"),c=this.safeString(e,"orderType"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),h=this.safeFloat(e,"amountRemaining"),l=this.safeFloat(e,"filledAmount"),f=this.safeFloat(e,"remainingCost");void 0!==f&&0===f&&(h=0),void 0!==d&&void 0!==h&&(l=Math.max(0,d-h));var p=this.safeFloat(e,"filledAmountQuote"),v=void 0;void 0!==p&&l&&(v=p/l);var m=void 0,y=this.safeFloat(e,"feePaid");if(void 0!==y){var g=this.safeString(e,"feeCurrency"),b=this.safeCurrencyCode(g);m={cost:y,currency:b}}var k=void 0,x=this.safeValue(e,"fills"),w=void 0;if(void 0!==x){var _=(w=this.parseTrades(x,t,void 0,void 0,{symbol:a,order:r,side:o})).length;if(_>0){var O=this.safeValue(w,_-1);k=O.timestamp}}var T=this.safeString(e,"timeInForce"),S=this.safeValue(e,"postOnly"),C=this.safeFloat(e,"triggerPrice");return{info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:k,symbol:a,type:c,timeInForce:T,postOnly:S,side:o,price:u,stopPrice:C,amount:d,cost:p,average:v,filled:l,remaining:h,status:s,fee:m,trades:w}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=14,this.privateGetTrades(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={symbol:o.id,amount:this.currencyToPrecision(t,r),address:n},void 0!==a&&(c.paymentId=a),e.next=10,this.privatePostWithdrawal(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",this.parseTransaction(u,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.symbol=o.id),void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetWithdrawalHistory(this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.symbol=o.id),void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetDepositHistory(this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({awaiting_processing:"pending",awaiting_email_confirmation:"pending",awaiting_bitvavo_inspection:"pending",approved:"pending",sending:"pending",in_mempool:"pending",processed:"pending",completed:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeInteger(e,"timestamp"),n=this.safeString(e,"symbol"),a=this.safeCurrencyCode(n,t),s=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeFloat(e,"amount"),c=this.safeString(e,"address"),u=this.safeString(e,"txId"),d=void 0,h=this.safeFloat(e,"fee");void 0!==h&&(d={cost:h,currency:a});var l=void 0;l="success"in e?"withdrawal":void 0===s?"deposit":"withdrawal";var f=this.safeString(e,"paymentId");return{info:e,id:r,txid:u,timestamp:i,datetime:this.iso8601(i),addressFrom:void 0,address:c,addressTo:c,tagFrom:void 0,tag:f,tagTo:f,type:l,amount:o,currency:a,status:s,updated:void 0,fee:d}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="/"+this.version+"/"+this.implodeParams(e,i),c="GET"===r||"DELETE"===r;if(c&&Object.keys(s).length&&(o+="?"+this.urlencode(s)),"private"===t){this.checkRequiredCredentials();var u="";c||Object.keys(s).length&&(u=a=this.json(s));var d=this.milliseconds().toString(),h=d+r+o+u,l=this.hmac(this.encode(h),this.encode(this.secret)),f=this.safeString(this.options,"BITVAVO-ACCESS-WINDOW","10000");n={"BITVAVO-ACCESS-KEY":this.apiKey,"BITVAVO-ACCESS-SIGNATURE":l,"BITVAVO-ACCESS-TIMESTAMP":d,"BITVAVO-ACCESS-WINDOW":f},c||(n["Content-Type"]="application/json")}return{url:o=this.urls.api[t]+o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"errorCode"),d=this.safeString(s,"error");if(void 0!==u){var h=this.id+" "+a;throw this.throwBroadlyMatchedException(this.exceptions.broad,d,h),this.throwExactlyMatchedException(this.exceptions.exact,u,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,y=f.PermissionDenied,g=f.InvalidOrder,b=f.AuthenticationError,k=f.InsufficientFunds,x=f.OrderNotFound,w=f.DDoSProtection,_=f.OnMaintenance,O=f.RateLimitExceeded;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"bitz",name:"Bit-Z",countries:["HK"],rateLimit:2e3,version:"v2",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,cancelOrders:!0,createOrder:!0,createMarketOrder:!1,fetchBalance:!0,fetchDeposits:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"60min","4h":"4hour","1d":"1day","5d":"5day","1w":"1week","1M":"1mon"},hostname:"apiv2.bitz.com",urls:{logo:"https://user-images.githubusercontent.com/51840849/87443304-fec5e000-c5fd-11ea-98f8-ba8e67f7eaff.jpg",api:{market:"https://{hostname}",trade:"https://{hostname}",assets:"https://{hostname}"},www:"https://www.bitz.com",doc:"https://apidoc.bitz.com/en/",fees:"https://www.bitz.com/fee?type=1",referral:"https://u.bitz.com/register?invite_code=1429193"},api:{market:{get:["ticker","depth","order","tickerall","kline","symbolList","getServerTime","currencyRate","currencyCoinRate","coinRate"]},trade:{post:["addEntrustSheet","cancelEntrustSheet","cancelAllEntrustSheet","coinOut","getUserHistoryEntrustSheet","getUserNowEntrustSheet","getEntrustSheetInfo","depositOrWithdraw"]},assets:{post:["getUserAssets"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:"0.5%",DKKT:"0.5%",ETH:.01,USDT:"0.5%",LTC:"0.5%",FCT:"0.5%",LSK:"0.5%",HXI:"0.8%",ZEC:"0.5%",DOGE:"0.5%",MZC:"0.5%",ETC:"0.5%",GXS:"0.5%",XPM:"0.5%",PPC:"0.5%",BLK:"0.5%",XAS:"0.5%",HSR:"0.5%",NULS:5,VOISE:350,PAY:1.5,EOS:.6,YBCT:35,OMG:.3,OTN:.4,BTX:"0.5%",QTUM:"0.5%",DASH:"0.5%",GAME:"0.5%",BCH:"0.5%",GNT:9,SSS:1500,ARK:"0.5%",PART:"0.5%",LEO:"0.5%",DGB:"0.5%",ZSC:130,VIU:350,BTG:"0.5%",ARN:10,VTC:"0.5%",BCD:"0.5%",TRX:200,HWC:"0.5%",UNIT:"0.5%",OXY:"0.5%",MCO:.35,SBTC:"0.5%",BCX:"0.5%",ETF:"0.5%",PYLNT:.4,XRB:"0.5%",ETP:"0.5%"}}},precision:{amount:8,price:8},options:{fetchOHLCVVolume:!0,fetchOHLCVWarning:!0,lastNonceTimestamp:0},commonCurrencies:{BOX:"BOX Token",LEO:"LeoCoin",XRB:"NANO",PXC:"Pixiecoin",VTC:"VoteCoin",TTC:"TimesChain"},exceptions:{"-102":p,"-103":b,"-104":m,"-105":b,"-106":m,"-109":b,"-110":w,"-111":y,"-112":_,"-114":O,"-117":b,"-100015":b,"-100044":p,"-100101":p,"-100201":p,"-100301":p,"-100401":p,"-100302":p,"-100303":p,"-200003":b,"-200005":y,"-200025":m,"-200027":g,"-200028":g,"-200029":g,"-200030":g,"-200031":k,"-200032":p,"-200033":p,"-200034":x,"-200035":x,"-200037":g,"-200038":p,"-200055":x,"-300069":b,"-300101":p,"-300102":g,"-300103":b,"-301001":m}})}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.marketGetSymbolList(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),a=Object.keys(i),s=[],o=0;o<a.length;o++)c=a[o],u=i[c],d=this.safeString(u,"id"),h=this.safeString(u,"coinFrom"),l=this.safeString(u,"coinTo"),f=h.toUpperCase(),p=l.toUpperCase(),f=this.safeCurrencyCode(f),p=this.safeCurrencyCode(p),v=f+"/"+p,m={amount:this.safeInteger(u,"numberFloat"),price:this.safeInteger(u,"priceFloat")},s.push({info:u,id:c,numericId:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:m,limits:{amount:{min:this.safeFloat(u,"minTrade"),max:this.safeFloat(u,"maxTrade")},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.assetsPostGetUserAssets(t);case 5:for(r=e.sent,i=this.safeValue(r.data,"info"),a={info:r},s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"name"),u=this.safeCurrencyCode(c),(d=this.account()).used=this.safeFloat(o,"lock"),d.total=this.safeFloat(o,"num"),d.free=this.safeFloat(o,"over"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"_"),a=this.safeFloat(e,"now"),s=this.safeFloat(e,"open"),o=void 0,c=void 0;return void 0!==a&&void 0!==s&&(o=a-s,c=this.sum(a,s)/2),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:this.safeFloat(e,"priceChange24h"),average:c,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"parseMicrotime",value:function(e){if(void 0===e)return e;var t=e.split(" "),r=parseFloat(t[0]),i=parseInt(t[1]),n=this.sum(i,r);return parseInt(1e3*n)}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.marketGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.parseTicker(s.data,i),c=this.parseMicrotime(this.safeString(s,"microtime")),e.abrupt("return",this.extend(o,{timestamp:c,datetime:this.iso8601(c)}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:void 0,r=_.length>1&&void 0!==_[1]?_[1]:{},e.next=4,this.loadMarkets();case 4:return a={},void 0!==t&&(s=this.marketIds(t),a.symbols=s.join(",")),e.next=8,this.marketGetTickerall(this.extend(a,r));case 8:for(o=e.sent,c=this.safeValue(o,"data"),u=this.parseMicrotime(this.safeString(o,"microtime")),d={},h=Object.keys(c),l=0;l<h.length;l++)f=h[l],p=c[f],v=void 0,f in this.markets_by_id&&(v=this.markets_by_id[f]),p=this.parseTicker(c[f],v),void 0===(m=p.symbol)&&(void 0!==v?m=v.symbol:(y=f.split("_"),g=i(y,2),b=g[0],k=g[1],x=this.safeCurrencyCode(b),w=this.safeCurrencyCode(k),m=x+"/"+w)),void 0!==m&&(d[m]=this.extend(p,{timestamp:u,datetime:this.iso8601(u)}));return e.abrupt("return",this.filterByArray(d,"symbol",t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.marketGetGetServerTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={symbol:this.marketId(t)},e.next=7,this.marketGetDepth(this.extend(i,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),o=this.parseMicrotime(this.safeString(a,"microtime")),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"T"),n=void 0;void 0!==t&&(n=t.symbol);var a=this.safeFloat(e,"p"),s=this.safeFloat(e,"n"),o=void 0;void 0!==a&&void 0!==s&&(o=this.priceToPrecision(n,s*a));var c=this.safeString(e,"s");return{timestamp:i,datetime:this.iso8601(i),symbol:n,id:r,order:void 0,type:"limit",side:c,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.marketGetOrder(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:if(o=1e3*this.parseTimeframe(r),c=this.market(t),u={symbol:c.id,resolution:this.timeframes[r]},void 0===a){e.next=14;break}u.size=Math.min(a,300),void 0!==i&&(u.to=this.sum(i,a*o*1e3)),e.next=16;break;case 14:if(void 0===i){e.next=16;break}throw new v(this.id+" fetchOHLCV() requires a limit argument if the since argument is specified");case 16:return e.next=18,this.marketGetKline(this.extend(u,s));case 18:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"bars",[]),e.abrupt("return",this.parseOHLCVs(l,c,r,i,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0;if(void 0===t){var n=this.safeString(e,"coinFrom"),a=this.safeString(e,"coinTo");if(void 0!==n&&void 0!==a){var s=n+"_"+a;if(s in this.markets_by_id)t=this.safeValue(this.markets_by_id,s);else{var o=this.safeCurrencyCode(n),c=this.safeCurrencyCode(a);i=o+"/"+c}}}void 0!==t&&(i=t.symbol);var u=this.safeString(e,"flag");void 0!==u&&(u="sale"===u?"sell":"buy");var d=this.safeFloat(e,"price"),h=this.safeFloat(e,"number"),l=this.safeFloat(e,"numberOver"),f=this.safeFloat(e,"numberDeal"),p=this.safeInteger(e,"timestamp");void 0===p&&(p=this.safeTimestamp(e,"created"));var v=this.safeFloat(e,"orderTotalPrice");void 0!==d&&void 0!==f&&(v=f*d);var m=this.parseOrderStatus(this.safeString(e,"status"));return{id:r,clientOrderId:void 0,datetime:this.iso8601(p),timestamp:p,lastTradeTimestamp:void 0,status:m,symbol:i,type:"limit",timeInForce:void 0,postOnly:void 0,side:u,price:d,stopPrice:void 0,cost:v,amount:h,filled:f,remaining:l,trades:void 0,fee:void 0,info:e,average:void 0}}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new p(this.id+" createOrder allows limit orders only");case 6:if(c=this.market(t),u="buy"===i?"1":"2",this.password){e.next=10;break}throw new p(this.id+' createOrder() requires you to set exchange.password = "YOUR_TRADING_PASSWORD" (a trade password is NOT THE SAME as your login password)');case 10:return d={symbol:c.id,type:u,price:this.priceToPrecision(t,s),number:this.amountToPrecision(t,a),tradePwd:this.password},e.next=13,this.tradePostAddEntrustSheet(this.extend(d,o));case 13:return h=e.sent,l=this.parseMicrotime(this.safeString(h,"microtime")),f=this.extend({timestamp:l},h.data),e.abrupt("return",this.parseOrder(f,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={entrustSheetId:t},e.next=7,this.tradePostCancelEntrustSheet(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={ids:t.join(",")},e.next=7,this.tradePostCancelEntrustSheet(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={entrustSheetId:t},e.next=7,this.tradePostGetEntrustSheetInfo(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a.data));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={coinFrom:o.baseId,coinTo:o.quoteId},void 0!==a&&(c.page=1,c.pageSize=a),void 0!==i&&(c.startTime=parseInt(i/1e3)),e.next=14,this[t](this.extend(c,s));case 14:return u=e.sent,d=this.safeValue(u.data,"data",[]),e.abrupt("return",this.parseOrders(d,void 0,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserNowEntrustSheet",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("tradePostGetUserHistoryEntrustSheet",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({1:"pending",2:"pending",3:"pending",4:"ok",5:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"updated");0===r&&(r=void 0);var i=this.safeString(e,"coin"),n=this.safeCurrencyCode(i,t),a=this.safeStringLower(e,"type"),s=this.parseTransactionStatus(this.safeString(e,"status")),o=void 0,c=this.safeFloat(e,"network_fee");return void 0!==c&&(o={cost:c,code:n}),{id:this.safeString(e,"id"),txid:this.safeString(e,"txid"),timestamp:r,datetime:this.iso8601(r),address:this.safeString(e,"wallet"),tag:this.safeString(e,"memo"),type:a,amount:this.safeFloat(e,"number"),currency:n,status:s,updated:r,fee:o,info:e}}},{key:"parseTransactionsByType",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=[],s=0;s<t.length;s++){var o=this.parseTransaction(this.extend({type:e},t[s]));a.push(o)}return this.filterByCurrencySinceLimit(a,r,i,n)}},{key:"parseTransactionType",value:function(e){return this.safeInteger({deposit:1,withdrawal:2},e,e)}},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsForType("deposit",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsForType("withdrawal",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsForType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchTransactions() requires a currency `code` argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.currency(r),c={coin:o.id,type:this.parseTransactionType(t)},void 0!==i&&(c.startTime=parseInt(i/1e3).toString()),void 0!==a&&(c.page=1,c.pageSize=a),e.next=14,this.tradePostDepositOrWithdraw(this.extend(c,s));case 14:return u=e.sent,d=this.safeValue(u.data,"data",[]),e.abrupt("return",this.parseTransactionsByType(t,d,r,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={coin:o.id,number:this.currencyToPrecision(t,r),address:i},void 0!==a&&(c.memo=a),e.next=10,this.tradePostCoinOut(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){var e=this.seconds();return e>this.options.lastNonceTimestamp&&(this.options.lastNonceTimestamp=e,this.options.lastNonce=1e5),this.options.lastNonce=this.sum(this.options.lastNonce,1),this.options.lastNonce}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"market",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),o=s+"/"+this.capitalize(t)+"/"+e,c=void 0;return"market"===t?(c=this.urlencode(i)).length&&(o+="?"+c):(this.checkRequiredCredentials(),a=this.rawencode(this.keysort(this.extend({apiKey:this.apiKey,timeStamp:this.seconds(),nonce:this.nonce()},i))),a+="&sign="+this.hash(this.encode(a+this.secret)),n={"Content-type":"application/x-www-form-urlencoded"}),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"status");if(void 0!==u){var d=this.id+" "+a;if("200"===u){var h=this.safeInteger(s,"data");if(void 0!==h)throw this.throwExactlyMatchedException(this.exceptions,h,d),new p(d);return}throw this.throwExactlyMatchedException(this.exceptions,u,d),new p(d)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11);e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bl3p",name:"BL3P",countries:["NL","EU"],rateLimit:1e3,version:"1",comment:"An exchange market by BitonicNL",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28501752-60c21b82-6feb-11e7-818b-055ee6d0e754.jpg",api:"https://api.bl3p.eu",www:"https://bl3p.eu",doc:["https://github.com/BitonicNL/bl3p-api/tree/master/docs","https://bl3p.eu/api","https://bitonic.nl/en/api"]},api:{public:{get:["{market}/ticker","{market}/orderbook","{market}/trades"]},private:{post:["{market}/money/depth/full","{market}/money/order/add","{market}/money/order/cancel","{market}/money/order/result","{market}/money/orders","{market}/money/orders/history","{market}/money/trades/fetch","GENMKT/money/info","GENMKT/money/deposit_address","GENMKT/money/new_deposit_address","GENMKT/money/wallet/history","GENMKT/money/withdraw"]}},markets:{"BTC/EUR":{id:"BTCEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"BTC",quoteId:"EUR",maker:.0025,taker:.0025},"LTC/EUR":{id:"LTCEUR",symbol:"LTC/EUR",base:"LTC",quote:"EUR",baseId:"LTC",quoteId:"EUR",maker:.0025,taker:.0025}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGENMKTMoneyInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"wallets"),s={info:n},o=Object.keys(this.currencies),c=0;c<o.length;c++)u=o[c],d=this.currency(u),h=d.id,l=this.safeValue(a,h,{}),f=this.safeValue(l,"available",{}),p=this.safeValue(l,"balance",{}),(v=this.account()).free=this.safeFloat(f,"value"),v.total=this.safeFloat(p,"value"),s[u]=v;return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeFloat(e,t),n=this.safeFloat(e,r);return[i/1e5,n/1e8]}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},n=this.market(t),a={market:n.id},e.next=6,this.publicGetMarketOrderbook(this.extend(a,r));case 6:return s=e.sent,o=this.safeValue(s,"data"),e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price_int","amount_int"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n={market:this.marketId(t)},e.next=4,this.publicGetMarketTicker(this.extend(n,r));case 4:return a=e.sent,s=this.safeTimestamp(a,"timestamp"),o=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(a.volume,"24h"),quoteVolume:void 0,info:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_id"),i=this.safeInteger(e,"date"),n=this.safeFloat(e,"price_int");void 0!==n&&(n/=1e5);var a=this.safeFloat(e,"amount_int");void 0!==a&&(a/=1e8);var s=void 0;void 0!==n&&void 0!==a&&(s=a*n);var o=void 0;return void 0!==t&&(o=t.symbol),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},s=this.market(t),e.next=6,this.publicGetMarketTrades(this.extend({market:s.id},a));case 6:return o=e.sent,c=this.parseTrades(o.data.trades,s,r,n),e.abrupt("return",c);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},c=this.market(t),u={market:c.id,amount_int:parseInt(1e8*a),fee_currency:c.quote,type:"buy"===n?"bid":"ask"},"limit"===r&&(u.price_int=parseInt(1e5*s)),e.next=7,this.privatePostMarketMoneyOrderAdd(this.extend(u,o));case 7:return d=e.sent,h=this.safeString(d.data,"order_id"),e.abrupt("return",{info:d,id:h});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={order_id:t},e.next=5,this.privatePostMarketMoneyOrderCancel(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.urls.api+"/"+this.version+"/"+s,c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials();var u=this.nonce();a=this.urlencode(this.extend({nonce:u},c));var d=this.base64ToBinary(this.secret),h=s+"\0"+a,l=this.hmac(this.encode(h),d,"sha512","base64");n={"Content-Type":"application/x-www-form-urlencoded","Rest-Key":this.apiKey,"Rest-Sign":l}}return{url:o,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.InvalidOrder,v=l.AuthenticationError,m=l.InsufficientFunds,y=l.BadRequest;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bleutrade",name:"Bleutrade",countries:["BR"],rateLimit:1e3,certified:!1,has:{cancelOrder:!0,CORS:!0,createLimitOrder:!1,createMarketOrder:!1,createOrder:!0,editOrder:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!1,fetchWithdrawals:!0,withdraw:!1},timeframes:{"1h":"1h","4h":"4h","8h":"8h","1d":"1d","1w":"1w"},hostname:"bleutrade.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/30303000-b602dbe6-976d-11e7-956d-36c5049c01e7.jpg",api:{v3Private:"https://{hostname}/api/v3/private",v3Public:"https://{hostname}/api/v3/public"},www:"https://bleutrade.com",doc:["https://app.swaggerhub.com/apis-docs/bleu/white-label/3.0.0"],fees:"https://bleutrade.com/fees/"},api:{v3Public:{get:["getassets","getmarkets","getticker","getmarketsummary","getmarketsummaries","getorderbook","getmarkethistory","getcandles"]},v3Private:{get:["statement"],post:["getbalance","getbalances","buylimit","selllimit","buylimitami","selllimitami","buystoplimit","sellstoplimit","ordercancel","getopenorders","getcloseorders","getdeposithistory","getdepositaddress","getmytransactions","withdraw","directtransfer","getwithdrawhistory","getlimits"]}},commonCurrencies:{EPC:"Epacoin"},exceptions:{exact:{ERR_INSUFICIENT_BALANCE:m,ERR_LOW_VOLUME:y,"Invalid form":y},broad:{"Order is not open":p,"Invalid Account / Api KEY / Api Secret":v}},fees:{trading:{tierBased:!1,percentage:!0,taker:.0025,maker:.0025}},options:{parseOrderStatus:!0}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.v3PublicGetGetassets(t);case 3:for(r=e.sent,n=r.result,a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"Asset"),u=this.safeCurrencyCode(c),a[u]={id:c,code:u,name:this.safeString(o,"AssetLong"),active:this.safeValue(o,"IsActive")&&!this.safeValue(o,"MaintenanceMode"),fee:this.safeFloat(o,"WithdrawTxFee"),precision:this.safeFloat(o,"DecimalPlaces"),info:o,limits:this.limits};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.v3PublicGetGetmarkets(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"result"),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"MarketName"),u=this.safeString(o,"MarketAsset"),d=this.safeString(o,"BaseAsset"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:8,price:8},v=this.safeValue(o,"IsActive",!1),n.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:v,info:o,precision:p,maker:this.fees.trading.maker,taker:this.fees.trading.taker,limits:{amount:{min:this.safeFloat(o,"MinTradeSize"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0}}});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={market:this.marketId(t),type:"ALL"},void 0!==r&&(a.depth=r),e.next=8,this.v3PublicGetGetorderbook(this.extend(a,n));case 8:if(s=e.sent,o=this.safeValue(s,"result")){e.next=12;break}throw new f(this.id+" no orderbook data in "+this.json(s));case 12:return e.abrupt("return",this.parseOrderBook(o,void 0,"buy","sell","Rate","Quantity"));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.v3PublicGetGetmarketsummary(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.v3PublicGetGetmarketsummaries(r);case 6:for(n=e.sent,a=this.safeValue(n,"result"),s=[],o=0;o<a.length;o++)c=this.parseTicker(a[o]),s.push(c);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"TimeStamp")),i=this.safeString(e,"MarketName"),n=this.safeSymbol(i,t,"_"),a=this.safeFloat(e,"PrevDay"),s=this.safeFloat(e,"Last"),o=void 0,c=void 0;return void 0!==s&&void 0!==a&&(o=s-a,a>0&&(c=o/a*100)),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"High"),low:this.safeFloat(e,"Low"),bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"Volume"),quoteVolume:this.safeFloat(e,"BaseVolume"),info:e}}},{key:"parseOHLCV",value:function(e){return[this.parse8601(e.TimeStamp+"+00:00"),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"15m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={period:this.timeframes[r],market:o.id,count:a},e.next=10,this.v3PublicGetGetcandles(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:if(c={rate:this.priceToPrecision(t,s),quantity:this.amountToPrecision(t,a),tradeType:"buy"===n?"1":"0",market:this.marketId(t)},u=void 0,"buy"!==n){e.next=14;break}return e.next=11,this.v3PrivatePostBuylimit(this.extend(c,o));case 11:u=e.sent,e.next=17;break;case 14:return e.next=16,this.v3PrivatePostSelllimit(this.extend(c,o));case 16:u=e.sent;case 17:return e.abrupt("return",{info:u,id:this.safeString(u,"result")});case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={orderid:t},e.next=5,this.v3PrivatePostOrdercancel(this.extend(n,r));case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.market=s.id),e.next=11,this.v3PrivatePostGetopenorders(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOrders(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.v3PrivatePostGetbalances(t);case 5:for(r=e.sent,n={info:r},a=r.result,s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"Asset"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"Available"),d.total=this.safeFloat(o,"Balance"),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),e.next=11,this.v3PrivatePostGetcloseorders(this.extend(s,a));case 11:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseOrders(u,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:void 0,s=u.length>4&&void 0!==u[4]?u[4]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this[t](s);case 8:return o=e.sent,c=this.safeValue(o,"result",[]),e.abrupt("return",this.parseTransactions(c,r,n,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("v3PrivatePostGetdeposithistory",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("v3PrivatePostGetwithdrawhistory",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset:n.id},e.next=7,this.v3PrivatePostGetdepositaddress(this.extend(a,r));case 7:return s=e.sent,o=s.result,c=this.safeString(o,"DepositAddress"),e.abrupt("return",{currency:t,address:this.checkAddress(c),info:o});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({TRADE:"trade",WITHDRAW:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeCurrencyCode(this.safeString(e,"CoinSymbol"),t),i=this.safeString(e,"Description"),n=this.parseLedgerEntryType(this.safeString(e,"Type")),a=void 0,s=void 0,o="trade"===n?", ":"; ",c=i.split(o),u=0;u<c.length;u++){var d=c[u];if(0===d.indexOf("fee")){d=d.replace("fee ","");var h=parseFloat(d);h<0&&(h=-h),s={cost:h,currency:r}}else 0===d.indexOf("order id")&&(a=d.replace("order id ",""))}var l=this.parse8601(this.safeString(e,"TimeStamp")),f=this.safeFloat(e,"Amount"),p=void 0;void 0!==f&&(p="in",f<0&&(p="out",f=-f));var v=this.safeString(e,"ID");return{id:v,info:e,timestamp:l,datetime:this.iso8601(l),direction:p,account:void 0,referenceId:a,referenceAccount:void 0,type:n,currency:r,amount:f,before:void 0,after:void 0,status:"ok",fee:s}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},e.next=9,this.v3PrivatePostGetmytransactions(this.extend(s,a));case 9:return o=e.sent,c=o.result,e.abrupt("return",this.parseLedger(c,t,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"Type").toLowerCase(),i=this.parseOrderStatus(this.safeString(e,"Status")),n=this.safeString(e,"Exchange"),a=this.safeSymbol(n,t,"_"),s=void 0;"Created"in e&&(s=this.parse8601(e.Created+"+00:00"));var o=this.safeFloat(e,"Price"),c=this.safeFloat(e,"Quantity"),u=this.safeFloat(e,"QuantityRemaining"),d=this.safeFloat(e,"PricePerUnit"),h=this.safeString(e,"OrderID");return this.safeOrder({info:e,id:h,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:"limit",timeInForce:void 0,postOnly:void 0,side:r,price:o,stopPrice:void 0,cost:void 0,average:d,amount:c,filled:void 0,remaining:u,status:i,fee:void 0,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({OK:"closed",OPEN:"open",CANCELED:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"ID"),i=this.safeFloat(e,"Amount"),n="deposit";i<0&&(i=Math.abs(i),n="withdrawal");var a=this.safeString(e,"Asset"),s=this.safeCurrencyCode(a,t),o=this.safeString(e,"Label"),c=this.parse8601(this.safeString(e,"Timestamp")),u=this.safeString(e,"TransactionID"),d=void 0,h=void 0,l=o.split(";");3===l.length?(i=parseFloat(l[0]),d=l[1],h=parseFloat(l[2])):d=o;var f=void 0;void 0!==h&&(f={currency:s,cost:h});var p="ok";return"CANCELED"===u&&(u=void 0,p="canceled"),{info:e,timestamp:c,datetime:this.iso8601(c),id:r,currency:s,amount:i,address:d,tag:void 0,status:p,type:n,updated:void 0,txid:u,fee:f}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+"/";if("v3Private"===t){this.checkRequiredCredentials();var o={apikey:this.apiKey,nonce:this.nonce()};s+=e+"?"+this.urlencode(this.extend(o,i));var c=this.hmac(this.encode(s),this.encode(this.secret),"sha512");n={apisign:c}}else s+=e+"?"+this.urlencode(i);return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"success");if(void 0===u)throw new f(this.id+": malformed response: "+this.json(s));if(!u){var d=this.id+" "+a,h=this.safeString(s,"result");void 0!==h&&(this.throwBroadlyMatchedException(this.exceptions.broad,h,d),this.throwExactlyMatchedException(this.exceptions.exact,h,d));var l=this.safeString(s,"message");throw this.throwBroadlyMatchedException(this.exceptions.broad,l,d),this.throwExactlyMatchedException(this.exceptions.exact,l,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InvalidOrder,m=f.AuthenticationError,y=f.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"braziliex",name:"Braziliex",countries:["BR"],rateLimit:1e3,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/34703593-c4498674-f504-11e7-8d14-ff8e44fb78c1.jpg",api:"https://braziliex.com/api/v1",www:"https://braziliex.com/",doc:"https://braziliex.com/exchange/api.php",fees:"https://braziliex.com/exchange/fees.php",referral:"https://braziliex.com/?ref=5FE61AB6F6D67DA885BC98BA27223465"},api:{public:{get:["currencies","ticker","ticker/{market}","orderbook/{market}","tradehistory/{market}"]},private:{post:["balance","complete_balance","open_orders","trade_history","deposit_address","sell","buy","cancel_order","order_status"]}},commonCurrencies:{EPC:"Epacoin",ABC:"Anti Bureaucracy Coin"},fees:{trading:{maker:.005,taker:.005}},precision:{amount:8,price:8},options:{fetchCurrencies:{expires:1e3}}})}},{key:"fetchCurrenciesFromCache",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),i=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===i||s-i>a)){e.next=10;break}return e.next=8,this.publicGetCurrencies(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,this.options.currencies={timestamp:this.milliseconds(),response:r},i=Object.keys(r),a={},s=0;s<i.length;s++)o=i[s],c=r[o],u=this.safeInteger(c,"decimal"),d=this.safeCurrencyCode(o),h=1===this.safeInteger(c,"active"),0!==this.safeInteger(c,"under_maintenance")&&(h=!1),l=1===this.safeInteger(c,"is_withdrawal_active"),f=1===this.safeInteger(c,"is_deposit_active"),l&&f||(h=!1),a[d]={id:o,code:d,name:c.name,active:h,precision:u,funding:{withdraw:{active:l,fee:this.safeFloat(c,"txWithdrawalFee")},deposit:{active:f,fee:this.safeFloat(c,"txDepositFee")}},limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},price:{min:Math.pow(10,-u),max:Math.pow(10,u)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(c,"MinWithdrawal"),max:Math.pow(10,u)},deposit:{min:this.safeFloat(c,"minDeposit"),max:void 0}},info:c};return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:return r=e.sent,e.next=6,this.publicGetTicker();case 6:for(a=e.sent,s=Object.keys(a),o=[],c=0;c<s.length;c++)u=s[c],d=a[u],h=u.split("_"),l=i(h,2),f=l[0],p=l[1],v=f.toUpperCase(),m=p.toUpperCase(),y=this.safeCurrencyCode(v),g=this.safeCurrencyCode(m),b=y+"/"+g,k=this.safeValue(r,f,{}),x=this.safeValue(r,p,{}),w=this.safeInteger(x,"is_fiat",0),_=void 0,_=w?this.safeFloat(k,"minAmountTradeFIAT"):this.safeFloat(k,"minAmountTrade"+m),O=this.safeInteger(d,"active"),T=1===O,S={amount:8,price:8},o.push({id:u,symbol:b,base:y,quote:g,baseId:f,quoteId:p,active:T,precision:S,limits:{amount:{min:Math.pow(10,-S.amount),max:Math.pow(10,S.amount)},price:{min:Math.pow(10,-S.price),max:Math.pow(10,S.price)},cost:{min:_,max:void 0}},info:d});return e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.milliseconds(),n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"highestBid24"),low:this.safeFloat(e,"lowestAsk24"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:this.safeFloat(e,"percentChange"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume24"),quoteVolume:this.safeFloat(e,"quoteVolume24"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market:i.id},e.next=7,this.publicGetTickerMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(i=e.sent,a={},s=Object.keys(i),o=0;o<s.length;o++)c=s[o],u=this.safeMarket(c),d=u.symbol,a[d]=this.parseTicker(i[c],u);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={market:this.marketId(t)},e.next=7,this.publicGetOrderbookMarket(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString2(e,"date_exec","date")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=void 0;void 0!==t&&(a=t.symbol);var s=this.safeFloat(e,"total"),o=this.safeString(e,"order_number"),c="limit",u=this.safeString(e,"type"),d=this.safeString(e,"_id");return{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,order:o,type:c,side:u,takerOrMaker:void 0,price:i,amount:n,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTradehistoryMarket(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostCompleteBalance(t);case 5:for(r=e.sent,i={info:r},a=Object.keys(r),s=0;s<a.length;s++)o=a[s],c=r[o],u=this.safeCurrencyCode(o),(d=this.account()).free=this.safeFloat(c,"available"),d.total=this.safeFloat(c,"total"),i[u]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"_"),n=this.safeInteger(e,"timestamp");void 0===n&&(n=this.parse8601(this.safeString(e,"date")));var a=this.safeFloat(e,"price"),s=this.safeFloat(e,"total"),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"progress"),u=o*c,d=this.safeString(e,"order_number"),h=this.safeValue(e,"fee"),l=1===c?"closed":"open",f=this.safeString(e,"type");return this.safeOrder({id:d,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:l,symbol:i,type:"limit",timeInForce:void 0,postOnly:void 0,side:f,price:a,stopPrice:void 0,cost:s,amount:o,filled:u,remaining:void 0,trades:void 0,fee:h,info:e,average:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,m,y,g,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=k.length>4&&void 0!==k[4]?k[4]:void 0,o=k.length>5&&void 0!==k[5]?k[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u="privatePost"+this.capitalize(i),d={market:c.id,price:s,amount:a},e.next=9,this[u](this.extend(d,o));case 9:if(h=e.sent,1===this.safeInteger(h,"success")){e.next=13;break}throw new v(this.id+" "+this.json(h));case 13:return l=this.safeString(h,"message"),f=(f=l.split(" / ")).slice(1),p=f[5].split(" "),m=f[2].split(" "),y=f[3].split(" "),g=f[4].split(" "),b=this.parseOrder({timestamp:this.milliseconds(),order_number:h.order_number,type:this.safeStringLower(f,0),market:f[0].toLowerCase(),amount:this.safeString(m,1),price:this.safeString(y,1),total:this.safeString(g,1),fee:{cost:this.safeFloat(p,1),currency:this.safeString(p,2)},progress:"0.0",info:h},c),e.abrupt("return",b);case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={order_number:t,market:a.id},e.next=8,this.privatePostCancelOrder(this.extend(s,i));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={order_number:t,market:a.id},e.next=10,this.privatePostOrderStatus(this.extend(s,i));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={market:s.id},e.next=10,this.privatePostOpenOrders(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"order_open",[]),e.abrupt("return",this.parseOrders(u,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={market:s.id},e.next=10,this.privatePostTradeHistory(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"trade_history",[]),e.abrupt("return",this.parseTrades(u,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privatePostDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"deposit_address"),this.checkAddress(o),c=this.safeString(s,"payment_id"),e.abrupt("return",{currency:t,address:o,tag:c,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+t,o=this.omit(i,this.extractParams(e));if("public"===t)s+="/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),o=this.extend({command:e,nonce:this.nonce()},o),a=this.urlencode(o);var c=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={"Content-type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:c}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"public",i=d.length>2&&void 0!==d[2]?d[2]:"GET",a=d.length>3&&void 0!==d[3]?d[3]:{},s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:void 0,e.next=7,this.fetch2(t,r,i,a,s,o);case 7:if(!("string"===typeof(c=e.sent)&&c.length<1)){e.next=10;break}throw new p(this.id+" returned empty response");case 10:if(!("success"in c)){e.next=17;break}if(0!==this.safeInteger(c,"success")){e.next=17;break}if("Invalid APIKey"!==(u=this.safeString(c,"message"))){e.next=16;break}throw new m(u);case 16:throw new p(u);case 17:return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.DDoSProtection,m=l.InvalidOrder,y=l.InsufficientFunds;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"btcalpha",name:"BTC-Alpha",countries:["US"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!1,fetchTrades:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","1d":"D"},urls:{logo:"https://user-images.githubusercontent.com/1294454/42625213-dabaa5da-85cf-11e8-8f99-aa8f8f7699f0.jpg",api:"https://btc-alpha.com/api",www:"https://btc-alpha.com",doc:"https://btc-alpha.github.io/api-docs",fees:"https://btc-alpha.com/fees/",referral:"https://btc-alpha.com/?r=123788"},api:{public:{get:["currencies/","pairs/","orderbook/{pair_name}/","exchanges/","charts/{pair}/{type}/chart/"]},private:{get:["wallets/","orders/own/","order/{id}/","exchanges/own/","deposits/","withdraws/"],post:["order/","order-cancel/"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{BTC:.00135,LTC:.0035,XMR:.018,ZEC:.002,ETH:.01,ETC:.01,SIB:1.5,CCRB:4,PZM:.05,ITI:.05,DCY:5,R:5,ATB:.05,BRIA:.05,KZC:.05,HWC:1,SPA:1,SMS:.001,REC:.01,SUP:1,BQ:100,GDS:.1,EVN:300,TRKC:.01,UNI:1,STN:1,BCH:void 0,QBIC:.5}}},commonCurrencies:{CBC:"Cashbery"},exceptions:{exact:{},broad:{"Out of balance":y}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"name"),c=this.safeString(s,"currency1"),u=this.safeString(s,"currency2"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f={amount:8,price:this.safeInteger(s,"price_precision")},n.push({id:o,symbol:l,base:d,quote:h,active:!0,precision:f,limits:{amount:{min:this.safeFloat(s,"minimum_order_size"),max:this.safeFloat(s,"maximum_order_size")},price:{min:Math.pow(10,-f.price),max:Math.pow(10,f.price)},cost:{min:void 0,max:void 0}},info:s,baseId:void 0,quoteId:void 0});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={pair_name:this.marketId(t)},r&&(a.limit_sell=r,a.limit_buy=r),e.next=8,this.publicGetOrderbookPairName(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"buy","sell","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBidsAsks",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=[],n=0;n<e.length;n++){var a=e[n];a&&i.push(this.parseBidAsk(a,t,r))}return i}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(r=t.symbol);var i=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=void 0;void 0!==n&&void 0!==a&&(s=parseFloat(this.costToPrecision(r,n*a)));var o=this.safeString2(e,"id","tid"),c=this.safeString2(e,"my_side","side"),u=this.safeString(e,"o_id");return{id:o,info:e,timestamp:i,datetime:this.iso8601(i),symbol:r,order:u,type:"limit",side:c,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.pair=s.id),void 0!==n&&(o.limit=n),e.next=11,this.publicGetExchanges(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={pair:o.id,type:this.timeframes[r]},void 0!==a&&(c.limit=a),void 0!==n&&(c.since=parseInt(n/1e3)),e.next=12,this.publicGetChartsPairTypeChart(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWallets(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).used=this.safeFloat(s,"reserve"),u.total=this.safeFloat(s,"balance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({1:"open",2:"canceled",3:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0===t&&(t=this.safeValue(this.marketsById,e.pair)),void 0!==t&&(r=t.symbol);var i=this.safeTimestamp(e,"date"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=this.parseOrderStatus(this.safeString(e,"status")),o=this.safeString2(e,"oid","id"),c=this.safeValue(e,"trades",[]);c=this.parseTrades(c,t);var u=this.safeString2(e,"my_side","type"),d=void 0,h=c.length;if(h>0){d=0;for(var l=0;l<h;l++)d=this.sum(d,c[l].amount)}var f=void 0;return void 0!==a&&a>0&&void 0!==d&&(f=Math.max(0,a-d)),{id:o,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,status:s,symbol:r,type:"limit",timeInForce:void 0,postOnly:void 0,side:u,price:n,stopPrice:void 0,cost:void 0,amount:a,filled:d,remaining:f,trades:c,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={pair:c.id,type:n,amount:a,price:this.priceToPrecision(t,s)},e.next=8,this.privatePostOrder(this.extend(u,o));case 8:if((d=e.sent).success){e.next=11;break}throw new m(this.id+" "+this.json(d));case 11:return h=this.parseOrder(d,c),a=h.amount>0?h.amount:a,e.abrupt("return",this.extend(h,{amount:a}));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={order:t},e.next=5,this.privatePostOrderCancel(this.extend(n,r));case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.pair=o.id),void 0!==n&&(s.limit=n),e.next=12,this.privateGetOrdersOwn(this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"1"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"3"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==t&&(o=this.market(t),s.pair=o.id),void 0!==n&&(s.limit=n),e.next=11,this.privateGetExchangesOwn(this.extend(s,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,void 0,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urlencode(this.keysort(this.omit(i,this.extractParams(e)))),o=this.urls.api+"/";if("charts/{pair}/{type}/chart/"!==e&&(o+="v1/"),o+=this.implodeParams(e,i),n={Accept:"application/json"},"public"===t)s.length&&(o+="?"+s);else{this.checkRequiredCredentials();var c=this.apiKey;"POST"===r?(n["Content-Type"]="application/x-www-form-urlencoded",c+=a=s):s.length&&(o+="?"+s),n["X-KEY"]=this.apiKey,n["X-SIGN"]=this.hmac(this.encode(c),this.encode(this.secret)),n["X-NONCE"]=this.nonce().toString()}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"error"),d=this.id+" "+a;if(void 0!==u&&(this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d)),401===e||403===e)throw new p(d);if(429===e)throw new v(d);if(!(e<400))throw new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.InsufficientFunds,v=l.InvalidOrder,m=l.AuthenticationError,y=l.PermissionDenied,g=l.InvalidNonce,b=l.OrderNotFound,k=l.DDoSProtection;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"btcbox",name:"BtcBox",countries:["JP"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87327317-98c55400-c53c-11ea-9a11-81f7d951cc74.jpg",api:"https://www.btcbox.co.jp/api",www:"https://www.btcbox.co.jp/",doc:"https://blog.btcbox.jp/en/archives/8762",fees:"https://support.btcbox.co.jp/hc/en-us/articles/360001235694-Fees-introduction"},api:{public:{get:["depth","orders","ticker"]},private:{post:["balance","trade_add","trade_cancel","trade_list","trade_view","wallet"]}},markets:{"BTC/JPY":{id:"btc",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy",taker:5e-4,maker:5e-4},"ETH/JPY":{id:"eth",symbol:"ETH/JPY",base:"ETH",quote:"JPY",baseId:"eth",quoteId:"jpy",taker:.001,maker:.001},"LTC/JPY":{id:"ltc",symbol:"LTC/JPY",base:"LTC",quote:"JPY",baseId:"ltc",quoteId:"jpy",taker:.001,maker:.001},"BCH/JPY":{id:"bch",symbol:"BCH/JPY",base:"BCH",quote:"JPY",baseId:"bch",quoteId:"jpy",taker:.001,maker:.001}},exceptions:{104:m,105:y,106:g,107:v,200:p,201:v,202:v,203:b,401:b,402:k}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],c=this.currency(o),u=c.id,(d=u+"_balance")in r&&(h=this.account(),l=u+"_lock",h.free=this.safeFloat(r,d),h.used=this.safeFloat(r,l),n[o]=h);return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={},this.symbols.length>1&&(a.coin=n.baseId),e.next=10,this.publicGetDepth(this.extend(a,r));case 10:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={},this.symbols.length>1&&(a.coin=n.baseId),e.next=9,this.publicGetTicker(this.extend(a,r));case 9:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"tid"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=void 0;void 0!==s&&void 0!==a&&(o=a*s);var c=void 0,u=this.safeString(e,"type");return{info:e,id:n,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:i,type:c,side:u,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={},this.symbols.length>1&&(o.coin=s.baseId),e.next=11,this.publicGetOrders(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={amount:a,price:s,type:n,coin:c.baseId},e.next=8,this.privatePostTradeAdd(this.extend(u,o));case 8:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r="BTC/JPY"),a=this.market(r),s={id:t,coin:a.baseId},e.next=9,this.privatePostTradeCancel(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({part:"open",all:"closed",cancelled:"canceled",closed:"closed",no:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"datetime"),n=void 0;void 0!==i&&(n=this.parse8601(e.datetime+"+09:00"));var a=this.safeFloat(e,"amount_original"),s=this.safeFloat(e,"amount_outstanding"),o=void 0;void 0!==a&&void 0!==s&&(o=a-s);var c=this.safeFloat(e,"price"),u=void 0;void 0!==c&&void 0!==o&&(u=o*c);var d=this.parseOrderStatus(this.safeString(e,"status"));void 0===d&&void 0!==s&&0===s&&(d="closed");var h=void 0,l=void 0;void 0!==t&&(l=t.symbol);var f=this.safeString(e,"type");return{id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,amount:a,remaining:s,filled:o,side:f,type:void 0,timeInForce:void 0,postOnly:void 0,status:d,symbol:l,price:c,stopPrice:void 0,cost:u,trades:h,fee:void 0,info:e,average:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r="BTC/JPY"),a=this.market(r),s=this.extend({id:t,coin:a.baseId},n),e.next=9,this.privatePostTradeView(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByType",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===r&&(r="BTC/JPY"),o=this.market(r),c={type:t,coin:o.baseId},e.next=11,this.privatePostTradeList(this.extend(c,s));case 11:if(u=e.sent,d=this.parseOrders(u,o,n,a),"open"===t)for(h=0;h<d.length;h++)d[h].status="open";return e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByType("all",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByType("open",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString(),c=this.extend({key:this.apiKey,nonce:o},i),u=this.urlencode(c),d=this.hash(this.encode(this.secret));c.signature=this.hmac(this.encode(u),this.encode(d)),a=this.urlencode(c),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&!(e>=400)){var u=this.safeValue(s,"result");if(void 0!==u&&!0!==u){var d=this.safeValue(s,"code"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,d,h),new f(h)}}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if("string"!==typeof(c=e.sent)){e.next=13;break}if(c=this.strip(c),this.isJsonEncodedObject(c)){e.next=12;break}throw new f(this.id+" "+c);case 12:c=JSON.parse(c);case 13:return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.ExchangeError,m=f.OrderNotFound,y=f.InvalidOrder,g=f.InsufficientFunds,b=f.DDoSProtection,k=f.BadRequest;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"btcmarkets",name:"BTC Markets",countries:["AU"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:"emulated",fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/89731817-b3fb8480-da52-11ea-817f-783b08aaf32b.jpg",api:{public:"https://api.btcmarkets.net",private:"https://api.btcmarkets.net"},www:"https://btcmarkets.net",doc:["https://api.btcmarkets.net/doc/v3","https://github.com/BTCMarkets/API"]},api:{public:{get:["markets","markets/{marketId}/ticker","markets/{marketId}/trades","markets/{marketId}/orderbook","markets/{marketId}/candles","markets/tickers","markets/orderbooks","time"]},private:{get:["orders","orders/{id}","batchorders/{ids}","trades","trades/{id}","withdrawals","withdrawals/{id}","deposits","deposits/{id}","transfers","transfers/{id}","addresses","withdrawal-fees","assets","accounts/me/trading-fees","accounts/me/withdrawal-limits","accounts/me/balances","accounts/me/transactions","reports/{id}"],post:["orders","batchorders","withdrawals","reports"],delete:["orders","orders/{id}","batchorders/{ids}"],put:["orders/{id}"]}},timeframes:{"1m":"1m","1h":"1h","1d":"1d"},exceptions:{3:y,6:b,InsufficientFund:g,InvalidPrice:y,InvalidAmount:y,MissingArgument:y,OrderAlreadyCancelled:y,OrderNotFound:m,OrderStatusIsFinal:y,InvalidPaginationParameter:k},fees:{percentage:!0,tierBased:!0,maker:-5e-4,taker:.002},options:{fees:{AUD:{maker:.0085,taker:.0085}}}})}},{key:"fetchTransactionsWithMethod",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={},void 0!==a&&(o.limit=a),void 0!==i&&(o.after=i),c=void 0,void 0!==r&&(c=this.currency(r)),e.next=13,this[t](this.extend(o,s));case 13:return u=e.sent,e.abrupt("return",this.parseTransactions(u,c,i,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetTransfers",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetDeposits",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetWithdrawals",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Complete:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({Withdraw:"withdrawal",Deposit:"deposit"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.parse8601(this.safeString(e,"creationTime")),r=this.parse8601(this.safeString(e,"lastUpdate")),i=this.parseTransactionType(this.safeStringLower(e,"type"));"withdraw"===i&&(i="withdrawal");var n=this.safeValue(e,"paymentDetail",{}),a=this.safeString(n,"txId"),s=this.safeString(n,"address"),o=void 0;if(void 0!==s){var c=s.split("?dt="),u=c.length;u>1&&(s=c[0],o=c[1])}var d=s,h=o,l=void 0,f=void 0,p=this.safeFloat(e,"fee"),v=this.parseTransactionStatus(this.safeString(e,"status")),m=this.safeString(e,"assetName"),y=this.safeCurrencyCode(m),g=this.safeFloat(e,"amount");return p&&(g-=p),{id:this.safeString(e,"id"),txid:a,timestamp:t,datetime:this.iso8601(t),address:s,addressTo:d,addressFrom:l,tag:o,tagTo:h,tagFrom:f,type:i,amount:g,currency:y,status:v,updated:r,fee:{currency:y,cost:p},info:e}}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,i=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"baseAssetName"),c=this.safeString(s,"quoteAssetName"),u=this.safeString(s,"marketId"),d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(c),l=d+"/"+h,f=this.safeValue(this.safeValue(this.options,"fees",{}),h,this.fees),p=this.safeFloat(s,"priceDecimals"),v=this.safeFloat(s,"amountDecimals"),m=this.safeFloat(s,"minOrderAmount"),y=this.safeFloat(s,"maxOrderAmount"),g=void 0,"AUD"===h&&(g=Math.pow(10,-p)),b={amount:v,price:p},k={amount:{min:m,max:y},price:{min:g,max:void 0},cost:{min:void 0,max:void 0}},i.push({info:s,id:u,symbol:l,base:d,quote:h,baseId:o,quoteId:c,active:void 0,maker:f.maker,taker:f.taker,limits:k,precision:b});return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.parse8601(this.safeString(r,"timestamp")));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsMeBalances(t);case 5:for(r=e.sent,i={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"assetName"),c=this.safeCurrencyCode(o),u=this.safeFloat(s,"balance"),d=this.safeFloat(s,"locked"),(h=this.account()).used=d,h.total=u,i[c]=h;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,0)),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={marketId:o.id,timeWindow:this.timeframes[r]},void 0!==i&&(c.from=this.iso8601(i)),void 0!==a&&(c.limit=a),e.next=12,this.publicGetMarketsMarketIdCandles(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),a={marketId:i.id},e.next=8,this.publicGetMarketsMarketIdOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeIntegerProduct(s,"snapshotId",.001),(c=this.parseOrderBook(s,o)).nonce=this.safeInteger(s,"snapshotId"),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,n=this.safeString(e,"marketId");if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var a=n.split("-"),s=i(a,2),o=s[0],c=s[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);r=u+"/"+d}void 0===r&&void 0!==t&&(r=t.symbol);var h=this.parse8601(this.safeString(e,"timestamp")),l=this.safeFloat(e,"lastPrice"),f=this.safeFloat(e,"volume24h"),p=this.safeFloat(e,"volumeQte24h"),v=this.vwap(f,p),m=this.safeFloat(e,"price24h"),y=this.safeFloat(e,"pricePct24h");return{symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"high24h"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bestBid"),bidVolume:void 0,ask:this.safeFloat(e,"bestAsk"),askVolume:void 0,vwap:v,open:void 0,close:l,last:l,previousClose:void 0,change:m,percentage:y,average:void 0,baseVolume:f,quoteVolume:p,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={marketId:i.id},e.next=7,this.publicGetMarketsMarketIdTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker2",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={id:i.id},e.next=7,this.publicGetMarketIdTick(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"marketId"),a=void 0,s=void 0,o=void 0;if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var c=n.split("-"),u=i(c,2),d=u[0],h=u[1];a=(s=this.safeCurrencyCode(d))+"/"+(o=this.safeCurrencyCode(h))}void 0===a&&void 0!==t&&(a=t.symbol,s=t.base,o=t.quote);var l=void 0;l="AUD"===o?o:s;var f=this.safeString(e,"side");"Bid"===f?f="buy":"Ask"===f&&(f="sell");var p=this.safeString(e,"id"),v=this.safeFloat(e,"price"),m=this.safeFloat(e,"amount"),y=void 0;void 0!==m&&void 0!==v&&(y=m*v);var g=this.safeString(e,"orderId"),b=void 0,k=this.safeFloat(e,"fee");void 0!==k&&(b={cost:k,currency:l});var x=this.safeStringLower(e,"liquidityType");return{info:e,id:p,timestamp:r,datetime:this.iso8601(r),order:g,symbol:a,type:void 0,side:f,price:v,amount:m,cost:y,takerOrMaker:x,fee:b}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={marketId:s.id},e.next=9,this.publicGetMarketsMarketIdTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,v,m,y,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={marketId:c.id,amount:this.amountToPrecision(t,a),side:"buy"===i?"Bid":"Ask"},d=r.toLowerCase(),h=this.safeValue(this.options,"orderTypes",{limit:"Limit",market:"Market",stop:"Stop","stop limit":"Stop Limit","take profit":"Take Profit"}),u.type=this.safeString(h,d,r),l=!1,f=!1,"limit"===d?l=!0:"stop limit"===d?(f=!0,l=!0):("take profit"===d||"stop"===d)&&(f=!0),!l){e.next=18;break}if(void 0!==s){e.next=17;break}throw new p(this.id+" createOrder() requires a price argument for a "+r+"order");case 17:u.price=this.priceToPrecision(t,s);case 18:if(!f){e.next=26;break}if(v=this.safeFloat(o,"triggerPrice"),o=this.omit(o,"triggerPrice"),void 0!==v){e.next=25;break}throw new p(this.id+" createOrder() requires a triggerPrice parameter for a "+r+"order");case 25:u.triggerPrice=this.priceToPrecision(t,v);case 26:return void 0!==(m=this.safeString(o,"clientOrderId"))&&(u.clientOrderId=m),o=this.omit(o,"clientOrderId"),e.next=31,this.privatePostOrders(this.extend(u,o));case 31:return y=e.sent,e.abrupt("return",this.parseOrder(y,c));case 33:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:for(i=0;i<t.length;i++)t[i]=parseInt(t[i]);return a={ids:t},e.next=8,this.privateDeleteBatchordersIds(this.extend(a,r));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateDeleteOrdersId(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=s[a],c=void 0,u=void 0;return"AUD"===s.quote?(c=s.quote,u=parseFloat(this.costToPrecision(e,i*n))):(c=s.base,u=parseFloat(this.amountToPrecision(e,i))),{type:a,currency:c,rate:o,cost:parseFloat(this.feeToPrecision(e,o*u))}}},{key:"parseOrderStatus",value:function(e){return this.safeString({Accepted:"open",Placed:"open","Partially Matched":"open","Fully Matched":"closed",Cancelled:"canceled","Partially Cancelled":"canceled",Failed:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"creationTime")),n=this.safeString(e,"marketId"),a=void 0;if(void 0!==n)if(n in this.markets_by_id)t=this.markets_by_id[n];else{var s=n.split("-"),o=i(s,2),c=o[0],u=o[1],d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u);a=d+"/"+h}void 0===a&&void 0!==t&&(a=t.symbol);var l=this.safeString(e,"side");"Bid"===l?l="buy":"Ask"===l&&(l="sell");var f=this.safeStringLower(e,"type"),p=this.safeFloat(e,"price"),v=this.safeFloat(e,"amount"),m=this.safeFloat(e,"openAmount"),y=void 0;void 0!==v&&void 0!==m&&(y=Math.max(0,v-m));var g=this.parseOrderStatus(this.safeString(e,"status")),b=void 0;void 0!==p&&void 0!==y&&(b=p*y);var k=this.safeString(e,"orderId"),x=this.safeString(e,"clientOrderId"),w=this.safeString(e,"timeInForce"),_=this.safeFloat(e,"triggerPrice"),O=this.safeValue(e,"postOnly");return{info:e,id:k,clientOrderId:x,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:a,type:f,timeInForce:w,postOnly:O,side:l,price:p,stopPrice:_,cost:b,amount:v,filled:y,remaining:m,average:void 0,status:g,trades:void 0,fee:void 0}}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={status:"all"},o=void 0,void 0!==t&&(o=this.market(t),s.marketId=o.id),void 0!==r&&(s.after=r),void 0!==i&&(s.limit=i),e.next=13,this.privateGetOrders(this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"open"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.fetchOrders(t,r,i,a);case 6:return s=e.sent,e.abrupt("return",this.filterBy(s,"status","closed"));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.marketId=o.id),void 0!==r&&(s.after=r),void 0!==i&&(s.limit=i),e.next=13,this.privateGetTrades(this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,r,i));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"lookupSymbolFromMarketId",value:function(e){var t=void 0,r=void 0;if(void 0!==e)if(e in this.markets_by_id)t=this.markets_by_id[e];else{var n=e.split("-"),a=i(n,2),s=a[0],o=a[1];r=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(o)}return void 0===r&&void 0!==t&&(r=t.symbol),r}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.keysort(this.omit(i,this.extractParams(e)));if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),u=this.base64ToBinary(this.encode(this.secret)),d=r+s+c;"GET"===r||"DELETE"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):d+=a=this.json(o);var h=this.hmac(this.encode(d),u,"sha512","base64");n={Accept:"application/json","Accept-Charset":"UTF-8","Content-Type":"application/json","BM-AUTH-APIKEY":this.apiKey,"BM-AUTH-TIMESTAMP":c,"BM-AUTH-SIGNATURE":h}}else"public"===t&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var l=this.urls.api[t]+s;return{url:l,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){if("success"in s&&!s.success){var u=this.safeString(s,"errorCode"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,d),new v(d)}if(e>=400){var h=this.safeString(s,"code"),l=this.safeString(s,"message"),f=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,h,f),this.throwExactlyMatchedException(this.exceptions,l,f),new v(f)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"btctradeua",name:"BTC Trade UA",countries:["UA"],rateLimit:3e3,has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0,signIn:!0},urls:{referral:"https://btc-trade.com.ua/registration/22689",logo:"https://user-images.githubusercontent.com/1294454/27941483-79fc7350-62d9-11e7-9f61-ac47f28fcd96.jpg",api:"https://btc-trade.com.ua/api",www:"https://btc-trade.com.ua",doc:"https://docs.google.com/document/d/1ocYA0yMy_RXd561sfG3qEPZ80kyll36HUxvCRe5GbhE/edit"},api:{public:{get:["deals/{symbol}","trades/sell/{symbol}","trades/buy/{symbol}","japan_stat/high/{symbol}"]},private:{post:["auth","ask/{symbol}","balance","bid/{symbol}","buy/{symbol}","my_orders/{symbol}","order/status/{id}","remove/order/{id}","sell/{symbol}"]}},markets:{"BCH/UAH":{id:"bch_uah",symbol:"BCH/UAH",base:"BCH",quote:"UAH",baseId:"bch",quoteId:"uah"},"BTC/UAH":{id:"btc_uah",symbol:"BTC/UAH",base:"BTC",quote:"UAH",baseId:"btc",quoteId:"uah",precision:{price:1},limits:{amount:{min:1e-10}}},"DASH/BTC":{id:"dash_btc",symbol:"DASH/BTC",base:"DASH",quote:"BTC",baseId:"dash",quoteId:"btc"},"DASH/UAH":{id:"dash_uah",symbol:"DASH/UAH",base:"DASH",quote:"UAH",baseId:"dash",quoteId:"uah"},"DOGE/BTC":{id:"doge_btc",symbol:"DOGE/BTC",base:"DOGE",quote:"BTC",baseId:"doge",quoteId:"btc"},"DOGE/UAH":{id:"doge_uah",symbol:"DOGE/UAH",base:"DOGE",quote:"UAH",baseId:"doge",quoteId:"uah"},"ETH/UAH":{id:"eth_uah",symbol:"ETH/UAH",base:"ETH",quote:"UAH",baseId:"eth",quoteId:"uah"},"ITI/UAH":{id:"iti_uah",symbol:"ITI/UAH",base:"ITI",quote:"UAH",baseId:"iti",quoteId:"uah"},"KRB/UAH":{id:"krb_uah",symbol:"KRB/UAH",base:"KRB",quote:"UAH",baseId:"krb",quoteId:"uah"},"LTC/BTC":{id:"ltc_btc",symbol:"LTC/BTC",base:"LTC",quote:"BTC",baseId:"ltc",quoteId:"btc"},"LTC/UAH":{id:"ltc_uah",symbol:"LTC/UAH",base:"LTC",quote:"UAH",baseId:"ltc",quoteId:"uah"},"NVC/BTC":{id:"nvc_btc",symbol:"NVC/BTC",base:"NVC",quote:"BTC",baseId:"nvc",quoteId:"btc"},"NVC/UAH":{id:"nvc_uah",symbol:"NVC/UAH",base:"NVC",quote:"UAH",baseId:"nvc",quoteId:"uah"},"PPC/BTC":{id:"ppc_btc",symbol:"PPC/BTC",base:"PPC",quote:"BTC",baseId:"ppc",quoteId:"btc"},"SIB/UAH":{id:"sib_uah",symbol:"SIB/UAH",base:"SIB",quote:"UAH",baseId:"sib",quoteId:"uah"},"XMR/UAH":{id:"xmr_uah",symbol:"XMR/UAH",base:"XMR",quote:"UAH",baseId:"xmr",quoteId:"uah"},"ZEC/UAH":{id:"zec_uah",symbol:"ZEC/UAH",base:"ZEC",quote:"UAH",baseId:"zec",quoteId:"uah"}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:6e-4,LTC:.01,NVC:.01,DOGE:10}}}})}},{key:"signIn",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.privatePostAuth(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"accounts"),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(o,"balance"),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id},e.next=8,this.publicGetTradesBuySymbol(this.extend(a,r));case 8:return s=e.sent,e.next=11,this.publicGetTradesSellSymbol(this.extend(a,r));case 11:return o=e.sent,c={bids:[],asks:[]},s&&"list"in s&&(c.bids=s.list),o&&"list"in o&&(c.asks=o.list),e.abrupt("return",this.parseOrderBook(c,void 0,"bids","asks","price","currency_trade"));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=3,this.loadMarkets();case 3:return n={symbol:this.marketId(t)},e.next=6,this.publicGetJapanStatHighSymbol(this.extend(n,r));case 6:if(a=e.sent,s=this.safeValue(a,"trades"),o=this.milliseconds(),c={symbol:t,timestamp:o,datetime:this.iso8601(o),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:s},(u=s.length)>0){for(d=Math.max(u-48,0),h=d;h<s.length;h++)l=s[h],void 0===c.open&&(c.open=l[1]),(void 0===c.high||c.high<l[2])&&(c.high=l[2]),(void 0===c.low||c.low>l[3])&&(c.low=l[3]),void 0===c.baseVolume?c.baseVolume=-l[5]:c.baseVolume-=l[5];f=u-1,c.last=s[f][4],c.close=c.last,c.baseVolume=-1*c.baseVolume}return e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"convertCyrillicMonthNameToString",value:function(e){return this.safeString({"\u044f\u043d\u0432\u0430\u0440\u044f":"01","\u0444\u0435\u0432\u0440\u0430\u043b\u044f":"02","\u043c\u0430\u0440\u0442\u0430":"03","\u0430\u043f\u0440\u0435\u043b\u044f":"04","\u043c\u0430\u044f":"05","\u0438\u044e\u043d\u044f":"06","\u0438\u044e\u043b\u044f":"07","\u0430\u0432\u0433\u0443\u0441\u0442\u0430":"08","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f":"09","\u043e\u043a\u0442\u044f\u0431\u0440\u044f":"10","\u043d\u043e\u044f\u0431\u0440\u044f":"11","\u0434\u0435\u043a\u0430\u0431\u0440\u044f":"12"},e)}},{key:"parseCyrillicDatetime",value:function(e){var t=e.split(" "),r=t[0],i=this.convertCyrillicMonthNameToString(t[1]);if(!i)throw new f(this.id+" parseTrade() undefined month name: "+e);var n=t[2],a=t[4];7===a.length&&(a="0"+a),1===r.length&&(r="0"+r);var s=[n,i,r].join("-")+"T"+a,o=this.parse8601(s),c=[i,r].join("");return(c=parseInt(c))<325||c>1028?o-72e5:o-108e5}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseCyrillicDatetime(this.safeString(e,"pub_date")),i=this.safeString(e,"id"),n="limit",a=this.safeString(e,"type"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amnt_trade"),c=void 0;void 0!==o&&void 0!==s&&(c=s*o);var u=void 0;return void 0!==t&&(u=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:u,type:n,side:a,order:void 0,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetDealsSymbol(this.extend(o,a));case 9:for(c=e.sent,u=[],d=0;d<c.length;d++)c[d].id%2&&u.push(c[d]);return e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},"market"!==r){e.next=4;break}throw new f(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u="privatePost"+this.capitalize(n)+"Id",d={count:a,currency1:c.quoteId,currency:c.baseId,price:s},e.abrupt("return",this[u](this.extend(d,o)));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privatePostRemoveOrderId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;return void 0!==t&&(i=t.symbol),{id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:"open",symbol:i,type:void 0,timeInForce:void 0,postOnly:void 0,side:this.safeString(e,"type"),price:this.safeFloat(e,"price"),stopPrice:void 0,amount:this.safeFloat(e,"amnt_trade"),filled:0,remaining:this.safeFloat(e,"amnt_trade"),trades:void 0,info:e,cost:void 0,average:void 0,fee:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},e.next=12,this.privatePostMyOrdersSymbol(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"your_open_orders"),e.abrupt("return",this.parseOrders(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+=this.implodeParams(e,o));else{this.checkRequiredCredentials();var c=this.nonce(),u=(a=this.urlencode(this.extend({out_order_id:c,nonce:c},o)))+this.secret;n={"public-key":this.apiKey,"api-sign":this.hash(this.encode(u),"sha256"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"btcturk",name:"BTCTurk",countries:["TR"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153926-efbef500-c2c0-11ea-9842-05b63612c4b9.jpg",api:"https://www.btcturk.com/api",www:"https://www.btcturk.com",doc:"https://github.com/BTCTrader/broker-api-docs"},api:{public:{get:["ohlcdata","orderbook","ticker","trades"]},private:{get:["balance","openOrders","userTransactions"],post:["exchange","cancelOrder"]}},fees:{trading:{maker:.00236,taker:.003*1.18}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetTicker(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"pair"),c=o.slice(0,3),u=o.slice(3,6),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),c=c.toLowerCase(),u=u.toLowerCase(),l=d+"/"+h,f={amount:8,price:8},p=!0,n.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,active:p,info:s,precision:f,limits:{amount:{min:Math.pow(10,-f.amount),max:void 0},price:{min:Math.pow(10,-f.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],c=this.currencies[o],u=c.id+"_available",d=c.id+"_balance",h=c.id+"_reserved",u in r&&((l=this.account()).free=this.safeFloat(r,u),l.total=this.safeFloat(r,d),l.used=this.safeFloat(r,h),n[o]=l);return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={pairSymbol:n.id},e.next=8,this.publicGetOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;t&&(r=t.symbol);var i=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"average"),baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"pair"),u=c,d=void 0,c in this.markets_by_id&&(d=this.markets_by_id[u],u=d.symbol),a[u]=this.parseTicker(o,d);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.fetchTickers(r);case 6:return a=e.sent,e.abrupt("return",this.safeValue2(a,n.id,t));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=void 0;void 0!==a&&void 0!==n&&(s=a*n);var o=void 0;return void 0!==t&&(o=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pairSymbol:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"Time")),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1d",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={},void 0!==a&&(c.last=a),e.next=11,this.publicGetOhlcdata(this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if(c={PairSymbol:this.marketId(t),OrderType:"buy"===n?0:1,OrderMethod:"market"===r?1:0},"market"!==r){e.next=10;break}if("Total"in o){e.next=8;break}throw new l(this.id+' createOrder() requires the "Total" extra parameter for market orders (amount and price are both ignored)');case 8:e.next=12;break;case 10:c.Price=s,c.Amount=a;case 12:return e.next=14,this.privatePostExchange(this.extend(c,o));case 14:return u=e.sent,d=this.safeString(u,"id"),e.abrupt("return",{info:u,id:d});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if("btctrader"===this.id)throw new l(this.id+" is an abstract base API for BTCExchange, BTCTurk");var s=this.urls.api+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString();a=this.urlencode(i);var c=this.base64ToBinary(this.secret),u=this.apiKey+o;n={"X-PCK":this.apiKey,"X-Stamp":o,"X-Signature":this.hmac(this.encode(u),c,"sha256","base64"),"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AddressPending,p=l.AuthenticationError,v=l.ExchangeError,m=l.NotSupported,y=l.PermissionDenied,g=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"buda",name:"Buda",countries:["AR","CL","CO","PE"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTrades:!0,fetchTicker:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/47380619-8a029200-d706-11e8-91e0-8a391fe48de3.jpg",api:"https://www.buda.com/api",www:"https://www.buda.com",doc:"https://api.buda.com",fees:"https://www.buda.com/comisiones"},status:{status:"error",updated:void 0,eta:void 0,url:void 0},api:{public:{get:["pairs","markets","currencies","markets/{market}","markets/{market}/ticker","markets/{market}/volume","markets/{market}/order_book","markets/{market}/trades","currencies/{currency}/fees/deposit","currencies/{currency}/fees/withdrawal","tv/history"],post:["markets/{market}/quotations"]},private:{get:["balances","balances/{currency}","currencies/{currency}/balances","orders","orders/{id}","markets/{market}/orders","deposits","currencies/{currency}/deposits","withdrawals","currencies/{currency}/withdrawals","currencies/{currency}/receive_addresses","currencies/{currency}/receive_addresses/{id}"],post:["markets/{market}/orders","currencies/{currency}/deposits","currencies/{currency}/withdrawals","currencies/{currency}/simulated_withdrawals","currencies/{currency}/receive_addresses"],put:["orders/{id}"]}},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","2h":"120","1d":"D","1w":"W"},fees:{trading:{tierBased:!0,percentage:!0,taker:.008,maker:.004,tiers:{taker:[[0,.008],[2e3,.007],[2e4,.006],[1e5,.005],[5e5,.004],[25e5,.003],[125e5,.002]],maker:[[0,.004],[2e3,.0035],[2e4,.003],[1e5,.0025],[5e5,.002],[25e5,.0015],[125e5,.001]]}}},exceptions:{not_authorized:p,forbidden:y,invalid_record:v,not_found:v,parameter_missing:v,bad_parameter:v}})}},{key:"fetchCurrencyInfo",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0){e.next=6;break}return e.next=4,this.publicGetCurrencies();case 4:n=e.sent,r=this.safeValue(n,"currencies");case 6:a=0;case 7:if(!(a<r.length)){e.next=14;break}if((s=r[a]).id!==t){e.next=11;break}return e.abrupt("return",s);case 11:a++,e.next=7;break;case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:return r=e.sent,n=this.safeValue(r,"markets"),e.next=7,this.publicGetCurrencies();case 7:a=e.sent,s=this.safeValue(a,"currencies"),o=[],c=0;case 11:if(!(c<n.length)){e.next=32;break}return u=n[c],d=this.safeString(u,"id"),h=this.safeString(u,"base_currency"),l=this.safeString(u,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),e.next=20,this.fetchCurrencyInfo(h,s);case 20:return v=e.sent,e.next=23,this.fetchCurrencyInfo(l,s);case 23:m=e.sent,y=f+"/"+p,g={amount:v.input_decimals,price:m.input_decimals},(b={amount:{min:parseFloat(u.minimum_order_amount[0]),max:void 0},price:{min:Math.pow(10,-g.price),max:void 0}}).cost={min:b.amount.min*b.price.min,max:void 0},o.push({id:d,symbol:y,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:g,limits:b,info:u});case 29:c++,e.next=11;break;case 32:return e.abrupt("return",o);case 33:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetCurrencies();case 3:t=e.sent,r=t.currencies,n={},a=0;case 7:if(!(a<r.length)){e.next=19;break}if((s=r[a]).managed){e.next=11;break}return e.abrupt("continue",16);case 11:o=this.safeString(s,"id"),c=this.safeCurrencyCode(o),u=this.safeFloat(s,"input_decimals"),d=Math.pow(10,-u),n[c]={id:o,code:c,info:s,name:void 0,active:!0,fee:void 0,precision:u,limits:{amount:{min:d,max:void 0},price:{min:d,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:parseFloat(s.deposit_minimum[0]),max:void 0},withdraw:{min:parseFloat(s.withdrawal_minimum[0])}}};case 16:a++,e.next=7;break;case 19:return e.abrupt("return",n);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:r={},n={},a={},void 0===t&&(t=Object.keys(this.currencies)),s=0;case 9:if(!(s<t.length)){e.next=25;break}return o=t[s],c=this.currency(o),u={currency:c.id},e.next=15,this.publicGetCurrenciesCurrencyFeesWithdrawal(u);case 15:return d=e.sent,e.next=18,this.publicGetCurrenciesCurrencyFeesDeposit(u);case 18:h=e.sent,r[o]=this.parseFundingFee(d.fee),n[o]=this.parseFundingFee(h.fee),a[o]={withdraw:d,deposit:h};case 22:s++,e.next=9;break;case 25:return e.abrupt("return",{withdraw:r,deposit:n,info:a});case 26:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFundingFee",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===t&&(t=e.name),"withdrawal"===t&&(t="withdraw"),{type:t,currency:e.base[1],rate:e.percent,cost:parseFloat(e.base[0])}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetMarketsMarketTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"ticker"),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=parseFloat(e.last_price[0]),a=parseFloat(e.price_variation_24h),s=parseFloat(this.priceToPrecision(i,n/(a+1))),o=n-s,c=this.sum(n,s)/2;return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:parseFloat(e.max_bid[0]),bidVolume:void 0,ask:parseFloat(e.min_ask[0]),askVolume:void 0,vwap:void 0,open:s,close:n,last:n,previousClose:s,change:o,percentage:100*a,average:c,baseVolume:parseFloat(e.volume[0]),quoteVolume:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketsMarketTrades(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades.entries,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,c=void 0,u=void 0,d=void 0,h=void 0;return t&&(d=t.symbol),Array.isArray(e)&&(r=parseInt(e[0]),h=(a=parseFloat(e[1]))*(s=parseFloat(e[2])),i=e[3],o=e[4].toString()),{id:o,order:c,info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,type:n,side:i,takerOrMaker:void 0,price:a,amount:s,cost:h,fee:u}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={market:n.id},e.next=8,this.publicGetMarketsMarketOrderBook(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"order_book"),e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===n&&(n=this.milliseconds()-864e5),c={symbol:o.id,resolution:this.timeframes[r],from:n/1e3,to:this.seconds()},e.next=11,this.publicGetTvHistory(this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",this.parseTradingViewOHLCV(u,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"balances"),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"id"),u=this.safeCurrencyCode(c),(d=this.account()).free=parseFloat(o.available_amount[0]),d.total=parseFloat(o.amount[0]),n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t)},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"order"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o={market:s.id,per:n},e.next=11,this.privateGetMarketsMarketOrders(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"orders"),e.abrupt("return",this.parseOrders(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"pending"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={state:"traded"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return n="buy"===n?"Bid":"Ask",c={market:this.marketId(t),price_type:r,type:n,amount:this.amountToPrecision(t,a)},"limit"===r&&(c.limit=this.priceToPrecision(t,s)),e.next=9,this.privatePostMarketsMarketOrders(this.extend(c,o));case 9:return u=e.sent,d=this.safeValue(u,"order"),e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:parseInt(t),state:"canceling"},e.next=7,this.privatePutOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"order"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({traded:"closed",received:"open",canceling:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"market_id"),a=this.safeSymbol(n,t,"-"),s=this.safeString(e,"price_type"),o=this.safeStringLower(e,"type"),c=this.parseOrderStatus(this.safeString(e,"state")),u=this.safeValue(e,"original_amount",[]),d=this.safeFloat(u,0),h=this.safeValue(e,"amount",[]),l=this.safeFloat(h,0),f=this.safeValue(e,"traded_amount",[]),p=this.safeFloat(f,0),v=this.safeValue(e,"totalExchanged",[]),m=this.safeFloat(v,0),y=this.safeValue(e,"limit",[]),g=this.safeFloat(y,0);void 0===g&&void 0!==y&&(g=y);var b=void 0;void 0!==m&&void 0!==p&&p>0&&(b=this.priceToPrecision(a,m/p));var k=this.safeValue(e,"paid_fee",[]),x=this.safeFloat(k,0),w=void 0;if(void 0!==x){var _=this.safeString(k,1),O=this.safeCurrencyCode(_);w={cost:x,code:O}}return{info:e,id:r,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:c,symbol:a,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:g,stopPrice:void 0,average:b,cost:m,amount:d,filled:p,remaining:l,trades:void 0,fee:w}}},{key:"isFiat",value:function(e){return this.safeValue({ARS:!0,CLP:!0,COP:!0,PEN:!0},e,!1)}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),!this.isFiat(t)){e.next=6;break}throw new m(this.id+" fetchDepositAddress() for fiat "+t+" is not supported");case 6:return a={currency:n.id},e.next=9,this.privateGetCurrenciesCurrencyReceiveAddresses(this.extend(a,r));case 9:for(s=e.sent,o=this.safeValue(s,"receive_addresses"),c=[],u=1;u<o.length;u++)(d=o[u]).ready&&(h=d.address,this.checkAddress(h),c.push(h));if(!(c.length<1)){e.next=16;break}throw new f(this.id+": there are no addresses ready for receiving "+t+", retry again later)");case 16:return l=c[0],e.abrupt("return",{currency:t,address:l,tag:void 0,info:o});case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),!this.isFiat(t)){e.next=6;break}throw new m(this.id+": fiat fetchDepositAddress() for "+t+" is not supported");case 6:return a={currency:n.id},e.next=9,this.privatePostCurrenciesCurrencyReceiveAddresses(this.extend(a,r));case 9:return s=e.sent,o=this.safeString(s.receive_address,"address"),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({rejected:"failed",confirmed:"ok",anulled:"canceled",retained:"canceled",pending_confirmation:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"currency"),a=this.safeCurrencyCode(n,t),s=parseFloat(e.amount[0]),o=parseFloat(e.fee[0]),c=e.fee[1],u=this.parseTransactionStatus(this.safeString(e,"state")),d="deposit_data"in e?"deposit":"withdrawal",h=this.safeValue(e,d+"_data",{}),l=this.safeValue(h,"target_address"),f=this.safeString(h,"tx_hash"),p=this.parse8601(this.safeString(h,"updated_at"));return{info:e,id:r,txid:f,timestamp:i,datetime:this.iso8601(i),address:l,type:d,amount:s,currency:a,status:u,updated:p,fee:{cost:o,rate:c}}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new g(this.id+": fetchDeposits() requires a currency code argument");case 8:return s=this.currency(t),o={currency:s.id,per:n},e.next=12,this.privateGetCurrenciesCurrencyDeposits(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"deposits"),e.abrupt("return",this.parseTransactions(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new g(this.id+": fetchDeposits() requires a currency code argument");case 8:return s=this.currency(t),o={currency:s.id,per:n},e.next=12,this.privateGetCurrenciesCurrencyWithdrawals(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"withdrawals"),e.abrupt("return",this.parseTransactions(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o={currency:s.id,amount:r,withdrawal_data:{target_address:n}},e.next=9,this.privatePostCurrenciesCurrencyWithdrawals(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"withdrawal"),e.abrupt("return",this.parseTransaction(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));Object.keys(o).length&&("GET"===r?s+="?"+this.urlencode(o):a=this.json(o));var c=this.urls.api+"/"+this.version+"/"+s;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=[r,"/api/"+this.version+"/"+s];if(a){var h=this.stringToBase64(a);d.push(this.decode(h))}d.push(u);var l=d.join(" "),f=this.hmac(this.encode(l),this.encode(this.secret),"sha384");n={"X-SBTC-APIKEY":this.apiKey,"X-SBTC-SIGNATURE":f,"X-SBTC-NONCE":u,"Content-Type":"application/json"}}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&e>=400){var u=this.safeString(s,"code"),d=this.safeString(s,"message",a),h=this.id+" "+d;if(void 0!==u)throw this.throwExactlyMatchedException(this.exceptions,u,h),new v(h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.RateLimitExceeded,v=f.BadSymbol,m=f.OrderNotFound,y=f.ExchangeError,g=f.AuthenticationError,b=f.ArgumentsRequired,k=f.ExchangeNotAvailable;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"bw",name:"BW",countries:["CN"],rateLimit:1500,version:"v1",has:{cancelAllOrders:!1,cancelOrder:!0,cancelOrders:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!0,createMarketOrder:!1,createOrder:!0,deposit:!1,editOrder:!1,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchL2OrderBook:!1,fetchLedger:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!1,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTradingLimits:!1,fetchTransactions:!1,fetchWithdrawals:!0,privateAPI:!1,publicAPI:!1,withdraw:!1},timeframes:{"1m":"1M","5m":"5M","15m":"15M","30m":"30M","1h":"1H","1w":"1W"},hostname:"bw.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/69436317-31128c80-0d52-11ea-91d1-eb7bb5818812.jpg",api:"https://www.{hostname}",www:"https://www.bw.com",doc:"https://github.com/bw-exchange/api_docs_en/wiki",fees:"https://www.bw.com/feesRate",referral:"https://www.bw.com/regGetCommission/N3JuT1R3bWxKTE0"},requiredCredentials:{apiKey:!0,secret:!0},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{}},exceptions:{exact:{999:g,1e3:k,2012:m,5017:v,10001:p}},api:{public:{get:["api/data/v1/klines","api/data/v1/ticker","api/data/v1/tickers","api/data/v1/trades","api/data/v1/entrusts","exchange/config/controller/website/marketcontroller/getByWebId","exchange/config/controller/website/currencycontroller/getCurrencyList"]},private:{get:["exchange/entrust/controller/website/EntrustController/getEntrustById","exchange/entrust/controller/website/EntrustController/getUserEntrustRecordFromCacheWithPage","exchange/entrust/controller/website/EntrustController/getUserEntrustList","exchange/fund/controller/website/fundwebsitecontroller/getwithdrawaddress","exchange/fund/controller/website/fundwebsitecontroller/getpayoutcoinrecord","exchange/entrust/controller/website/EntrustController/getUserEntrustList"],post:["exchange/fund/controller/website/fundcontroller/getPayinAddress","exchange/fund/controller/website/fundcontroller/getPayinCoinRecord","exchange/fund/controller/website/fundcontroller/findbypage","exchange/entrust/controller/website/EntrustController/addEntrust","exchange/entrust/controller/website/EntrustController/cancelEntrust"]}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetExchangeConfigControllerWebsiteMarketcontrollerGetByWebId(t);case 3:for(r=e.sent,a=this.safeValue(r,"datas",[]),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"marketId"),d=parseInt(u),h=this.safeStringUpper(c,"name"),l=h.split("_"),f=n(l,2),p=f[0],v=f[1],p=this.safeCurrencyCode(p),v=this.safeCurrencyCode(v),m=this.safeString(c,"sellerCurrencyId"),y=this.safeString(c,"buyerCurrencyId"),g=parseInt(m),b=parseInt(y),k=p+"/"+v,x=this.safeInteger(c,"state"),w=1===x,_=this.safeFloat(c,"defaultFee"),s.push({id:u,active:w,numericId:d,symbol:k,base:p,quote:v,baseId:m,quoteId:y,baseNumericId:g,quoteNumericId:b,maker:_,taker:_,info:c,precision:{amount:this.safeInteger(c,"amountDecimal"),price:this.safeInteger(c,"priceDecimal")},limits:{amount:{min:this.safeFloat(c,"minAmount"),max:void 0},price:{min:0,max:void 0},cost:{min:0,max:void 0}}});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetExchangeConfigControllerWebsiteCurrencycontrollerGetCurrencyList(t);case 3:for(r=e.sent,n=this.safeValue(r,"datas",[]),a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currencyId"),u=this.safeCurrencyCode(this.safeStringUpper(o,"name")),d=this.safeInteger(o,"state"),h=1===d,a[u]={id:c,code:u,info:o,name:u,active:h,fee:this.safeFloat(o,"drawFee"),precision:void 0,limits:{amount:{min:this.safeFloat(o,"limitAmount",0),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeFloat(o,"onceDrawLimit")}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,0),i=this.safeSymbol(r,t),n=this.milliseconds(),a=parseFloat(this.safeValue(e,1)),s=this.safeValue(e,"bid",{}),o=this.safeValue(e,"ask",{});return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:parseFloat(this.safeValue(e,2)),low:parseFloat(this.safeValue(e,3)),bid:parseFloat(this.safeValue(e,7)),bidVolume:this.safeFloat(s,"quantity"),ask:parseFloat(this.safeValue(e,8)),askVolume:this.safeFloat(o,"quantity"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:parseFloat(this.safeValue(e,5)),percentage:void 0,average:void 0,baseVolume:parseFloat(this.safeValue(e,4)),quoteVolume:parseFloat(this.safeValue(e,9)),info:e}}},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={marketId:n.id},e.next=7,this.publicGetApiDataV1Ticker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"datas",[]),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetApiDataV1Tickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"datas",[]),s={},o=0;o<a.length;o++)c=this.parseTicker(a[o]),u=c.symbol,(void 0===t||this.inArray(u,t))&&(s[u]=c);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={marketId:a.id},void 0!==r&&(s.dataSize=r),e.next=9,this.publicGetApiDataV1Entrusts(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"datas",[]),u=this.safeTimestamp(c,"timestamp"),e.abrupt("return",this.parseOrderBook(c,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,2),i=this.safeFloat(e,5),a=this.safeFloat(e,6),s=this.safeString(e,1),o=void 0;if(void 0!==s)if(s in this.markets_by_id)t=this.markets_by_id[s];else{var c=this.safeString(e,3),u=c.split("_"),d=n(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l);o=f+"/"+p}void 0===o&&void 0!==t&&(o=t.symbol);var v=void 0;void 0!==a&&void 0!==i&&(v=this.costToPrecision(o,i*a));var m=this.safeString(e,4),y="ask"===m?"sell":"buy";return{id:void 0,timestamp:r,datetime:this.iso8601(r),symbol:o,order:void 0,type:"limit",side:y,takerOrMaker:void 0,price:i,amount:a,cost:parseFloat(v),fee:void 0,info:e}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={marketId:s.id},void 0!==n&&(o.dataSize=n),e.next=10,this.publicGetApiDataV1Trades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"datas",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,3),this.safeFloat(e,4),this.safeFloat(e,5),this.safeFloat(e,6),this.safeFloat(e,7),this.safeFloat(e,8)]}},{key:"fetchOHLCV",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={marketId:o.id,type:this.timeframes[r],dataSize:500},void 0!==a&&(c.dataSize=a),e.next=11,this.publicGetApiDataV1Klines(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"datas",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostExchangeFundControllerWebsiteFundcontrollerFindbypage(t);case 5:for(r=e.sent,n=this.safeValue(r,"datas",{}),a=this.safeValue(n,"list",[]),s={info:r},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"currencyTypeId"),d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(c,"amount"),h.used=this.safeFloat(c,"freeze"),s[d]=h;return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},void 0!==s){e.next=4;break}throw new y(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={amount:this.amountToPrecision(t,a),price:this.priceToPrecision(t,s),type:"buy"===n?1:0,rangeType:0,marketId:c.id},e.next=10,this.privatePostExchangeEntrustControllerWebsiteEntrustControllerAddEntrust(this.extend(u,o));case 10:return d=e.sent,h=this.safeValue(d,"datas"),l=this.safeString(h,"entrustId"),e.abrupt("return",{id:l,info:d,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:r,side:n,price:s,amount:a,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:"open",fee:void 0,trades:void 0,clientOrderId:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-3":"canceled","-2":"canceled","-1":"canceled",0:"open",1:"canceled",2:"closed",3:"open",4:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketId"),i=this.safeSymbol(r,t),n=this.safeInteger(e,"createTime"),a=this.safeString(e,"type");"0"===a?a="sell":"1"===a&&(a="buy");var s=this.safeFloat(e,"amount"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"completeAmount"),u=this.safeFloat2(e,"availabelAmount","availableAmount"),d=this.safeFloat(e,"totalMoney"),h=this.parseOrderStatus(this.safeString(e,"status"));return this.safeOrder({info:e,id:this.safeString(e,"entrustId"),clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:i,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:o,stopPrice:void 0,amount:s,cost:d,average:void 0,filled:c,remaining:u,status:h,fee:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={marketId:a.id,entrustId:t},e.next=10,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetEntrustById(this.extend(s,n));case 10:return o=e.sent,c=this.safeValue(o,"datas",{}),e.abrupt("return",this.parseOrder(c,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={marketId:a.id,entrustId:t},e.next=10,this.privatePostExchangeEntrustControllerWebsiteEntrustControllerCancelEntrust(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",{info:o,id:t});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={marketId:s.id},void 0!==n&&(o.pageSize=n),e.next=13,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustRecordFromCacheWithPage(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"entrustList",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={marketId:s.id},void 0!==n&&(o.pageSize=n),void 0!==r&&(o.startDateTime=r),e.next=14,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"entrustList",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={marketId:s.id},void 0!==r&&(o.startDateTime=r),void 0!==n&&(o.pageSize=n),e.next=14,this.privateGetExchangeEntrustControllerWebsiteEntrustControllerGetUserEntrustList(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"entrustList",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api,{hostname:this.hostname})+"/"+e;if("GET"===r?Object.keys(i).length&&(s+="?"+this.urlencode(i)):a=this.json(i),"private"===t){var o=this.milliseconds().toString(),c="";if("GET"===r)for(var u=this.keysort(i),d=Object.keys(u),h=0;h<d.length;h++){var l=d[h];c+=l+u[l].toString()}else c=a;var f=this.apiKey+o+c+this.secret,p=this.hash(this.encode(f),"md5");n||(n={}),n.Apiid=this.apiKey,n.Timestamp=o,n.Sign=p}return{url:s,method:r,body:a,headers:n}}},{key:"fetchDepositAddress",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencyTypeName:n.name},e.next=7,this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"datas",{}),c=this.safeString(o,"address"),u=this.safeString(o,"memo"),this.checkAddress(c),e.abrupt("return",{currency:t,address:this.checkAddress(c),tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({"-1":"canceled",0:"pending",1:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"depositId","withdrawalId"),i=this.safeString2(e,"depositAddress","withdrawalAddress"),n=this.safeString2(e,"currencyId","currencyTypeId"),a=void 0;n in this.currencies_by_id&&(t=this.currencies_by_id[n]),void 0===a&&void 0!==t&&(a=t.code);var s="depositId"in e?"deposit":"withdrawal",o=this.safeFloat2(e,"actuallyAmount","amount"),c=this.parseTransactionStatus(this.safeString2(e,"verifyStatus","state")),u=this.safeInteger(e,"createTime"),d=this.safeString(e,"txId"),h=void 0,l=this.safeFloat(e,"fees");return void 0!==l&&(h={cost:l,currency:a}),{info:e,id:r,txid:d,timestamp:u,datetime:this.iso8601(u),addressFrom:void 0,address:i,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:s,amount:o,currency:a,status:c,updated:void 0,fee:h}}},{key:"fetchDeposits",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currencyTypeName:s.name},void 0!==n&&(o.pageSize=n),e.next=13,this.privatePostExchangeFundControllerWebsiteFundcontrollerGetPayinCoinRecord(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"list",[]),e.abrupt("return",this.parseTransactions(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new b(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currencyId:s.id},void 0!==n&&(o.pageSize=n),e.next=13,this.privateGetExchangeFundControllerWebsiteFundwebsitecontrollerGetpayoutcoinrecord(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"datas",{}),d=this.safeValue(u,"list",[]),e.abrupt("return",this.parseTransactions(d,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(s){var u=this.safeValue(s,"resMsg"),d=this.safeString(u,"code");if("1"!==d){var h=this.id+" "+this.json(s);throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),new y(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(13).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.ArgumentsRequired,y=f.PermissionDenied,g=f.InvalidOrder,b=f.OrderNotFound,k=f.InsufficientFunds,x=f.BadRequest,w=f.RateLimitExceeded,_=f.InvalidNonce;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bybit",name:"Bybit",countries:["VG"],version:"v2",userAgent:void 0,rateLimit:100,hostname:"bybit.com",has:{cancelOrder:!0,CORS:!0,cancelAllOrders:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,fetchPositions:!0},timeframes:{"1m":"1","3m":"3","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","6h":"360","12h":"720","1d":"D","1w":"W","1M":"M","1y":"Y"},urls:{test:"https://api-testnet.{hostname}",logo:"https://user-images.githubusercontent.com/51840849/76547799-daff5b80-649e-11ea-87fb-3be9bac08954.jpg",api:"https://api.{hostname}",www:"https://www.bybit.com",doc:["https://bybit-exchange.github.io/docs/inverse/","https://bybit-exchange.github.io/docs/linear/","https://github.com/bybit-exchange"],fees:"https://help.bybit.com/hc/en-us/articles/360039261154",referral:"https://www.bybit.com/app/register?ref=X7Prm"},api:{futures:{private:{get:["position/list","order/list","order","stop-order/list","stop-order","execution/list","trade/closed-pnl/list"],post:["order/create","order/cancel","order/cancelAll","order/replace","stop-order/create","stop-order/cancel","stop-order/cancelAll","stop-order/replace","position/change-position-margin","position/trading-stop","position/leverage/save","position/switch-mode","position/switch-isolated"]}},v2:{public:{get:["orderBook/L2","kline/list","tickers","trading-records","symbols","liq-records","mark-price-kline","index-price-kline","premium-index-kline","open-interest","big-deal","account-ratio","time","announcement"]},private:{get:["order/list","order","stop-order/list","stop-order","position/list","execution/list","trade/closed-pnl/list","funding/prev-funding-rate","funding/prev-funding","funding/predicted-funding","account/api-key","account/lcp","wallet/balance","wallet/fund/records","wallet/withdraw/list","exchange-order/list"],post:["order/create","order/cancel","order/cancelAll","order/replace","stop-order/create","stop-order/cancel","stop-order/cancelAll","stop-order/replace","position/change-position-margin","position/trading-stop","position/leverage/save"]}},public:{linear:{get:["kline","recent-trading-records","funding/prev-funding-rate","mark-price-kline","index-price-kline","premium-index-kline","risk-limit"]}},private:{linear:{get:["order/list","order/search","stop-order/list","stop-order/search","position/list","trade/execution/list","trade/closed-pnl/list","funding/predicted-funding","funding/prev-funding"],post:["order/create","order/cancel","order/cancel-all","order/replace","stop-order/create","stop-order/cancel","stop-order/cancel-all","stop-order/replace","position/set-auto-add-margin","position/switch-isolated","tpsl/switch-mode","position/add-margin","position/set-leverage","position/trading-stop"]}},openapi:{wallet:{get:["risk-limit/list"],post:["risk-limit"]}}},httpExceptions:{403:w},exceptions:{exact:{10001:x,10002:_,10003:p,10004:p,10005:y,10006:w,10007:p,10010:y,10017:x,20001:b,20003:g,20004:g,20005:g,20006:g,20007:g,20008:g,20009:g,20010:g,20011:g,20012:g,20013:g,20014:g,20015:g,20016:g,20017:g,20018:g,20019:g,20020:g,20021:g,20022:x,20023:x,20031:x,20070:x,20071:x,20084:x,30001:x,30003:g,30004:g,30005:g,30007:g,30008:g,30009:v,30010:k,30011:y,30012:y,30013:y,30014:g,30015:g,30016:v,30017:g,30018:g,30019:g,30020:g,30021:g,30022:g,30023:g,30024:g,30025:g,30026:g,30027:g,30028:g,30029:g,30030:g,30031:k,30032:g,30033:w,30034:b,30035:w,30036:v,30037:g,30041:v,30042:k,30043:y,30044:y,30045:y,30049:k,30050:v,30051:v,30052:v,30054:v,30057:v,30063:v,30067:k,30068:v,34026:v},broad:{"unknown orderInfo":b,"invalid api_key":p}},precisionMode:l,options:{marketTypes:{"BTC/USDT":"linear","BCH/USDT":"linear","ETH/USDT":"linear","LTC/USDT":"linear","XTZ/USDT":"linear","LINK/USDT":"linear"},defaultType:"linear",code:"BTC",cancelAllOrders:{},recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},fees:{trading:{tierBased:!1,percentage:!0,taker:75e-5,maker:-25e-5},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.v2PublicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"time_now"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.length>0&&void 0!==_[0]?_[0]:{},!this.options.adjustForTimeDifference){e.next=4;break}return e.next=4,this.loadTimeDifference();case 4:return e.next=6,this.v2PublicGetSymbols(t);case 6:for(r=e.sent,n=this.safeValue(r,"result",[]),a=this.safeValue(this.options,"fetchMarkets",{}),s=this.safeValue(a,"linear",{USDT:!0}),o=[],c=0;c<n.length;c++)u=n[c],d=this.safeString2(u,"name","symbol"),h=this.safeString(u,"base_currency"),l=this.safeString(u,"quote_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),m=!(v=p in s),y=f+"/"+p,f+p!==d&&(y=d),g=this.safeValue(u,"lot_size_filter",{}),b=this.safeValue(u,"price_filter",{}),k={amount:this.safeFloat(g,"qty_step"),price:this.safeFloat(b,"tick_size")},x=this.safeString(u,"status"),w=void 0,void 0!==x&&(w="Trading"===x),o.push({id:d,symbol:y,base:f,quote:p,active:w,precision:k,taker:this.safeFloat(u,"taker_fee"),maker:this.safeFloat(u,"maker_fee"),type:"future",spot:!1,future:!0,option:!1,linear:v,inverse:m,limits:{amount:{min:this.safeFloat(g,"min_trading_qty"),max:this.safeFloat(g,"max_trading_qty")},price:{min:this.safeFloat(b,"min_price"),max:this.safeFloat(b,"max_price")},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"last_price"),s=this.safeFloat(e,"prev_price_24h"),o=this.safeFloat(e,"price_24h_pcnt");void 0!==o&&(o*=100);var c=void 0,u=void 0;void 0!==a&&void 0!==s&&(c=a-s,u=this.sum(s,a)/2);var d=this.safeFloat(e,"turnover_24h"),h=this.safeFloat(e,"volume_24h"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_price_24h"),low:this.safeFloat(e,"low_price_24h"),bid:this.safeFloat(e,"bid_price"),bidVolume:void 0,ask:this.safeFloat(e,"ask_price"),askVolume:void 0,vwap:l,open:s,close:a,last:a,previousClose:void 0,change:c,percentage:o,average:u,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.v2PublicGetTickers(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",[]),c=this.safeValue(o,0),u=this.safeTimestamp(s,"time_now"),(d=this.parseTicker(c,n)).timestamp=u,d.datetime=this.iso8601(u),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.v2PublicGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"result",[]),s={},o=0;o<a.length;o++)c=this.parseTicker(a[o]),u=c.symbol,s[u]=c;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp2(e,"open_time","start_at"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat2(e,"turnover","volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:"1m",n=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:void 0,s=y.length>4&&void 0!==y[4]?y[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},u=this.parseTimeframe(r),d=this.seconds(),void 0!==n){e.next=18;break}if(void 0!==a){e.next=15;break}throw new m(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 15:c.from=d-a*u;case 16:e.next=19;break;case 18:c.from=parseInt(n/1e3);case 19:return void 0!==a&&(c.limit=a),h=this.safeValue(this.options,"marketTypes",{}),l=this.safeString(h,t),f="linear"===l?"publicLinearGetKline":"v2PublicGetKlineList",e.next=25,this[f](this.extend(c,s));case 25:return p=e.sent,v=this.safeValue(p,"result",{}),e.abrupt("return",this.parseOHLCVs(v,o,r,n,a));case 28:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","exec_id"),i=this.safeString(e,"symbol"),n=(t=this.safeMarket(i,t)).symbol,a=this.safeFloat2(e,"qty","exec_qty"),s=this.safeFloat(e,"exec_value"),o=this.safeFloat2(e,"exec_price","price");void 0===s&&void 0!==a&&void 0!==o&&(s=a*o);var c=this.parse8601(this.safeString(e,"time"));void 0===c&&(c=this.safeInteger(e,"trade_time_ms"));var u=this.safeStringLower(e,"side"),d=this.safeString(e,"last_liquidity_ind"),h="AddedLiquidity"===d?"maker":"taker",l=this.safeFloat(e,"exec_fee"),f=void 0;if(void 0!==l){var p=t.inverse?t.base:t.quote;f={cost:l,currency:p,rate:this.safeFloat(e,"fee_rate")}}return{id:r,info:e,timestamp:c,datetime:this.iso8601(c),symbol:n,order:this.safeString(e,"order_id"),type:this.safeStringLower(e,"order_type"),side:u,takerOrMaker:h,price:o,amount:a,cost:s,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.count=n),c=this.safeValue(this.options,"marketTypes",{}),u=this.safeString(c,t),d="linear"===u?"publicLinearGetRecentTradingRecords":"v2PublicGetTradingRecords",e.next=13,this[d](this.extend(o,a));case 13:return h=e.sent,l=this.safeValue(h,"result",{}),e.abrupt("return",this.parseTrades(l,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"price",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"size",n=[],a=[],s=0;s<e.length;s++){var o=e[s],c=this.safeString(o,"side");if("Buy"===c)n.push(this.parseBidAsk(o,r,i));else{if("Sell"!==c)throw new v(this.id+" parseOrderBook encountered an unrecognized bidask format: "+this.json(o));a.push(this.parseBidAsk(o,r,i))}}return{bids:this.sortBy(n,0,!0),asks:this.sortBy(a,0),timestamp:t,datetime:this.iso8601(t),nonce:void 0}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id},e.next=8,this.v2PublicGetOrderBookL2(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"result",[]),c=this.safeTimestamp(s,"time_now"),e.abrupt("return",this.parseOrderBook(o,c,"Buy","Sell","price","size"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r={},n=this.safeString(t,"coin"),a=this.safeString(t,"code"),void 0!==n?r.coin=n:void 0!==a&&(s=this.currency(a),r.coin=s.id),e.next=9,this.v2PrivateGetWalletBalance(this.extend(r,t));case 9:for(o=e.sent,c={info:o},u=this.safeValue(o,"result",{}),d=Object.keys(u),h=0;h<d.length;h++)l=d[h],f=u[l],p=this.safeCurrencyCode(l),(v=this.account()).free=this.safeFloat(f,"available_balance"),v.used=this.safeFloat(f,"used_margin"),v.total=this.safeFloat(f,"equity"),c[p]=v;return e.abrupt("return",this.parseBalance(c));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Created:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Cancelled:"canceled",PendingCancel:"canceling",Active:"open",Untriggered:"open",Triggered:"closed",Deactivated:"canceled"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({GoodTillCancel:"GTC",ImmediateOrCancel:"IOC",FillOrKill:"FOK",PostOnly:"PO"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol");t=this.safeMarket(r,t);var i=void 0,n=void 0,a=this.parse8601(this.safeString(e,"created_at")),s=this.safeString2(e,"order_id","stop_order_id"),o=this.safeStringLower(e,"order_type"),c=this.safeFloat(e,"price");0===c&&(c=void 0);var u=this.safeFloat(e,"average_price"),d=this.safeFloat(e,"qty"),h=this.safeFloat(e,"cum_exec_value"),l=this.safeFloat(e,"cum_exec_qty"),f=this.safeFloat(e,"leaves_qty");void 0!==t&&(i=t.symbol,n=t.base);var p=this.safeTimestamp(e,"last_exec_time");0===p&&(p=void 0),void 0===l&&void 0!==d&&void 0!==f&&(l=d-f),void 0!==l&&(void 0===f&&void 0!==d&&(f=d-l),void 0===h&&void 0!==c&&(h=c*l),"market"===o&&void 0!==h&&h>0&&(c=void 0,void 0===u&&(u=l/h)));var v=this.parseOrderStatus(this.safeString2(e,"order_status","stop_order_status")),m=this.safeStringLower(e,"side"),y=this.safeFloat(e,"cum_exec_fee"),g=void 0;void 0!==y&&(g={cost:y=Math.abs(y),currency:n});var b=this.safeString(e,"order_link_id");void 0!==b&&b.length<1&&(b=void 0);var k=this.parseTimeInForce(this.safeString(e,"time_in_force")),x=this.safeFloat(e,"stop_px"),w="PO"===k;return{info:e,id:s,clientOrderId:b,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:p,symbol:i,type:o,timeInForce:k,postOnly:w,side:m,price:c,stopPrice:x,amount:d,cost:h,average:u,filled:l,remaining:f,status:v,fee:g,trades:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={symbol:a.id},o=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(o,r),u="linear"===c?"privateLinearGetOrderSearch":"v2PrivateGetOrder",void 0===this.safeString(n,"stop_order_id")?void 0===this.safeString(n,"order_link_id")&&(s.order_id=t):u="linear"===c?"privateLinearGetStopOrderSearch":"v2PrivateGetStopOrder",e.next=15,this[u](this.extend(s,n));case 15:return d=e.sent,h=this.safeValue(d,"result"),e.abrupt("return",this.parseOrder(h,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,y,g,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x.length>4&&void 0!==x[4]?x[4]:void 0,o=x.length>5&&void 0!==x[5]?x[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=this.amountToPrecision(t,a),u=c.inverse?parseInt(u):parseFloat(u),d={side:this.capitalize(n),symbol:c.id,order_type:this.capitalize(r),qty:u,time_in_force:"GoodTillCancel"},h=!1,"limit"===r&&(h=!0),!h){e.next=16;break}if(void 0===s){e.next=15;break}d.price=parseFloat(this.priceToPrecision(t,s)),e.next=16;break;case 15:throw new m(this.id+" createOrder() requires a price argument for a "+r+" order");case 16:if(void 0!==(l=this.safeString2(o,"order_link_id","clientOrderId"))&&(d.order_link_id=l,o=this.omit(o,["order_link_id","clientOrderId"])),f=this.safeValue2(o,"stop_px","stopPrice"),p=this.safeValue(o,"base_price"),v=this.safeValue(this.options,"marketTypes",{}),y=this.safeString(v,t),g="linear"===y?"privateLinearPostOrderCreate":"v2PrivatePostOrderCreate","linear"===y&&(g="privateLinearPostOrderCreate",d.reduce_only=!1,d.close_on_trigger=!1),void 0===f){e.next=35;break}if(void 0!==p){e.next=29;break}throw new m(this.id+" createOrder() requires both the stop_px and base_price params for a conditional "+r+" order");case 29:g="linear"===y?"privateLinearPostStopOrderCreate":"v2PrivatePostStopOrderCreate",d.stop_px=parseFloat(this.priceToPrecision(t,f)),d.base_price=parseFloat(this.priceToPrecision(t,p)),o=this.omit(o,["stop_px","stopPrice","base_price"]);case 33:e.next=37;break;case 35:if(void 0===p){e.next=37;break}throw new m(this.id+" createOrder() requires both the stop_px and base_price params for a conditional "+r+" order");case 37:return e.next=39,this[g](this.extend(d,o));case 39:return b=e.sent,k=this.safeValue(b,"result"),e.abrupt("return",this.parseOrder(k,c));case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:void 0,c=b.length>6&&void 0!==b[6]?b[6]:{},void 0!==r){e.next=5;break}throw new m(this.id+" editOrder() requires an symbol argument");case 5:return u=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(u,r),e.next=9,this.loadMarkets();case 9:return h=this.market(r),l={symbol:h.id},f="linear"===d?"privateLinearPostOrderReplace":"v2PrivatePostOrderReplace",void 0!==(p=this.safeString(c,"stop_order_id"))?(f="linear"===d?"privateLinearPostStopOrderReplace":"v2PrivatePostStopOrderReplace",l.stop_order_id=p,c=this.omit(c,["stop_order_id"])):l.order_id=t,void 0!==s&&(v=this.amountToPrecision(r,s),v=h.inverse?parseInt(v):parseFloat(v),l.p_r_qty=v),void 0!==o&&(l.p_r_price=parseFloat(this.priceToPrecision(r,o))),e.next=18,this[f](this.extend(l,c));case 18:return y=e.sent,g=this.safeValue(y,"result",{}),e.abrupt("return",{info:y,id:this.safeString2(g,"order_id","stop_order_id"),order_id:this.safeString(g,"order_id"),stop_order_id:this.safeString(g,"stop_order_id")});case 21:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={symbol:a.id},o=this.safeValue(this.options,"marketTypes",{}),c=this.safeValue(o,r),u="linear"===c?"privateLinearPostOrderCancel":"v2PrivatePostOrderCancel",void 0===this.safeString(n,"stop_order_id")?void 0===this.safeString(n,"order_link_id")&&(s.order_id=t):u="linear"===c?"privateLinearPostStopOrderCancel":"v2PrivatePostStopOrderCancel",e.next=15,this[u](this.extend(s,n));case 15:return d=e.sent,h=this.safeValue(d,"result",{}),e.abrupt("return",this.parseOrder(h,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},void 0!==t){e.next=4;break}throw new m(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={symbol:n.id},s=this.safeValue(this.options,"cancelAllOrders",{}),o=this.safeValue(this.options,"marketTypes",{}),c=this.safeString(o,t),u="linear"===c?"privateLinearPostOrderCancelAll":"v2PrivatePostOrderCancelAll",d=this.safeString(s,"method",u),e.next=15,this[d](this.extend(a,r));case 15:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),c=this.safeValue(this.options,"fetchOrders",{}),u=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(u,t),h="linear"===d?"privateLinearGetOrderList":"v2PrivateGetOrderList",l=a,("stop_order_id"in a||"stop_order_status"in a)&&(void 0!==(f=this.safeValue(a,"stopOrderStatus"))&&(Array.isArray(f)&&(f=f.join(",")),s.stop_order_status=f,l=this.omit(a,"stop_order_status")),h="linear"===d?"privateLinearGetStopOrderList":"v2PrivateGetStopOrderList"),p=this.safeString(c,"method",h),e.next=19,this[p](this.extend(s,l));case 19:return v=e.sent,m=this.safeValue(v,"result",{}),y=this.safeValue(m,"data",[]),e.abrupt("return",this.parseOrders(y,o,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=["Rejected","Filled","Cancelled"],o=this.safeValue(this.options,"fetchClosedOrders",{}),c=this.safeValue(o,"order_status",s),Array.isArray(c)&&(c=c.join(",")),u={},void 0===(d=this.safeValue(a,"stop_order_status"))?u.order_status=c:u.stop_order_status=d,e.next=13,this.fetchOrders(t,r,n,this.extend(u,a));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=["Created","New","PartiallyFilled","PendingCancel"],o=this.safeValue(this.options,"fetchOpenOrders",{}),c=this.safeValue(o,"order_status",s),Array.isArray(c)&&(c=c.join(",")),u={},void 0===(d=this.safeValue(a,"stop_order_status"))?u.order_status=c:u.stop_order_status=d,e.next=13,this.fetchOrders(t,r,n,this.extend(u,a));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:void 0,s=c.length>4&&void 0!==c[4]?c[4]:{},o={order_id:t},e.next=7,this.fetchMyTrades(r,n,a,this.extend(o,s));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t){e.next=18;break}if(void 0!==(c=this.safeString(a,"order_id"))){e.next=14;break}throw new m(this.id+" fetchMyTrades() requires a symbol argument or an order_id param");case 14:s.order_id=c,a=this.omit(a,"order_id");case 16:e.next=20;break;case 18:o=this.market(t),s.symbol=o.id;case 20:return void 0!==r&&(s.start_time=r),void 0!==n&&(s.limit=n),u=this.safeValue(this.options,"marketTypes",{}),d=this.safeString(u,t),h="linear"===d?"privateLinearGetTradeExecutionList":"v2PrivateGetExecutionList",e.next=27,this[h](this.extend(s,a));case 27:return l=e.sent,f=this.safeValue(l,"result",{}),p=this.safeValue2(f,"trade_list","data",[]),e.abrupt("return",this.parseTrades(p,o,r,n));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={wallet_fund_type:"Deposit"},o=void 0,void 0!==t&&(o=this.currency(t),s.coin=o.id),void 0!==r&&(s.start_date=this.ymd(r)),void 0!==n&&(s.limit=n),e.next=13,this.v2PrivateGetWalletFundRecords(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.coin=o.id),void 0!==r&&(s.start_date=this.ymd(r)),void 0!==n&&(s.limit=n),e.next=13,this.v2PrivateGetWalletWithdrawList(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,o,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({ToBeConfirmed:"pending",UnderReview:"pending",Pending:"pending",Success:"ok",CancelByUser:"canceled",Reject:"rejected",Expire:"expired"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"coin"),i=this.safeCurrencyCode(r,t),n=this.parse8601(this.safeString2(e,"submited_at","exec_time")),a=this.parse8601(this.safeString(e,"updated_at")),s=this.parseTransactionStatus(this.safeString(e,"status")),o=this.safeString(e,"address"),c=this.safeFloat(e,"fee"),u=void 0;return void 0!==c&&(u={cost:c,currency:i}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"tx_id"),timestamp:n,datetime:this.iso8601(n),address:o,addressTo:void 0,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:"withdrawal",amount:this.safeFloat(e,"amount"),currency:i,status:s,updated:a,fee:u}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.coin=o.id),void 0!==r&&(s.start_date=this.ymd(r)),void 0!==n&&(s.limit=n),e.next=13,this.v2PrivateGetWalletFundRecords(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseLedger(d,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"coin"),i=this.safeCurrencyCode(r,t),n=this.safeFloat(e,"amount"),a=this.safeFloat(e,"wallet_balance"),s=n<0?"out":"in",o=void 0;if(void 0!==a&&void 0!==n){var c="out"===s?n:-n;o=this.sum(a,c)}var u=this.parse8601(this.safeString(e,"exec_time")),d=this.parseLedgerEntryType(this.safeString(e,"type")),h=this.safeString(e,"id"),l=this.safeString(e,"tx_id");return{id:h,currency:i,account:this.safeString(e,"wallet_id"),referenceAccount:void 0,referenceId:l,status:void 0,amount:n,before:o,after:a,fee:void 0,direction:s,timestamp:u,datetime:this.iso8601(u),type:d,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Deposit:"transaction",Withdraw:"transaction",RealisedPNL:"trade",Commission:"fee",Refund:"cashback",Prize:"prize",ExchangeOrderWithdraw:"transaction",ExchangeOrderDeposit:"transaction"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api,{hostname:this.hostname}),o=this.safeString(t,0),c=this.safeString(t,1),u="/"+o+"/"+c+"/"+e;if("public"===c)Object.keys(i).length&&(u+="?"+this.rawencode(i));else if("public"===o)Object.keys(i).length&&(u+="?"+this.rawencode(i));else{this.checkRequiredCredentials();var d=this.nonce(),h=this.extend(i,{api_key:this.apiKey,recv_window:this.options.recvWindow,timestamp:d}),l=this.rawencode(this.keysort(h)),f=this.hmac(this.encode(l),this.encode(this.secret));"POST"===r?(a=this.json(this.extend(h,{sign:f})),n={"Content-Type":"application/json"}):u+="?"+l+"&sign="+f}return{url:s+=u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(s){var u=this.safeValue(s,"ret_code");if(0!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d),new v(d)}}}},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:if(n={},!Array.isArray(t)){e.next=10;break}if(1===t.length){e.next=9;break}throw new m(this.id+" fetchPositions takes exactly one symbol");case 9:n.symbol=this.marketId(t[0]);case 10:if(a=this.safeString(this.options,"defaultType","linear"),s=this.safeString(r,"type",a),r=this.omit(r,"type"),o=void 0,"linear"!==s){e.next=20;break}return e.next=17,this.privateLinearGetPositionList(this.extend(n,r));case 17:o=e.sent,e.next=30;break;case 20:if("inverse"!==s){e.next=26;break}return e.next=23,this.v2PrivateGetPositionList(this.extend(n,r));case 23:o=e.sent,e.next=30;break;case 26:if("inverseFuture"!==s){e.next=30;break}return e.next=29,this.futuresPrivateGetPositionList(this.extend(n,r));case 29:o=e.sent;case 30:return e.abrupt("return",this.safeValue(o,"result"));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.AuthenticationError,y=l.DDoSProtection,g=l.BadResponse,b=r(13),k=b.TRUNCATE,x=b.NO_PADDING,w=b.DECIMAL_PLACES;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"bytetrade",name:"ByteTrade",countries:["HK"],rateLimit:500,requiresWeb3:!0,certified:!0,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","5d":"5d","1w":"1w","1M":"1M"},urls:{test:{market:"https://api-v2-test.byte-trade.com",public:"https://api-v2-test.byte-trade.com"},logo:"https://user-images.githubusercontent.com/1294454/67288762-2f04a600-f4e6-11e9-9fd6-c60641919491.jpg",api:{market:"https://api-v2.byte-trade.com",public:"https://api-v2.byte-trade.com"},www:"https://www.byte-trade.com",doc:"https://docs.byte-trade.com/#description"},api:{market:{get:["klines","depth","trades","tickers"]},public:{get:["symbols","currencies","balance","orders/open","orders/closed","orders/all","orders","orders/trades","depositaddress","withdrawals","deposits","transfers"],post:["transaction/createorder","transaction/cancelorder","transaction/withdraw","transaction/transfer"]}},fees:{trading:{taker:8e-4,maker:8e-4}},commonCurrencies:{1:"ByteTrade",44:"ByteHub",48:"Blocktonic",133:"TerraCredit"},exceptions:{"vertify error":m,"verify error":m,"transaction already in network":v,"invalid argument":v}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"code"),c=void 0,c=o in this.commonCurrencies?this.commonCurrencies[o]:this.safeString(s,"name"),u=this.safeString(s,"fullname"),d=this.safeValue(s,"active"),h=this.safeValue(s,"limits"),l=this.safeValue(h,"deposit"),f=this.safeInteger(s,"basePrecision"),-1===(p=this.safeFloat(l,"max"))&&(p=void 0),v=this.safeValue(h,"withdraw"),-1===(m=this.safeFloat(v,"max"))&&(m=void 0),n[c]={id:o,code:c,name:u,active:d,precision:f,fee:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(l,"min"),max:p},withdraw:{min:this.safeFloat(v,"min"),max:m}},info:s};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeString(s,"baseName"),u=this.safeString(s,"quoteName"),d=this.safeString(s,"base"),h=this.safeString(s,"quote"),l=c.split("@"+d)[0],f=u.split("@"+h)[0],"126"===h&&(f="ZAR"),p=l+"/"+f,d in this.commonCurrencies&&(c=this.commonCurrencies[d]),h in this.commonCurrencies&&(u=this.commonCurrencies[h]),v=c+"/"+u,m=this.safeValue(s,"limits",{}),y=this.safeValue(m,"amount",{}),g=this.safeValue(m,"price",{}),b=this.safeValue(s,"precision",{}),k=this.safeString(s,"active"),x={id:o,symbol:v,base:c,quote:u,baseId:d,quoteId:h,info:s,active:k,precision:{amount:this.safeInteger(b,"amount"),price:this.safeInteger(b,"price")},normalSymbol:p,limits:{amount:{min:this.safeFloat(y,"min"),max:this.safeFloat(y,"max")},price:{min:this.safeFloat(g,"min"),max:this.safeFloat(g,"max")},cost:{min:void 0,max:void 0}}},n.push(x);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("userid"in(t=h.length>0&&void 0!==h[0]?h[0]:{})||void 0!==this.apiKey){e.next=3;break}throw new p(this.id+" fetchDeposits() requires this.apiKey or userid argument");case 3:return e.next=5,this.loadMarkets();case 5:return r={userid:this.apiKey},e.next=8,this.publicGetBalance(this.extend(r,t));case 8:for(n=e.sent,a={info:n},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"code"),u=this.safeCurrencyCode(c,void 0),(d=this.account()).free=this.safeFloat(o,"free"),d.used=this.safeFloat(o,"used"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.marketGetDepth(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"timestamp"),u=this.parseOrderBook(o,c),e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0,n=this.safeString(e,"symbol");if(n in this.markets_by_id)t=this.markets_by_id[n];else{var a=this.safeString(e,"base"),s=this.safeString(e,"quote");if(void 0!==a&&void 0!==s){var o=this.safeCurrencyCode(a),c=this.safeCurrencyCode(s);i=o+"/"+c}}return void 0===i&&void 0!==t&&(i=t.symbol),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:this.safeFloat(e,"weightedAvgPrice"),open:this.safeFloat(e,"open"),close:this.safeFloat(e,"close"),last:this.safeFloat(e,"last"),previousClose:void 0,change:this.safeFloat(e,"change"),percentage:this.safeFloat(e,"percentage"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.marketGetTickers(this.extend(a,r));case 7:if(s=e.sent,!Array.isArray(s)){e.next=13;break}if(void 0!==(o=this.safeValue(s,0))){e.next=12;break}throw new g(this.id+" fetchTicker() returned an empty response");case 12:return e.abrupt("return",this.parseTicker(o,n));case 13:return e.abrupt("return",this.parseTicker(s,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetDepth(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.marketGetTickers(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,timeframe:this.timeframes[r]},void 0!==n&&(c.since=n),void 0!==a&&(c.limit=a),e.next=12,this.marketGetKlines(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=this.safeFloat(e,"cost"),s=this.safeString(e,"id"),o=this.safeString(e,"type"),c=this.safeString(e,"takerOrMaker"),u=this.safeString(e,"side"),d=this.iso8601(r),h=this.safeString(e,"order"),l=this.safeValue(e,"fee"),f=void 0;if(void 0===t){var p=this.safeString(e,"symbol");t=this.safeValue(this.markets_by_id,p)}return void 0!==t&&(f=t.symbol),{info:e,timestamp:r,datetime:d,symbol:f,id:s,order:h,type:o,takerOrMaker:c,side:u,price:i,amount:n,cost:a,fee:l}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=11,this.marketGetTrades(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"status"),i=void 0,n=this.safeString(e,"symbol");if(n in this.markets_by_id)t=this.markets_by_id[n];else{var a=this.safeString(e,"base"),s=this.safeString(e,"quote");if(void 0!==a&&void 0!==s){var o=this.safeCurrencyCode(a),c=this.safeCurrencyCode(s);i=o+"/"+c}}void 0===i&&void 0!==t&&(i=t.symbol);var u=this.safeInteger(e,"timestamp"),d=this.safeString(e,"datetime"),h=this.safeInteger(e,"lastTradeTimestamp"),l=this.safeFloat(e,"price"),f=this.safeFloat(e,"amount"),p=this.safeFloat(e,"filled"),v=this.safeFloat(e,"remaining"),m=this.safeFloat(e,"cost"),y=this.safeFloat(e,"average"),g=this.safeString(e,"id"),b=this.safeString(e,"type"),k=this.safeString(e,"side"),x=this.safeValue(e,"fee");return{info:e,id:g,clientOrderId:void 0,timestamp:u,datetime:d,lastTradeTimestamp:h,symbol:i,type:b,timeInForce:void 0,postOnly:void 0,side:k,price:l,stopPrice:void 0,amount:f,cost:m,average:y,filled:p,remaining:v,status:r,fee:x,trades:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L,D,q,N,G,j,U,H,z,W,K,X,Y,Z,Q,$,J=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=J.length>4&&void 0!==J[4]?J[4]:void 0,o=J.length>5&&void 0!==J[5]?J[5]:{},this.checkRequiredDependencies(),void 0!==this.apiKey){e.next=5;break}throw new p("createOrder() requires this.apiKey or userid in params");case 5:return e.next=7,this.loadMarkets();case 7:return c=this.market(t),u=void 0,d=void 0,u="sell"===n?1:2,"limit"===r?d=1:(d=2,s=0),h=c.normalSymbol,l=c.baseId,f=this.currency(c.base),v=this.amountToPrecision(t,a),m=this.toWei(v,f.precision),y=c.quoteId,g=this.currency(c.quote),b=this.priceToPrecision(t,s),k=this.toWei(b,g.precision),x=this.milliseconds(),w=this.milliseconds(),_=(_=this.iso8601(x)).split(".")[0],O=(O=this.iso8601(w)).split(".")[0],T="Sagittarius",S=this.safeString(o,"dappId",T),C=this.safeString(this.options,"fee","300000000000000"),I=this.safeString(o,"totalFeeRate",8),M=this.safeString(o,"chainFeeRate",1),E=this.safeString(o,"fee",C),A=this.integerPow("2","64"),F=[this.numberToBE(1,32),this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(E,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(u,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(m,A),8),this.numberToLE(this.integerModulo(m,A),8),this.numberToLE(this.integerDivide(k,A),8),this.numberToLE(this.integerModulo(k,A),8),this.numberToLE(0,2),this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(M),2),this.numberToLE(1,1),this.numberToLE(parseInt(I),2),this.numberToLE(parseInt(y),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(S.length,1),this.stringToBinary(this.encode(S)),this.numberToLE(0,1)],P=[this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(32,1),this.numberToLE(0,8),this.numberToLE(E,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(u,1),this.numberToLE(d,1),this.numberToLE(h.length,1),this.stringToBinary(this.encode(h)),this.numberToLE(this.integerDivide(m,A),8),this.numberToLE(this.integerModulo(m,A),8),this.numberToLE(this.integerDivide(k,A),8),this.numberToLE(this.integerModulo(k,A),8),this.numberToLE(0,2),this.numberToLE(Math.floor(x/1e3),4),this.numberToLE(Math.floor(w/1e3),4),this.numberToLE(1,1),this.numberToLE(parseInt(M),2),this.numberToLE(1,1),this.numberToLE(parseInt(I),2),this.numberToLE(parseInt(y),4),this.numberToLE(parseInt(l),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(S.length,1),this.stringToBinary(this.encode(S)),this.numberToLE(0,1)],B=this.binaryConcatArray(P),R=this.hash(B,"sha256","hex"),V=R.slice(0,40),L=[this.numberToLE(V.length,1),this.stringToBinary(this.encode(V)),this.numberToBE(0,4)],D=this.binaryConcatArray(L),q=this.hash(D,"sha256","hex"),N=q.slice(0,40),G=this.binaryConcatArray(F),j=this.hash(G,"sha256","hex"),U=this.ecdsa(j,this.secret,"secp256k1",void 0,!0),H=this.binaryToBase16(this.numberToLE(this.sum(U.v,31),1)),z=H+U.r+U.s,W={now:_,expiration:O,fee:E,creator:this.apiKey,side:u,order_type:d,market_name:h,amount:m,price:k,use_btt_as_fee:!1,money_id:parseInt(y),stock_id:parseInt(l),custom_no_btt_fee_rate:parseInt(I),custom_btt_fee_rate:parseInt(M)},K={timestamp:_,expiration:O,operations:[[32,W]],validate_type:0,dapp:S,signatures:[z]},X={trObj:this.json(K)},e.next=53,this.publicPostTransactionCreateorder(X);case 53:return Y=e.sent,Z=this.milliseconds(),Q=this.safe_string(Y,"code"),$="0"===Q?"open":"failed",e.abrupt("return",{info:Y,id:N,timestamp:Z,datetime:this.iso8601(Z),lastTradeTimestamp:void 0,status:$,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 58:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,"userid"in(n=c.length>2&&void 0!==c[2]?c[2]:{})||void 0!==this.apiKey){e.next=4;break}throw new p("fetchOrder() requires this.apiKey or userid argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={userid:this.apiKey},s=void 0,void 0!==r&&(s=this.markets[r],a.symbol=s.id),a.id=t,e.next=12,this.publicGetOrders(this.extend(a,n));case 12:return o=e.sent,e.abrupt("return",this.parseOrder(o,s));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(a=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchOpenOrders() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s={userid:this.apiKey},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),e.next=14,this.publicGetOrdersOpen(this.extend(s,a));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(a=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchClosedOrders() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersClosed(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(a=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchOrders() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.market(t),o.symbol=s.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersAll(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M,E=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=E.length>1&&void 0!==E[1]?E[1]:void 0,n=E.length>2&&void 0!==E[2]?E[2]:{},void 0!==this.apiKey){e.next=4;break}throw new p("cancelOrder() requires hasAlreadyAuthenticatedSuccessfully");case 4:if(void 0!==r){e.next=6;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return a=this.market(r),s=a.baseId,o=a.quoteId,c=a.normalSymbol,u="300000000000000",d=this.milliseconds(),h=0,l=(l=this.iso8601(d)).split(".")[0],f=(f=this.iso8601(h)).split(".")[0],v="Sagittarius",m=this.safeString(n,"dappId",v),y=[this.numberToBE(1,32),this.numberToLE(Math.floor(d/1e3),4),this.numberToLE(1,1),this.numberToLE(h,4),this.numberToLE(1,1),this.numberToLE(33,1),this.numberToLE(0,8),this.numberToLE(u,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(c.length,1),this.stringToBinary(this.encode(c)),this.base16ToBinary(t),this.numberToLE(parseInt(o),4),this.numberToLE(parseInt(s),4),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(m.length,1),this.stringToBinary(this.encode(m)),this.numberToLE(0,1)],g=this.binaryConcatArray(y),b=this.hash(g,"sha256","hex"),k=this.ecdsa(b,this.secret,"secp256k1",void 0,!0),x=this.binaryToBase16(this.numberToLE(this.sum(k.v,31),1)),w=x+k.r+k.s,_={fee:u,creator:this.apiKey,order_id:t,market_name:c,money_id:parseInt(o),stock_id:parseInt(s)},O={timestamp:l,expiration:f,operations:[[33,_]],validate_type:0,dapp:m,signatures:[w]},T={trObj:this.json(O)},e.next=32,this.publicPostTransactionCancelorder(T);case 32:return S=e.sent,C=this.milliseconds(),I=this.safe_string(S,"code"),M="0"===I?"canceled":"failed",e.abrupt("return",{info:S,id:void 0,timestamp:C,datetime:this.iso8601(C),lastTradeTimestamp:void 0,status:M,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,clientOrderId:void 0,average:void 0});case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transfer",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v,m,y,g,b,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=L.length>4&&void 0!==L[4]?L[4]:{},this.checkRequiredDependencies(),void 0!==this.apiKey){e.next=4;break}throw new p("transfer() requires this.apiKey");case 4:return e.next=6,this.loadMarkets();case 6:return o=this.currency(t),c=this.decimalToPrecision(r,k,o.info.basePrecision-o.info.transferPrecision,w,x),u=this.toWei(c,o.precision),d=parseInt(o.id),h=this.milliseconds(),l=h,f=(f=this.iso8601(h)).split(".")[0],v=(v=this.iso8601(l)).split(".")[0],m="300000000000000",y="Sagittarius",g=this.safeString(s,"message",""),b=this.safeString(s,"dappId",y),_=this.integerPow("2","64"),O=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(28,1),this.numberToLE(0,8),this.numberToLE(m,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(a.length,1),this.stringToBinary(this.encode(a)),this.numberToLE(d,4),this.numberToLE(this.integerDivide(u,_),8),this.numberToLE(this.integerModulo(u,_),8),this.numberToLE(1,1),this.numberToLE(g.length,1),this.stringToBinary(this.encode(g)),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(b.length,1),this.stringToBinary(this.encode(b)),this.numberToLE(0,1)],T=this.binaryConcatArray(O),S=this.hash(T,"sha256","hex"),C=this.ecdsa(S,this.secret,"secp256k1",void 0,!0),I=this.binaryToBase16(this.numberToLE(this.sum(C.v,31),1)),M=I+C.r+C.s,E={fee:"300000000000000",from:this.apiKey,to:a,asset_type:parseInt(o.id),amount:u.toString(),message:g},A={timestamp:f,expiration:v,operations:[[28,E]],validate_type:0,dapp:b,signatures:[M]},F={trObj:this.json(A)},e.next=32,this.publicPostTransactionTransfer(F);case 32:return P=e.sent,B=this.milliseconds(),R=this.safe_string(P,"code"),V="",V="0"===R?"submit success":"submit fail",e.abrupt("return",{info:P,id:"",timestamp:B,datetime:this.iso8601(B),lastTradeTimestamp:void 0,status:V,symbol:void 0,type:void 0,side:void 0,price:void 0,amount:void 0,filled:void 0,remaining:void 0,cost:void 0,fee:void 0,clientOrderId:void 0,average:void 0,trades:void 0});case 38:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,"userid"in(a=u.length>3&&void 0!==u[3]?u[3]:{})||void 0!==this.apiKey){e.next=6;break}throw new p("fetchMyTrades() requires this.apiKey or userid argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={userid:this.apiKey},void 0!==t&&(o.symbol=s.id),void 0!==n&&(o.limit=n),e.next=14,this.publicGetOrdersTrades(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if("userid"in a||void 0!==this.apiKey){e.next=8;break}throw new p("fetchDeposits() requires this.apiKey or userid argument");case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.currency(t),o.currency=s.id),void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=15,this.publicGetDeposits(this.extend(o,a));case 15:return c=e.sent,e.abrupt("return",this.parseTransactions(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if("userid"in a||void 0!==this.apiKey){e.next=8;break}throw new p("fetchWithdrawals() requires this.apiKey or userid argument");case 8:return s=void 0,o={userid:this.apiKey},void 0!==t&&(s=this.currency(t),o.currency=s.id),void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=15,this.publicGetWithdrawals(this.extend(o,a));case 15:return c=e.sent,e.abrupt("return",this.parseTransactions(c,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({DEPOSIT_FAILED:"failed",FEE_SEND_FAILED:"failed",FEE_FAILED:"failed",PAY_SEND_FAILED:"failed",PAY_FAILED:"failed",BTT_FAILED:"failed",WITHDDRAW_FAILED:"failed",USER_FAILED:"failed",FEE_EXECUED:"pending",PAY_EXECUED:"pending",WITHDDRAW_EXECUTED:"pending",USER_EXECUED:"pending",BTT_SUCCED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"tag");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeValue(e,"txid"),s=this.safeString(e,"code"),o=this.safeCurrencyCode(s,t),c=this.safeInteger(e,"timestamp"),u=this.safeString(e,"datetime"),d=this.safeString(e,"type"),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeFloat(e,"amount"),f=this.safeValue(e,"fee"),p=this.safeFloat(f,"cost"),v=this.safeString(f,"code"),m=this.safeCurrencyCode(v,t),y={cost:p,currency:m};return{info:e,id:r,txid:a,timestamp:c,datetime:u,address:i,tag:n,type:d,amount:l,currency:o,status:h,updated:void 0,fee:y}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:if("userid"in r||void 0!==this.apiKey){e.next=5;break}throw new p("fetchDepositAddress() requires this.apiKey or userid argument");case 5:return n=this.currency(t),a={userid:this.apiKey,code:n.id},e.next=9,this.publicGetDepositaddress(a);case 9:return s=e.sent,o=this.safeString(s[0],"address"),c=this.safeString(s[0],"tag"),u=this.safeString(s[0],"chainType"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,chainType:u,info:s});case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l,f,v,m,y,g,b,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L,D,q,N=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return N.length>3&&void 0!==N[3]?N[3]:void 0,a=N.length>4&&void 0!==N[4]?N[4]:{},this.checkRequiredDependencies(),this.checkAddress(n),e.next=6,this.loadMarkets();case 6:if(void 0!==this.apiKey){e.next=8;break}throw new p(this.id+" withdraw() requires this.apiKey");case 8:return e.next=10,this.fetchDepositAddress(t);case 10:return s=e.sent,o=this.safeString(s,"chainType"),c=this.safeString(s.info[0],"chainId"),u="",u="eos"===o?n:this.safeString(s,"address"),d=18,"ethereum"!==o&&"etc"!==o&&"eos"!==o&&"cmt"!==o&&"naka"!==o&&(d=26),h=this.milliseconds(),l=0,f=(f=this.iso8601(h)).split(".")[0],v=(v=this.iso8601(l)).split(".")[0],m="Sagittarius",y=this.safeString(a,"dappId",m),g="300000000000000",b=this.currency(t),_=b.id,O=this.decimalToPrecision(r,k,b.info.basePrecision-b.info.transferPrecision,w,x),T=this.toWei(O,b.info.externalPrecision),S=this.integerPow("2","64"),C=0,I=[],26===d?(C=b.info.fee,I=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(d,1),this.numberToLE(0,8),this.numberToLE(g,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(n.length,1),this.stringToBinary(this.encode(n)),this.numberToLE(parseInt(_),4),this.numberToLE(this.integerDivide(T,S),8),this.numberToLE(this.integerModulo(T,S),8),this.numberToLE(1,1),this.numberToLE(this.integerDivide(C,S),8),this.numberToLE(this.integerModulo(C,S),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(y.length,1),this.stringToBinary(this.encode(y)),this.numberToLE(0,1)]):I=[this.numberToBE(1,32),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(Math.floor(l/1e3),4),this.numberToLE(1,1),this.numberToLE(d,1),this.numberToLE(0,8),this.numberToLE(g,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(Math.floor(h/1e3),4),this.numberToLE(1,1),this.numberToLE(4,1),this.numberToLE(0,8),this.numberToLE(g,8),this.numberToLE(this.apiKey.length,1),this.stringToBinary(this.encode(this.apiKey)),this.numberToLE(u.length,1),this.stringToBinary(this.encode(u)),this.numberToLE(parseInt(_),4),this.numberToLE(this.integerDivide(T,S),8),this.numberToLE(this.integerModulo(T,S),8),this.numberToLE(0,1),this.numberToLE(1,1),this.numberToLE(y.length,1),this.stringToBinary(this.encode(y)),this.numberToLE(0,1)],M=this.binaryConcatArray(I),E=this.hash(M,"sha256","hex"),A=this.ecdsa(E,this.secret,"secp256k1",void 0,!0),F=this.binaryToBase16(this.numberToLE(this.sum(A.v,31),1)),P=F+A.r+A.s,B=void 0,R=void 0,V=void 0,L=this.safeString(b.info,"chainContractAddress"),26===d?(V={fee:g,from:this.apiKey,to_external_address:n,asset_type:parseInt(_),amount:T,asset_fee:C},B={timestamp:f,expiration:v,operations:[[d,V]],validate_type:0,dapp:y,signatures:[P]},R={chainType:c,trObj:this.json(B),chainContractAddress:L}):(V={fee:g,from:this.apiKey,to_external_address:u,asset_type:parseInt(_),amount:T,asset_fee:C},D={fee:g,proposaler:this.apiKey,expiration_time:f,proposed_ops:[{op:[4,V]}]},B={timestamp:f,expiration:v,operations:[[d,D]],validate_type:0,dapp:y,signatures:[P]},R="eos"===o?{chainType:c,toExternalAddress:"noneed",trObj:this.json(B),chainContractAddress:L}:{chainType:c,toExternalAddress:n,trObj:this.json(B),chainContractAddress:L}),e.next=46,this.publicPostTransactionWithdraw(R);case 46:return q=e.sent,e.abrupt("return",{info:q,id:this.safeString(q,"id")});case 48:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];return s+="/"+e,Object.keys(i).length&&(s+="?"+this.urlencode(i)),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(503===e)throw new y(this.id+" "+e.toString()+" "+t+" "+a);if(void 0!==s&&("code"in s&&"1"===this.safeString(s,"code"))){var u=this.safeString(s,"msg"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,d),new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(82);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"cdax",name:"CDAX",countries:["RU"],hostname:"cdax.io",pro:!1,urls:{logo:"https://user-images.githubusercontent.com/1294454/102157692-fd406280-3e90-11eb-8d46-4511b617cd17.jpg",api:{market:"https://{hostname}/api",public:"https://{hostname}/api",private:"https://{hostname}/api",v2Public:"https://{hostname}/api",v2Private:"https://{hostname}/api"},www:"https://cdax.io",referral:"https://cdax.io/invite?invite_code=esc74",doc:"https://github.com/cloudapidoc/API_Docs",fees:"https://cdax.io/about/fee"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.NullResponse,y=l.InvalidOrder,g=l.NotSupported,b=l.InsufficientFunds,k=l.InvalidNonce,x=l.OrderNotFound,w=l.RateLimitExceeded,_=l.DDoSProtection;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"cex",name:"CEX.IO",countries:["GB","EU","CY","RU"],rateLimit:1500,has:{cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"1m"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766442-8ddc33b0-5ed8-11e7-8b98-f786aef0f3c9.jpg",api:"https://cex.io/api",www:"https://cex.io",doc:"https://cex.io/cex-api",fees:["https://cex.io/fee-schedule","https://cex.io/limits-commissions"],referral:"https://cex.io/r/0/up105393824/0/"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency_profile","currency_limits/","last_price/{pair}/","last_prices/{currencies}/","ohlcv/hd/{yyyymmdd}/{pair}","order_book/{pair}/","ticker/{pair}/","tickers/{currencies}/","trade_history/{pair}/"],post:["convert/{pair}","price_stats/{pair}"]},private:{post:["active_orders_status/","archived_orders/{pair}/","balance/","cancel_order/","cancel_orders/{pair}/","cancel_replace_order/{pair}/","close_position/{pair}/","get_address/","get_myfee/","get_order/","get_order_tx/","open_orders/{pair}/","open_orders/","open_position/{pair}/","open_positions/{pair}/","place_order/{pair}/"]}},fees:{trading:{maker:.0016,taker:.0025},funding:{withdraw:{BTC:.001,ETH:.01,BCH:.001,DASH:.01,BTG:.001,ZEC:.001,XRP:.02},deposit:{BTC:0,ETH:0,BCH:0,DASH:0,BTG:0,ZEC:0,XRP:0,XLM:0}}},exceptions:{exact:{},broad:{"Insufficient funds":b,"Nonce must be incremented":k,"Invalid Order":y,"Order not found":x,"limit exceeded":w,"Invalid API key":v,"There was an error while placing your order":y,"Sorry, too many clients already":_}},options:{fetchOHLCVWarning:!0,createMarketBuyOrderRequiresPrice:!0,order:{status:{c:"canceled",d:"closed",cd:"canceled",a:"open"}}}})}},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=10;break}return e.next=8,this.publicGetCurrencyProfile(t);case 8:o=e.sent,this.options.fetchCurrencies=this.extend(r,{response:o,timestamp:s});case 10:return e.abrupt("return",this.safeValue(this.options.fetchCurrencies,"response"));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,this.options.currencies={timestamp:this.milliseconds(),response:r},n=this.safeValue(r,"data",[]),a=this.safeValue(n,"symbols",[]),s={},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"code"),d=this.safeCurrencyCode(u),h=this.safeInteger(c,"precision"),l=!0,s[d]={id:u,code:d,name:u,active:l,precision:h,fee:void 0,limits:{amount:{min:this.safeFloat(c,"minimumCurrencyAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(c,"minimalWithdrawalAmount"),max:void 0}},info:c};return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"symbols",[]),s=this.indexBy(a,"code"),o=this.safeValue(n,"pairs",[]),e.next=10,this.publicGetCurrencyLimits(t);case 10:for(c=e.sent,u=[],d=this.safeValue(c.data,"pairs"),h=0;h<d.length;h++){for(l=d[h],f=this.safeString(l,"symbol1"),p=this.safeString(l,"symbol2"),v=f+"/"+p,m=this.safeCurrencyCode(f),y=this.safeCurrencyCode(p),g=m+"/"+y,b=this.safeValue(s,f,{}),k=this.safeValue(s,p,{}),x=this.safeInteger(k,"precision",8),w=0;w<o.length;w++)(_=o[w]).symbol1===f&&_.symbol2===p&&(x=this.safeInteger(_,"pricePrecision",x));O=this.safeInteger(b,"precision",8),T=this.safeInteger(b,"scale",0),S={amount:O-T,price:x},u.push({id:v,info:l,symbol:g,base:m,quote:y,baseId:f,quoteId:p,precision:S,limits:{amount:{min:this.safeFloat(l,"minLotSize"),max:this.safeFloat(l,"maxLotSize")},price:{min:this.safeFloat(l,"minPrice"),max:this.safeFloat(l,"maxPrice")},cost:{min:this.safeFloat(l,"minLotSizeS2"),max:void 0}},active:void 0})}return e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n={info:r},a=["username","timestamp"],s=this.omit(r,a),o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=this.safeValue(s,u,{}),(h=this.account()).free=this.safeFloat(d,"available"),h.used=this.safeFloat(d,"orders",0),l=this.safeCurrencyCode(u),n[l]=h;return e.abrupt("return",this.parseBalance(n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={pair:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetOrderBookPair(this.extend(a,n));case 8:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),void 0!==n){e.next=11;break}n=this.milliseconds()-864e5,e.next=13;break;case 11:if(!this.options.fetchOHLCVWarning){e.next=13;break}throw new f(this.id+" fetchOHLCV warning: CEX can return historical candles for a certain date only, this might produce an empty or null reply. Set exchange.options['fetchOHLCVWarning'] = false or add ({ 'options': { 'fetchOHLCVWarning': false }}) to constructor params to suppress this warning message.");case 13:return c=(c=(c=this.ymd(n)).split("-")).join(""),u={pair:o.id,yyyymmdd:c},e.prev=17,e.next=20,this.publicGetOhlcvHdYyyymmddPair(this.extend(u,s));case 20:return d=e.sent,h="data"+this.timeframes[r],l=this.safeString(d,h),p=JSON.parse(l),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 27:if(e.prev=27,e.t0=e.catch(17),!(e.t0 instanceof m)){e.next=31;break}return e.abrupt("return",[]);case 31:case"end":return e.stop()}}),e,this,[[17,27]])})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeFloat(e,"volume"),n=this.safeFloat(e,"high"),a=this.safeFloat(e,"low"),s=this.safeFloat(e,"bid"),o=this.safeFloat(e,"ask"),c=this.safeFloat(e,"last"),u=void 0;return t&&(u=t.symbol),{symbol:u,timestamp:r,datetime:this.iso8601(r),high:n,low:a,bid:s,bidVolume:void 0,ask:o,askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:i,quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n=Object.keys(this.currencies),a={currencies:n.join("/")},e.next=8,this.publicGetTickersCurrencies(this.extend(a,r));case 8:for(s=e.sent,o=s.data,c={},u=0;u<o.length;u++)d=o[u],h=d.pair.replace(":","/"),l=this.markets[h],c[h]=this.parseTicker(d,l);return e.abrupt("return",this.filterByArray(c,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetTickerPair(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0,a=this.safeString(e,"type"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==o&&void 0!==s&&(c=o*s);var u=void 0;return void 0!==t&&(u=t.symbol),{info:e,id:i,timestamp:r,datetime:this.iso8601(r),symbol:u,type:n,side:a,order:void 0,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTradeHistoryPair(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},"market"!==r||"buy"!==n){e.next=9;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=9;break}if(void 0!==s){e.next=8;break}throw new y(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 8:a*=s;case 9:return e.next=11,this.loadMarkets();case 11:return c={pair:this.marketId(t),type:n,amount:a},"limit"===r?c.price=s:c.order_type=r,e.next=15,this.privatePostPlaceOrderPair(this.extend(c,o));case 15:return u=e.sent,d=this.safeFloat(u,"amount"),h=this.safeFloat(u,"pending"),l=this.safeValue(u,"time"),f=this.safeValue(u,"complete"),p=f?"closed":"open",v=void 0,void 0!==d&&void 0!==h&&(v=Math.max(d-h,0)),e.abrupt("return",{id:this.safeString(u,"id"),info:u,clientOrderId:void 0,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,type:r,side:this.safeString(u,"type"),symbol:t,status:p,price:this.safeFloat(u,"price"),amount:d,cost:void 0,average:void 0,remaining:h,filled:v,fee:void 0,trades:void 0});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"time");r="string"===typeof r&&r.indexOf("T")>=0?this.parse8601(r):parseInt(r);var i=void 0;if(void 0===t){var n=this.safeString(e,"symbol1"),a=this.safeString(e,"symbol2"),s=this.safeCurrencyCode(n),o=this.safeCurrencyCode(a);(i=s+"/"+o)in this.markets&&(t=this.market(i))}var c=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount");void 0!==d&&(d=Math.abs(d));var h=this.safeFloat2(e,"pending","remains"),l=d-h,f=void 0,p=void 0;if(void 0!==t){i=t.symbol;var v=this.safeFloat(e,"ta:"+t.quote),m=this.safeFloat(e,"tta:"+t.quote);p=this.sum(v,m);var y="fa:"+t.base,g="tfa:"+t.base,b="fa:"+t.quote,k="tfa:"+t.quote,x=this.safeFloat(e,"tradingFeeMaker");if(x||(x=this.safeFloat(e,"tradingFeeTaker",x)),x&&(x/=100),y in e||g in e){var w=this.safeFloat2(e,y,g);f={currency:t.base,rate:x,cost:w}}else if(b in e||k in e){var _=this.safeFloat2(e,b,k);f={currency:t.quote,rate:x,cost:_}}}p||(p=u*l);var O=e.type,T=void 0,S=e.id;if("vtx"in e){T=[];for(var C=0;C<e.vtx.length;C++){var I=e.vtx[C],M=this.safeString(I,"type");if("cancel"!==M){var E=this.safeFloat(I,"price");if(void 0!==E&&"costsNothing"!==M){var A=this.parse8601(this.safeString(I,"time")),F=this.safeFloat(I,"amount"),P=this.safeFloat(I,"fee_amount"),B=F<0?-F:F,R=void 0;"sell"===M?(R=B,B=this.sum(P,R)/E):R=B*E,T.push({id:this.safeString(I,"id"),timestamp:A,datetime:this.iso8601(A),order:S,symbol:i,price:E,amount:B,cost:R,side:M,fee:{cost:P,currency:t.quote},info:I,type:void 0,takerOrMaker:void 0})}}}}return{id:S,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:c,symbol:i,type:void 0===u?"market":"limit",timeInForce:void 0,postOnly:void 0,side:O,price:u,stopPrice:void 0,cost:p,amount:d,filled:l,remaining:h,trades:T,fee:f,info:e,average:void 0}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o="privatePostOpenOrders",c=void 0,void 0!==t&&(c=this.market(t),s.pair=c.id,o+="Pair"),e.next=12,this[o](this.extend(s,a));case 12:for(u=e.sent,d=0;d<u.length;d++)u[d]=this.extend(u[d],{status:"open"});return e.abrupt("return",this.parseOrders(u,c,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s="privatePostArchivedOrdersPair",void 0!==t){e.next=9;break}throw new p(this.id+" fetchClosedOrders() requires a symbol argument");case 9:return o=this.market(t),c={pair:o.id},e.next=13,this[s](this.extend(c,a));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t.toString()},e.next=7,this.privatePostGetOrderTx(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=L.length>0&&void 0!==L[0]?L[0]:void 0,r=L.length>1&&void 0!==L[1]?L[1]:void 0,n=L.length>2&&void 0!==L[2]?L[2]:void 0,a=L.length>3&&void 0!==L[3]?L[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={limit:n,pair:s.id,dateFrom:r},e.next=10,this.privatePostArchivedOrdersPair(this.extend(o,a));case 10:for(c=e.sent,u=[],d=0;d<c.length;d++)h=c[d],l=this.parseOrderStatus(this.safeString(h,"status")),f=this.safeString(h,"symbol1"),p=this.safeString(h,"symbol2"),v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),y=v+"/"+m,g=this.safeString(h,"type"),b=this.safeFloat(h,"a:"+f+":cds"),k=this.safeFloat(h,"a:"+p+":cds"),x=this.safeFloat(h,"f:"+p+":cds"),w=this.safeFloat(h,"amount"),_=this.safeFloat(h,"price"),O=this.safeFloat(h,"remains"),T=w-O,S=void 0,C=void 0,I=void 0,M=void 0,_?(E=this.safeFloat(h,"ta:"+p,0),A=this.safeFloat(h,"tta:"+p,0),F=this.safeFloat(h,"fa:"+p,0),P=this.safeFloat(h,"tfa:"+p,0),C="sell"===g?this.sum(this.sum(E,A),this.sum(F,P)):this.sum(E,A)-this.sum(F,P),M="limit",S=w,I=C/T):(M="market",I=(S=b)/(C=k)),B=this.safeString(h,"time"),R=this.safeString(h,"lastTxTime"),V=this.parse8601(B),u.push({id:this.safeString(h,"id"),timestamp:V,datetime:this.iso8601(V),lastUpdated:this.parse8601(R),status:l,symbol:y,side:g,price:_,amount:S,average:I,type:M,filled:T,cost:C,remaining:O,fee:{cost:x,currency:m},info:h});return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString(this.options.order.status,e,e)}},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:void 0,c=l.length>6&&void 0!==l[6]?l[6]:{},void 0!==s){e.next=5;break}throw new p(this.id+" editOrder() requires a amount argument");case 5:if(void 0!==o){e.next=7;break}throw new p(this.id+" editOrder() requires a price argument");case 7:return e.next=9,this.loadMarkets();case 9:return u=this.market(r),d={pair:u.id,type:a,amount:s,price:o,order_id:t},e.next=13,this.privatePostCancelReplaceOrderPair(this.extend(d,c));case 13:return h=e.sent,e.abrupt("return",this.parseOrder(h,u));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:{},"XRP"!==t&&"XLM"!==t){e.next=3;break}throw new g(this.id+" fetchDepositAddress does not support XRP and XLM addresses yet (awaiting docs from CEX.io)");case 3:return e.next=5,this.loadMarkets();case 5:return n=this.currency(t),a={currency:n.id},e.next=9,this.privatePostGetAddress(this.extend(a,r));case 9:return s=e.sent,o=this.safeString(s,"data"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c+this.uid+this.apiKey,d=this.hmac(this.encode(u),this.encode(this.secret));a=this.json(this.extend({key:this.apiKey,signature:d.toUpperCase(),nonce:c},o)),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(Array.isArray(s))return s;if("true"!==a){if(void 0===s)throw new m(this.id+" returned "+this.json(s));if((!("e"in s)||!("ok"in s)||"ok"!==s.ok)&&"error"in s){var u=this.safeString(s,"error"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(62);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"chilebit",name:"ChileBit",countries:["CL"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991414-1298f0d8-647f-11e7-9c40-d56409266336.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://chilebit.net",doc:"https://blinktrade.com/docs"},options:{brokerId:"9"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError,m=l.RateLimitExceeded,y=l.InvalidNonce;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinbase",name:"Coinbase",countries:["US"],rateLimit:400,version:"v2",userAgent:this.userAgents.chrome,headers:{"CB-VERSION":"2018-05-30"},has:{CORS:!0,cancelOrder:!1,createDepositAddress:!0,createOrder:!1,deposit:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!1,fetchOpenOrders:!1,fetchOrder:!1,fetchOrderBook:!1,fetchL2OrderBook:!1,fetchLedger:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchBidsAsks:!1,fetchTrades:!1,withdraw:!1,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchMySells:!0,fetchMyBuys:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/40811661-b6eceae2-653a-11e8-829e-10bfadb078cf.jpg",api:"https://api.coinbase.com",www:"https://www.coinbase.com",doc:"https://developers.coinbase.com/api/v2",fees:"https://support.coinbase.com/customer/portal/articles/2109597-buy-sell-bank-transfer-fees",referral:"https://www.coinbase.com/join/58cbe25a355148797479dbd2"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["currencies","time","exchange-rates","users/{user_id}","prices/{symbol}/buy","prices/{symbol}/sell","prices/{symbol}/spot"]},private:{get:["accounts","accounts/{account_id}","accounts/{account_id}/addresses","accounts/{account_id}/addresses/{address_id}","accounts/{account_id}/addresses/{address_id}/transactions","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}","accounts/{account_id}/deposits","accounts/{account_id}/deposits/{deposit_id}","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}","payment-methods","payment-methods/{payment_method_id}","user","user/auth"],post:["accounts","accounts/{account_id}/primary","accounts/{account_id}/addresses","accounts/{account_id}/transactions","accounts/{account_id}/transactions/{transaction_id}/complete","accounts/{account_id}/transactions/{transaction_id}/resend","accounts/{account_id}/buys","accounts/{account_id}/buys/{buy_id}/commit","accounts/{account_id}/sells","accounts/{account_id}/sells/{sell_id}/commit","accounts/{account_id}/deposists","accounts/{account_id}/deposists/{deposit_id}/commit","accounts/{account_id}/withdrawals","accounts/{account_id}/withdrawals/{withdrawal_id}/commit"],put:["accounts/{account_id}","user"],delete:["accounts/{id}","accounts/{account_id}/transactions/{transaction_id}"]}},exceptions:{exact:{two_factor_required:v,param_required:f,validation_error:f,invalid_request:f,personal_details_required:v,identity_verification_required:v,jumio_verification_required:v,jumio_face_match_verification_required:v,unverified_email:v,authentication_error:v,invalid_token:v,revoked_token:v,expired_token:v,invalid_scope:v,not_found:f,rate_limit_exceeded:m,internal_server_error:f},broad:{"request timestamp expired":y}},commonCurrencies:{CGLD:"CELO"},options:{fetchCurrencies:{expires:5e3},accounts:["wallet","fiat"]}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),e.abrupt("return",this.safeTimestamp(n,"epoch"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r={limit:100},e.next=6,this.privateGetAccounts(this.extend(r,t));case 6:for(n=e.sent,a=this.safeValue(n,"data",[]),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeValue(c,"currency",{}),d=this.safeString(u,"code"),h=this.safeCurrencyCode(d),s.push({id:this.safeString(c,"id"),type:this.safeString(c,"type"),code:h,info:c});return e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:{},n=this.safeString(r,"account_id"),r=this.omit(r,"account_id"),void 0!==n){e.next=15;break}return e.next=6,this.loadAccounts();case 6:a=0;case 7:if(!(a<this.accounts.length)){e.next=15;break}if((s=this.accounts[a]).code!==t||"wallet"!==s.type){e.next=12;break}return n=s.id,e.abrupt("break",15);case 12:a++,e.next=7;break;case 15:if(void 0!==n){e.next=17;break}throw new f(this.id+" createDepositAddress could not find the account with matching currency code, specify an `account_id` extra param");case 17:return o={account_id:n},e.next=20,this.privatePostAccountsAccountIdAddresses(this.extend(o,r));case 20:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeString(u,"destination_tag"),h=this.safeString(u,"address"),e.abrupt("return",{currency:t,tag:d,address:h,info:c});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMySells",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,n=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.prepareAccountRequest(r,n);case 6:return a=e.sent,e.next=9,this.loadMarkets();case 9:return s=this.omit(n,["account_id","accountId"]),e.next=12,this.privateGetAccountsAccountIdSells(this.extend(a,s));case 12:return o=e.sent,e.abrupt("return",this.parseTrades(o.data,void 0,t,r));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyBuys",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:void 0,n=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.prepareAccountRequest(r,n);case 6:return a=e.sent,e.next=9,this.loadMarkets();case 9:return s=this.omit(n,["account_id","accountId"]),e.next=12,this.privateGetAccountsAccountIdBuys(this.extend(a,s));case 12:return o=e.sent,e.abrupt("return",this.parseTrades(o.data,void 0,t,r));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.prepareAccountRequestWithCurrencyCode(r,a,s);case 6:return o=e.sent,e.next=9,this.loadMarkets();case 9:return c=this.omit(s,["account_id","accountId"]),e.next=12,this[t](this.extend(o,c));case 12:return u=e.sent,e.abrupt("return",this.parseTransactions(u.data,void 0,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetAccountsAccountIdWithdrawals",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsWithMethod("privateGetAccountsAccountIdDeposits",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({created:"pending",completed:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeValue(e,"subtotal",{}),r=this.safeValue(e,"fee",{}),i=this.safeString(e,"id"),n=this.parse8601(this.safeValue(e,"created_at")),a=this.parse8601(this.safeValue(e,"updated_at")),s=this.safeString(e,"resource"),o=this.safeFloat(t,"amount"),c=this.safeString(t,"currency"),u=this.safeCurrencyCode(c),d=this.safeFloat(r,"amount"),h=this.safeString(r,"currency"),l=this.safeCurrencyCode(h),f={cost:d,currency:l},p=this.parseTransactionStatus(this.safeString(e,"status"));if(void 0===p){var v=this.safeValue(e,"committed");p=v?"ok":"pending"}return{info:e,id:i,txid:i,timestamp:n,datetime:this.iso8601(n),address:void 0,tag:void 0,type:s,amount:o,currency:u,status:p,updated:a,fee:f}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeValue(e,"total",{}),n=this.safeValue(e,"amount",{}),a=this.safeValue(e,"subtotal",{}),s=this.safeValue(e,"fee",{}),o=this.safeString(e,"id"),c=this.parse8601(this.safeValue(e,"created_at"));if(void 0===t){var u=this.safeString(n,"currency"),d=this.safeString(i,"currency");if(void 0!==u&&void 0!==d){var h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d);r=h+"/"+l}}var f=void 0,p=this.safeString(e,"resource"),v=void 0,m=this.safeFloat(a,"amount"),y=this.safeFloat(n,"amount"),g=void 0;void 0!==m&&void 0!==y&&y>0&&(g=m/y);var b=this.safeFloat(s,"amount"),k=this.safeString(s,"currency"),x=this.safeCurrencyCode(k),w={cost:b,currency:x};return{info:e,id:o,order:f,timestamp:c,datetime:this.iso8601(c),symbol:r,type:v,side:p,takerOrMaker:void 0,price:g,amount:y,cost:m,fee:w}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencies",{}),a=this.safeValue(r,"exchangeRates",{}),s=this.safeValue(n,"data",[]),o=this.indexBy(s,"id"),c=this.safeValue(this.safeValue(a,"data",{}),"rates",{}),u=Object.keys(c),d=[],h=0;h<u.length;h++)if(l=u[h],f=this.safeCurrencyCode(l),"crypto"===(l in o?"fiat":"crypto"))for(p=0;p<s.length;p++)v=s[p],m=this.safeString(v,"id"),y=this.safeCurrencyCode(m),g=f+"/"+y,b=l+"-"+m,d.push({id:b,symbol:g,base:f,quote:y,baseId:l,quoteId:m,active:void 0,info:v,precision:{amount:void 0,price:void 0},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(v,"min_size"),max:void 0}}});return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrenciesFromCache",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeValue(this.options,"fetchCurrencies",{}),n=this.safeInteger(r,"timestamp"),a=this.safeInteger(r,"expires",1e3),s=this.milliseconds(),!(void 0===n||s-n>a)){e.next=13;break}return e.next=8,this.publicGetCurrencies(t);case 8:return o=e.sent,e.next=11,this.publicGetExchangeRates(t);case 11:c=e.sent,this.options.fetchCurrencies=this.extend(r,{currencies:o,exchangeRates:c,timestamp:s});case 13:return e.abrupt("return",this.safeValue(this.options,"fetchCurrencies",{}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.fetchCurrenciesFromCache(t);case 3:for(r=e.sent,n=this.safeValue(r,"currencies",{}),a=this.safeValue(r,"exchangeRates",{}),s=this.safeValue(n,"data",[]),o=this.indexBy(s,"id"),c=this.safeValue(this.safeValue(a,"data",{}),"rates",{}),u=Object.keys(c),d={},h=0;h<u.length;h++)l=u[h],f=l in o?"fiat":"crypto",p=this.safeValue(o,l,{}),v=this.safeString(p,"id",l),m=this.safeString(p,"name"),y=this.safeCurrencyCode(v),d[y]={id:v,code:y,info:p,type:f,name:m,active:!0,fee:void 0,precision:void 0,limits:{amount:{min:this.safeFloat(p,"min_size"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",d);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.seconds(),a=this.market(t),s=this.extend({symbol:a.id},r),e.next=8,this.publicGetPricesSymbolBuy(s);case 8:return o=e.sent,e.next=11,this.publicGetPricesSymbolSell(s);case 11:return c=e.sent,e.next=14,this.publicGetPricesSymbolSpot(s);case 14:return u=e.sent,d=this.safeFloat(o.data,"amount"),h=this.safeFloat(c.data,"amount"),l=this.safeFloat(u.data,"amount"),e.abrupt("return",{symbol:t,timestamp:n,datetime:this.iso8601(n),bid:h,ask:d,last:l,high:void 0,low:void 0,bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:l,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:{buy:o,sell:c,spot:u}});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.loadMarkets();case 3:return r={limit:100},e.next=6,this.privateGetAccounts(this.extend(r,t));case 6:for(n=e.sent,a=this.safeValue(n,"data"),s=this.safeValue(t,"type",this.options.accounts),o={info:n},c=0;c<a.length;c++)u=a[c],this.inArray(u.type,s)&&(d=this.safeString(u.balance,"currency"),h=this.safeCurrencyCode(d),l=this.safeFloat(u.balance,"amount"),f=l,p=void 0,h in o?(o[h].free=this.sum(o[h].free,l),o[h].total=this.sum(o[h].total,l)):(v={free:f,used:p,total:l},o[h]=v));return e.abrupt("return",this.parseBalance(o));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.prepareAccountRequestWithCurrencyCode(t,n,a);case 10:return o=e.sent,c=this.omit(a,["account_id","accountId"]),e.next=14,this.privateGetAccountsAccountIdTransactions(this.extend(o,c));case 14:return u=e.sent,e.abrupt("return",this.parseLedger(u.data,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryStatus",value:function(e){return this.safeString({completed:"ok"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({buy:"trade",sell:"trade",fiat_deposit:"transaction",fiat_withdrawal:"transaction",exchange_deposit:"transaction",exchange_withdrawal:"transaction",send:"transaction",pro_deposit:"transaction",pro_withdrawal:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"amount",{}),i=this.safeFloat(r,"amount"),n=void 0;i<0?(n="out",i=-i):n="in";var a=this.safeString(r,"currency"),s=this.safeCurrencyCode(a,t),o=void 0,c=this.safeValue(e,"network",{}),u=this.safeValue(c,"transaction_fee");if(void 0!==u){var d=this.safeString(u,"currency"),h=this.safeCurrencyCode(d,t),l=this.safeFloat(u,"amount");o={cost:l,currency:h}}var f=this.parse8601(this.safeValue(e,"created_at")),p=this.safeString(e,"id"),v=this.parseLedgerEntryType(this.safeString(e,"type")),m=this.parseLedgerEntryStatus(this.safeString(e,"status")),y=this.safeString(e,"resource_path"),g=void 0;if(void 0!==y){var b=y.split("/"),k=b.length;k>3&&(g=b[3])}return{info:e,id:p,timestamp:f,datetime:this.iso8601(f),direction:n,account:g,referenceId:void 0,referenceAccount:void 0,type:v,currency:s,amount:i,before:void 0,after:void 0,status:m,fee:o}}},{key:"findAccountId",value:function(){var e=n(i.mark((function e(t){var r,n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:r=0;case 5:if(!(r<this.accounts.length)){e.next=12;break}if((n=this.accounts[r]).code!==t){e.next=9;break}return e.abrupt("return",n.id);case 9:r++,e.next=5;break;case 12:return e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"prepareAccountRequest",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.safeString2(t,"account_id","accountId");if(void 0===r)throw new p(this.id+" method requires an account_id (or accountId) parameter");var i={account_id:r};return void 0!==e&&(i.limit=e),i}},{key:"prepareAccountRequestWithCurrencyCode",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},void 0!==(a=this.safeString2(n,"account_id","accountId"))){e.next=12;break}if(void 0!==t){e.next=7;break}throw new p(this.id+" method requires an account_id (or accountId) parameter OR a currency code argument");case 7:return e.next=9,this.findAccountId(t);case 9:if(void 0!==(a=e.sent)){e.next=12;break}throw new f(this.id+" could not find account id for "+t);case 12:return s={account_id:a},void 0!==r&&(s.limit=r),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var c=this.urls.api+s;if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d="";"GET"!==r&&Object.keys(o).length&&(d=a=this.json(o));var h=u+r+s+d,l=this.hmac(this.encode(h),this.encode(this.secret));n={"CB-ACCESS-KEY":this.apiKey,"CB-ACCESS-SIGN":l,"CB-ACCESS-TIMESTAMP":u,"Content-Type":"application/json"}}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.id+" "+a,d=this.safeString(s,"error");if(void 0!==d){var h=this.safeString(s,"error_description");throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,h,u),new f(u)}var l=this.safeValue(s,"errors");if(void 0!==l)if(Array.isArray(l))if(l.length>0){d=this.safeString(l[0],"id");var p=this.safeString(l[0],"message");if(void 0!==d)throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,p,u),new f(u)}if(void 0===this.safeValue(s,"data"))throw new f(this.id+" failed due to a malformed response "+this.json(s))}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(135);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"coinbaseprime",name:"Coinbase Prime",pro:!0,urls:{test:{public:"https://api-public.sandbox.prime.coinbase.com",private:"https://api-public.sandbox.prime.coinbase.com"},logo:"https://user-images.githubusercontent.com/1294454/44539184-29f26e00-a70c-11e8-868f-e907fc236a7c.jpg",api:{public:"https://api.prime.coinbase.com",private:"https://api.prime.coinbase.com"},www:"https://prime.coinbase.com",doc:"https://docs.prime.coinbase.com",fees:"https://support.prime.coinbase.com/customer/en/portal/articles/2945629-fees?b_id=17475"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coincheck",name:"coincheck",countries:["JP","ID"],rateLimit:1500,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMyTrades:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182088-1d6d6380-c2ec-11ea-9c64-8ab9f9b289f5.jpg",api:"https://coincheck.com/api",www:"https://coincheck.com",doc:"https://coincheck.com/documents/exchange/api",fees:["https://coincheck.com/exchange/fee","https://coincheck.com/info/fee"]},api:{public:{get:["exchange/orders/rate","order_books","rate/{pair}","ticker","trades"]},private:{get:["accounts","accounts/balance","accounts/leverage_balance","bank_accounts","deposit_money","exchange/orders/opens","exchange/orders/transactions","exchange/orders/transactions_pagination","exchange/leverage/positions","lending/borrows/matches","send_money","withdraws"],post:["bank_accounts","deposit_money/{id}/fast","exchange/orders","exchange/transfers/to_leverage","exchange/transfers/from_leverage","lending/borrows","lending/borrows/{id}/repay","send_money","withdraws"],delete:["bank_accounts/{id}","exchange/orders/{id}","withdraws/{id}"]}},markets:{"BTC/JPY":{id:"btc_jpy",symbol:"BTC/JPY",base:"BTC",quote:"JPY",baseId:"btc",quoteId:"jpy"},"ETC/JPY":{id:"etc_jpy",symbol:"ETC/JPY",base:"ETC",quote:"JPY",baseId:"etc",quoteId:"jpy"},"FCT/JPY":{id:"fct_jpy",symbol:"FCT/JPY",base:"FCT",quote:"JPY",baseId:"fct",quoteId:"jpy"},"MONA/JPY":{id:"mona_jpy",symbol:"MONA/JPY",base:"MONA",quote:"JPY",baseId:"mona",quoteId:"jpy"},"ETC/BTC":{id:"etc_btc",symbol:"ETC/BTC",base:"ETC",quote:"BTC",baseId:"etc",quoteId:"btc"}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountsBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],(c=this.currencyId(o))in r&&(u=this.account(),d=c+"_reserved",u.free=this.safeFloat(r,c),u.used=this.safeFloat(r,d),n[o]=u);return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),e.next=10,this.privateGetExchangeOrdersOpens(a);case 10:for(o=e.sent,c=this.safeValue(o,"orders",[]),u=this.parseOrders(c,s,r,n),d=[],h=0;h<u.length;h++)d.push(this.extend(u[h],{status:"open"}));return e.abrupt("return",d);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"order_type"),n=this.parse8601(this.safeString(e,"created_at")),a=this.safeFloat(e,"pending_amount"),s=this.safeFloat(e,"pending_amount"),o=this.safeFloat(e,"rate"),c=void 0,u=this.safeString(e,"pair"),d=this.safeSymbol(u,t,"_");return this.safeOrder({id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,amount:a,remaining:s,filled:void 0,side:i,type:void 0,timeInForce:void 0,postOnly:void 0,status:c,symbol:d,price:o,stopPrice:void 0,cost:void 0,fee:void 0,info:e,average:void 0,trades:void 0})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={pair:n.id},e.next=8,this.publicGetOrderBooks(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:{},"BTC/JPY"===t){e.next=3;break}throw new f(this.id+" fetchTicker () supports BTC/JPY only");case 3:return e.next=5,this.loadMarkets();case 5:return n=this.market(t),a={pair:n.id},e.next=9,this.publicGetTicker(this.extend(a,r));case 9:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),c=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume"),quoteVolume:void 0,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"id"),n=this.safeFloat(e,"rate"),a=this.safeString(e,"pair");t=this.safeValue(this.markets_by_id,a,t);var s=void 0,o=void 0,c=void 0;if(void 0!==a)if(a in this.markets_by_id)o=(t=this.markets_by_id[a]).baseId,c=t.quoteId,s=t.symbol;else{var u=a.split("_");o=u[0],c=u[1];var d=this.safeCurrencyCode(o),h=this.safeCurrencyCode(c);s=d+"/"+h}void 0===s&&void 0!==t&&(s=t.symbol);var l=void 0,f=void 0,p=void 0,v=void 0,m=void 0,y=void 0;if("liquidity"in e){"T"===this.safeString(e,"liquidity")?l="taker":"M"===this.safeString(e,"liquidity")&&(l="maker");var g=this.safeValue(e,"funds",{});f=this.safeFloat(g,o),p=this.safeFloat(g,c),m={currency:this.safeString(e,"fee_currency"),cost:this.safeFloat(e,"fee")},v=this.safeString(e,"side"),y=this.safeString(e,"order_id")}else f=this.safeFloat(e,"amount"),v=this.safeString(e,"order_type");return void 0===p&&void 0!==f&&void 0!==n&&(p=f*n),{id:i,info:e,datetime:this.iso8601(r),timestamp:r,symbol:s,type:void 0,side:v,order:y,takerOrMaker:l,price:n,amount:f,cost:p,fee:m}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),e.next=9,this.privateGetExchangeOrdersTransactions(this.extend({},a));case 9:return o=e.sent,c=this.safeValue(o,"transactions",[]),e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c={pair:this.marketId(t)},"market"===r?(u=r+"_"+n,c.order_type=u,c[("buy"===n?u+"_":"")+"amount"]=a):(c.order_type=n,c.rate=s,c.amount=a),e.next=8,this.privatePostExchangeOrders(this.extend(c,o));case 8:return d=e.sent,h=this.safeString(d,"id"),e.abrupt("return",{info:d,id:h});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privateDeleteExchangeOrdersId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u="";"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(this.keysort(o))):Object.keys(o).length&&(u=a=this.urlencode(this.keysort(o)));var d=c+s+u;n={"Content-Type":"application/x-www-form-urlencoded","ACCESS-KEY":this.apiKey,"ACCESS-NONCE":c,"ACCESS-SIGNATURE":this.hmac(this.encode(d),this.encode(this.secret))}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(c=e.sent,"public"!==r){e.next=10;break}return e.abrupt("return",c);case 10:if(!("success"in c)){e.next=13;break}if(!c.success){e.next=13;break}return e.abrupt("return",c);case 13:throw new p(this.id+" "+this.json(c));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.InvalidNonce,y=f.InsufficientFunds,g=f.InvalidOrder,b=f.OrderNotFound,k=f.DDoSProtection;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"coinegg",name:"CoinEgg",countries:["CN","UK"],has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOpenOrders:"emulated",fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/36770310-adfa764e-1c5a-11e8-8e09-449daac3d2fb.jpg",api:{web:"https://trade.coinegg.com/web",rest:"https://api.coinegg.com/api/v1"},www:"https://www.coinegg.com",doc:"https://www.coinegg.com/explain.api.html",fees:"https://www.coinegg.com/fee.html",referral:"https://www.coinegg.com/user/register?invite=523218"},api:{web:{get:["symbol/ticker?right_coin={quote}","{quote}/trends","{quote}/{base}/order","{quote}/{base}/trades","{quote}/{base}/depth.js"]},public:{get:["ticker/region/{quote}","depth/region/{quote}","orders/region/{quote}"]},private:{post:["balance","trade_add/region/{quote}","trade_cancel/region/{quote}","trade_view/region/{quote}","trade_list/region/{quote}"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:.008,BCH:.002,LTC:.001,ETH:.01,ETC:.01,NEO:0,QTUM:"1%",XRP:"1%",DOGE:"1%",LSK:"1%",XAS:"1%",BTS:"1%",GAME:"1%",GOOC:"1%",NXT:"1%",IFC:"1%",DNC:"1%",BLK:"1%",VRC:"1%",XPM:"1%",VTC:"1%",TFC:"1%",PLC:"1%",EAC:"1%",PPC:"1%",FZ:"1%",ZET:"1%",RSS:"1%",PGC:"1%",SKT:"1%",JBC:"1%",RIO:"1%",LKC:"1%",ZCC:"1%",MCC:"1%",QEC:"1%",MET:"1%",YTC:"1%",HLB:"1%",MRYC:"1%",MTC:"1%",KTC:0}}},exceptions:{103:v,104:v,105:v,106:m,200:y,201:g,202:g,203:b,402:k},errorMessages:{100:"Required parameters can not be empty",101:"Illegal parameter",102:"coin does not exist",103:"Key does not exist",104:"Signature does not match",105:"Insufficient permissions",106:"Request expired(nonce error)",200:"Lack of balance",201:"Too small for the number of trading",202:"Price must be in 0 - 1000000",203:"Order does not exist",204:"Pending order amount must be above 0.001 BTC",205:"Restrict pending order prices",206:"Decimal place error",401:"System error",402:"Requests are too frequent",403:"Non-open API",404:"IP restriction does not request the resource",405:"Currency transactions are temporarily closed"},options:{quoteIds:["btc","eth","usc","usdt"]},commonCurrencies:{JBC:"JubaoCoin",SBTC:"Super Bitcoin"}})}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.length>0&&void 0!==m[0]?m[0]:{},t=this.options.quoteIds,r=[],i=0;case 4:if(!(i<t.length)){e.next=14;break}return a=t[i],e.next=8,this.webGetSymbolTickerRightCoinQuote({quote:a});case 8:for(s=e.sent,o=this.safeValue(s,"data",[]),c=0;c<o.length;c++)u=o[c],d=u.symbol,h=d.split("_")[0],l=h.toUpperCase(),f=a.toUpperCase(),l=this.safeCurrencyCode(l),f=this.safeCurrencyCode(f),p=l+"/"+f,v={amount:8,price:8},r.push({id:d,symbol:p,base:l,quote:f,baseId:h,quoteId:a,active:!0,precision:v,limits:{amount:{min:Math.pow(10,-v.amount),max:Math.pow(10,v.amount)},price:{min:Math.pow(10,-v.price),max:Math.pow(10,v.price)},cost:{min:void 0,max:void 0}},info:u});case 11:i++,e.next=4;break;case 14:return e.abrupt("return",r);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.milliseconds(),n=this.safeFloat(e,"last"),a=this.safeFloat(e,"change"),s=void 0,o=void 0,c=void 0;if(void 0!==a){var u=a/100;o=n-(s=n/this.sum(1,u)),c=this.sum(n,s)/2}return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:s,close:n,last:n,previousClose:void 0,change:o,percentage:a,average:c,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"quoteVol"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={coin:i.baseId,quote:i.quoteId},e.next=7,this.publicGetTickerRegionQuote(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.market(t),a={coin:i.baseId,quote:i.quoteId},e.next=8,this.publicGetDepthRegionQuote(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=t.symbol,s=void 0;void 0!==n&&void 0!==i&&(s=this.costToPrecision(a,i*n));var o="limit",c=this.safeString(e,"type"),u=this.safeString(e,"tid");return{id:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,order:void 0,type:o,side:c,takerOrMaker:void 0,price:i,amount:n,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={coin:s.baseId,quote:s.quoteId},e.next=9,this.publicGetOrdersRegionQuote(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,a={info:r},s=this.safeValue(r,"data",{}),o=this.omit(s,"uid"),c=Object.keys(o),u=0;u<c.length;u++)d=c[u],h=d.split("_"),l=i(h,2),f=l[0],p=l[1],(v=this.safeCurrencyCode(f))in a||(a[v]=this.account()),m="lock"===p?"used":"free",a[v][m]=this.safeFloat(o,d);return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.parse8601(this.safeString(e,"datetime")),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount_original"),s=this.safeFloat(e,"amount_outstanding"),o=this.safeString(e,"status");o="cancelled"===o?"canceled":s?"open":"closed";var c=this.safeValue(e,"info",e),u="limit",d=this.safeString(e,"type"),h=this.safeString(e,"id");return this.safeOrder({id:h,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:o,symbol:r,type:u,timeInForce:void 0,postOnly:void 0,side:d,price:n,stopPrice:void 0,cost:void 0,amount:a,filled:void 0,remaining:s,trades:void 0,fee:void 0,info:c,average:void 0})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={coin:c.baseId,quote:c.quoteId,type:i,amount:a,price:s},e.next=8,this.privatePostTradeAddRegionQuote(this.extend(u,o));case 8:return d=e.sent,h=this.safeString(d,"id"),l=this.parseOrder({id:h,datetime:this.ymdhms(this.milliseconds()),amount_original:a,amount_outstanding:a,price:s,type:i,info:d},c),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,coin:a.baseId,quote:a.quoteId},e.next=8,this.privatePostTradeCancelRegionQuote(this.extend(s,i));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,coin:a.baseId,quote:a.quoteId},e.next=8,this.privatePostTradeViewRegionQuote(this.extend(s,i));case 8:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={coin:s.baseId,quote:s.quoteId},void 0!==r&&(o.since=r/1e3),e.next=11,this.privatePostTradeListRegionQuote(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(u,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"open"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="rest";"web"===t&&(s=t);var o=this.urls.api[s]+"/"+this.implodeParams(e,i),c=this.omit(i,this.extractParams(e));if("public"===t||"web"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials(),c=this.urlencode(this.extend({key:this.apiKey,nonce:this.nonce()},c));var u=this.hash(this.encode(this.secret)),d=this.hmac(this.encode(c),this.encode(u));c+="&signature="+d,"GET"===r?o+="?"+c:(n={"Content-type":"application/x-www-form-urlencoded"},a=c)}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"result");if(void 0!==u&&!0!==u){var d=this.safeString(s,"code"),h=this.errorMessages,l=this.safeString(h,d,"Unknown Error"),f=this.id+" "+l;throw this.throwExactlyMatchedException(this.exceptions,d,f),new p(this.id+" "+l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InsufficientFunds,m=l.OrderNotFound,y=l.InvalidOrder,g=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinex",name:"CoinEx",version:"v1",countries:["CN"],rateLimit:1e3,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","12h":"12hour","1d":"1day","3d":"3day","1w":"1week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182089-1e05fa00-c2ec-11ea-8da9-cc73b45abbbc.jpg",api:"https://api.coinex.com",www:"https://www.coinex.com",doc:"https://github.com/coinexcom/coinex_exchange_api/wiki",fees:"https://www.coinex.com/fees",referral:"https://www.coinex.com/register?refer_code=yw5fz"},api:{public:{get:["common/currency/rate","common/asset/config","market/info","market/list","market/ticker","market/ticker/all","market/depth","market/deals","market/kline"]},private:{get:["balance/coin/deposit","balance/coin/withdraw","balance/info","future/account","future/config","future/limitprice","future/loan/history","future/market","margin/account","margin/config","margin/loan/history","margin/market","order","order/deals","order/finished","order/finished/{id}","order/pending","order/status","order/status/batch","order/user/deals","sub_account/balance","sub_account/transfer/history"],post:["balance/coin/withdraw","future/flat","future/loan","future/transfer","margin/flat","margin/loan","margin/transfer","order/batchlimit","order/ioc","order/limit","order/market","sub_account/transfer"],delete:["balance/coin/withdraw","order/pending/batch","order/pending"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCH:0,BTC:.001,LTC:.001,ETH:.001,ZEC:1e-4,DASH:1e-4}}},limits:{amount:{min:.001,max:void 0}},precision:{amount:8,price:8},options:{createMarketBuyOrderRequiresPrice:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarketInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=[],s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=n[c],d=this.safeString(u,"name"),h=this.safeString(u,"trading_name"),l=h,f=this.safeString(u,"pricing_name"),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,h===d&&(m=d),y={amount:this.safeInteger(u,"trading_decimal"),price:this.safeInteger(u,"pricing_decimal")},g=void 0,a.push({id:d,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:g,taker:this.safeFloat(u,"taker_fee_rate"),maker:this.safeFloat(u,"maker_fee_rate"),info:u,precision:y,limits:{amount:{min:this.safeFloat(u,"min_amount"),max:void 0},price:{min:Math.pow(10,-y.price),max:void 0}}});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date"),i=void 0;void 0!==t&&(i=t.symbol),e=this.safeValue(e,"ticker",{});var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat2(e,"vol","volume"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetMarketTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.data,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTickerAll(r);case 6:for(n=e.sent,a=this.safeValue(n,"data"),s=this.safeInteger(a,"date"),o=this.safeValue(a,"ticker"),c=Object.keys(o),u={},d=0;d<c.length;d++)h=c[d],l=this.safeMarket(h),f=l.symbol,(p=this.parseTicker({date:s,ticker:o[h]},l)).symbol=f,u[f]=p;return e.abrupt("return",this.filterByArray(u,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:20,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return void 0===r&&(r=20),a={market:this.marketId(t),merge:"0.0000000001",limit:r.toString()},e.next=8,this.publicGetMarketDepth(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s.data));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"create_time");void 0===r&&(r=this.safeInteger(e,"date_ms"));var i=this.safeString(e,"id"),n=this.safeString(e,"order_id"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=this.safeString(e,"market"),c=this.safeSymbol(o,t),u=this.safeFloat(e,"deal_money");u||(u=parseFloat(this.costToPrecision(c,a*s)));var d=void 0,h=this.safeFloat(e,"fee");if(void 0!==h){var l=this.safeString(e,"fee_asset"),f=this.safeCurrencyCode(l);d={cost:h,currency:f}}var p=this.safeString(e,"role"),v=this.safeString(e,"type");return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,id:i,order:n,type:void 0,side:v,takerOrMaker:p,price:a,amount:s,cost:u,fee:d}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetMarketDeals(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.data,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,type:this.timeframes[r]},void 0!==a&&(c.limit=a),e.next=11,this.publicGetMarketKline(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalanceInfo(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data"),s=Object.keys(a),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),d=this.safeValue(a,c,{}),(h=this.account()).free=this.safeFloat(d,"available"),h.used=this.safeFloat(d,"frozen"),n[u]=h;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({not_deal:"open",part_deal:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"create_time"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"deal_money"),a=this.safeFloat(e,"amount"),s=this.safeFloat(e,"deal_amount"),o=this.safeFloat(e,"avg_price"),c=void 0,u=this.safeString(e,"market");t=this.safeMarket(u,t);var d=this.safeString(e,"fee_asset"),h=this.safeCurrencyCode(d);void 0!==t&&(c=t.symbol,void 0===h&&(h=t.quote));var l=this.safeFloat(e,"left"),f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeString(e,"order_type"),v=this.safeString(e,"type");return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:f,symbol:c,type:p,timeInForce:void 0,postOnly:void 0,side:v,price:i,stopPrice:void 0,cost:n,average:o,amount:a,filled:s,remaining:l,trades:void 0,fee:{currency:h,cost:this.safeFloat(e,"deal_fee")},info:e})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(c="privatePostOrder"+this.capitalize(r),u=this.market(t),d={market:u.id,type:n},a=parseFloat(a),"market"!==r||"buy"!==n){e.next=21;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=18;break}if(void 0!==s){e.next=14;break}throw new y(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 14:s=parseFloat(s),d.amount=this.costToPrecision(t,a*s);case 16:e.next=19;break;case 18:d.amount=this.costToPrecision(t,a);case 19:e.next=22;break;case 21:d.amount=this.amountToPrecision(t,a);case 22:return"limit"!==r&&"ioc"!==r||(d.price=this.priceToPrecision(t,s)),e.next=25,this[c](this.extend(d,o));case 25:return h=e.sent,l=this.safeValue(h,"data"),e.abrupt("return",this.parseOrder(l,u));case 28:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,market:a.id},e.next=8,this.privateDeleteOrderPending(this.extend(s,n));case 8:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c,a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={id:t,market:a.id},e.next=10,this.privateGetOrder(this.extend(s,n));case 10:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return void 0===a&&(a=100),o={page:1,limit:a},c=void 0,void 0!==r&&(c=this.market(r),o.market=c.id),u="privateGetOrder"+this.capitalize(t),e.next=13,this[u](this.extend(o,s));case 13:return d=e.sent,h=this.safeValue(d,"data"),l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOrders(l,c,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("pending",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("finished",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=100),s={page:1,limit:n},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),e.next=12,this.privateGetOrderUserDeals(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"data"),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(d,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),a&&(n=n+":"+a),c={coin_type:o.id,coin_address:n,actual_amount:parseFloat(r),transfer_method:"onchain"},e.next=10,this.privatePostBalanceCoinWithdraw(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({audit:"pending",pass:"pending",processing:"pending",confirming:"pending",not_pass:"failed",cancel:"canceled",finish:"ok",fail:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"coin_withdraw_id","coin_deposit_id"),i=this.safeString(e,"coin_address"),n=this.safeString(e,"remark");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeValue(e,"tx_id");void 0!==a&&a.length<1&&(a=void 0);var s=this.safeString(e,"coin_type"),o=this.safeCurrencyCode(s,t),c=this.safeTimestamp(e,"create_time"),u="coin_withdraw_id"in e?"withdraw":"deposit",d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeFloat(e,"amount"),l=this.safeFloat(e,"tx_fee");"deposit"===u&&(l=0);var f={cost:l,currency:o};return void 0!==h&&(h-=l),{info:e,id:r,txid:a,timestamp:c,datetime:this.iso8601(c),address:i,tag:n,type:u,amount:h,currency:o,status:d,updated:void 0,fee:f}}},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={coin_type:s.id},void 0!==n&&(o.Limit=n),e.next=13,this.privateGetBalanceCoinWithdraw(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"data"),Array.isArray(u)||(u=this.safeValue(u,"data",[])),e.abrupt("return",this.parseTransactions(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={coin_type:s.id},void 0!==n&&(o.Limit=n),e.next=13,this.privateGetBalanceCoinDeposit(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"data"),Array.isArray(u)||(u=this.safeValue(u,"data",[])),e.abrupt("return",this.parseTransactions(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;e=this.implodeParams(e,i);var s=this.urls.api+"/"+this.version+"/"+e,o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce();o=this.extend({access_id:this.apiKey,tonce:c.toString()},o),o=this.keysort(o);var u=this.rawencode(o),d=this.hash(this.encode(u+"&secret_key="+this.secret));n={Authorization:d.toUpperCase(),"Content-Type":"application/json"},"GET"===r||"DELETE"===r?s+="?"+u:a=this.json(o)}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"public",n=p.length>2&&void 0!==p[2]?p[2]:"GET",a=p.length>3&&void 0!==p[3]?p[3]:{},s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(c=e.sent,u=this.safeString(c,"code"),d=this.safeValue(c,"data"),h=this.safeString(c,"message"),"0"===u&&void 0!==d&&("Ok"===h||d)){e.next=15;break}throw l={24:g,25:g,107:v,600:m,601:y,602:y,606:y},new(this.safeValue(l,u,f))(c.message);case 15:return e.abrupt("return",c);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.RateLimitExceeded,y=f.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"coinfalcon",name:"CoinFalcon",countries:["GB"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/41822275-ed982188-77f5-11e8-92bb-496bcd14ca52.jpg",api:"https://coinfalcon.com",www:"https://coinfalcon.com",doc:"https://docs.coinfalcon.com",fees:"https://coinfalcon.com/fees",referral:"https://coinfalcon.com/?ref=CFJSVGTUPASB"},api:{public:{get:["markets","markets/{market}/orders","markets/{market}/trades"]},private:{get:["user/accounts","user/orders","user/orders/{id}","user/trades"],post:["user/orders"],delete:["user/orders/{id}"]}},fees:{trading:{tierBased:!0,maker:0,taker:.002}},precision:{amount:8,price:8}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=this.safeValue(r,"data"),s=[],o=0;o<a.length;o++)c=a[o],u=c.name.split("-"),d=n(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(c,"size_precision"),price:this.safeInteger(c,"price_precision")},s.push({id:c.name,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:!0,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"name"),i=this.safeSymbol(r,t,"-"),n=this.milliseconds(),a=parseFloat(e.last_price);return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:this.safeFloat(e,"change_in_24h"),percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(r);case 5:return n=e.sent,e.abrupt("return",n[t]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarkets(r);case 6:for(n=e.sent,a=this.safeValue(n,"data"),s={},o=0;o<a.length;o++)c=this.parseTicker(a[o]),u=c.symbol,s[u]=c;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={market:this.marketId(t),level:"3"},e.next=7,this.publicGetMarketsMarketOrders(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","size"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"size"),a=t.symbol,s=void 0;void 0!==i&&void 0!==n&&(s=parseFloat(this.costToPrecision(a,i*n)));var o=this.safeString(e,"id"),c=this.safeString(e,"side"),u=this.safeString(e,"order_id"),d=void 0,h=this.safeFloat(e,"fee");if(void 0!==h){var l=this.safeString(e,"fee_currency_code");d={cost:h,currency:this.safeCurrencyCode(l)}}return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:a,id:o,order:u,type:void 0,side:c,takerOrMaker:void 0,price:i,amount:n,cost:s,fee:d}}},{key:"fetchMyTrades",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=14,this.privateGetUserTrades(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==r&&(o.since=this.iso8601(r)),e.next=10,this.publicGetMarketsMarketTrades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserAccounts(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data"),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"currency_code"),u=this.safeCurrencyCode(c),d={free:this.safeFloat(o,"available_balance"),used:this.safeFloat(o,"hold_balance"),total:this.safeFloat(o,"balance")},n[u]=d;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({fulfilled:"closed",canceled:"canceled",pending:"open",open:"open",partially_filled:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.parse8601(this.safeString(e,"created_at")),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"size"),o=this.safeFloat(e,"size_filled"),c=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeString(e,"operation_type");void 0!==u&&(u=(u=u.split("_"))[0]);var d=this.safeString(e,"order_type"),h=this.safeValue(e,"post_only");return this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,status:c,symbol:i,type:u,timeInForce:void 0,postOnly:h,side:d,price:a,stopPrice:void 0,cost:void 0,amount:s,filled:o,remaining:void 0,trades:void 0,fee:void 0,info:e,lastTradeTimestamp:void 0,average:void 0})}},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={market:c.id,size:this.amountToPrecision(t,a),order_type:n},"limit"===r&&(s=this.priceToPrecision(t,s),u.price=s.toString()),u.operation_type=r+"_order",e.next=10,this.privatePostUserOrders(this.extend(u,o));case 10:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={id:t},e.next=7,this.privateDeleteUserOrdersId(this.extend(a,n));case 7:return s=e.sent,o=this.market(r),c=this.safeValue(s,"data",{}),e.abrupt("return",this.parseOrder(c,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetUserOrdersId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),void 0!==r&&(s.since_time=this.iso8601(r)),e.next=12,this.privateGetUserOrders(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),d=this.filterByArray(u,"status",["pending","open","partially_filled"],!1),e.abrupt("return",this.parseOrders(d,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):a=this.json(o);var c=this.seconds().toString(),u=[c,r,s].join("|");a&&(u+="|"+a);var d=this.hmac(this.encode(u),this.encode(this.secret));n={"CF-API-KEY":this.apiKey,"CF-API-TIMESTAMP":c,"CF-API-SIGNATURE":d,"Content-Type":"application/json"}}var h=this.urls.api+s;return{url:h,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(!(e<400))throw new(this.safeValue({401:v,429:m},e,p))(a)}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.InsufficientFunds,p=l.ExchangeError,v=l.InvalidNonce,m=l.InvalidOrder,y=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinfloor",name:"coinfloor",rateLimit:1e3,countries:["UK"],has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchLedger:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153925-ef265e80-c2c0-11ea-91b5-020c804b90e0.jpg",api:"https://webapi.coinfloor.co.uk/v2/bist",www:"https://www.coinfloor.co.uk",doc:["https://github.com/coinfloor/api","https://www.coinfloor.co.uk/api"]},requiredCredentials:{apiKey:!0,secret:!1,password:!0,uid:!0},api:{public:{get:["{id}/ticker/","{id}/order_book/","{id}/transactions/"]},private:{post:["{id}/balance/","{id}/user_transactions/","{id}/open_orders/","{symbol}/cancel_order/","{id}/buy/","{id}/sell/","{id}/buy_market/","{id}/sell_market/","{id}/estimate_sell_market/","{id}/estimate_buy_market/"]}},markets:{"BTC/GBP":{id:"XBT/GBP",symbol:"BTC/GBP",base:"BTC",quote:"GBP",baseId:"XBT",quoteId:"GBP",precision:{price:0,amount:4}},"BTC/EUR":{id:"XBT/EUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR",precision:{price:0,amount:4}}},exceptions:{exact:{"You have insufficient funds.":f,"Tonce is out of sequence.":v}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:if(r=void 0,n=t,void 0!==this.safeString(t,"symbol")&&(r=this.market(t.symbol),n=this.omit(t,"symbol")),(a=this.safeString(t,"id"))in this.markets_by_id&&(r=this.markets_by_id[a]),void 0!==r){e.next=11;break}throw new y(this.id+" fetchBalance() requires a symbol param");case 11:return s={id:r.id},e.next=14,this.privatePostIdBalance(this.extend(s,n));case 14:return o=e.sent,c={info:o},u=r.base,d=r.quote,h=this.safeStringLower(r,"baseId"),l=this.safeStringLower(r,"quoteId"),c[u]={free:this.safeFloat(o,h+"_available"),used:this.safeFloat(o,h+"_reserved"),total:this.safeFloat(o,h+"_balance")},c[d]={free:this.safeFloat(o,l+"_available"),used:this.safeFloat(o,l+"_reserved"),total:this.safeFloat(o,l+"_balance")},e.abrupt("return",this.parseBalance(c));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetIdOrderBook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"vwap"),a=this.safeFloat(e,"volume"),s=void 0;void 0!==n&&(s=a*n);var o=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:n,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:a,quoteVolume:s,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},e.next=7,this.publicGetIdTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=void 0;void 0!==n&&void 0!==a&&(s=n*a);var o=void 0;return void 0!==t&&(o=t.symbol),{info:e,id:i,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:o,type:void 0,side:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},e.next=9,this.publicGetIdTransactions(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,void 0===t){e.next=11;break}if(void 0!==(s=this.market(t))){e.next=11;break}throw new y(this.id+" fetchTransactions() requires a code argument (a market symbol)");case 11:return o={id:s.id,limit:n},e.next=14,this.privatePostIdUserTransactions(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseLedger(c,void 0,r,void 0));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryStatus",value:function(e){return this.safeString({completed:"ok"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({0:"transaction",1:"transaction",2:"trade"},e,e)}},{key:"parseLedgerEntry",value:function(e){for(var t=Object.keys(e),r=void 0,i=void 0,n=void 0,a=void 0,s=0;s<t.length;s++){var o=t[s];if(o.indexOf("_")>0){var c=o.split("_"),u=c.length;if(2===u){var d=this.safeFloat(e,c[0]),h=this.safeFloat(e,c[1]);void 0!==d&&void 0!==h&&(r=c[0],i=c[1],n=d,a=h)}}}var l=this.safeCurrencyCode(r),f=this.safeCurrencyCode(i),p=this.parseLedgerEntryType(this.safeString(e,"type")),v=this.safeString(e,"id"),m=this.parse8601(this.safeString(e,"datetime")),y=void 0,g=this.safeFloat(e,"fee"),b={id:void 0,timestamp:m,datetime:this.iso8601(m),amount:void 0,direction:void 0,currency:void 0,type:p,referenceId:v,referenceAccount:void 0,before:void 0,after:void 0,status:"ok",fee:y,info:e};if("trade"===p)return void 0!==g&&(y={cost:g,currency:f}),[this.extend(b,{currency:l,amount:Math.abs(n),direction:n>0?"in":"out"}),this.extend(b,{currency:f,amount:Math.abs(a),direction:a>0?"in":"out",fee:y})];var k=0===n?a:n,x=0===n?f:l,w=k>0?"in":"out";return void 0!==g&&(y={cost:g,currency:x}),this.extend(b,{currency:x,amount:Math.abs(k),direction:w,fee:y})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c={id:this.marketId(t)},u="privatePostId"+this.capitalize(n),"market"===r?(c.quantity=a,u+="Market"):(c.price=s,c.amount=a),e.next=9,this[u](this.extend(c,o));case 9:return d=e.sent,h=this.parse8601(this.safeString(d,"datetime")),e.abrupt("return",{id:this.safeString(d,"id"),clientOrderId:void 0,datetime:this.iso8601(h),timestamp:h,type:r,price:this.safeFloat(d,"price"),remaining:this.safeFloat(d,"amount"),info:d});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:{},void 0!==r){e.next=4;break}throw new y(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(r),a={symbol:n.id,id:t},e.next=10,this.privatePostSymbolCancelOrder(a);case 10:if("false"!==(s=e.sent)){e.next=13;break}throw new m(this.id+" cancel was rejected");case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"datetime")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=void 0,s=this.safeString(e,"status"),o=this.safeString(e,"type");"0"===o?a="buy":"1"===o&&(a="sell");var c=void 0;void 0!==t&&(c=t.symbol);var u=this.safeString(e,"id");return this.safeOrder({info:e,id:u,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:s,symbol:c,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:i,stopPrice:void 0,amount:void 0,filled:void 0,remaining:n,cost:void 0,fee:void 0,average:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new y(this.id+" fetchOpenOrders() requires a symbol param");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={id:s.id},e.next=12,this.privatePostIdOpenOrders(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n,{status:"open"}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(!(e<400)&&void 0!==s){var u=this.safeString(s,"error_msg"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),new p(d)}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce();a=this.urlencode(this.extend({nonce:c},o));var u=this.uid+"/"+this.apiKey+":"+this.password,d=this.decode(this.stringToBase64(u));n={"Content-Type":"application/x-www-form-urlencoded",Authorization:"Basic "+d}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10).ExchangeError;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"coingi",name:"Coingi",rateLimit:1e3,countries:["PA","BG","CN","US"],has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{referral:"https://www.coingi.com/?r=XTPPMC",logo:"https://user-images.githubusercontent.com/1294454/28619707-5c9232a8-7212-11e7-86d6-98fe5d15cc6e.jpg",api:{www:"https://coingi.com",current:"https://api.coingi.com",user:"https://api.coingi.com"},www:"https://coingi.com",doc:"https://coingi.docs.apiary.io"},api:{www:{get:[""]},current:{get:["order-book/{pair}/{askCount}/{bidCount}/{depth}","transactions/{pair}/{maxCount}","24hour-rolling-aggregation"]},user:{post:["balance","add-order","cancel-order","orders","transactions","create-crypto-withdrawal"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,LTC:.01,DOGE:2,PPC:.02,VTC:.2,NMC:2,DASH:.002,USD:10,EUR:10},deposit:{BTC:0,LTC:0,DOGE:0,PPC:0,VTC:0,NMC:0,DASH:0,USD:5,EUR:1}}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.wwwGet(t);case 3:for(r=e.sent,a=r.split('do=currencyPairSelector-selectCurrencyPair" class="active">'),s=a[1].split('<div class="currency-pair-label">'),o=[],c=1;c<s.length;c++)u=s[c],d=u.split("</div>"),h=(h=(h=d[0]).replace("/","-")).toLowerCase(),l=h.split("-"),f=n(l,2),p=f[0],v=f[1],m=p.toUpperCase(),y=v.toUpperCase(),m=this.safeCurrencyCode(m),y=this.safeCurrencyCode(y),g=m+"/"+y,b={amount:8,price:8},o.push({id:h,symbol:g,base:m,quote:y,baseId:p,quoteId:v,info:h,active:!0,precision:b,limits:{amount:{min:Math.pow(10,-b.amount),max:Math.pow(10,b.amount)},price:{min:Math.pow(10,-b.price),max:void 0},cost:{min:0,max:void 0}}});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.loadMarkets();case 3:for(r=[],n=Object.keys(this.currencies),a=0;a<n.length;a++)s=n[a],r.push(s.toLowerCase());return o={currencies:r.join(",")},e.next=9,this.userPostBalance(this.extend(o,t));case 9:for(c=e.sent,u={info:c},d=0;d<c.length;d++)h=c[d],l=this.safeString(h.currency,"name"),f=this.safeCurrencyCode(l),(p=this.account()).free=this.safeFloat(h,"available"),v=this.safeFloat(h,"blocked"),m=this.safeFloat(h,"inOrders"),y=this.safeFloat(h,"withdrawing"),p.used=this.sum(v,m,y),u[f]=p;return e.abrupt("return",this.parseBalance(u));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:512,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id,depth:32,askCount:r,bidCount:r},e.next=8,this.currentGetOrderBookPairAskCountBidCountDepth(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price","baseAmount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;return void 0!==t&&(i=t.symbol),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:void 0,close:void 0,last:void 0,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"counterVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.currentGet24hourRollingAggregation(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],c=o.currencyPair.base.toUpperCase(),u=o.currencyPair.counter.toUpperCase(),h=void 0,(d=c+"/"+u)in this.markets&&(h=this.markets[d]),a[d]=this.parseTicker(o,h);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(void 0,r);case 5:if(n=e.sent,!(t in n)){e.next=8;break}return e.abrupt("return",n[t]);case 8:throw new f(this.id+" return did not contain "+t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"price"),i=this.safeFloat(e,"amount"),n=void 0;void 0!==r&&void 0!==i&&(n=r*i);var a=this.safeInteger(e,"timestamp"),s=this.safeString(e,"id"),o=this.safeString(e,"currencyPair"),c=this.safeSymbol(o,t);return{id:s,info:e,timestamp:a,datetime:this.iso8601(a),symbol:c,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:r,amount:i,cost:n,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id,maxCount:128},e.next=9,this.currentGetTransactionsPairMaxCount(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={currencyPair:this.marketId(t),volume:a,price:s,orderType:"buy"===n?0:1},e.next=7,this.userPostAddOrder(this.extend(c,o));case 7:return u=e.sent,e.abrupt("return",{info:u,id:u.result});case 9:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.userPostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"current",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];"www"!==t&&(s+="/"+t+"/"+this.implodeParams(e,i));var o=this.omit(i,this.extractParams(e));if("current"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("user"===t){this.checkRequiredCredentials();var c=this.nonce(),u=this.extend({token:this.apiKey,nonce:c},o),d=c.toString()+"$"+this.apiKey;u.signature=this.hmac(this.encode(d),this.encode(this.secret)),a=this.json(u),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"current",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if("string"===typeof(c=e.sent)){e.next=11;break}if(!("errors"in c)){e.next=11;break}throw new f(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinmarketcap",name:"CoinMarketCap",rateLimit:1e4,version:"v1",countries:["US"],has:{cancelOrder:!1,CORS:!0,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,editOrder:!1,privateAPI:!1,fetchBalance:!1,fetchCurrencies:!0,fetchL2OrderBook:!1,fetchMarkets:!0,fetchOHLCV:!1,fetchOrderBook:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!1},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182086-1cd4cd00-c2ec-11ea-9ec4-d0cf2a2abf62.jpg",api:{public:"https://api.coinmarketcap.com",files:"https://files.coinmarketcap.com",charts:"https://graph.coinmarketcap.com"},www:"https://coinmarketcap.com",doc:"https://coinmarketcap.com/api"},requiredCredentials:{apiKey:!1,secret:!1},api:{files:{get:["generated/stats/global.json"]},graphs:{get:["currencies/{name}/"]},public:{get:["ticker/","ticker/{id}/","global/"]}},currencyCodes:["AUD","BRL","CAD","CHF","CNY","EUR","GBP","HKD","IDR","INR","JPY","KRW","MXN","RUB","USD","BTC","ETH","LTC"]})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:void 0,r.length>2&&void 0!==r[2]?r[2]:{},new l("Fetching order books is not supported by the API of "+this.id);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"currencyCode",value:function(e,t){return this.safeValue({ACChain:"ACChain",AdCoin:"AdCoin",BatCoin:"BatCoin","BigONE Token":"BigONE Token",Bitgem:"Bitgem",BlazeCoin:"BlazeCoin",BlockCAT:"BlockCAT","Blocktrade Token":"Blocktrade Token","BOX Token":"BOX Token",Catcoin:"Catcoin",CanYaCoin:"CanYaCoin",CryptoBossCoin:"CryptoBossCoin",Comet:"Comet",CPChain:"CPChain",CrowdCoin:"CrowdCoin",Cryptaur:"Cryptaur",Cubits:"Cubits","DAO.Casino":"DAO.Casino",DefiBox:"DefiBox","E-Dinar Coin":"E-Dinar Coin",EDRcoin:"EDRcoin",ENTCash:"ENTCash",FairCoin:"FairCoin","Fabric Token":"Fabric Token",GHOSTPRISM:"GHOSTPRISM","Global Tour Coin":"Global Tour Coin",GuccioneCoin:"GuccioneCoin",HarmonyCoin:"HarmonyCoin","Harvest Masternode Coin":"Harvest Masternode Coin","HOT Token":"HOT Token","Hydro Protocol":"Hydro Protocol",Huncoin:"Huncoin",iCoin:"iCoin","Infinity Economics":"Infinity Economics","IQ.cash":"IQ.cash","KingN Coin":"KingN Coin",LiteBitcoin:"LiteBitcoin",Maggie:"Maggie","Menlo One":"Menlo One","Mobilian Coin":"Mobilian Coin",Monarch:"Monarch","MTC Mesh Network":"MTC Mesh Network",IOTA:"IOTA",NetCoin:"NetCoin",PCHAIN:"PCHAIN",Penta:"Penta",Plair:"Plair",PlayChip:"PlayChip",Polcoin:"Polcoin",PutinCoin:"PutinCoin",Rcoin:"Rcoin",SBTCT:"SiamBitcoin","Super Bitcoin":"Super Bitcoin",TerraCredit:"TerraCredit",Themis:"Themis","UNI COIN":"UNI COIN","UNICORN Token":"UNICORN Token",Universe:"Universe"},t,e)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r={limit:0},e.next=4,this.publicGetTicker(this.extend(r,t));case 4:for(n=e.sent,a=[],s=0;s<n.length;s++)for(o=n[s],c=this.currencyCodes,u=0;u<c.length;u++)d=c[u],h=d.toLowerCase(),l=o.id,f=this.currencyCode(o.symbol,o.name),p=f+"/"+d,v=l+"/"+h,a.push({id:v,symbol:p,base:f,quote:d,baseId:l,quoteId:h,info:o,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchGlobal",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"USD",e.next=3,this.loadMarkets();case 3:return r={},t&&(r.convert=t),e.next=7,this.publicGetGlobal(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"last_updated");void 0===r&&(r=this.milliseconds());var i=this.safeFloat(e,"percent_change_24h"),n=void 0,a=void 0,s=void 0;if(void 0!==t){a=t.symbol;var o="price_"+t.quoteId;n=this.safeFloat(e,o);var c="24h_volume_"+t.quoteId;s=this.safeFloat(e,c)}return{symbol:a,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:i,average:void 0,baseVolume:void 0,quoteVolume:s,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:"USD",r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n={limit:1e4},t&&(n.convert=t),e.next=8,this.publicGetTicker(this.extend(n,r));case 8:for(a=e.sent,s={},o=0;o<a.length;o++)c=a[o],u=t.toLowerCase(),d=c.id+"/"+u,h=d,l=void 0,d in this.markets_by_id&&(l=this.markets_by_id[d],h=l.symbol),s[h]=this.parseTicker(c,l);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={convert:n.quote,id:n.baseId},e.next=7,this.publicGetTickerId(this.extend(a,r));case 7:return s=e.sent,o=s[0],e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},r={limit:0},e.next=4,this.publicGetTicker(this.extend(r,t));case 4:for(n=e.sent,a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"symbol"),u=this.safeString(o,"name"),d=8,h=this.currencyCode(c,u),a[h]={id:c,code:h,info:o,name:u,active:!0,fee:void 0,precision:d,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},price:{min:Math.pow(10,-d),max:Math.pow(10,d)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return Object.keys(o).length&&(s+="?"+this.urlencode(o)),{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("error"in(c=e.sent))){e.next=11;break}if(!c.error){e.next=11;break}throw new l(this.id+" "+this.json(c));case 11:return e.abrupt("return",c);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidOrder,m=l.OrderNotFound,y=l.RateLimitExceeded,g=l.InsufficientFunds;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinmate",name:"CoinMate",countries:["GB","CZ","EU"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460806-1c9f3f00-c616-11ea-8c46-a77018a8f3f4.jpg",api:"https://coinmate.io/api",www:"https://coinmate.io",fees:"https://coinmate.io/fees",doc:["https://coinmate.docs.apiary.io","https://coinmate.io/developers"],referral:"https://coinmate.io?referral=YTFkM1RsOWFObVpmY1ZjMGREQmpTRnBsWjJJNVp3PT0"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["orderBook","ticker","transactions","tradingPairs"]},private:{post:["balances","bitcoinCashWithdrawal","bitcoinCashDepositAddresses","bitcoinDepositAddresses","bitcoinWithdrawal","bitcoinWithdrawalFees","buyInstant","buyLimit","cancelOrder","cancelOrderWithInfo","createVoucher","dashDepositAddresses","dashWithdrawal","ethereumWithdrawal","ethereumDepositAddresses","litecoinWithdrawal","litecoinDepositAddresses","openOrders","order","orderHistory","orderById","pusherAuth","redeemVoucher","replaceByBuyLimit","replaceByBuyInstant","replaceBySellLimit","replaceBySellInstant","rippleDepositAddresses","rippleWithdrawal","sellInstant","sellLimit","transactionHistory","traderFees","tradeHistory","transfer","transferHistory","unconfirmedBitcoinDeposits","unconfirmedBitcoinCashDeposits","unconfirmedDashDeposits","unconfirmedEthereumDeposits","unconfirmedLitecoinDeposits","unconfirmedRippleDeposits"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.0012,taker:.0025,tiers:{taker:[[0,.0025],[1e4,.0023],[1e5,.0021],[25e4,.002],[5e5,.0015],[1e6,.0013],[3e6,.001],[15e6,5e-4]],maker:[[0,.0012],[1e4,.0011],[1e6,.001],[25e4,8e-4],[5e5,5e-4],[1e6,3e-4],[3e6,2e-4],[15e6,0]]}},promotional:{trading:{maker:5e-4,taker:.0015,tiers:{taker:[[0,.0015],[1e4,.14/100],[1e5,.0013],[25e4,.0012],[5e5,.0011],[1e6,.001],[3e6,8e-4],[15e6,5e-4]],maker:[[0,5e-4],[1e4,4e-4],[1e6,3e-4],[25e4,2e-4],[5e5,0],[1e6,0],[3e6,0],[15e6,0]]}}}},options:{promotionalMarkets:["ETH/EUR","ETH/CZK","ETH/BTC","XRP/EUR","XRP/CZK","XRP/BTC","DASH/EUR","DASH/CZK","DASH/BTC","BCH/EUR","BCH/CZK","BCH/BTC"]},exceptions:{exact:{"No order with given ID":m},broad:{"Not enough account balance available":g,"Incorrect order ID":v,"Minimum Order Size ":v,"TOO MANY REQUESTS":y}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"name"),u=this.safeString(o,"firstCurrency"),d=this.safeString(o,"secondCurrency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(this.options,"promotionalMarkets",[]),v=this.safeValue(this.fees,"trading"),this.inArray(f,p)&&(m=this.safeValue(this.fees,"promotional",{}),v=this.safeValue(m,"trading",v)),a.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:void 0,maker:v.maker,taker:v.taker,info:o,precision:{price:this.safeInteger(o,"priceDecimals"),amount:this.safeInteger(o,"lotDecimals")},limits:{amount:{min:this.safeFloat(o,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalances(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),d=this.safeValue(n,c),(h=this.account()).free=this.safeFloat(d,"available"),h.used=this.safeFloat(d,"reserved"),h.total=this.safeFloat(d,"balance"),a[u]=h;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={currencyPair:this.marketId(t),groupByPriceLimit:"False"},e.next=7,this.publicGetOrderBook(this.extend(n,r));case 7:return a=e.sent,s=a.data,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o,"bids","asks","price","amount"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n={currencyPair:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeValue(a,"data"),o=this.safeTimestamp(s,"timestamp"),c=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),vwap:void 0,askVolume:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"amount"),quoteVolume:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={limit:1e3},void 0!==n&&(s.limit=n),void 0!==r&&(s.timestampFrom=r),void 0!==t&&(s.currency=this.currencyId(t)),e.next=12,this.privatePostTransferHistory(this.extend(s,a));case 12:return o=e.sent,c=o.data,e.abrupt("return",this.parseTransactions(c,void 0,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({COMPLETED:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeFloat(e,"amount"),n=this.safeFloat(e,"fee"),a=this.safeString(e,"txid"),s=this.safeString(e,"destination"),o=this.safeString(e,"destinationTag"),c=this.safeString(e,"amountCurrency"),u=this.safeCurrencyCode(c,t),d=this.safeStringLower(e,"transferType"),h=this.parseTransactionStatus(this.safeString(e,"transferStatus")),l=this.safeString(e,"transactionId");return{id:l,timestamp:r,datetime:this.iso8601(r),currency:u,amount:i,type:d,txid:a,address:s,tag:o,status:h,fee:{cost:n,currency:u},info:e}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=1e3),s={limit:n},void 0!==t&&(o=this.market(t),s.currencyPair=o.id),void 0!==r&&(s.timestampFrom=r),e.next=12,this.privatePostTradeHistory(this.extend(s,a));case 12:return c=e.sent,u=c.data,e.abrupt("return",this.parseTrades(u,void 0,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currencyPair");t=this.safeMarket(r,t,"_");var i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=void 0;void 0!==n&&void 0!==i&&(a=i*n);var s=this.safeStringLower2(e,"type","tradeType"),o=this.safeStringLower(e,"orderType"),c=this.safeString(e,"orderId"),u=this.safeString(e,"transactionId"),d=this.safeInteger2(e,"timestamp","createdTimestamp"),h=void 0,l=this.safeFloat(e,"fee");void 0!==l&&(h={cost:l,currency:t.quote});var f=this.safeString(e,"feeType");return f="MAKER"===f?"maker":"taker",{id:u,info:e,timestamp:d,datetime:this.iso8601(d),symbol:t.symbol,type:o,side:s,order:c,takerOrMaker:f,price:i,amount:n,cost:a,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currencyPair:s.id,minutesIntoHistory:10},e.next=9,this.publicGetTransactions(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.privatePostOpenOrders(this.extend({},n));case 6:return a=e.sent,s={status:"open"},e.abrupt("return",this.parseOrders(a.data,void 0,t,r,s));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currencyPair:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privatePostOrderHistory(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseOrders(c.data,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({FILLED:"closed",CANCELLED:"canceled",PARTIALLY_FILLED:"open",OPEN:"open"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({LIMIT:"limit",MARKET:"market"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"timestamp"),n=this.safeStringLower(e,"type"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"originalAmount"),o=this.safeFloat(e,"remainingAmount");void 0===o&&(o=this.safeFloat(e,"amount"));var c=this.parseOrderStatus(this.safeString(e,"status")),u=this.parseOrderType(this.safeString(e,"orderTradeType")),d=void 0,h=void 0;void 0!==s&&void 0!==o&&(d=Math.max(s-o,0),0===o&&(c="closed"),void 0!==a&&(h=d*a));var l=this.safeFloat(e,"avgPrice"),f=this.safeString(e,"currencyPair"),p=this.safeSymbol(f,t,"_"),v=this.safeString(e,"clientOrderId"),m=this.safeFloat(e,"stopPrice");return{id:r,clientOrderId:v,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:p,type:u,timeInForce:void 0,postOnly:void 0,side:n,price:a,stopPrice:m,amount:s,cost:h,average:l,filled:d,remaining:o,status:c,trades:void 0,info:e,fee:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c="privatePost"+this.capitalize(n),u={currencyPair:this.marketId(t)},"market"===r?("buy"===n?u.total=this.amountToPrecision(t,a):u.amount=this.amountToPrecision(t,a),c+="Instant"):(u.amount=this.amountToPrecision(t,a),u.price=this.priceToPrecision(t,s),c+=this.capitalize(r)),e.next=9,this[c](this.extend(u,o));case 9:return d=e.sent,h=this.safeString(d,"data"),e.abrupt("return",{info:d,id:h});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},s=void 0,r&&(s=this.market(r)),e.next=9,this.privatePostOrderById(this.extend(a,n));case 9:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c,s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},n={orderId:t},e.next=5,this.privatePostCancelOrderWithInfo(this.extend(n,r));case 5:return a=e.sent,e.abrupt("return",{info:a});case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce().toString(),c=o+this.uid+this.apiKey,u=this.hmac(this.encode(c),this.encode(this.secret));a=this.urlencode(this.extend({clientId:this.uid,nonce:o,publicKey:this.apiKey,signature:u.toUpperCase()},i)),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"error"in s&&s.error){var u=this.safeString(s,"errorMessage"),d=this.id+" "+u;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new f(this.id+" "+this.json(s))}if(e>400){if(a){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,a,h),this.throwBroadlyMatchedException(this.exceptions.broad,a,h),new f(h)}throw new f(this.id+" "+a)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.BadRequest,v=l.ExchangeError,m=l.ArgumentsRequired,y=l.OrderNotFound,g=l.OnMaintenance;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinone",name:"CoinOne",countries:["KR"],rateLimit:667,version:"v2",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchClosedOrders:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/38003300-adc12fba-323f-11e8-8525-725f53c4a659.jpg",api:"https://api.coinone.co.kr",www:"https://coinone.co.kr",doc:"https://doc.coinone.co.kr"},requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["orderbook/","trades/","ticker/"]},private:{post:["account/btc_deposit_address/","account/balance/","account/daily_balance/","account/user_info/","account/virtual_account/","order/cancel_all/","order/cancel/","order/limit_buy/","order/limit_sell/","order/complete_orders/","order/limit_orders/","order/order_info/","transaction/auth_number/","transaction/history/","transaction/krw/history/","transaction/btc/","transaction/coin/"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},precision:{price:4,amount:4,cost:8},exceptions:{405:g,104:y,108:f,107:p}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>0&&void 0!==l[0]?l[0]:{},t={currency:"all"},e.next=4,this.publicGetTicker(t);case 4:r=e.sent,n=[],a="krw",s=this.safeCurrencyCode(a),o=Object.keys(r),c=0;case 10:if(!(c<o.length)){e.next=21;break}if(u=o[c],d=this.safeValue(r,u,{}),void 0!==this.safeValue(d,"currency")){e.next=16;break}return e.abrupt("continue",18);case 16:h=this.safeCurrencyCode(u),n.push({id:u,symbol:h+"/"+s,base:h,quote:s,baseId:u,quoteId:a,active:!0});case 18:c++,e.next=10;break;case 21:return e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostAccountBalance(t);case 5:for(r=e.sent,n={info:r},a=this.omit(r,["errorCode","result","normalWallets"]),s=Object.keys(a),o=0;o<s.length;o++)c=s[o],u=a[c],d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeFloat(u,"avail"),h.total=this.safeFloat(u,"balance"),n[d]=h;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={currency:n.id,format:"json"},e.next=8,this.publicGetOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeTimestamp(s,"timestamp"),e.abrupt("return",this.parseOrderBook(s,o,"bid","ask","price","qty"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return n={currency:"all",format:"json"},e.next=7,this.publicGetTicker(this.extend(n,r));case 7:for(a=e.sent,s={},o=Object.keys(a),c=this.safeTimestamp(a,"timestamp"),u=0;u<o.length;u++)d=o[u],h=d,l=void 0,d in this.markets_by_id&&(l=this.markets_by_id[d],h=l.symbol,f=a[d],s[h]=this.parseTicker(f,l),s[h].timestamp=c);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.id,format:"json"},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeFloat(e,"first"),n=this.safeFloat(e,"last"),a=void 0;void 0!==i&&void 0!==n&&(a=this.sum(i,n)/2);var s=this.safeFloat(e,"yesterday_last"),o=void 0,c=void 0;void 0!==n&&void 0!==s&&(o=n-s,0!==s&&(c=o/s*100));var u=void 0!==t?t.symbol:void 0;return{symbol:u,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:i,close:n,last:n,previousClose:s,change:o,percentage:c,average:a,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=void 0!==t?t.symbol:void 0,n=this.safeString(e,"is_ask"),a=this.safeString(e,"type");void 0!==n?"1"===n?a="sell":"0"===n&&(a="buy"):"ask"===a?a="sell":"bid"===a&&(a="buy");var s=this.safeFloat(e,"price"),o=this.safeFloat(e,"qty"),c=void 0;void 0!==s&&void 0!==o&&(c=s*o);var u=this.safeString(e,"orderId"),d=this.safeFloat(e,"fee"),h=void 0;if(void 0!==d){d=Math.abs(d);var l=this.safeFloat(e,"feeRate");l=Math.abs(l);var f=void 0;void 0!==t&&(f="sell"===a?t.quote:t.base),h={cost:d,currency:f,rate:l}}return{id:this.safeString(e,"id"),info:e,timestamp:r,datetime:this.iso8601(r),order:u,symbol:i,type:void 0,side:a,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.id,format:"json"},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"completeOrders",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},"limit"===r){e.next=4;break}throw new v(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c={price:s,currency:this.marketId(t),qty:a},u="privatePostOrder"+this.capitalize(r)+this.capitalize(n),e.next=10,this[u](this.extend(c,o));case 10:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={order_id:t,currency:a.id},e.next=10,this.privatePostOrderOrderInfo(this.extend(s,n));case 10:return o=e.sent,(c=this.safeValue(o,"info",{})).status=this.safeString(c,"status"),e.abrupt("return",this.parseOrder(c,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({live:"open",partially_filled:"open",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeFloat(e,"price"),n=this.safeTimestamp(e,"timestamp"),a=this.safeString(e,"type");"ask"===a?a="sell":"bid"===a&&(a="buy");var s=this.safeFloat(e,"remainQty"),o=this.safeFloat(e,"qty"),c=this.safeString(e,"status");"live"===c&&void 0!==s&&void 0!==o&&s<o&&(c="canceled"),c=this.parseOrderStatus(c);var u=void 0,d=void 0,h=void 0,l=this.safeStringLower(e,"currency");void 0!==l&&(l in this.markets_by_id?t=this.markets_by_id[l]:u=(d=this.safeCurrencyCode(l))+"/"+(h="KRW")),void 0===u&&void 0!==t&&(u=t.symbol,d=t.base,h=t.quote);var f=void 0,p=this.safeFloat(e,"fee");if(void 0!==p){var v="sell"===a?h:d;f={cost:p,rate:this.safeFloat(e,"feeRate"),currency:v}}return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:u,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:i,stopPrice:void 0,cost:void 0,average:void 0,amount:o,filled:void 0,remaining:o,status:c,fee:f,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" allows fetching closed orders with a specific symbol");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id},e.next=12,this.privatePostOrderLimitOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"limitOrders",[]),e.abrupt("return",this.parseOrders(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currency:s.id},e.next=12,this.privatePostOrderCompleteOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"completeOrders",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder() requires a symbol argument. To cancel the order, pass a symbol argument and {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument of cancelOrder.");case 4:if(a=this.safeFloat(n,"price"),s=this.safeFloat(n,"qty"),o=this.safeInteger(n,"is_ask"),void 0!==a&&void 0!==s&&void 0!==o){e.next=9;break}throw new m(this.id+" cancelOrder() requires {'price': 12345, 'qty': 1.2345, 'is_ask': 0} in the params argument.");case 9:return e.next=11,this.loadMarkets();case 11:return c={order_id:t,price:a,qty:s,is_ask:o,currency:this.marketId(r)},e.next=14,this.privatePostOrderCancel(this.extend(c,n));case 14:return u=e.sent,e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c=this.urls.api+"/";if("public"===t)c+=s,Object.keys(o).length&&(c+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),c+=this.version+"/"+s;var u=this.nonce().toString(),d=this.json(this.extend({access_token:this.apiKey,nonce:u},i)),h=this.stringToBase64(d);a=this.decode(h);var l=this.secret.toUpperCase(),f=this.hmac(h,this.encode(l),"sha512");n={"Content-Type":"application/json","X-COINONE-PAYLOAD":h,"X-COINONE-SIGNATURE":f}}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){if(!("result"in s))throw new v(this.id+" "+a);if("success"!==s.result){var u=this.safeString(s,"errorCode"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,d),new v(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"coinspot",name:"CoinSpot",countries:["AU"],rateLimit:1e3,has:{cancelOrder:!1,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28208429-3cacdf9a-6896-11e7-854e-4c79a772a30f.jpg",api:{public:"https://www.coinspot.com.au/pubapi",private:"https://www.coinspot.com.au/api"},www:"https://www.coinspot.com.au",doc:"https://www.coinspot.com.au/api",referral:"https://www.coinspot.com.au/register?code=PJURCU"},api:{public:{get:["latest"]},private:{post:["orders","orders/history","my/coin/deposit","my/coin/send","quote/buy","quote/sell","my/balances","my/orders","my/buy","my/sell","my/buy/cancel","my/sell/cancel","ro/my/balances","ro/my/balances/{cointype}","ro/my/deposits","ro/my/withdrawals","ro/my/transactions","ro/my/transactions/{cointype}","ro/my/transactions/open","ro/my/transactions/{cointype}/open","ro/my/sendreceive","ro/my/affiliatepayments","ro/my/referralpayments"]}},markets:{"BTC/AUD":{id:"btc",symbol:"BTC/AUD",base:"BTC",quote:"AUD",baseId:"btc",quoteId:"aud"},"ETH/AUD":{id:"eth",symbol:"ETH/AUD",base:"ETH",quote:"AUD",baseId:"eth",quoteId:"aud"},"XRP/AUD":{id:"xrp",symbol:"XRP/AUD",base:"XRP",quote:"AUD",baseId:"xrp",quoteId:"aud"},"LTC/AUD":{id:"ltc",symbol:"LTC/AUD",base:"LTC",quote:"AUD",baseId:"ltc",quoteId:"aud"},"DOGE/AUD":{id:"doge",symbol:"DOGE/AUD",base:"DOGE",quote:"AUD",baseId:"doge",quoteId:"aud"},"RFOX/AUD":{id:"rfox",symbol:"RFOX/AUD",base:"RFOX",quote:"AUD",baseId:"rfox",quoteId:"aud"},"POWR/AUD":{id:"powr",symbol:"POWR/AUD",base:"POWR",quote:"AUD",baseId:"powr",quoteId:"aud"},"NEO/AUD":{id:"neo",symbol:"NEO/AUD",base:"NEO",quote:"AUD",baseId:"neo",quoteId:"aud"},"TRX/AUD":{id:"trx",symbol:"TRX/AUD",base:"TRX",quote:"AUD",baseId:"trx",quoteId:"aud"},"EOS/AUD":{id:"eos",symbol:"EOS/AUD",base:"EOS",quote:"AUD",baseId:"eos",quoteId:"aud"},"XLM/AUD":{id:"xlm",symbol:"XLM/AUD",base:"XLM",quote:"AUD",baseId:"xlm",quoteId:"aud"},"RHOC/AUD":{id:"rhoc",symbol:"RHOC/AUD",base:"RHOC",quote:"AUD",baseId:"rhoc",quoteId:"aud"},"GAS/AUD":{id:"gas",symbol:"GAS/AUD",base:"GAS",quote:"AUD",baseId:"gas",quoteId:"aud"}},commonCurrencies:{DRK:"DASH"},options:{fetchBalance:"private_post_my_balances"}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeString(this.options,"fetchBalance","private_post_my_balances"),e.next=6,this[r](t);case 6:if(n=e.sent,a={info:n},s=this.safeValue2(n,"balance","balances"),Array.isArray(s))for(o=0;o<s.length;o++)for(c=s[o],u=Object.keys(c),d=0;d<u.length;d++)h=u[d],l=c[h],f=this.safeCurrencyCode(h),(p=this.account()).total=this.safeFloat(l,"balance"),a[f]=p;else for(v=Object.keys(s),m=0;m<v.length;m++)y=v[m],g=this.safeCurrencyCode(y),(b=this.account()).total=this.safeFloat(s,y),a[g]=b;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={cointype:n.id},e.next=8,this.privatePostOrders(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"buyorders","sellorders","rate","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetLatest(r);case 5:return n=e.sent,a=(a=this.marketId(t)).toLowerCase(),s=n.prices[a],o=this.milliseconds(),c=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:void 0,low:void 0,bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={cointype:s.id},e.next=9,this.privatePostOrdersHistory(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"rate"),i=this.safeFloat(e,"amount"),n=this.safeFloat(e,"total");void 0===n&&void 0!==r&&void 0!==i&&(n=r*i);var a=this.safeInteger(e,"solddate"),s=this.safeString(e,"market"),o=this.safeSymbol(s,t,"/");return{info:e,id:void 0,symbol:o,timestamp:a,datetime:this.iso8601(a),order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:r,amount:i,cost:n,fee:void 0}}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if(c="privatePostMy"+this.capitalize(n),"market"!==r){e.next=7;break}throw new f(this.id+" allows limit orders only");case 7:return u={cointype:this.marketId(t),amount:a,rate:s},e.next=10,this[c](this.extend(u,o));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},"buy"===(n=this.safeString(r,"side"))||"sell"===n){e.next=5;break}throw new p(this.id+' cancelOrder() requires a side parameter, "buy" or "sell"');case 5:return r=this.omit(r,"side"),a="privatePostMy"+this.capitalize(n)+"Cancel",s={id:t},e.next=10,this[a](this.extend(s,r));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!this.apiKey)throw new v(this.id+" requires apiKey for all requests");var s=this.urls.api[t]+"/"+e;if("private"===t){this.checkRequiredCredentials();var o=this.nonce();a=this.json(this.extend({nonce:o},i)),n={"Content-Type":"application/json",key:this.apiKey,sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.BadRequest,v=l.InvalidNonce,m=l.RequestTimeout,y=l.ExchangeNotAvailable,g=l.InsufficientFunds,b=l.OrderNotFound,k=l.InvalidOrder,x=l.DDoSProtection,w=l.AuthenticationError,_=l.BadSymbol;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"crex24",name:"CREX24",countries:["EE"],rateLimit:500,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!1,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w","1M":"1mo"},urls:{logo:"https://user-images.githubusercontent.com/1294454/47813922-6f12cc00-dd5d-11e8-97c6-70f957712d47.jpg",api:"https://api.crex24.com",www:"https://crex24.com",referral:"https://crex24.com/?refid=slxsjsjtil8xexl9hksr",doc:"https://docs.crex24.com/trade-api/v2",fees:"https://crex24.com/fees"},api:{public:{get:["currencies","instruments","tickers","recentTrades","orderBook","ohlcv"]},trading:{get:["orderStatus","orderTrades","activeOrders","orderHistory","tradeHistory","tradeFee","moneyTransferStatus"],post:["placeOrder","modifyOrder","cancelOrdersById","cancelOrdersByInstrument","cancelAllOrders"]},account:{get:["balance","depositAddress","moneyTransfers","moneyTransferStatus","previewWithdrawal"],post:["withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.001,maker:-1e-4},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{BCC:"BCH",BIT:"BitMoney",BULL:"BuySell",CREDIT:"TerraCredit",GHOST:"GHOSTPRISM",IQ:"IQ.Cash",PUT:"PutinCoin",SBTC:"SBTCT",UNI:"Universe",YOYO:"YOYOW"},options:{fetchOrdersMethod:"tradingGetOrderHistory",fetchClosedOrdersMethod:"tradingGetOrderHistory",fetchTickersMethod:"publicGetTicker24hr",defaultTimeInForce:"GTC",hasAlreadyAuthenticatedSuccessfully:!1,warnOnFetchOpenOrdersWithoutSymbol:!0,parseOrderToPrecision:!1,newOrderRespType:"RESULT"},exceptions:{exact:{"Parameter 'filter' contains invalid value.":p,"Mandatory parameter 'instrument' is missing.":p,"The value of parameter 'till' must be greater than or equal to the value of parameter 'from'.":p,"Failed to verify request signature.":w,"Nonce error. Make sure that the value passed in the 'X-CREX24-API-NONCE' header is greater in each consecutive request than in the previous one for the corresponding API-Key provided in 'X-CREX24-API-KEY' header.":v,"Market orders are not supported by the instrument currently.":k,"Parameter 'instrument' contains invalid value.":_},broad:{"try again later":y,"API Key":w,"Insufficient funds":g,"has been delisted.":_,"is currently suspended.":_,"Mandatory parameter":p}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetInstruments(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeString(s,"baseCurrency"),u=this.safeString(s,"quoteCurrency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeValue(s,"tickSize"),p=this.safeValue(s,"minPrice"),v=this.safeFloat(s,"minVolume"),m={amount:this.precisionFromString(this.numberToString(v)),price:this.precisionFromString(this.numberToString(f))},y="active"===s.state,n.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,info:s,active:y,precision:m,limits:{amount:{min:v,max:void 0},price:{min:p,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeCurrencyCode(o),u=this.safeInteger(s,"withdrawalPrecision"),d=this.safeValue(s,"BaseAddress"),h=s.depositsAllowed&&s.withdrawalsAllowed&&!s.isDelisted,l=s.isFiat?"fiat":"crypto",n[c]={id:o,code:c,address:d,info:s,type:l,name:this.safeString(s,"name"),active:h,fee:this.safeFloat(s,"flatWithdrawalFee"),precision:u,limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},price:{min:Math.pow(10,-u),max:Math.pow(10,u)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(s,"minDeposit"),max:void 0},withdraw:{min:this.safeFloat(s,"minWithdrawal"),max:this.safeFloat(s,"maxWithdrawal")}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return r={},e.next=6,this.accountGetBalance(this.extend(r,t));case 6:for(n=e.sent,a={info:n},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"available"),d.used=this.safeFloat(o,"reserved"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={instrument:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"buyLevels","sellLevels","price","volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),i=this.safeString(e,"instrument"),n=this.safeSymbol(i,t,"-"),a=this.safeFloat(e,"last");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"percentChange"),average:void 0,baseVolume:this.safeFloat(e,"baseVolume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={instrument:n.id},e.next=7,this.publicGetTickers(this.extend(a,r));case 7:if(s=e.sent,!(s.length<1)){e.next=11;break}throw new f(this.id+" fetchTicker could not load quotes for symbol "+t);case 11:return e.abrupt("return",this.parseTicker(s[0],n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.instrument=a.join(",")),e.next=8,this.publicGetTickers(this.extend(n,r));case 8:return s=e.sent,e.abrupt("return",this.parseTickers(s,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"timestamp")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"volume"),a=void 0;void 0!==i&&void 0!==n&&(a=n*i);var s=this.safeString(e,"id"),o=this.safeString(e,"side"),c=this.safeString(e,"orderId"),u=this.safeString(e,"instrument"),d=this.safeSymbol(u,t,"-"),h=void 0,l=this.safeString(e,"feeCurrency"),f=this.safeCurrencyCode(l),p=this.safeFloat(e,"fee");void 0!==p&&(h={cost:p,currency:f});var v=void 0;return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,id:s,order:c,type:void 0,takerOrMaker:v,side:o,price:i,cost:a,amount:n,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={instrument:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetRecentTrades(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={granularity:this.timeframes[r],instrument:o.id},void 0!==a&&(c.limit=a),e.next=11,this.publicGetOhlcv(this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={submitting:"open",unfilledActive:"open",partiallyFilledActive:"open",filled:"closed",partiallyFilledCancelled:"canceled",unfilledCancelled:"canceled"};return e in t?t[e]:e}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"instrument"),n=this.safeSymbol(i,t,"-"),a=this.parse8601(this.safeString(e,"timestamp")),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume"),c=this.safeFloat(e,"remainingVolume"),u=this.parse8601(this.safeString(e,"lastUpdate")),d=this.safeString(e,"id"),h=this.safeString(e,"type"),l=this.safeString(e,"side"),f=void 0,p=void 0,v=void 0,m=this.safeString(e,"timeInForce"),y=this.safeFloat(e,"stopPrice");return this.safeOrder({info:e,id:d,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:u,symbol:n,type:h,timeInForce:m,side:l,price:s,stopPrice:y,amount:o,cost:void 0,average:v,filled:void 0,remaining:c,status:r,fee:f,trades:p})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={instrument:c.id,volume:this.amountToPrecision(t,a),type:r,side:n},d=!1,h=!1,"limit"===r?d=!0:"stopLimit"===r&&(d=!0,h=!0),!d){e.next=13;break}if(void 0!==s){e.next=12;break}throw new k(this.id+" createOrder() requires a price argument for a "+r+" order");case 12:u.price=this.priceToPrecision(t,s);case 13:if(!h){e.next=21;break}if(void 0!==(l=this.safeFloat(o,"stopPrice"))){e.next=19;break}throw new k(this.id+" createOrder() requires a stopPrice extra param for a "+r+" order");case 19:u.stopPrice=this.priceToPrecision(t,l);case 20:o=this.omit(o,"stopPrice");case 21:return e.next=23,this.tradingPostPlaceOrder(this.extend(u,o));case 23:return f=e.sent,e.abrupt("return",this.parseOrder(f,c));case 25:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.tradingGetOrderStatus(this.extend(n,r));case 7:if(a=e.sent,!(a.length<1)){e.next=11;break}throw new b(this.id+" fetchOrder could not fetch order id "+t);case 11:return e.abrupt("return",this.parseOrder(a[0]));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.from=this.ymdhms(r,"T")),void 0!==n&&(s.limit=n),void 0!==t&&(o=this.market(t),s.instrument=o.id),c=this.safeString(this.options,"fetchOrdersMethod","tradingGetOrderHistory"),e.next=13,this[c](this.extend(s,a));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByIds",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s={id:t.join(",")},e.next=9,this.tradingGetOrderStatus(this.extend(s,a));case 9:return o=e.sent,e.abrupt("return",this.parseOrders(o,void 0,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrument=s.id),e.next=11,this.tradingGetActiveOrders(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrument=s.id),void 0!==r&&(o.from=this.ymdhms(r,"T")),void 0!==n&&(o.limit=n),c=this.safeString(this.options,"fetchClosedOrdersMethod","tradingGetOrderHistory"),e.next=14,this[c](this.extend(o,a));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={ids:[parseInt(t)]},e.next=7,this.tradingPostCancelOrdersById(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>0&&void 0!==n[0]?n[0]:void 0,t=n.length>1&&void 0!==n[1]?n[1]:{},e.next=4,this.tradingPostCancelAllOrders(t);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrument=s.id),void 0!==r&&(o.from=this.ymdhms(r,"T")),void 0!==n&&(o.limit=n),e.next=13,this.tradingGetTradeHistory(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.currency=s.id),void 0!==r&&(o.from=this.ymd(r,"T")),e.next=12,this.accountGetMoneyTransfers(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"deposit"},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(s,a)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"withdrawal"},e.abrupt("return",this.fetchTransactions(t,r,n,this.extend(s,a)));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",success:"ok",failed:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString(e,"paymentId"),a=this.safeValue(e,"txId"),s=this.safeString(e,"currency"),o=this.safeCurrencyCode(s,t),c=this.safeString(e,"type"),u=this.parse8601(this.safeString(e,"createdAt")),d=this.parse8601(this.safeString(e,"processedAt")),h=this.parseTransactionStatus(this.safeString(e,"status")),l=this.safeFloat(e,"amount"),f=this.safeFloat(e,"fee"),p={cost:f,currency:o};return{info:e,id:r,txid:a,timestamp:u,datetime:this.iso8601(u),address:i,tag:n,type:c,amount:l,currency:o,status:h,updated:d,fee:p}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.accountGetDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),c=this.safeString(s,"paymentId"),e.abrupt("return",{currency:t,address:this.checkAddress(o),tag:c,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,address:n,amount:parseFloat(this.currencyToPrecision(t,r)),feeCurrency:o.id},void 0!==a&&(c.paymentId=a),e.next=10,this.accountPostWithdraw(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",this.parseTransaction(u));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+t+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));"GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o));var c=this.urls.api+s;if("trading"===t||"account"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d=this.base64ToBinary(this.secret),h=s+u;n={"X-CREX24-API-KEY":this.apiKey,"X-CREX24-API-NONCE":u},"POST"===r&&(n["Content-Type"]="application/json",h+=a=this.json(i)),n["X-CREX24-API-SIGN"]=this.hmac(this.encode(h),d,"sha512","base64")}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(this.isJsonEncodedObject(a)&&!(e>=200&&e<300)){var u=this.safeString(s,"errorDescription"),d=this.id+" "+a;if(this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),400===e)throw new p(d);if(401===e)throw new w(d);if(403===e)throw new w(d);if(429===e)throw new x(d);if(500===e)throw new f(d);if(503===e)throw new y(d);if(504===e)throw new m(d);throw new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.ExchangeNotAvailable,m=l.InsufficientFunds,y=l.OrderNotFound,g=l.InvalidOrder,b=l.DDoSProtection,k=l.InvalidNonce,x=l.AuthenticationError,w=l.BadRequest,_=r(13),O=_.ROUND,T=_.TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"currencycom",name:"Currency.com",countries:["BY"],rateLimit:500,certified:!0,pro:!0,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTradingFees:!0,fetchTrades:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","1d":"1d","1w":"1w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/83718672-36745c00-a63e-11ea-81a9-677b1f789a4d.jpg",api:{public:"https://api-adapter.backend.currency.com/api",private:"https://api-adapter.backend.currency.com/api"},www:"https://www.currency.com",referral:"https://currency.com/trading/signup?c=362jaimv&pid=referral",doc:["https://currency.com/api"],fees:"https://currency.com/fees-charges"},api:{public:{get:["time","exchangeInfo","depth","aggTrades","klines","ticker/24hr"]},private:{get:["leverageSettings","openOrders","tradingPositions","account","myTrades"],post:["order","updateTradingPosition","updateTradingOrder","closeTradingPosition"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},precisionMode:T,options:{defaultTimeInForce:"GTC",warnOnFetchOpenOrdersWithoutSymbol:!0,recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1,parseOrderToPrecision:!1,newOrderRespType:{market:"FULL",limit:"RESULT",stop:"RESULT"}},exceptions:{broad:{"FIELD_VALIDATION_ERROR Cancel is available only for LIMIT order":g,"API key does not exist":x,"Order would trigger immediately.":g,"Account has insufficient balance for requested action.":m,"Rest API trading is not enabled.":v},exact:{"-1000":v,"-1013":g,"-1021":k,"-1022":x,"-1100":g,"-1104":f,"-1025":x,"-1128":w,"-2010":f,"-2011":y,"-2013":y,"-2014":x,"-2015":x}},commonCurrencies:{IQ:"iQIYI"}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=parseInt(n-r.serverTime),e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetExchangeInfo(t);case 3:if(r=e.sent,!this.options.adjustForTimeDifference){e.next=7;break}return e.next=7,this.loadTimeDifference();case 7:for(n=this.safeValue(r,"symbols"),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"symbol"),u=this.safeString(o,"baseAsset"),d=this.safeString(o,"quoteAsset"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,c.indexOf("/")>=0&&(f=c),p=this.safeValue(o,"filters",[]),v=this.indexBy(p,"filterType"),m={amount:1/Math.pow(1,this.safeInteger(o,"baseAssetPrecision")),price:this.safeFloat(o,"tickSize")},y=this.safeString(o,"status"),g="TRADING"===y,"leverage"===(b=this.safeStringLower(o,"marketType"))&&(b="margin"),k={id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,type:b,spot:"spot"===b,margin:"margin"===b,info:o,active:g,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:-1*Math.log10(m.amount),max:void 0}}},x=this.safeFloat2(o,"exchangeFee","tradingFee"),w=this.safeFloat(o,"makerFee",x),_=this.safeFloat(o,"takerFee",x),void 0!==w&&(k.maker=w/100),void 0!==_&&(k.taker=_/100),"PRICE_FILTER"in v&&(O=this.safeValue(v,"PRICE_FILTER",{}),k.precision.price=this.safeFloat(O,"tickSize"),k.limits.price={min:this.safeFloat(O,"minPrice"),max:void 0},void 0!==(T=this.safeFloat(O,"maxPrice"))&&T>0&&(k.limits.price.max=T)),"LOT_SIZE"in v&&(S=this.safeValue(v,"LOT_SIZE",{}),k.precision.amount=this.safeFloat(S,"stepSize"),k.limits.amount={min:this.safeFloat(S,"minQty"),max:this.safeFloat(S,"maxQty")}),"MARKET_LOT_SIZE"in v&&(C=this.safeValue(v,"MARKET_LOT_SIZE",{}),k.limits.market={min:this.safeFloat(C,"minQty"),max:this.safeFloat(C,"maxQty")}),"MIN_NOTIONAL"in v&&(I=this.safeValue(v,"MIN_NOTIONAL",{}),k.limits.cost.min=this.safeFloat(I,"minNotional")),a.push(k);return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o="quote",c=s[a],u=i*c,d=s.precision.price;return"sell"===r?u*=n:(o="base",d=s.precision.amount),u=this.decimalToPrecision(u,O,d,this.precisionMode),{type:a,currency:s[o],rate:c,cost:parseFloat(u)}}},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privateGetAccount(t);case 3:for(r=e.sent,n=this.safeValue(r,"balances",[]),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeInteger(o,"accountId"),u=this.safeString(o,"asset"),d=this.safeCurrencyCode(u),a.push({id:c,type:void 0,currency:d,info:r});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"makerCommission"),taker:this.safeFloat(r,"takerCommission")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBalanceResponse",value:function(e){for(var t={info:e},r=this.safeValue(e,"balances",[]),i=0;i<r.length;i++){var n=r[i],a=this.safeString(n,"asset"),s=this.safeCurrencyCode(a),o=this.account();o.free=this.safeFloat(n,"free"),o.used=this.safeFloat(n,"locked"),t[s]=o}return this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,e.abrupt("return",this.parseBalanceResponse(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,(c=this.parseOrderBook(o)).nonce=this.safeInteger(o,"lastUpdateId"),e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"closeTime"),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"lastPrice"),s=this.safeFloat(e,"openPrice"),o=void 0;return void 0!==s&&void 0!==a&&(o=this.sum(s,a)/2),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat(e,"bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat(e,"askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:this.safeFloat(e,"weightedAvgPrice"),open:s,close:a,last:a,previousClose:this.safeFloat(e,"prevClosePrice"),change:this.safeFloat(e,"priceChange"),percentage:this.safeFloat(e,"priceChangePercent"),average:o,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"quoteVolume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTicker24hr(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker24hr(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},void 0!==n&&(c.startTime=n),void 0!==a&&(c.limit=a),e.next=12,this.publicGetKlines(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"T","time"),i=this.safeFloat2(e,"p","price"),n=this.safeFloat2(e,"q","qty"),a=this.safeString2(e,"a","id"),s=void 0,o=this.safeString(e,"orderId");"m"in e?s=e.m?"sell":"buy":"isBuyerMaker"in e?s=e.isBuyerMaker?"sell":"buy":"isBuyer"in e&&(s=e.isBuyer?"buy":"sell");var c=void 0;"commission"in e&&(c={cost:this.safeFloat(e,"commission"),currency:this.safeCurrencyCode(this.safeString(e,"commissionAsset"))});var u=void 0;"isMaker"in e&&(u=e.isMaker?"maker":"taker");var d=this.safeString(e,"symbol"),h=this.safeSymbol(d,t);return{info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,id:a,order:o,type:void 0,takerOrMaker:u,side:s,price:i,amount:n,cost:i*n,fee:c}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetAggTrades(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",PARTIALLY_FILLED:"open",FILLED:"closed",CANCELED:"canceled",PENDING_CANCEL:"canceling",REJECTED:"rejected",EXPIRED:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"/"),a=void 0;"time"in e?a=this.safeInteger(e,"time"):"transactTime"in e&&(a=this.safeInteger(e,"transactTime"));var s=this.safeFloat(e,"price"),o=this.safeFloat(e,"origQty"),c=this.safeFloat(e,"executedQty"),u=void 0,d=this.safeFloat(e,"cummulativeQuoteQty"),h=this.safeString(e,"orderId"),l=this.safeStringLower(e,"type"),f=this.safeStringLower(e,"side"),p=void 0,v=this.safeValue(e,"fills");void 0!==v&&(p=this.parseTrades(v,t));var m=this.safeString(e,"timeInForce");return this.safeOrder({info:e,id:h,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:n,type:l,timeInForce:m,side:f,price:s,stopPrice:void 0,amount:o,cost:d,average:void 0,filled:c,remaining:u,status:r,fee:void 0,trades:p})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),void 0,!c.margin){e.next=10;break}if(void 0!==this.safeInteger(o,"accountId")){e.next=10;break}throw new p(this.id+" createOrder() requires an accountId parameter for "+c.type+" market "+t);case 10:return u=r.toUpperCase(),d=this.safeValue(this.options.newOrderRespType,r,"RESULT"),h={symbol:c.id,quantity:this.amountToPrecision(t,a),type:u,side:n.toUpperCase(),newOrderRespType:d},"LIMIT"===u?(h.price=this.priceToPrecision(t,s),h.timeInForce=this.options.defaultTimeInForce):"STOP"===u&&(h.price=this.priceToPrecision(t,s)),e.next=16,this.privatePostOrder(this.extend(h,o));case 16:return l=e.sent,e.abrupt("return",this.parseOrder(l,c));case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,o={},void 0===t){e.next=13;break}s=this.market(t),o.symbol=s.id,e.next=18;break;case 13:if(!this.options.warnOnFetchOpenOrdersWithoutSymbol){e.next=18;break}throw c=this.symbols,u=c.length,d=parseInt(u/2),new f(this.id+" fetchOpenOrders() WARNING: fetching open orders without specifying a symbol is rate-limited to one call per "+d.toString()+" seconds. Do not call this method frequently to avoid ban. Set "+this.id+'.options["warnOnFetchOpenOrdersWithoutSymbol"] = false to suppress this warning message.');case 18:return e.next=20,this.privateGetOpenOrders(this.extend(o,a));case 20:return h=e.sent,e.abrupt("return",this.parseOrders(h,s,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=this.safeValue(n,"origClientOrderId"),o={symbol:a.id},void 0===s?o.orderId=t:o.origClientOrderId=s,e.next=12,this.privateDeleteOrder(this.extend(o,n));case 12:return c=e.sent,e.abrupt("return",this.parseOrder(c,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetMyTrades(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+e;if("historicalTrades"===e&&(n={"X-MBX-APIKEY":this.apiKey}),"private"===t){this.checkRequiredCredentials();var o=this.urlencode(this.extend({timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)),c=this.hmac(this.encode(o),this.encode(this.secret));o+="&signature="+c,n={"X-MBX-APIKEY":this.apiKey},"GET"===r||"DELETE"===r?s+="?"+o:(a=o,n["Content-Type"]="application/x-www-form-urlencoded")}else Object.keys(i).length&&(s+="?"+this.urlencode(i));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(418===e||429===e)throw new b(this.id+" "+e.toString()+" "+t+" "+a);if(e>=400){if(a.indexOf("Price * QTY is zero or less")>=0)throw new g(this.id+" order cost = amount * price is zero or less "+a);if(a.indexOf("LOT_SIZE")>=0)throw new g(this.id+" order amount should be evenly divisible by lot size "+a);if(a.indexOf("PRICE_FILTER")>=0)throw new g(this.id+" order price is invalid, i.e. exceeds allowed price precision, exceeds min price or max price limits or is invalid float value in general, use this.priceToPrecision (symbol, amount) "+a)}if(void 0!==s){var u=this.safeString(s,"code");if(void 0!==u&&"0"!==u){var d=this.id+" "+this.json(s);this.throwExactlyMatchedException(this.exceptions.exact,u,d);var h=this.safeString(s,"msg");throw this.throwBroadlyMatchedException(this.exceptions.broad,h,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.InsufficientFunds,v=l.BadRequest,m=l.BadSymbol,y=l.InvalidOrder,g=l.AuthenticationError,b=l.ArgumentsRequired,k=l.OrderNotFound,x=l.ExchangeNotAvailable,w=r(13).TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"delta",name:"Delta Exchange",countries:["VC"],rateLimit:300,version:"v2",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchCurrencies:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","1d":"1d","7d":"7d","1w":"1w","2w":"2w","1M":"30d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/99450025-3be60a00-2931-11eb-9302-f4fd8d8589aa.jpg",test:{public:"https://testnet-api.delta.exchange",private:"https://testnet-api.delta.exchange"},api:{public:"https://api.delta.exchange",private:"https://api.delta.exchange"},www:"https://www.delta.exchange",doc:["https://docs.delta.exchange"],fees:"https://www.delta.exchange/fees",referral:"https://www.delta.exchange/app/signup/?code=IULYNB"},api:{public:{get:["assets","settings","indices","products","tickers","tickers/{symbol}","l2orderbook/{symbol}","trades/{symbol}","history/candles","history/sparklines"]},private:{get:["orders","orders/leverage","positions","positions/margined","orders/history","fills","fills/history/download/csv","wallet/balances","wallet/transactions","wallet/transactions/download","deposits/address"],post:["orders","orders/batch","orders/leverage","positions/change_margin"],put:["orders","orders/batch"],delete:["orders","orders/all","orders/batch"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:.001,tiers:{taker:[[0,.0015],[100,.0013],[250,.0013],[1e3,.001],[5e3,9e-4],[1e4,75e-5],[2e4,65e-5]],maker:[[0,.001],[100,.001],[250,9e-4],[1e3,75e-5],[5e3,6e-4],[1e4,5e-4],[2e4,5e-4]]}}},precisionMode:w,requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{insufficient_margin:p,order_size_exceed_available:y,risk_limits_breached:v,invalid_contract:m,immediate_liquidation:y,out_of_bankruptcy:y,self_matching_disrupted_post_only:y,immediate_execution_post_only:y,bad_schema:v,invalid_api_key:g,invalid_signature:g,open_order_not_found:k,unavailable:x},broad:{}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetSettings(t);case 3:return r=e.sent,n=this.safeValue(r,"result",{}),e.abrupt("return",this.safeIntegerProduct(n,"server_time",.001));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},e.next=3,this.publicGetSettings(t);case 3:return r=e.sent,n=this.safeValue(r,"result",{}),a=this.safeValue(n,"under_maintenance"),s="true"===a?"maintenance":"ok",o=this.safeIntegerProduct(n,"server_time",.001),this.status=this.extend(this.status,{status:s,updated:o}),e.abrupt("return",this.status);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result",[]),a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"symbol"),u=this.safeInteger(o,"id"),d=this.safeCurrencyCode(c),h=this.safeString(o,"deposit_status"),l=this.safeString(o,"withdrawal_status"),f="enabled"===l,p="enabled"===h&&f,v=this.safeInteger(o,"precision"),a[d]={id:c,numericId:u,code:d,name:this.safeString(o,"name"),info:o,active:p,fee:this.safeFloat(o,"base_withdrawal_fee"),precision:1/Math.pow(10,v),limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(o,"min_withdrawal_amount"),max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=n(i.mark((function e(){var t,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],n=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,o(c(r.prototype),"loadMarkets",this).call(this,t,n);case 4:return a=e.sent,(void 0===this.safeValue(this.options,"currenciesByNumericId")||t)&&(this.options.currenciesByNumericId=this.indexBy(this.currencies,"numericId")),(void 0===this.safeValue(this.options,"marketsByNumericId")||t)&&(this.options.marketsByNumericId=this.indexBy(this.markets,"numericId")),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.publicGetProducts(t);case 3:for(r=e.sent,n=this.safeValue(r,"result",[]),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"contract_type"),u=this.safeValue(o,"quoting_asset",{}),d=this.safeValue(o,"underlying_asset",{}),h=this.safeString(d,"symbol"),l=this.safeString(u,"symbol"),f=this.safeString(o,"symbol"),p=this.safeInteger(o,"id"),v=this.safeCurrencyCode(h),m=this.safeCurrencyCode(l),y=f,g=!1,b=!1,k=!1,"perpetual_futures"===c?(c="swap",g=!0,b=!1,k=!1,f.indexOf("_")<0&&(y=v+"/"+m)):"call_options"===c||"put_options"===c||"move_options"===c?(c="option",g=!1,k=!0,b=!1):"futures"===c&&(c="future",g=!1,k=!1,b=!0),x={amount:1,price:this.safeFloat(o,"tick_size")},w={amount:{min:1,max:this.safeFloat(o,"position_size_limit")},price:{min:x.price,max:void 0},cost:{min:this.safeFloat(o,"min_size"),max:void 0}},_=this.safeString(o,"state"),O="live"===_,T=this.safeFloat(o,"maker_commission_rate"),S=this.safeFloat(o,"taker_commission_rate"),a.push({id:f,numericId:p,symbol:y,base:v,quote:m,baseId:h,quoteId:l,type:c,option:k,swap:g,future:b,maker:T,taker:S,precision:x,limits:w,info:o,active:O});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeIntegerProduct(e,"timestamp",.001),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"close"),s=this.safeFloat(e,"open"),o=void 0,c=void 0,u=void 0;void 0!==s&&void 0!==a&&(o=a-s,c=this.sum(a,s)/2,0!==s&&(u=o/s*100));var d=this.safeFloat(e,"volume"),h=this.safeFloat(e,"turnover"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:l,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:u,average:c,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTickersSymbol(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"result",[]),s={},o=0;o<a.length;o++)c=this.parseTicker(a[o]),u=c.symbol,s[u]=c;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetL2orderbookSymbol(this.extend(a,n));case 8:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseOrderBook(o,void 0,"buy","sell","price","size"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"order_id"),n=this.parse8601(this.safeString(e,"created_at"));n=this.safeIntegerProduct(e,"timestamp",.001,n);var a=this.safeFloat(e,"price"),s=this.safeFloat(e,"size"),o=void 0;void 0!==s&&void 0!==a&&(o=s*a);var c=this.safeValue(e,"product",{}),u=this.safeString(c,"symbol"),d=this.safeSymbol(u,t),h=this.safeString(e,"seller_role"),l=this.safeString(e,"side");void 0===l&&("taker"===h?l="sell":"maker"===h&&(l="buy"));var f=this.safeString(e,"role"),p=this.safeValue(e,"meta_data",{}),v=this.safeString(p,"order_type");void 0!==v&&(v=v.replace("_order",""));var m=this.safeFloat(e,"commission"),y=void 0;if(void 0!==m){var g=this.safeValue(c,"settling_asset",{}),b=this.safeString(g,"symbol"),k=this.safeCurrencyCode(b);y={cost:m,currency:k}}return{id:r,order:i,timestamp:n,datetime:this.iso8601(n),symbol:d,type:v,side:l,price:a,amount:s,cost:o,takerOrMaker:f,fee:y,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetTradesSymbol(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,resolution:this.timeframes[r]},u=this.parseTimeframe(r),a=a||2e3,void 0===n?(d=this.seconds(),c.end=d,c.start=d-a*u):(h=parseInt(n/1e3),c.start=h,c.end=this.sum(h,a*u)),e.next=13,this.publicGetHistoryCandles(this.extend(c,s));case 13:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWalletBalances(t);case 5:for(r=e.sent,n=this.safeValue(r,"result",[]),a={info:r},s=this.safeValue(this.options,"currenciesByNumericId",{}),o=0;o<n.length;o++)c=n[o],u=this.safeString(c,"asset_id"),d=this.safeValue(s,u),h=void 0===d?u:d.code,(l=this.account()).total=this.safeFloat(c,"balance"),l.free=this.safeFloat(c,"available_balance"),a[h]=l;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchPosition",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={product_id:n.numericId},e.next=7,this.privateGetPositions(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetPositionsMargined(t);case 6:return r=e.sent,n=this.safeValue(r,"result",[]),e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",pending:"open",closed:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"client_order_id"),n=this.parse8601(this.safeString(e,"created_at")),a=this.safeString(e,"product_id"),s=this.safeValue(this.options,"marketsByNumericId",{}),o=void 0===(t=this.safeValue(s,a,t))?a:t.symbol,c=this.parseOrderStatus(this.safeString(e,"state")),u=this.safeString(e,"side"),d=this.safeString(e,"order_type");d=d.replace("_order","");var h=this.safeFloat(e,"limit_price"),l=this.safeFloat(e,"size"),f=this.safeFloat(e,"unfilled_size"),p=this.safeFloat(e,"average_fill_price"),v=void 0,m=this.safeFloat(e,"paid_commission");if(void 0!==m){var y=void 0;if(void 0!==t){var g=this.safeValue(t.info,"settling_asset",{}),b=this.safeString(g,"symbol");y=this.safeCurrencyCode(b)}v={cost:m,currency:y}}return this.safeOrder({info:e,id:r,clientOrderId:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:o,type:d,side:u,price:h,amount:l,cost:void 0,average:p,filled:void 0,remaining:f,status:c,fee:v,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return c=r+"_order",u=this.market(t),d={product_id:u.numericId,size:this.amountToPrecision(t,a),side:n,order_type:c},"limit"===r&&(d.limit_price=this.priceToPrecision(t,s)),h=this.safeString2(o,"clientOrderId","client_order_id"),o=this.omit(o,["clientOrderId","client_order_id"]),void 0!==h&&(d.client_order_id=h),e.next=13,this.privatePostOrders(this.extend(d,o));case 13:return l=e.sent,f=this.safeValue(l,"result",{}),e.abrupt("return",this.parseOrder(f,u));case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=f.length>5&&void 0!==f[5]?f[5]:void 0,c=f.length>6&&void 0!==f[6]?f[6]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(r),d={id:parseInt(t),product_id:u.numericId},void 0!==s&&(d.size=parseInt(this.amountToPrecision(r,s))),void 0!==o&&(d.limit_price=this.priceToPrecision(r,o)),e.next=10,this.privatePutOrders(this.extend(d,c));case 10:return h=e.sent,l=this.safeValue(h,"result"),e.abrupt("return",this.parseOrder(l,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new b(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={id:parseInt(t),product_id:a.numericId},e.next=10,this.privateDeleteOrders(this.extend(s,n));case 10:return o=e.sent,c=this.safeValue(o,"result"),e.abrupt("return",this.parseOrder(c,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},void 0!==t){e.next=4;break}throw new b(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.market(t),a={product_id:n.numericId},s=this.privateDeleteOrdersAll(this.extend(a,r)),e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrders",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrdersHistory",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={},c=void 0,void 0!==r&&(c=this.market(r),o.product_ids=c.numericId),void 0!==n&&(o.start_time=n.toString()+"000"),void 0!==a&&(o.page_size=a),e.next=13,this[t](this.extend(o,s));case 13:return u=e.sent,d=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOrders(d,c,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.product_ids=o.numericId),void 0!==r&&(s.start_time=r.toString()+"000"),void 0!==n&&(s.page_size=n),e.next=13,this.privateGetFills(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseTrades(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset_id=o.numericId),void 0!==n&&(s.page_size=n),e.next=12,this.privateGetWalletTransactions(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseLedger(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({pnl:"pnl",deposit:"transaction",withdrawal:"transaction",commission:"fee",conversion:"trade",referral_bonus:"referral",commission_rebate:"rebate"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"uuid"),i=void 0,n=void 0,a=this.safeValue(e,"meta_data",{}),s=this.safeString(a,"transaction_id"),o=void 0,c=this.safeString(e,"transaction_type");"deposit"===c||"commission_rebate"===c||"referral_bonus"===c||"pnl"===c||"withdrawal_cancellation"===c||"promo_credit"===c?i="in":"withdrawal"!==c&&"commission"!==c&&"conversion"!==c&&"perpetual_futures_funding"!==c||(i="out"),c=this.parseLedgerEntryType(c);var u=this.safeInteger(e,"asset_id"),d=this.safeValue(this.options,"currenciesByNumericId"),h=void 0===(t=this.safeValue(d,u,t))?void 0:t.code,l=this.safeFloat(e,"amount"),f=this.parse8601(this.safeString(e,"created_at")),p=this.safeFloat(e,"balance"),v=Math.max(0,p-l),m="ok";return{info:e,id:r,direction:i,account:n,referenceId:s,referenceAccount:o,type:c,currency:h,amount:l,before:v,after:p,status:m,timestamp:f,datetime:this.iso8601(f),fee:void 0}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset_symbol:n.id},e.next=7,this.privateGetDepositsAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),c=this.safeString(o,"address"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.urls.api[t]+s,c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else if("private"===t){this.checkRequiredCredentials();var u=this.seconds().toString();n={"api-key":this.apiKey,timestamp:u};var d=r+u+s;if("GET"===r||"DELETE"===r){if(Object.keys(c).length){var h="?"+this.urlencode(c);d+=h,o+=h}}else d+=a=this.json(c),n["Content-Type"]="application/json";var l=this.hmac(this.encode(d),this.encode(this.secret));n.signature=l}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"error",{}),d=this.safeString(u,"code");if(void 0!==d){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(13).TICK_SIZE,f=r(10),p=f.AuthenticationError,v=f.ExchangeError,m=f.ArgumentsRequired,y=f.PermissionDenied,g=f.InvalidOrder,b=f.OrderNotFound,k=f.DDoSProtection,x=f.NotSupported,w=f.ExchangeNotAvailable,_=f.InsufficientFunds,O=f.BadRequest,T=f.InvalidAddress,S=f.OnMaintenance;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"deribit",name:"Deribit",countries:["NL"],version:"v2",userAgent:void 0,rateLimit:500,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","3m":"3","5m":"5","10m":"10","15m":"15","30m":"30","1h":"60","2h":"120","3h":"180","6h":"360","12h":"720","1d":"1D"},urls:{test:"https://test.deribit.com",logo:"https://user-images.githubusercontent.com/1294454/41933112-9e2dd65a-798b-11e8-8440-5bab2959fcb8.jpg",api:"https://www.deribit.com",www:"https://www.deribit.com",doc:["https://docs.deribit.com/v2","https://github.com/deribit"],fees:"https://www.deribit.com/pages/information/fees",referral:"https://www.deribit.com/reg-1189.4038"},api:{public:{get:["auth","exchange_token","fork_token","set_heartbeat","disable_heartbeat","get_time","hello","test","subscribe","unsubscribe","get_announcements","get_book_summary_by_currency","get_book_summary_by_instrument","get_contract_size","get_currencies","get_funding_chart_data","get_funding_rate_history","get_funding_rate_value","get_historical_volatility","get_index","get_instruments","get_last_settlements_by_currency","get_last_settlements_by_instrument","get_last_trades_by_currency","get_last_trades_by_currency_and_time","get_last_trades_by_instrument","get_last_trades_by_instrument_and_time","get_order_book","get_trade_volumes","get_tradingview_chart_data","ticker"]},private:{get:["logout","enable_cancel_on_disconnect","disable_cancel_on_disconnect","get_cancel_on_disconnect","subscribe","unsubscribe","change_api_key_name","change_scope_in_api_key","change_subaccount_name","create_api_key","create_subaccount","disable_api_key","disable_tfa_for_subaccount","enable_api_key","get_account_summary","get_email_language","get_new_announcements","get_position","get_positions","get_subaccounts","list_api_keys","remove_api_key","reset_api_key","set_announcement_as_read","set_api_key_as_default","set_email_for_subaccount","set_email_language","set_password_for_subaccount","toggle_notifications_from_subaccount","toggle_subaccount_login","execute_block_trade","get_block_trade","get_last_block_trades_by_currency","invalidate_block_trade_signature","verify_block_trade","buy","sell","edit","cancel","cancel_all","cancel_all_by_currency","cancel_all_by_instrument","cancel_by_label","close_position","get_margins","get_open_orders_by_currency","get_open_orders_by_instrument","get_order_history_by_currency","get_order_history_by_instrument","get_order_margin_by_ids","get_order_state","get_stop_order_history","get_user_trades_by_currency","get_user_trades_by_currency_and_time","get_user_trades_by_instrument","get_user_trades_by_instrument_and_time","get_user_trades_by_order","get_settlement_history_by_instrument","get_settlement_history_by_currency","cancel_transfer_by_id","cancel_withdrawal","create_deposit_address","get_current_deposit_address","get_deposits","get_transfers","get_withdrawals","submit_transfer_to_subaccount","submit_transfer_to_user","withdraw"]}},exceptions:{9999:y,1e4:p,10001:v,10002:g,10003:g,10004:b,10005:g,10006:g,10007:g,10008:g,10009:_,10010:b,10011:g,10012:g,10013:y,10014:y,10015:y,10016:y,10017:y,10018:y,10019:y,10020:v,10021:g,10022:g,10023:g,10024:g,10025:g,10026:g,10027:g,10028:k,10029:b,10030:v,10031:v,10032:g,10033:x,10034:g,10035:g,10036:g,10040:w,10041:S,10043:g,10044:g,10045:g,10046:g,10047:k,10048:v,11008:g,11029:O,11030:v,11031:v,11035:k,11036:g,11037:O,11038:g,11039:g,11041:g,11042:y,11043:O,11044:g,11045:O,11046:O,11047:O,11048:v,11049:O,11050:O,11051:S,11052:v,11053:v,11090:T,11091:T,11092:T,11093:k,11094:v,11095:v,11096:v,12e3:p,12001:k,12002:v,12998:p,12003:p,12004:p,12005:p,12100:v,12999:p,13e3:p,13001:p,13002:y,13003:p,13004:p,13005:p,13006:p,13007:p,13008:v,13009:p,13010:O,13011:O,13012:y,13013:O,13014:O,13015:O,13016:O,13017:v,13018:v,13019:v,13020:v,13021:y,13025:v,"-32602":O,"-32601":O,"-32700":O,"-32000":O},precisionMode:l,options:{code:"BTC",fetchBalance:{code:"BTC"}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"result"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"codeFromOptions",value:function(e){var t=this.safeValue(this.options,"code","BTC"),r=this.safeValue(this.options,e,{});return this.safeValue(r,"code",t)}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r={},e.next=4,this.publicGetTest(this.extend(r,t));case 4:return this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),e.abrupt("return",this.status);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetGetCurrencies(t);case 3:r=e.sent,n=this.safeValue(r,"result",[]),a=[],s=0;case 7:if(!(s<n.length)){e.next=18;break}return o=this.safeString(n[s],"currency"),c={currency:o},e.next=12,this.publicGetGetInstruments(this.extend(c,t));case 12:for(u=e.sent,d=this.safeValue(u,"result",[]),h=0;h<d.length;h++)l=d[h],f=this.safeString(l,"instrument_name"),p=this.safeString(l,"base_currency"),v=this.safeString(l,"quote_currency"),m=this.safeCurrencyCode(p),y=this.safeCurrencyCode(v),g=this.safeString(l,"kind"),b="future"===g,k="option"===g,x=this.safeValue(l,"is_active"),w=this.safeFloat(l,"min_trade_amount"),_=this.safeFloat(l,"tick_size"),O={amount:w,price:_},a.push({id:f,symbol:f,base:m,quote:y,active:x,precision:O,taker:this.safeFloat(l,"taker_commission"),maker:this.safeFloat(l,"maker_commission"),limits:{amount:{min:w,max:void 0},price:{min:_,max:void 0},cost:{min:void 0,max:void 0}},type:g,spot:!1,future:b,option:k,info:l});case 15:s++,e.next=7;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.codeFromOptions("fetchBalance"),n=this.currency(r),a={currency:n.id},e.next=8,this.privateGetGetAccountSummary(this.extend(a,t));case 8:return s=e.sent,o={info:s},c=this.safeValue(s,"result",{}),u=this.safeString(c,"currency"),d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(c,"availableFunds"),h.used=this.safeFloat(c,"maintenanceMargin"),h.total=this.safeFloat(c,"equity"),o[d]=h,e.abrupt("return",this.parseBalance(o));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetCreateDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),c=this.safeString(o,"address"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetGetCurrentDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),c=this.safeString(o,"address"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:void 0,info:s});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"timestamp","creation_timestamp"),i=this.safeString(e,"instrument_name"),n=this.safeSymbol(i,t),a=this.safeFloat2(e,"last_price","last"),s=this.safeValue(e,"stats",e);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat2(s,"high","max_price"),low:this.safeFloat2(s,"low","min_price"),bid:this.safeFloat2(e,"best_bid_price","bid_price"),bidVolume:this.safeFloat(e,"best_bid_amount"),ask:this.safeFloat2(e,"best_ask_price","ask_price"),askVolume:this.safeFloat(e,"best_ask_amount"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(s,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={instrument_name:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result"),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.codeFromOptions("fetchTickers"),a=this.currency(n),s={currency:a.id},e.next=9,this.publicGetGetBookSummaryByCurrency(this.extend(s,r));case 9:for(o=e.sent,c=this.safeValue(o,"result",[]),u={},d=0;d<c.length;d++)h=this.parseTicker(c[d]),l=h.symbol,u[l]=h;return e.abrupt("return",this.filterByArray(u,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={instrument_name:o.id,resolution:this.timeframes[r]},u=this.parseTimeframe(r),d=this.milliseconds(),void 0!==n){e.next=19;break}if(void 0!==a){e.next=15;break}throw new m(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 15:c.start_timestamp=d-(a-1)*u*1e3,c.end_timestamp=d;case 17:e.next=21;break;case 19:c.start_timestamp=n,c.end_timestamp=void 0===a?d:this.sum(n,a*u*1e3);case 21:return e.next=23,this.publicGetGetTradingviewChartData(this.extend(c,s));case 23:return h=e.sent,l=this.safeValue(h,"result",{}),f=this.convertTradingViewToOHLCV(l,"ticks","open","high","low","close","volume",!0),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_id"),i=this.safeString(e,"instrument_name"),n=this.safeSymbol(i,t),a=this.safeInteger(e,"timestamp"),s=this.safeString(e,"direction"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;void 0!==c&&void 0!==o&&(u=c*o);var d=this.safeString(e,"liquidity"),h=void 0;void 0!==d&&(h="M"===d?"maker":"taker");var l=this.safeFloat(e,"fee"),f=void 0;if(void 0!==l){var p=this.safeString(e,"fee_currency"),v=this.safeCurrencyCode(p);f={cost:l,currency:v}}return{id:r,info:e,timestamp:a,datetime:this.iso8601(a),symbol:n,order:this.safeString(e,"order_id"),type:this.safeString(e,"order_type"),side:s,takerOrMaker:h,price:o,amount:c,cost:u,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={instrument_name:s.id,include_old:!0},c=void 0===r?"publicGetGetLastTradesByInstrument":"publicGetGetLastTradesByInstrumentAndTime",void 0!==r&&(o.start_timestamp=r),void 0!==n&&(o.count=n),e.next=12,this[c](this.extend(o,a));case 12:return u=e.sent,d=this.safeValue(u,"result",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={instrument_name:a.id},void 0!==r&&(s.depth=r),e.next=9,this.publicGetGetOrderBook(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.safeInteger(c,"timestamp"),d=this.safeInteger(c,"change_id"),(h=this.parseOrderBook(c,u)).nonce=d,e.abrupt("return",h);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed",rejected:"rejected",untriggered:"open"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({good_til_cancelled:"GTC",fill_or_kill:"FOK",immediate_or_cancel:"IOC"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"creation_timestamp"),i=this.safeInteger(e,"last_update_timestamp"),n=this.safeString(e,"order_id"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"average_price"),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"filled_amount"),u=void 0;void 0!==c&&c>0&&(u=i);var d=this.parseOrderStatus(this.safeString(e,"order_state")),h=this.safeString(e,"instrument_name");t=this.safeMarket(h,t);var l=this.safeStringLower(e,"direction"),f=this.safeFloat(e,"commission"),p=void 0;void 0!==f&&(p={cost:f=Math.abs(f),currency:t.base});var v=this.safeString(e,"order_type"),m=this.safeValue(e,"trades");void 0!==m&&(m=this.parseTrades(m,t));var y=this.parseTimeInForce(this.safeString(e,"time_in_force")),g=this.safeValue(e,"stop_price"),b=this.safeValue(e,"post_only");return this.safeOrder({info:e,id:n,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:u,symbol:t.symbol,type:v,timeInForce:y,postOnly:b,side:l,price:a,stopPrice:g,amount:o,cost:void 0,average:s,filled:c,remaining:void 0,status:d,fee:p,trades:m})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetGetOrderState(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={instrument_name:c.id,amount:this.amountToPrecision(t,a),type:r},d=!1,h=!1,"limit"===r?d=!0:"stop_limit"===r&&(d=!0,h=!0),!d){e.next=15;break}if(void 0===s){e.next=14;break}u.price=this.priceToPrecision(t,s),e.next=15;break;case 14:throw new m(this.id+" createOrder() requires a price argument for a "+r+" order");case 15:if(!h){e.next=23;break}if(void 0!==(l=this.safeFloat2(o,"stop_price","stopPrice"))){e.next=21;break}throw new m(this.id+" createOrder() requires a stop_price or stopPrice param for a "+r+" order");case 21:u.stop_price=this.priceToPrecision(t,l);case 22:o=this.omit(o,["stop_price","stopPrice"]);case 23:return f="privateGet"+this.capitalize(n),e.next=26,this[f](this.extend(u,o));case 26:return p=e.sent,v=this.safeValue(p,"result",{}),y=this.safeValue(v,"order"),g=this.safeValue(v,"trades",[]),y.trades=g,e.abrupt("return",this.parseOrder(y,c));case 32:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:void 0,c=p.length>6&&void 0!==p[6]?p[6]:{},void 0!==s){e.next=5;break}throw new m(this.id+" editOrder() requires an amount argument");case 5:if(void 0!==o){e.next=7;break}throw new m(this.id+" editOrder() requires a price argument");case 7:return e.next=9,this.loadMarkets();case 9:return u={order_id:t,amount:this.amountToPrecision(r,s),price:this.priceToPrecision(r,o)},e.next=12,this.privateGetEdit(this.extend(u,c));case 12:return d=e.sent,h=this.safeValue(d,"result",{}),l=this.safeValue(h,"order"),f=this.safeValue(h,"trades",[]),l.trades=f,e.abrupt("return",this.parseOrder(l));case 18:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetCancel(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"result",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0===t?a="privateGetCancelAll":(a="privateGetCancelAllByInstrument",s=this.market(t),n.instrument_name=s.id),e.next=9,this[a](this.extend(n,r));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,c=void 0,void 0===t?(u=this.codeFromOptions("fetchOpenOrders"),d=this.currency(u),s.currency=d.id,c="privateGetGetOpenOrdersByCurrency"):(o=this.market(t),s.instrument_name=o.id,c="privateGetGetOpenOrdersByInstrument"),e.next=12,this[c](this.extend(s,a));case 12:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,c=void 0,void 0===t?(u=this.codeFromOptions("fetchClosedOrders"),d=this.currency(u),s.currency=d.id,c="privateGetGetOrderHistoryByCurrency"):(o=this.market(t),s.instrument_name=o.id,c="privateGetGetOrderHistoryByInstrument"),e.next=12,this[c](this.extend(s,a));case 12:return h=e.sent,l=this.safeValue(h,"result",[]),e.abrupt("return",this.parseOrders(l,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:void 0,n=d.length>3&&void 0!==d[3]?d[3]:void 0,a=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return s={order_id:t},e.next=9,this.privateGetGetUserTradesByOrder(this.extend(s,a));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,void 0,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s={include_old:!0},o=void 0,c=void 0,void 0===t?(u=this.codeFromOptions("fetchMyTrades"),d=this.currency(u),s.currency=d.id,void 0===r?c="privateGetGetUserTradesByCurrency":(c="privateGetGetUserTradesByCurrencyAndTime",s.start_timestamp=r)):(o=this.market(t),s.instrument_name=o.id,void 0===r?c="privateGetGetUserTradesByInstrument":(c="privateGetGetUserTradesByInstrumentAndTime",s.start_timestamp=r)),void 0!==n&&(s.count=n),e.next=13,this[c](this.extend(s,a));case 13:return h=e.sent,l=this.safeValue(h,"result",{}),f=this.safeValue(l,"trades",[]),e.abrupt("return",this.parseTrades(f,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetDeposits(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,s,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={currency:s.id},void 0!==n&&(o.count=n),e.next=13,this.privateGetGetWithdrawals(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(d,s,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({completed:"ok",unconfirmed:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeInteger2(e,"created_timestamp","received_timestamp"),a=this.safeInteger(e,"updated_timestamp"),s=this.parseTransactionStatus(this.safeString(e,"state")),o=this.safeString(e,"address"),c=this.safeFloat(e,"fee"),u="deposit",d=void 0;return void 0!==c&&(u="withdrawal",d={cost:c,currency:i}),{info:e,id:this.safeString(e,"id"),txid:this.safeString(e,"transaction_id"),timestamp:n,datetime:this.iso8601(n),address:o,addressTo:o,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:u,amount:this.safeFloat(e,"amount"),currency:i,status:s,updated:a,fee:d}}},{key:"fetchPosition",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={instrument_name:n.id},e.next=7,this.privateGetGetPosition(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result"),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return r=this.codeFromOptions("fetchPositions"),n=this.currency(r),a={currency:n.id},e.next=9,this.privateGetGetPositions(this.extend(a,t));case 9:return s=e.sent,o=this.safeValue(s,"result",[]),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o={currency:s.id,address:n,amount:r},void 0!==this.twofa&&(o.tfa=this.oath()),e.next=10,this.privateGetWithdraw(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"id")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+t+"/"+e;if("public"===t&&Object.keys(i).length&&(s+="?"+this.urlencode(i)),"private"===t){this.checkRequiredCredentials();var o=this.nonce().toString(),c=this.milliseconds().toString(),u="";Object.keys(i).length&&(s+="?"+this.urlencode(i));var d=r+"\n"+s+"\n"+u+"\n",h=c+"\n"+o+"\n"+d,l=this.hmac(this.encode(h),this.encode(this.secret),"sha256");n={Authorization:"deri-hmac-sha256 id="+this.apiKey+",ts="+c+",sig="+l+",nonce="+o}}var f=this.urls.api+s;return{url:f,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(s){var u=this.safeValue(s,"error");if(void 0!==u){var d=this.safeString(u,"code"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,d,h),new v(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.AccountSuspended,v=f.BadRequest,m=f.BadResponse,y=f.NetworkError,g=f.DDoSProtection,b=f.AuthenticationError,k=f.PermissionDenied,x=f.ExchangeError,w=f.InsufficientFunds,_=f.InvalidOrder,O=f.InvalidNonce,T=f.OrderNotFound,S=f.InvalidAddress,C=f.RateLimitExceeded,I=f.BadSymbol;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"digifinex",name:"DigiFinex",countries:["SG"],version:"v3",rateLimit:900,has:{cancelOrder:!0,cancelOrders:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D","1w":"1W"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443315-01283a00-c5fe-11ea-8628-c2a0feaf07ac.jpg",api:"https://openapi.digifinex.com",www:"https://www.digifinex.com",doc:["https://docs.digifinex.com"],fees:"https://digifinex.zendesk.com/hc/en-us/articles/360000328422-Fee-Structure-on-DigiFinex",referral:"https://www.digifinex.com/en-ww/from/DhOzBg?channelCode=ljaUPp"},api:{public:{get:["{market}/symbols","kline","margin/currencies","margin/symbols","markets","order_book","ping","spot/symbols","time","trades","trades/symbols","ticker","currencies"]},private:{get:["{market}/financelog","{market}/mytrades","{market}/order","{market}\u200b/order\u200b/detail","{market}/order/current","{market}/order/history","margin/assets","margin/financelog","margin/mytrades","margin/order","margin/order/current","margin/order/history","margin/positions","otc/financelog","spot/assets","spot/financelog","spot/mytrades","spot/order","spot/order/current","spot/order/history","deposit/address","deposit/history","withdraw/history"],post:["{market}/order/cancel","{market}/order/new","{market}\u200b/order\u200b/batch_new","margin/order/cancel","margin/order/new","margin/position/close","spot/order/cancel","spot/order/new","transfer","withdraw/new","withdraw/cancel"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{10001:[v,"Wrong request method, please check it's a GET ot POST request"],10002:[b,"Invalid ApiKey"],10003:[b,"Sign doesn't match"],10004:[v,"Illegal request parameters"],10005:[g,"Request frequency exceeds the limit"],10006:[k,"Unauthorized to execute this request"],10007:[k,"IP address Unauthorized"],10008:[O,"Timestamp for this request is invalid, timestamp must within 1 minute"],10009:[y,"Unexist endpoint, please check endpoint URL"],10011:[p,"ApiKey expired. Please go to client side to re-create an ApiKey"],20001:[k,"Trade is not open for this trading pair"],20002:[k,"Trade of this trading pair is suspended"],20003:[_,"Invalid price or amount"],20007:[_,"Price precision error"],20008:[_,"Amount precision error"],20009:[_,"Amount is less than the minimum requirement"],20010:[_,"Cash Amount is less than the minimum requirement"],20011:[w,"Insufficient balance"],20012:[v,"Invalid trade type, valid value: buy/sell)"],20013:[_,"No order info found"],20014:[v,"Invalid date, Valid format: 2018-07-25)"],20015:[v,"Date exceeds the limit"],20018:[k,"Your trading rights have been banned by the system"],20019:[v,'Wrong trading pair symbol. Correct format:"usdt_btc". Quote asset is in the front'],20020:[g,"You have violated the API operation trading rules and temporarily forbid trading. At present, we have certain restrictions on the user's transaction rate and withdrawal rate."],5e4:[x,"Exception error"],20021:[v,"Invalid currency"],20022:[v,"The ending timestamp must be larger than the starting timestamp"],20023:[v,"Invalid transfer type"],20024:[v,"Invalid amount"],20025:[v,"This currency is not transferable at the moment"],20026:[w,"Transfer amount exceed your balance"],20027:[k,"Abnormal account status"],20028:[k,"Blacklist for transfer"],20029:[k,"Transfer amount exceed your daily limit"],20030:[v,"You have no position on this trading pair"],20032:[k,"Withdrawal limited"],20033:[v,"Wrong Withdrawal ID"],20034:[k,"Withdrawal service of this crypto has been closed"],20035:[k,"Withdrawal limit"],20036:[x,"Withdrawal cancellation failed"],20037:[S,"The withdrawal address, Tag or chain type is not included in the withdrawal management list"],20038:[S,"The withdrawal address is not on the white list"],20039:[x,"Can't be canceled in current status"],20040:[C,"Withdraw too frequently; limitation: 3 times a minute, 100 times a day"],20041:[k,"Beyond the daily withdrawal limit"],20042:[I,"Current trading pair does not support API trading"]},broad:{}},options:{defaultType:"spot",types:["spot","margin","otc"]},commonCurrencies:{BHT:"Black House Test",MBN:"Mobilian Coin",TEL:"TEL666"}})}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",[]),a={},s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),d=this.safeValue(o,"deposit_status",1),h=this.safeValue(o,"withdraw_status",1),l=d&&h,f=this.safeFloat(o,"withdraw_fee_rate"),u in a?Array.isArray(a[u].info)?a[u].info.push(o):a[u].info=[a[u].info,o]:a[u]={id:c,code:u,info:o,type:void 0,name:void 0,active:l,fee:f,precision:8,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(o,"min_withdraw_amount"),max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},r=this.safeValue(this.options,"fetchMarkets",{}),i=this.safeString(r,"method","fetch_markets_v2"),e.next=5,this[i](t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsV2",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetTradesSymbols(t);case 3:for(r=e.sent,i=this.safeValue(r,"symbol_list",[]),a=[],s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"symbol"),u=this.safeString(o,"base_asset"),d=this.safeString(o,"quote_asset"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(o,"amount_precision"),price:this.safeInteger(o,"price_precision")},v={amount:{min:this.safeFloat(o,"minimum_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(o,"minimum_value"),max:void 0}},m=this.safeValue(o,"is_allow",1),y=!!m,b="spot"===(g="spot"),k="margin"===g,a.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:y,type:g,spot:b,margin:k,precision:p,limits:v,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsV1",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=this.safeValue(r,"data",[]),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"market"),d=u.split("_"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,y={amount:this.safeInteger(c,"volume_precision"),price:this.safeInteger(c,"price_precision")},g={amount:{min:this.safeFloat(c,"min_volume"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(c,"min_amount"),max:void 0}},b=void 0,s.push({id:u,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:b,precision:y,limits:g,info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r=this.safeString(this.options,"defaultType","spot"),i=this.safeString(t,"type",r),t=this.omit(t,"type"),a="privateGet"+this.capitalize(i)+"Assets",e.next=7,this[a](t);case 7:for(s=e.sent,o=this.safeValue(s,"list",[]),c={info:s},u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).used=this.safeFloat(d,"frozen"),f.free=this.safeFloat(d,"free"),f.total=this.safeFloat(d,"total"),c[l]=f;return e.abrupt("return",this.parseBalance(c));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,i));case 9:return o=e.sent,c=this.safeTimestamp(o,"date"),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(i=e.sent,a={},s=this.safeValue(i,"ticker",[]),o=this.safeInteger(i,"date"),c=0;c<s.length;c++)u=this.extend({date:o},s[c]),d=this.parseTicker(u),h=d.symbol,a[h]=d;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeInteger(s,"date"),c=this.safeValue(s,"ticker",[]),u=this.safeValue(c,0,{}),d=this.extend({date:o},u),e.abrupt("return",this.parseTicker(d,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeStringUpper(e,"symbol"),i=this.safeSymbol(r,t,"_"),n=this.safeTimestamp(e,"date"),a=this.safeFloat(e,"last"),s=this.safeFloat(e,"change");return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:s,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"base_vol"),info:e}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"order_id"),n=this.safeTimestamp2(e,"date","timestamp"),a=this.safeString2(e,"type","side"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=void 0;void 0!==s&&void 0!==o&&(c=s*o);var u=this.safeString(e,"symbol"),d=this.safeSymbol(u,t,"_"),h=this.safeValue(e,"is_maker"),l=this.safeFloat(e,"fee"),f=void 0;if(void 0!==l){var p=this.safeString(e,"fee_currency"),v=this.safeCurrencyCode(p);f={cost:l,currency:v}}return{id:r,info:e,timestamp:n,datetime:this.iso8601(n),symbol:d,type:void 0,order:i,side:a,price:s,amount:o,cost:c,takerOrMaker:h,fee:f}}},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"server_time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=a(n.mark((function e(){var t,r=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,this.publicGetPing(t);case 3:return this.status=this.extend(this.status,{status:"ok",updated:this.milliseconds()}),e.abrupt("return",this.status);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,5),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,1)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",i=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,period:this.timeframes[r]},void 0!==i?(u=parseInt(i/1e3),c.start_time=u,void 0!==a&&(d=this.parseTimeframe(r),c.end_time=this.sum(u,a*d))):void 0!==a&&(h=this.seconds(),l=this.parseTimeframe(r),c.startTime=this.sum(h,-a*l)),e.next=11,this.publicGetKline(this.extend(c,s));case 11:return f=e.sent,p=this.safeValue(f,"data",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,i,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=this.safeString(this.options,"defaultType","spot"),d=this.safeString(o,"type",u),o=this.omit(o,"type"),h={market:d,symbol:c.id,amount:this.amountToPrecision(t,a)},l="","market"===r?l="_market":h.price=this.priceToPrecision(t,s),h.type=i+l,e.next=14,this.privatePostMarketOrderNew(this.extend(h,o));case 14:return f=e.sent,p=this.parseOrder(f,c),e.abrupt("return",this.extend(p,{symbol:t,side:i,type:r,amount:a,price:s}));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString(this.options,"defaultType","spot"),a=this.safeString(r,"type",i),r=this.omit(r,"type"),s={market:a,order_id:t},e.next=10,this.privatePostMarketOrderCancel(this.extend(s,r));case 10:if(o=e.sent,c=this.safeValue(o,"success",[]),1===c.length){e.next=15;break}throw new T(this.id+" cancelOrder "+t+" not found");case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i=this.safeString(this.options,"defaultType","spot"),a=this.safeString(r,"type",i),r=this.omit(r,"type"),s={market:a,order_id:t.join(",")},e.next=10,this.privatePostCancelOrder(this.extend(s,r));case 10:if(o=e.sent,c=this.safeValue(o,"success",[]),!(c.length<1)){e.next=15;break}throw new T(this.id+" cancelOrders error");case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"canceled",4:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeTimestamp(e,"created_date"),n=this.safeTimestamp(e,"finished_date"),a=this.safeString(e,"type"),s=void 0;if(void 0!==a){var o=a.split("_"),c=o.length;c>1?(a=o[0],s=o[1]):s="limit"}var u=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeString(e,"symbol"),h=this.safeSymbol(d,t,"_"),l=this.safeFloat(e,"amount"),f=this.safeFloat(e,"executed_amount"),p=this.safeFloat(e,"price"),v=this.safeFloat(e,"avg_price");return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:n,symbol:h,type:s,timeInForce:void 0,postOnly:void 0,side:a,price:p,stopPrice:void 0,amount:l,filled:f,remaining:void 0,cost:void 0,average:v,status:u,fee:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return c=void 0,u={market:o},void 0!==t&&(c=this.market(t),u.symbol=c.id),e.next=14,this.privateGetMarketOrderCurrent(this.extend(u,a));case 14:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(h,c,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return c=void 0,u={market:o},void 0!==t&&(c=this.market(t),u.symbol=c.id),void 0!==r&&(u.start_time=parseInt(r/1e3)),void 0!==i&&(u.limit=i),e.next=16,this.privateGetMarketOrderHistory(this.extend(u,a));case 16:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(h,c,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:{},a=this.safeString(this.options,"defaultType","spot"),s=this.safeString(i,"type",a),i=this.omit(i,"type"),e.next=7,this.loadMarkets();case 7:return o=void 0,void 0!==r&&(o=this.market(r)),c={market:s,order_id:t},e.next=12,this.privateGetMarketOrder(this.extend(c,i));case 12:if(u=e.sent,d=this.safeValue(u,"data",[]),void 0!==(h=this.safeValue(d,0))){e.next=17;break}throw new T(this.id+" fetchOrder() order "+t+" not found");case 17:return e.abrupt("return",this.parseOrder(h,o));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return c=void 0,u={market:o},void 0!==t&&(c=this.market(t),u.symbol=c.id),void 0!==r&&(u.start_time=parseInt(r/1e3)),void 0!==i&&(u.limit=i),e.next=16,this.privateGetMarketMytrades(this.extend(u,a));case 16:return d=e.sent,h=this.safeValue(d,"list",[]),e.abrupt("return",this.parseTrades(h,c,r,i));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"num"),i=void 0,n=this.parseLedgerEntryType(this.safeString(e,"type")),a=this.safeCurrencyCode(this.safeString(e,"currency_mark"),t),s=this.safeTimestamp(e,"time"),o=void 0,c=this.safeFloat(e,"balance"),u="ok";return{info:e,id:r,direction:void 0,account:i,referenceId:void 0,referenceAccount:void 0,type:n,currency:a,amount:void 0,before:o,after:c,status:u,timestamp:s,datetime:this.iso8601(s),fee:void 0}}},{key:"fetchLedger",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},s=this.safeString(this.options,"defaultType","spot"),o=this.safeString(a,"type",s),a=this.omit(a,"type"),e.next=9,this.loadMarkets();case 9:return c={market:o},u=void 0,void 0!==t&&(u=this.currency(t),c.currency_mark=u.id),void 0!==r&&(c.start_time=parseInt(r/1e3)),void 0!==i&&(c.limit=i),e.next=16,this.privateGetMarketFinancelog(this.extend(c,a));case 16:return d=e.sent,h=this.safeValue(d,"data",{}),l=this.safeValue(h,"finance",[]),e.abrupt("return",this.parseLedger(l,u,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddresses",value:function(e){for(var t={},r=0;r<e.length;r++){var i=this.parseDepositAddress(e[r]);t[i.currency]=i}return t}},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"addressTag"),i=this.safeStringUpper(e,"currency"),n=this.safeCurrencyCode(i);return{info:e,code:n,address:t,tag:r}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),c=this.parseDepositAddresses(o),void 0!==(u=this.safeValue(c,t))){e.next=13;break}throw new S(this.id+" fetchDepositAddress did not return an address for "+t+" - create the deposit address in the user settings on the exchange website first.");case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,c={},void 0!==r&&(o=this.currency(r),c.currency=o.id),void 0!==a&&(c.size=Math.min(500,a)),u="deposit"===t?"privateGetDepositHistory":"privateGetWithdrawHistory",e.next=13,this[u](this.extend(c,s));case 13:return d=e.sent,h=this.safeValue(d,"data",[]),e.abrupt("return",this.parseTransactions(h,o,i,a,{type:t}));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposit",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdrawal",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"canceled",2:"pending",3:"failed",4:"pending",5:"failed",6:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","withdraw_id"),i=this.safeString(e,"address"),n=this.safeString(e,"memo");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeString(e,"hash"),s=this.safeStringUpper(e,"currency"),o=this.safeCurrencyCode(s,t),c=this.parse8601(this.safeString(e,"created_date")),u=this.parse8601(this.safeString(e,"finished_date")),d=this.parseTransactionStatus(this.safeString(e,"state")),h=this.safeFloat(e,"amount"),l=this.safeFloat(e,"fee"),f=void 0;return void 0!==l&&(f={currency:o,cost:l}),{info:e,id:r,txid:a,timestamp:c,datetime:this.iso8601(c),address:i,addressTo:i,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,type:void 0,amount:h,currency:o,status:d,updated:u,fee:f}}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={address:i,amount:parseFloat(r),currency:o.id},void 0!==a&&(c.memo=a),e.next=10,this.privatePostWithdrawNew(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",this.parseTransaction(u,o));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.version,o=this.urls.api+"/"+s+"/"+this.implodeParams(e,i),c=this.omit(i,this.extractParams(e)),u=this.urlencode(this.keysort(c));if("private"===t){var d=this.nonce().toString(),h=u,l=this.hmac(this.encode(h),this.encode(this.secret));"GET"===r?u&&(o+="?"+u):"POST"===r&&(n={"Content-Type":"application/x-www-form-urlencoded"},u&&(a=u)),n={"ACCESS-KEY":this.apiKey,"ACCESS-SIGN":l,"ACCESS-TIMESTAMP":d}}else u&&(o+="?"+u);return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,n,a,s,o,c,u){if(o){var d=this.safeString(o,"code");if("0"!==d&&"200"!==d){var h=this.id+" "+s;if(void 0===d)throw new m(h);var l=[x,h],f=this.safeValue(this.exceptions.exact,d,l),p=i(f,2);throw new(0,p[0])(p[1])}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadSymbol;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"equos",name:"EQUOS",countries:["US","SG"],rateLimit:10,has:{CORS:!1,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!1,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":1,"5m":2,"15m":3,"1h":4,"6h":5,"1d":6,"7d":7},urls:{logo:"https://user-images.githubusercontent.com/1294454/107758499-05edd180-6d38-11eb-9e09-0b69602a7a15.jpg",test:{public:"https://testnet.equos.io/api",private:"https://testnet.equos.io/api"},api:{public:"https://equos.io/api",private:"https://equos.io/api"},www:"https://equos.io",doc:["https://developer.equos.io"],referral:"https://equos.io?referredByCode=zpa8kij4ouvBFup3"},api:{public:{get:["health","getInstruments","getInstrumentPairs","getOrderBook","getRisk","getTradeHistory","getFundingRateHistory","getChart","getExchangeInfo"]},private:{post:["logon","order","cancelOrder","cancelReplaceOrder","getOrder","getOrders","getOrderStatus","getOrderHistory","userTrades","getPositions","cancelAll","getUserHistory","getRisk","getDepositAddresses","getDepositHistory","getWithdrawRequests","sendWithdrawRequest","getTransferHistory"]}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},exceptions:{broad:{"symbol not found":v}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},r={verbose:!0},e.next=4,this.publicGetGetInstrumentPairs(this.extend(r,t));case 4:for(n=e.sent,a=this.safeValue(n,"instrumentPairs",[]),s=[],o=0;o<a.length;o++)c=this.parseMarket(a[o]),s.push(c);return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=this.safeString(e,"instrumentId"),r=this.safeString(e,"symbol"),i=this.safeString(e,"assetType"),n="PAIR"===i,a="PERPETUAL_SWAP"===i,s=a?"swap":"spot",o=this.safeString(e,"currency"),c=this.safeString(e,"contAmtCurr"),u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c);return{id:t,uppercaseId:r,symbol:a?r:u+"/"+d,base:u,quote:d,baseId:o,quoteId:c,type:s,spot:n,swap:a,active:1===this.safeInteger(e,"securityStatus"),precision:{amount:this.safeInteger(e,"quantity_scale"),price:this.safeInteger(e,"price_scale")},limits:{amount:{min:this.safeFloat(e,"minTradeVol"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:e}}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.publicGetGetInstruments(t);case 3:for(r=e.sent,n={},a=this.safeValue(r,"instruments",[]),s=0;s<a.length;s++)o=this.parseCurrency(a[s]),c=o.code,n[c]=o;return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseCurrency",value:function(e){var t=this.safeString(e,0),r=this.safeString(e,1),i=this.safeCurrencyCode(r),n=this.safeInteger(e,2),a=this.safeInteger(e,3),s=Math.max(n,a),o=this.safeString(e,6),c=1===this.safeInteger(e,4);return{id:t,info:e,uppercaseId:r,code:i,name:o,precision:s,fee:this.safeFloat(e,5),active:c,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"1m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={pairId:parseInt(o.id),timespan:this.timeframes[r]},void 0!==a&&(c.limit=a),e.next=11,this.publicGetGetChart(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"chart",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,0),i=this.convertFromScale(e[1],t.precision.price),n=this.convertFromScale(e[2],t.precision.price),a=this.convertFromScale(e[3],t.precision.price),s=this.convertFromScale(e[4],t.precision.price),o=this.convertFromScale(e[5],t.precision.amount);return[r,i,n,a,s,o]}},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(void 0===i)throw new p(this.id+" parseBidAsk() requires a market argument");var n=this.safeFloat(e,t),a=this.safeFloat(e,r);return[this.convertFromScale(n,i.precision.price),this.convertFromScale(a,i.precision.amount)]}},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,o={timestamp:t,datetime:this.iso8601(t),nonce:void 0},c=[r,i],u=0;u<c.length;u++){for(var d=c[u],h=[],l=this.safeValue(e,d),f=0;f<l.length;f++)h.push(this.parseBidAsk(l[f],n,a,s));o[d]=h}return o[r]=this.sortBy(o[r],0,!0),o[i]=this.sortBy(o[i],0),o}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={pairId:parseInt(n.id)},e.next=8,this.publicGetGetOrderBook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks",0,1,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pairId:parseInt(s.id)},e.next=9,this.publicGetGetTradeHistory(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,s,r,n,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,c=void 0,u=void 0,d=void 0,h=void 0;if(Array.isArray(e)){r=this.safeString(e,3),o=this.convertFromScale(this.safeInteger(e,0),t.precision.price),c=this.convertFromScale(this.safeInteger(e,1),t.precision.amount),i=this.toMilliseconds(this.safeString(e,2));var l=this.safeInteger(e,4);1===l?s="buy":2===l&&(s="sell")}else{r=this.safeString(e,"execId"),i=this.safeInteger(e,"time");var f=this.safeString(e,"symbol");h=this.safeSymbol(f,t),n=this.safeString(e,"orderId"),s=this.safeStringLower(e,"side"),a=this.parseOrderType(this.safeString(e,"ordType")),o=this.safeFloat(e,"lastPx"),c=this.safeFloat(e,"quoteQty");var p=this.safeFloat(e,"commission");if(void 0!==p){p=-p;var v=this.safeString(e,"commCurrency"),m=this.safeCurrencyCode(v);d={cost:p,currency:m}}}return void 0===h&&void 0!==t&&(h=t.symbol),void 0===u&&void 0!==c&&void 0!==o&&(u=c*o),{info:e,id:r,timestamp:i,datetime:this.iso8601(i),symbol:h,order:n,type:a,side:s,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:d}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetPositions(t);case 5:for(r=e.sent,n=this.safeValue(r,"positions",[]),a={info:r},s=0;s<n.length;s++)o=n[s],"ASSET"===this.safeString(o,"assetType")&&(c=this.safeString(o,"symbol"),u=this.safeCurrencyCode(c),d=this.safeFloat(o,"quantity"),h=this.safeFloat(o,"availableQuantity"),l=this.safeInteger(o,"quantity_scale"),(f=this.account()).free=this.convertFromScale(h,l),f.total=this.convertFromScale(d,l),a[u]=f);return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u="buy"===n?1:2,d=this.getScale(a),h={instrumentId:parseInt(c.id),symbol:c.uppercaseId,side:u,quantity:this.convertToScale(a,d),quantity_scale:d},"market"!==r){e.next=12;break}h.ordType=1,e.next=32;break;case 12:if("limit"!==r){e.next=17;break}h.ordType=2,h.price=this.convertToScale(s,this.getScale(s)),e.next=32;break;case 17:if(l=this.safeFloat2(o,"stopPrice","stopPx"),o=this.omit(o,["stopPrice","stopPx"]),void 0!==l){e.next=31;break}if("stop"!==r){e.next=27;break}if(void 0!==s){e.next=23;break}throw new p(this.id+" createOrder() requires a price argument or a stopPrice parameter or a stopPx parameter for "+r+" orders");case 23:h.ordType=3,h.stopPx=this.convertToScale(s,this.getScale(s)),e.next=29;break;case 27:if("stop limit"!==r){e.next=29;break}throw new p(this.id+" createOrder() requires a stopPrice parameter or a stopPx parameter for "+r+" orders");case 29:e.next=32;break;case 31:"stop"===r?(h.ordType=3,h.stopPx=this.convertToScale(l,this.getScale(l))):"stop limit"===r&&(h.ordType=4,f=this.getScale(s),v=this.getScale(l),h.price_scale=f,h.stopPx_scale=v,h.stopPx=this.convertToScale(l,v),h.price=this.convertToScale(s,f));case 32:return e.next=34,this.privatePostOrder(this.extend(h,o));case 34:return m=e.sent,e.abrupt("return",this.parseOrder(m,c));case 36:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={origOrderId:parseInt(t),instrumentId:parseInt(a.id)},e.next=10,this.privatePostCancelOrder(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,c,u,d,h,l,f,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.length>5&&void 0!==g[5]?g[5]:void 0,c=g.length>6&&void 0!==g[6]?g[6]:{},e.next=4,this.loadMarkets();case 4:if(u=this.market(r),d="buy"===a?1:2,h=this.getScale(s),l={origOrderId:t,instrumentId:parseInt(u.id),symbol:u.uppercaseId,side:d,quantity:this.convertToScale(s,h),quantity_scale:h},"market"!==n){e.next=12;break}l.ordType=1,e.next=32;break;case 12:if("limit"!==n){e.next=17;break}l.ordType=2,l.price=this.convertToScale(o,this.getScale(o)),e.next=32;break;case 17:if(f=this.safeFloat2(c,"stopPrice","stopPx"),c=this.omit(c,["stopPrice","stopPx"]),void 0!==f){e.next=31;break}if("stop"!==n){e.next=27;break}if(void 0!==o){e.next=23;break}throw new p(this.id+" editOrder() requires a price argument or a stopPrice parameter or a stopPx parameter for "+n+" orders");case 23:l.ordType=3,l.stopPx=this.convertToScale(o,this.getScale(o)),e.next=29;break;case 27:if("stop limit"!==n){e.next=29;break}throw new p(this.id+" editOrder() requires a stopPrice parameter or a stopPx parameter for "+n+" orders");case 29:e.next=32;break;case 31:"stop"===n?(l.ordType=3,l.stopPx=this.convertToScale(f,this.getScale(f))):"stop limit"===n&&(l.ordType=4,v=this.getScale(o),m=this.getScale(f),l.price_scale=v,l.stopPx_scale=m,l.stopPx=this.convertToScale(f,m),l.price=this.convertToScale(o,v));case 32:return e.next=34,this.privatePostOrder(this.extend(l,c));case 34:return y=e.sent,e.abrupt("return",this.parseOrder(y,u));case 36:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:parseInt(t)},e.next=7,this.privatePostGetOrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={ordStatus:"2"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={ordStatus:"4"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.instrumentId=parseInt(s.id)),void 0!==n&&(o.limit=n),e.next=12,this.privatePostGetOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(u,s,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.instrumentId=o.id),void 0!==r&&(s.startTime=r),e.next=12,this.privatePostUserTrades(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={instrumentId:parseInt(n.id)},e.next=7,this.privatePostGetDepositAddresses(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"addresses",[]),c=this.safeValue(o,0),e.abrupt("return",this.parseDepositAddress(c,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"address");return this.checkAddress(n),{currency:i,address:n,tag:void 0,info:e}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.instrumentId=parseInt(o.id)),e.next=11,this.privatePostGetDepositHistory(this.extend(s,a));case 11:return c=e.sent,u=this.safeValue(c,"deposits",[]),e.abrupt("return",this.parseTransactions(u,o,r,n,{type:"deposit"}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.instrumentId=parseInt(o.id)),e.next=11,this.privatePostGetWithdrawRequests(this.extend(s,a));case 11:return c=e.sent,u=this.safeValue(c,"addresses",[]),e.abrupt("return",this.parseTransactions(u,o,r,n,{type:"withdrawal"}));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id","transactionId"),i=this.safeString(e,"transactionUuid"),n=this.safeInteger(e,"timestamp"),a=this.safeString(e,"address");"null"===a&&(a=void 0);var s=this.safeString(e,"type"),o=this.safeFloat(e,"balance_change");if(void 0===o){o=this.safeInteger(e,"quantity");var c=this.safeInteger(e,"quantity_scale");o=this.convertFromScale(o,c)}var u=this.safeString(e,"symbol"),d=this.safeCurrencyCode(u,t),h=this.parseTransactionStatus(this.safeString(e,"status"));return{info:e,id:r,txid:i,timestamp:n,datetime:this.iso8601(n),addressFrom:void 0,address:a,addressTo:void 0,tagFrom:void 0,tag:void 0,tagTo:void 0,type:s,amount:o,currency:d,status:h,updated:void 0,comment:void 0,fee:void 0}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({0:"pending",1:"ok"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o=this.getScale(r),c=this.convertToScale(r,o),u={instrumentId:parseInt(s.id),symbol:s.uppercaseId,quantity:c,quantity_scale:o,address:n},e.next=11,this.privatePostSendWithdrawRequest(this.extend(u,a));case 11:return d=e.sent,e.abrupt("return",this.parseTransaction(d,s));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},e.next=3,this.publicGetGetExchangeInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"spotFees",[]),a={},s={},o=0;o<n.length;o++)c=n[o],void 0!==this.safeString(c,"tier")&&(a[c.tier]=this.safeFloat(c,"taker"),s[c.tier]=this.safeFloat(c,"maker"));return e.abrupt("return",{info:n,tierBased:!0,maker:s,taker:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetGetExchangeInfo(t);case 6:return r=e.sent,n=this.safeValue(r,"tradingLimits",[]),e.abrupt("return",{info:n,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingLimits",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetGetExchangeInfo(t);case 3:return r=e.sent,n=this.safeValue(r,"withdrawLimits",[]),e.abrupt("return",{info:n,withdraw:void 0});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"orderId","id");r=this.safeString(e,"origOrderId",r);var i=this.safeString(e,"clOrdId"),n=this.parseOrderType(this.safeString(e,"ordType")),a=this.parseOrderSide(this.safeString(e,"side")),s=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeString(e,"instrumentId"),c=this.safeSymbol(o,t),u=this.toMilliseconds(this.safeString(e,"timeStamp")),d=void 0,h=this.safeInteger(e,"price");0===h&&(h=void 0);var l=this.safeInteger(e,"price_scale");h=this.convertFromScale(h,l);var f=this.safeInteger(e,"quantity");0===f&&(f=void 0);var p=this.safeInteger(e,"quantity_scale");f=this.convertFromScale(f,p);var v=this.safeInteger(e,"cumQty"),m=this.safeInteger(e,"cumQty_scale");v=this.convertFromScale(v,m);var y=this.safeInteger(e,"leavesQty"),g=this.safeInteger(e,"leavesQty_scale");y=this.convertFromScale(y,g);var b=void 0,k=this.safeInteger(e,"feeInstrumentId"),x=this.safeCurrencyCode(k),w=this.safeInteger(e,"feeTotal"),_=this.safeInteger(e,"fee_scale");void 0!==w&&(w=-w,w=this.convertFromScale(w,_)),void 0!==w&&(b={currency:x,cost:w,rate:void 0});var O=this.parseTimeInForce(this.safeString(e,"timeInForce"));"0"===O&&(O=void 0);var T=this.safeInteger(e,"stopPx_scale",0),S=this.convertFromScale(this.safeInteger(e,"stopPx"),T);return this.safeOrder({info:e,id:r,clientOrderId:i,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:d,symbol:c,type:n,timeInForce:O,postOnly:void 0,side:a,price:h,stopPrice:S,amount:f,cost:void 0,average:void 0,filled:v,remaining:y,status:s,fee:b,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"open",2:"closed",3:"open",4:"canceled",5:"canceled",6:"canceling",7:"canceled",8:"rejected",9:"canceled",A:"open",B:"open",C:"expired",D:"open",E:"canceling",F:"open"},e,e)}},{key:"parseOrderSide",value:function(e){return this.safeString({1:"buy",2:"sell"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({1:"market",2:"limit",3:"stop",4:"stop limit"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({1:"GTC",3:"IOC",4:"FOK",5:"GTX",6:"GTD"},e,e)}},{key:"toMilliseconds",value:function(e){if(void 0===e)return e;var t=e.split("-"),r=this.safeString(t,0),i=this.safeString(t,1);if(void 0!==r&&void 0!==i&&8===r.length){var n=r.slice(0,4)+"-"+r.slice(4,6)+"-"+r.slice(6,8);return this.parse8601(n+" "+i)}}},{key:"convertFromScale",value:function(e,t){if(void 0!==e&&void 0!==t)return this.fromWei(e,t)}},{key:"getScale",value:function(e){var t=this.numberToString(e);return this.precisionFromString(t)}},{key:"convertToScale",value:function(e,t){if(void 0!==e&&void 0!==t)return parseInt(this.toWei(e,t))}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"error");if(void 0!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,u,d),this.throwBroadlyMatchedException(this.exceptions,a,d),new f(this.id+" "+a)}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){var c=this.safeValue(i,"format"),u=this.safeValue(i,"type"),d={};void 0!==c&&(d.format=c),void 0!==u&&(d.type=u),Object.keys(d).length&&(s+="?"+this.urlencode(d)),i=this.omit(i,["format","type"]),this.checkRequiredCredentials();var h=this.nonce();o=this.extend(o,{userId:this.uid,nonce:h}),i.nonce=this.nonce(),a=this.json(o);var l=this.hmac(this.encode(a),this.encode(this.secret),"sha384");n={"Content-Type":"application/json",requestToken:this.apiKey,signature:l}}return{url:s=this.urls.api[t]+"/"+s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.InvalidOrder,v=l.ExchangeError,m=l.BadRequest,y=l.BadSymbol,g=r(13),b=g.TRUNCATE,k=g.SIGNIFICANT_DIGITS;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"eterbase",name:"Eterbase",countries:["SK"],rateLimit:500,version:"v1",certified:!0,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,createOrder:!0,deposit:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","1h":"60","4h":"240","1d":"1440","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/1294454/82067900-faeb0f80-96d9-11ea-9f22-0071cfcb9871.jpg",api:"https://api.eterbase.exchange",www:"https://www.eterbase.com",doc:"https://developers.eterbase.exchange",fees:"https://www.eterbase.com/exchange/fees",referral:"https://eterbase.exchange/invite/1wjjh4Pe"},api:{markets:{get:["{id}/order-book"]},public:{get:["ping","assets","markets","tickers","tickers/{id}/ticker","markets/{id}/trades","markets/{id}/ohlcv","wstoken"]},private:{get:["accounts/{id}/balances","accounts/{id}/orders","accounts/{id}/fills","orders/{id}/fills","orders/{id}"],post:["orders","accounts/{id}/withdrawals"],delete:["orders/{id}"]},feed:{get:["feed"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.35/100,maker:.35/100}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},precisionMode:k,options:{createMarketBuyOrderRequiresPrice:!0},exceptions:{exact:{"Invalid cost":p,"Invalid order ID":p,"Invalid market !":y},broad:{"Failed to convert argument":m}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"pong"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=this.parseMarket(r[a]),n.push(s);return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){for(var t=this.safeString(e,"id"),r=this.safeString(e,"base"),i=this.safeString(e,"quote"),n=this.safeCurrencyCode(r),a=this.safeCurrencyCode(i),s=n+"/"+a,o="Trading"===this.safeString(e,"state"),c={price:this.safeInteger(e,"priceSigDigs"),amount:this.safeInteger(e,"qtySigDigs"),cost:this.safeInteger(e,"costSigDigs")},u=this.safeValue(e,"tradingRules",[]),d=void 0,h=void 0,l=void 0,f=void 0,p=0;p<u.length;p++){var v=u[p],m=this.safeString(v,"attribute"),y=this.safeString(v,"condition"),g=this.safeFloat(v,"value");"Qty"===m&&"Min"===y?d=g:"Qty"===m&&"Max"===y?h=g:"Cost"===m&&"Min"===y?l=g:"Cost"===m&&"Max"===y&&(f=g)}return{id:t,symbol:s,base:n,quote:a,baseId:r,quoteId:i,info:e,active:o,precision:c,limits:{amount:{min:d,max:h},price:{min:void 0,max:void 0},cost:{min:l,max:f}}}}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),c=this.safeInteger(s,"precisionDisplay"),u=this.safeCurrencyCode(o),d=this.safeValue(s,"depositEnabled"),h=this.safeValue(s,"withdrawalEnabled"),l=this.safeString(s,"state"),f=d&&h&&"Active"===l,p=this.safeStringLower(s,"type"),v=this.safeString(s,"name"),n[u]={id:o,info:s,code:u,type:p,name:v,active:f,fee:this.safeFloat(s,"withdrawalFee"),precision:c,limits:{amount:{min:Math.pow(10,-c),max:Math.pow(10,c)},price:{min:Math.pow(10,-c),max:Math.pow(10,c)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"withdrawalMin"),max:this.safeFloat(s,"withdrawalMax")}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"marketId"),i=this.safeSymbol(r,t),n=this.safeInteger(e,"time"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"volumeBase"),o=this.safeFloat(e,"volume"),c=this.vwap(s,o),u=this.safeFloat(e,"change"),d={symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:c,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:u,average:void 0,baseVolume:s,quoteVolume:o,info:e};return d}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},e.next=7,this.publicGetTickersIdTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return n={},e.next=7,this.publicGetTickers(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseTickers(a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeFloat(e,"price"),i=this.safeFloat(e,"qty"),n=void 0,a=this.safeFloat(e,"fee");if(void 0!==a){var s=this.safeString(e,"feeAsset");n={cost:a,currency:this.safeCurrencyCode(s)}}var o=this.safeFloat(e,"qty");void 0===o&&void 0!==r&&void 0!==i&&(o=r*i);var c=this.safeInteger2(e,"executedAt","filledAt"),u="1"===this.safeString(e,"side")?"buy":"sell",d=this.safeString(e,"liquidity"),h=void 0;void 0!==d&&(h="1"===d?"maker":"taker");var l=this.safeString(e,"orderId"),f=this.safeString(e,"id"),p=this.safeString(e,"marketId");return{info:e,id:f,symbol:this.safeSymbol(p,t),timestamp:c,datetime:this.iso8601(c),order:l,type:void 0,side:u,takerOrMaker:h,price:r,amount:i,cost:o,fee:n}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketsIdTrades(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.marketsGetIdOrderBook(this.extend(n,r));case 7:return a=e.sent,s=this.safeInteger(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},o={interval:this.timeframes[r]},c=this.parseTimeframe(r),u=this.milliseconds(),void 0===n){e.next=12;break}o.start=n,o.end=void 0===a?u:this.sum(n,c*a*1e3),e.next=18;break;case 12:if(void 0===a){e.next=17;break}o.start=u-c*a*1e3,o.end=u,e.next=18;break;case 17:throw new f(this.id+" fetchOHLCV() requires a since argument, or a limit argument, or both");case 18:return e.next=20,this.loadMarkets();case 20:return d=this.market(t),o.id=d.id,e.next=24,this.publicGetMarketsIdOhlcv(this.extend(o,s));case 24:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,d,r,n,a));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return r={id:this.uid},e.next=6,this.privateGetAccountsIdBalances(this.extend(r,t));case 6:for(n=e.sent,a={info:n},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"assetId"),u=this.safeCurrencyCode(c),d={free:this.safeFloat(o,"available"),used:this.safeFloat(o,"reserved"),total:this.safeFloat(o,"balance")},a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){var t={1:void 0,2:"open",3:"open",4:"closed",FILLED:"closed",USER_REQUESTED_CANCEL:"canceled",ADMINISTRATIVE_CANCEL:"canceled",NOT_ENOUGH_LIQUIDITY:"canceled",EXPIRED:"expired",ONE_CANCELS_OTHER:"canceled"};return this.safeString(t,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"placedAt"),n=this.safeInteger(e,"marketId"),a=this.safeSymbol(n,t),s=this.parseOrderStatus(this.safeString(e,"state"));"closed"===s&&(s=this.parseOrderStatus(this.safeString(e,"closeReason")));var o=this.safeString(e,"side"),c="1"===o?"buy":"sell",u=this.safeString(e,"type"),d=void 0;d="1"===u?"market":"2"===u?"limit":"3"===u?"stopmarket":"stoplimit";var h=this.safeFloat(e,"limitPrice"),l=this.safeFloat(e,"qty"),f=this.safeFloat(e,"remainingQty"),p=void 0,v=this.safeFloat(e,"remainingCost");void 0!==v&&0===v&&(f=0),void 0!==l&&void 0!==f&&(p=Math.max(0,l-f));var m=this.safeFloat(e,"cost");"market"===d&&0===h&&void 0!==m&&void 0!==p&&m>0&&p>0&&(h=m/p);var y=void 0;void 0!==m&&p&&(y=m/p);var g=this.safeString(e,"timeInForce"),b=this.safeFloat(e,"stopPrice"),k=this.safeValue(e,"postOnly");return{info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:a,type:d,timeInForce:g,postOnly:k,side:c,price:h,stopPrice:b,amount:l,cost:m,average:y,filled:p,remaining:f,status:s,fee:void 0,trades:void 0}}},{key:"fetchOrdersByState",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},o=this.milliseconds(),c=7776e6,u={id:this.uid,state:t},void 0===n?(u.from=o-c,u.to=o):(u.from=n,u.to=this.sum(n,c)),e.next=10,this.loadMarkets();case 10:return d=void 0,void 0!==r&&(d=this.market(r),u.marketId=d.id),void 0!==a&&(u.limit=a),e.next=15,this.privateGetAccountsIdOrders(this.extend(u,s));case 15:return h=e.sent,e.abrupt("return",this.parseOrders(h,d,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("INACTIVE",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("ACTIVE",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},s=this.milliseconds(),o=7776e6,c={id:this.uid},void 0===r?(c.from=s-o,c.to=s):(c.from=r,c.to=this.sum(r,o)),e.next=10,this.loadMarkets();case 10:return u=void 0,void 0!==t&&(u=this.market(t),c.marketId=u.id),void 0!==n&&(c.limit=n),e.next=15,this.privateGetAccountsIdFills(this.extend(c,a));case 15:return d=e.sent,e.abrupt("return",this.parseTrades(d,u,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,r=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.loadMarkets();case 6:return n={id:t},e.next=9,this.privateGetOrdersIdFills(this.extend(n,r));case 9:return a=e.sent,e.abrupt("return",this.parseTrades(a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),"MARKET"===(u=r.toUpperCase())?r=1:"LIMIT"===u?r=2:"STOPMARKET"===u?r=3:"STOPLIMIT"===u&&(r=4),d=n.toUpperCase(),n="BUY"===d?1:2,h={accountId:this.uid,marketId:c.id,type:r,side:n},l=this.safeValue2(o,"refId","clientOrderId"),f=o,void 0!==l&&(h.refId=l,f=this.omit(o,["refId","clientOrderId"])),"MARKET"!==u||"BUY"!==d){e.next=29;break}if(v=this.safeFloat(o,"cost"),!this.options.createMarketBuyOrderRequiresPrice){e.next=24;break}if(void 0!==v){e.next=22;break}if(void 0===s){e.next=21;break}v=a*s,e.next=22;break;case 21:throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 22:e.next=25;break;case 24:v=void 0===v?a:v;case 25:m=c.precision.price,h.cost=this.decimalToPrecision(v,b,m,this.precisionMode),e.next=30;break;case 29:h.qty=this.amountToPrecision(t,a);case 30:return"LIMIT"===u&&(h.limitPrice=this.priceToPrecision(t,s)),e.next=33,this.privatePostOrders(this.extend(h,f));case 33:return y=e.sent,e.abrupt("return",this.parseOrder(y,c));case 35:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:t},e.next=5,this.privateDeleteOrdersId(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={id:this.uid,accountId:this.uid,assetId:o.id,amount:r},void 0!==n&&(c.cryptoAddress=n,void 0!==a&&(c.memo=a)),e.next=10,this.privatePostAccountsIdWithdrawals(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",{info:u,id:this.safeString(u,"id")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="/";"public"===t||"private"===t?o+="api/"+this.version:"markets"===t&&(o+="api/"+t),o+="/"+this.implodeParams(e,i),"GET"===r&&Object.keys(s).length&&(o+="?"+this.urlencode(s));var c=this.urls.api+o;if("private"===t){this.checkRequiredCredentials();var u="";"GET"!==r&&Object.keys(s).length&&(u=a=this.json(s));var d="POST"===r||"PUT"===r||"PATCH"===r,h=this.rfc2616(this.milliseconds()),l="date request-line",f="date: "+h+"\n"+r+" "+o+" HTTP/1.1",p="";d&&(f+="\ndigest: "+(p="SHA-256="+this.hash(u,"sha256","base64")),l+=" digest");var v=this.hmac(this.encode(f),this.encode(this.secret),"sha256","base64"),m='hmac username="'+this.apiKey+'",algorithm="hmac-sha256",headers="'+l+'",signature="'+v+'"';n={Date:h,Authorization:m,"Content-Type":"application/json"},d&&(n.Digest=p)}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"message");if(void 0!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new v(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.ExchangeError,m=f.OrderNotFound,y=f.AuthenticationError,g=f.InsufficientFunds,b=f.InvalidOrder,k=f.InvalidNonce,x=f.NotSupported,w=f.OnMaintenance,_=f.RateLimitExceeded,O=f.BadRequest,T=f.PermissionDenied;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"exmo",name:"EXMO",countries:["ES","RU"],rateLimit:350,version:"v1.1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","45m":"45","1h":"60","2h":"120","3h":"180","4h":"240","1d":"D","1w":"W","1M":"M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766491-1b0ea956-5eda-11e7-9225-40d67b481b8d.jpg",api:{public:"https://api.exmo.com",private:"https://api.exmo.com",web:"https://exmo.me"},www:"https://exmo.me",referral:"https://exmo.me/?ref=131685",doc:["https://exmo.me/en/api_doc?ref=131685","https://github.com/exmo-dev/exmo_api_lib/tree/master/nodejs"],fees:"https://exmo.com/en/docs/fees"},api:{web:{get:["ctrl/feesAndLimits","en/docs/fees"]},public:{get:["currency","currency/list/extended","order_book","pair_settings","ticker","trades","candles_history","required_amount","payments/providers/crypto/list"]},private:{post:["user_info","order_create","order_cancel","stop_market_order_create","stop_market_order_cancel","user_open_orders","user_trades","user_cancelled_orders","order_trades","deposit_address","withdraw_crypt","withdraw_get_txid","excode_create","excode_load","code_check","wallet_history","wallet_operations"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1}},options:{useWebapiForFetchingFees:!1,feesAndLimits:{success:1,ctlr:"feesAndLimits",error:"",data:{limits:[{pair:"BTC/USD",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/RUB",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"2000000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BTC/EUR",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/GBP",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"30000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTC/UAH",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"15000000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BTC/PLN",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"20000000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"BTC/TRY",min_q:"0.0001",max_q:"1000",min_p:"1",max_p:"800000",min_a:"40",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"BTC/KZT",min_q:"0.0001",max_q:"1000",min_p:"1000",max_p:"12000000",min_a:"1000",max_a:"100000000",taker:"0.4",maker:"0.4"},{pair:"BTC/USDT",min_q:"0.0001",max_q:"1000",min_p:"0.01",max_p:"30000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/BTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/USD",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/RUB",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XRP/BTC",min_q:"1",max_q:"5000000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XRP/USD",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/RUB",min_q:"1",max_q:"5000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ADA/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ADA/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ADA/USD",min_q:"0.01",max_q:"10000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EXM",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"50",taker:"0.4",maker:"0.4"},{pair:"ALGO/USDT",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0",maker:"0"},{pair:"ALGO/RUB",min_q:"1",max_q:"1000000",min_p:"0.000001",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ALGO/EUR",min_q:"1",max_q:"1000000",min_p:"0.001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ATOM/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ATOM/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ATOM/EUR",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/USD",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"30000",min_a:"0.0001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/RUB",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"2000000",min_a:"0.0001",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"BCH/EUR",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"300000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BCH/UAH",min_q:"0.003",max_q:"5000",min_p:"0.1",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"BCH/BTC",min_q:"0.003",max_q:"5000",min_p:"0.00000001",max_p:"5",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BCH/ETH",min_q:"0.003",max_q:"5000",min_p:"0.0000001",max_p:"200",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BCH/USDT",min_q:"0.003",max_q:"5000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"BTG/USD",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"BTG/BTC",min_q:"0.01",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTG/ETH",min_q:"0.01",max_q:"100000",min_p:"0.0001",max_p:"100",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"BTT/RUB",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/UAH",min_q:"1",max_q:"500000000",min_p:"0.000001",max_p:"1000",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"BTT/BTC",min_q:"1",max_q:"500000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/BTC",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"CRON/ETH",min_q:"1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"CRON/USDT",min_q:"1",max_q:"100000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"CRON/EXM",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"DAI/USD",min_q:"1",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DAI/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"0.5",max_a:"30000000",taker:"0.4",maker:"0.4"},{pair:"DAI/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DAI/ETH",min_q:"1",max_q:"500000",min_p:"0.000001",max_p:"10",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"DASH/USD",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DASH/RUB",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"DASH/UAH",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"200000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"DASH/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DASH/USDT",min_q:"0.01",max_q:"10000",min_p:"0.01",max_p:"5000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"DCR/RUB",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"3000000",taker:"0.4",maker:"0.4"},{pair:"DCR/UAH",min_q:"0.01",max_q:"50000",min_p:"0.00001",max_p:"100000",min_a:"0.25",max_a:"1000000",taker:"0.4",maker:"0.4"},{pair:"DCR/BTC",min_q:"0.01",max_q:"50000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"DOGE/USD",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"DOGE/BTC",min_q:"100",max_q:"500000000",min_p:"0.0000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"EOS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/EUR",min_q:"0.01",max_q:"500000",min_p:"0.001",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"EOS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETC/USD",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETC/RUB",min_q:"0.2",max_q:"100000",min_p:"0.01",max_p:"10000",min_a:"0.01",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ETC/BTC",min_q:"0.2",max_q:"100000",min_p:"0.0001",max_p:"0.5",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETH/EUR",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/GBP",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/UAH",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"1000000",min_a:"90",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ETH/PLN",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"2000000",taker:"0.4",maker:"0.4"},{pair:"ETH/TRY",min_q:"0.001",max_q:"5000",min_p:"0.1",max_p:"80000",min_a:"10",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ETH/KZT",min_q:"0.001",max_q:"5000",min_p:"4",max_p:"40000000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ETH/USDT",min_q:"0.001",max_q:"5000",min_p:"0.01",max_p:"100000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"ETH/LTC",min_q:"0.001",max_q:"5000",min_p:"0.00000001",max_p:"100000",min_a:"0.05",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"ETZ/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ETZ/ETH",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ETZ/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"1000",min_a:"0.01",max_a:"1000",taker:"0",maker:"0"},{pair:"EXM/USDT",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"EXM/ETH",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GAS/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GAS/BTC",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"GNT/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"GUSD/USD",min_q:"1",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"GUSD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"GUSD/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HP/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"HB/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LSK/USD",min_q:"0.1",max_q:"500000",min_p:"0.1",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LSK/RUB",min_q:"0.1",max_q:"500000",min_p:"0.001",max_p:"100000",min_a:"0.5",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LSK/BTC",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"1",min_a:"0.0015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"LTC/USD",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/RUB",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"100000",min_a:"150",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"LTC/EUR",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"10000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"LTC/UAH",min_q:"0.05",max_q:"10000",min_p:"0.01",max_p:"300000",min_a:"5",max_a:"18000000",taker:"0.4",maker:"0.4"},{pair:"LTC/BTC",min_q:"0.05",max_q:"10000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/BTC",min_q:"0.0001",max_q:"1000",min_p:"0.0001",max_p:"100",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MKR/DAI",min_q:"0.0001",max_q:"1000",min_p:"0.5",max_p:"500000",min_a:"0.005",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"MNC/USD",min_q:"10",max_q:"500000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"MNC/BTC",min_q:"10",max_q:"500000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"MNC/ETH",min_q:"10",max_q:"500000000",min_p:"0.0000001",max_p:"10",min_a:"0.00001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"NEO/USD",min_q:"0.01",max_q:"100000",min_p:"0.01",max_p:"50000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"NEO/RUB",min_q:"0.01",max_q:"100000",min_p:"0.001",max_p:"1500000",min_a:"50",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"NEO/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/USD",min_q:"0.01",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"OMG/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"OMG/ETH",min_q:"0.01",max_q:"500000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ONG/EXM",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONG/BTC",min_q:"1",max_q:"1000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONG/RUB",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"ONG/UAH",min_q:"1",max_q:"1000000",min_p:"0.01",max_p:"100000",min_a:"50",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/EXM",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"ONT/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"ONT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"100",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"ONT/UAH",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"100000",min_a:"200",max_a:"250000",taker:"0.4",maker:"0.4"},{pair:"PTI/RUB",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"600000",min_a:"10",max_a:"600000",taker:"0.4",maker:"0.4"},{pair:"PTI/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.000001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"PTI/EOS",min_q:"1",max_q:"50000000",min_p:"0.0000001",max_p:"5000",min_a:"0.01",max_a:"20000",taker:"0.4",maker:"0.4"},{pair:"PTI/USDT",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"10000",min_a:"0.01",max_a:"100000",taker:"0",maker:"0"},{pair:"QTUM/USD",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"10000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"QTUM/BTC",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"QTUM/ETH",min_q:"0.1",max_q:"500000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ROOBEE/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"SMART/USD",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/RUB",min_q:"10",max_q:"100000000",min_p:"0.0001",max_p:"100000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"SMART/EUR",min_q:"10",max_q:"100000000",min_p:"0.000001",max_p:"1000",min_a:"1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"SMART/BTC",min_q:"10",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"TRX/USD",min_q:"1",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/EUR",min_q:"0.01",max_q:"50000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"TRX/RUB",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/UAH",min_q:"1",max_q:"50000000",min_p:"0.000001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"TRX/BTC",min_q:"1",max_q:"50000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/USD",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDC/BTC",min_q:"1",max_q:"500000",min_p:"0.00000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USDC/ETH",min_q:"1",max_q:"500000",min_p:"0.0000001",max_p:"100",min_a:"0.001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"USDC/USDT",min_q:"1",max_q:"500000",min_p:"0.0001",max_p:"1000",min_a:"3",max_a:"500000",taker:"0",maker:"0"},{pair:"USDT/USD",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"USDT/EUR",min_q:"0.01",max_q:"500000",min_p:"0.1",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/GBP",min_q:"1",max_q:"500000",min_p:"0.5",max_p:"10",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"USDT/UAH",min_q:"0.01",max_q:"500000",min_p:"1",max_p:"3000",min_a:"2",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"USDT/KZT",min_q:"1",max_q:"500000",min_p:"200",max_p:"4000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"VLX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/USD",min_q:"0.5",max_q:"500000",min_p:"0.001",max_p:"3500",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"WAVES/RUB",min_q:"0.5",max_q:"500000",min_p:"0.01",max_p:"10000",min_a:"1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"WAVES/BTC",min_q:"0.5",max_q:"500000",min_p:"0.000001",max_p:"1",min_a:"0.0001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"WAVES/ETH",min_q:"0.5",max_q:"500000",min_p:"0.00001",max_p:"30",min_a:"0.0035",max_a:"3500",taker:"0.4",maker:"0.4"},{pair:"XEM/USD",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/EUR",min_q:"10",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XEM/UAH",min_q:"1",max_q:"10000000",min_p:"0.0001",max_p:"30000",min_a:"10",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XEM/BTC",min_q:"10",max_q:"10000000",min_p:"0.0000001",max_p:"1",min_a:"0.00015",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XLM/USD",min_q:"0.01",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XLM/RUB",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"XLM/TRY",min_q:"0.01",max_q:"5000000",min_p:"0.00001",max_p:"100000",min_a:"0.1",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XLM/BTC",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"600000",min_a:"10",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XMR/UAH",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"300000",min_a:"5",max_a:"16000000",taker:"0.4",maker:"0.4"},{pair:"XMR/BTC",min_q:"0.01",max_q:"10000",min_p:"0.0001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"XMR/ETH",min_q:"0.01",max_q:"10000",min_p:"0.00000001",max_p:"100",min_a:"0.001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XRP/EUR",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/GBP",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XRP/TRY",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"6000000",taker:"0.4",maker:"0.4"},{pair:"XRP/UAH",min_q:"1",max_q:"5000000",min_p:"0.0001",max_p:"1000",min_a:"0.01",max_a:"15000000",taker:"0.4",maker:"0.4"},{pair:"XRP/USDT",min_q:"1",max_q:"5000000",min_p:"0.001",max_p:"1000",min_a:"0.001",max_a:"500000",taker:"0",maker:"0"},{pair:"XRP/ETH",min_q:"1",max_q:"5000000",min_p:"0.00000001",max_p:"10",min_a:"0.00001",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"XTZ/USD",min_q:"0.1",max_q:"100000",min_p:"0.0001",max_p:"1000",min_a:"0.1",max_a:"100000",taker:"0.4",maker:"0.4"},{pair:"XTZ/RUB",min_q:"0.1",max_q:"100000",min_p:"0.00001",max_p:"100000",min_a:"0.5",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"XTZ/BTC",min_q:"0.1",max_q:"100000",min_p:"0.00000001",max_p:"1",min_a:"0.00001",max_a:"10",taker:"0.4",maker:"0.4"},{pair:"XTZ/ETH",min_q:"0.1",max_q:"100000",min_p:"0.0000001",max_p:"10",min_a:"0.0001",max_a:"1000",taker:"0.4",maker:"0.4"},{pair:"ZEC/USD",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/RUB",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"100000",min_a:"0.1",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"ZEC/EUR",min_q:"0.01",max_q:"10000",min_p:"0.001",max_p:"5000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZEC/BTC",min_q:"0.01",max_q:"10000",min_p:"0.00001",max_p:"10",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/USD",min_q:"0.01",max_q:"10000000",min_p:"0.00001",max_p:"1000",min_a:"0.1",max_a:"500000",taker:"0.4",maker:"0.4"},{pair:"ZRX/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"1",min_a:"0.001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"ZRX/ETH",min_q:"0.01",max_q:"10000000",min_p:"0.00000001",max_p:"10",min_a:"0.01",max_a:"5000",taker:"0.4",maker:"0.4"},{pair:"ZAG/BTC",min_q:"1",max_q:"10000000",min_p:"0.00000001",max_p:"0.1",min_a:"0.00001",max_a:"100",taker:"0.4",maker:"0.4"},{pair:"USD/RUB",min_q:"1",max_q:"500000",min_p:"0.01",max_p:"1000",min_a:"10",max_a:"50000000",taker:"0.4",maker:"0.4"},{pair:"EXM/BTC",min_q:"1",max_q:"100000000",min_p:"0.00000001",max_p:"1",min_a:"0.0000001",max_a:"1",taker:"0.4",maker:"0.4"}],fees:[{group:"crypto",title:"Cryptocurrency",items:[{prov:"EXM",dep:"0%",wd:"1 EXM"},{prov:"BTC",dep:"0%",wd:"0.0004 BTC"},{prov:"LTC",dep:"0%",wd:"0.01 LTC"},{prov:"DOGE",dep:"0%",wd:"1 Doge"},{prov:"DASH",dep:"0%",wd:"0.002 DASH"},{prov:"ETH",dep:"0%",wd:"0.003 ETH"},{prov:"WAVES",dep:"0%",wd:"0.001 WAVES"},{prov:"ZEC",dep:"0%",wd:"0.001 ZEC"},{prov:"USDT",dep:"0%",wd:""},{prov:"XMR",dep:"0%",wd:"0.001 XMR"},{prov:"XRP",dep:"0%",wd:"0.02 XRP"},{prov:"ETC",dep:"0%",wd:"0.01 ETC"},{prov:"BCH",dep:"0%",wd:"0.001 BCH"},{prov:"BTG",dep:"0%",wd:"0.001 BTG"},{prov:"EOS",dep:"0%",wd:"0.05 EOS"},{prov:"XLM",dep:"0%",wd:"0.01 XLM"},{prov:"OMG",dep:"0.1 OMG",wd:"0.5 OMG"},{prov:"TRX",dep:"0%",wd:"1 TRX"},{prov:"ADA",dep:"0%",wd:"1 ADA"},{prov:"NEO",dep:"0%",wd:"0%"},{prov:"GAS",dep:"0%",wd:"0%"},{prov:"ZRX",dep:"0%",wd:"1 ZRX"},{prov:"GNT",dep:"0%",wd:"1 GNT"},{prov:"GUSD",dep:"0%",wd:"0.5 GUSD"},{prov:"LSK",dep:"0%",wd:"0.1 LSK"},{prov:"XEM",dep:"0%",wd:"5 XEM"},{prov:"SMART",dep:"0%",wd:"0.5 SMART"},{prov:"QTUM",dep:"0%",wd:"0.01 QTUM"},{prov:"HB",dep:"0%",wd:"10 HB"},{prov:"DAI",dep:"0%",wd:"1 DAI"},{prov:"MKR",dep:"0%",wd:"0.005 MKR"},{prov:"MNC",dep:"0%",wd:"15 MNC"},{prov:"PTI",dep:"-",wd:"10 PTI"},{prov:"ETZ",dep:"0%",wd:"1 ETZ"},{prov:"USDC",dep:"0%",wd:"0.5 USDC"},{prov:"ROOBEE",dep:"0%",wd:"200 ROOBEE"},{prov:"DCR",dep:"0%",wd:"0.01 DCR"},{prov:"ZAG",dep:"0%",wd:"0%"},{prov:"BTT",dep:"0 BTT",wd:"100 BTT"},{prov:"VLX",dep:"0%",wd:"1 VLX"},{prov:"CRON",dep:"0%",wd:"5 CRON"},{prov:"ONT",dep:"0%",wd:"1 ONT"},{prov:"ONG",dep:"0%",wd:"5 ONG"},{prov:"ALGO",dep:"0%",wd:"0.01 ALGO"},{prov:"ATOM",dep:"0%",wd:"0.05 ATOM"}]},{group:"usd",title:"USD",items:[{prov:"Payeer",dep:"3.95%",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"2.49%"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 0.5 USD",wd:"-"},{prov:"Visa",dep:"3.45%",wd:"-"},{prov:"Frick Bank",dep:"0 USD",wd:"-"}]},{group:"eur",title:"EUR",items:[{prov:"Visa/MasterCard",dep:"4.5% + 0.5  EUR",wd:"-"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"2.95%",wd:"-"},{prov:"Frick Internal Transfer",dep:"0 EUR",wd:"-"},{prov:"SEPA Frick Bank",dep:"0 EUR",wd:"1 EUR"},{prov:"WIRE Frick Bank",dep:"0%",wd:"20 EUR"},{prov:"SEPA Weg Ag",dep:"-",wd:"1 EUR"}]},{group:"gbp",title:"GBP",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"WIRE Frick Bank",dep:"10 GBP",wd:"-"}]},{group:"rub",title:"RUB",items:[{prov:"Payeer",dep:"2.49%",wd:"3.49%"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Qiwi",dep:"1.49%",wd:"2.49%"},{prov:"Yandex Money",dep:"1.49%",wd:"1.95 %"},{prov:"AdvCash",dep:"0.99%",wd:"0.99%"},{prov:"Visa/MasterCard",dep:"2.99%",wd:"3.99% + 60 RUB"}]},{group:"pln",title:"PLN",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"}]},{group:"try",title:"TRY",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Visa",dep:"3.05%",wd:"-"},{prov:"Visa/MasterCard (Simplex)",dep:"4.5% + 2 TRY",wd:"-"},{prov:"AdvCash",dep:"0%",wd:"-"}]},{group:"uah",title:"UAH",items:[{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"Terminal",dep:"2.6%",wd:"-"},{prov:"Visa/MasterCard EasyTransfer",dep:"-",wd:"2.99%"},{prov:"Visa/MasterCard",dep:"1% + 5 UAH",wd:"-"}]},{group:"kzt",title:"KZT",items:[{prov:"Visa/MasterCard",dep:"3.5%",wd:"2.99% + 450 KZT"},{prov:"EX-CODE",dep:"",wd:"0.2%"},{prov:"AdvCash",dep:"0%",wd:"-"}]}]}}},exceptions:{exact:{40005:y,40009:k,40015:v,40016:w,40017:y,40032:T,40034:_,50052:g,50054:g,50304:m,50173:m,50277:b,50319:b,50321:b},broad:{"range period is too long":O,"invalid syntax":O,"API rate limit exceeded":_}},orders:{}})}},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:{},!this.options.useWebapiForFetchingFees){e.next=20;break}return e.next=4,this.webGetEnDocsFees(t);case 4:if(r=e.sent,i=r.split('<td class="th_fees_2" colspan="2">'),2===i.length){e.next=9;break}throw new x(this.id+" fetchTradingFees format has changed");case 9:if(a=i[1],i=a.split("</td>"),!(i.length<2)){e.next=14;break}throw new x(this.id+" fetchTradingFees format has changed");case 14:return s=.01*parseFloat(i[0].replace("%","")),o=s,c=s,e.abrupt("return",{maker:c,taker:o});case 20:return e.abrupt("return",{maker:this.fees.trading.maker,taker:this.fees.trading.taker});case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseFixedFloatValue",value:function(e){if(void 0!==e&&"-"!==e){if(""===e)return 0;var t=e.indexOf("%")>=0,r=e.split(" ")[0].replace("%",""),i=parseFloat(r);if(i>0&&t)throw new v(this.id+" parseFixedFloatValue detected an unsupported non-zero percentage-based fee "+e);return i}}},{key:"fetchFundingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:{},r=void 0,!this.options.useWebapiForFetchingFees){e.next=8;break}return e.next=5,this.webGetCtrlFeesAndLimits(t);case 5:r=e.sent,e.next=9;break;case 8:r=this.options.feesAndLimits;case 9:for(i={},a={},s=this.safeValue(r.data,"fees"),o=this.indexBy(s,"group"),c=o.crypto.items,u=0;u<c.length;u++)d=c[u],h=this.safeCurrencyCode(this.safeString(d,"prov")),l=this.safeString(d,"wd"),f=this.safeString(d,"dep"),void 0!==l&&(i[h]=this.parseFixedFloatValue(l)),void 0!==f&&(a[h]=this.parseFixedFloatValue(f));for(p=this.toArray(this.omit(o,"crypto")),v=0;v<p.length;v++)m=this.safeCurrencyCode(this.safeString(p[v],"title")),i[m]=void 0,a[m]=void 0;return y={info:r,withdraw:i,deposit:a},this.options.fundingFees=y,e.abrupt("return",y);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M,E,A,F,P,B,R=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=R.length>0&&void 0!==R[0]?R[0]:{},e.next=3,this.fetchFundingFees(t);case 3:for(r=e.sent,a=Object.keys(r.withdraw),s=this.indexBy(r.info.data.limits,"pair"),o=Object.keys(s),c={},u={},d={},h={},l={},f={},p=0;p<o.length;p++)v=o[p],m=s[v],y=v.split("/"),g=i(y,2),b=g[0],k=g[1],x=this.safeCurrencyCode(b),w=this.safeCurrencyCode(k),_=this.safeFloat(m,"max_q"),O=this.safeFloat(m,"max_p"),T=this.safeFloat(m,"max_a"),S=this.safeFloat(m,"min_q"),C=this.safeFloat(m,"min_p"),I=this.safeFloat(m,"min_a"),c[x]=Math.min(this.safeFloat(c,x,S),S),h[x]=Math.max(this.safeFloat(h,x,_),_),u[w]=Math.min(this.safeFloat(u,w,C),C),d[w]=Math.min(this.safeFloat(d,w,I),I),l[w]=Math.max(this.safeFloat(l,w,O),O),f[w]=Math.max(this.safeFloat(f,w,T),T);for(M={},E=0;E<a.length;E++)A=a[E],F=this.safeCurrencyCode(A),P=this.safeValue(r.withdraw,F),B=!0,M[F]={id:A,code:F,name:F,active:B,fee:P,precision:8,limits:{amount:{min:this.safeFloat(c,F),max:this.safeFloat(h,F)},price:{min:this.safeFloat(u,F),max:this.safeFloat(l,F)},cost:{min:this.safeFloat(d,F),max:this.safeFloat(f,F)}},info:A};return e.abrupt("return",M);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetPairSettings(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)c=a[o],u=r[c],d=c.replace("_","/"),h=d.split("/"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),y=this.safeFloat(u,"commission_taker_percent"),g=this.safeFloat(u,"commission_maker_percent"),s.push({id:c,symbol:d,base:v,quote:m,baseId:f,quoteId:p,active:!0,taker:y/100,maker:g/100,limits:{amount:{min:this.safeFloat(u,"min_quantity"),max:this.safeFloat(u,"max_quantity")},price:{min:this.safeFloat(u,"min_price"),max:this.safeFloat(u,"max_price")},cost:{min:this.safeFloat(u,"min_amount"),max:this.safeFloat(u,"max_amount")}},precision:{amount:8,price:this.safeInteger(u,"price_precision")},info:u});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:"1m",i=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:void 0,s=y.length>4&&void 0!==y[4]?y[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={symbol:o.id,resolution:this.timeframes[r]},u=this.safeValue(this.options,"fetchOHLCV"),d=this.safeInteger(u,"maxLimit",3e3),h=this.parseTimeframe(r),l=this.milliseconds(),void 0!==i){e.next=23;break}if(void 0!==a){e.next=17;break}throw new p(this.id+" fetchOHLCV() requires a since argument or a limit argument");case 17:if(!(a>d)){e.next=19;break}throw new O(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");case 19:c.from=parseInt(l/1e3)-a*h-1,c.to=parseInt(l/1e3);case 21:e.next=32;break;case 23:if(c.from=parseInt(i/1e3)-1,void 0!==a){e.next=28;break}c.to=parseInt(l/1e3),e.next=32;break;case 28:if(!(a>d)){e.next=30;break}throw new O(this.id+" fetchOHLCV will serve "+d.toString()+" candles at most");case 30:f=this.sum(i,a*h*1e3),c.to=parseInt(f/1e3);case 32:return e.next=34,this.publicGetCandlesHistory(this.extend(c,s));case 34:return v=e.sent,m=this.safeValue(v,"candles",[]),e.abrupt("return",this.parseOHLCVs(m,o,r,i,a));case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"t"),this.safeFloat(e,"o"),this.safeFloat(e,"h"),this.safeFloat(e,"l"),this.safeFloat(e,"c"),this.safeFloat(e,"v")]}},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostUserInfo(t);case 5:for(r=e.sent,i={info:r},a=this.safeValue(r,"balances",{}),s=this.safeValue(r,"reserved",{}),o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=this.currencyId(u),h=this.account(),d in a&&(h.free=this.safeFloat(a,d)),d in s&&(h.used=this.safeFloat(s,d)),i[u]=h;return e.abrupt("return",this.parseBalance(i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,i));case 9:return o=e.sent,c=this.safeValue(o,a.id),e.abrupt("return",this.parseOrderBook(c,void 0,"bid","ask"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:{},e.next=5,this.loadMarkets();case 5:if(a=void 0,void 0!==t){e.next=13;break}if(!((a=this.ids.join(",")).length>2048)){e.next=11;break}throw s=this.ids.length,new v(this.id+" has "+s.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:a=(a=this.marketIds(t)).join(",");case 15:return o={pair:a},void 0!==r&&(o.limit=r),e.next=19,this.publicGetOrderBook(this.extend(o,i));case 19:for(c=e.sent,u={},d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=l,l in this.markets_by_id&&(p=this.markets_by_id[l],f=p.symbol),u[f]=this.parseOrderBook(c[l],void 0,"bid","ask");return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last_trade");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy_price"),bidVolume:void 0,ask:this.safeFloat(e,"sell_price"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"vol_curr"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(i=e.sent,a={},s=Object.keys(i),o=0;o<s.length;o++)c=s[o],u=this.markets_by_id[c],d=u.symbol,h=i[c],a[d]=this.parseTicker(h,u);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.publicGetTicker(r);case 5:return i=e.sent,a=this.market(t),e.abrupt("return",this.parseTicker(i[a.id],a));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),n=void 0,a=this.safeString(e,"trade_id"),s=this.safeString(e,"order_id"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"quantity"),u=this.safeFloat(e,"amount"),d=this.safeString(e,"type"),h=void 0,l=this.safeString(e,"pair");if(void 0!==l)if(l in this.markets_by_id)t=this.markets_by_id[l];else{var f=l.split("_"),p=i(f,2),v=p[0],m=p[1],y=this.safeCurrencyCode(v),g=this.safeCurrencyCode(m);n=y+"/"+g}void 0===n&&void 0!==t&&(n=t.symbol);var b=this.safeString(e,"exec_type"),k=void 0,x=this.safeFloat(e,"commission_amount");if(void 0!==x){var w=this.safeString(e,"commission_currency"),_=this.safeCurrencyCode(w),O=this.safeFloat(e,"commission_percent");void 0!==O&&(O/=1e3),k={cost:x,currency:_,rate:O}}return{id:a,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,order:s,type:h,side:d,takerOrMaker:b,price:o,amount:c,cost:u,fee:k}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,s.id,[]),e.abrupt("return",this.parseTrades(u,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,v,m,y,g,b,k,x,w,_,O,T,S=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=S.length>0&&void 0!==S[0]?S[0]:void 0,r=S.length>1&&void 0!==S[1]?S[1]:void 0,a=S.length>2&&void 0!==S[2]?S[2]:void 0,s=S.length>3&&void 0!==S[3]?S[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument (a single symbol or an array)");case 6:return e.next=8,this.loadMarkets();case 8:if(o=void 0,c=void 0,!Array.isArray(t)){e.next=18;break}if(!(t.length<1)){e.next=14;break}throw new p(this.id+" fetchMyTrades() requires a non-empty symbol array");case 14:u=this.marketIds(t),o=u.join(","),e.next=20;break;case 18:c=this.market(t),o=c.id;case 20:return d={pair:o},void 0!==a&&(d.limit=a),e.next=24,this.privatePostUserTrades(this.extend(d,s));case 24:for(h=e.sent,l=[],f=Object.keys(h),v=0;v<f.length;v++)m=f[v],y=void 0,m in this.markets_by_id?(c=this.markets_by_id[m],y=c.symbol):(g=m.split("_"),b=i(g,2),k=b[0],x=b[1],w=this.safeCurrencyCode(k),_=this.safeCurrencyCode(x),y=w+"/"+_),O=h[m],T=this.parseTrades(O,c,r,a,{symbol:y}),l=this.arrayConcat(l,T);return e.abrupt("return",this.filterBySinceLimit(l,r,a));case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:return c="market"===r?r+"_":"",u=this.market(t),"market"===r&&void 0===s&&(s=0),d={pair:u.id,quantity:this.amountToPrecision(t,a),type:c+i,price:this.priceToPrecision(t,s)},e.next=10,this.privatePostOrderCreate(this.extend(d,o));case 10:return h=e.sent,l=this.safeString(h,"order_id"),f=this.milliseconds(),a=parseFloat(a),s=parseFloat(s),p="open",e.abrupt("return",{id:l,info:h,timestamp:f,datetime:this.iso8601(f),lastTradeTimestamp:void 0,status:p,symbol:t,type:r,side:i,price:s,cost:s*a,amount:a,remaining:a,filled:0,fee:void 0,trades:void 0,clientOrderId:void 0,average:void 0});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t},e.next=7,this.privatePostOrderCancel(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:t.toString()},e.next=7,this.privatePostOrderTrades(this.extend(i,r));case 7:return a=e.sent,s=this.parseOrder(a),e.abrupt("return",this.extend(s,{id:t.toString()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},o=void 0,void 0!==r&&(o=this.market(r)),c={order_id:t.toString()},e.next=9,this.privatePostOrderTrades(this.extend(c,s));case 9:return u=e.sent,d=this.safeValue(u,"trades"),e.abrupt("return",this.parseTrades(d,o,i,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privatePostUserOpenOrders(a);case 8:for(s=e.sent,o=Object.keys(s),c=[],u=0;u<o.length;u++)d=o[u],h=void 0,d in this.markets_by_id&&(h=this.markets_by_id[d]),l=this.parseOrders(s[d],h),c=this.arrayConcat(c,l);return e.abrupt("return",this.filterBySymbolSinceLimit(c,t,r,i));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeTimestamp(e,"created"),n=void 0,a=this.safeString(e,"type");if(void 0===t){var s=void 0;"pair"in e?s=e.pair:"in_currency"in e&&"out_currency"in e&&(s="buy"===a?e.in_currency+"_"+e.out_currency:e.out_currency+"_"+e.in_currency),void 0!==s&&s in this.markets_by_id&&(t=this.markets_by_id[s])}var o=this.safeFloat(e,"quantity");if(void 0===o){var c="buy"===a?"in_amount":"out_amount";o=this.safeFloat(e,c)}var u=this.safeFloat(e,"price"),d=this.safeFloat(e,"amount"),h=0,l=[],f=this.safeValue(e,"trades",[]),p=void 0,v=void 0,m=void 0,y=f.length;if(y>0){p=0;for(var g=0;g<y;g++){var b=this.parseTrade(f[g],t);void 0===r&&(r=b.order),void 0===i&&(i=b.timestamp),i>b.timestamp&&(i=b.timestamp),h=this.sum(h,b.amount),p=this.sum(p,b.fee.cost),l.push(b)}v=l[y-1].timestamp}var k=this.safeString(e,"status"),x=void 0;void 0!==o&&(x=o-h,k=h>=o?"closed":"open"),void 0===t&&(t=this.getMarketFromTrades(l));var w=void 0;void 0!==t&&(n=t.symbol,w=t.quote),void 0===d?void 0!==u&&(d=u*h):h>0&&(void 0===m&&(m=d/h),void 0===u&&(u=d/h));var _={cost:p,currency:w};return{id:r,clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:v,status:k,symbol:n,type:"limit",timeInForce:void 0,postOnly:void 0,side:a,price:u,stopPrice:void 0,cost:d,amount:o,filled:h,remaining:x,average:m,trades:l,fee:_,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostDepositAddress(r);case 5:return i=e.sent,a=this.safeString(i,t),s=void 0,o=void 0,a&&(c=a.split(","),s=c[0],c.length>1&&(o=c[1])),this.checkAddress(s),e.abrupt("return",{currency:t,address:s,tag:o,info:i});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMarketFromTrades",value:function(e){var t=this.indexBy(e,"pair"),r=Object.keys(t);if(1===r.length)return this.markets[r[0]]}},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o=s[a],c=parseFloat(this.costToPrecision(e,i*o)),u="quote";return"sell"===r?c*=n:u="base",{type:a,currency:s[u],rate:o,cost:parseFloat(this.feeToPrecision(e,c))}}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),c={amount:r,currency:o.id,address:i},void 0!==a&&(c.invoice=a),e.next=9,this.privatePostWithdrawCrypt(this.extend(c,s));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.task_id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({transferred:"ok",paid:"ok",pending:"pending",processing:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"dt"),i=this.safeFloat(e,"amount");void 0!==i&&(i=Math.abs(i));var n=this.parseTransactionStatus(this.safeString(e,"status")),a=this.safeString(e,"txid"),s=this.safeString(e,"type"),o=this.safeString(e,"curr"),c=this.safeCurrencyCode(o,t),u=void 0,d=void 0,h=void 0,l=this.safeString(e,"account");if("deposit"===s)h=l;else if("withdrawal"===s&&void 0!==(u=l)){var f=u.split(":"),p=f.length;2===p&&(u=(u=this.safeString(f,1)).replace(" ",""))}var v=void 0;if(!this.fees.funding.percentage){var m="withdrawal"===s?"withdraw":"deposit",y=this.safeFloat(this.options.fundingFees[m],c),g=this.safeString(e,"provider");"cashback"===g&&(y=0),void 0!==y&&("withdrawal"===s&&(i-=y),v={cost:y,currency:c,rate:void 0})}return{info:e,id:void 0,timestamp:r,datetime:this.iso8601(r),currency:c,amount:i,address:u,addressTo:u,addressFrom:void 0,tag:d,tagTo:d,tagFrom:void 0,status:n,type:s,updated:void 0,comment:h,txid:a,fee:v}}},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.date=parseInt(r/1e3)),o=void 0,void 0!==t&&(o=this.currency(t)),e.next=12,this.privatePostWalletHistory(this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c.history,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/";if("web"!==t&&(s+=this.version+"/"),s+=e,"public"===t||"web"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else if("private"===t){this.checkRequiredCredentials();var o=this.nonce();a=this.urlencode(this.extend({nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&("result"in s||"errmsg"in s)){var u=this.safeValue(s,"result",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=void 0,h=this.safeString2(s,"error","errmsg"),l=h.split(":");if(l.length>1){var f=l[0].split(" ");d=f.length>1?f[1]:f[0]}var p=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,p),this.throwBroadlyMatchedException(this.exceptions.broad,h,p),new v(p)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.ExchangeNotAvailable,y=f.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"exx",name:"EXX",countries:["CN"],rateLimit:100,userAgent:this.userAgents.chrome,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/37770292-fbf613d0-2de4-11e8-9f79-f2dc451b8ccb.jpg",api:{public:"https://api.exx.com/data/v1",private:"https://trade.exx.com/api"},www:"https://www.exx.com/",doc:"https://www.exx.com/help/restApi",fees:"https://www.exx.com/help/rate",referral:"https://www.exx.com/r/fde4260159e53ab8a58cc9186d35501f?recommQd=1"},api:{public:{get:["markets","tickers","ticker","depth","trades"]},private:{get:["order","cancel","getOrder","getOpenOrders","getBalance"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BCC:3e-4,BCD:0,BOT:10,BTC:.001,BTG:0,BTM:25,BTS:3,EOS:1,ETC:.01,ETH:.01,ETP:.012,HPY:0,HSR:.001,INK:20,LTC:.005,MCO:.6,MONA:.01,QASH:5,QCASH:5,QTUM:.01,USDT:5}}},commonCurrencies:{DOS:"DEMOS",TV:"TIV"},exceptions:{103:v}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)c=a[o],u=r[c],d=c.split("_"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,y=!0===u.isOpen,g={amount:parseInt(u.amountScale),price:parseInt(u.priceScale)},s.push({id:c,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:y,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:Math.pow(10,g.amount)},price:{min:Math.pow(10,-g.price),max:Math.pow(10,g.price)},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.safeInteger(e,"date");e=e.ticker;var n=this.safeFloat(e,"last");return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:this.safeFloat(e,"riseRate"),percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currency:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:n=e.sent,a={},s=this.milliseconds(),o=Object.keys(n),c=0;case 11:if(!(c<o.length)){e.next=22;break}if((u=o[c])in this.marketsById){e.next=15;break}return e.abrupt("continue",19);case 15:d=this.marketsById[u],h=d.symbol,l={date:s,ticker:n[u]},a[h]=this.parseTicker(l,d);case 19:c++,e.next=11;break;case 22:return e.abrupt("return",this.filterByArray(a,"symbol",t));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency:this.marketId(t)},e.next=7,this.publicGetDepth(this.extend(n,r));case 7:return a=e.sent,s=this.safeTimestamp(a,"timestamp"),e.abrupt("return",this.parseOrderBook(a,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=void 0;void 0!==i&&void 0!==n&&(a=i*n);var s=void 0;void 0!==t&&(s=t.symbol);var o="limit",c=this.safeString(e,"type"),u=this.safeString(e,"tid");return{id:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:void 0,type:o,side:c,takerOrMaker:void 0,price:i,amount:n,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetGetBalance(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"funds"),s=Object.keys(a),o=0;o<s.length;o++)c=s[o],u=a[c],d=this.safeCurrencyCode(c),h={free:this.safeFloat(u,"balance"),used:this.safeFloat(u,"freeze"),total:this.safeFloat(u,"total")},n[d]=h;return e.abrupt("return",this.parseBalance(n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=parseInt(e.trade_date),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"trade_money"),s=this.safeFloat(e,"total_amount"),o=this.safeFloat(e,"trade_amount",0),c=this.safeInteger(e,"status");c=1===c?"canceled":2===c?"closed":"open";var u=void 0;return"fees"in e&&(u={cost:this.safeFloat(e,"fees"),currency:t.quote}),this.safeOrder({id:this.safeString(e,"id"),clientOrderId:void 0,datetime:this.iso8601(i),timestamp:i,lastTradeTimestamp:void 0,status:c,symbol:r,type:"limit",timeInForce:void 0,postOnly:void 0,side:e.type,price:n,stopPrice:void 0,cost:a,amount:s,filled:o,remaining:void 0,trades:void 0,fee:u,info:e,average:void 0})}},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={currency:c.id,type:n,price:s,amount:a},e.next=8,this.privateGetOrder(this.extend(u,o));case 8:return d=e.sent,h=this.safeString(d,"id"),l=this.parseOrder({id:h,trade_date:this.milliseconds(),total_amount:a,price:s,type:n,info:d},c),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,currency:a.id},e.next=8,this.privateGetCancel(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={id:t,currency:a.id},e.next=8,this.privateGetGetOrder(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==t){e.next=8;break}throw new y(this.id+" fetchOpenOrders() requires a symbol argument");case 8:return s=this.market(t),o={currency:s.id},e.next=12,this.privateGetGetOpenOrders(this.extend(o,a));case 12:if(c=e.sent,Array.isArray(c)){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseOrders(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.urlencode(this.keysort(this.extend({accesskey:this.apiKey,nonce:this.nonce()},i))),c=this.hmac(this.encode(o),this.encode(this.secret),"sha512");s+="?"+o+"&signature="+c,n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"code"),d=this.safeString(s,"message"),h=this.id+" "+a;if("100"!==u){if(void 0!==u){if(this.throwExactlyMatchedException(this.exceptions,u,h),"308"===u)return;throw new p(h)}var l=this.safeValue(s,"result");if(void 0!==l&&!l)throw"\u670d\u52a1\u7aef\u5fd9\u788c"===d?new m(h):new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(136);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"fcoinjp",name:"FCoinJP",countries:["JP"],hostname:"fcoinjp.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/54219174-08b66b00-4500-11e9-862d-f522d0fe08c6.jpg",fees:"https://fcoinjp.zendesk.com/hc/en-us/articles/360018727371",www:"https://www.fcoinjp.com",referral:void 0}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"flowbtc",name:"flowBTC",countries:["BR"],version:"v1",rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87443317-01c0d080-c5fe-11ea-95c2-9ebe1a8fafd9.jpg",api:"https://publicapi.flowbtc.com.br",www:"https://www.flowbtc.com.br",doc:"https://www.flowbtc.com.br/api.html"},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{post:["GetTicker","GetTrades","GetTradesByDate","GetOrderBook","GetProductPairs","GetProducts"]},private:{post:["CreateAccount","GetUserInfo","SetUserInfo","GetAccountInfo","GetAccountTrades","GetDepositAddresses","Withdraw","CreateOrder","ModifyOrder","CancelOrder","CancelAllOrders","GetAccountOpenOrders","GetOrderFee"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.005}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicPostGetProductPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"productPairs"),a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"name"),u=this.safeString(o,"product1Label"),d=this.safeString(o,"product2Label"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f={amount:this.safeInteger(o,"product1DecimalPlaces"),price:this.safeInteger(o,"product2DecimalPlaces")},a[p=h+"/"+l]={id:c,symbol:p,base:h,quote:l,baseId:u,quoteId:d,precision:f,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:o,active:void 0};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"currencies"),a={info:r},s=0;s<n.length;s++)o=n[s],c=o.name,u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"balance"),d.total=this.safeFloat(o,"hold"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={productPair:n.id},e.next=8,this.publicPostGetOrderBook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","px","qty"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={productPair:n.id},e.next=7,this.publicPostGetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.milliseconds(),c=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"bid"),bidVolume:void 0,ask:this.safeFloat(s,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"volume24hr"),quoteVolume:this.safeFloat(s,"volume24hrProduct2"),info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"unixtime"),i=0===e.incomingOrderSide?"buy":"sell",n=this.safeString(e,"tid"),a=this.safeFloat(e,"px"),s=this.safeFloat(e,"qty"),o=void 0;return void 0!==a&&void 0!==s&&(o=a*s),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:t.symbol,id:n,order:void 0,type:void 0,side:i,price:a,amount:s,cost:o,takerOrMaker:void 0,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={ins:s.id,startIndex:-1},e.next=9,this.publicPostGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c="market"===r?1:0,u={ins:this.marketId(t),side:n,orderType:c,qty:a,px:this.priceToPrecision(t,s)},e.next=8,this.privatePostCreateOrder(this.extend(u,o));case 8:return d=e.sent,e.abrupt("return",{info:d,id:d.serverOrderId});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:if(!("ins"in r)){e.next=9;break}return n={serverOrderId:t},e.next=8,this.privatePostCancelOrder(this.extend(n,r));case 8:return e.abrupt("return",e.sent);case 9:throw new l(this.id+" cancelOrder() requires an `ins` symbol parameter for cancelling an order");case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(a=this.json(i));else{this.checkRequiredCredentials();var o=this.nonce(),c=o.toString()+this.uid+this.apiKey,u=this.hmac(this.encode(c),this.encode(this.secret));a=this.json(this.extend({apiKey:this.apiKey,apiNonce:o,apiSig:u.toUpperCase()},i)),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("isAccepted"in(c=e.sent))){e.next=11;break}if(!c.isAccepted){e.next=11;break}return e.abrupt("return",c);case 11:throw new l(this.id+" "+this.json(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(13).TICK_SIZE,p=r(10),v=p.ExchangeError,m=p.InvalidOrder,y=p.BadRequest,g=p.InsufficientFunds,b=p.OrderNotFound,k=p.AuthenticationError,x=p.RateLimitExceeded,w=p.ExchangeNotAvailable,_=p.CancelPending,O=p.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"ftx",name:"FTX",countries:["HK"],rateLimit:50,certified:!0,pro:!0,hostname:"ftx.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/67149189-df896480-f2b0-11e9-8816-41593e17f9ec.jpg",www:"https://ftx.com",api:{public:"https://{hostname}",private:"https://{hostname}"},doc:"https://github.com/ftexchange/ftx",fees:"https://ftexchange.zendesk.com/hc/en-us/articles/360024479432-Fees",referral:"https://ftx.com/#a=1623029"},has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"15s":"15","1m":"60","5m":"300","15m":"900","1h":"3600","4h":"14400","1d":"86400"},api:{public:{get:["coins","markets","markets/{market_name}","markets/{market_name}/orderbook","markets/{market_name}/trades","markets/{market_name}/candles","futures","futures/{future_name}","futures/{future_name}/stats","funding_rates","indexes/{index_name}/weights","expired_futures","indexes/{market_name}/candles","lt/tokens","lt/{token_name}","options/requests","options/trades","stats/24h_options_volume","options/historical_volumes/BTC","options/open_interest/BTC","options/historical_open_interest/BTC"]},private:{get:["account","positions","wallet/coins","wallet/balances","wallet/all_balances","wallet/deposit_address/{coin}","wallet/deposits","wallet/withdrawals","wallet/withdrawal_fee","wallet/airdrops","wallet/saved_addresses","orders","orders/history","orders/{order_id}","orders/by_client_id/{client_order_id}","conditional_orders","conditional_orders/{conditional_order_id}/triggers","conditional_orders/history","spot_margin/borrow_rates","spot_margin/lending_rates","spot_margin/borrow_summary","spot_margin/market_info","spot_margin/borrow_history","spot_margin/lending_history","spot_margin/offers","spot_margin/lending_info","fills","funding_payments","lt/balances","lt/creations","lt/redemptions","subaccounts","subaccounts/{nickname}/balances","otc/quotes/{quoteId}","options/my_requests","options/requests/{request_id}/quotes","options/my_quotes","options/account_info","options/positions","options/fills","staking/stakes","staking/unstake_requests","staking/balances","staking/staking_rewards"],post:["account/leverage","wallet/withdrawals","wallet/saved_addresses","orders","conditional_orders","orders/{order_id}/modify","orders/by_client_id/{client_order_id}/modify","conditional_orders/{order_id}/modify","spot_margin/offers","lt/{token_name}/create","lt/{token_name}/redeem","subaccounts","subaccounts/update_name","subaccounts/transfer","otc/quotes/{quote_id}/accept","otc/quotes","options/requests","options/requests/{request_id}/quotes","options/quotes/{quote_id}/accept","staking/unstake_requests","srm_stakes/stakes"],delete:["wallet/saved_addresses/{saved_address_id}","orders/{order_id}","orders/by_client_id/{client_order_id}","orders","conditional_orders/{order_id}","subaccounts","options/requests/{request_id}","options/quotes/{quote_id}","staking/unstake_requests/{request_id}"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:2e-4,taker:.07/100,tiers:{taker:[[0,.07/100],[1e6,6e-4],[5e6,55e-5],[1e7,5e-4],[15e6,45e-5],[35e6,4e-4]],maker:[[0,2e-4],[1e6,2e-4],[5e6,15e-5],[1e7,15e-5],[15e6,1e-4],[35e6,1e-4]]}},funding:{withdraw:{}}},exceptions:{exact:{"Please slow down":x,"Size too small for provide":m,"Not logged in":k,"Not enough balances":g,InvalidPrice:m,"Size too small":m,"Missing parameter price":m,"Order not found":b,"Order already closed":m,"Trigger price too high":m,"Trigger price too low":m,"Order already queued for cancellation":_},broad:{"Account does not have enough margin for order":g,"Invalid parameter":y,"The requested URL was not found on the server":y,"No such coin":y,"No such market":y,"Do not send more than":x,"An unexpected error occurred":w,"Please retry request":w,"Please try again":w}},precisionMode:f,options:{cancelOrder:{method:"privateDeleteOrdersOrderId"},fetchOpenOrders:{method:"privateGetOrders"},fetchOrders:{method:"privateGetOrdersHistory"},sign:{"ftx.com":"FTX","ftx.us":"FTXUS"}}})}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.publicGetCoins(t);case 3:for(r=e.sent,i=this.safeValue(r,"result",[]),a={},s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"id"),u=this.safeCurrencyCode(c),d=this.safeString(o,"name"),a[u]={id:c,code:u,info:o,type:void 0,name:d,active:void 0,fee:void 0,precision:void 0,limits:{withdraw:{min:void 0,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,i=[],a=this.safeValue(r,"result",[]),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"name"),u=this.safeString2(o,"baseCurrency","underlying"),d=this.safeString(o,"quoteCurrency","USD"),h=this.safeString(o,"type"),l=this.safeCurrencyCode(u),f=this.safeCurrencyCode(d),p="future"===h?this.safeString(o,"name"):l+"/"+f,v=this.safeValue(o,"enabled"),m=this.safeFloat(o,"sizeIncrement"),y=this.safeFloat(o,"priceIncrement"),g={amount:m,price:y},i.push({id:c,symbol:p,base:l,quote:f,baseId:u,quoteId:d,type:h,future:"future"===h,spot:"spot"===h,active:v,precision:g,limits:{amount:{min:m,max:void 0},price:{min:y,max:void 0},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",i);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"name");if(i in this.markets_by_id)t=this.markets_by_id[i];else{var n=this.safeString(e,"type");if("future"===n)r=i;else{var a=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),s=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));void 0!==a&&void 0!==s&&(r=a+"/"+s)}}void 0===r&&void 0!==t&&(r=t.symbol);var o=this.safeFloat(e,"last"),c=this.safeTimestamp(e,"time",this.milliseconds());return{symbol:r,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bidSize"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"askSize"),vwap:void 0,open:void 0,close:o,last:o,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"change24h"),average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"quoteVolume24h"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market_name:i.id},e.next=7,this.publicGetMarketsMarketName(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,i));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarkets(r);case 6:return i=e.sent,a=this.safeValue(i,"result",[]),e.abrupt("return",this.parseTickers(a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market_name:a.id},void 0!==r&&(s.depth=r),e.next=9,this.publicGetMarketsMarketNameOrderbook(this.extend(s,i));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),e.abrupt("return",this.parseOrderBook(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"getMarketId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=this.getMarketParams(e,t,r);return this.safeString(i,1,e)}},{key:"getMarketParams",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=void 0,n=void 0;return n=e in this.markets?(i=this.market(e)).id:this.safeString(r,t,e),[i,n]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",a=v.length>2&&void 0!==v[2]?v[2]:void 0,s=v.length>3&&void 0!==v[3]?v[3]:void 0,o=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return c=this.getMarketParams(t,"market_name",o),u=i(c,2),d=u[0],h=u[1],l={resolution:this.timeframes[r],market_name:h},s=void 0===s?1501:s,void 0===a?(l.end_time=this.seconds(),l.limit=s,l.start_time=l.end_time-s*this.parseTimeframe(r)):(l.start_time=parseInt(a/1e3),l.limit=s,l.end_time=this.sum(l.start_time,s*this.parseTimeframe(r))),e.next=12,this.publicGetMarketsMarketNameCandles(this.extend(l,o));case 12:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOHLCVs(p,d,r,a,s));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"liquidity"),n=this.safeString(e,"market"),a=void 0;if(n in this.markets_by_id)a=(t=this.markets_by_id[n]).symbol;else{var s=this.safeCurrencyCode(this.safeString(e,"baseCurrency")),o=this.safeCurrencyCode(this.safeString(e,"quoteCurrency"));a=void 0!==s&&void 0!==o?s+"/"+o:n}var c=this.parse8601(this.safeString(e,"time")),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"size");void 0===a&&void 0!==t&&(a=t.symbol);var h=this.safeString(e,"side"),l=void 0;void 0!==u&&void 0!==d&&(l=u*d);var f=void 0,p=this.safeFloat(e,"fee");if(void 0!==p){var v=this.safeString(e,"feeCurrency"),m=this.safeCurrencyCode(v);f={cost:p,currency:m,rate:this.safeFloat(e,"feeRate")}}var y=this.safeString(e,"orderId");return{info:e,timestamp:c,datetime:this.iso8601(c),symbol:a,id:r,order:y,type:void 0,takerOrMaker:i,side:h,price:u,amount:d,cost:l,fee:f}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:void 0,a=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=5,this.loadMarkets();case 5:return o=this.getMarketParams(t,"market_name",s),c=i(o,2),u=c[0],d=c[1],h={market_name:d},void 0!==r&&(h.start_time=parseInt(r/1e3),h.end_time=this.seconds()),void 0!==a&&(h.limit=a),e.next=11,this.publicGetMarketsMarketNameTrades(this.extend(h,s));case 11:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseTrades(f,u,r,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccount(t);case 5:return r=e.sent,i=this.safeValue(r,"result",{}),e.abrupt("return",{info:r,maker:this.safeFloat(i,"makerFee"),taker:this.safeFloat(i,"takerFee")});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWalletBalances(t);case 5:for(r=e.sent,i={info:r},a=this.safeValue(r,"result",[]),s=0;s<a.length;s++)o=a[s],c=this.safeCurrencyCode(this.safeString(o,"coin")),(u=this.account()).free=this.safeFloat(o,"free"),u.total=this.safeFloat(o,"total"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({new:"open",open:"open",closed:"closed",triggered:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"createdAt")),n=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeFloat(e,"size"),s=this.safeFloat(e,"filledSize"),o=this.safeFloat(e,"remainingSize");0===o&&void 0!==a&&void 0!==s&&(o=Math.max(a-s,0))>0&&(n="canceled");var c=void 0,u=this.safeString(e,"market");void 0!==u&&(c=u in this.markets_by_id?(t=this.markets_by_id[u]).symbol:u),void 0===c&&void 0!==t&&(c=t.symbol);var d=this.safeString(e,"side"),h=this.safeString(e,"type"),l=this.safeFloat(e,"avgFillPrice"),f=this.safeFloat2(e,"price","triggerPrice",l),p=void 0;void 0!==s&&void 0!==f&&(p=s*f);var v=this.parse8601(this.safeString(e,"triggeredAt")),m=this.safeString(e,"clientId"),y=this.safeFloat(e,"triggerPrice"),g=this.safeValue(e,"postOnly");return{info:e,id:r,clientOrderId:m,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:v,symbol:c,type:h,timeInForce:void 0,postOnly:g,side:d,price:f,stopPrice:y,amount:a,cost:p,average:l,filled:s,remaining:o,status:n,fee:void 0,trades:void 0}}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={market:c.id,side:i,type:r,size:parseFloat(this.amountToPrecision(t,a))},void 0!==(d=this.safeString2(o,"clientId","clientOrderId"))&&(u.clientId=d,o=this.omit(o,["clientId","clientOrderId"])),h=void 0,"limit"!==r){e.next=14;break}h="privatePostOrders",u.price=parseFloat(this.priceToPrecision(t,s)),e.next=37;break;case 14:if("market"!==r){e.next=19;break}h="privatePostOrders",u.price=null,e.next=37;break;case 19:if("stop"!==r&&"takeProfit"!==r){e.next=31;break}if(h="privatePostConditionalOrders",void 0!==(l=this.safeFloat2(o,["stopPrice","triggerPrice"]))){e.next=27;break}o=this.omit(o,["stopPrice","triggerPrice"]),u.triggerPrice=parseFloat(this.priceToPrecision(t,l)),e.next=28;break;case 27:throw new O(this.id+" createOrder () requires a stopPrice parameter or a triggerPrice parameter for "+r+" orders");case 28:void 0!==s&&(u.orderPrice=parseFloat(this.priceToPrecision(t,s))),e.next=37;break;case 31:if("trailingStop"!==r){e.next=36;break}h="privatePostConditionalOrders",u.trailValue=parseFloat(this.priceToPrecision(t,s)),e.next=37;break;case 36:throw new m(this.id+" createOrder () does not support order type "+r+", only limit, market, stop, trailingStop, or takeProfit orders are supported");case 37:return e.next=39,this[h](this.extend(u,o));case 39:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOrder(p,c));case 42:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=a(n.mark((function e(t,r,i,a,s){var o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=x.length>5&&void 0!==x[5]?x[5]:void 0,c=x.length>6&&void 0!==x[6]?x[6]:{},e.next=4,this.loadMarkets();case 4:return u=this.market(r),d={},h=void 0,l=this.safeString2(c,"client_order_id","clientOrderId"),f=this.safeFloat(c,"triggerPrice"),p=this.safeFloat(c,"orderPrice"),v=this.safeFloat(c,"trailValue"),c=this.omit(c,["client_order_id","clientOrderId","triggerPrice","orderPrice","trailValue"]),y=void 0!==p,g=void 0!==v,(m=void 0!==f)||y||g?(h="privatePostConditionalOrdersOrderIdModify",d.order_id=t,m&&(d.triggerPrice=parseFloat(this.priceToPrecision(r,f))),y&&(d.orderPrice=parseFloat(this.priceToPrecision(r,p))),g&&(d.trailValue=parseFloat(this.priceToPrecision(r,v)))):(void 0===l?(h="privatePostOrdersOrderIdModify",d.order_id=t):(h="privatePostOrdersByClientIdClientOrderIdModify",d.client_order_id=l),void 0!==o&&(d.price=parseFloat(this.priceToPrecision(r,o)))),void 0!==s&&(d.size=parseFloat(this.amountToPrecision(r,s))),e.next=19,this[h](this.extend(d,c));case 19:return b=e.sent,k=this.safeValue(b,"result",{}),e.abrupt("return",this.parseOrder(k,u));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return i={},a=this.safeValue(this.options,"cancelOrder",{}),s=this.safeString(a,"method","privateDeleteOrdersOrderId"),o=this.safeString(r,"method",s),c=this.safeValue(r,"type"),void 0===(u=this.safeValue2(r,"client_order_id","clientOrderId"))?(i.order_id=parseInt(t),"stop"!==c&&"trailingStop"!==c&&"takeProfit"!==c||(o="privateDeleteConditionalOrdersOrderId")):(i.client_order_id=u,o="privateDeleteOrdersByClientIdClientOrderId"),d=this.omit(r,["method","type","client_order_id","clientOrderId"]),e.next=14,this[o](this.extend(i,d));case 14:return h=e.sent,l=this.safeValue(h,"result",{}),e.abrupt("return",l);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0!==(a=this.getMarketId(t,"market",r))&&(i.market=a),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return i={},a=this.safeValue2(r,"client_order_id","clientOrderId"),s="privateGetOrdersOrderId",void 0===a?i.order_id=t:(i.client_order_id=a,r=this.omit(r,["client_order_id","clientOrderId"]),s="privateGetOrdersByClientIdClientOrderId"),e.next=10,this[s](this.extend(i,r));case 10:return o=e.sent,c=this.safeValue(o,"result",{}),e.abrupt("return",this.parseOrder(c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:void 0,a=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:{},e.next=6,this.loadMarkets();case 6:return o={},c=this.getMarketParams(t,"market",s),u=i(c,2),d=u[0],void 0!==(h=u[1])&&(o.market=h),l=this.safeValue(this.options,"fetchOpenOrders",{}),f=this.safeString(l,"method","privateGetOrders"),p=this.safeString(s,"method",f),"stop"!==(v=this.safeValue(s,"type"))&&"trailingStop"!==v&&"takeProfit"!==v||(p="privateGetConditionalOrders"),m=this.omit(s,["method","type"]),e.next=17,this[p](this.extend(o,m));case 17:return y=e.sent,g=this.safeValue(y,"result",[]),e.abrupt("return",this.parseOrders(g,d,r,a));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:void 0,a=b.length>2&&void 0!==b[2]?b[2]:void 0,s=b.length>3&&void 0!==b[3]?b[3]:{},e.next=6,this.loadMarkets();case 6:return o={},c=this.getMarketParams(t,"market",s),u=i(c,2),d=u[0],void 0!==(h=u[1])&&(o.market=h),void 0!==a&&(o.limit=a),void 0!==r&&(o.start_time=parseInt(r/1e3)),l=this.safeValue(this.options,"fetchOrders",{}),f=this.safeString(l,"method","privateGetOrdersHistory"),p=this.safeString(s,"method",f),"stop"!==(v=this.safeValue(s,"type"))&&"trailingStop"!==v&&"takeProfit"!==v||(p="privateGetConditionalOrdersHistory"),m=this.omit(s,["method","type"]),e.next=19,this[p](this.extend(o,m));case 19:return y=e.sent,g=this.safeValue(y,"result",[]),e.abrupt("return",this.parseOrders(g,d,r,a));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,a=p.length>2&&void 0!==p[2]?p[2]:void 0,s=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return o=this.getMarketParams(t,"market",s),c=i(o,2),u=c[0],d=c[1],h={},void 0!==d&&(h.market=d),void 0!==a&&(h.limit=a),void 0!==r&&(h.start_time=parseInt(r/1e3),h.end_time=this.seconds()),e.next=13,this.privateGetFills(this.extend(h,s));case 13:return l=e.sent,f=this.safeValue(l,"result",[]),e.abrupt("return",this.parseTrades(f,u,r,a));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(i),o=this.currency(t),c={coin:o.id,size:r,address:i},void 0!==this.password&&(c.password=this.password),void 0!==a&&(c.tag=a),e.next=11,this.privatePostWalletWithdrawals(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"result",{}),e.abrupt("return",this.parseTransaction(d,o));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=a(n.mark((function e(){var t,r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetAccount(t);case 6:return r=e.sent,i=this.safeValue(r,"result",{}),e.abrupt("return",this.safeValue(i,"positions",[]));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={coin:i.id},e.next=7,this.privateGetWalletDepositAddressCoin(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),c=this.safeString(o,"address"),u=this.safeString(o,"tag"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({confirmed:"ok",complete:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeCurrencyCode(this.safeString(e,"coin")),r=this.safeString(e,"id"),i=this.safeFloat(e,"size"),n=this.parseTransactionStatus(this.safeString(e,"status")),a=this.parse8601(this.safeString(e,"time")),s=this.safeString(e,"txid"),o=void 0,c=this.safeValue(e,"address");if("string"!==typeof c&&(o=this.safeString(c,"tag"),c=this.safeString(c,"address")),void 0===c){var u=this.safeString(e,"notes");void 0!==u&&(c=u.slice(12))}var d=this.safeFloat(e,"fee");return{info:e,id:r,txid:s,timestamp:a,datetime:this.iso8601(a),addressFrom:void 0,address:c,addressTo:c,tagFrom:void 0,tag:o,tagTo:o,type:void 0,amount:i,currency:t,status:n,updated:void 0,fee:{currency:t,cost:d,rate:void 0}}}},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetWalletDeposits(a);case 8:return s=e.sent,o=this.safeValue(s,"result",[]),c=void 0,void 0!==t&&(c=this.currency(t)),e.abrupt("return",this.parseTransactions(o,c,r,i,{type:"deposit"}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetWalletWithdrawals(a);case 8:return s=e.sent,o=this.safeValue(s,"result",[]),c=void 0,void 0!==t&&(c=this.currency(t)),e.abrupt("return",this.parseTransactions(o,c,r,i,{type:"withdrawal"}));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c=this.implodeParams(this.urls.api[t],{hostname:this.hostname}),u=c+s;if("POST"!==r&&Object.keys(o).length){var d="?"+this.urlencode(o);u+=d,s+=d}if("private"===t){this.checkRequiredCredentials();var h=this.milliseconds().toString(),l=h+r+s;n={},"POST"!==r&&"DELETE"!==r||(l+=a=this.json(o),n["Content-Type"]="application/json");var f=this.hmac(this.encode(l),this.encode(this.secret),"sha256"),p=this.safeValue(this.options,"sign",{}),v=this.safeString(p,this.hostname,"FTX"),m=v+"-KEY",y=v+"-TS",g=v+"-SIGN";n[m]=this.apiKey,n[y]=h,n[g]=f}return{url:u,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&!this.safeValue(s,"success")){var u=this.id+" "+a,d=this.safeString(s,"error");throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new v(u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.ArgumentsRequired,m=l.InvalidAddress,y=l.OrderNotFound,g=l.NotSupported,b=l.DDoSProtection,k=l.InsufficientFunds,x=l.InvalidOrder;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"gateio",name:"Gate.io",countries:["CN"],version:"2",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!1,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":60,"5m":300,"10m":600,"15m":900,"30m":1800,"1h":3600,"2h":7200,"4h":14400,"6h":21600,"12h":43200,"1d":86400,"1w":604800},urls:{logo:"https://user-images.githubusercontent.com/1294454/31784029-0313c702-b509-11e7-9ccc-bc0da6a0e435.jpg",api:{public:"https://data.gate.io/api",private:"https://data.gate.io/api"},www:"https://gate.io/",doc:"https://gate.io/api2",fees:["https://gate.io/fee","https://support.gate.io/hc/en-us/articles/115003577673"],referral:"https://www.gate.io/signup/2436035"},api:{public:{get:["candlestick2/{id}","pairs","coininfo","marketinfo","marketlist","coininfo","tickers","ticker/{id}","orderBook/{id}","trade/{id}","tradeHistory/{id}","tradeHistory/{id}/{tid}"]},private:{post:["balances","depositAddress","newAddress","depositsWithdrawals","buy","sell","cancelOrder","cancelAllOrders","getOrder","openOrders","tradeHistory","feelist","withdraw"]}},fees:{trading:{tierBased:!0,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{4:b,5:f,6:f,7:g,8:g,9:g,15:b,16:y,17:y,20:x,21:k},errorCodeNames:{1:"Invalid request",2:"Invalid version",3:"Invalid request",4:"Too many attempts",5:"Invalid sign",6:"Invalid sign",7:"Currency is not supported",8:"Currency is not supported",9:"Currency is not supported",10:"Verified failed",11:"Obtaining address failed",12:"Empty params",13:"Internal error, please report to administrator",14:"Invalid user",15:"Cancel order too fast, please wait 1 min and try again",16:"Invalid order id or order is already closed",17:"Invalid orderid",18:"Invalid amount",19:"Not permitted or trade is disabled",20:"Your order size is too small",21:"You don't have enough fund"}},options:{limits:{cost:{min:{BTC:1e-4,ETH:.001,USDT:1}}}},commonCurrencies:{BOX:"DefiBox",BTCBEAR:"BEAR",BTCBULL:"BULL",SBTC:"Super Bitcoin",TNC:"Trinity Network Credit"}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetCoininfo(t);case 3:if(r=e.sent,n=this.safeValue(r,"coins")){e.next=7;break}throw new p(this.id+" fetchCurrencies got an unrecognized response");case 7:for(a={},s=0;s<n.length;s++)for(o=n[s],c=Object.keys(o),u=0;u<c.length;u++)d=c[u],h=o[d],l=this.safeCurrencyCode(d),f=this.safeValue(h,"delisted",0),v=this.safeValue(h,"withdraw_disabled",0),m=this.safeValue(h,"deposit_disabled",0),y=this.safeValue(h,"trade_disabled",0),g=0===v,b=0===m,k=0===y,x=0===f&&g&&b&&k,a[l]={id:d,code:l,active:x,info:h,name:void 0,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetMarketinfo(t);case 3:if(r=e.sent,n=this.safeValue(r,"pairs")){e.next=7;break}throw new p(this.id+" fetchMarkets got an unrecognized response");case 7:for(a=[],s=0;s<n.length;s++)o=n[s],c=Object.keys(o),u=this.safeString(c,0),d=o[u],h=u.split("_"),l=h.length,f=h[0],v=h[1],l>2&&(f=h[0]+"_"+h[1],v=h[2]),m=this.safeCurrencyCode(f),y=this.safeCurrencyCode(v),g=m+"/"+y,b={amount:this.safeInteger(d,"amount_decimal_places"),price:this.safeInteger(d,"decimal_places")},k={min:this.safeFloat(d,"min_amount"),max:void 0},x={min:Math.pow(10,-b.price),max:void 0},w=k.min*x.min,_=this.safeFloat(this.options.limits.cost.min,y,w),O={amount:k,price:x,cost:{min:_,max:void 0}},T=this.safeValue(d,"trade_disabled"),S=!T,C=u.toUpperCase(),I=this.safeFloat(d,"fee"),a.push({id:u,uppercaseId:C,symbol:g,base:m,quote:y,baseId:f,quoteId:v,info:o,active:S,maker:I/100,taker:I/100,precision:b,limits:O});return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalances(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"available",{}),Array.isArray(a)&&(a={}),s=this.safeValue(r,"locked",{}),o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(a,u),h.used=this.safeFloat(s,u),n[d]=h;return e.abrupt("return",this.parseBalance(n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetOrderBookId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,5),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,1)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={id:o.id,group_sec:this.timeframes[r]},void 0!==a&&(u=this.parseTimeframe(r),d=parseInt(u*a/3600),c.range_hour=Math.max(0,d-1)),e.next=11,this.publicGetCandlestick2Id(this.extend(c,s));case 11:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOHLCVs(l,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"last"),a=this.safeFloat(e,"percentChange"),s=void 0,o=void 0,c=void 0;if(void 0!==n&&void 0!==a){var u=a/100;o=n-(s=n/this.sum(1,u)),c=this.sum(n,s)/2}return s=this.safeFloat(e,"open",s),o=this.safeFloat(e,"change",o),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat2(e,"high24hr","high"),low:this.safeFloat2(e,"low24hr","low"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:s,close:n,last:n,previousClose:void 0,change:o,percentage:a,average:c,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a={},s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=this.safeMarket(c,void 0,"_"),d=u.symbol,a[d]=this.parseTicker(n[c],u);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetTickerId(this.extend({id:n.id},r));case 6:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"timestamp","time_unix");r=this.safeTimestamp(e,"time",r);var i=this.safeString2(e,"tradeID","id"),n=this.safeString2(e,"orderid","orderNumber"),a=this.safeFloat2(e,"rate","price"),s=this.safeFloat(e,"amount"),o=this.safeString(e,"type"),c=this.safeString(e,"role"),u=void 0;void 0!==a&&void 0!==s&&(u=a*s);var d=void 0;void 0!==t&&(d=t.symbol);var h=void 0,l=this.safeCurrencyCode(this.safeString(e,"fee_coin")),f=this.safeFloat(e,"point_fee");return void 0===f||0===f?void 0===(f=this.safeFloat(e,"gt_fee"))||0===f?f=this.safeFloat(e,"fee"):l=this.safeCurrencyCode("GT"):l=this.safeCurrencyCode("POINT"),void 0!==f&&(h={cost:f,currency:l}),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:d,order:n,type:void 0,side:o,takerOrMaker:c,price:a,amount:s,cost:u,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},c=void 0,c="tid"in a?"publicGetTradeHistoryIdTid":"publicGetTradeHistoryId",e.next=11,this[c](this.extend(o,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u.data,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,t=s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:void 0,n=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.privatePostOpenOrders(n);case 6:return a=e.sent,e.abrupt("return",this.parseOrders(a.orders,void 0,t,r));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderNumber:t,currencyPair:this.marketId(r)},e.next=7,this.privatePostGetOrder(this.extend(a,n));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s.order));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"orderNumber","id"),i=this.safeString(e,"currencyPair"),n=this.safeSymbol(i,t,"_"),a=this.safeTimestamp2(e,"timestamp","ctime"),s=this.safeTimestamp(e,"mtime"),o=this.parseOrderStatus(this.safeString(e,"status")),c=this.safeString(e,"type");"1"===c?c="sell":"2"===c&&(c="buy");var u=this.safeFloat2(e,"initialRate","rate"),d=this.safeFloat(e,"filledRate"),h=this.safeFloat2(e,"initialAmount","amount"),l=this.safeFloat(e,"filledAmount"),f=this.safeFloat2(e,"leftAmount","left"),p=this.safeFloat(e,"feeValue"),v=this.safeString(e,"feeCurrency"),m=this.safeCurrencyCode(v),y=this.safeFloat(e,"feePercentage");return void 0!==y&&(y/=100),this.safeOrder({id:r,clientOrderId:void 0,datetime:this.iso8601(a),timestamp:a,lastTradeTimestamp:s,status:o,symbol:n,type:"limit",timeInForce:void 0,postOnly:void 0,side:c,price:u,stopPrice:void 0,cost:void 0,amount:h,filled:l,remaining:f,average:d,trades:void 0,fee:{cost:p,currency:m,rate:y},info:e})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c="privatePost"+this.capitalize(n),u=this.market(t),d={currencyPair:u.id,rate:s,amount:a},e.next=11,this[c](this.extend(d,o));case 11:return h=e.sent,e.abrupt("return",this.parseOrder(this.extend({status:"open",type:n,initialAmount:a},h),u));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},void 0!==r){e.next=4;break}throw new v(this.id+" cancelOrder() requires symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a={orderNumber:t,currencyPair:this.marketId(r)},e.next=9,this.privatePostCancelOrder(this.extend(a,n));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queryDepositAddress",value:function(){var e=n(i.mark((function e(t,r){var n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=h.length>2&&void 0!==h[2]?h[2]:{},e.next=3,this.loadMarkets();case 3:return a=this.currency(r),t="privatePost"+t+"Address",s={currency:a.id},e.next=8,this[t](this.extend(s,n));case 8:if(o=e.sent,c=this.safeString(o,"addr"),u=void 0,!(void 0!==c&&c.indexOf("address")>=0)){e.next=13;break}throw new m(this.id+" queryDepositAddress "+c);case 13:return"XRP"!==r&&"HBAR"!==r&&"STEEM"!==r&&"XLM"!==r&&"EOS"!==r||(d=c.split(" "),c=d[0],u=d[1]),e.abrupt("return",{currency:r,address:c,tag:u,info:o});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.queryDepositAddress("New",t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.length>1&&void 0!==n[1]?n[1]:{},e.next=3,this.queryDepositAddress("Deposit",t,r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),e.next=10,this.privatePostOpenOrders(a);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o.orders,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},void 0!==r){e.next=6;break}throw new v(this.id+" fetchOrderTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={currencyPair:o.id,orderNumber:t},e.next=12,this.privatePostTradeHistory(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseTrades(u.trades,o,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades() requires symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currencyPair:s.id},e.next=12,this.privatePostTradeHistory(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,amount:r,address:n},void 0!==a&&(c.address+=" "+a),e.next=10,this.privatePostWithdraw(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=7,this.loadMarkets();case 7:return o={},void 0!==n&&(o.start=n),e.next=11,this.privatePostDepositsWithdrawals(this.extend(o,s));case 11:return c=e.sent,u=void 0,void 0===t?(d=this.safeValue(c,"deposits",[]),h=this.safeValue(c,"withdraws",[]),u=this.arrayConcat(d,h)):u=this.safeValue(c,t,[]),l=void 0,void 0!==r&&(l=this.currency(r)),e.abrupt("return",this.parseTransactions(u,l,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType(void 0,t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposits",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdraws",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"id"),a=this.safeString(e,"txid"),s=this.safeFloat(e,"amount"),o=this.safeString(e,"address");"false"===o&&(o=void 0);var c=this.safeTimestamp(e,"timestamp"),u=this.parseTransactionStatus(this.safeString(e,"status")),d=this.parseTransactionType(n[0]),h=this.safeFloat(e,"fee"),l=void 0;return void 0!==h&&(l={currency:i,cost:h},void 0!==s&&(s-=h)),{info:e,id:n,txid:a,currency:i,amount:s,address:o,tag:void 0,status:u,type:d,timestamp:c,datetime:this.iso8601(c),fee:l}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({PEND:"pending",REQUEST:"pending",DMOVE:"pending",CANCEL:"failed",DONE:"ok"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({d:"deposit",w:"withdrawal"},e,e)}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"false"===this.safeString(s,"result","")){var u=this.safeString(s,"code"),d=this.safeString(s,"message",a);if(void 0!==u){var h=this.safeString(this.exceptions.errorCodeNames,u,d);this.throwExactlyMatchedException(this.exceptions.exact,u,h)}}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="private"===t?t+"/":"",o=this.urls.api[t]+this.version+"/1/"+s+this.implodeParams(e,i),c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else{this.checkRequiredCredentials();var u=this.nonce(),d={nonce:u};a=(a=this.rawencode(this.extend(d,c))).replace("+"," ");var h=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={Key:this.apiKey,Sign:h,"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.OrderNotFound,y=l.InvalidOrder,g=l.InvalidNonce,b=l.InsufficientFunds,k=l.AuthenticationError,x=l.PermissionDenied,w=l.NotSupported,_=l.OnMaintenance,O=l.RateLimitExceeded,T=l.ExchangeNotAvailable,S=r(13).TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"gemini",name:"Gemini",countries:["US"],rateLimit:1500,version:"v1",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchBidsAsks:!1,fetchClosedOrders:!1,fetchDepositAddress:!1,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27816857-ce7be644-6096-11e7-82d6-3c257263229c.jpg",api:{public:"https://api.gemini.com",private:"https://api.gemini.com",web:"https://docs.gemini.com"},www:"https://gemini.com/",doc:["https://docs.gemini.com/rest-api","https://docs.sandbox.gemini.com"],test:{public:"https://api.sandbox.gemini.com",private:"https://api.sandbox.gemini.com",web:"https://docs.gemini.com"},fees:["https://gemini.com/api-fee-schedule","https://gemini.com/trading-fees","https://gemini.com/transfer-fees"]},api:{web:{get:["rest-api"]},public:{get:["v1/symbols","v1/pricefeed","v1/pubticker/{symbol}","v1/book/{symbol}","v1/trades/{symbol}","v1/auction/{symbol}","v1/auction/{symbol}/history","v2/candles/{symbol}/{timeframe}","v2/ticker/{symbol}"]},private:{post:["v1/order/new","v1/order/cancel","v1/order/cancel/session","v1/order/cancel/all","v1/order/status","v1/orders","v1/mytrades","v1/notionalvolume","v1/tradevolume","v1/transfers","v1/balances","v1/deposit/{currency}/newAddress","v1/withdraw/{currency}","v1/heartbeat","v1/transfers"]}},precisionMode:S,fees:{trading:{taker:.0035,maker:.001}},httpExceptions:{400:v,403:x,404:m,406:b,429:O,500:f,502:T,503:_},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1hr","6h":"6hr","1d":"1day"},exceptions:{exact:{AuctionNotOpen:v,ClientOrderIdTooLong:v,ClientOrderIdMustBeString:v,ConflictingOptions:v,EndpointMismatch:v,EndpointNotFound:v,IneligibleTiming:v,InsufficientFunds:b,InvalidJson:v,InvalidNonce:g,InvalidOrderType:y,InvalidPrice:y,InvalidQuantity:y,InvalidSide:y,InvalidSignature:k,InvalidSymbol:v,InvalidTimestampInPayload:v,Maintenance:_,MarketNotOpen:y,MissingApikeyHeader:k,MissingOrderField:y,MissingRole:k,MissingPayloadHeader:k,MissingSignatureHeader:k,NoSSL:k,OptionsMustBeArray:v,OrderNotFound:m,RateLimit:O,System:f,UnsupportedOption:v},broad:{"The Gemini Exchange is currently undergoing maintenance.":_,"We are investigating technical issues with the Gemini Exchange.":T}},options:{fetchMarketsMethod:"fetch_markets_from_web",fetchTickerMethod:"fetchTickerV1"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},r=this.safeValue(this.options,"fetchMarketsMethod","fetch_markets_from_api"),e.next=4,this[r](t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromWeb",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,_,O,T,S,C,I,M,E,A,F=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=F.length>0&&void 0!==F[0]?F[0]:{},e.next=3,this.webGetRestApi(t);case 3:if(r=e.sent,n=r.split('<h1 id="symbols-and-minimums">Symbols and minimums</h1>'),a=n.length,s=this.id+" the "+this.name+" API doc HTML markup has changed, breaking the parser of order limits and precision info for "+this.name+" markets.",2===a){e.next=9;break}throw new w(s);case 9:if(o=n[1].split("tbody>"),!(o.length<2)){e.next=13;break}throw new w(s);case 13:if(c=o[1].split("\n<tr>\n"),!((u=c.length)<2)){e.next=17;break}throw new w(s);case 17:d=[],h=1;case 19:if(!(h<u)){e.next=46;break}if(l=c[h],f=l.split("</td>\n"),!(f.length<5)){e.next=25;break}throw new w(s);case 25:p=f[0].replace("<td>",""),v=f[1].replace("<td>",""),m=v.split(" "),y=this.safeFloat(m,0),g=f[2].replace("<td>",""),b=g.split(" "),k=this.safeFloat(b,0),x=p.length-0,_=p.slice(x-3,x),O=this.safeCurrencyCode(_),T=f[3].replace("<td>",""),S=T.split(" "),C=this.safeFloat(S,0),I=p.replace(_,""),M=this.safeCurrencyCode(I),E=M+"/"+O,A=void 0,d.push({id:p,info:l,symbol:E,base:M,quote:O,baseId:I,quoteId:_,active:A,precision:{amount:k,price:C},limits:{amount:{min:y,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});case 43:h++,e.next=19;break;case 46:return e.abrupt("return",d);case 47:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarketsFromAPI",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetV1Symbols(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=s,c=s.length-0,u=s.slice(0,c-3),d=s.slice(c-3,c),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:void 0,price:void 0},n.push({id:s,info:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,precision:p,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},active:void 0});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit_bids=r,a.limit_asks=r),e.next=8,this.publicGetV1BookSymbol(this.extend(a,n));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s,void 0,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickerV1",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetV1PubtickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickerV2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetV2TickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickerV1AndV2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.fetchTickerV1(t,r);case 3:return n=e.sent,e.next=6,this.fetchTickerV2(t,r);case 6:return a=e.sent,e.abrupt("return",this.deepExtend(n,{open:a.open,high:a.high,low:a.low,change:a.change,percentage:a.percentage,average:a.average,info:a.info}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n=this.safeValue(this.options,"fetchTickerMethod","fetchTickerV1"),e.next=4,this[n](t,r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"volume",{}),i=this.safeInteger(r,"timestamp"),n=void 0,a=this.safeString(e,"pair"),s=void 0,o=void 0;if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{var c=a.length-0;7===c?(s=a.slice(0,4),o=a.slice(4,7)):(s=a.slice(0,3),o=a.slice(3,6)),n=this.safeCurrencyCode(s)+"/"+this.safeCurrencyCode(o)}void 0===n&&void 0!==t&&(n=t.symbol,s=t.baseId.toUpperCase(),o=t.quoteId.toUpperCase(),t.base,t.quote);var u=this.safeFloat(e,"price"),d=this.safeFloat2(e,"last","close",u),h=this.safeFloat(e,"percentChange24h"),l=void 0,f=this.safeFloat(e,"open"),p=void 0;void 0!==d&&(void 0!==f?(l=d-f,0!==f&&(h=l/f*100),p=this.sum(d,f)/2):void 0!==h&&(l=d*h,void 0===f&&(f=d-l),p=this.sum(d,f)/2));var v=this.safeFloat(r,s),m=this.safeFloat(r,o),y=this.vwap(v,m);return{symbol:n,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:y,open:f,close:d,last:d,previousClose:void 0,change:l,percentage:h,average:p,baseVolume:v,quoteVolume:m,info:e}}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetV1Pricefeed(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeString(e,"tid"),n=this.safeString(e,"order_id"),a=this.safeString(e,"fee_currency"),s=this.safeCurrencyCode(a),o={cost:this.safeFloat(e,"fee_amount"),currency:s},c=this.safeFloat(e,"price"),u=this.safeFloat(e,"amount"),d=void 0;void 0!==c&&void 0!==u&&(d=c*u);var h=void 0,l=this.safeStringLower(e,"type"),f=this.safeSymbol(void 0,t);return{id:i,order:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:f,type:h,side:l,takerOrMaker:void 0,price:c,cost:d,amount:u,fee:o}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetV1TradesSymbol(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostV1Balances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(s,"available"),u.total=this.safeFloat(s,"amount"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeFloat(e,"original_amount"),n=this.safeFloat(e,"remaining_amount"),a=this.safeFloat(e,"executed_amount"),s="closed";e.is_live&&(s="open"),e.is_cancelled&&(s="canceled");var o=this.safeFloat(e,"price"),c=this.safeFloat(e,"avg_execution_price"),u=this.safeString(e,"type");u="exchange limit"===u?"limit":"market buy"===u||"market sell"===u?"market":e.type;var d=void 0,h=this.safeString(e,"symbol"),l=this.safeSymbol(h,t),f=this.safeString(e,"order_id"),p=this.safeStringLower(e,"side"),v=this.safeString(e,"client_order_id");return this.safeOrder({id:f,clientOrderId:v,info:e,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,status:s,symbol:l,type:u,timeInForce:void 0,postOnly:void 0,side:p,price:o,stopPrice:void 0,average:c,cost:void 0,amount:i,filled:a,remaining:n,fee:d,trades:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostV1OrderStatus(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privatePostV1Orders(a);case 8:return s=e.sent,o=void 0,void 0!==t&&(o=this.market(t)),e.abrupt("return",this.parseOrders(s,o,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c=this.nonce(),u={client_order_id:c.toString(),symbol:this.marketId(t),amount:a.toString(),price:s.toString(),side:n,type:"exchange limit"},e.next=10,this.privatePostV1OrderNew(this.extend(u,o));case 10:return d=e.sent,e.abrupt("return",{info:d,id:d.order_id});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostV1OrderCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit_trades=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=14,this.privatePostV1Mytrades(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return s=this.currency(t),o={currency:s.id,amount:r,address:n},e.next=9,this.privatePostV1WithdrawCurrency(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",{info:c,id:this.safeString(c,"txHash")});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>0&&void 0!==o[0]?o[0]:void 0,t=o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:void 0,n=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return a={},void 0!==r&&(a.limit_transfers=r),void 0!==t&&(a.timestamp=t),e.next=11,this.privatePostV1Transfers(this.extend(a,n));case 11:return s=e.sent,e.abrupt("return",this.parseTransactions(s));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestampms"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i,t),a=this.safeString(e,"destination"),s=this.safeStringLower(e,"type"),o="pending";e.status&&(o="ok");var c=void 0,u=this.safeFloat(e,"feeAmount");return void 0!==u&&(c={cost:u,currency:n}),{info:e,id:this.safeString(e,"eid"),txid:this.safeString(e,"txHash"),timestamp:r,datetime:this.iso8601(r),address:a,tag:void 0,type:s,amount:this.safeFloat(e,"amount"),currency:n,status:o,updated:void 0,fee:c}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce(),u=this.extend({request:s,nonce:c},o),d=this.json(u);d=this.stringToBase64(d);var h=this.hmac(d,this.encode(this.secret),"sha384");n={"Content-Type":"text/plain","X-GEMINI-APIKEY":this.apiKey,"X-GEMINI-PAYLOAD":this.decode(d),"X-GEMINI-SIGNATURE":h}}else Object.keys(o).length&&(s+="?"+this.urlencode(o));return{url:s=this.urls.api[t]+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){if("error"===this.safeString(s,"result")){var u=this.safeString(s,"reason"),d=this.safeString(s,"message"),h=this.id+" "+d;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new f(h)}}else if("string"===typeof a){var l=this.id+" "+a;this.throwBroadlyMatchedException(this.exceptions.broad,a,l)}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostV1DepositCurrencyNewAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s,"address"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={timeframe:this.timeframes[r],symbol:o.id},e.next=10,this.publicGetV2CandlesSymbolTimeframe(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.InvalidOrder,v=l.AuthenticationError,m=l.InsufficientFunds,y=l.BadSymbol,g=l.OrderNotFound,b=l.InvalidAddress,k=l.BadRequest,x=r(13),w=x.TRUNCATE,_=x.ROUND,O=x.TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"gopax",name:"GOPAX",countries:["KR"],version:"v1",rateLimit:50,hostname:"gopax.co.kr",certified:!0,pro:!0,has:{cancelOrder:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:"emulated",fetchDepositAddresses:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1d":"1440"},urls:{logo:"https://user-images.githubusercontent.com/1294454/102897212-ae8a5e00-4478-11eb-9bab-91507c643900.jpg",api:{public:"https://api.{hostname}",private:"https://api.{hostname}"},www:"https://www.gopax.co.kr",doc:"https://gopax.github.io/API/index.en.html",fees:"https://www.gopax.com/feeinfo"},api:{public:{get:["notices","assets","price-tick-size","trading-pairs","trading-pairs/{tradingPair}/ticker","trading-pairs/{tradingPair}/book","trading-pairs/{tradingPair}/trades","trading-pairs/{tradingPair}/stats","trading-pairs/{tradingPair}/price-tick-size","trading-pairs/stats","trading-pairs/{tradingPair}/candles","time"]},private:{get:["balances","balances/{assetName}","orders","orders/{orderId}","orders/clientOrderId/{clientOrderId}","trades","deposit-withdrawal-status","crypto-deposit-addresses","crypto-withdrawal-addresses"],post:["orders"],delete:["orders/{orderId}","orders/clientOrderId/{clientOrderId}"]}},fees:{trading:{percentage:!0,tierBased:!1,maker:4e-4,taker:4e-4}},exceptions:{broad:{ERROR_INVALID_ORDER_TYPE:p,ERROR_INVALID_AMOUNT:p,ERROR_INVALID_TRADING_PAIR:y,"No such order ID":g,"Forbidden order type":p,"the client order ID will be reusable which order has already been completed or canceled":p,ERROR_NO_SUCH_TRADING_PAIR:y,ERROR_INVALID_ORDER_SIDE:p,ERROR_NOT_HEDGE_TOKEN_USER:p,ORDER_EVENT_ERROR_NOT_ALLOWED_BID_ORDER:p,ORDER_EVENT_ERROR_INSUFFICIENT_BALANCE:m,"Invalid option combination":p,"No such client order ID":g},exact:{100:y,101:y,103:p,104:y,105:y,106:y,107:p,108:p,111:p,201:m,202:p,203:p,204:p,205:p,206:p,10004:v,10041:k,10056:k,10057:y,10059:y,10062:k,10069:g,10155:v,10166:k,10212:p,10221:g,10222:p,10223:p,10227:p,10319:k,10358:p,10359:p,10360:p,10361:p,10362:p,10363:p}},options:{createMarketBuyOrderRequiresPrice:!0}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"name"),c=this.safeInteger(s,"id"),u=this.safeString(s,"baseAsset"),d=this.safeString(s,"quoteAsset"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={price:this.safeInteger(s,"quoteAssetScale"),amount:this.safeInteger(s,"baseAssetScale")},v=this.safeValue(s,"restApiOrderAmountMin",{}),m=this.safeValue(v,"marketAsk",{}),y=this.safeValue(v,"marketBid",{}),g=this.safeFloat(s,"takerFeePercent"),b=this.safeFloat(s,"makerFeePercent"),k=parseFloat(this.decimalToPrecision(g/100,_,1e-8,O)),x=parseFloat(this.decimalToPrecision(b/100,_,1e-8,O)),n.push({id:o,info:s,numericId:c,symbol:f,base:h,quote:l,baseId:this.safeString(s,"baseAsset"),quoteId:this.safeString(s,"quoteAsset"),active:!0,taker:k,maker:x,precision:p,limits:{amount:{min:this.safeFloat(m,"amount"),max:void 0},price:{min:this.safeFloat(s,"priceMin"),max:void 0},cost:{min:this.safeFloat(y,"amount"),max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"id"),c=this.safeCurrencyCode(o),u=this.safeString(s,"name"),d=this.safeFloat(s,"withdrawalFee"),h=this.safeFloat(s,"scale"),n[c]={id:o,info:s,code:c,name:u,active:!0,fee:d,precision:h,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"withdrawalAmountMin"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={tradingPair:n.id},e.next=8,this.publicGetTradingPairsTradingPairBook(this.extend(a,r));case 8:return s=e.sent,o=this.safeInteger(s,"sequence"),(c=this.parseOrderBook(s,void 0,"bid","ask",1,2)).nonce=o,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"name"),i=this.safeSymbol(r,t,"-"),n=this.parse8601(this.safeString(e,"time")),a=this.safeFloat(e,"open"),s=this.safeFloat2(e,"price","close"),o=void 0,c=void 0,u=void 0;void 0!==s&&void 0!==a&&(u=this.sum(s,a)/2,o=s-a,a>0&&(c=o/a*100));var d=this.safeFloat(e,"volume"),h=this.safeFloat(e,"quoteVolume"),l=this.vwap(d,h);return{symbol:i,info:e,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bidVolume"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"askVolume"),vwap:l,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:c,average:u,baseVolume:d,quoteVolume:h}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={tradingPair:n.id},e.next=7,this.publicGetTradingPairsTradingPairTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTradingPairsStats(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parsePublicTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"amount"),a=void 0;return"symbol"in t&&(a=this.safeString(t,"symbol")),{info:e,id:this.safeString(e,"id"),timestamp:r,datetime:this.iso8601(r),symbol:a,order:void 0,type:void 0,side:this.safeString(e,"side"),takerOrMaker:void 0,price:i,amount:n,cost:i*n,fee:void 0}}},{key:"parsePrivateTrade",value:function(e){var t=this.parse8601(this.safeString(e,"timestamp")),r=this.safeString(e,"tradingPairName").replace("-","/"),i=this.safeString(e,"side"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"baseAmount"),s=r.slice(0,3);"sell"===i&&(s=r.slice(4));var o={cost:this.safeFloat(e,"fee"),currency:s,rate:void 0};return{info:e,id:this.safeString(e,"id"),timestamp:t,datetime:this.iso8601(t),symbol:r,order:this.safeInteger(e,"orderId"),type:void 0,side:i,takerOrMaker:this.safeString(e,"position"),price:n,amount:a,cost:n*a,fee:o}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","tradeId"),i=this.safeInteger(e,"orderId"),n=this.parse8601(this.safeString2(e,"time","timestamp"));n=this.safeTimestamp(e,"occuredAt",n);var a=this.safeString(e,"tradingPairName"),s=(t=this.safeMarket(a,t,"-")).symbol,o=this.safeString(e,"side");"1"===o?o="buy":"2"===o&&(o="sell");var c=this.safeString(e,"type");"1"===c?c="limit":"2"===c&&(c="market");var u=this.safeFloat(e,"price"),d=this.safeFloat2(e,"amount","baseAmount"),h=this.safeFloat(e,"quoteAmount");void 0===h&&void 0!==u&&void 0!==d&&(h=u*d);var l=this.safeFloat(e,"fee"),f=void 0;void 0!==l&&(f={cost:l,currency:t.base});var p=this.safeString(e,"position");return{info:e,id:r,timestamp:n,datetime:this.iso8601(n),symbol:s,order:i,type:void 0,side:o,takerOrMaker:p,price:u,amount:d,cost:h,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={tradingPair:s.id},void 0!==r&&(o.after=parseInt(r/1e3)),void 0!==n&&(o.limit=n),e.next=11,this.publicGetTradingPairsTradingPairTrades(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,3),this.safeFloat(e,2),this.safeFloat(e,1),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),a=void 0===a?1024:a,c={tradingPair:o.id,interval:this.timeframes[r]},u=this.parseTimeframe(r),void 0===n?(d=this.milliseconds(),c.end=d,c.start=d-a*u*1e3):(c.start=n,c.end=this.sum(n,a*u*1e3)),e.next=13,this.publicGetTradingPairsTradingPairCandles(this.extend(c,s));case 13:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBalanceResponse",value:function(e){for(var t={info:e},r=0;r<e.length;r++){var i=e[r],n=this.safeString2(i,"asset","isoAlpha3"),a=this.safeCurrencyCode(n),s=this.safeFloat(i,"hold"),o=this.safeFloat(i,"pendingWithdrawal"),c=this.account();c.free=this.safeFloat(i,"avail"),c.used=this.sum(s,o),t[a]=c}return this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:return r=e.sent,e.abrupt("return",this.parseBalanceResponse(r));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({placed:"open",cancelled:"canceled",completed:"closed",updated:"open",reserved:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"clientOrderId"),n=this.parse8601(this.safeString(e,"createdAt")),a=this.safeString(e,"type"),s=this.safeString(e,"side"),o=this.safeStringUpper(e,"timeInForce"),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"stopPrice"),h=this.safeFloat(e,"remaining"),l=this.safeString(e,"tradingPairName");t=this.safeMarket(l,t,"-");var f=this.parseOrderStatus(this.safeString(e,"status")),p=this.safeValue(e,"balanceChange",{}),v=this.safeFloat(p,"baseNet"),m=this.safeFloat(p,"quoteNet");void 0!==m&&(m=Math.abs(m));var y=void 0;void 0!==v&&v>0&&(y=this.parse8601(this.safeString(e,"updatedAt")));var g=void 0;if("buy"===s){var b=this.safeValue(p,"baseFee",{}),k=this.safeFloat(b,"taking"),x=this.safeFloat(b,"making");g={currency:t.base,cost:this.sum(k,x)}}else{var w=this.safeValue(p,"quoteFee",{}),_=this.safeFloat(w,"taking"),O=this.safeFloat(w,"making");g={currency:t.quote,cost:this.sum(_,O)}}var T=void 0;return void 0!==o&&(T="PO"===o),this.safeOrder({id:r,clientOrderId:i,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:y,status:f,symbol:t.symbol,type:a,timeInForce:o,postOnly:T,side:s,price:c,stopPrice:d,average:void 0,amount:u,filled:v,remaining:h,cost:m,trades:void 0,fee:g,info:e})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=void 0,a=this.safeString(r,"clientOrderId"),r=this.omit(r,"clientOrderId"),s={},void 0===a?(n="privateGetOrdersOrderId",s.orderId=t):(n="privateGetOrdersClientOrderIdClientOrderId",s.clientOrderId=a),e.next=11,this[n](this.extend(s,r));case 11:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={includePast:"true"},o=void 0,void 0!==t&&(o=this.market(t)),e.next=11,this.privateGetOrders(this.extend(s,a));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={includePast:"false"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={tradingPairName:c.id,side:n,type:r},"limit"!==r){e.next=11;break}u.price=this.priceToPrecision(t,s),u.amount=this.amountToPrecision(t,a),e.next=24;break;case 11:if("market"!==r){e.next=24;break}if("buy"!==n){e.next=23;break}if(d=a,!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=19;break}if(void 0!==s){e.next=18;break}throw new p(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument");case 18:d=s*a;case 19:h=c.precision.price,u.amount=this.decimalToPrecision(d,w,h,this.precisionMode),e.next=24;break;case 23:u.amount=this.amountToPrecision(t,a);case 24:return void 0!==(l=this.safeString(o,"clientOrderId"))&&(u.clientOrderId=l,o=this.omit(o,"clientOrderId")),void 0!==(f=this.safeFloat(o,"stopPrice"))&&(u.stopPrice=this.priceToPrecision(t,f),o=this.omit(o,"stopPrice")),void 0!==(v=this.safeStringLower(o,"timeInForce"))&&(u.timeInForce=v,o=this.omit(o,"timeInForce")),e.next=32,this.privatePostOrders(this.extend(u,o));case 32:return m=e.sent,e.abrupt("return",this.parseOrder(m,c));case 34:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n={},a=this.safeString(r,"clientOrderId"),s=void 0,void 0===a?(s="privateDeleteOrdersOrderId",n.orderId=t):(s="privateDeleteOrdersClientOrderIdClientOrderId",n.clientOrderId=a,r=this.omit(r,"clientOrderId")),e.next=10,this[s](this.extend(n,r));case 10:return o=e.sent,c=this.parseOrder(o),e.abrupt("return",this.extend(c,{id:t}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={deepSearch:"true"},void 0!==r&&(s.after=parseInt(r/1e3)),void 0!==n&&(s.limit=n),e.next=11,this.privateGetTrades(this.extend(s,a));case 11:return o=e.sent,c=void 0,void 0!==t&&(c=this.market(t)),e.abrupt("return",this.parseTrades(o,c,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"memoId"),i=this.safeString(e,"asset"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"parseDepositAddresses",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++){var n=this.parseDepositAddress(e[i]);r.push(n)}return t&&(r=this.filterByArray(r,"currency",t)),this.indexBy(r,"currency")}},{key:"fetchDepositAddresses",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetCryptoDepositAddresses(r);case 6:return n=e.sent,e.abrupt("return",this.parseDepositAddresses(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchDepositAddresses(void 0,r);case 5:if(n=e.sent,void 0!==(a=this.safeValue(n,t))){e.next=9;break}throw new b(this.id+" fetchDepositAddress() "+t+" address not found");case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({reviewing:"pending",rejected:"rejected",processing:"pending",failed:"failed",completed:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"txId"),n=this.safeString(e,"asset"),a=this.safeCurrencyCode(n,t),s=this.safeString(e,"type");"crypto_withdrawal"===s||"fiat_withdrawal"===s?s="withdrawal":"crypto_deposit"!==s&&"fiat_deposit"!==s||(s="deposit");var o=this.safeFloat(e,"netAmount"),c=this.safeFloat(e,"feeAmount"),u=void 0;void 0!==c&&(u={cost:c,currency:a});var d=this.safeTimestamp(e,"reviewStartedAt"),h=this.safeTimestamp(e,"completedAt"),l=this.safeString(e,"sourceAddress"),f=this.safeString(e,"destinationAddress"),p=this.safeString(e,"sourceMemoId"),v=this.safeString(e,"destinationMemoId"),m=this.parseTransactionStatus(this.safeString(e,"status"));return{info:e,id:r,txid:i,timestamp:d,datetime:this.iso8601(d),addressFrom:l,address:f,addressTo:f,tagFrom:p,tag:v,tagTo:v,type:s,amount:o,currency:a,status:m,updated:h,comment:void 0,fee:u}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.before=r),void 0!==n&&(s.limit=n),e.next=11,this.privateGetDepositWithdrawalStatus(this.extend(s,a));case 11:return o=e.sent,c=void 0,void 0!==t&&(c=this.currency(t)),e.abrupt("return",this.parseTransactions(o,c,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.implodeParams(this.urls.api[t],{hostname:this.hostname})+s,c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else if("private"===t){this.checkRequiredCredentials();var u=this.nonce().toString(),d="t"+u+r+s;if(n={"api-key":this.apiKey,timestamp:u},"POST"===r)n["Content-Type"]="application/json",d+=a=this.json(i);else if("/orders"===s){if(Object.keys(c).length){var h="?"+this.urlencode(c);d+=h,o+=h}}else"GET"===r&&Object.keys(c).length&&(o+="?"+this.urlencode(c));var l=this.base64ToBinary(this.secret),f=this.hmac(this.encode(d),l,"sha512","base64");n.signature=f}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&!Array.isArray(s)){var u=this.safeString(s,"errorCode"),d=this.safeString(s,"errorMessage"),h=this.id+" "+a;if(void 0!==d&&this.throwBroadlyMatchedException(this.exceptions.broad,a,h),void 0!==u&&this.throwExactlyMatchedException(this.exceptions.exact,u,h),void 0!==u||void 0!==d)throw new f(h)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.OrderNotFound,m=l.ArgumentsRequired,y=l.BadSymbol,g=l.BadRequest,b=l.NullResponse,k=l.InvalidOrder,x=l.BadResponse,w=l.NotSupported,_=l.ExchangeNotAvailable,O=l.RequestTimeout,T=l.RateLimitExceeded,S=l.PermissionDenied,C=l.InsufficientFunds,I=l.InvalidAddress,M=r(13),E=M.TICK_SIZE,A=M.TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"hbtc",name:"HBTC",countries:["CN"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchBidAsk:!0,fetchBidsAsks:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchDepositAddress:!1,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingLimits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/51840849/80134449-70663300-85a7-11ea-8942-e204cdeaab5d.jpg",api:{quote:"https://api.hbtc.com/openapi/quote",contract:"https://api.hbtc.com/openapi/contract",option:"https://api.hbtc.com/openapi/option",public:"https://api.hbtc.com/openapi",private:"https://api.hbtc.com/openapi",zendesk:"https://hbtc.zendesk.com/hc/en-us"},www:"https://www.hbtc.com",referral:"https://www.hbtc.com/register/O2S8NS",doc:"https://github.com/bhexopen/BHEX-OpenApi/tree/master/doc",fees:"https://hbtc.zendesk.com/hc/zh-cn/articles/360009274694"},api:{public:{get:["ping","time","brokerInfo","getOptions"]},quote:{get:["depth","depth/merged","trades","klines","ticker/24hr","ticker/price","ticker/bookTicker","contract/index","contract/depth","contract/depth/merged","contract/trades","contract/klines","contract/ticker/24hr","option/index","option/depth","option/depth/merged","option/trades","option/klines","option/ticker/24hr"]},contract:{get:["insurance","fundingRate","openOrders","historyOrders","getOrder","myTrades","positions","account"],post:["order","modifyMargin"],delete:["order/cancel","order/batchCancel"]},option:{get:["openOrders","positions","historyOrders","myTrades","settlements","account"],post:["order"],delete:["order/cancel"]},private:{get:["order","openOrders","historyOrders","account","myTrades","depositOrders","withdrawalOrders","withdraw/detail","balance_flow"],post:["order","order/test","userDataStream","subAccount/query","transfer","user/transfer","withdraw"],put:["userDataStream"],delete:["order","userDataStream"]}},precisionMode:E,fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},exceptions:{exact:{"-1000":p,"-1001":p,"-1002":f,"-1003":T,"-1004":g,"-1005":S,"-1006":x,"-1007":O,"-1014":k,"-1015":T,"-1016":_,"-1020":w,"-1021":g,"-1022":f,"-1100":g,"-1101":g,"-1102":g,"-1103":g,"-1104":g,"-1105":g,"-1106":g,"-1111":g,"-1112":b,"-1114":k,"-1115":k,"-1116":k,"-1117":k,"-1118":k,"-1119":k,"-1120":g,"-1121":y,"-1125":f,"-1127":g,"-1128":g,"-1130":g,"-1131":C,"-1132":k,"-1133":k,"-1134":k,"-1135":k,"-1136":k,"-1137":k,"-1138":k,"-1139":k,"-1140":k,"-1141":k,"-1142":k,"-1143":v,"-1144":k,"-1145":k,"-1146":O,"-1147":O,"-1149":k,"-1187":I,"-2010":k,"-2011":k,"-2013":v,"-2014":f,"-2015":f,"-2016":p}},options:{fetchTickers:{method:"quoteGetTicker24hr"}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"serverTime"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"spot",r=this.safeValue(e,"filters",[]),i=this.safeString(e,"symbol"),n=this.safeString(e,"baseAsset"),a=this.safeString(e,"quoteAsset"),s=this.safeCurrencyCode(n),o=this.safeCurrencyCode(a),c=s+"/"+o,u=!0,d=!1,h=!1,l=!1;"future"===t?(c=i,u=!1,d=!0,l=this.safeValue(e,"inverse",!1),n=this.safeString(e,"underlying"),s=this.safeCurrencyCode(n)):"option"===t&&(c=i,u=!1,h=!0);for(var f=void 0,p=void 0,v=void 0,m=void 0,y=void 0,g=0;g<r.length;g++){var b=r[g],k=this.safeString(b,"filterType");"LOT_SIZE"===k&&(f=this.safeFloat(b,"minQty"),p=this.safeFloat(b,"maxQty")),"PRICE_FILTER"===k&&(v=this.safeFloat(b,"minPrice"),m=this.safeFloat(b,"maxPrice")),"MIN_NOTIONAL"===k&&(y=this.safeFloat(b,"minNotional"))}void 0===y&&void 0!==f&&void 0!==v&&(y=f*v);var x={price:this.safeFloat2(e,"quotePrecision","quoteAssetPrecision"),amount:this.safeFloat(e,"baseAssetPrecision")},w={amount:{min:f,max:p},price:{min:v,max:m},cost:{min:y,max:void 0}};return{id:i,symbol:c,base:s,quote:o,baseId:n,quoteId:a,active:!0,type:t,spot:u,future:d,option:h,inverse:l,precision:x,limits:w,info:e}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetBrokerInfo(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"symbols",[]),s=0;s<a.length;s++)o=this.parseMarket(a[s],"spot"),n.push(o);for(c=this.safeValue(r,"options",[]),u=0;u<c.length;u++)d=this.parseMarket(c[u],"option"),n.push(d);for(h=this.safeValue(r,"contracts",[]),l=0;l<h.length;l++)f=this.parseMarket(h[l],"future"),n.push(f);return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id},void 0!==r&&(s.limit=r),e.next=9,this.quoteGetDepth(this.extend(s,n));case 9:return o=e.sent,c=this.safeInteger(o,"time"),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.quoteGetTicker24hr(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchBidAsk",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.quoteGetTickerBookTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBidsAsks",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.quoteGetTickerBookTicker(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue(this.options,"fetchTickers",{}),a=this.safeString(n,"method","quoteGetTicker24hr"),s=this.safeString(n,"type","spot"),o=this.safeString(r,"type",s),c=this.omit(r,"type"),u=a,"future"===o?u="quoteGetContractTicker24hr":"option"===o&&(u="quoteGetOptionTicker24hr"),e.next=13,this[u](c);case 13:return d=e.sent,e.abrupt("return",this.parseTickers(d,t));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.loadMarkets();case 3:return r=this.safeValue(this.options,"fetchBalance",{}),n=this.safeString(r,"type","spot"),a=this.safeString(t,"type",n),s=this.omit(t,"type"),o="privateGetAccount","future"===a?o="contractGetAccount":"option"===a&&(o="optionGetAccount"),e.next=11,this[o](s);case 11:if(c=e.sent,u=this.safeValue(c,"balances"),d={info:c},void 0!==u)for(h=0;h<u.length;h++)l=u[h],f=this.safeString2(l,"asset","tokenName"),p=this.safeCurrencyCode(f),(v=this.account()).free=this.safeFloat(l,"free"),v.used=this.safeFloat(l,"locked"),d[p]=v;else for(m=Object.keys(c),y=0;y<m.length;y++)g=m[y],b=this.safeCurrencyCode(g),k=c[g],(x=this.account()).free=this.safeFloat(k,"availableMargin"),x.total=this.safeFloat(k,"total"),d[b]=x;return e.abrupt("return",this.parseBalance(d));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:50,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.quoteGetTrades(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,interval:this.timeframes[r]},void 0!==n&&(c.startTime=n),void 0!==a&&(c.limit=a),e.next=12,this.quoteGetKlines(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,o={},c=this.safeString(this.options,"type","spot"),u=this.safeValue(this.options,"fetchMyTrades",{}),d=this.safeString(u,"type",c),h=this.safeString(a,"type",d),void 0!==t&&(s=this.market(t),o.symbol=s.id,h=s.type),l=this.omit(a,"type"),void 0!==n&&(o.limit=n),f="privateGetMyTrades","future"!==h){e.next=20;break}f="contractGetMyTrades",e.next=29;break;case 20:if("option"!==h){e.next=24;break}f="optionGetMyTrades",e.next=29;break;case 24:if(void 0!==t){e.next=26;break}throw new m(this.id+" fetchMyTrades() requires a `symbol` argument for "+h+" markets");case 26:p=this.market(t),o.symbol=p.id,void 0!==r&&(o.startTime=r);case 29:return void 0!==r&&(o.startTime=r),e.next=32,this[f](this.extend(o,l));case 32:return v=e.sent,e.abrupt("return",this.parseTrades(v,s,r,n));case 34:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,y,g,b,x,_=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=_.length>4&&void 0!==_[4]?_[4]:void 0,o=_.length>5&&void 0!==_[5]?_[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=n.toUpperCase(),d=r.toUpperCase(),h={symbol:c.id,side:u},l=o,f="privatePostOrder","future"!==c.type){e.next=30;break}if("BUY_OPEN"===u||"SELL_OPEN"===u||"BUY_CLOSE"===u||"SELL_CLOSE"===u){e.next=13;break}throw new w(this.id+" createOrder() does not support order side "+n+" for "+c.type+" markets, only BUY_OPEN, SELL_OPEN, BUY_CLOSE and SELL_CLOSE are supported");case 13:if("LIMIT"===d||"STOP"===d){e.next=15;break}throw new w(this.id+" createOrder() does not support order type "+r+" for "+c.type+" markets, only LIMIT and STOP are supported");case 15:if(void 0!==(p=this.safeValue(o,"clientOrderId"))){e.next=18;break}throw new m(this.id+" createOrder() requires a clientOrderId parameter for "+c.type+" markets, supply clientOrderId in the params argument");case 18:if(void 0!==(v=this.safeValue(o,"leverage"))||"BUY_OPEN"!==u&&"SELL_OPEN"!==u){e.next=21;break}throw new w(this.id+" createOrder() requires a leverage parameter for "+c.type+" markets if orderSide is BUY_OPEN or SELL_OPEN");case 21:f="contractPostOrder",void 0===(y=this.safeString(o,"priceType"))?h.price=this.priceToPrecision(t,s):(h.priceType=y,"INPUT"===y&&(h.price=this.priceToPrecision(t,s))),h.orderType=r.toUpperCase(),h.quantity=this.amountToPrecision(t,a),h.leverage=v,h.clientOrderId=p,e.next=53;break;case 30:if("option"===c.type&&(f="optionPostOrder"),void 0!==(g=this.safeValue2(o,"clientOrderId","newClientOrderId"))&&(h.newClientOrderId=g),h.type=d,"limit"!==r){e.next=39;break}h.price=this.priceToPrecision(t,s),h.quantity=this.amountToPrecision(t,a),e.next=53;break;case 39:if("market"!==r){e.next=53;break}if("buy"!==n){e.next=52;break}if(!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=48;break}if(void 0===s){e.next=47;break}a*=s,e.next=48;break;case 47:throw new k(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument (the exchange-specific behaviour)");case 48:b=c.precision.price,h.quantity=this.decimalToPrecision(a,A,b,this.precisionMode),e.next=53;break;case 52:h.quantity=this.amountToPrecision(t,a);case 53:return l=this.omit(l,["clientOrderId","newClientOrderId"]),e.next=56,this[f](this.extend(h,l));case 56:return x=e.sent,e.abrupt("return",this.parseOrder(x,c));case 58:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p.length>1&&void 0!==p[1]?p[1]:void 0,r=p.length>2&&void 0!==p[2]?p[2]:{},e.next=4,this.loadMarkets();case 4:if(n=this.safeValue2(r,"origClientOrderId","clientOrderId"),a={},s=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"cancelOrder",{}),c=this.safeString(o,"type",s),u=this.safeString(r,"type",c),d=this.omit(r,"type"),void 0!==n?(a.origClientOrderId=n,d=this.omit(d,["origClientOrderId","clientOrderId"])):a.orderId=t,h="privateDeleteOrder",void 0!==(l=this.safeString(d,"orderType"))&&(u="future"),"future"!==u){e.next=22;break}if(h="contractDeleteOrderCancel",void 0!==l){e.next=19;break}throw new m(this.id+" cancelOrder() requires an orderType parameter, pass the { 'orderType': 'LIMIT' } or { 'orderType': 'STOP' } in params argument");case 19:a.orderType=l,e.next=23;break;case 22:"option"===u&&(h="optionDeleteOrderCancel");case 23:return e.next=25,this[h](this.extend(a,d));case 25:return f=e.sent,e.abrupt("return",this.parseOrder(f));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},c=this.safeString(this.options,"type","spot"),u=this.safeValue(this.options,"fetchOpenOrders",{}),d=this.safeString(u,"type",c),h=this.safeString(a,"type",d),void 0!==t&&(s=this.market(t),o.symbol=s.id,h=s.type),l=this.omit(a,"type"),void 0!==n&&(o.limit=n),f="privateGetOpenOrders","future"===h?f="contractGetOpenOrders":"option"===h&&(f="optionGetOpenOrders"),e.next=19,this[f](this.extend(o,l));case 19:return p=e.sent,e.abrupt("return",this.parseOrders(p,s,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},c=this.safeString(this.options,"type","spot"),u=this.safeValue(this.options,"fetchClosedOrders",{}),d=this.safeString(u,"type",c),h=this.safeString(a,"type",d),void 0!==t&&(s=this.market(t),o.symbol=s.id,h=s.type),l=this.omit(a,"type"),void 0!==n&&(o.limit=n),void 0!==r&&(o.startTime=r),f="privateGetHistoryOrders","future"===h?f="contractGetHistoryOrders":"option"===h&&(f="optionGetHistoryOrders"),e.next=20,this[f](this.extend(o,l));case 20:return p=e.sent,e.abrupt("return",this.parseOrders(p,s,r,n));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f.length>1&&void 0!==f[1]?f[1]:void 0,r=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue2(r,"origClientOrderId","clientOrderId"),a={},s=this.safeString(this.options,"type","spot"),o=this.safeValue(this.options,"fetchOrder",{}),c=this.safeString(o,"type",s),u=this.safeString(r,"type",c),d=this.omit(r,"type"),void 0!==n?(a.origClientOrderId=n,d=this.omit(d,["origClientOrderId","clientOrderId"])):a.orderId=t,h="privateGetOrder","future"===u?h="contractGetGetOrder":"option"===u&&(h="optionGetGetOrder"),e.next=16,this[h](this.extend(a,d));case 16:return l=e.sent,e.abrupt("return",this.parseOrder(l));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t)),void 0!==r&&(o.startTime=r),void 0!==n&&(o.limit=n),e.next=13,this.privateGetDepositOrders(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.token=s.id),void 0!==r&&(o.startTime=r),void 0!==n&&(o.limit=n),e.next=13,this.privateGetWithdrawalOrders(this.extend(o,a));case 13:return c=e.sent,e.abrupt("return",this.parseTransactions(c,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=this.safeString(s,"clientOrderId",this.uuid()),u={clientOrderId:c,tokenId:o.id,address:n,withdrawQuantity:r},void 0!==a&&(u.addressExt=a),e.next=11,this.privatePostWithdraw(this.extend(u,s));case 11:return d=e.sent,e.abrupt("return",{info:d,id:this.safeString(d,"orderId")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.privatePostSubAccountQuery(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"accountId"),c=this.safeString(s,"accountType"),u=c,"1"===c?u="spot":"2"===c?u="option":"3"===c&&(u="future"),n.push({id:o,type:u,currency:void 0,info:s});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={accountType:1,accountIndex:0,fromFlowId:"",endFlowId:"",endTime:1588450533040},o=void 0,void 0!==t&&(o=this.currency(t),s.tokenId=o.id),void 0!==r&&(s.startTime=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetBalanceFlow(this.extend(s,a));case 13:return c=e.sent,e.abrupt("return",this.parseLedger(c,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tokenId"),i=this.safeCurrencyCode(r,t),n=this.safeFloat(e,"change"),a=this.safeFloat(e,"total"),s=n<0?"out":"in",o=void 0;if(void 0!==a&&void 0!==n){var c="out"===s?n:-n;o=this.sum(a,c)}var u=this.safeInteger(e,"created"),d=this.parseLedgerEntryType(this.safeString(e,"flowType")),h=this.safeString(e,"id"),l=this.safeString(e,"accountId");return{id:h,currency:i,account:l,referenceAccount:void 0,referenceId:void 0,status:void 0,amount:n,before:o,after:a,fee:void 0,direction:s,timestamp:u,datetime:this.iso8601(u),type:d,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({TRADE:"trade",FEE:"fee",TRANSFER:"transfer",DEPOSIT:"transaction",MAKER_REWARD:"rebate",PNL:"pnl",SETTLEMENT:"settlement",LIQUIDATION:"liquidation",FUNDING_SETTLEMENT:"settlement",USER_ACCOUNT_TRANSFER:"transfer",OTC_BUY_COIN:"trade",OTC_SELL_COIN:"trade",OTC_FEE:"fee",OTC_TRADE:"trade",ACTIVITY_AWARD:"referral",INVITATION_REFERRAL_BONUS:"referral",REGISTER_BONUS:"referral",AIRDROP:"airdrop",MINE_REWARD:"reward"},e,e)}},{key:"parseTransactionStatus",value:function(e){return this.safeString({BROKER_AUDITING_STATUS:"pending",BROKER_REJECT_STATUS:"failed",AUDITING_STATUS:"pending",AUDIT_REJECT_STATUS:"failed",PROCESSING_STATUS:"pending",WITHDRAWAL_SUCCESS_STATUS:"ok",WITHDRAWAL_FAILURE_STATUS:"failed",BLOCK_MINING_STATUS:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"address"),n=this.safeString2(e,"addressExt","addressTag");void 0!==n&&n.length<1&&(n=void 0);var a=this.safeString(e,"fromAddress"),s=this.safeString(e,"fromAddressTag");void 0!==s&&s.length<1&&(s=void 0);var o=this.safeString(e,"tokenId"),c=this.safeCurrencyCode(o,t),u=this.safeInteger(e,"time"),d=this.safeString(e,"txid");""===d&&(d=void 0);var h=void 0,l=this.parseTransactionStatus(this.safeString(e,"statusCode"));void 0===l?(h="deposit",l="ok"):h="withdrawal";var f=this.safeFloat(e,"quantity"),p=this.safeFloat(e,"fee"),v=void 0;if(void 0!==p){var m=this.safeString(e,"feeTokenId"),y=this.safeCurrencyCode(m);v={currency:y,cost:p}}return{info:e,id:r,txid:d,timestamp:u,datetime:this.iso8601(u),addressFrom:a,address:i,addressTo:i,tagFrom:s,tag:n,tagTo:n,type:h,amount:f,currency:c,status:l,updated:void 0,fee:v}}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeInteger(e,"time"),a=this.safeFloat(e,"openPrice"),s=this.safeFloat(e,"lastPrice"),o=void 0,c=void 0,u=void 0;void 0!==a&&void 0!==s&&(o=s-a,u=this.sum(a,s)/2,void 0!==s&&s>0&&(c=o/a*100));var d=this.safeFloat(e,"quoteVolume"),h=this.safeFloat(e,"volume"),l=this.vwap(h,d);return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"highPrice"),low:this.safeFloat(e,"lowPrice"),bid:this.safeFloat2(e,"bestBidPrice","bidPrice"),bidVolume:this.safeFloat(e,"bidQty"),ask:this.safeFloat2(e,"bestAskPrice","askPrice"),askVolume:this.safeFloat(e,"askQty"),vwap:l,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:c,average:u,baseVolume:h,quoteVolume:d,info:e}}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"id"),i=this.safeFloat(e,"time"),n=this.safeString(e,"orderId"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"qty"),o=void 0;void 0!==a&&void 0!==s&&(o=a*s);var c=void 0,u=void 0;if("isBuyerMaker"in e)c=e.isBuyerMaker?"sell":"buy";else{var d=this.safeValue(e,"isMaker");void 0!==d&&(u=d?"maker":"taker"),c=this.safeValue(e,"isBuyer")?"buy":"sell"}var h=void 0,l=this.safeFloat(e,"commission");if(void 0!==l){var f=this.safeString(e,"commissionAsset");h={cost:l,currency:this.safeCurrencyCode(f)}}var p=void 0;return void 0===p&&void 0!==t&&(p=t.symbol),{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:p,type:undefined,order:n,side:c,takerOrMaker:u,price:a,amount:s,cost:o,fee:h}}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"clientOrderId"),n=this.safeInteger(e,"time");void 0===n&&(n=this.safeInteger(e,"transactTime"));var a=this.safeString(e,"symbol"),s=this.safeSymbol(a,t),o=this.safeStringLower(e,"type"),c=this.safeStringLower(e,"side"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"avgPrice"),h=void 0,l=this.safeFloat(e,"cummulativeQuoteQty"),f=void 0,p=void 0;void 0===o?(o=this.safeStringLower(e,"orderType"),void 0!==t&&t.inverse&&(l=this.safeFloat(e,"executedQty"),h=void 0),0===l&&(f=0)):(h=this.safeFloat(e,"origQty"),"market"===o&&(u=void 0,"buy"===c&&(h=void 0)),void 0!==(f=this.safeFloat(e,"executedQty"))&&void 0!==h&&(p=h-f)),0===d&&(d=void 0);var v=this.parseOrderStatus(this.safeString(e,"status")),m=this.safeString(e,"timeInForce"),y=this.safeFloat(e,"stopPrice"),g={info:e,id:r,clientOrderId:i,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,symbol:s,type:o,timeInForce:m,side:c,price:u,stopPrice:y,average:d,cost:l,amount:h,filled:f,remaining:p,status:v,trades:void 0,fee:void 0,fees:void 0},b=this.safeValue(e,"fees",[]),k=b.length;if(k>0){g.fees=[];for(var x=0;x<b.length;x++){var w=this.safeFloat(b[x],"fee");if(void 0!==w){var _=this.safeString(b[x],"feeToken"),O=this.safeCurrencyCode(_);g.fees.push({cost:w,currency:O})}}}return g}},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",CANCELED:"canceled",FILLED:"closed",PARTIALLY_FILLED:"open",PENDING_CANCEL:"canceled"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e)),c="contract"===t&&("insurance"===e||"fundingRate"===e);if("public"===t||"quote"===t||c)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{var u=this.milliseconds();this.checkRequiredCredentials();var d=this.extend({timestamp:u},o),h=this.urlencode(d),l=this.hmac(this.encode(h),this.encode(this.secret),"sha256");d.signature=l,n={"X-BH-APIKEY":this.apiKey},"POST"===r?(a=this.urlencode(d),n=this.extend({"Content-Type":"application/x-www-form-urlencoded"},n)):s+="?"+this.urlencode(d)}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"code"in s){var u=this.safeString(s,"code");if("0"!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),new p(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadRequest,p=l.AuthenticationError,v=l.NetworkError,m=l.ArgumentsRequired,y=l.OrderNotFound,g=l.InsufficientFunds,b=r(13).TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"hollaex",name:"HollaEx",countries:["KR"],rateLimit:333,version:"v1",has:{CORS:!1,fetchMarkets:!0,fetchCurrencies:!0,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchOHLCV:!0,fetchBalance:!0,createOrder:!0,createLimitBuyOrder:!0,createLimitSellOrder:!0,createMarketBuyOrder:!0,createMarketSellOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!1,fetchOpenOrder:!0,fetchOrder:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchTransactions:!1,fetchOrders:!1,fetchMyTrades:!0,withdraw:!0,fetchDepositAddress:!0},timeframes:{"1h":"1h","1d":"1d"},urls:{logo:"https://user-images.githubusercontent.com/1294454/75841031-ca375180-5ddd-11ea-8417-b975674c23cb.jpg",api:"https://api.hollaex.com",www:"https://hollaex.com",doc:"https://apidocs.hollaex.com",referral:"https://pro.hollaex.com/signup?affiliation_code=QSWA6G"},precisionMode:b,requiredCredentials:{apiKey:!0,secret:!0},api:{public:{get:["health","constant","ticker","ticker/all","orderbooks","trades","chart","udf/config","udf/history","udf/symbols"]},private:{get:["user","user/balance","user/trades","user/orders","user/orders/{order_id}","user/deposits","user/withdrawals","user/withdraw/{currency}/fee"],post:["user/request-withdrawal","order"],delete:["user/orders","user/orders/{order_id}"]}},fees:{trading:{tierBased:!0,percentage:!0}},exceptions:{broad:{"Invalid token":p,"Order not found":y,"Insufficient balance":g},exact:{400:f,403:p,404:f,405:f,410:f,429:f,500:v,503:v}},options:{"api-expires":parseInt(this.timeout/1e3)}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetConstant(t);case 3:for(r=e.sent,n=this.safeValue(r,"pairs",{}),a=Object.keys(n),s=[],o=0;o<a.length;o++)c=a[o],u=n[c],d=this.safeString(u,"name"),h=this.safeString(u,"pair_base"),l=this.safeString(u,"pair_2"),f=this.commonCurrencyCode(h.toUpperCase()),p=this.commonCurrencyCode(l.toUpperCase()),v=f+"/"+p,m=this.safeValue(u,"active"),s.push({id:d,symbol:v,base:f,quote:p,baseId:h,quoteId:l,active:m,precision:{price:this.safeFloat(u,"increment_price"),amount:this.safeFloat(u,"increment_size")},limits:{amount:{min:this.safeFloat(u,"min_size"),max:this.safeFloat(u,"max_size")},price:{min:this.safeFloat(u,"min_price"),max:this.safeFloat(u,"max_price")},cost:{min:void 0,max:void 0}},info:u});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetConstant(t);case 3:for(r=e.sent,n=this.safeValue(r,"coins",{}),a=Object.keys(n),s={},o=0;o<a.length;o++)c=a[o],u=n[c],d=this.safeString(u,"symbol"),h=this.safeInteger(u,"id"),l=this.safeCurrencyCode(d),f=this.safeString(u,"fullname"),p=this.safeValue(u,"active"),v=this.safeFloat(u,"withdrawal_fee"),m=this.safeFloat(u,"increment_unit"),y=this.safeValue(u,"withdrawal_limits",[]),s[l]={id:d,numericId:h,code:l,info:u,name:f,active:p,fee:v,precision:m,limits:{amount:{min:this.safeFloat(u,"min"),max:this.safeFloat(u,"max")},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:this.safeValue(y,0)}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>0&&void 0!==h[0]?h[0]:void 0,h.length>1&&void 0!==h[1]?h[1]:void 0,t=h.length>2&&void 0!==h[2]?h[2]:{},e.next=5,this.loadMarkets();case 5:return e.next=7,this.publicGetOrderbooks(t);case 7:for(r=e.sent,n={},a=Object.keys(r),s=0;s<a.length;s++)o=a[s],c=r[o],u=this.safeSymbol(o,void 0,"-"),d=this.parse8601(this.safeString(c,"timestamp")),n[u]=this.parseOrderBook(r[o],d);return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.marketId(t),a={symbol:n},e.next=8,this.publicGetOrderbooks(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,n),c=this.parse8601(this.safeString(o,"timestamp")),e.abrupt("return",this.parseOrderBook(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickerAll(this.extend(r));case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={},i=Object.keys(e),n=0;n<i.length;n++){var a=i[n],s=e[a],o=this.safeString(s,"symbol",a),c=this.safeMarket(o,void 0,"-"),u=c.symbol;r[u]=this.parseTicker(s,c)}return this.filterByArray(r,"symbol",t)}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.parse8601(this.safeString2(e,"time","timestamp")),a=this.safeFloat(e,"close"),s={symbol:i,info:e,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:a,last:this.safeFloat(e,"last",a),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0};return s}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,s.id,[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=(t=this.safeMarket(r,t,"-")).symbol,n=this.safeString(e,"timestamp"),a=this.parse8601(n),s=this.safeString(e,"side"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"size"),u=void 0;void 0!==o&&void 0!==c&&(u=o*c);var d=this.safeFloat(e,"fee"),h=void 0;if(void 0!==d){var l=t.quote,f=void 0!==t?t.quote:l;h={cost:d,currency:f}}return{info:e,id:void 0,timestamp:a,datetime:n,symbol:i,order:void 0,type:void 0,side:s,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:h}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1h",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c={symbol:o.id,resolution:this.timeframes[r]},u=this.parseTimeframe(r),void 0!==n){e.next=20;break}if(void 0!==a){e.next=14;break}throw new m(this.id+" fetchOHLCV() requires a 'since' or a 'limit' argument");case 14:d=this.seconds(),h=d-u*a,c.to=d,c.from=h;case 18:e.next=21;break;case 20:void 0===a?(c.from=parseInt(n/1e3),c.to=this.seconds()):(l=parseInt(n/1e3),c.from=l,c.to=this.sum(l,u*a));case 21:return e.next=23,this.publicGetChart(this.extend(c,s));case 23:return f=e.sent,e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUserBalance(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies_by_id),s=0;s<a.length;s++)o=a[s],c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(r,o+"_available"),u.total=this.safeFloat(r,o+"_balance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetUserOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:void 0,r=o.length>3&&void 0!==o[3]?o[3]:{},e.next=6,this.loadMarkets();case 6:return n=void 0,a={},void 0!==t&&(n=this.market(t),a.symbol=n.id),e.next=11,this.privateGetUserOrders(this.extend(a,r));case 11:return s=e.sent,e.abrupt("return",this.parseOrders(s,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.safeString(e,"id"),a=this.parse8601(this.safeString(e,"created_at")),s=this.safeString(e,"type"),o=this.safeString(e,"side"),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"size"),d=this.safeFloat(e,"filled"),h="market"===s?"closed":"open";return this.safeOrder({id:n,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,status:h,symbol:i,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:c,stopPrice:void 0,amount:u,filled:d,remaining:void 0,cost:void 0,trades:void 0,fee:void 0,info:e,average:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={symbol:c.id,side:n,size:a,type:r},"market"!==r&&(u.price=s),e.next=9,this.privatePostOrder(this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateDeleteUserOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a=void 0,void 0!==t&&(a=this.markets(t),n.symbol=a.id),e.next=9,this.privateDeleteUserOrders(this.extend(n,r));case 9:return s=e.sent,e.abrupt("return",this.parseOrders(s,a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.start_date=this.iso8601(r)),e.next=13,this.privateGetUserTrades(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),e.next=6,this.privateGetUser(r);case 6:return a=e.sent,s=this.safeValue(a,"crypto_wallet"),o=this.safeString(s,n.id),c=void 0,void 0!==o&&(u=o.split(":"),o=this.safeString(u,0),c=this.safeString(u,1)),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:c,info:a});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.start_date=this.iso8601(r)),e.next=13,this.privateGetUserDeposits(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.start_date=this.iso8601(r)),e.next=13,this.privateGetUserWithdrawals(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.safeString(e,"transaction_id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.parse8601(this.safeString(e,"updated_at")),a=this.safeString(e,"type"),s=this.safeFloat(e,"amount"),o=this.safeString(e,"address"),c=void 0,u=void 0,d=void 0,h=void 0,l=void 0;if(void 0!==o){var f=o.split(":");c=o=this.safeString(f,0),h=d=this.safeString(f,1)}var p=this.safeString(e,"currency"),v=this.safeCurrencyCode(p),m=this.safeValue(e,"status"),y=this.safeValue(e,"dismissed"),g=this.safeValue(e,"rejected");m=m?"ok":y?"canceled":g?"failed":"pending";var b={currency:v,cost:this.safeFloat(e,"fee")};return{info:e,id:t,txid:r,timestamp:i,datetime:this.iso8601(i),addressFrom:u,address:o,addressTo:c,tagFrom:l,tag:d,tagTo:h,type:a,amount:s,currency:v,status:m,updated:n,fee:b}}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),void 0!==a&&(n+=":"+a),c={currency:o.id,amount:r,address:n},void 0===(u=this.safeString(s,"otp_code"))&&void 0===this.twofa||(void 0===u&&(u=this.oath()),c.otp_code=u),e.next=12,this.privatePostUserRequestWithdrawal(this.extend(c,s));case 12:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e));e="/"+this.version+"/"+this.implodeParams(e,i),"GET"===r&&Object.keys(s).length&&(e+="?"+this.urlencode(s));var o=this.urls.api+e;if("private"===t){this.checkRequiredCredentials();var c=this.safeInteger2(this.options,"api-expires","expires",parseInt(this.timeout/1e3)),u=this.sum(this.seconds(),c),d=u.toString(),h=r+e+d;n={"api-key":this.encode(this.apiKey),"api-expires":d},"POST"===r&&(n["Content-type"]="application/json",Object.keys(s).length&&(h+=a=this.json(s)));var l=this.hmac(this.encode(h),this.encode(this.secret));n["api-signature"]=l}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&e>=400&&e<=503){var u=this.id+" "+a,d=this.safeString(s,"message");this.throwBroadlyMatchedException(this.exceptions.broad,d,u);var h=e.toString();this.throwExactlyMatchedException(this.exceptions.exact,h,u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(82),l=r(10).NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"huobijp",name:"Huobi Japan",countries:["JP"],hostname:"api-cloud.huobi.co.jp",pro:!0,has:{fetchDepositAddress:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/85734211-85755480-b705-11ea-8b35-0b7f1db33a2f.jpg",api:{market:"https://{hostname}",public:"https://{hostname}",private:"https://{hostname}"},www:"https://www.huobi.co.jp",referral:"https://www.huobi.co.jp/register/?invite_code=znnq3",doc:"https://api-doc.huobi.co.jp",fees:"https://www.huobi.co.jp/support/fee"}})}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:{},new l(this.id+" fetchDepositAddress not supported yet");case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(13).PAD_WITH_ZERO,f=r(10),p=f.InvalidOrder,v=f.InsufficientFunds,m=f.ExchangeError,y=f.ExchangeNotAvailable,g=f.DDoSProtection,b=f.BadRequest,k=f.NotSupported,x=f.InvalidAddress,w=f.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"idex",name:"IDEX",countries:["US"],rateLimit:1500,version:"v2",certified:!0,pro:!0,requiresWeb3:!0,has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrders:!1,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","1d":"1d"},urls:{test:{public:"https://api-sandbox.idex.io",private:"https://api-sandbox.idex.io"},logo:"https://user-images.githubusercontent.com/51840849/94481303-2f222100-01e0-11eb-97dd-bc14c5943a86.jpg",api:{ETH:"https://api-eth.idex.io",BSC:"https://api-bsc.idex.io"},www:"https://idex.io",doc:["https://docs.idex.io/"]},api:{public:{get:["ping","time","exchange","assets","markets","tickers","candles","trades","orderbook","wsToken"]},private:{get:["user","wallets","balances","orders","fills","deposits","withdrawals"],post:["wallets","orders","orders/test","withdrawals"],delete:["orders"]}},options:{defaultTimeInForce:"gtc",defaultSelfTradePrevention:"cn",network:"ETH"},exceptions:{INVALID_ORDER_QUANTITY:p,INSUFFICIENT_FUNDS:v,SERVICE_UNAVAILABLE:y,EXCEEDED_RATE_LIMIT:g,INVALID_PARAMETER:b,WALLET_NOT_ASSOCIATED:x,INVALID_WALLET_SIGNATURE:w},requiredCredentials:{walletAddress:!0,privateKey:!0,apiKey:!0,secret:!0},paddingMode:l,commonCurrencies:{},requireCredentials:{privateKey:!0,apiKey:!0,secret:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"market"),c=this.safeString(s,"baseAsset"),u=this.safeString(s,"quoteAsset"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeInteger(s,"baseAssetPrecision"),p=this.safeInteger(s,"quoteAssetPrecision"),v=this.safeString(s,"status"),m="active"===v,y={amount:f,price:p},n.push({symbol:l,id:o,base:d,quote:h,baseId:c,quoteId:u,active:m,info:s,precision:y,limits:{amount:{min:Math.pow(10,-y.amount),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicGetTickers(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,0),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:void 0,r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:return n=e.sent,e.abrupt("return",this.parseTickers(n,t));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"-"),n=this.safeFloat(e,"baseVolume"),a=this.safeFloat(e,"quoteVolume"),s=this.safeInteger(e,"time"),o=this.safeFloat(e,"open"),c=this.safeFloat(e,"high"),u=this.safeFloat(e,"low"),d=this.safeFloat(e,"close"),h=this.safeFloat(e,"ask"),l=this.safeFloat(e,"bid"),f=this.safeFloat(e,"percentChange");void 0!==f&&(f=1+f/100);var p=void 0;return void 0!==d&&void 0!==o&&(p=d-o),{symbol:i,timestamp:s,datetime:this.iso8601(s),high:c,low:u,bid:l,bidVolume:void 0,ask:h,askVolume:void 0,vwap:void 0,open:o,close:d,last:d,previousClose:void 0,change:p,percentage:f,average:void 0,baseVolume:n,quoteVolume:a,info:e}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,interval:r},void 0!==n&&(c.start=n),void 0!==a&&(c.limit=a),e.next=12,this.publicGetCandles(this.extend(c,s));case 12:if(u=e.sent,!Array.isArray(u)){e.next=17;break}return e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 17:return e.abrupt("return",[]);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeInteger(e,"start"),r=this.safeFloat(e,"open"),i=this.safeFloat(e,"high"),n=this.safeFloat(e,"low"),a=this.safeFloat(e,"close"),s=this.safeFloat(e,"volume");return[t,r,i,n,a,s]}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),e.next=11,this.publicGetTrades(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"fillId"),i=this.safeFloat(e,"price"),n=this.safeFloat(e,"quantity"),a=this.safeFloat(e,"quoteQuantity"),s=this.safeInteger(e,"time"),o=this.safeString(e,"market"),c=this.safeSymbol(o,t,"-"),u=this.safeString(e,"makerSide"),d="buy"===u?"sell":"buy",h=this.safeString(e,"side",d),l=this.safeString(e,"liquidity","taker"),f=this.safeFloat(e,"fee"),p=void 0;if(void 0!==f){var v=this.safeString(e,"feeAsset");p={cost:f,currency:this.safeCurrencyCode(v)}}var m=this.safeString(e,"orderId");return{info:e,timestamp:s,datetime:this.iso8601(s),symbol:c,id:r,order:m,type:"limit",side:h,takerOrMaker:l,price:i,amount:n,cost:a,fee:p}}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id,level:2},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderbook(this.extend(s,n));case 9:return o=e.sent,c=this.safeInteger(o,"sequence"),e.abrupt("return",{timestamp:void 0,datetime:void 0,nonce:c,bids:this.parseSide(o,"bids"),asks:this.parseSide(o,"asks")});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseSide",value:function(e,t){for(var r=this.safeValue(e,t,[]),i=[],n=0;n<r.length;n++){var a=r[n],s=this.safeFloat(a,0),o=this.safeFloat(a,1),c=this.safeInteger(a,2);i.push([s,o,c])}var u="bids"===t;return this.sortBy(i,0,u)}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"name"),c=this.safeString(s,"symbol"),u=this.safeInteger(s,"exchangeDecimals"),d=this.safeCurrencyCode(c),h=Math.pow(-10,u),n[d]={id:c,code:d,info:s,type:void 0,name:o,active:void 0,fee:void 0,precision:u,limits:{amount:{min:h,max:void 0},price:{min:h,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:h,max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},this.checkRequiredCredentials(),e.next=4,this.loadMarkets();case 4:if(r=this.uuidv1(),n={nonce:r,wallet:this.walletAddress},void 0!==(a=this.extend(n,t)).wallet){e.next=9;break}throw new b(this.id+' wallet is undefined, set this.walletAddress or "address" in params');case 9:return s=void 0,e.prev=10,e.next=13,this.privateGetBalances(a);case 13:s=e.sent,e.next=28;break;case 16:if(e.prev=16,e.t0=e.catch(10),!(e.t0 instanceof x)){e.next=27;break}return o=a.wallet,e.next=22,this.associateWallet(o);case 22:return e.next=24,this.privateGetBalances(a);case 24:s=e.sent,e.next=28;break;case 27:throw e.t0;case 28:for(c={info:s},u=0;u<s.length;u++)d=s[u],h=this.safeString(d,"asset"),l=this.safeCurrencyCode(h),f=this.safeFloat(d,"quantity"),p=this.safeFloat(d,"availableForTrade"),v=this.safeFloat(d,"locked"),c[l]={free:p,used:v,total:f};return e.abrupt("return",this.parseBalance(c));case 31:case"end":return e.stop()}}),e,this,[[10,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},this.checkRequiredCredentials(),e.next=7,this.loadMarkets();case 7:if(s=void 0,o={nonce:this.uuidv1(),wallet:this.walletAddress},void 0!==t&&(s=this.market(t),o.market=s.id),void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),void 0!==(c=this.extend(o,a)).wallet){e.next=15;break}throw new b(this.id+' walletAddress is undefined, set this.walletAddress or "address" in params');case 15:return u=void 0,e.prev=16,e.next=19,this.privateGetFills(c);case 19:u=e.sent,e.next=34;break;case 22:if(e.prev=22,e.t0=e.catch(16),!(e.t0 instanceof x)){e.next=33;break}return d=c.wallet,e.next=28,this.associateWallet(d);case 28:return e.next=30,this.privateGetFills(c);case 30:u=e.sent,e.next=34;break;case 33:throw e.t0;case 34:return e.abrupt("return",this.parseTrades(u,s,r,n));case 35:case"end":return e.stop()}}),e,this,[[16,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},a={orderId:t},e.next=5,this.fetchOrdersHelper(r,void 0,void 0,this.extend(a,n));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={closed:!1},e.next=7,this.fetchOrdersHelper(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={closed:!0},e.next=7,this.fetchOrdersHelper(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersHelper",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={nonce:this.uuidv1(),wallet:this.walletAddress},o=void 0,void 0!==t&&(o=this.market(t),s.market=o.id),void 0!==r&&(s.start=r),void 0!==n&&(s.limit=n),e.next=13,this.privateGetOrders(this.extend(s,a));case 13:if(c=e.sent,!Array.isArray(c)){e.next=18;break}return e.abrupt("return",this.parseOrders(c,o,r,n));case 18:return e.abrupt("return",this.parseOrder(c,o));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",partiallyFilled:"open",rejected:"canceled",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"time"),i=this.safeValue(e,"fills",[]),n=this.safeString(e,"orderId"),a=this.safeString(e,"clientOrderId"),s=this.safeString(e,"market"),o=this.safeString(e,"side"),c=this.safeSymbol(s,t,"-"),u=this.parseTrades(i,t),d=this.safeString(e,"type"),h=this.safeFloat(e,"originalQuantity"),l=this.safeFloat(e,"executedQuantity"),f=this.safeFloat(e,"avgExecutionPrice"),p=this.safeFloat(e,"price"),v=this.safeString(e,"status"),m=this.parseOrderStatus(v),y={currency:void 0,cost:void 0},g=void 0,b=0;b<u.length;b++)g=u[b],y.currency=g.fee.currency,y.cost=this.sum(y.cost,g.fee.cost);var k=this.safeInteger(g,"timestamp");return this.safeOrder({info:e,id:n,clientOrderId:a,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:k,symbol:c,type:d,timeInForce:void 0,postOnly:void 0,side:o,price:p,stopPrice:void 0,amount:h,cost:void 0,average:f,filled:l,remaining:void 0,status:m,fee:y,trades:u})}},{key:"associateWallet",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:{},r=this.uuidv1(),n=this.remove0xPrefix(t),a=[this.base16ToBinary(r),this.base16ToBinary(n)],s=this.binaryConcatArray(a),o=this.hash(s,"keccak","hex"),c=this.signMessageString(o,this.privateKey),u={parameters:{nonce:r,wallet:t},signature:c},e.next=10,this.privatePostWallets(u);case 10:return d=e.sent,e.abrupt("return",d);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,y,g,x,w,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L,D,q,N,G,j,U,H,z,W,K,X=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=X.length>4&&void 0!==X[4]?X[4]:void 0,o=X.length>5&&void 0!==X[5]?X[5]:{},this.checkRequiredCredentials(),e.next=5,this.loadMarkets();case 5:if(c=this.market(t),u=this.uuidv1(),d=void 0,h={stopLoss:3,stopLossLimit:4,takeProfit:5,takeProfitLimit:6},l=void 0,"stopLossLimit"!==r&&"takeProfitLimit"!==r&&!("stopPrice"in o)){e.next=14;break}if("stopPrice"in o){e.next=13;break}throw new b(this.id+" stopPrice is a required parameter for "+r+"orders");case 13:l=this.priceToPrecision(t,o.stopPrice);case 14:if(f={limit:1,limitMaker:2},p=void 0,v=r.toLowerCase(),m=v.indexOf("limit")>-1,!(r in f)){e.next=23;break}d=f[r],p=this.priceToPrecision(t,s),e.next=33;break;case 23:if(!(r in h)){e.next=28;break}d=h[r],p=this.priceToPrecision(t,s),e.next=33;break;case 28:if("market"!==r){e.next=32;break}d=0,e.next=33;break;case 32:throw new b(this.id+" "+r+" is not a valid order type");case 33:if(y=0,!("quoteOrderQuantity"in o)){e.next=39;break}if("market"===r){e.next=37;break}throw new k(this.id+" quoteOrderQuantity is not supported for "+r+" orders, only supported for market orders");case 37:y=1,a=this.safeFloat(o,"quoteOrderQuantity");case 39:if(g="buy"===n?0:1,x=this.remove0xPrefix(this.walletAddress),w=this.safeString(this.options,"network","ETH"),_="ETH"===w?1:2,O=this.amountToPrecision(t,a),T={gtc:0,ioc:2,fok:3},S=this.safeString(this.options,"defaultTimeInForce","gtc"),C=this.safeString(o,"timeInForce",S),I=void 0,!(C in T)){e.next=52;break}I=T[C],e.next=55;break;case 52:throw M=Object.keys(T),E=M.join(", "),new b(this.id+" "+C+" is not a valid timeInForce, please choose one of "+E);case 55:if(A={dc:0,co:1,cn:2,cb:3},F=this.safeString(this.options,"defaultSelfTradePrevention","cn"),P=this.safeString(o,"selfTradePrevention",F),B=void 0,!(P in A)){e.next=63;break}B=A[P],e.next=66;break;case 63:throw R=Object.keys(A),V=R.join(", "),new b(this.id+" "+P+" is not a valid selfTradePrevention, please choose one of "+V);case 66:return L=[this.numberToBE(_,1),this.base16ToBinary(u),this.base16ToBinary(x),this.stringToBinary(this.encode(c.id)),this.numberToBE(d,1),this.numberToBE(g,1),this.stringToBinary(this.encode(O)),this.numberToBE(y,1)],m&&(D=this.stringToBinary(this.encode(p)),L.push(D)),r in h&&(q=this.stringToBinary(this.encode(l||p)),L.push(q)),void 0!==(N=this.safeString(o,"clientOrderId"))&&L.push(this.stringToBinary(this.encode(N))),G=[this.numberToBE(I,1),this.numberToBE(B,1),this.numberToBE(0,8)],j=this.arrayConcat(L,G),U=this.binaryConcatArray(j),H=this.hash(U,"keccak","hex"),z=this.signMessageString(H,this.privateKey),W={parameters:{nonce:u,market:c.id,side:n,type:r,wallet:this.walletAddress,timeInForce:C,selfTradePrevention:P},signature:z},m&&(W.parameters.price=p),r in h&&(W.parameters.stopPrice=l||p),0===y?W.parameters.quantity=O:W.parameters.quoteOrderQuantity=O,void 0!==N&&(W.parameters.clientOrderId=N),e.next=83,this.privatePostOrders(W);case 83:return K=e.sent,e.abrupt("return",this.parseOrder(K,c));case 85:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.length>3&&void 0!==m[3]?m[3]:void 0,m.length>4&&void 0!==m[4]?m[4]:{},this.checkRequiredCredentials(),e.next=5,this.loadMarkets();case 5:return a=this.uuidv1(),s=this.currencyToPrecision(t,r),o=this.currency(t),c=this.remove0xPrefix(this.walletAddress),u=[this.base16ToBinary(a),this.base16ToBinary(c),this.stringToBinary(this.encode(o.id)),this.stringToBinary(this.encode(s)),this.numberToBE(1,1)],d=this.binaryConcatArray(u),h=this.hash(d,"keccak","hex"),l=this.signMessageString(h,this.privateKey),f={parameters:{nonce:a,wallet:n,asset:o.id,quantity:s},signature:l},e.next=16,this.privatePostWithdrawals(f);case 16:return p=e.sent,v=this.safeString(p,"withdrawalId"),e.abrupt("return",{info:p,id:v});case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:{},this.checkRequiredCredentials(),e.next=5,this.loadMarkets();case 5:return a=void 0,void 0!==r&&(a=this.market(r)),s=this.uuidv1(),o=this.remove0xPrefix(this.walletAddress),c=[this.base16ToBinary(s),this.base16ToBinary(o),this.stringToBinary(this.encode(t))],u=this.binaryConcatArray(c),d=this.hash(u,"keccak","hex"),h=this.signMessageString(d,this.privateKey),l={parameters:{nonce:s,wallet:this.walletAddress,orderId:t},signature:h},e.next=16,this.privateDeleteOrders(this.extend(l,n));case 16:return f=e.sent,p=this.safeValue(f,0),e.abrupt("return",this.parseOrder(p,a));case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){var u=this.safeString(s,"code"),d=this.safeString(s,"message");if(u in this.exceptions)throw new(0,this.exceptions[u])(this.id+" "+d);if(void 0!==u)throw new m(this.id+" "+d)}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},a=this.extend({method:"privateGetDeposits"},a),e.abrupt("return",this.fetchTransactionsHelper(t,r,n,a));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},a=this.extend({method:"privateGetWithdrawals"},a),e.abrupt("return",this.fetchTransactionsHelper(t,r,n,a));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactionsHelper",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.uuidv1(),o={nonce:s,wallet:this.walletAddress},c=void 0,void 0!==t&&(c=this.currency(t),o.asset=c.id),void 0!==r&&(o.start=r),void 0!==n&&(o.limit=n),u=a.method,a=this.omit(a,"method"),e.next=16,this[u](this.extend(o,a));case 16:return d=e.sent,e.abrupt("return",this.parseTransactions(d,c,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({mined:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"depositId"in e?r="deposit":"withdrawalId"in e&&(r="withdrawal");var i=this.safeString2(e,"depositId","withdrawId"),n=this.safeCurrencyCode(this.safeString(e,"asset"),t),a=this.safeFloat(e,"quantity"),s=this.safeString(e,"txId"),o=this.safeInteger(e,"txTime"),c=void 0;"fee"in e&&(c={cost:this.safeFloat(e,"fee"),currency:"ETH"});var u=this.safeString(e,"txStatus"),d=this.parseTransactionStatus(u),h=this.safeInteger(e,"confirmationTime");return{info:e,id:i,txid:s,timestamp:o,datetime:this.iso8601(o),address:void 0,tag:void 0,type:r,amount:a,currency:n,status:d,updated:h,fee:c}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.safeString(this.options,"network","ETH"),o=this.safeString(this.options,"version","v1"),c=this.urls.api[s]+"/"+o+"/"+e,u=Object.keys(i),d=u.length,h=void 0;if(d>0&&("GET"===r?c=c+"?"+(h=this.urlencode(i)):a=this.json(i)),n={"Content-Type":"application/json"},void 0!==this.apiKey&&(n["IDEX-API-Key"]=this.apiKey),"private"===t){var l=void 0;l="GET"===r?h:a,n["IDEX-HMAC-Signature"]=this.hmac(this.encode(l),this.encode(this.secret),"sha256","hex")}return{url:c,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11);e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"independentreserve",name:"Independent Reserve",countries:["AU","NZ"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182090-1e9e9080-c2ec-11ea-8e49-563db9a38f37.jpg",api:{public:"https://api.independentreserve.com/Public",private:"https://api.independentreserve.com/Private"},www:"https://www.independentreserve.com",doc:"https://www.independentreserve.com/API"},api:{public:{get:["GetValidPrimaryCurrencyCodes","GetValidSecondaryCurrencyCodes","GetValidLimitOrderTypes","GetValidMarketOrderTypes","GetValidOrderTypes","GetValidTransactionTypes","GetMarketSummary","GetOrderBook","GetAllOrders","GetTradeHistorySummary","GetRecentTrades","GetFxRates"]},private:{post:["PlaceLimitOrder","PlaceMarketOrder","CancelOrder","GetOpenOrders","GetClosedOrders","GetClosedFilledOrders","GetOrderDetails","GetAccounts","GetTransactions","GetDigitalCurrencyDepositAddress","GetDigitalCurrencyDepositAddresses","SynchDigitalCurrencyDepositAddressWithBlockchain","WithdrawDigitalCurrency","RequestFiatWithdrawal","GetTrades","GetBrokerageFees"]}},fees:{trading:{taker:.005,maker:.005,percentage:!0,tierBased:!1}},commonCurrencies:{PLA:"PlayChip"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetGetValidPrimaryCurrencyCodes(t);case 3:return r=e.sent,e.next=6,this.publicGetGetValidSecondaryCurrencyCodes(t);case 6:for(n=e.sent,a=[],s=0;s<r.length;s++)for(o=r[s],c=this.safeCurrencyCode(o),u=0;u<n.length;u++)d=n[u],h=this.safeCurrencyCode(d),l=o+"/"+d,f=c+"/"+h,a.push({id:l,symbol:f,base:c,quote:h,baseId:o,quoteId:d,info:l,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccounts(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"CurrencyCode"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(s,"AvailableBalance"),u.total=this.safeFloat(s,"TotalBalance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={primaryCurrencyCode:n.baseId,secondaryCurrencyCode:n.quoteId},e.next=8,this.publicGetGetOrderBook(this.extend(a,r));case 8:return s=e.sent,o=this.parse8601(this.safeString(s,"CreatedTimestampUtc")),e.abrupt("return",this.parseOrderBook(s,o,"BuyOrders","SellOrders","Price","Volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"LastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"DayHighestPrice"),low:this.safeFloat(e,"DayLowestPrice"),bid:this.safeFloat(e,"CurrentHighestBidPrice"),bidVolume:void 0,ask:this.safeFloat(e,"CurrentLowestOfferPrice"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"DayAvgPrice"),baseVolume:this.safeFloat(e,"DayVolumeXbtInSecondaryCurrrency"),quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={primaryCurrencyCode:n.baseId,secondaryCurrencyCode:n.quoteId},e.next=7,this.publicGetGetMarketSummary(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"PrimaryCurrencyCode"),n=this.safeString(e,"SecondaryCurrencyCode"),a=void 0;void 0!==i&&void 0!==n?r=(a=this.safeCurrencyCode(i))+"/"+this.safeCurrencyCode(n):void 0!==t&&(r=t.symbol,a=t.base,t.quote);var s=this.safeString2(e,"Type","OrderType"),o=void 0;s.indexOf("Bid")>=0?o="buy":s.indexOf("Offer")>=0&&(o="sell"),s.indexOf("Market")>=0?s="market":s.indexOf("Limit")>=0&&(s="limit");var c=this.parse8601(this.safeString(e,"CreatedTimestampUtc")),u=this.safeFloat2(e,"VolumeOrdered","Volume"),d=this.safeFloat(e,"VolumeFilled"),h=this.safeFloat(e,"Outstanding"),l=this.safeFloat(e,"FeePercent"),f=void 0;void 0!==l&&(f=l*d);var p={rate:l,cost:f,currency:a},v=this.safeString(e,"OrderGuid"),m=this.parseOrderStatus(this.safeString(e,"Status")),y=this.safeFloat(e,"Value"),g=this.safeFloat(e,"AvgPrice"),b=this.safeFloat(e,"Price");return this.safeOrder({info:e,id:v,clientOrderId:void 0,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:r,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:b,stopPrice:void 0,cost:y,average:g,amount:u,filled:d,remaining:h,status:m,fee:p,trades:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open",PartiallyFilled:"open",Filled:"closed",PartiallyFilledAndCancelled:"canceled",Cancelled:"canceled",PartiallyFilledAndExpired:"canceled",Expired:"canceled"},e,e)}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostGetOrderDetails(this.extend({orderGuid:t},n));case 6:return a=e.sent,s=void 0,void 0!==r&&(s=this.market(r)),e.abrupt("return",this.parseOrder(a,s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.ordered({}),o=void 0,void 0!==t&&(o=this.market(t),s.primaryCurrencyCode=o.baseId,s.secondaryCurrencyCode=o.quoteId),void 0===n&&(n=50),s.pageIndex=1,s.pageSize=n,e.next=14,this.privatePostGetOpenOrders(this.extend(s,a));case 14:return c=e.sent,u=this.safeValue(c,"Data",[]),e.abrupt("return",this.parseOrders(u,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.ordered({}),o=void 0,void 0!==t&&(o=this.market(t),s.primaryCurrencyCode=o.baseId,s.secondaryCurrencyCode=o.quoteId),void 0===n&&(n=50),s.pageIndex=1,s.pageSize=n,e.next=14,this.privatePostGetClosedOrders(this.extend(s,a));case 14:return c=e.sent,u=this.safeValue(c,"Data",[]),e.abrupt("return",this.parseOrders(u,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:50,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeInteger(a,"pageIndex",1),void 0===n&&(n=50),o=this.ordered({pageIndex:s,pageSize:n}),e.next=11,this.privatePostGetTrades(this.extend(o,a));case 11:return c=e.sent,u=void 0,void 0!==t&&(u=this.market(t)),e.abrupt("return",this.parseTrades(c.Data,u,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.TradeTimestampUtc),i=this.safeString(e,"TradeGuid"),n=this.safeString(e,"OrderGuid"),a=this.safeFloat2(e,"Price","SecondaryCurrencyTradePrice"),s=this.safeFloat2(e,"VolumeTraded","PrimaryCurrencyAmount"),o=void 0;void 0!==a&&void 0!==s&&(o=a*s);var c=this.safeString(e,"PrimaryCurrencyCode"),u=this.safeString(e,"SecondaryCurrencyCode"),d=void 0;void 0!==c&&void 0!==u&&(d=c+"/"+u);var h=this.safeSymbol(d,t,"/"),l=this.safeString(e,"OrderType");return void 0!==l&&(l.indexOf("Bid")>=0?l="buy":l.indexOf("Offer")>=0&&(l="sell")),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,order:n,type:void 0,side:l,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={primaryCurrencyCode:s.baseId,secondaryCurrencyCode:s.quoteId,numberOfRecentTradesToRetrieve:50},e.next=9,this.publicGetGetRecentTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.Trades,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>4&&void 0!==p[4]?p[4]:void 0,o=p.length>5&&void 0!==p[5]?p[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=this.capitalize(r),d="privatePostPlace"+u+"Order",h=u,h+="sell"===n?"Offer":"Bid",l=this.ordered({primaryCurrencyCode:c.baseId,secondaryCurrencyCode:c.quoteId,orderType:h}),"limit"===r&&(l.price=s),l.volume=a,e.next=14,this[d](this.extend(l,o));case 14:return f=e.sent,e.abrupt("return",{info:f,id:f.OrderGuid});case 16:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderGuid:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();for(var o=this.nonce(),c=[s,"apiKey="+this.apiKey,"nonce="+o.toString()],u=Object.keys(i),d=0;d<u.length;d++){var h=u[d],l=i[h].toString();c.push(h+"="+l)}var f=c.join(","),p=this.hmac(this.encode(f),this.encode(this.secret)),v=this.ordered({});v.apiKey=this.apiKey,v.nonce=o,v.signature=p.toUpperCase();for(var m=0;m<u.length;m++){var y=u[m];v[y]=i[y]}a=this.json(v),n={"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InsufficientFunds,m=l.InvalidOrder,y=l.OrderNotFound,g=l.AuthenticationError,b=l.BadSymbol;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"indodax",name:"INDODAX",countries:["ID"],has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!1,fetchMarkets:!0,fetchMyTrades:!1,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!1,fetchTime:!0,fetchTrades:!0,withdraw:!0},version:"2.0",urls:{logo:"https://user-images.githubusercontent.com/51840849/87070508-9358c880-c221-11ea-8dc5-5391afbbb422.jpg",api:{public:"https://indodax.com/api",private:"https://indodax.com/tapi"},www:"https://www.indodax.com",doc:"https://github.com/btcid/indodax-official-api-docs",referral:"https://indodax.com/ref/testbitcoincoid/1"},api:{public:{get:["server_time","pairs","{pair}/ticker","{pair}/trades","{pair}/depth"]},private:{post:["getInfo","transHistory","trade","tradeHistory","getOrder","openOrders","cancelOrder","orderHistory","withdrawCoin"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:.003}},exceptions:{exact:{invalid_pair:b,"Insufficient balance.":v,"invalid order.":y,"Invalid credentials. API not found or session has expired.":g,"Invalid credentials. Bad sign.":g},broad:{"Minimum price":m,"Minimum order":m}},options:{recvWindow:5e3,timeDifference:0,adjustForTimeDifference:!1},commonCurrencies:{STR:"XLM",BCHABC:"BCH",BCHSV:"BSV",DRK:"DASH",NEM:"XEM"}})}},{key:"nonce",value:function(){return this.milliseconds()-this.options.timeDifference}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetServerTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"server_time"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadTimeDifference",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.fetchTime(t);case 3:return r=e.sent,n=this.milliseconds(),this.options.timeDifference=n-r,e.abrupt("return",this.options.timeDifference);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"ticker_id"),c=this.safeString(s,"traded_currency"),u=this.safeString(s,"base_currency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f=this.safeFloat(s,"trade_fee_percent"),p=this.safeInteger(s,"is_maintenance"),v=!p,m=this.safeInteger(s,"price_round"),y={amount:8,price:m},g={amount:{min:this.safeFloat(s,"trade_min_traded_currency"),max:void 0},price:{min:this.safeFloat(s,"trade_min_base_currency"),max:void 0},cost:{min:void 0,max:void 0}},n.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,taker:f,percentage:!0,precision:y,limits:g,info:s,active:v});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"return",{}),a=this.safeValue(n,"balance",{}),s=this.safeValue(n,"balance_hold",{}),o={info:r},c=Object.keys(a),u=0;u<c.length;u++)d=c[u],h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeFloat(a,d),l.used=this.safeFloat(s,d),o[h]=l;return e.abrupt("return",this.parseBalance(o));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetPairDepth(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"buy","sell"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetPairTicker(this.extend(a,r));case 7:return s=e.sent,o=s.ticker,c=this.safeTimestamp(o,"server_time"),u="vol_"+n.baseId.toLowerCase(),d="vol_"+n.quoteId.toLowerCase(),h=this.safeFloat(o,"last"),e.abrupt("return",{symbol:t,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(o,"high"),low:this.safeFloat(o,"low"),bid:this.safeFloat(o,"buy"),bidVolume:void 0,ask:this.safeFloat(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,u),quoteVolume:this.safeFloat(o,d),info:o});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=void 0;void 0!==t&&(n=t.symbol);var a=void 0,s=this.safeString(e,"type"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"amount"),u=void 0;return void 0!==o&&void 0!==c&&(u=o*c),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:n,type:a,side:s,order:void 0,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetPairTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;"type"in e&&(r=e.type);var i=this.parseOrderStatus(this.safeString(e,"status","open")),n=void 0,a=void 0,s=this.safeFloat(e,"price"),o=void 0,c=void 0,u=void 0;if(void 0!==t){n=t.symbol;var d=t.quoteId,h=t.baseId;if("idr"===t.quoteId&&"order_rp"in e&&(d="rp"),"idr"===t.baseId&&"remain_rp"in e&&(h="rp"),a=this.safeFloat(e,"order_"+d)){o=a/s;var l=this.safeFloat(e,"remain_"+d);void 0!==l&&(u=o-(c=l/s))}else a=s*(o=this.safeFloat(e,"order_"+h)),u=o-(c=this.safeFloat(e,"remain_"+h))}var f=void 0;u&&(f=a/u);var p=this.safeInteger(e,"submit_time"),v=void 0,m=this.safeString(e,"order_id");return{info:e,id:m,clientOrderId:void 0,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,symbol:n,type:"limit",timeInForce:void 0,postOnly:void 0,side:r,price:s,stopPrice:void 0,cost:a,average:f,amount:o,filled:u,remaining:c,status:i,fee:v,trades:void 0}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={pair:a.id,order_id:t},e.next=10,this.privatePostGetOrder(this.extend(s,n));case 10:return o=e.sent,c=o.return,u=this.parseOrder(this.extend({id:t},c.order),a),e.abrupt("return",this.extend({info:o},u));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.pair=s.id),e.next=11,this.privatePostOpenOrders(this.extend(o,a));case 11:if(c=e.sent,u=c.return.orders){e.next=15;break}return e.abrupt("return",[]);case 15:if(void 0===t){e.next=17;break}return e.abrupt("return",this.parseOrders(u,s,r,n));case 17:for(d=Object.keys(u),h=[],l=0;l<d.length;l++)f=d[l],p=u[f],s=this.markets_by_id[f],v=this.parseOrders(p,s,r,n),h=this.arrayConcat(h,v);return e.abrupt("return",h);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.pair=o.id),e.next=13,this.privatePostOrderHistory(this.extend(s,a));case 13:return c=e.sent,u=this.parseOrders(c.return.orders,o),u=this.filterBy(u,"status","closed"),e.abrupt("return",this.filterBySymbolSinceLimit(u,t,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},"limit"===r){e.next=4;break}throw new f(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={pair:c.id,type:n,price:s},d=c.baseId,"buy"===n?u[c.quoteId]=a*s:u[c.baseId]=a,u[d]=a,e.next=13,this.privatePostTrade(this.extend(u,o));case 13:return h=e.sent,l=this.safeValue(h,"return",{}),p=this.safeString(l,"order_id"),e.abrupt("return",{info:h,id:p});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:if(void 0!==(a=this.safeValue(n,"side"))){e.next=7;break}throw new p(this.id+' cancelOrder() requires an extra "side" param');case 7:return e.next=9,this.loadMarkets();case 9:return s=this.market(r),o={order_id:t,pair:s.id,type:a},e.next=13,this.privatePostCancelOrder(this.extend(o,n));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c=this.milliseconds(),u={currency:o.id,withdraw_amount:r,withdraw_address:n,request_id:c.toString()},a&&(u.withdraw_memo=a),e.next=11,this.privatePostWithdrawCoin(this.extend(u,s));case 11:return d=e.sent,h=void 0,"txid"in d&&d.txid.length>0&&(h=d.txid),e.abrupt("return",{info:d,id:h});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t];return"public"===t?s+="/"+this.implodeParams(e,i):(this.checkRequiredCredentials(),a=this.urlencode(this.extend({method:e,timestamp:this.nonce(),recvWindow:this.options.recvWindow},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&!Array.isArray(s)){var u=this.safeValue(s,"error","");if("success"in s||""!==u){if(1===this.safeInteger(s,"success",0)){if("return"in s)return;throw new f(this.id+": malformed response: "+this.json(s))}var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"itbit",name:"itBit",countries:["US"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchTransactions:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27822159-66153620-60ad-11e7-89e7-005f6d7f3de0.jpg",api:"https://api.itbit.com",www:"https://www.itbit.com",doc:["https://api.itbit.com/docs","https://www.itbit.com/api"]},api:{public:{get:["markets/{symbol}/ticker","markets/{symbol}/order_book","markets/{symbol}/trades"]},private:{get:["wallets","wallets/{walletId}","wallets/{walletId}/balances/{currencyCode}","wallets/{walletId}/funding_history","wallets/{walletId}/trades","wallets/{walletId}/orders","wallets/{walletId}/orders/{id}"],post:["wallet_transfers","wallets","wallets/{walletId}/cryptocurrency_deposits","wallets/{walletId}/cryptocurrency_withdrawals","wallets/{walletId}/orders","wire_withdrawal"],delete:["wallets/{walletId}/orders/{id}"]}},markets:{"BTC/USD":{id:"XBTUSD",symbol:"BTC/USD",base:"BTC",quote:"USD",baseId:"XBT",quoteId:"USD"},"BTC/SGD":{id:"XBTSGD",symbol:"BTC/SGD",base:"BTC",quote:"SGD",baseId:"XBT",quoteId:"SGD"},"BTC/EUR":{id:"XBTEUR",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"XBT",quoteId:"EUR"},"ETH/USD":{id:"ETHUSD",symbol:"ETH/USD",base:"ETH",quote:"USD",baseId:"ETH",quoteId:"USD"},"ETH/EUR":{id:"ETHEUR",symbol:"ETH/EUR",base:"ETH",quote:"EUR",baseId:"ETH",quoteId:"EUR"},"ETH/SGD":{id:"ETHSGD",symbol:"ETH/SGD",base:"ETH",quote:"SGD",baseId:"ETH",quoteId:"SGD"},PAXGUSD:{id:"PAXGUSD",symbol:"PAXG/USD",base:"PAXG",quote:"USD",baseId:"PAXG",quoteId:"USD"},BCHUSD:{id:"BCHUSD",symbol:"BCH/USD",base:"BCH",quote:"USD",baseId:"BCH",quoteId:"USD"},LTCUSD:{id:"LTCUSD",symbol:"LTC/USD",base:"LTC",quote:"USD",baseId:"LTC",quoteId:"USD"}},fees:{trading:{maker:-3e-4,taker:.35/100}},commonCurrencies:{XBT:"BTC"}})}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetMarketsSymbolOrderBook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=3,this.loadMarkets();case 3:return n={symbol:this.marketId(t)},e.next=6,this.publicGetMarketsSymbolTicker(this.extend(n,r));case 6:if(a=e.sent,s=this.safeString(a,"serverTimeUTC")){e.next=10;break}throw new f(this.id+" fetchTicker returned a bad response: "+this.json(a));case 10:return o=this.parse8601(s),c=this.safeFloat(a,"vwap24h"),u=this.safeFloat(a,"volume24h"),d=void 0,void 0!==u&&void 0!==c&&(d=u*c),h=this.safeFloat(a,"lastPrice"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(a,"high24h"),low:this.safeFloat(a,"low24h"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:c,open:this.safeFloat(a,"openToday"),close:h,last:h,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:d,info:a});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"executionId","matchNumber"),i=this.parse8601(this.safeString(e,"timestamp")),n=this.safeString(e,"direction"),a=this.safeString(e,"orderId"),s=this.safeFloat(e,"commissionPaid"),o=this.safeString(e,"commissionCurrency"),c=this.safeCurrencyCode(o),u=this.safeFloat(e,"rebatesApplied");void 0!==u&&(u=-u);var d=this.safeString(e,"rebateCurrency"),h=this.safeCurrencyCode(d),l=this.safeFloat2(e,"price","rate"),f=this.safeFloat2(e,"currency1Amount","amount"),p=void 0;void 0!==l&&void 0!==f&&(p=l*f);var v=void 0,m=this.safeString(e,"instrument");if(void 0!==m)if(m in this.markets_by_id)t=this.markets_by_id[m];else{var y=this.safeString(e,"currency1"),g=this.safeString(e,"currency2"),b=this.safeCurrencyCode(y),k=this.safeCurrencyCode(g);v=b+"/"+k}void 0===v&&void 0!==t&&(v=t.symbol);var x={info:e,id:r,timestamp:i,datetime:this.iso8601(i),symbol:v,order:a,type:void 0,side:n,takerOrMaker:void 0,price:l,amount:f,cost:p,fee:void 0};return void 0!==s&&(void 0!==u?c===h?(s=this.sum(s,u),x.fee={cost:s,currency:c}):x.fees=[{cost:s,currency:c},{cost:u,currency:h}]:x.fee={cost:s,currency:c}),"fee"in x||"fees"in x||(x.fee=void 0),x}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.length>0&&void 0!==k[0]?k[0]:void 0,k.length>1&&void 0!==k[1]?k[1]:void 0,t=k.length>2&&void 0!==k[2]?k[2]:void 0,r=k.length>3&&void 0!==k[3]?k[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==(n=this.safeString(r,"walletId"))){e.next=9;break}throw new v(this.id+" fetchMyTrades() requires a walletId parameter");case 9:return a={walletId:n},void 0!==t&&(a.perPage=t),e.next=13,this.privateGetWalletsWalletIdFundingHistory(this.extend(a,r));case 13:for(s=e.sent,o=s.fundingHistory,c=[],u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"time"),l=this.parse8601(h),f=this.safeString(d,"currency"),p=this.safeString(d,"destinationAddress"),m=this.safeString(d,"txnHash"),y=this.safeStringLower(d,"transactionType"),g=this.safeString(d,"status"),b=this.parseTransferStatus(g),c.push({id:this.safeString(d,"withdrawalId"),timestamp:l,datetime:this.iso8601(l),currency:this.safeCurrencyCode(f),address:p,tag:void 0,txid:m,type:y,status:b,amount:this.safeFloat(d,"amount"),fee:void 0,info:d});return e.abrupt("return",c);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransferStatus",value:function(e){return this.safeString({cancelled:"canceled",completed:"ok"},e,"pending")}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:if(void 0!==(s=this.safeString(a,"walletId"))){e.next=9;break}throw new f(this.id+" fetchMyTrades() requires a walletId parameter");case 9:return o={walletId:s},void 0!==r&&(o.rangeStart=this.ymdhms(r,"T")),void 0!==n&&(o.perPage=n),e.next=14,this.privateGetWalletsWalletIdTrades(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"tradingHistory",[]),d=void 0,void 0!==t&&(d=this.market(t)),e.abrupt("return",this.parseTrades(u,d,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetMarketsSymbolTrades(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"recentTrades",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchWallets(t);case 5:for(r=e.sent,n=r[0].balances,a={info:r},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"availableBalance"),d.total=this.safeFloat(o,"totalBalance"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWallets",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:if(this.uid){e.next=5;break}throw new p(this.id+" fetchWallets() requires uid API credential");case 5:return r={userId:this.uid},e.next=8,this.privateGetWallets(this.extend(r,t));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWallet",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return n={walletId:t},e.next=6,this.privateGetWalletsWalletId(this.extend(n,r));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"open"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:if(s=void 0,void 0!==t&&(s=this.market(t)),"walletId"in a){e.next=11;break}throw new f(this.id+" fetchOrders() requires a walletId parameter");case 11:return o=a.walletId,c={walletId:o},e.next=15,this.privateGetWalletsWalletIdOrders(this.extend(c,a));case 15:return u=e.sent,e.abrupt("return",this.parseOrders(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({submitted:"open",open:"open",filled:"closed",cancelled:"canceled",rejected:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=this.safeString(e,"side"),r=this.safeString(e,"type"),i=this.markets_by_id[e.instrument].symbol,n=this.parse8601(e.createdTime),a=this.safeFloat(e,"amount"),s=this.safeFloat(e,"amountFilled"),o=void 0,c=this.safeFloat(e,"price"),u=this.safeFloat(e,"volumeWeightedAveragePrice"),d=this.safeString(e,"clientOrderIdentifier"),h=this.safeString(e,"id"),l=this.safeString(e,"postOnly"),f="True"===l;return this.safeOrder({id:h,clientOrderId:d,info:e,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:this.parseOrderStatus(this.safeString(e,"status")),symbol:i,type:r,timeInForce:void 0,postOnly:f,side:t,price:c,stopPrice:void 0,cost:void 0,average:u,amount:a,filled:s,remaining:void 0,fee:o,trades:void 0})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:if("walletId"in o){e.next=9;break}throw new f(this.id+" createOrder() requires a walletId parameter");case 9:return a=a.toString(),s=s.toString(),c=this.market(t),u={side:n,type:r,currency:c.id.replace(c.quote,""),amount:a,display:a,price:s,instrument:c.id},e.next=15,this.privatePostWalletsWalletIdOrders(this.extend(u,o));case 15:return d=e.sent,e.abrupt("return",{info:d,id:d.id});case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:if("walletId"in r){e.next=7;break}throw new f(this.id+" fetchOrder() requires a walletId parameter");case 7:return n={id:t},e.next=10,this.privateGetWalletsWalletIdOrdersId(this.extend(n,r));case 10:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},"walletId"in r){e.next=5;break}throw new f(this.id+" cancelOrder() requires a walletId parameter");case 5:return n={id:t},e.next=8,this.privateDeleteWalletsWalletIdOrdersId(this.extend(n,r));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("GET"===r&&Object.keys(o).length&&(s+="?"+this.urlencode(o)),"POST"===r&&Object.keys(o).length&&(a=this.json(o)),"private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),u=c,d="POST"===r?a:"",h=[r,s,d,c,u],l=c+this.json(h).replace("\\/","/"),f=this.hash(this.encode(l),"sha256","binary"),p=this.stringToBinary(this.encode(s)),v=this.binaryConcat(p,f),m=this.hmac(v,this.encode(this.secret),"sha512","base64");n={Authorization:this.apiKey+":"+m,"Content-Type":"application/json","X-Auth-Timestamp":u,"X-Auth-Nonce":c}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("code"in(c=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.BadSymbol,p=l.ExchangeNotAvailable,v=l.ArgumentsRequired,m=l.PermissionDenied,y=l.AuthenticationError,g=l.ExchangeError,b=l.OrderNotFound,k=l.DDoSProtection,x=l.InvalidNonce,w=l.InsufficientFunds,_=l.CancelPending,O=l.InvalidOrder,T=l.InvalidAddress,S=l.RateLimitExceeded,C=r(13),I=C.TRUNCATE,M=C.DECIMAL_PLACES;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"kraken",name:"Kraken",countries:["US"],version:"0",rateLimit:3e3,certified:!0,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchLedgerEntry:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:"emulated",fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchWithdrawals:!0,withdraw:!0},marketsByAltname:{},timeframes:{"1m":1,"5m":5,"15m":15,"30m":30,"1h":60,"4h":240,"1d":1440,"1w":10080,"2w":21600},urls:{logo:"https://user-images.githubusercontent.com/51840849/76173629-fc67fb00-61b1-11ea-84fe-f2de582f58a3.jpg",api:{public:"https://api.kraken.com",private:"https://api.kraken.com",zendesk:"https://kraken.zendesk.com/api/v2/help_center/en-us/articles"},www:"https://www.kraken.com",doc:"https://www.kraken.com/features/api",fees:"https://www.kraken.com/en-us/features/fee-schedule"},fees:{trading:{tierBased:!0,percentage:!0,taker:.0026,maker:.0016,tiers:{taker:[[0,.0026],[5e4,.0024],[1e5,.0022],[25e4,.002],[5e5,.0018],[1e6,.0016],[25e5,.0014],[5e6,.0012],[1e7,1e-4]],maker:[[0,.0016],[5e4,.0014],[1e5,.0012],[25e4,.001],[5e5,8e-4],[1e6,6e-4],[25e5,4e-4],[5e6,2e-4],[1e7,0]]}},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001,ETH:.005,XRP:.02,XLM:2e-5,LTC:.02,DOGE:2,ZEC:1e-4,ICN:.02,REP:.01,ETC:.005,MLN:.003,XMR:.05,DASH:.005,GNO:.01,EOS:.5,BCH:.001,XTZ:.05,USD:5,EUR:5,CAD:10,JPY:300},deposit:{BTC:0,ETH:0,XRP:0,XLM:0,LTC:0,DOGE:0,ZEC:0,ICN:0,REP:0,ETC:0,MLN:0,XMR:0,DASH:0,GNO:0,EOS:0,BCH:0,XTZ:.05,USD:5,EUR:0,CAD:5,JPY:0}}},api:{zendesk:{get:["360000292886","201893608"]},public:{get:["Assets","AssetPairs","Depth","OHLC","Spread","Ticker","Time","Trades"]},private:{post:["AddOrder","AddExport","Balance","CancelAll","CancelOrder","ClosedOrders","DepositAddresses","DepositMethods","DepositStatus","ExportStatus","GetWebSocketsToken","Ledgers","OpenOrders","OpenPositions","QueryLedgers","QueryOrders","QueryTrades","RetrieveExport","RemoveExport","TradeBalance","TradesHistory","TradeVolume","Withdraw","WithdrawCancel","WithdrawInfo","WithdrawStatus"]}},commonCurrencies:{XBT:"BTC","XBT.M":"BTC.M",XDG:"DOGE",REPV2:"REP",REP:"REPV1"},options:{cacheDepositMethodsOnFetchDepositAddress:!0,depositMethods:{},delistedMarketsById:{},inactiveCurrencies:["CAD","USD","JPY","GBP"]},exceptions:{"EQuery:Invalid asset pair":f,"EAPI:Invalid key":y,"EFunding:Unknown withdraw key":g,"EFunding:Invalid amount":w,"EService:Unavailable":p,"EDatabase:Internal error":p,"EService:Busy":p,"EQuery:Unknown asset":g,"EAPI:Rate limit exceeded":k,"EOrder:Rate limit exceeded":k,"EGeneral:Internal error":p,"EGeneral:Temporary lockout":k,"EGeneral:Permission denied":m,"EOrder:Unknown order":O,"EOrder:Order minimum not met":O}})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.price,M)}},{key:"feeToPrecision",value:function(e,t){return this.decimalToPrecision(t,I,this.markets[e].precision.amount,M)}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=C.length>0&&void 0!==C[0]?C[0]:{},e.next=3,this.publicGetAssetPairs(t);case 3:for(r=e.sent,n=this.safeValue(r,"result",{}),a=Object.keys(n),s=[],o=0;o<a.length;o++)c=a[o],u=n[c],d=this.safeString(u,"base"),h=this.safeString(u,"quote"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=c.indexOf(".d")>=0,v=this.safeString(u,"altname"),m=p?v:l+"/"+f,y=this.safeValue(u,"fees_maker",[]),g=this.safeValue(y,0,[]),b=this.safeFloat(g,1),k=void 0,void 0!==b&&(k=parseFloat(b)/100),x=this.safeValue(u,"fees",[]),w=this.safeValue(x,0,[]),_=this.safeFloat(w,1),O=void 0,void 0!==_&&(O=parseFloat(_)/100),T={amount:this.safeInteger(u,"lot_decimals"),price:this.safeInteger(u,"pair_decimals")},S=this.safeFloat(u,"ordermin"),s.push({id:c,symbol:m,base:l,quote:f,baseId:d,quoteId:h,darkpool:p,info:u,altname:u.altname,maker:k,taker:O,active:!0,precision:T,limits:{amount:{min:S,max:Math.pow(10,T.amount)},price:{min:Math.pow(10,-T.price),max:void 0},cost:{min:0,max:void 0}}});return s=this.appendInactiveMarkets(s),this.marketsByAltname=this.indexBy(s,"altname"),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"safeCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e.length>3&&(0===e.indexOf("X")||0===e.indexOf("Z"))){if(e.indexOf(".")>0)return o(c(r.prototype),"safeCurrency",this).call(this,e,t);e=e.slice(1)}return o(c(r.prototype),"safeCurrency",this).call(this,e,t)}},{key:"appendInactiveMarkets",value:function(e){for(var t={amount:8,price:8},r={min:0,max:void 0},i={min:Math.pow(10,-t.price),max:void 0},n={darkpool:!1,info:void 0,maker:void 0,taker:void 0,active:!1,precision:t,limits:{amount:{min:Math.pow(10,-t.amount),max:Math.pow(10,t.amount)},price:i,cost:r}},a=[],s=0;s<a.length;s++)e.push(this.extend(n,a[s]));return e}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result"),a=Object.keys(n),s={},o=0;o<a.length;o++)c=a[o],u=n[c],d=this.safeCurrencyCode(this.safeString(u,"altname")),h=this.safeInteger(u,"decimals"),l=!this.inArray(d,this.options.inactiveCurrencies),s[d]={id:c,code:d,info:u,name:d,active:l,fee:void 0,precision:h,limits:{amount:{min:Math.pow(10,-h),max:Math.pow(10,h)},price:{min:Math.pow(10,-h),max:Math.pow(10,h)},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:Math.pow(10,h)}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return this.checkRequiredCredentials(),e.next=6,this.privatePostTradeVolume(t);case 6:for(r=e.sent,n=this.safeFloat(r.result,"volume"),a=this.fees.trading.tiers,s=a.taker[1],o=a.maker[1],c=0;c<a.taker.length;c++)n>=a.taker[c][0]&&(s=a.taker[c][1]);for(u=0;u<a.maker.length;u++)n>=a.maker[u][0]&&(o=a.maker[u][1]);return e.abrupt("return",{info:r,maker:o,taker:s});case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeFloat(e,t),n=this.safeFloat(e,r),a=this.safeInteger(e,2);return[i,n,a]}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:if(!(a=this.market(t)).darkpool){e.next=7;break}throw new g(this.id+" does not provide an order book for darkpool symbol "+t);case 7:return s={pair:a.id},void 0!==r&&(s.count=r),e.next=11,this.publicGetDepth(this.extend(s,n));case 11:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.safeValue(c,a.id),d=this.safeValue(a,"info",{}),void 0!==(h=this.safeValue(d,"wsname"))&&(u=this.safeValue(c,h,u)),e.abrupt("return",this.parseOrderBook(u));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=parseFloat(e.v[1]),a=parseFloat(e.p[1]),s=void 0;void 0!==n&&void 0!==a&&(s=n*a);var o=parseFloat(e.c[0]);return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:parseFloat(e.h[1]),low:parseFloat(e.l[1]),bid:parseFloat(e.b[0]),bidVolume:void 0,ask:parseFloat(e.a[0]),askVolume:void 0,vwap:a,open:this.safeFloat(e,"o"),close:o,last:o,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:n,quoteVolume:s,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:{},e.next=4,this.loadMarkets();case 4:for(t=void 0===t?this.symbols:t,n=[],a=0;a<t.length;a++)s=t[a],(o=this.markets[s]).active&&!o.darkpool&&n.push(o.id);return c={pair:n.join(",")},e.next=10,this.publicGetTicker(this.extend(c,r));case 10:for(u=e.sent,d=u.result,h=Object.keys(d),l={},f=0;f<h.length;f++)p=h[f],v=this.markets_by_id[p],m=v.symbol,y=d[p],l[m]=this.parseTicker(y,v);return e.abrupt("return",this.filterByArray(l,"symbol",t));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:if(!(t.indexOf(".d")>=0)){e.next=6;break}throw new g(this.id+" does not provide a ticker for darkpool symbol "+t);case 6:return n=this.market(t),a={pair:n.id},e.next=10,this.publicGetTicker(this.extend(a,r));case 10:return s=e.sent,o=s.result[n.id],e.abrupt("return",this.parseTicker(o,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,6)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={pair:o.id,interval:this.timeframes[r]},void 0!==n&&(c.since=parseInt((n-1)/1e3)),e.next=11,this.publicGetOHLC(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"result",{}),h=this.safeValue(d,o.id,[]),e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({trade:"trade",withdrawal:"transaction",deposit:"transaction",transfer:"transfer",margin:"margin"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=void 0,a=this.safeString(e,"refid"),s=void 0,o=this.parseLedgerEntryType(this.safeString(e,"type")),c=this.safeCurrencyCode(this.safeString(e,"asset"),t),u=this.safeFloat(e,"amount");u<0?(i="out",u=Math.abs(u)):i="in";var d=this.safeFloat(e,"time"),h=void 0;void 0!==d&&(h=parseInt(1e3*d));var l={cost:this.safeFloat(e,"fee"),currency:c},f=void 0,p=this.safeFloat(e,"balance"),v="ok";return{info:e,id:r,direction:i,account:n,referenceId:a,referenceAccount:s,type:o,currency:c,amount:u,before:f,after:p,status:v,timestamp:h,datetime:this.iso8601(h),fee:l}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,n=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.asset=o.id),void 0!==r&&(s.start=parseInt(r/1e3)),e.next=12,this.privatePostLedgers(this.extend(s,a));case 12:for(c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"ledger",{}),h=Object.keys(d),l=[],f=0;f<h.length;f++)p=h[f],(v=d[p]).id=p,l.push(v);return e.abrupt("return",this.parseLedger(l,o,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedgerEntriesByIds",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return t=t.join(","),n=this.extend({id:t},r),e.next=8,this.privatePostQueryLedgers(n);case 8:for(a=e.sent,s=a.result,o=Object.keys(s),c=[],u=0;u<o.length;u++)d=o[u],(h=s[d]).id=d,c.push(h);return e.abrupt("return",this.parseLedger(c));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedgerEntry",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchLedgerEntriesByIds([t],r,n);case 4:return a=e.sent,e.abrupt("return",a[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,c=void 0,u=void 0,d=void 0,h=void 0;if(Array.isArray(e)){r=this.safeTimestamp(e,2),i="s"===e[3]?"sell":"buy",n="l"===e[4]?"limit":"market",a=this.safeFloat(e,0),s=this.safeFloat(e,1);var l=e.length;l>6&&(c=this.safeString(e,6))}else if("string"===typeof e)c=e;else if("ordertxid"in e){var f=this.safeString(e,"pair"),p=this.findMarketByAltnameOrId(f);if(void 0!==p?t=p:void 0!==f&&(t=this.getDelistedMarketById(f)),u=this.safeString(e,"ordertxid"),c=this.safeString2(e,"id","postxid"),r=this.safeTimestamp(e,"time"),i=this.safeString(e,"type"),n=this.safeString(e,"ordertype"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"vol"),"fee"in e){var v=void 0;void 0!==t&&(v=t.quote),d={cost:this.safeFloat(e,"fee"),currency:v}}}return void 0!==t&&(h=t.symbol),void 0!==a&&void 0!==s&&(o=a*s),{id:c,order:u,info:e,timestamp:r,datetime:this.iso8601(r),symbol:h,type:n,side:i,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:d}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},e.next=5,this.loadMarkets();case 5:if(s=this.market(t),o=s.id,c={pair:o},void 0!==r&&(c.since=1e6*r,c.since=r.toString()+"000000"),void 0===n||1e3===n){e.next=13;break}if(!this.safeValue(this.options,"fetchTradesWarning",!0)){e.next=13;break}throw new g(this.id+" fetchTrades() cannot serve "+n.toString()+" trades without breaking the pagination, see https://github.com/ccxt/ccxt/issues/5698 for more details. Set exchange.options['fetchTradesWarning'] to acknowledge this warning and silence it.");case 13:return e.next=15,this.publicGetTrades(this.extend(c,a));case 15:if(u=e.sent,d=u.result,h=d[o],!((l=h.length)<=0)){e.next=21;break}return e.abrupt("return",[]);case 21:return f=h[l-1],p=this.safeString(d,"last"),f.push(p),e.abrupt("return",this.parseTrades(h,s,r,n));case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"result",{}),a={info:n},s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(n,c),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=b.length>4&&void 0!==b[4]?b[4]:void 0,o=b.length>5&&void 0!==b[5]?b[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={pair:c.id,type:n,ordertype:r,volume:this.amountToPrecision(t,a)},d=this.safeString2(o,"userref","clientOrderId"),o=this.omit(o,["userref","clientOrderId"]),void 0!==d&&(u.userref=d),"limit"!==r){e.next=13;break}u.price=this.priceToPrecision(t,s),e.next=37;break;case 13:if("stop-loss"!==r&&"take-profit"!==r){e.next=22;break}if(void 0!==(h=this.safeFloat2(o,"price","stopPrice",s))){e.next=19;break}throw new v(this.id+" createOrder() requires a price argument or a price/stopPrice parameter for a "+r+" order");case 19:u.price=this.priceToPrecision(t,h);case 20:e.next=37;break;case 22:if("stop-loss-limit"!==r&&"take-profit-limit"!==r){e.next=37;break}if(l=this.safeFloat2(o,"price","stopPrice"),f=this.safeFloat(o,"price2"),m=void 0!==f,!(p=void 0!==l)||!m){e.next=32;break}u.price=this.priceToPrecision(t,l),u.price2=this.priceToPrecision(t,f),e.next=37;break;case 32:if(void 0!==s&&(p||m)){e.next=36;break}throw new v(this.id+" createOrder() requires a price argument and/or price/stopPrice/price2 parameters for a "+r+" order");case 36:p?(u.price=this.priceToPrecision(t,l),u.price2=this.priceToPrecision(t,s)):m&&(u.price=this.priceToPrecision(t,s),u.price2=this.priceToPrecision(t,f));case 37:return o=this.omit(o,["price","stopPrice","price2"]),e.next=40,this.privatePostAddOrder(this.extend(u,o));case 40:return y=e.sent,g=this.safeValue(y,"result"),e.abrupt("return",this.parseOrder(g));case 43:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"findMarketByAltnameOrId",value:function(e){return e in this.marketsByAltname?this.marketsByAltname[e]:e in this.markets_by_id?this.markets_by_id[e]:void 0}},{key:"getDelistedMarketById",value:function(e){if(void 0===e)return e;var t=this.safeValue(this.options.delistedMarketsById,e);if(void 0!==t)return t;var r=3,i=3,n=6;8===e.length?(r=4,i=4,n=8):7===e.length&&(r=4,i=4,n=7);var a=e.slice(0,r),s=e.slice(i,n),o=this.safeCurrencyCode(a),c=this.safeCurrencyCode(s);return t={symbol:o+"/"+c,base:o,quote:c,baseId:a,quoteId:s},this.options.delistedMarketsById[e]=t,t}},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",open:"open",closed:"closed",canceled:"canceled",expired:"expired"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"descr",{}),i=this.safeString(r,"order"),n=void 0,a=void 0,s=void 0,o=void 0,c=void 0;if(void 0!==i){var u=i.split(" ");n=this.safeString(u,0),c=this.safeFloat(u,1),s=this.safeString(u,2),a=this.safeString(u,4),o=this.safeFloat(u,5)}n=this.safeString(r,"type",n),a=this.safeString(r,"ordertype",a),s=this.safeString(r,"pair",s);var d=this.findMarketByAltnameOrId(s),h=void 0;void 0!==d?t=d:void 0!==s&&(t=this.getDelistedMarketById(s));var l=this.safeTimestamp(e,"opentm");c=this.safeFloat(e,"vol",c);var f=this.safeFloat(e,"vol_exec"),p=void 0,v=this.safeFloat(e,"cost");void 0!==(o=this.safeFloat(r,"price",o))&&0!==o||(o=this.safeFloat(r,"price2")),void 0!==o&&0!==o||(o=this.safeFloat(e,"price",o));var m=this.safeFloat(e,"price");if(void 0!==t&&(h=t.symbol,"fee"in e)){var y=e.oflags,g=this.safeFloat(e,"fee");p={cost:g,rate:void 0},y.indexOf("fciq")>=0?p.currency=t.quote:y.indexOf("fcib")>=0&&(p.currency=t.base)}var b=this.parseOrderStatus(this.safeString(e,"status")),k=this.safeString(e,"id");if(void 0===k){var x=this.safeValue(e,"txid");k=this.safeString(x,0)}var w=this.safeString(e,"userref"),_=this.safeValue(e,"trades"),O=void 0;void 0!==_&&(O=this.parseTrades(_,t,void 0,void 0,{order:k}));var T=this.safeFloat(e,"stopprice");return this.safeOrder({id:k,clientOrderId:w,info:e,timestamp:l,datetime:this.iso8601(l),lastTradeTimestamp:void 0,status:b,symbol:h,type:a,timeInForce:void 0,postOnly:void 0,side:n,price:o,stopPrice:T,cost:v,amount:c,filled:f,average:m,remaining:void 0,fee:p,trades:O})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeValue2(r,"userref","clientOrderId"),a={trades:!0},s=r,void 0!==n?(a.userref=n,s=this.omit(r,["userref","clientOrderId"])):a.txid=t,e.next=10,this.privatePostQueryOrders(this.extend(a,s));case 10:if(o=e.sent,c=this.safeValue(o,"result",[]),t in c){e.next=14;break}throw new b(this.id+" fetchOrder() could not find order id "+t);case 14:return u=this.parseOrder(this.extend({id:t},c[t])),e.abrupt("return",this.extend({info:o},u));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,m,y,g,b,k,x,w,_,O,T,S,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=I.length>1&&void 0!==I[1]?I[1]:void 0,n=I.length>2&&void 0!==I[2]?I[2]:void 0,a=I.length>3&&void 0!==I[3]?I[3]:void 0,s=I.length>4&&void 0!==I[4]?I[4]:{},o=this.safeValue(s,"trades"),c=[],void 0!==o){e.next=10;break}throw new v(this.id+" fetchOrderTrades() requires a unified order structure in the params argument or a 'trades' param (an array of trade id strings)");case 10:for(u=0;u<o.length;u++)"string"===typeof(d=o[u])?c.push(d):c.push(d.id);case 11:return e.next=13,this.loadMarkets();case 13:h=this.safeValue(this.options,"fetchOrderTrades",{}),l=this.safeInteger(h,"batchSize",20),f=parseInt(c/l),f=this.sum(f,1),p=c.length,m=[],y=0;case 20:if(!(y<f)){e.next=36;break}for(g=[],b=0;b<l;b++)(k=this.sum(y*l,b))<p&&g.push(c[k]);return x={txid:g.join(",")},e.next=26,this.privatePostQueryTrades(x);case 26:for(w=e.sent,_=this.safeValue(w,"result"),O=Object.keys(_),T=0;T<O.length;T++)_[O[T]].id=O[T];S=this.parseTrades(_,void 0,n,a),C=this.filterBySymbol(S,r),m=this.arrayConcat(m,C);case 33:y++,e.next=20;break;case 36:return e.abrupt("return",m);case 37:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByIds",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l.length>1&&void 0!==l[1]?l[1]:void 0,r=l.length>2&&void 0!==l[2]?l[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostQueryOrders(this.extend({trades:!0,txid:t.join(",")},r));case 6:for(n=e.sent,a=this.safeValue(n,"result",{}),s=[],o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=a[u],h=this.parseOrder(this.extend({id:u},d)),s.push(h);return e.abrupt("return",s);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.start=parseInt(r/1e3)),e.next=10,this.privatePostTradesHistory(this.extend(s,a));case 10:for(o=e.sent,c=o.result.trades,u=Object.keys(c),d=0;d<u.length;d++)c[u[d]].id=u[d];return h=void 0,void 0!==t&&(h=this.market(t)),e.abrupt("return",this.parseTrades(c,h,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n=void 0,e.prev=5,e.next=8,this.privatePostCancelOrder(this.extend({txid:t},r));case 8:n=e.sent,e.next=17;break;case 11:if(e.prev=11,e.t0=e.catch(5),!this.last_http_response){e.next=16;break}if(!(this.last_http_response.indexOf("EOrder:Unknown order")>=0)){e.next=16;break}throw new b(this.id+" cancelOrder() error "+this.last_http_response);case 16:throw e.t0;case 17:return e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,this,[[5,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.length>0&&void 0!==r[0]?r[0]:void 0,t=r.length>1&&void 0!==r[1]?r[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostCancelAll(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.start=parseInt(r/1e3)),e.next=10,this.privatePostOpenOrders(this.extend(s,a));case 10:return o=e.sent,c=void 0,void 0!==t&&(c=this.market(t)),u=this.safeValue(o,"result",{}),d=this.safeValue(u,"open",[]),e.abrupt("return",this.parseOrders(d,c,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},void 0!==r&&(s.start=parseInt(r/1e3)),e.next=10,this.privatePostClosedOrders(this.extend(s,a));case 10:return o=e.sent,c=void 0,void 0!==t&&(c=this.market(t)),u=this.safeValue(o,"result",{}),d=this.safeValue(u,"closed",[]),e.abrupt("return",this.parseOrders(d,c,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositMethods",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={asset:n.id},e.next=7,this.privatePostDepositMethods(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.safeValue(s,"result"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Initial:"pending",Pending:"pending",Success:"ok",Settled:"pending",Failure:"failed",Partial:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"refid"),i=this.safeString(e,"txid"),n=this.safeTimestamp(e,"time"),a=this.safeString(e,"asset"),s=this.safeCurrencyCode(a,t),o=this.safeString(e,"info"),c=this.safeFloat(e,"amount"),u=this.parseTransactionStatus(this.safeString(e,"status")),d=this.safeString(e,"type"),h=this.safeFloat(e,"fee");return void 0===h&&"deposit"===d&&(h=0),{info:e,id:r,currency:s,amount:c,address:o,tag:void 0,status:u,type:d,updated:void 0,txid:i,timestamp:n,datetime:this.iso8601(n),fee:{currency:s,cost:h}}}},{key:"parseTransactionsByType",value:function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=[],s=0;s<t.length;s++){var o=this.parseTransaction(this.extend({type:e},t[s]));a.push(o)}return this.filterByCurrencySinceLimit(a,r,i,n)}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchDeposits() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={asset:s.id},e.next=12,this.privatePostDepositStatus(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactionsByType("deposit",c.result,t,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.safeValue(r,"result",{}),e.abrupt("return",this.safeTimestamp(n,"unixtime"));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchWithdrawals() requires a currency code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),o={asset:s.id},e.next=12,this.privatePostWithdrawStatus(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactionsByType("withdrawal",c.result,t,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},n={new:"true"},e.next=4,this.fetchDepositAddress(t,this.extend(n,r));case 4:return a=e.sent,s=this.safeString(a,"address"),this.checkAddress(s),e.abrupt("return",{currency:t,address:s,info:a});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:if(n=this.currency(t),void 0!==(a=this.safeString(r,"method"))){e.next=15;break}if(!this.options.cacheDepositMethodsOnFetchDepositAddress){e.next=14;break}if(t in this.options.depositMethods){e.next=11;break}return e.next=10,this.fetchDepositMethods(t);case 10:this.options.depositMethods[t]=e.sent;case 11:a=this.options.depositMethods[t][0].method,e.next=15;break;case 14:throw new v(this.id+' fetchDepositAddress() requires an extra `method` parameter. Use fetchDepositMethods ("'+t+'") to get a list of available deposit methods or enable the exchange property .options["cacheDepositMethodsOnFetchDepositAddress"] = true');case 15:return s={asset:n.id,method:a},e.next=18,this.privatePostDepositAddresses(this.extend(s,r));case 18:if(o=e.sent,c=o.result,!(c.length<1)){e.next=23;break}throw new T(this.id+" privatePostDepositAddresses() returned no addresses");case 23:return u=this.safeString(c[0],"address"),d=this.safeString2(c[0],"tag","memo"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:o});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u.length>3&&void 0!==u[3]?u[3]:void 0,a=u.length>4&&void 0!==u[4]?u[4]:{},this.checkAddress(n),!("key"in a)){e.next=12;break}return e.next=6,this.loadMarkets();case 6:return s=this.currency(t),o={asset:s.id,amount:r},e.next=10,this.privatePostWithdraw(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",{info:c,id:c.result});case 12:throw new g(this.id+" withdraw() requires a 'key' parameter (withdrawal key name, as set up on your account)");case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>0&&void 0!==s[0]?s[0]:void 0,t=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return r={},e.next=7,this.privatePostOpenPositions(this.extend(r,t));case 7:return n=e.sent,a=this.safeValue(n,"result"),e.abrupt("return",a);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+t+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else if("private"===t){this.checkRequiredCredentials();var o=this.nonce().toString();a=this.urlencode(this.extend({nonce:o},i));var c=this.encode(o+a),u=this.hash(c,"sha256","binary"),d=this.stringToBinary(this.encode(s)),h=this.binaryConcat(d,u),l=this.base64ToBinary(this.secret),f=this.hmac(h,l,"sha512","base64");n={"API-Key":this.apiKey,"API-Sign":f,"Content-Type":"application/x-www-form-urlencoded"}}else s="/"+e;return{url:s=this.urls.api[t]+s,method:r,body:a,headers:n}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(520===e)throw new p(this.id+" "+e.toString()+" "+t);if(a.indexOf("Invalid order")>=0)throw new O(this.id+" "+a);if(a.indexOf("Invalid nonce")>=0)throw new x(this.id+" "+a);if(a.indexOf("Insufficient funds")>=0)throw new w(this.id+" "+a);if(a.indexOf("Cancel pending")>=0)throw new _(this.id+" "+a);if(a.indexOf("Invalid arguments:volume")>=0)throw new O(this.id+" "+a);if(a.indexOf("Rate limit exceeded")>=0)throw new S(this.id+" "+a);if(void 0!==s&&("{"===a[0]&&"string"!==typeof s&&"error"in s&&s.error.length)){for(var u=this.id+" "+a,d=0;d<s.error.length;d++){var h=s.error[d];this.throwExactlyMatchedException(this.exceptions,h,u)}throw new g(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,y=f.InsufficientFunds,g=f.OrderNotFound,b=f.InvalidOrder,k=f.AccountSuspended,x=f.InvalidNonce,w=f.NotSupported,_=f.BadRequest,O=f.AuthenticationError,T=f.BadSymbol,S=f.RateLimitExceeded,C=f.PermissionDenied;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"kucoin",name:"KuCoin",countries:["SC"],rateLimit:334,version:"v2",certified:!1,pro:!0,comment:"Platform 2.0",has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFee:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87295558-132aaf80-c50e-11ea-9801-a2fb0c57c799.jpg",referral:"https://www.kucoin.com/?rcode=E5wkqe",api:{public:"https://openapi-v2.kucoin.com",private:"https://openapi-v2.kucoin.com"},test:{public:"https://openapi-sandbox.kucoin.com",private:"https://openapi-sandbox.kucoin.com"},www:"https://www.kucoin.com",doc:["https://docs.kucoin.com"]},requiredCredentials:{apiKey:!0,secret:!0,password:!0},api:{public:{get:["timestamp","status","symbols","markets","market/allTickers","market/orderbook/level{level}_{limit}","market/orderbook/level{level}","market/orderbook/level2","market/orderbook/level2_20","market/orderbook/level2_100","market/orderbook/level3","market/histories","market/candles","market/stats","currencies","currencies/{currency}","prices","mark-price/{symbol}/current","margin/config"],post:["bullet-public"]},private:{get:["accounts","accounts/{accountId}","accounts/{accountId}/ledgers","accounts/{accountId}/holds","accounts/transferable","sub/user","sub-accounts","sub-accounts/{subUserId}","deposit-addresses","deposits","hist-deposits","hist-orders","hist-withdrawals","withdrawals","withdrawals/quotas","orders","order/client-order/{clientOid}","orders/{orderId}","limit/orders","fills","limit/fills","margin/account","margin/borrow","margin/borrow/outstanding","margin/borrow/borrow/repaid","margin/lend/active","margin/lend/done","margin/lend/trade/unsettled","margin/lend/trade/settled","margin/lend/assets","margin/market","margin/trade/last","stop-order/{orderId}","stop-order","stop-order/queryOrderByClientOid"],post:["accounts","accounts/inner-transfer","accounts/sub-transfer","deposit-addresses","withdrawals","orders","orders/multi","margin/borrow","margin/order","margin/repay/all","margin/repay/single","margin/lend","margin/toggle-auto-lend","bullet-private","stop-order"],delete:["withdrawals/{withdrawalId}","orders","orders/client-order/{clientOid}","orders/{orderId}","margin/lend/{orderId}","stop-order/cancelOrderByClientOid","stop-order/{orderId}","stop-order/cancel"]}},timeframes:{"1m":"1min","3m":"3min","5m":"5min","15m":"15min","30m":"30min","1h":"1hour","2h":"2hour","4h":"4hour","6h":"6hour","8h":"8hour","12h":"12hour","1d":"1day","1w":"1week"},exceptions:{exact:{"order not exist":g,"order not exist.":g,order_not_exist:g,order_not_exist_or_not_allow_to_cancel:b,"Order size below the minimum requirement.":b,"The withdrawal amount is below the minimum requirement.":p,400:_,401:O,403:w,404:w,405:w,429:S,500:m,503:m,101030:C,200004:y,230003:y,260100:y,3e5:b,4e5:T,400001:O,400002:x,400003:O,400004:O,400005:O,400006:O,400007:O,400008:w,400100:_,411100:k,415e3:_,5e5:p},broad:{"Exceeded the access frequency":S,"require more permission":C}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},commonCurrencies:{HOT:"HOTNOW",EDGE:"DADI",WAX:"WAXP",TRY:"Trias"},options:{version:"v1",symbolSeparator:"-",fetchMyTradesMethod:"private_get_fills",fetchBalance:{type:"trade"},versions:{public:{GET:{status:"v1","market/orderbook/level2":"v2","market/orderbook/level3":"v2","market/orderbook/level2_20":"v1","market/orderbook/level2_100":"v1","market/orderbook/level{level}":"v2","market/orderbook/level{level}_{limit}":"v1"}},private:{POST:{"accounts/inner-transfer":"v2","accounts/sub-transfer":"v2"}}}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"loadTimeDifference",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,i=this.milliseconds(),a=this.safeInteger(r,"data"),this.options.timeDifference=parseInt(i-a),e.abrupt("return",this.options.timeDifference);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchStatus",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetStatus(t);case 3:return r=e.sent,i=this.safeValue(r,"data",{}),void 0!==(a=this.safeValue(i,"status"))&&(a="open"===a?"ok":"maintenance",this.status=this.extend(this.status,{status:a,updated:this.milliseconds()})),e.abrupt("return",this.status);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.length>0&&void 0!==O[0]?O[0]:{},e.next=3,this.publicGetSymbols(t);case 3:for(r=e.sent,a=r.data,s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"symbol"),d=u.split("-"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,y=this.safeValue(c,"enableTrading"),g=this.safeFloat(c,"baseMaxSize"),b=this.safeFloat(c,"baseMinSize"),k=this.safeFloat(c,"quoteMaxSize"),x=this.safeFloat(c,"quoteMinSize"),w={amount:this.precisionFromString(this.safeString(c,"baseIncrement")),price:this.precisionFromString(this.safeString(c,"priceIncrement"))},_={amount:{min:b,max:g},price:{min:this.safeFloat(c,"priceIncrement"),max:k/b},cost:{min:x,max:k}},s.push({id:u,symbol:m,baseId:l,quoteId:f,base:p,quote:v,active:y,precision:w,limits:_,info:c});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,i=this.safeValue(r,"data",[]),a={},s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"currency"),u=this.safeString(o,"fullName"),d=this.safeCurrencyCode(c),h=this.safeInteger(o,"precision"),l=this.safeValue(o,"isWithdrawEnabled",!1),f=this.safeValue(o,"isDepositEnabled",!1),p=this.safeFloat(o,"withdrawalMinFee"),v=l&&f,a[d]={id:c,name:u,code:d,precision:h,info:o,active:v,fee:p,limits:this.limits};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.privateGetAccounts(t);case 3:for(r=e.sent,i=this.safeValue(r,"data"),a=[],s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"id"),u=this.safeString(o,"currency"),d=this.safeCurrencyCode(u),h=this.safeString(o,"type"),a.push({id:c,type:h,currency:d,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchFundingFee",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},i=this.currencyId(t),a={currency:i},e.next=5,this.privateGetWithdrawalsQuotas(this.extend(a,r));case 5:return s=e.sent,o=s.data,(c={})[t]=this.safeFloat(o,"withdrawMinFee"),e.abrupt("return",{info:s,withdraw:c,deposit:{}});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeFloat(e,"changeRate");void 0!==r&&(r*=100);var i=this.safeFloat2(e,"last","lastTradedPrice"),n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t,"-"),s=this.safeFloat(e,"vol"),o=this.safeFloat(e,"volValue"),c=this.vwap(s,o),u=this.safeInteger2(e,"time","datetime");return{symbol:a,timestamp:u,datetime:this.iso8601(u),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:c,open:this.safeFloat(e,"open"),close:i,last:i,previousClose:void 0,change:this.safeFloat(e,"changePrice"),percentage:r,average:this.safeFloat(e,"averagePrice"),baseVolume:s,quoteVolume:o,info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketAllTickers(r);case 6:for(i=e.sent,a=this.safeValue(i,"data",{}),s=this.safeValue(a,"ticker",[]),o={},c=0;c<s.length;c++)u=this.parseTicker(s[c]),void 0!==(d=this.safeString(u,"symbol"))&&(o[d]=u);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={symbol:i.id},e.next=7,this.publicGetMarketStats(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s.data,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"15m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=o.id,u={symbol:c,type:this.timeframes[r]},d=1e3*this.parseTimeframe(r),h=this.milliseconds(),void 0!==i?(u.startAt=parseInt(Math.floor(i/1e3)),void 0===a&&(a=this.safeInteger(this.options,"fetchOHLCVLimit",1500)),h=this.sum(i,a*d)):void 0!==a&&(i=h-a*d,u.startAt=parseInt(Math.floor(i/1e3))),u.endAt=parseInt(Math.floor(h/1e3)),e.next=15,this.publicGetMarketCandles(this.extend(u,s));case 15:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,i,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currencyId(t),a={currency:i},e.next=7,this.privatePostDepositAddresses(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),void 0!==(c=this.safeString(o,"address"))&&(c=c.replace("bitcoincash:","")),u=this.safeString(o,"memo"),"NIM"!==t&&this.checkAddress(c),e.abrupt("return",{info:s,currency:t,address:c,tag:u});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currencyId(t),a={currency:i},e.next=7,this.privateGetDepositAddresses(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeString(o,"address"),u=this.safeString(o,"memo"),"NIM"!==t&&this.checkAddress(c),e.abrupt("return",{info:s,currency:t,address:c,tag:u});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchL3OrderBook",value:function(){var e=a(n.mark((function e(t){var r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=i.length>1&&void 0!==i[1]?i[1]:void 0,i.length>2&&void 0!==i[2]?i[2]:{},e.next=4,this.fetchOrderBook(t,r,{level:3});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=4,this.loadMarkets();case 4:if(a=this.marketId(t),s=this.safeInteger(i,"level",2),o={symbol:a,level:s},c="publicGetMarketOrderbookLevelLevel",2!==s){e.next=16;break}if(void 0===r){e.next=16;break}if(20!==r&&100!==r){e.next=15;break}o.limit=r,c="publicGetMarketOrderbookLevelLevelLimit",e.next=16;break;case 15:throw new p(this.id+" fetchOrderBook limit argument must be undefined, 20 or 100");case 16:return e.next=18,this[c](this.extend(o,i));case 18:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeInteger(d,"time"),(l=this.parseOrderBook(d,h,"bids","asks",s-2,s-1)).nonce=this.safeInteger(d,"sequence"),e.abrupt("return",l);case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.marketId(t),u=this.safeString2(o,"clientOid","clientOrderId",this.uuid()),o=this.omit(o,["clientOid","clientOrderId"]),d={clientOid:u,side:i,symbol:c,type:r},h=this.safeFloat2(o,"cost","funds"),"market"===r?void 0!==h?(o=this.omit(o,["cost","funds"]),d.funds=this.amountToPrecision(t,h)):d.size=this.amountToPrecision(t,a):(d.price=this.priceToPrecision(t,s),d.size=this.amountToPrecision(t,a)),e.next=12,this.privatePostOrders(this.extend(d,o));case 12:return l=e.sent,f=this.safeValue(l,"data",{}),p=this.milliseconds(),v=this.safeString(f,"orderId"),m={id:v,clientOrderId:u,info:f,timestamp:p,datetime:this.iso8601(p),lastTradeTimestamp:void 0,symbol:t,type:r,side:i,price:s,amount:void 0,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0},void 0===h?m.amount=a:m.cost=h,e.abrupt("return",m);case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={},a=this.safeString2(r,"clientOid","clientOrderId"),s="privateDeleteOrdersOrderId",void 0!==a?(i.clientOid=a,s="privateDeleteOrdersClientOrderClientOid"):i.orderId=t,r=this.omit(r,["clientOid","clientOrderId"]),e.next=11,this[s](this.extend(i,r));case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return i={},a=void 0,void 0!==t&&(a=this.market(t),i.symbol=a.id),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:void 0,i=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o={status:t},c=void 0,void 0!==r&&(c=this.market(r),o.symbol=c.id),void 0!==i&&(o.startAt=i),void 0!==a&&(o.pageSize=a),e.next=13,this.privateGetOrders(this.extend(o,s));case 13:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"items",[]),e.abrupt("return",this.parseOrders(h,c,i,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("done",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByStatus("active",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:if(a={},s=this.safeString2(i,"clientOid","clientOrderId"),o="privateGetOrdersOrderId",void 0===s){e.next=12;break}a.clientOid=s,o="privateGetOrdersClientOrderClientOid",e.next=15;break;case 12:if(void 0!==t){e.next=14;break}throw new b(this.id+" fetchOrder() requires an order id");case 14:a.orderId=t;case 15:return i=this.omit(i,["clientOid","clientOrderId"]),e.next=18,this[o](this.extend(a,i));case 18:return c=e.sent,u=void 0,void 0!==r&&(u=this.market(r)),d=this.safeValue(c,"data"),e.abrupt("return",this.parseOrder(d,u));case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.safeString(e,"id"),a=this.safeString(e,"type"),s=this.safeInteger(e,"createdAt"),o=this.iso8601(s),c=this.safeFloat(e,"price");0===c&&(c=void 0);var u=this.safeString(e,"side"),d=this.safeString(e,"feeCurrency"),h=this.safeCurrencyCode(d),l=this.safeFloat(e,"fee"),f=this.safeFloat(e,"size"),p=this.safeFloat(e,"dealSize"),v=this.safeFloat(e,"dealFunds"),m=this.safeValue(e,"isActive",!1),y=this.safeValue(e,"cancelExist",!1),g=m?"open":"closed";g=y?"canceled":g;var b={currency:h,cost:l},k=this.safeString(e,"clientOid"),x=this.safeString(e,"timeInForce"),w=this.safeFloat(e,"stopPrice"),_=this.safeValue(e,"postOnly");return this.safeOrder({id:n,clientOrderId:k,symbol:i,type:a,timeInForce:x,postOnly:_,side:u,amount:f,price:c,stopPrice:w,cost:v,filled:p,remaining:void 0,timestamp:s,datetime:o,fee:b,status:g,info:e,lastTradeTimestamp:void 0,average:void 0,trades:void 0})}},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:if(s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==i&&(s.pageSize=i),c=this.options.fetchMyTradesMethod,u=!1,"private_get_fills"!==c){e.next=16;break}void 0!==r&&(s.startAt=r),e.next=25;break;case 16:if("private_get_limit_fills"!==c){e.next=20;break}u=!0,e.next=25;break;case 20:if("private_get_hist_orders"!==c){e.next=24;break}void 0!==r&&(s.startAt=parseInt(r/1e3)),e.next=25;break;case 24:throw new p(this.id+" invalid fetchClosedOrder method");case 25:return e.next=27,this[c](this.extend(s,a));case 27:return d=e.sent,h=this.safeValue(d,"data",{}),l=void 0,l=u?h:this.safeValue(h,"items",[]),e.abrupt("return",this.parseTrades(l,o,r,i));case 32:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r&&(o.startAt=Math.floor(r/1e3)),void 0!==i&&(o.pageSize=i),e.next=11,this.publicGetMarketHistories(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"-"),n=this.safeString2(e,"tradeId","id"),a=this.safeString(e,"orderId"),s=this.safeString(e,"liquidity"),o=this.safeFloat2(e,"size","amount"),c=this.safeInteger(e,"time");void 0!==c?c=parseInt(c/1e6):(c=this.safeInteger(e,"createdAt"),"dealValue"in e&&void 0!==c&&(c*=1e3));var u=this.safeFloat2(e,"price","dealPrice"),d=this.safeString(e,"side"),h=void 0,l=this.safeFloat(e,"fee");if(void 0!==l){var f=this.safeString(e,"feeCurrency"),p=this.safeCurrencyCode(f);void 0===p&&void 0!==t&&(p="sell"===d?t.quote:t.base),h={cost:l,currency:p,rate:this.safeFloat(e,"feeRate")}}var v=this.safeString(e,"type");"match"===v&&(v=void 0);var m=this.safeFloat2(e,"funds","dealValue");return void 0===m&&void 0!==o&&void 0!==u&&(m=o*u),{info:e,id:n,order:a,timestamp:c,datetime:this.iso8601(c),symbol:i,type:v,takerOrMaker:s,side:d,price:u,amount:o,cost:m,fee:h}}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=4,this.loadMarkets();case 4:return this.checkAddress(i),o=this.currencyId(t),c={currency:o,address:i,amount:r},void 0!==a&&(c.memo=a),e.next=10,this.privatePostWithdrawals(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",{id:this.safeString(d,"withdrawalId"),info:u});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({SUCCESS:"ok",PROCESSING:"ok",FAILURE:"failed"},e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n=this.safeString(e,"address"),a=this.safeFloat(e,"amount"),s=this.safeString(e,"walletTxId");if(void 0!==s){var o=s.split("@"),c=o.length;c>1&&void 0===n&&o[1].length>1&&(n=o[1]),s=o[0]}var u=void 0===s?"withdrawal":"deposit",d=this.safeString(e,"status"),h=this.parseTransactionStatus(d),l=void 0,f=this.safeFloat(e,"fee");if(void 0!==f){var p=void 0;void 0!==a&&(p=f/a),l={cost:f,rate:p,currency:i}}var v=this.safeString(e,"memo"),m=this.safeInteger2(e,"createdAt","createAt"),y=this.safeString(e,"id"),g=this.safeInteger(e,"updatedAt"),b=!("createdAt"in e);b&&(u="address"in e?"withdrawal":"deposit",void 0!==m&&(m*=1e3),void 0!==g&&(g*=1e3));var k=this.safeString(e,"remark");return{id:y,info:e,timestamp:m,datetime:this.iso8601(m),address:n,addressTo:n,addressFrom:void 0,tag:v,tagTo:v,tagFrom:void 0,currency:i,amount:a,txid:s,type:u,status:h,comment:k,fee:l,updated:g}}},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.pageSize=i),c="privateGetDeposits",void 0!==r&&(r<1550448e6?(s.startAt=parseInt(r/1e3),c="privateGetHistDeposits"):s.startAt=r),e.next=14,this[c](this.extend(s,a));case 14:return u=e.sent,d=u.data.items,e.abrupt("return",this.parseTransactions(d,o,r,i,{type:"deposit"}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.pageSize=i),c="privateGetWithdrawals",void 0!==r&&(r<1550448e6?(s.startAt=parseInt(r/1e3),c="privateGetHistWithdrawals"):s.startAt=r),e.next=14,this[c](this.extend(s,a));case 14:return u=e.sent,d=u.data.items,e.abrupt("return",this.parseTransactions(d,o,r,i,{type:"withdrawal"}));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return r=void 0,i={},"type"in t?(void 0!==(r=t.type)&&(i.type=r),t=this.omit(t,"type")):(a=this.safeValue(this.options,"fetchBalance",{}),r=this.safeString(a,"type","trade")),e.next=8,this.privateGetAccounts(this.extend(i,t));case 8:for(s=e.sent,o=this.safeValue(s,"data",[]),c={info:s},u=0;u<o.length;u++)d=o[u],this.safeString(d,"type")===r&&(h=this.safeString(d,"currency"),l=this.safeCurrencyCode(h),(f=this.account()).total=this.safeFloat(d,"balance"),f.free=this.safeFloat(d,"available"),f.used=this.safeFloat(d,"holds"),c[l]=f);return e.abrupt("return",this.parseBalance(c));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchLedger() requires a code param");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.loadAccounts();case 10:if(s=this.currency(t),void 0!==(o=this.safeString(a,"accountId"))){e.next=22;break}c=0;case 14:if(!(c<this.accounts.length)){e.next=22;break}if((u=this.accounts[c]).currency!==t||"main"!==u.type){e.next=19;break}return o=u.id,e.abrupt("break",22);case 19:c++,e.next=14;break;case 22:if(void 0!==o){e.next=24;break}throw new p(this.id+" "+t+"main account is not loaded in loadAccounts");case 24:return d={accountId:o},void 0!==r&&(d.startAt=Math.floor(r/1e3)),e.next=28,this.privateGetAccountsAccountIdLedgers(this.extend(d,a));case 28:return h=e.sent,l=h.data.items,e.abrupt("return",this.parseLedger(l,s,r,i));case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r,t),n={cost:this.safeFloat(e,"fee"),code:i},a=this.safeFloat(e,"amount"),s=this.safeFloat(e,"balance"),o=this.safeString(e,"direction"),c=void 0;if(void 0!==s&&void 0!==a){var u="out"===o?a:-a;c=this.sum(s,u)}var d=this.safeInteger(e,"createdAt"),h=this.parseLedgerEntryType(this.safeString(e,"bizType")),l=this.safeString(e,"context"),f=void 0,p=void 0;if(this.isJsonEncodedObject(l)){var v=this.parseJson(l);f=this.safeString(v,"orderId"),"trade"===h?p=this.safeString(v,"tradeId"):"transaction"===h&&(p=this.safeString(v,"txId"))}return{id:f,currency:i,account:void 0,referenceAccount:void 0,referenceId:p,status:void 0,amount:a,before:c,after:s,fee:n,direction:o,timestamp:d,datetime:this.iso8601(d),type:h,info:e}}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Exchange:"trade",Withdrawal:"transaction",Deposit:"transaction",Transfer:"transfer"},e,e)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.safeValue(this.options,"versions",{}),o=this.safeValue(s,t,{}),c=this.safeValue(o,r,{}),u=this.safeString(c,e,this.options.version),d=this.safeString(i,"version",u);i=this.omit(i,"version");var h="/api/"+d+"/"+this.implodeParams(e,i),l=this.omit(i,this.extractParams(e)),f="";n=void 0!==n?n:{},Object.keys(l).length&&("GET"===r||"DELETE"===r?h+="?"+this.urlencode(l):(f=a=this.json(l),n["Content-Type"]="application/json"));var p=this.urls.api[t]+h;if("private"===t){this.checkRequiredCredentials();var v=this.nonce().toString();n=this.extend({"KC-API-KEY-VERSION":"2","KC-API-KEY":this.apiKey,"KC-API-TIMESTAMP":v},n);var m=this.safeString(n,"KC-API-KEY-VERSION");if("2"===m){var y=this.hmac(this.encode(this.password),this.encode(this.secret),"sha256","base64");n["KC-API-PASSPHRASE"]=y}else n["KC-API-PASSPHRASE"]=this.password;var g=v+r+h+f,b=this.hmac(this.encode(g),this.encode(this.secret),"sha256","base64");n["KC-API-SIGN"]=b;var k=this.safeValue(this.options,"partner",{}),x=this.safeString(k,"id"),w=this.safeString(k,"secret");if(void 0!==x&&void 0!==w){var _=v+x+this.apiKey,O=this.hmac(this.encode(_),this.encode(w),"sha256","base64");n["KC-API-PARTNER-SIGN"]=O,n["KC-API-PARTNER"]=x}}return{url:p,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(s){var u=this.safeString(s,"code"),d=this.safeString(s,"msg");this.throwExactlyMatchedException(this.exceptions.exact,d,d),this.throwExactlyMatchedException(this.exceptions.exact,u,d)}else this.throwBroadlyMatchedException(this.exceptions.broad,a,a)}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(130),l=r(10).ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"kuna",name:"Kuna",countries:["UA"],rateLimit:1e3,version:"v2",has:{CORS:!1,fetchTickers:!0,fetchOHLCV:"emulated",fetchOpenOrders:!0,fetchMyTrades:!0,withdraw:!1},timeframes:void 0,urls:{referral:"https://kuna.io?r=kunaid-gvfihe8az7o4",logo:"https://user-images.githubusercontent.com/51840849/87153927-f0578b80-c2c0-11ea-84b6-74612568e9e1.jpg",api:"https://kuna.io",www:"https://kuna.io",doc:"https://kuna.io/documents/api",fees:"https://kuna.io/documents/api"},fees:{trading:{taker:.0025,maker:.0025},funding:{withdraw:{UAH:"1%",BTC:.001,BCH:.001,ETH:.01,WAVES:.01,GOL:0,GBG:0},deposit:{}}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=["btc","eth","eurs","rub","uah","usd","usdt","gol"],n={UAH:0},a=[],e.next=6,this.publicGetTickers(t);case 6:s=e.sent,o=Object.keys(s),c=0;case 9:if(!(c<o.length)){e.next=30;break}u=o[c],d=0;case 12:if(!(d<r.length)){e.next=27;break}if(h=r[d],l=u.indexOf(h),f=u.slice(l),!(l>0&&f===h)){e.next=24;break}return p=u.replace(h,""),v=this.safeCurrencyCode(p),m=this.safeCurrencyCode(h),y=v+"/"+m,g={amount:6,price:this.safeInteger(n,m,6)},a.push({id:u,symbol:y,base:v,quote:m,baseId:p,quoteId:h,precision:g,limits:{amount:{min:Math.pow(10,-g.amount),max:Math.pow(10,g.amount)},price:{min:Math.pow(10,-g.price),max:Math.pow(10,g.price)},cost:{min:void 0,max:void 0}},active:void 0,info:void 0}),e.abrupt("break",27);case 24:d++,e.next=12;break;case 27:c++,e.next=9;break;case 30:return e.abrupt("return",a);case 31:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchL3OrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.fetchOrderBook(t,r,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},e.next=12,this.privateGetOrders(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=void 0;t&&(i=t.symbol);var n=this.safeString2(e,"side","trend");if(void 0!==n){var a={ask:"sell",bid:"buy"};n=this.safeString(a,n,n)}var s=this.safeFloat(e,"price"),o=this.safeFloat(e,"volume"),c=this.safeFloat(e,"funds"),u=this.safeString(e,"order_id"),d=this.safeString(e,"id");return{id:d,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:n,order:u,takerOrMaker:void 0,price:s,amount:o,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={market:s.id},e.next=12,this.privateGetTradesMy(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.fetchTrades(t,n,a,s);case 8:for(o=e.sent,c=this.buildOHLCVC(o,r,n,a),u=[],d=0;d<c.length;d++)h=c[d],u.push([h[0],h[1],h[2],h[3],h[4],h[5]]);return e.abrupt("return",u);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.BadSymbol,m=l.InvalidOrder,y=l.InsufficientFunds;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"lakebtc",name:"LakeBTC",countries:["US"],version:"api_v2",rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/28074120-72b7c38a-6660-11e7-92d9-d9027502281d.jpg",api:"https://api.lakebtc.com",www:"https://www.lakebtc.com",doc:["https://www.lakebtc.com/s/api_v2","https://www.lakebtc.com/s/api"]},api:{public:{get:["bcorderbook","bctrades","ticker"]},private:{post:["buyOrder","cancelOrders","getAccountInfo","getExternalAccounts","getOrders","getTrades","openOrders","sellOrder"]}},fees:{trading:{maker:.0015,taker:.002}},exceptions:{broad:{Signature:p,"invalid symbol":v,"Volume doit":m,insufficient_balance:y}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetTicker(t);case 3:for(r=e.sent,n=[],a=Object.keys(r),s=0;s<a.length;s++)o=a[s],c=r[o],u=o.slice(0,3),d=o.slice(3,6),h=u.toUpperCase(),l=d.toUpperCase(),f=h+"/"+l,n.push({id:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,info:c,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"balance",{}),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(n,c),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetBcorderbook(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a=Object.keys(n),s={},o=0;o<a.length;o++)c=a[o],u=n[c],d=this.safeMarket(c),h=d.symbol,s[h]=this.parseTicker(u,d);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetTicker(r);case 6:return a=e.sent,e.abrupt("return",this.parseTicker(a[n.id],n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=this.safeString(e,"tid"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=void 0;void 0!==n&&void 0!==a&&(s=n*a);var o=void 0;return void 0!==t&&(o=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,order:void 0,type:void 0,side:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetBctrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c="privatePost"+this.capitalize(n)+"Order",u=this.market(t),d={params:[s,a,u.id]},e.next=11,this[c](this.extend(d,o));case 11:return h=e.sent,e.abrupt("return",{info:h,id:this.safeString(h,"id")});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={params:[t]},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.microseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version;if("public"===t)s+="/"+e,Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce(),c=o.toString(),u=this.seconds(),d="";if("params"in i){for(var h=i.params,l=[],f=0;f<h.length;f++){var p=h[f];"string"!==typeof h&&(p=p.toString()),l.push(p)}d=l.join(","),a={method:e,params:i.params,id:u}}else a={method:e,params:"",id:u};a=this.json(a);var v=["tonce="+c,"accesskey="+this.apiKey,"requestmethod="+r.toLowerCase(),"id="+u.toString(),"method="+e,"params="+d];v=v.join("&");var m=this.hmac(this.encode(v),this.encode(this.secret),"sha1"),y=this.apiKey+":"+m,g=this.decode(this.stringToBase64(y));n={"Json-Rpc-Tonce":c,Authorization:"Basic "+g,"Content-Type":"application/json"}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.id+" "+a,d=this.safeString(s,"error");if(void 0!==d)throw this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new f(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidNonce,m=l.OrderNotFound,y=l.InvalidOrder,g=l.DDoSProtection,b=l.BadRequest,k=l.AuthenticationError,x=r(13).ROUND;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"latoken",name:"Latoken",countries:["KY"],version:"v1",rateLimit:2e3,certified:!1,userAgent:this.userAgents.chrome,has:{CORS:!1,publicAPI:!0,privateAPI:!0,cancelOrder:!0,cancelAllOrders:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCanceledOrders:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!1,fetchOrdersByStatus:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/61511972-24c39f00-aa01-11e9-9f7c-471f1d6e5214.jpg",api:"https://api.latoken.com",www:"https://latoken.com",doc:["https://api.latoken.com"]},api:{public:{get:["ExchangeInfo/time","ExchangeInfo/limits","ExchangeInfo/pairs","ExchangeInfo/pairs/{currency}","ExchangeInfo/pair","ExchangeInfo/currencies","ExchangeInfo/currencies/{symbol}","MarketData/tickers","MarketData/ticker/{symbol}","MarketData/orderBook/{symbol}","MarketData/orderBook/{symbol}/{limit}","MarketData/trades/{symbol}","MarketData/trades/{symbol}/{limit}"]},private:{get:["Account/balances","Account/balances/{currency}","Order/status","Order/active","Order/get_order","Order/trades"],post:["Order/new","Order/test-order","Order/cancel","Order/cancel_all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{MT:"Monarch",TSL:"Treasure SL"},options:{createOrderMethod:"private_post_order_new"},exceptions:{exact:{"Signature or ApiKey is not valid":k,"Request is out of time":v,"Symbol must be specified":b},broad:{"Request limit reached":g,Pair:b,"Price needs to be greater than":y,"Amount needs to be greater than":y,"The Symbol field is required":y,"OrderType is not valid":y,"Side is not valid":y,"Cancelable order whit":m,Order:m}}})}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetExchangeInfoTime(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"unixTimeMiliseconds"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetExchangeInfoPairs(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeString(s,"baseCurrency"),u=this.safeString(s,"quotedCurrency"),d=this.safeInteger(s,"pairId"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,p={price:this.safeInteger(s,"pricePrecision"),amount:this.safeInteger(s,"amountPrecision")},v={amount:{min:this.safeFloat(s,"minQty"),max:void 0},price:{min:Math.pow(10,-p.price),max:void 0},cost:{min:void 0,max:void 0}},n.push({id:o,numericId:d,info:s,symbol:f,base:h,quote:l,baseId:c,quoteId:u,active:void 0,precision:p,limits:v});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetExchangeInfoCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeInteger(s,"currencyId"),u=this.safeCurrencyCode(o),d=this.safeInteger(s,"precission"),h=this.safeFloat(s,"fee"),l=void 0,n[u]={id:o,numericId:c,code:u,info:s,name:u,active:l,fee:h,precision:d,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o="quote",c=s[a],u=i*c,d=s.precision.price;return"sell"===r?u*=n:(o="base",d=s.precision.amount),u=this.decimalToPrecision(u,x,d,this.precisionMode),{type:a,currency:s[o],rate:c,cost:parseFloat(u)}}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeCurrencyCode(o),u=this.safeFloat(s,"frozen"),d=this.safeFloat(s,"pending"),h=this.sum(u,d),l={free:this.safeFloat(s,"available"),used:h,total:this.safeFloat(s,"amount")},n[c]=l;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={symbol:a.id,limit:10},void 0!==r&&(s.limit=r),e.next=9,this.publicGetMarketDataOrderBookSymbolLimit(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o,void 0,"bids","asks","price","quantity"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeFloat(e,"open"),a=this.safeFloat(e,"close"),s=void 0;void 0!==n&&void 0!==a&&(s=a-n);var o=this.safeFloat(e,"priceChange"),c=this.nonce();return{symbol:i,timestamp:c,datetime:this.iso8601(c),low:this.safeFloat(e,"low"),high:this.safeFloat(e,"high"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:n,close:a,last:a,previousClose:void 0,change:s,percentage:o,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetMarketDataTickerSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketDataTickers(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),c=o.symbol,a[c]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeInteger2(e,"timestamp","time");void 0!==i&&i<12309408e5&&(i*=1e3);var n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=this.safeString(e,"side"),o=void 0;void 0!==a&&void 0!==n&&(o=a*n);var c=void 0;void 0!==t&&(c=t.symbol);var u=this.safeString(e,"id"),d=this.safeString(e,"orderId"),h=this.safeFloat(e,"commission"),l=void 0;return void 0!==h&&(l={cost:h,currency:void 0}),{info:e,timestamp:i,datetime:this.iso8601(i),symbol:c,id:u,order:d,type:r,takerOrMaker:void 0,side:s,price:n,amount:a,cost:o,fee:l}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketDataTradesSymbol(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={symbol:s.id},e.next=12,this.privateGetOrderTrades(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",partiallyFilled:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeTimestamp(e,"timeCreated"),n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t),s=this.safeString(e,"side"),o=this.safeString(e,"orderType"),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"executedAmount"),h=this.parseOrderStatus(this.safeString(e,"orderStatus")),l=this.safeTimestamp(e,"timeFilled"),f=void 0;void 0!==l&&l>0&&(f=l);var p=this.safeString(e,"cliOrdId");return this.safeOrder({id:r,clientOrderId:p,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:f,status:h,symbol:a,type:o,timeInForce:void 0,postOnly:void 0,side:s,price:c,stopPrice:void 0,cost:void 0,amount:u,filled:d,average:void 0,remaining:void 0,fee:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchOrdersWithMethod("private_get_order_active",t,r,n,a));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchOrdersByStatus("filled",t,r,n,a));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.abrupt("return",this.fetchOrdersByStatus("cancelled",t,r,n,a));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrdersByStatus",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:void 0,s=c.length>4&&void 0!==c[4]?c[4]:{},o={status:t},e.abrupt("return",this.fetchOrdersWithMethod("private_get_order_status",r,n,a,this.extend(o,s)));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},void 0!==r){e.next=6;break}throw new p(this.id+" fetchOrdersWithMethod() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return o=this.market(r),c={symbol:o.id},void 0!==a&&(c.limit=a),e.next=13,this[t](this.extend(c,s));case 13:return u=e.sent,e.abrupt("return",this.parseOrders(u,o,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privateGetOrderGetOrder(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c={symbol:this.marketId(t),side:n,price:this.priceToPrecision(t,s),amount:this.amountToPrecision(t,a),orderType:r},u=this.safeString(this.options,"createOrderMethod","private_post_order_new"),e.next=10,this[u](this.extend(c,o));case 10:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.privatePostOrderCancel(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},void 0!==t){e.next=4;break}throw new p(this.id+" cancelAllOrders() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return n=this.marketId(t),a={symbol:n},e.next=10,this.privatePostOrderCancelAll(this.extend(a,r));case 10:for(s=e.sent,o=[],c=this.safeValue(s,"cancelledOrders",[]),u=0;u<c.length;u++)d=this.parseOrder({symbol:n,orderId:c[u],orderStatus:"canceled"}),o.push(d);return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){var c=this.nonce();o=this.extend({timestamp:c},o)}var u=this.urlencode(o);if(Object.keys(o).length&&(s+="?"+u),"private"===t){this.checkRequiredCredentials();var d=this.hmac(this.encode(s),this.encode(this.secret));n={"X-LA-KEY":this.apiKey,"X-LA-SIGNATURE":d},"POST"===r&&(n["Content-Type"]="application/x-www-form-urlencoded",a=u)}var h=this.urls.api+s;return{url:h,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(s){var u=this.safeString(s,"message"),d=this.id+" "+a;void 0!==u&&(this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d));var h=this.safeValue(s,"error",{}),l=this.safeString(h,"message");if(void 0!==l)throw this.throwExactlyMatchedException(this.exceptions.exact,l,d),this.throwBroadlyMatchedException(this.exceptions.broad,l,d),new f(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.DDoSProtection,v=l.AuthenticationError,m=l.InvalidOrder,y=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"lbank",name:"LBank",countries:["CN"],version:"v1",has:{cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOpenOrders:!1,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"minute1","5m":"minute5","15m":"minute15","30m":"minute30","1h":"hour1","2h":"hour2","4h":"hour4","6h":"hour6","8h":"hour8","12h":"hour12","1d":"day1","1w":"week1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/38063602-9605e28a-3302-11e8-81be-64b1e53c4cfb.jpg",api:"https://api.lbank.info",www:"https://www.lbank.info",doc:"https://github.com/LBank-exchange/lbank-official-api-docs",fees:"https://lbankinfo.zendesk.com/hc/en-gb/articles/360012072873-Trading-Fees",referral:"https://www.lbex.io/invite?icode=7QCY"},api:{public:{get:["currencyPairs","ticker","depth","trades","kline","accuracy"]},private:{post:["user_info","create_order","cancel_order","orders_info","orders_info_history","withdraw","withdrawCancel","withdraws","withdrawConfigs"]}},fees:{trading:{maker:.001,taker:.001},funding:{withdraw:{BTC:void 0,ZEC:.01,ETH:.01,ETC:.01,VEN:10,BCH:2e-4,SC:50,BTM:20,NAS:1,EOS:1,XWC:5,BTS:1,INK:10,BOT:3,YOYOW:15,TGC:10,NEO:0,CMT:20,SEER:2e3,FIL:void 0,BTG:void 0}}},commonCurrencies:{VET_ERC20:"VEN",PNT:"Penta"},options:{cacheSecretAsPem:!0}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetAccuracy(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=s.symbol,c=o.split("_"),u=void 0,d=void 0,c.length>2?(u=c[0]+"_"+c[1],d=c[2]):(u=c[0],d=c[1]),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(s,"quantityAccuracy"),price:this.safeInteger(s,"priceAccuracy")},n.push({id:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:!0,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:void 0},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;if(void 0===t){var i=this.safeString(e,"symbol");if(i in this.markets_by_id){var n=this.marketsById[i];r=n.symbol}else{var a=i.split("_"),s=void 0,o=void 0,c=a.length;c>2?(s=a[0]+"_"+a[1],o=a[2]):(s=a[0],o=a[1]);var u=this.safeCurrencyCode(s),d=this.safeCurrencyCode(o);r=u+"/"+d}}var h=this.safeInteger(e,"timestamp"),l=e;e=l.ticker;var f=this.safeFloat(e,"latest"),p=this.safeFloat(e,"change"),v=void 0;if(void 0!==p){var m=this.sum(1,p/100);m>0&&(v=f/this.sum(1,m))}var y=void 0,g=void 0;return void 0!==f&&void 0!==v&&(y=f-v,g=this.sum(f,v)/2),void 0!==t&&(r=t.symbol),{symbol:r,timestamp:h,datetime:this.iso8601(h),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:f,last:f,previousClose:void 0,change:y,percentage:p,average:g,baseVolume:this.safeFloat(e,"vol"),quoteVolume:this.safeFloat(e,"turnover"),info:l}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:"all"},e.next=7,this.publicGetTicker(this.extend(n,r));case 7:for(a=e.sent,s={},o=0;o<a.length;o++)c=this.parseTicker(a[o]),u=c.symbol,s[u]=c;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:60,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=60,void 0!==r&&(a=Math.min(r,a)),s={symbol:this.marketId(t),size:a},e.next=9,this.publicGetDepth(this.extend(s,n));case 9:return o=e.sent,e.abrupt("return",this.parseOrderBook(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;void 0!==t&&(r=t.symbol);var i=this.safeInteger(e,"date_ms"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=void 0;void 0!==n&&void 0!==a&&(s=parseFloat(this.costToPrecision(r,n*a)));var o=this.safeString(e,"tid"),c=void 0,u=this.safeString(e,"type");return u=u.replace("_market",""),{id:o,info:this.safeValue(e,"info",e),timestamp:i,datetime:this.iso8601(i),symbol:r,order:void 0,type:c,side:u,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id,size:100},void 0!==r&&(o.time=parseInt(r)),void 0!==n&&(o.size=n),e.next=11,this.publicGetTrades(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"5m",n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:1e3,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),void 0!==n){e.next=9;break}throw new y(this.id+" fetchOHLCV() requires a `since` argument");case 9:if(void 0!==a){e.next=11;break}throw new y(this.id+" fetchOHLCV() requires a `limit` argument");case 11:return c={symbol:o.id,type:this.timeframes[r],size:a,time:parseInt(n/1e3)},e.next=14,this.publicGetKline(this.extend(c,s));case 14:return u=e.sent,e.abrupt("return",this.parseOHLCVs(u,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostUserInfo(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"info",{}),s=this.safeValue(a,"free",{}),o=this.safeValue(a,"freeze",{}),c=this.safeValue(a,"asset",{}),u=Object.keys(s),d=0;d<u.length;d++)h=u[d],l=this.safeCurrencyCode(h),(f=this.account()).free=this.safeFloat(s,h),f.used=this.safeFloat(o,h),f.total=this.safeFloat(c,h),n[l]=f;return e.abrupt("return",this.parseBalance(n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({"-1":"cancelled",0:"open",1:"open",2:"closed",4:"closed"},e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t,"_"),n=this.safeInteger(e,"create_time"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount",0),o=this.safeFloat(e,"deal_amount",0),c=this.safeFloat(e,"avg_price"),u=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeString(e,"order_id"),h=this.safeString(e,"order_type"),l=this.safeString(e,"type");return this.safeOrder({id:d,clientOrderId:void 0,datetime:this.iso8601(n),timestamp:n,lastTradeTimestamp:void 0,status:u,symbol:i,type:h,timeInForce:void 0,postOnly:void 0,side:l,price:a,stopPrice:void 0,cost:void 0,amount:s,filled:o,remaining:void 0,trades:void 0,fee:void 0,info:this.safeValue(e,"info",e),average:c})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={symbol:c.id,type:n,amount:a},"market"===r?u.type+="_market":u.price=s,e.next=9,this.privatePostCreateOrder(this.extend(u,o));case 9:return d=e.sent,(u=this.omit(u,"type")).order_id=d.order_id,u.type=n,u.order_type=r,u.create_time=this.milliseconds(),u.info=d,e.abrupt("return",this.parseOrder(u,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={symbol:a.id,order_id:t},e.next=8,this.privatePostCancelOrder(this.extend(s,n));case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(r),s={symbol:a.id,order_id:t},e.next=8,this.privatePostOrdersInfo(this.extend(s,n));case 8:if(o=e.sent,c=this.safeValue(o,"orders",[]),u=this.parseOrders(c,a),1!==u.length){e.next=16;break}return e.abrupt("return",u[0]);case 16:return e.abrupt("return",u);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return void 0===n&&(n=100),s=this.market(t),o={symbol:s.id,current_page:1,page_length:n},e.next=11,this.privatePostOrdersInfoHistory(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(u,void 0,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchOrders(t,r,n,a);case 6:return s=e.sent,o=this.filterBy(s,"status","closed"),c=this.filterBy(s,"status","cancelled"),u=this.arrayConcat(o,c),e.abrupt("return",this.filterBySymbolSinceLimit(u,t,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={assetCode:o.id,amount:r,account:n},void 0!==a&&(c.memo=a),u=this.privatePostWithdraw(this.extend(c,s)),e.abrupt("return",{id:this.safeString(u,"id"),info:u});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"convertSecretToPem",value:function(e){var t=e.length-0,r=parseInt(t/64);r=this.sum(r,1);for(var i="-----BEGIN PRIVATE KEY-----\n",n=0;n<r;n++){var a=64*n,s=this.sum(a,64);i+=this.secret.slice(a,s)+"\n"}return i+"-----END PRIVATE KEY-----"}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i);if(o+=".do","public"===t)Object.keys(s).length&&(o+="?"+this.urlencode(s));else{this.checkRequiredCredentials();var c=this.keysort(this.extend({api_key:this.apiKey},i)),u=this.rawencode(c),d=this.hash(this.encode(u)).toUpperCase(),h=this.safeValue(this.options,"cacheSecretAsPem",!0),l=void 0;h?void 0===(l=this.safeValue(this.options,"pem"))&&(l=this.convertSecretToPem(this.secret),this.options.pem=l):l=this.convertSecretToPem(this.secret);var f=this.binaryToBase64(this.rsa(d,this.encode(l),"RS256"));c.sign=f,a=this.urlencode(c),n={"Content-Type":"application/x-www-form-urlencoded"}}return{url:o,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"public",n=h.length>2&&void 0!==h[2]?h[2]:"GET",a=h.length>3&&void 0!==h[3]?h[3]:{},s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(c=e.sent,"false"!==this.safeString(c,"result")){e.next=14;break}throw u=this.safeString(c,"error_code"),d=this.safeString({1e4:"Internal error",10001:"The required parameters can not be empty",10002:"verification failed",10003:"Illegal parameters",10004:"User requests are too frequent",10005:"Key does not exist",10006:"user does not exist",10007:"Invalid signature",10008:"This currency pair is not supported",10009:"Limit orders can not be missing orders and the number of orders",10010:"Order price or order quantity must be greater than 0",10011:"Market orders can not be missing the amount of the order",10012:"market sell orders can not be missing orders",10013:"is less than the minimum trading position 0.001",10014:"Account number is not enough",10015:"The order type is wrong",10016:"Account balance is not enough",10017:"Abnormal server",10018:"order inquiry can not be more than 50 less than one",10019:"withdrawal orders can not be more than 3 less than one",10020:"less than the minimum amount of the transaction limit of 0.001",10022:"Insufficient key authority"},u,this.json(c)),new(this.safeValue({10002:v,10004:p,10005:v,10006:v,10007:v,10009:m,10010:m,10011:m,10012:m,10013:m,10014:m,10015:m,10016:m,10022:v},u,f))(d);case 14:return e.abrupt("return",c);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(13).TICK_SIZE,f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.InvalidNonce,y=f.OrderNotFound,g=f.InvalidOrder,b=f.InsufficientFunds,k=f.AuthenticationError,x=f.DDoSProtection,w=f.NotSupported;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"liquid",name:"Liquid",countries:["JP","CN","TW"],version:"2",rateLimit:1e3,has:{cancelOrder:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/45798859-1a872600-bcb4-11e8-8746-69291ce87b04.jpg",api:"https://api.liquid.com",www:"https://www.liquid.com",doc:["https://developers.liquid.com"],fees:"https://help.liquid.com/getting-started-with-liquid/the-platform/fee-structure",referral:"https://www.liquid.com/sign-up/?affiliate=SbzC62lt30976"},api:{public:{get:["currencies","products","products/{id}","products/{id}/price_levels","executions","ir_ladders/{currency}","fees"]},private:{get:["accounts","accounts/balance","accounts/main_asset","accounts/{id}","accounts/{currency}/reserved_balance_details","crypto_accounts","crypto_withdrawals","executions/me","fiat_accounts","fund_infos","loan_bids","loans","orders","orders/{id}","orders/{id}/trades","trades","trades/{id}/loans","trading_accounts","trading_accounts/{id}","transactions","withdrawals"],post:["crypto_withdrawals","fund_infos","fiat_accounts","loan_bids","orders","withdrawals"],put:["crypto_withdrawal/{id}/cancel","loan_bids/{id}/close","loans/{id}","orders/{id}","orders/{id}/cancel","trades/{id}","trades/{id}/adjust_margin","trades/{id}/close","trades/close_all","trading_accounts/{id}","withdrawals/{id}/cancel"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0015,maker:0,tiers:{perpetual:{maker:[[0,0],[25e3,0],[5e4,-25e-5],[1e5,-25e-5],[1e6,-25e-5],[1e7,-25e-5],[25e6,-25e-5],[5e7,-25e-5],[75e6,-25e-5],[1e8,-25e-5],[2e8,-25e-5],[3e8,-25e-5]],taker:[[0,6e-4],[25e3,575e-6],[5e4,55e-5],[1e5,525e-6],[1e6,5e-4],[1e7,475e-6],[25e6,45e-5],[5e7,425e-6],[75e6,4e-4],[1e8,375e-6],[2e8,35e-5],[3e8,325e-6]]},spot:{taker:[[0,.0015],[1e4,.0015],[2e4,.0014],[5e4,.0013],[1e5,.001],[1e6,8e-4],[5e6,6e-4],[1e7,5e-4],[25e6,5e-4],[5e7,45e-5],[1e8,4e-4],[2e8,3e-4]],maker:[[0,0],[1e4,.0015],[2e4,.14],[5e4,.13],[1e5,.08],[1e6,4e-4],[5e6,35e-5],[1e7,25e-5],[25e6,0],[5e7,0],[1e8,0],[2e8,0]]}}}},precisionMode:l,exceptions:{"API rate limit exceeded. Please retry after 300s":x,"API Authentication failed":k,"Nonce is too small":m,"Order not found":y,"Can not update partially filled order":g,"Can not update non-live order":y,not_enough_free_balance:b,must_be_positive:g,less_than_order_size:g,price_too_high:g,price_too_small:g},commonCurrencies:{WIN:"WCOIN",HOT:"HOT Token",MIOTA:"IOTA"},options:{cancelOrderException:!0}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),c=this.safeCurrencyCode(o),u=s.depositable&&s.withdrawable,d=this.safeInteger(s,"display_precision"),h=this.safeInteger(s,"quoting_precision"),l=Math.max(d,h),f=1/Math.pow(10,l),n[c]={id:o,code:c,info:s,name:c,active:u,fee:this.safeFloat(s,"withdrawal_fee"),precision:f,limits:{amount:{min:Math.pow(10,-d),max:Math.pow(10,d)},price:{min:Math.pow(10,-h),max:Math.pow(10,h)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"minimum_withdrawal"),max:void 0}}};return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M.length>0&&void 0!==M[0]?M[0]:{},e.next=3,this.publicGetProducts(t);case 3:return r=e.sent,e.next=6,this.publicGetProducts({perpetual:"1"});case 6:return n=e.sent,e.next=9,this.fetchCurrencies();case 9:for(a=e.sent,s=this.indexBy(a,"code"),o=[],c=this.arrayConcat(r,n),u=0;u<c.length;u++)d=c[u],h=this.safeString(d,"id"),l=this.safeString(d,"base_currency"),f=this.safeString(d,"quoted_currency"),p=this.safeString(d,"product_type"),v="spot",m=!0,y=!1,"Perpetual"===p&&(m=!1,y=!0,v="swap"),g=this.safeCurrencyCode(l),b=this.safeCurrencyCode(f),k=void 0,k=y?this.safeString(d,"currency_pair_code"):g+"/"+b,x=this.fees.trading.maker,w=this.fees.trading.taker,"swap"===v&&(x=this.safeFloat(d,"maker_fee",this.fees.trading.maker),w=this.safeFloat(d,"taker_fee",this.fees.trading.taker)),_=this.safeValue(d,"disabled",!1),O=!_,T=this.safeValue(s,g),S={amount:1e-8,price:this.safeFloat(d,"tick_size")},C=void 0,void 0!==T&&(C=this.safeFloat(T.info,"minimum_order_quantity")),I={amount:{min:C,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},o.push({id:h,symbol:k,base:g,quote:b,baseId:l,quoteId:f,type:v,spot:m,swap:y,maker:x,taker:w,limits:I,precision:S,active:O,info:d});return e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"crypto_accounts",[]),s=this.safeValue(r,"fiat_accounts",[]),o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"currency"),d=this.safeCurrencyCode(u),(h=this.account()).total=this.safeFloat(c,"balance"),h.used=this.safeFloat(c,"reserved_balance"),n[d]=h;for(l=0;l<s.length;l++)f=s[l],p=this.safeString(f,"currency"),v=this.safeCurrencyCode(p),(m=this.account()).total=this.safeFloat(f,"balance"),m.used=this.safeFloat(f,"reserved_balance"),n[v]=m;return e.abrupt("return",this.parseBalance(n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetProductsIdPriceLevels(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"buy_price_levels","sell_price_levels"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;if("last_traded_price"in e&&e.last_traded_price){var n=e.last_traded_price.length;n>0&&(i=this.safeFloat(e,"last_traded_price"))}var a=void 0;if(void 0===t){var s=this.safeString(e,"id");if(s in this.markets_by_id)t=this.markets_by_id[s];else{var o=this.safeString(e,"base_currency"),c=this.safeString(e,"quoted_currency");a in this.markets?t=this.markets[a]:a=this.safeCurrencyCode(o)+"/"+this.safeCurrencyCode(c)}}void 0!==t&&(a=t.symbol);var u=void 0,d=void 0,h=void 0,l=this.safeFloat(e,"last_price_24h");return void 0!==l&&void 0!==i&&(u=i-l,h=this.sum(i,l)/2,l>0&&(d=u/l*100)),{symbol:a,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_market_ask"),low:this.safeFloat(e,"low_market_bid"),bid:this.safeFloat(e,"market_bid"),bidVolume:void 0,ask:this.safeFloat(e,"market_ask"),askVolume:void 0,vwap:void 0,open:l,close:i,last:i,previousClose:void 0,change:u,percentage:d,average:h,baseVolume:this.safeFloat(e,"volume_24h"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetProducts(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),c=o.symbol,a[c]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={id:n.id},e.next=7,this.publicGetProductsId(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"created_at"),i=this.safeString(e,"order_id"),n=this.safeString(e,"taker_side"),a=this.safeString(e,"my_side"),s=void 0!==a?a:n,o=void 0;void 0!==a&&(o=n===a?"taker":"maker");var c=void 0,u=this.safeFloat(e,"price"),d=this.safeFloat(e,"quantity");void 0!==u&&void 0!==d&&(c=u*d);var h=this.safeString(e,"id"),l=void 0;return void 0!==t&&(l=t.symbol),{info:e,id:h,order:i,timestamp:r,datetime:this.iso8601(r),symbol:l,type:void 0,side:s,takerOrMaker:o,price:u,amount:d,cost:c,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={product_id:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.timestamp=parseInt(r/1e3)),e.next=11,this.publicGetExecutions(this.extend(o,a));case 11:return c=e.sent,u=void 0!==r?c:c.models,e.abrupt("return",this.parseTrades(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.market(t),o={product_id:s.id,with_details:!0},void 0!==n&&(o.limit=n),e.next=11,this.privateGetExecutionsMe(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c.models,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.safeString2(o,"clientOrderId","client_order_id"),o=this.omit(o,["clientOrderId","client_order_id"]),u={order_type:r,product_id:this.marketId(t),side:n,quantity:this.amountToPrecision(t,a)},void 0!==c&&(u.client_order_id=c),"limit"!==r&&"limit_post_only"!==r&&"market_with_range"!==r&&"stop"!==r||(u.price=this.priceToPrecision(t,s)),e.next=11,this.privatePostOrders(this.extend(u,o));case 11:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePutOrdersIdCancel(this.extend(n,r));case 7:if(a=e.sent,"closed"!==(s=this.parseOrder(a)).status){e.next=12;break}if(!this.options.cancelOrderException){e.next=12;break}throw new y(this.id+" order closed already: "+this.json(a));case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>5&&void 0!==h[5]?h[5]:void 0,c=h.length>6&&void 0!==h[6]?h[6]:{},e.next=4,this.loadMarkets();case 4:if(void 0!==o){e.next=6;break}throw new v(this.id+" editOrder() requires the price argument");case 6:return u={order:{quantity:this.amountToPrecision(r,s),price:this.priceToPrecision(r,o)},id:t},e.next=9,this.privatePutOrdersId(this.extend(u,c));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({live:"open",filled:"closed",cancelled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"created_at"),n=this.safeString(e,"product_id");t=this.safeValue(this.markets_by_id,n);var a=this.parseOrderStatus(this.safeString(e,"status")),s=this.safeFloat(e,"quantity"),o=this.safeFloat(e,"filled_quantity"),c=this.safeFloat(e,"price"),u=void 0,d=void 0;void 0!==t&&(u=t.symbol,d=t.quote);for(var h=this.safeString(e,"order_type"),l=0,f=0,p=this.safeFloat(e,"average_price"),v=this.parseTrades(this.safeValue(e,"executions",[]),t,void 0,void 0,{order:r,type:h}),m=v.length,y=0;y<m;y++){var g=v[y];g.order=r,g.type=h,f=this.sum(f,g.amount),l=this.sum(l,g.cost)}var b=void 0,k=void 0;m>0&&(k=v[m-1].timestamp,!p&&f>0&&(p=l/f),void 0===b&&(b=l),void 0===o&&(o=f));var x=void 0;void 0!==s&&void 0!==o&&(x=s-o);var w=this.safeString(e,"side"),_=this.safeString(e,"client_order_id");return{id:r,clientOrderId:_,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:k,type:h,timeInForce:void 0,postOnly:void 0,status:a,symbol:u,side:w,price:c,stopPrice:void 0,amount:s,filled:o,cost:b,remaining:x,average:p,trades:v,fee:{currency:d,cost:this.safeFloat(e,"order_fee")},info:e}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={with_details:1},void 0!==t&&(s=this.market(t),o.product_id=s.id),void 0!==n&&(o.limit=n),e.next=12,this.privateGetOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"models",[]),e.abrupt("return",this.parseOrders(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"live"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"filled"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={currency:o.id,address:n,amount:this.currencyToPrecision(t,r)},void 0===a){e.next=18;break}if("XRP"!==t){e.next=12;break}c.payment_id=a,e.next=18;break;case 12:if("XLM"!==t){e.next=17;break}c.memo_type="text",c.memo_value=a,e.next=18;break;case 17:throw new w(this.id+" withdraw() only supports a tag along the address for XRP or XLM");case 18:return e.next=20,this.privatePostCryptoWithdrawals(this.extend(c,s));case 20:return u=e.sent,e.abrupt("return",this.parseTransaction(u,o));case 22:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",cancelled:"canceled",approved:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=this.safeString2(e,"payment_id","memo_value"),a=void 0,s=this.safeString(e,"asset"),o=this.safeCurrencyCode(s,t),c=this.safeTimestamp(e,"created_at"),u=this.safeTimestamp(e,"updated_at"),d="withdrawal",h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"amount");return{info:e,id:r,txid:a,timestamp:c,datetime:this.iso8601(c),address:i,tag:n,type:d,amount:l,currency:o,status:h,updated:u,fee:void 0}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(n={"X-Quoine-API-Version":this.version,"Content-Type":"application/json"},"private"===t){this.checkRequiredCredentials(),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o));var c=this.nonce(),u={path:s,token_id:this.apiKey,iat:Math.floor(c/1e3)};"client_order_id"in o||(u.nonce=c),n["X-Quoine-Auth"]=this.jwt(u,this.encode(this.secret))}else Object.keys(o).length&&(s+="?"+this.urlencode(o));return{url:s=this.urls.api+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(!(e>=200&&e<300))if(401!==e){if(429===e)throw new x(this.id+" "+a);if(void 0!==s){var u=this.id+" "+a,d=this.safeString(s,"message"),h=this.safeValue(s,"errors");if(void 0!==d)this.throwExactlyMatchedException(this.exceptions,d,u);else{if(void 0===h)throw new p(u);for(var l=Object.keys(h),f=0;f<l.length;f++)for(var v=h[l[f]],m=0;m<v.length;m++){var y=v[m];this.throwExactlyMatchedException(this.exceptions,y,u)}}}}else this.throwExactlyMatchedException(this.exceptions,a,a)}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"luno",name:"luno",countries:["GB","SG","ZA"],rateLimit:1e3,version:"1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0},urls:{referral:"https://www.luno.com/invite/44893A",logo:"https://user-images.githubusercontent.com/1294454/27766607-8c1a69d8-5ede-11e7-930c-540b5eb9be24.jpg",api:{public:"https://api.luno.com/api",private:"https://api.luno.com/api",exchange:"https://api.luno.com/api/exchange"},www:"https://www.luno.com",doc:["https://www.luno.com/en/api","https://npmjs.org/package/bitx","https://github.com/bausmeier/node-bitx"]},api:{exchange:{get:["markets"]},public:{get:["orderbook","orderbook_top","ticker","tickers","trades"]},private:{get:["accounts/{id}/pending","accounts/{id}/transactions","balance","beneficiaries","fee_info","funding_address","listorders","listtrades","orders/{id}","quotes/{id}","withdrawals","withdrawals/{id}"],post:["accounts","accounts/{id}/name","postorder","marketorder","stoporder","funding_address","withdrawals","send","quotes","oauth2/grant"],put:["accounts/{id}/name","quotes/{id}"],delete:["quotes/{id}","withdrawals/{id}"]}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.exchangeGetMarkets(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"markets",[]),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"market_id"),u=this.safeString(o,"base_currency"),d=this.safeString(o,"counter_currency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeString(o,"trading_status"),v="ACTIVE"===p,m={amount:this.safeInteger(o,"volume_scale"),price:this.safeInteger(o,"price_scale")},n.push({id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:v,precision:m,limits:{amount:{min:this.safeFloat(o,"min_volume"),max:this.safeFloat(o,"max_volume")},price:{min:this.safeFloat(o,"min_price"),max:this.safeFloat(o,"max_price")},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.privateGetBalance(t);case 3:for(r=e.sent,n=this.safeValue(r,"balance",[]),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"account_id"),u=this.safeString(o,"asset"),d=this.safeCurrencyCode(u),a.push({id:c,type:void 0,currency:d,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"balance",[]),a={info:r},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"asset"),u=this.safeCurrencyCode(c),d=this.safeFloat(o,"reserved"),h=this.safeFloat(o,"unconfirmed"),l=this.safeFloat(o,"balance"),u in a?(a[u].used=this.sum(a[u].used,d,h),a[u].total=this.sum(a[u].total,l,h)):((f=this.account()).used=this.sum(d,h),f.total=this.sum(l,h),a[u]=f);return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a="publicGetOrderbook",void 0!==r&&r<=100&&(a+="Top"),s={pair:this.marketId(t)},e.next=9,this[a](this.extend(s,n));case 9:return o=e.sent,c=this.safeInteger(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,c,"bids","asks","price","volume"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PENDING:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"creation_timestamp"),i=this.parseOrderStatus(this.safeString(e,"state"));i=i;var n="ASK"===e.type?"sell":"buy",a=this.safeString(e,"pair"),s=this.safeSymbol(a,t),o=this.safeFloat(e,"limit_price"),c=this.safeFloat(e,"limit_volume"),u=this.safeFloat(e,"fee_counter"),d=this.safeFloat(e,"fee_base"),h=this.safeFloat(e,"base"),l=this.safeFloat(e,"counter"),f={currency:void 0};u?(f.cost=u,void 0!==t&&(f.currency=t.quote)):(f.cost=d,void 0!==t&&(f.currency=t.base));var p=this.safeString(e,"order_id");return this.safeOrder({id:p,clientOrderId:void 0,datetime:this.iso8601(r),timestamp:r,lastTradeTimestamp:void 0,status:i,symbol:s,type:void 0,timeInForce:void 0,postOnly:void 0,side:n,price:o,stopPrice:void 0,amount:c,filled:h,cost:l,remaining:void 0,trades:void 0,fee:f,info:e,average:void 0})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersId(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersByState",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=7,this.loadMarkets();case 7:return o={},c=void 0,void 0!==t&&(o.state=t),void 0!==r&&(c=this.market(r),o.pair=c.id),e.next=13,this.privateGetListorders(this.extend(o,s));case 13:return u=e.sent,d=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(d,c,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState(void 0,t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("PENDING",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("COMPLETE",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"last_trade");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"rolling_24_hour_volume"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=this.indexBy(n.tickers,"pair"),s=Object.keys(a),o={},c=0;c<s.length;c++)u=s[c],d=this.safeMarket(u),h=d.symbol,l=a[u],o[h]=this.parseTicker(l,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"order_id"),i=void 0,n=void 0;void 0!==r?i="sell"===(n="ASK"===e.type?"sell":"buy")&&e.is_buy?"maker":"buy"!==n||e.is_buy?"taker":"maker":n=e.is_buy?"buy":"sell";var a=this.safeFloat(e,"fee_base"),s=this.safeFloat(e,"fee_counter"),o=void 0,c=void 0;void 0!==a?0!==a&&(o=t.base,c=a):void 0!==s&&0!==s&&(o=t.quote,c=s);var u=this.safeInteger(e,"timestamp");return{info:e,id:void 0,timestamp:u,datetime:this.iso8601(u),symbol:t.symbol,order:r,type:void 0,side:n,takerOrMaker:i,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:this.safeFloat(e,"counter"),fee:{cost:c,currency:o}}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==r&&(o.since=r),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==r&&(o.since=r),void 0!==n&&(o.limit=n),e.next=14,this.privateGetListtrades(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"trades",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetFeeInfo(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"maker_fee"),taker:this.safeFloat(r,"taker_fee")});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c="privatePost",u={pair:this.marketId(t)},"market"===r?(c+="Marketorder",u.type=n.toUpperCase(),"buy"===n?u.counter_volume=parseFloat(this.amountToPrecision(t,a)):u.base_volume=parseFloat(this.amountToPrecision(t,a))):(c+="Postorder",u.volume=parseFloat(this.amountToPrecision(t,a)),u.price=parseFloat(this.priceToPrecision(t,s)),u.type="buy"===n?"BID":"ASK"),e.next=9,this[c](this.extend(u,o));case 9:return d=e.sent,e.abrupt("return",{info:d,id:d.order_id});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePostStoporder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchLedgerByEntries",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:-1,n=c.length>2&&void 0!==c[2]?c[2]:1,a=c.length>3&&void 0!==c[3]?c[3]:{},s=void 0,o={min_row:r,max_row:this.sum(r,n)},e.next=8,this.fetchLedger(t,s,n,this.extend(o,a));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,n=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:if(s=void 0,o=this.safeString(a,"id"),c=this.safeValue(a,"min_row"),u=this.safeValue(a,"max_row"),void 0!==o){e.next=21;break}if(void 0!==t){e.next=15;break}throw new p(this.id+" fetchLedger() requires a currency code argument if no account id specified in params");case 15:if(s=this.currency(t),d=this.indexBy(this.accounts,"currency"),void 0!==(h=this.safeValue(d,t))){e.next=20;break}throw new f(this.id+" fetchLedger() could not find account id for "+t);case 20:o=h.id;case 21:if(void 0!==c||void 0!==u){e.next=26;break}u=0,c=-1e3,e.next=28;break;case 26:if(void 0!==c&&void 0!==u){e.next=28;break}throw new f(this.id+" fetchLedger() require both params 'max_row' and 'min_row' or neither to be defined");case 28:if(void 0!==n&&u-c>n&&(u<=0?c=u-n:c>0&&(u=c+n)),!(u-c>1e3)){e.next=31;break}throw new f(this.id+" fetchLedger() requires the params 'max_row' - 'min_row' <= 1000");case 31:return l={id:o,min_row:c,max_row:u},e.next=34,this.privateGetAccountsIdTransactions(this.extend(a,l));case 34:return v=e.sent,m=this.safeValue(v,"transactions",[]),e.abrupt("return",this.parseLedger(m,s,r,n));case 37:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerComment",value:function(e){var t=e.split(" "),r=void 0,i=this.safeString(t,0),n=this.safeString(t,2),a=this.safeString(t,3),s=this.safeString({Withdrawal:"fee",Trading:"fee",Payment:"transaction",Sent:"transaction",Deposit:"transaction",Received:"transaction",Released:"released",Reserved:"reserved",Sold:"trade",Bought:"trade",Failure:"failed"},i,void 0);return void 0===s&&"fee"===n&&(s="fee"),"reserved"===s&&"order"===a&&(r=this.safeString(t,4)),{type:s,referenceId:r}}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"row_index"),i=this.safeString(e,"account_id"),n=this.safeValue(e,"timestamp"),a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a,t),o=this.safeFloat(e,"available_delta"),c=this.safeFloat(e,"balance_delta"),u=this.safeFloat(e,"balance"),d=this.safeString(e,"description"),h=u,l=0,f=this.parseLedgerComment(d),p=f.type,v=f.referenceId,m=void 0,y=void 0;return 0!==c?(h=u-c,y="ok",l=Math.abs(c)):o<0?(y="pending",l=Math.abs(o)):o>0&&(y="canceled",l=Math.abs(o)),c>0||o>0?m="in":(c<0||o<0)&&(m="out"),{id:r,direction:m,account:i,referenceId:v,referenceAccount:void 0,type:p,currency:s,amount:l,timestamp:n,datetime:this.iso8601(n),before:h,after:u,status:y,fee:void 0,info:e}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var c=this.stringToBase64(this.apiKey+":"+this.secret);n={Authorization:"Basic "+this.decode(c)}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("error"in(c=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11);e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"lykke",name:"Lykke",countries:["CH"],version:"v1",rateLimit:200,has:{CORS:!1,fetchOHLCV:!1,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchTrades:!0,fetchMyTrades:!0,createOrder:!0,cancelOrder:!0,cancelAllOrders:!0,fetchBalance:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchTicker:!0},timeframes:{"1m":"Minute","5m":"Min5","15m":"Min15","30m":"Min30","1h":"Hour","4h":"Hour4","6h":"Hour6","12h":"Hour12","1d":"Day","1w":"Week","1M":"Month"},requiredCredentials:{apiKey:!0,secret:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/34487620-3139a7b0-efe6-11e7-90f5-e520cef74451.jpg",api:{mobile:"https://public-api.lykke.com/api",public:"https://hft-api.lykke.com/api",private:"https://hft-api.lykke.com/api"},test:{mobile:"https://public-api.lykke.com/api",public:"https://hft-service-dev.lykkex.net/api",private:"https://hft-service-dev.lykkex.net/api"},www:"https://www.lykke.com",doc:["https://hft-api.lykke.com/swagger/ui/","https://www.lykke.com/lykke_api"],fees:"https://www.lykke.com/trading-conditions"},api:{mobile:{get:["AssetPairs/rate","AssetPairs/rate/{assetPairId}","AssetPairs/dictionary/{market}","Assets/dictionary","Candles/history/{market}/available","Candles/history/{market}/{assetPair}/{period}/{type}/{from}/{to}","Company/ownershipStructure","Company/registrationsCount","IsAlive","Market","Market/{market}","Market/capitalization/{market}","OrderBook","OrderBook/{assetPairId}","Trades/{AssetPairId}","Trades/Last/{assetPair}/{n}"],post:["AssetPairs/rate/history","AssetPairs/rate/history/{assetPairId}"]},public:{get:["AssetPairs","AssetPairs/{id}","IsAlive","OrderBooks","OrderBooks/{AssetPairId}"]},private:{get:["Orders","Orders/{id}","Wallets","History/trades"],post:["Orders/limit","Orders/market","Orders/{id}/Cancel","Orders/v2/market","Orders/v2/limit","Orders/stoplimit","Orders/bulk"],delete:["Orders","Orders/{id}"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:0,taker:0},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:.001},deposit:{BTC:0}}},commonCurrencies:{XPD:"Lykke XPD"}})}},{key:"parseTrade",value:function(e,t){var r=this.safeString(e,"AssetPairId"),i=this.safeSymbol(r,t),n=this.safeString2(e,"id","Id"),a=this.safeString(e,"OrderId"),s=this.parse8601(this.safeString2(e,"dateTime","DateTime")),o=this.safeFloat2(e,"price","Price"),c=this.safeFloat2(e,"volume","Amount"),u=this.safeStringLower(e,"action");void 0===u&&(u=c<0?"sell":"buy");var d=o*(c=Math.abs(c)),h={cost:0,currency:t.quote};return{id:n,info:e,timestamp:s,datetime:this.iso8601(s),symbol:i,type:void 0,order:a,side:u,takerOrMaker:void 0,price:o,amount:c,cost:d,fee:h}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),void 0===i&&(i=100),o={AssetPairId:s.id,skip:0,take:i},e.next=10,this.mobileGetTradesAssetPairId(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==i&&(s.take=i),void 0!==t&&(o=this.market(t),s.assetPairId=o.id),e.next=12,this.privateGetHistoryTrades(this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetWallets(t);case 5:for(r=e.sent,i={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"AssetId"),c=this.safeCurrencyCode(o),(u=this.account()).total=this.safeFloat(s,"Balance"),u.used=this.safeFloat(s,"Reserved"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},i={id:t},e.next=5,this.privateDeleteOrdersId(this.extend(i,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return i={},a=void 0,void 0!==t&&(a=this.market(t),i.assetPairId=a.id),e.next=9,this.privateDeleteOrders(this.extend(i,r));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={AssetPairId:c.id,OrderAction:this.capitalize(i),Volume:a,Asset:c.baseId},"limit"===r&&(u.Price=s),d="privatePostOrdersV2"+this.capitalize(r),e.next=10,this[d](this.extend(u,o));case 10:return h=e.sent,l=this.safeString(h,"Id"),s=this.safeFloat(h,"Price"),e.abrupt("return",{id:l,info:h,clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:t,type:r,side:i,price:s,amount:a,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetAssetPairs();case 3:for(t=e.sent,r=[],a=0;a<t.length;a++)s=t[a],o=this.safeString(s,"Id"),c=this.safeString(s,"Name"),u=c.split("/"),d=i(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={price:this.safeInteger(s,"Accuracy"),amount:this.safeInteger(s,"InvertedAccuracy")},r.push({id:o,symbol:v,base:f,quote:p,active:!0,info:s,precision:m,limits:{amount:{min:Math.pow(10,-m.amount),max:Math.pow(10,m.amount)},price:{min:Math.pow(10,-m.price),max:Math.pow(10,m.price)},cost:{min:void 0,max:void 0}},baseId:void 0,quoteId:void 0});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"lastPrice");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:void 0,quoteVolume:this.safeFloat(e,"volume24H"),info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market:i.id},e.next=7,this.mobileGetMarketMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open",Pending:"open",InOrderBook:"open",Processing:"open",Matched:"closed",Cancelled:"canceled",Rejected:"rejected",Replaced:"canceled",Placed:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"Status")),i=this.safeString(e,"AssetPairId"),n=this.safeSymbol(i,t),a=this.parse8601(this.safeString(e,"LastMatchTime")),s=void 0;"Registered"in e&&e.Registered?s=this.parse8601(e.Registered):"CreatedAt"in e&&e.CreatedAt&&(s=this.parse8601(e.CreatedAt));var o=this.safeFloat(e,"Price"),c=void 0,u=this.safeFloat(e,"Volume");u<0?(c="sell",u=Math.abs(u)):c="buy";var d=Math.abs(this.safeFloat(e,"RemainingVolume")),h=this.safeString(e,"Id");return this.safeOrder({info:e,id:h,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:a,symbol:n,type:void 0,timeInForce:void 0,postOnly:void 0,side:c,price:o,stopPrice:void 0,cost:void 0,average:void 0,amount:u,filled:void 0,remaining:d,status:r,fee:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privateGetOrdersId(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.privateGetOrders(a);case 8:return s=e.sent,o=void 0,void 0!==t&&(o=this.market(t)),e.abrupt("return",this.parseOrders(s,o,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"InOrderBook"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"Matched"},e.next=7,this.fetchOrders(t,r,i,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetOrderBooksAssetPairId(this.extend({AssetPairId:this.marketId(t)},r));case 6:for(i=e.sent,a={timestamp:void 0,bids:[],asks:[]},s=void 0,o=0;o<i.length;o++)(c=i[o]).IsBuy?a.bids=this.arrayConcat(a.bids,c.Prices):a.asks=this.arrayConcat(a.asks,c.Prices),u=this.parse8601(c.Timestamp),s=void 0===s?u:Math.max(s,u);return e.abrupt("return",this.parseOrderBook(a,s,"bids","asks","Price","Volume"));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=this.safeFloat(e,t),n=this.safeFloat(e,r);return n<0&&(n=-n),[i,n]}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"mobile"===t||"public"===t?Object.keys(o).length&&(s+="?"+this.urlencode(o)):"private"===t&&("GET"!==r&&"DELETE"!==r||Object.keys(o).length&&(s+="?"+this.urlencode(o)),this.checkRequiredCredentials(),n={"api-key":this.apiKey,Accept:"application/json","Content-Type":"application/json"},"POST"===r&&Object.keys(i).length&&(a=this.json(i))),{url:s,method:r,body:a,headers:n}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.InvalidOrder;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"mercado",name:"Mercado Bitcoin",countries:["BR"],rateLimit:1e3,version:"v3",has:{cancelOrder:!0,CORS:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchMyTrades:"emulated",fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!1,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","6h":"6h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","2w":"2w"},urls:{logo:"https://user-images.githubusercontent.com/1294454/27837060-e7c58714-60ea-11e7-9192-f05e86adb83f.jpg",api:{public:"https://www.mercadobitcoin.net/api",private:"https://www.mercadobitcoin.net/tapi",v4Public:"https://www.mercadobitcoin.com.br/v4"},www:"https://www.mercadobitcoin.com.br",doc:["https://www.mercadobitcoin.com.br/api-doc","https://www.mercadobitcoin.com.br/trade-api"]},api:{public:{get:["coins","{coin}/orderbook/","{coin}/ticker/","{coin}/trades/","{coin}/trades/{from}/","{coin}/trades/{from}/{to}","{coin}/day-summary/{year}/{month}/{day}/"]},private:{post:["cancel_order","get_account_info","get_order","get_withdrawal","list_system_messages","list_orders","list_orderbook","place_buy_order","place_sell_order","place_market_buy_order","place_market_sell_order","withdraw_coin"]},v4Public:{get:["{coin}/candle/"]}},fees:{trading:{maker:.003,taker:.007}},options:{limits:{BTC:.001,BCH:.001,ETH:.01,LTC:.01,XRP:.1}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetCoins(t);case 3:for(r=e.sent,n=[],a=this.safeValue(this.options,"limits",{}),s=0;s<r.length;s++)o=r[s],c=o,u="BRL",d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,f=h+d,p={amount:8,price:5},n.push({id:f,symbol:l,base:d,quote:h,baseId:c,quoteId:u,active:void 0,info:o,precision:p,limits:{amount:{min:this.safeFloat(a,c),max:void 0},price:{min:1/Math.pow(10,p.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={coin:n.base},e.next=8,this.publicGetCoinOrderbook(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseOrderBook(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={coin:n.base},e.next=7,this.publicGetCoinTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"ticker",{}),c=this.safeTimestamp(o,"date"),u=this.safeFloat(o,"last"),e.abrupt("return",{symbol:t,timestamp:c,datetime:this.iso8601(c),high:this.safeFloat(o,"high"),low:this.safeFloat(o,"low"),bid:this.safeFloat(o,"buy"),bidVolume:void 0,ask:this.safeFloat(o,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:u,last:u,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(o,"vol"),quoteVolume:void 0,info:o});case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp2(e,"date","executed_timestamp"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString2(e,"tid","operation_id"),a=void 0,s=this.safeString(e,"type"),o=this.safeFloat(e,"price"),c=this.safeFloat2(e,"amount","quantity"),u=void 0;void 0!==o&&void 0!==c&&(u=o*c);var d=this.safeFloat(e,"fee_rate"),h=void 0;return void 0!==d&&(h={cost:d,currency:void 0}),{id:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,order:void 0,type:a,side:s,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o="publicGetCoinTrades",c={coin:s.base},void 0!==r&&(o+="From",c.from=parseInt(r/1e3)),void 0!==this.safeInteger(a,"to")&&(o+="To"),e.next=13,this[o](this.extend(c,a));case 13:return u=e.sent,e.abrupt("return",this.parseTrades(u,s,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetAccountInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"response_data",{}),a=this.safeValue(n,"balance",{}),s={info:r},o=Object.keys(a),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),u in a&&(h=this.safeValue(a,u,{}),(l=this.account()).free=this.safeFloat(h,"available"),l.total=this.safeFloat(h,"total"),s[d]=l);return e.abrupt("return",this.parseBalance(s));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:if(c={coin_pair:this.marketId(t)},u=this.capitalize(n)+"Order","limit"!==r){e.next=12;break}u="privatePostPlace"+u,c.limit_price=this.priceToPrecision(t,s),c.quantity=this.amountToPrecision(t,a),e.next=20;break;case 12:if(u="privatePostPlaceMarket"+u,"buy"!==n){e.next=19;break}if(void 0!==s){e.next=16;break}throw new v(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount");case 16:c.cost=this.priceToPrecision(t,a*s),e.next=20;break;case 19:c.quantity=this.amountToPrecision(t,a);case 20:return e.next=22,this[u](this.extend(c,o));case 22:return d=e.sent,e.abrupt("return",{info:d,id:d.response_data.order.order_id.toString()});case 24:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder () requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={coin_pair:a.id,order_id:t},e.next=10,this.privatePostCancelOrder(this.extend(s,n));case 10:return o=e.sent,c=this.safeValue(o,"response_data",{}),u=this.safeValue(c,"order",{}),e.abrupt("return",this.parseOrder(u,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({2:"open",3:"canceled",4:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=void 0;"order_type"in e&&(i=1===e.order_type?"buy":"sell");var n=this.parseOrderStatus(this.safeString(e,"status")),a=this.safeString(e,"coin_pair");t=this.safeMarket(a,t);var s=this.safeTimestamp(e,"created_timestamp"),o={cost:this.safeFloat(e,"fee"),currency:t.quote},c=this.safeFloat(e,"limit_price"),u=this.safeFloat(e,"executed_price_avg"),d=this.safeFloat(e,"quantity"),h=this.safeFloat(e,"executed_quantity"),l=d-h,f=h*u,p=this.safeTimestamp(e,"updated_timestamp"),v=this.safeValue(e,"operations",[]),m=this.parseTrades(v,t,void 0,void 0,{side:i,order:r});return{info:e,id:r,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:p,symbol:t.symbol,type:"limit",timeInForce:void 0,postOnly:void 0,side:i,price:c,stopPrice:void 0,cost:f,average:u,amount:d,filled:h,remaining:l,status:n,fee:o,trades:m}}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder () requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={coin_pair:a.id,order_id:parseInt(t)},e.next=10,this.privatePostGetOrder(this.extend(s,n));case 10:return o=e.sent,c=this.safeValue(o,"response_data",{}),u=this.safeValue(c,"order"),e.abrupt("return",this.parseOrder(u,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={coin:o.id,quantity:r.toFixed(10),address:n},"BRL"!==t){e.next=13;break}if("account_ref"in s){e.next=11;break}throw new p(this.id+" withdraw() requires account_ref parameter to withdraw "+t);case 11:e.next=24;break;case 13:if("LTC"===t){e.next=24;break}if("tx_fee"in s){e.next=17;break}throw new p(this.id+" withdraw() requires tx_fee parameter to withdraw "+t);case 17:if("XRP"!==t){e.next=24;break}if(void 0!==a){e.next=23;break}if("destination_tag"in s){e.next=21;break}throw new p(this.id+" withdraw() requires a tag argument or destination_tag parameter to withdraw "+t);case 21:e.next=24;break;case 23:c.destination_tag=a;case 24:return e.next=26,this.privatePostWithdrawCoin(this.extend(c,s));case 26:return u=e.sent,e.abrupt("return",{info:u,id:u.response_data.withdrawal.id});case 28:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"timestamp"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={precision:this.timeframes[r],coin:o.id.toLowerCase()},void 0!==a&&void 0!==n?(c.from=parseInt(n/1e3),c.to=this.sum(c.from,a*this.parseTimeframe(r))):void 0!==n?(c.from=parseInt(n/1e3),c.to=this.sum(this.seconds(),1)):void 0!==a&&(c.to=this.seconds(),c.from=c.to-a*this.parseTimeframe(r)),e.next=11,this.v4PublicGetCoinCandle(this.extend(c,s));case 11:return u=e.sent,d=this.safeValue(u,"candles",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders () requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={coin_pair:s.id},e.next=12,this.privatePostListOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"response_data",{}),d=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOpenOrders () requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={coin_pair:s.id,status_list:"[2]"},e.next=12,this.privatePostListOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"response_data",{}),d=this.safeValue(u,"orders",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades () requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={coin_pair:s.id,has_fills:!0},e.next=12,this.privatePostListOrders(this.extend(o,a));case 12:return c=e.sent,u=this.safeValue(c,"response_data",{}),d=this.safeValue(u,"orders",[]),h=this.parseOrders(d,s,r,n),l=this.ordersToTrades(h),e.abrupt("return",this.filterBySymbolSinceLimit(l,t,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ordersToTrades",value:function(e){for(var t=[],r=0;r<e.length;r++)for(var i=this.safeValue(e[r],"trades",[]),n=0;n<i.length;n++)t.push(i[n]);return t}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/",o=this.omit(i,this.extractParams(e));if("public"===t||"v4Public"===t)s+=this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),s+=this.version+"/";var c=this.nonce();a=this.urlencode(this.extend({tapi_method:e,tapi_nonce:c},i));var u="/tapi/"+this.version+"/?"+a;n={"Content-Type":"application/x-www-form-urlencoded","TAPI-ID":this.apiKey,"TAPI-MAC":this.hmac(this.encode(u),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("error_message"in(c=e.sent))){e.next=10;break}throw new f(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"mixcoins",name:"MixCoins",countries:["GB","HK"],rateLimit:1500,version:"v1",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460810-1dd06c00-c616-11ea-9276-956f400d6ffa.jpg",api:"https://mixcoins.com/api",www:"https://mixcoins.com",doc:"https://mixcoins.com/help/api/"},api:{public:{get:["ticker/","trades/","depth/"]},private:{post:["cancel","info","orders","order","transactions","trade"]}},markets:{"BTC/USDT":{id:"btc_usdt",symbol:"BTC/USDT",base:"BTC",quote:"USDT",baseId:"btc",quoteId:"usdt",maker:.0015,taker:.0025},"ETH/BTC":{id:"eth_btc",symbol:"ETH/BTC",base:"ETH",quote:"BTC",baseId:"eth",quoteId:"btc",maker:.001,taker:.0015},"BCH/BTC":{id:"bch_btc",symbol:"BCH/BTC",base:"BCH",quote:"BTC",baseId:"bch",quoteId:"btc",maker:.001,taker:.0015},"LSK/BTC":{id:"lsk_btc",symbol:"LSK/BTC",base:"LSK",quote:"BTC",baseId:"lsk",quoteId:"btc",maker:.0015,taker:.0025},"BCH/USDT":{id:"bch_usdt",symbol:"BCH/USDT",base:"BCH",quote:"USDT",baseId:"bch",quoteId:"usdt",maker:.001,taker:.0015},"ETH/USDT":{id:"eth_usdt",symbol:"ETH/USDT",base:"ETH",quote:"USDT",baseId:"eth",quoteId:"usdt",maker:.001,taker:.0015}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostInfo(t);case 5:for(r=e.sent,n=this.safeValue(r.result,"wallet"),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),d=this.safeValue(n,c,{}),(h=this.account()).free=this.safeFloat(d,"avail"),h.used=this.safeFloat(d,"lock"),a[u]=h;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={market:this.marketId(t)},e.next=7,this.publicGetDepth(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a.result));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n={market:this.marketId(t)},e.next=6,this.publicGetTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeValue(a,"result"),o=this.milliseconds(),c=this.safeFloat(s,"last"),e.abrupt("return",{symbol:t,timestamp:o,datetime:this.iso8601(o),high:this.safeFloat(s,"high"),low:this.safeFloat(s,"low"),bid:this.safeFloat(s,"buy"),bidVolume:void 0,ask:this.safeFloat(s,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:c,last:c,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(s,"vol"),quoteVolume:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"date"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeString(e,"id"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=void 0;return void 0!==a&&void 0!==s&&(o=a*s),{id:n,info:e,timestamp:r,datetime:this.iso8601(r),symbol:i,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={market:this.marketId(t),op:n,amount:a},"market"===r?(c.order_type=1,c.price=s):c.order_type=0,e.next=8,this.privatePostTrade(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",{info:u,id:u.result.id.toString()});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostCancel(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+e;if("public"===t)Object.keys(i).length&&(s+="?"+this.urlencode(i));else{this.checkRequiredCredentials();var o=this.nonce();a=this.urlencode(this.extend({nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.secret,"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("status"in(c=e.sent))){e.next=11;break}if(200!==c.status){e.next=11;break}return e.abrupt("return",c);case 11:throw new l(this.id+" "+this.json(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.AuthenticationError,v=l.InsufficientFunds,m=l.BadSymbol,y=l.OrderNotFound,g=r(13).TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"ndax",name:"NDAX",countries:["US"],rateLimit:1e3,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTrades:!0},timeframes:{"1m":"60","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2419200","4M":"9676800"},urls:{logo:"https://user-images.githubusercontent.com/1294454/108623144-67a3ef00-744e-11eb-8140-75c6b851e945.jpg",test:{public:"https://ndaxmarginstaging.cdnhop.net:8443/AP",private:"https://ndaxmarginstaging.cdnhop.net:8443/AP"},api:{public:"https://api.ndax.io:8443/AP",private:"https://api.ndax.io:8443/AP"},www:"https://ndax.io",doc:["https://apidoc.ndax.io/"],fees:"https://ndax.io/fees",referral:"https://one.ndax.io/bfQiSL"},api:{public:{get:["Activate2FA","Authenticate2FA","AuthenticateUser","GetL2Snapshot","GetLevel1","GetValidate2FARequiredEndpoints","LogOut","GetTickerHistory","GetProduct","GetProducts","GetInstrument","GetInstruments","Ping","trades","GetLastTrades","SubscribeLevel1","SubscribeLevel2","SubscribeTicker","SubscribeTrades","SubscribeBlockTrades","UnsubscribeBlockTrades","UnsubscribeLevel1","UnsubscribeLevel2","UnsubscribeTicker","UnsubscribeTrades","Authenticate"]},private:{get:["GetUserAccountInfos","GetUserAccounts","GetUserAffiliateCount","GetUserAffiliateTag","GetUserConfig","GetAllUnredactedUserConfigsForUser","GetUnredactedUserConfigByKey","GetUserDevices","GetUserReportTickets","GetUserReportWriterResultRecords","GetAccountInfo","GetAccountPositions","GetAllAccountConfigs","GetTreasuryProductsForAccount","GetAccountTrades","GetAccountTransactions","GetOpenTradeReports","GetAllOpenTradeReports","GetTradesHistory","GetOpenOrders","GetOpenQuotes","GetOrderFee","GetOrderHistory","GetOrdersHistory","GetOrderStatus","GetOmsFeeTiers","GetAccountDepositTransactions","GetAccountWithdrawTransactions","GetAllDepositRequestInfoTemplates","GetDepositInfo","GetDepositRequestInfoTemplate","GetDeposits","GetDepositTicket","GetDepositTickets","GetOMSWithdrawFees","GetWithdrawFee","GetWithdraws","GetWithdrawTemplate","GetWithdrawTemplateTypes","GetWithdrawTicket","GetWithdrawTickets"],post:["AddUserAffiliateTag","CancelUserReport","RegisterNewDevice","SubscribeAccountEvents","UpdateUserAffiliateTag","GenerateTradeActivityReport","GenerateTransactionActivityReport","GenerateTreasuryActivityReport","ScheduleTradeActivityReport","ScheduleTransactionActivityReport","ScheduleTreasuryActivityReport","CancelAllOrders","CancelOrder","CancelQuote","CancelReplaceOrder","CreateQuote","ModifyOrder","SendOrder","SubmitBlockTrade","UpdateQuote","CancelWithdraw","CreateDepositTicket","CreateWithdrawTicket","SubmitDepositTicketComment","SubmitWithdrawTicketComment","GetOrderHistoryByOrderId"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.0025}},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},precisionMode:g,exceptions:{exact:{Not_Enough_Funds:v,"Server Error":f,"Resource Not Found":y},broad:{"Invalid InstrumentId":m}},options:{omsId:1,orderTypes:{Market:1,Limit:2,StopMarket:3,StopLimit:4,TrailingStopMarket:5,TrailingStopLimit:6,BlockTrade:7}}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},r=this.safeInteger(this.options,"omsId",1),n={omsId:r},e.next=5,this.publicGetGetProducts(this.extend(n,t));case 5:for(a=e.sent,s={},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"ProductId"),d=this.safeString(c,"ProductFullName"),h=this.safeString(c,"ProductType"),l=this.safeCurrencyCode(this.safeString(c,"Product")),f=this.safeFloat(c,"TickSize"),p=this.safeValue(c,"IsDisabled"),v=!p,s[l]={id:u,name:d,code:l,type:h,precision:f,info:c,active:v,fee:void 0,limits:this.limits};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r=this.safeInteger(this.options,"omsId",1),n={omsId:r},e.next=5,this.publicGetGetInstruments(this.extend(n,t));case 5:for(a=e.sent,s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"InstrumentId"),d=this.safeString(c,"Product1"),h=this.safeString(c,"Product2"),l=this.safeCurrencyCode(this.safeString(c,"Product1Symbol")),f=this.safeCurrencyCode(this.safeString(c,"Product2Symbol")),p=l+"/"+f,v={amount:this.safeFloat(c,"QuantityIncrement"),price:this.safeFloat(c,"PriceIncrement")},m=this.safeString(c,"SessionStatus"),y=this.safeValue(c,"IsDisable"),g=!(!("Running"===m)||y),s.push({id:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,info:c,active:g,precision:v,limits:{amount:{min:this.safeFloat(c,"MinimumQuantity"),max:void 0},price:{min:this.safeFloat(c,"MinimumPrice"),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8,s=void 0,o={bids:[],asks:[],timestamp:void 0,datetime:void 0,nonce:void 0},c=0;c<e.length;c++){var u=e[c];if(void 0===t)t=this.safeInteger(u,2);else{var d=this.safeInteger(u,2);t=Math.max(t,d)}if(void 0===s)s=this.safeInteger(u,0);else{var h=this.safeInteger(u,0);s=Math.max(s,h)}var l=this.parseBidAsk(u,n,a),f=this.safeValue(u,9),p=f?i:r;o[p].push(l)}return o.bids=this.sortBy(o.bids,0,!0),o.asks=this.sortBy(o.asks,0),o.timestamp=t,o.datetime=this.iso8601(t),o.nonce=s,o}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},a=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return s=this.market(t),r=void 0===r?100:r,o={omsId:a,InstrumentId:s.id,Depth:r},e.next=10,this.publicGetGetL2Snapshot(this.extend(o,n));case 10:return c=e.sent,e.abrupt("return",this.parseOrderBook(c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"TimeStamp"),i=this.safeString(e,"InstrumentId"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"LastTradedPx"),s=this.safeFloat(e,"Rolling24HrPxChangePercent"),o=this.safeFloat(e,"Rolling24HrPxChange"),c=this.safeFloat(e,"SessionOpen"),u=void 0;void 0!==a&&void 0!==o&&(u=this.sum(a,c)/2);var d=this.safeFloat(e,"Rolling24HrVolume"),h=this.safeFloat(e,"Rolling24HrNotional"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"SessionHigh"),low:this.safeFloat(e,"SessionLow"),bid:this.safeFloat(e,"BestBid"),bidVolume:void 0,ask:this.safeFloat(e,"BestOffer"),askVolume:void 0,vwap:l,open:c,close:a,last:a,previousClose:void 0,change:o,percentage:s,average:u,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},n=this.safeInteger(this.options,"omsId",1),e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={omsId:n,InstrumentId:a.id},e.next=8,this.publicGetGetLevel1(this.extend(s,r));case 8:return o=e.sent,e.abrupt("return",this.parseTicker(o,a));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),this.safeFloat(e,3),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},o=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return c=this.market(t),u={omsId:o,InstrumentId:c.id,Interval:this.timeframes[r]},d=this.parseTimeframe(r),h=this.milliseconds(),void 0===n?void 0!==a&&(u.FromDate=this.ymd(h-d*a*1e3),u.ToDate=this.ymd(h)):(u.FromDate=this.ymd(n),u.ToDate=void 0===a?this.ymd(h):this.ymd(this.sum(n,d*a*1e3))),e.next=14,this.publicGetGetTickerHistory(this.extend(u,s));case 14:return l=e.sent,e.abrupt("return",this.parseOHLCVs(l,c,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,c=void 0,u=void 0,d=void 0,h=void 0,l=void 0;if(Array.isArray(e)){r=this.safeFloat(e,3),i=this.safeFloat(e,2),void 0!==r&&void 0!==i&&(n=r*i),a=this.safeInteger(e,6),s=this.safeString(e,0),o=this.safeInteger(e,1);var f=this.safeValue(e,8);c=f?"sell":"buy",u=this.safeString(e,4)}else{a=this.safeInteger2(e,"TradeTimeMS","ReceiveTime"),s=this.safeString(e,"TradeId"),u=this.safeString2(e,"OrderId","OrigOrderId"),o=this.safeString2(e,"InstrumentId","Instrument"),r=this.safeFloat(e,"Price"),i=this.safeFloat(e,"Quantity"),n=this.safeFloat2(e,"Value","GrossValueExecuted"),d=this.safeStringLower(e,"MakerTaker"),c=this.safeStringLower(e,"Side"),l=this.safeStringLower(e,"OrderType");var p=this.safeFloat(e,"Fee");if(void 0!==p){var v=this.safeString(e,"FeeProductId"),m=this.safeCurrencyCode(v);h={cost:p,currency:m}}}var y=this.safeSymbol(o,t);return{info:e,id:s,symbol:y,timestamp:a,datetime:this.iso8601(a),order:u,type:l,side:c,takerOrMaker:d,price:r,amount:i,cost:n,fee:h}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={omsId:s,InstrumentId:o.id},void 0!==n&&(c.Count=n),e.next=11,this.publicGetGetLastTrades(this.extend(c,a));case 11:return u=e.sent,e.abrupt("return",this.parseTrades(u,o,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:{},r=this.safeInteger(this.options,"omsId",1),this.checkRequiredCredentials(),n={omsId:r,UserId:this.uid,UserName:"igor@ccxt.trade"},e.next=6,this.privateGetGetUserAccounts(this.extend(n,t));case 6:for(a=e.sent,s=[],o=0;o<a.length;o++)c=this.safeString(a,o),s.push({id:c,type:void 0,currency:void 0,info:c});return e.abrupt("return",s);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},r=this.safeInteger(this.options,"omsId",1),e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return n=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),a=this.safeInteger2(t,"accountId","AccountId",n),t=this.omit(t,["accountId","AccountId"]),s={omsId:r,AccountId:a},e.next=12,this.privateGetGetAccountPositions(this.extend(s,t));case 12:for(o=e.sent,c={info:o},u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"ProductId"),l=this.safeCurrencyCode(h),(f=this.account()).total=this.safeFloat(d,"Amount"),f.used=this.safeFloat(d,"Hold"),c[l]=f;return e.abrupt("return",this.parseBalance(c));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({Trade:"trade",Deposit:"transaction",Withdraw:"transaction",Transfer:"transfer",OrderHold:"trade",WithdrawHold:"transaction",DepositHold:"transaction",MarginHold:"trade",ManualHold:"trade",ManualEntry:"trade",MarginAcquisition:"trade",MarginRelinquish:"trade",MarginQuoteHold:"trade"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"TransactionId"),i=this.safeString(e,"AccountId"),n=this.safeString(e,"ReferenceId"),a=this.safeString(e,"Counterparty"),s=this.parseLedgerEntryType(this.safeString(e,"ReferenceType")),o=this.safeString(e,"ProductId"),c=this.safeCurrencyCode(o,t),u=this.safeFloat(e,"CR"),d=this.safeFloat(e,"DR"),h=void 0,l=void 0;u>0?(h=u,l="in"):d>0&&(h=d,l="out");var f=this.safeInteger(e,"TimeStamp"),p=void 0,v=this.safeFloat(e,"Balance");"out"===l?p=this.sum(v,h):"in"===l&&(p=Math.max(0,v-h));var m="ok";return{info:e,id:r,direction:l,account:i,referenceId:n,referenceAccount:a,type:s,currency:c,amount:h,before:p,after:v,status:m,timestamp:f,datetime:this.iso8601(f),fee:void 0}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),u={omsId:s,AccountId:c},void 0!==n&&(u.Depth=n),e.next=16,this.privateGetGetAccountTransactions(this.extend(u,a));case 16:return d=e.sent,h=void 0,void 0!==t&&(h=this.currency(t)),e.abrupt("return",this.parseLedger(d,h,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Accepted:"open",Rejected:"rejected",Working:"open",Canceled:"canceled",Expired:"expired",FullyExecuted:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"ReplacementOrderId","OrderId"),i=this.safeInteger(e,"ReceiveTime"),n=this.safeInteger(e,"LastUpdatedTime"),a=this.safeString(e,"Instrument"),s=this.safeSymbol(a,t),o=this.safeStringLower(e,"Side"),c=this.safeStringLower(e,"OrderType"),u=this.safeString2(e,"ReplacementClOrdId","ClientOrderId"),d=this.safeFloat(e,"Price",0);d=d>0?d:void 0;var h=this.safeFloat(e,"OrigQuantity"),l=this.safeFloat(e,"QuantityExecuted"),f=this.safeFloat(e,"GrossValueExecuted"),p=this.safeFloat(e,"AvgPrice",0);p=p>0?p:void 0;var v=this.safeFloat(e,"StopPrice",0);v=v>0?v:void 0;var m=void 0,y=this.parseOrderStatus(this.safeString(e,"OrderState")),g=void 0,b=void 0;return this.safeOrder({id:r,clientOrderId:u,info:e,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:n,status:y,symbol:s,type:c,timeInForce:m,postOnly:void 0,side:o,price:d,stopPrice:v,cost:f,amount:h,filled:l,average:p,remaining:void 0,fee:g,trades:b})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},c=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return u=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),d=this.safeInteger2(o,"accountId","AccountId",u),h=this.safeInteger2(o,"ClientOrderId","clientOrderId"),o=this.omit(o,["accountId","AccountId","clientOrderId","ClientOrderId"]),l=this.market(t),f="buy"===n?0:1,p={InstrumentId:parseInt(l.id),omsId:c,AccountId:d,TimeInForce:1,Side:f,Quantity:parseFloat(this.amountToPrecision(t,a)),OrderType:this.safeInteger(this.options.orderTypes,this.capitalize(r))},void 0!==s&&(p.LimitPrice=parseFloat(this.priceToPrecision(t,s))),void 0!==h&&(p.ClientOrderId=h),e.next=18,this.privatePostSendOrder(this.extend(p,o));case 18:return v=e.sent,e.abrupt("return",this.parseOrder(v,l));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a,s){var o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=y.length>5&&void 0!==y[5]?y[5]:void 0,c=y.length>6&&void 0!==y[6]?y[6]:{},u=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return d=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),h=this.safeInteger2(c,"accountId","AccountId",d),l=this.safeInteger2(c,"ClientOrderId","clientOrderId"),c=this.omit(c,["accountId","AccountId","clientOrderId","ClientOrderId"]),f=this.market(r),p="buy"===a?0:1,v={OrderIdToReplace:parseInt(t),InstrumentId:parseInt(f.id),omsId:u,AccountId:h,TimeInForce:1,Side:p,Quantity:parseFloat(this.amountToPrecision(r,s)),OrderType:this.safeInteger(this.options.orderTypes,this.capitalize(n))},void 0!==o&&(v.LimitPrice=parseFloat(this.priceToPrecision(r,o))),void 0!==l&&(v.ClientOrderId=l),e.next=18,this.privatePostCancelReplaceOrder(this.extend(v,c));case 18:return m=e.sent,e.abrupt("return",this.parseOrder(m,f));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),u={omsId:s,AccountId:c},d=void 0,void 0!==t&&(d=this.market(t),u.InstrumentId=d.id),void 0!==r&&(u.StartTimeStamp=r),void 0!==n&&(u.Depth=n),e.next=19,this.privateGetGetTradesHistory(this.extend(u,a));case 19:return h=e.sent,e.abrupt("return",this.parseTrades(h,d,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},n=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),s=this.safeInteger2(r,"accountId","AccountId",a),r=this.omit(r,["accountId","AccountId"]),o={omsId:n,AccountId:s},void 0!==t&&(c=this.market(t),o.IntrumentId=c.id),e.next=14,this.privatePostCancelAllOrders(this.extend(o,r));case 14:return u=e.sent,e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},a=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return s=void 0,void 0!==r&&(s=this.market(r)),o={omsId:a},void 0!==(c=this.safeInteger2(n,"clientOrderId","ClOrderId"))?o.ClOrderId=c:o.OrderId=parseInt(t),n=this.omit(n,["clientOrderId","ClOrderId"]),e.next=15,this.privatePostCancelOrder(this.extend(o,n));case 15:return u=e.sent,d=this.parseOrder(u,s),e.abrupt("return",this.extend(d,{id:t,clientOrderId:c}));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),u=void 0,void 0!==t&&(u=this.market(t)),d={omsId:s,AccountId:c},e.next=17,this.privateGetGetOpenOrders(this.extend(d,a));case 17:return h=e.sent,e.abrupt("return",this.parseOrders(h,u,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),u={omsId:s,AccountId:c},d=void 0,void 0!==t&&(d=this.market(t),u.InstrumentId=d.id),void 0!==r&&(u.StartTimeStamp=r),void 0!==n&&(u.Depth=n),e.next=19,this.privateGetGetOrdersHistory(this.extend(u,a));case 19:return h=e.sent,e.abrupt("return",this.parseOrders(h,d,r,n));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},a=this.safeInteger(this.options,"omsId",1),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return s=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),o=this.safeInteger2(n,"accountId","AccountId",s),n=this.omit(n,["accountId","AccountId"]),c=void 0,void 0!==r&&(c=this.market(r)),u={omsId:a,AccountId:o,OrderId:parseInt(t)},e.next=15,this.privateGetGetOrderStatus(this.extend(u,n));case 15:return d=e.sent,e.abrupt("return",this.parseOrder(d,c));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},o=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return c=void 0,void 0!==r&&(c=this.market(r)),u={OMSId:parseInt(o),OrderId:t},e.next=14,this.privatePostGetOrderHistoryByOrderId(this.extend(u,s));case 14:return d=e.sent,h=this.groupBy(d,"ChangeReason"),l=this.safeValue(h,"Trade",[]),e.abrupt("return",this.parseTrades(l,c,n,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},n=this.safeInteger(this.options,"omsId",1),e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return a=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),s=this.safeInteger2(r,"accountId","AccountId",a),r=this.omit(r,["accountId","AccountId"]),o=this.currency(t),c={omsId:n,AccountId:s,ProductId:o.id,GenerateNewKey:!1},e.next=13,this.privateGetGetDepositInfo(this.extend(c,r));case 13:return u=e.sent,e.abrupt("return",this.parseDepositAddress(u,o));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"DepositInfo"),i=JSON.parse(r),n=i.length,a=this.safeString(i,n-1),s=a.split("?memo="),o=this.safeString(s,0),c=this.safeString(s,1),u=void 0;return void 0!==t&&(u=t.code),this.checkAddress(o),{currency:u,address:o,tag:c,info:e}}},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},n={GenerateNewKey:!0},e.next=4,this.fetchDepositAddress(t,this.extend(n,r));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),u=void 0,void 0!==t&&(u=this.currency(t)),d={omsId:s,AccountId:c},e.next=17,this.privateGetGetDeposits(this.extend(d,a));case 17:return h=e.sent,e.abrupt("return",this.parseTransactions(h,u,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},s=this.safeInteger(this.options,"omsId",1),e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return o=this.safeInteger2(this.options,"accountId","AccountId",parseInt(this.accounts[0].id)),c=this.safeInteger2(a,"accountId","AccountId",o),a=this.omit(a,["accountId","AccountId"]),u=void 0,void 0!==t&&(u=this.currency(t)),d={omsId:s,AccountId:c},e.next=17,this.privateGetGetWithdraws(this.extend(d,a));case 17:return h=e.sent,e.abrupt("return",this.parseTransactions(h,u,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatusByType",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r={deposit:{New:"pending",AdminProcessing:"pending",Accepted:"pending",Rejected:"rejected",SystemProcessing:"pending",FullyProcessed:"ok",Failed:"failed",Pending:"pending",Confirmed:"pending",AmlProcessing:"pending",AmlAccepted:"pending",AmlRejected:"rejected",AmlFailed:"failed",LimitsAccepted:"pending",LimitsRejected:"rejected"},withdrawal:{New:"pending",AdminProcessing:"pending",Accepted:"pending",Rejected:"rejected",SystemProcessing:"pending",FullyProcessed:"ok",Failed:"failed",Pending:"pending",Pending2Fa:"pending",AutoAccepted:"pending",Delayed:"pending",UserCanceled:"canceled",AdminCanceled:"canceled",AmlProcessing:"pending",AmlAccepted:"pending",AmlRejected:"rejected",AmlFailed:"failed",LimitsAccepted:"pending",LimitsRejected:"rejected",Submitted:"pending",Confirmed:"pending",ManuallyConfirmed:"pending",Confirmed2Fa:"pending"}},i=this.safeValue(r,t,{});return this.safeString(i,e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"DepositId"),i=void 0,n=this.safeString(e,"ProductId"),a=this.safeCurrencyCode(n,t),s=void 0,o=void 0;"DepositId"in e?o="deposit":"WithdrawId"in e&&(o="withdrawal");var c=this.safeString(e,"TemplateForm"),u=void 0,d=this.safeInteger(e,"LastUpdateTimeStamp");if(void 0!==c){var h=JSON.parse(c);u=this.safeString(h,"ExternalAddress"),i=this.safeString(h,"TxId"),s=this.safeInteger(h,"TimeSubmitted"),d=this.safeInteger(h,"LastUpdated",d)}var l=u,f=this.parseTransactionStatusByType(this.safeString(e,"TicketStatus"),o),p=this.safeFloat(e,"Amount"),v=this.safeFloat(e,"FeeAmount"),m=void 0;return void 0!==v&&(m={currency:a,cost:v}),{info:e,id:r,txid:i,timestamp:s,datetime:this.iso8601(s),address:u,addressTo:l,addressFrom:void 0,tag:void 0,tagTo:void 0,tagFrom:void 0,type:o,amount:p,currency:a,status:f,updated:d,fee:m}}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();var c=this.nonce().toString(),u=c+this.uid+this.apiKey,d=this.hmac(this.encode(u),this.encode(this.secret));n={Nonce:c,APIKey:this.apiKey,Signature:d,UserId:this.uid},"POST"===r?(n["Content-Type"]="application/json",a=this.json(o)):Object.keys(o).length&&(s+="?"+this.urlencode(o))}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(404===e)throw new p(this.id+" "+a);if(void 0!==s){var u=this.safeString(s,"errormsg");if(void 0!==u&&""!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.PermissionDenied,m=l.BadRequest,y=l.CancelPending,g=l.OrderNotFound,b=l.InsufficientFunds,k=l.RateLimitExceeded,x=l.InvalidOrder,w=l.AccountSuspended,_=l.BadSymbol,O=l.OnMaintenance,T=r(13).TRUNCATE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"novadax",name:"NovaDAX",countries:["BR"],rateLimit:50,version:"v1",has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchAccounts:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrders:!0,fetchOrderTrades:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"ONE_MIN","5m":"FIVE_MIN","15m":"FIFTEEN_MIN","30m":"HALF_HOU","1h":"ONE_HOU","1d":"ONE_DAY","1w":"ONE_WEE","1M":"ONE_MON"},urls:{logo:"https://user-images.githubusercontent.com/1294454/92337550-2b085500-f0b3-11ea-98e7-5794fb07dd3b.jpg",api:{public:"https://api.novadax.com",private:"https://api.novadax.com"},www:"https://www.novadax.com.br",doc:["https://doc.novadax.com/pt-BR/"],fees:"https://www.novadax.com.br/fees-and-limits",referral:"https://www.novadax.com.br/?s=ccxt"},api:{public:{get:["common/symbol","common/symbols","common/timestamp","market/tickers","market/ticker","market/depth","market/trades","market/kline/history"]},private:{get:["orders/get","orders/list","orders/fill","orders/fills","account/getBalance","account/subs","account/subs/balance","account/subs/transfer/record","wallet/query/deposit-withdraw"],post:["orders/create","orders/cancel","account/withdraw/coin","account/subs/transfer"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.005,maker:.003}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{A99999:p,A10001:m,A10002:p,A10003:f,A10004:k,A10005:v,A10006:w,A10007:m,A10011:_,A10012:_,A10013:O,A30001:g,A30002:x,A30003:x,A30004:x,A30005:x,A30006:x,A30007:b,A30008:x,A30009:x,A30010:y,A30011:x,A30012:x},broad:{}},options:{fetchOHLCV:{volume:"amount"}}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetCommonTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeInteger(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetCommonSymbols(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"baseCurrency"),u=this.safeString(o,"quoteCurrency"),d=this.safeString(o,"symbol"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,p={amount:this.safeInteger(o,"amountPrecision"),price:this.safeInteger(o,"pricePrecision"),cost:this.safeInteger(o,"valuePrecision")},v={amount:{min:this.safeFloat(o,"minOrderAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(o,"minOrderValue"),max:void 0}},m=this.safeString(o,"status"),y="ONLINE"===m,n.push({id:d,symbol:f,base:h,quote:l,baseId:c,quoteId:u,precision:p,limits:v,info:o,active:y});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t,"_"),a=this.safeFloat(e,"open24h"),s=this.safeFloat(e,"lastPrice"),o=void 0,c=void 0,u=void 0;void 0!==s&&void 0!==a&&(o=(c=s-a)/a*100,u=this.sum(s,a)/2);var d=this.safeFloat(e,"baseVolume24h"),h=this.safeFloat(e,"quoteVolume24h"),l=this.vwap(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high24h"),low:this.safeFloat(e,"low24h"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:l,open:a,close:s,last:s,previousClose:void 0,change:c,percentage:o,average:u,baseVolume:d,quoteVolume:h,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetMarketTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"data",[]),s={},o=0;o<a.length;o++)c=this.parseTicker(a[o]),u=c.symbol,s[u]=c;return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.limit=r),e.next=8,this.publicGetMarketDepth(this.extend(a,n));case 8:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeInteger(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,c,"bids","asks"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"orderId"),n=this.safeInteger(e,"timestamp"),a=this.safeStringLower(e,"side"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"volume");void 0===c&&void 0!==o&&void 0!==s&&(c=o*s);var u=this.safeString(e,"symbol"),d=this.safeSymbol(u,t,"_"),h=this.safeStringLower(e,"role"),l=this.safeString(e,"fee"),f=void 0;if(void 0!==l){var p=l.split(" "),v=this.safeString(p,1),m=this.safeCurrencyCode(v);f={cost:this.safeFloat(p,0),currency:m}}return{id:r,order:i,timestamp:n,datetime:this.iso8601(n),symbol:d,type:void 0,side:a,price:s,amount:o,cost:c,takerOrMaker:h,fee:f,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetMarketTrades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,unit:this.timeframes[r]},u=this.parseTimeframe(r),d=this.seconds(),void 0===a&&(a=3e3),void 0===n?(c.from=d-a*u,c.to=d):(h=parseInt(n/1e3),c.from=h,c.to=this.sum(h,a*u)),e.next=14,this.publicGetMarketKlineHistory(this.extend(c,s));case 14:return l=e.sent,f=this.safeValue(l,"data",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(this.options,"fetchOHLCV",{}),r=this.safeString(t,"volume","amount");return[this.safeTimestamp(e,"score"),this.safeFloat(e,"openPrice"),this.safeFloat(e,"highPrice"),this.safeFloat(e,"lowPrice"),this.safeFloat(e,"closePrice"),this.safeFloat(e,r)]}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccountGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",[]),a={info:r},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(o,"available"),d.free=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"hold"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=r.toUpperCase(),d=n.toUpperCase(),h={symbol:c.id,type:u,side:d},"LIMIT"!==u){e.next=13;break}h.price=this.priceToPrecision(t,s),h.amount=this.amountToPrecision(t,a),e.next=33;break;case 13:if("MARKET"!==u){e.next=33;break}if("SELL"!==d){e.next=18;break}h.amount=this.amountToPrecision(t,a),e.next=33;break;case 18:if("BUY"!==d){e.next=33;break}if(l=this.safeFloat(o,"value"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=30;break}if(void 0===s){e.next=26;break}void 0===l&&(l=a*s),e.next=28;break;case 26:if(void 0!==l){e.next=28;break}throw new x(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'value' extra parameter (the exchange-specific behaviour)");case 28:e.next=31;break;case 30:l=void 0===l?a:l;case 31:f=c.precision.price,h.value=this.decimalToPrecision(l,T,f,this.precisionMode);case 33:return e.next=35,this.privatePostOrdersCreate(this.extend(h,o));case 35:return p=e.sent,v=this.safeValue(p,"data",{}),e.abrupt("return",this.parseOrder(v,c));case 38:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privatePostOrdersCancel(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.privateGetOrdersGet(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.fromTimestamp=r),e.next=13,this.privateGetOrdersList(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseOrders(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"SUBMITTED,PROCESSING,PARTIAL_FILLED,CANCELING"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"FILLED,CANCELED,REJECTED"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={id:t},e.next=9,this.privateGetOrdersFill(this.extend(o,s));case 9:return c=e.sent,u=void 0,void 0!==r&&(u=this.market(r)),d=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(d,u,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({SUBMITTED:"open",PROCESSING:"open",PARTIAL_FILLED:"open",CANCELING:"open",FILLED:"closed",CANCELED:"canceled",REJECTED:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeFloat(e,"amount"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"filledValue"),s=this.safeStringLower(e,"type"),o=this.safeStringLower(e,"side"),c=this.parseOrderStatus(this.safeString(e,"status")),u=this.safeInteger(e,"timestamp"),d=this.safeFloat(e,"averagePrice"),h=this.safeFloat(e,"filledAmount"),l=void 0,f=this.safeFloat(e,"filledFee");void 0!==f&&(l={cost:f,currency:void 0});var p=this.safeString(e,"symbol"),v=this.safeSymbol(p,t,"_");return this.safeOrder({id:r,clientOrderId:void 0,info:e,timestamp:u,datetime:this.iso8601(u),lastTradeTimestamp:void 0,symbol:v,type:s,timeInForce:void 0,postOnly:void 0,side:o,price:n,stopPrice:void 0,amount:i,cost:a,average:d,filled:h,remaining:void 0,status:c,fee:l,trades:void 0})}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),c={code:o.id,amount:this.currencyToPrecision(t,r),wallet:n},void 0!==a&&(c.tag=a),e.next=9,this.privatePostAccountWithdrawCoin(this.extend(c,s));case 9:return u=e.sent,e.abrupt("return",this.parseTransaction(u,o));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.privateGetAccountSubs(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",[]),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"subId"),u=this.safeString(o,"subAccount"),a.push({id:c,type:u,currency:void 0,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"coin_in"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"coin_out"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.size=n),e.next=12,this.privateGetWalletQueryDepositWithdraw(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){var t=e.split(" ");e=this.safeString(t,1,e);return this.safeString({Pending:"pending",confirming:"pending",SUCCESS:"ok",FAIL:"failed"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"id","data"),i=this.safeString(e,"type");"COIN_IN"===i?i="deposit":"COIN_OUT"===i&&(i="withdraw");var n=this.safeFloat(e,"amount"),a=this.safeString(e,"address"),s=this.safeString(e,"addressTag"),o=this.safeString(e,"txHash"),c=this.safeInteger(e,"createdAt"),u=this.safeInteger(e,"updatedAt"),d=this.safeString(e,"currency"),h=this.safeCurrencyCode(d,t),l=this.parseTransactionStatus(this.safeString(e,"state"));return{info:e,id:r,currency:h,amount:n,address:a,addressTo:a,addressFrom:void 0,tag:s,tagTo:s,tagFrom:void 0,status:l,type:i,updated:u,txid:o,timestamp:c,datetime:this.iso8601(c),fee:void 0}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.symbol=o.id),void 0!==n&&(s.limit=n),void 0!==r&&(s.fromTimestamp=r),e.next=13,this.privateGetOrdersFills(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.urls.api[t]+s,c=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(c).length&&(o+="?"+this.urlencode(c));else if("private"===t){this.checkRequiredCredentials();var u=this.milliseconds().toString();n={"X-Nova-Access-Key":this.apiKey,"X-Nova-Timestamp":u};var d=void 0;"POST"===r?(a=this.json(c),d=this.hash(a,"md5"),n["Content-Type"]="application/json"):(Object.keys(c).length&&(o+="?"+this.urlencode(c)),d=this.urlencode(this.keysort(c)));var h=r+"\n"+s+"\n"+d+"\n"+u;n["X-Nova-Signature"]=this.hmac(this.encode(h),this.encode(this.secret))}return{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"code");if("A10000"!==u){var d=this.safeString(s,"message"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,h),this.throwBroadlyMatchedException(this.exceptions.broad,d,h),new p(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.AuthenticationError,m=f.ArgumentsRequired,y=f.BadRequest,g=f.InvalidOrder,b=f.InsufficientFunds,k=f.OrderNotFound,x=f.PermissionDenied;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"oceanex",name:"OceanEx",countries:["US"],version:"v1",rateLimit:3e3,urls:{logo:"https://user-images.githubusercontent.com/1294454/58385970-794e2d80-8001-11e9-889c-0567cd79b78e.jpg",api:"https://api.oceanex.pro",www:"https://www.oceanex.pro.com",doc:"https://api.oceanex.pro/doc/v1",referral:"https://oceanex.pro/signup?referral=VE24QX"},has:{fetchMarkets:!0,fetchCurrencies:!1,fetchTicker:!0,fetchTickers:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTrades:!0,fetchTradingLimits:!1,fetchTradingFees:!1,fetchAllTradingFees:!0,fetchFundingFees:!1,fetchTime:!0,fetchOrder:!0,fetchOrders:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchBalance:!0,createMarketOrder:!0,createOrder:!0,cancelOrder:!0,cancelOrders:!0,cancelAllOrders:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["markets","tickers/{pair}","tickers_multi","order_book","order_book/multi","fees/trading","trades","timestamp"]},private:{get:["key","members/me","orders","orders/filter"],post:["orders","orders/multi","order/delete","order/delete/multi","orders/clear"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.001}},commonCurrencies:{PLA:"Plair"},exceptions:{codes:{"-1":y,"-2":y,1001:y,1004:m,1006:v,1008:v,1010:v,1011:x,2001:v,2002:g,2004:k,9003:x},exact:{"market does not have a valid value":y,"side does not have a valid value":y,"Account::AccountError: Cannot lock funds":b,"The account does not exist":v}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},r={show_details:!0},e.next=4,this.publicGetMarkets(this.extend(r,t));case 4:for(a=e.sent,s=[],o=this.safeValue(a,"data"),c=0;c<o.length;c++)u=o[c],d=this.safeValue(u,"id"),h=this.safeValue(u,"name"),l=h.split("/"),f=n(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(p),y=this.safeCurrencyCode(v),p=p.toLowerCase(),v=v.toLowerCase(),g=m+"/"+y,s.push({id:d,symbol:g,base:m,quote:y,baseId:p,quoteId:v,active:!0,info:u,precision:{amount:this.safeValue(u,"amount_precision"),price:this.safeValue(u,"price_precision"),base:this.safeValue(u,"ask_precision"),quote:this.safeValue(u,"bid_precision")},limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeValue(u,"minimum_trading_amount"),max:void 0}}});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetTickersPair(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:{},e.next=4,this.loadMarkets();case 4:return void 0===t&&(t=this.symbols),n=this.marketIds(t),a={markets:n},e.next=9,this.publicGetTickersMulti(this.extend(a,r));case 9:for(s=e.sent,o=this.safeValue(s,"data"),c={},u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"market"),l=this.safeMarket(h),f=l.symbol,c[f]=this.parseTicker(d,l);return e.abrupt("return",this.filterByArray(c,"symbol",t));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"ticker",{}),i=this.safeTimestamp(e,"at");return{symbol:t.symbol,timestamp:i,datetime:this.iso8601(i),high:this.safeFloat(r,"high"),low:this.safeFloat(r,"low"),bid:this.safeFloat(r,"buy"),bidVolume:void 0,ask:this.safeFloat(r,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:this.safeFloat(r,"last"),last:this.safeFloat(r,"last"),previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(r,"volume"),quoteVolume:void 0,info:r}}},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderBook(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeTimestamp(c,"timestamp"),e.abrupt("return",this.parseOrderBook(c,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,n=v.length>2&&void 0!==v[2]?v[2]:{},e.next=5,this.loadMarkets();case 5:return void 0===t&&(t=this.symbols),a=this.marketIds(t),s={markets:a},void 0!==r&&(s.limit=r),e.next=11,this.publicGetOrderBookMulti(this.extend(s,n));case 11:for(o=e.sent,c=this.safeValue(o,"data",[]),u={},d=0;d<c.length;d++)h=c[d],l=this.safeString(h,"market"),f=this.safeSymbol(l),p=this.safeTimestamp(h,"timestamp"),u[f]=this.parseOrderBook(h,p);return e.abrupt("return",u);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicGetTrades(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"side");"bid"===r?r="buy":"ask"===r&&(r="sell");var i=this.safeValue(e,"market"),n=this.safeSymbol(i,t),a=this.safeTimestamp(e,"created_on");return void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),{info:e,timestamp:a,datetime:this.iso8601(a),symbol:n,id:this.safeString(e,"id"),order:void 0,type:"limit",takerOrMaker:void 0,side:r,price:this.safeFloat(e,"price"),amount:this.safeFloat(e,"volume"),cost:void 0,fee:void 0}}},{key:"fetchTime",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.publicGetTimestamp(t);case 3:return r=e.sent,e.abrupt("return",this.safeTimestamp(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchAllTradingFees",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.publicGetFeesTrading(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a={},s=0;s<n.length;s++)o=n[s],c=this.safeValue(o,"ask_fee",{}),u=this.safeValue(o,"bid_fee",{}),d=this.safeString(o,"market"),h=this.safeSymbol(d),a[h]={info:o,symbol:h,maker:this.safeFloat(c,"value"),taker:this.safeFloat(u,"value")};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchKey",value:function(){var e=a(i.mark((function e(){var t,r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,this.privateGetKey(t);case 3:return r=e.sent,e.abrupt("return",this.safeValue(r,"data"));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a=this.safeValue(n,"accounts"),s={info:r},o=0;o<a.length;o++)c=a[o],u=this.safeValue(c,"currency"),d=this.safeCurrencyCode(u),(h=this.account()).free=this.safeFloat(c,"balance"),h.used=this.safeFloat(c,"locked"),s[d]=h;return e.abrupt("return",this.parseBalance(s));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={market:c.id,side:n,ord_type:r,volume:this.amountToPrecision(t,a)},"limit"===r&&(u.price=this.priceToPrecision(t,s)),e.next=9,this.privatePostOrders(this.extend(u,o));case 9:return d=e.sent,h=this.safeValue(d,"data"),e.abrupt("return",this.parseOrder(h,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},a=t,Array.isArray(t)||(a=[t]),e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==r&&(s=this.market(r)),o={ids:a},e.next=11,this.privateGetOrders(this.extend(o,n));case 11:if(c=e.sent,u=this.safeValue(c,"data"),d=u.length,void 0!==u){e.next=16;break}throw new k(this.id+" could not found matching order");case 16:if(!Array.isArray(t)){e.next=18;break}return e.abrupt("return",this.parseOrders(u,s));case 18:if(0!==d){e.next=20;break}throw new k(this.id+" could not found matching order");case 20:return e.abrupt("return",this.parseOrder(u[0],s));case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:["wait"]},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={states:["done","cancel"]},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=g.length>0&&void 0!==g[0]?g[0]:void 0,r=g.length>1&&void 0!==g[1]?g[1]:void 0,n=g.length>2&&void 0!==g[2]?g[2]:void 0,a=g.length>3&&void 0!==g[3]?g[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOrders() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=this.safeValue(a,"states",["wait","done","cancel"]),c=this.omit(a,"states"),u={market:s.id,states:o,need_price:"True"},void 0!==n&&(u.limit=n),e.next=15,this.privateGetOrdersFilter(this.extend(u,c));case 15:for(d=e.sent,h=this.safeValue(d,"data",[]),l=[],f=0;f<h.length;f++)p=this.safeValue(h[f],"orders",[]),v=this.parseOrderStatus(this.safeValue(h[f],"state")),y=this.parseOrders(p,s,r,n,{status:v}),l=this.arrayConcat(l,y);return e.abrupt("return",l);case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeValue(e,"state")),i=this.safeString2(e,"market","market_id"),n=this.safeSymbol(i,t),a=this.safeTimestamp(e,"created_on");return void 0===a&&(a=this.parse8601(this.safeString(e,"created_at"))),this.safeOrder({info:e,id:this.safeString(e,"id"),clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:n,type:this.safeValue(e,"ord_type"),timeInForce:void 0,postOnly:void 0,side:this.safeValue(e,"side"),price:this.safeFloat(e,"price"),stopPrice:void 0,average:this.safeFloat(e,"avg_price"),amount:this.safeFloat(e,"volume"),remaining:this.safeFloat(e,"remaining_volume"),filled:this.safeFloat(e,"executed_volume"),status:r,cost:void 0,trades:void 0,fee:void 0})}},{key:"parseOrderStatus",value:function(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"createOrders",value:function(){var e=a(i.mark((function e(t,r){var n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=3,this.loadMarkets();case 3:return a=this.market(t),s={market:a.id,orders:r},e.next=7,this.privatePostOrdersMulti(this.extend(s,n));case 7:return o=e.sent,c=o.data,e.abrupt("return",this.parseOrders(c));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrderDelete(this.extend({id:t},r));case 6:return n=e.sent,a=this.safeValue(n,"data"),e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrderDeleteMulti(this.extend({ids:t},r));case 6:return n=e.sent,a=this.safeValue(n,"data"),e.abrupt("return",this.parseOrders(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:void 0,t=a.length>1&&void 0!==a[1]?a[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privatePostOrdersClear(t);case 6:return r=e.sent,n=this.safeValue(r,"data"),e.abrupt("return",this.parseOrders(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,a=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),s=this.omit(i,this.extractParams(e));if("public"===t)if("tickers_multi"===e||"order_book/multi"===e){for(var o="?",c=this.safeValue(i,"markets"),u=0;u<c.length;u++)o+="markets[]="+c[u]+"&";var d=this.safeValue(i,"limit");void 0!==d&&(o+="limit="+d),a+=o}else Object.keys(s).length&&(a+="?"+this.urlencode(s));else if("private"===t){this.checkRequiredCredentials();var h={uid:this.apiKey,data:s},l=this.jwt(h,this.encode(this.secret),"RS256");a+="?user_jwt="+l}return{url:a,method:r,body:n,headers:{"Content-Type":"application/json"}}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"code"),d=this.safeString(s,"message");if(void 0!==u&&"0"!==u){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.codes,u,h),this.throwExactlyMatchedException(this.exceptions.exact,d,h),new p(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(137);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"okcoin",name:"OKCoin",countries:["CN","US"],hostname:"okcoin.com",pro:!0,urls:{logo:"https://user-images.githubusercontent.com/51840849/87295551-102fbf00-c50e-11ea-90a9-462eebba5829.jpg",www:"https://www.okcoin.com",doc:"https://www.okcoin.com/docs/en/",fees:"https://www.okcoin.com/coin-fees",referral:"https://www.okcoin.com/account/register?flag=activity&channelId=600001513"},fees:{trading:{taker:.002,maker:.001}},options:{fetchMarkets:["spot"]}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10).ExchangeError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"paymium",name:"Paymium",countries:["FR","EU"],rateLimit:2e3,version:"v1",has:{CORS:!0,fetchBalance:!0,fetchTicker:!0,fetchTrades:!0,fetchOrderBook:!0,createOrder:!0,cancelOrder:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87153930-f0f02200-c2c0-11ea-9c0a-40337375ae89.jpg",api:"https://paymium.com/api",www:"https://www.paymium.com",fees:"https://www.paymium.com/page/help/fees",doc:["https://github.com/Paymium/api-documentation","https://www.paymium.com/page/developers"],referral:"https://www.paymium.com/page/sign-up?referral=eDAzPoRQFMvaAB8sf-qj"},api:{public:{get:["countries","data/{currency}/ticker","data/{currency}/trades","data/{currency}/depth","bitcoin_charts/{id}/trades","bitcoin_charts/{id}/depth"]},private:{get:["user","user/addresses","user/addresses/{address}","user/orders","user/orders/{uuid}","user/price_alerts","merchant/get_payment/{uuid}"],post:["user/addresses","user/orders","user/withdrawals","user/email_transfers","user/payment_requests","user/price_alerts","merchant/create_payment"],delete:["user/orders/{uuid}","user/orders/{uuid}/cancel","user/price_alerts/{id}"]}},markets:{"BTC/EUR":{id:"eur",symbol:"BTC/EUR",base:"BTC",quote:"EUR",baseId:"btc",quoteId:"eur"}},fees:{trading:{maker:.002,taker:.002}}})}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetUser(t);case 5:for(r=e.sent,n={info:r},a=Object.keys(this.currencies),s=0;s<a.length;s++)o=a[s],c=this.currencyId(o),(u="balance_"+c)in r&&(d=this.account(),h="locked_"+c,d.free=this.safeFloat(r,u),d.used=this.safeFloat(r,h),n[o]=d);return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={currency:this.marketId(t)},e.next=7,this.publicGetDataCurrencyDepth(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"bids","asks","price","amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={currency:this.marketId(t)},e.next=6,this.publicGetDataCurrencyTicker(this.extend(n,r));case 6:return a=e.sent,s=this.safeTimestamp(a,"at"),o=this.safeFloat(a,"vwap"),c=this.safeFloat(a,"volume"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(a,"price"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:o,open:this.safeFloat(a,"open"),close:d,last:d,previousClose:void 0,change:void 0,percentage:this.safeFloat(a,"variation"),average:void 0,baseVolume:c,quoteVolume:u,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"created_at_int"),i=this.safeString(e,"uuid"),n=void 0;void 0!==t&&(n=t.symbol);var a=this.safeString(e,"side"),s=this.safeFloat(e,"price"),o="traded_"+t.base.toLowerCase(),c=this.safeFloat(e,o),u=void 0;return void 0!==s&&void 0!==c&&(u=c*s),{info:e,id:i,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:n,type:void 0,side:a,takerOrMaker:void 0,price:s,amount:c,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currency:s.id},e.next=9,this.publicGetDataCurrencyTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={type:this.capitalize(r)+"Order",currency:this.marketId(t),direction:n,amount:a},"market"!==r&&(c.price=s),e.next=8,this.privatePostUserOrders(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",{info:u,id:u.uuid});case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={uuid:t},e.next=5,this.privateDeleteUserOrdersUuidCancel(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var c=this.nonce().toString(),u=c+s;if(n={"Api-Key":this.apiKey,"Api-Nonce":c},"POST"===r)Object.keys(o).length&&(u+=a=this.json(o),n["Content-Type"]="application/json");else if(Object.keys(o).length){var d=this.urlencode(o);u+=d,s+="?"+d}n["Api-Signature"]=this.hmac(this.encode(u),this.encode(this.secret))}return{url:s,method:r,body:a,headers:n}}},{key:"request",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:"public",n=u.length>2&&void 0!==u[2]?u[2]:"GET",a=u.length>3&&void 0!==u[3]?u[3]:{},s=u.length>4&&void 0!==u[4]?u[4]:void 0,o=u.length>5&&void 0!==u[5]?u[5]:void 0,e.next=7,this.fetch2(t,r,n,a,s,o);case 7:if(!("errors"in(c=e.sent))){e.next=10;break}throw new l(this.id+" "+this.json(c));case 10:return e.abrupt("return",c);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.BadSymbol,v=l.AuthenticationError,m=l.InsufficientFunds,y=l.InvalidOrder,g=l.ArgumentsRequired,b=l.OrderNotFound,k=l.BadRequest,x=l.PermissionDenied,w=l.AccountSuspended,_=l.CancelPending,O=l.DDoSProtection,T=l.DuplicateOrderId,S=l.NotSupported,C=r(13),I=C.TICK_SIZE,M=C.ROUND,E=C.DECIMAL_PLACES;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"phemex",name:"Phemex",countries:["CN"],rateLimit:100,version:"v1",certified:!1,pro:!0,has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/85225056-221eb600-b3d7-11ea-930d-564d2690e3f6.jpg",test:{v1:"https://testnet-api.phemex.com/v1",public:"https://testnet-api.phemex.com/exchange/public",private:"https://testnet-api.phemex.com"},api:{v1:"https://api.phemex.com/v1",public:"https://api.phemex.com/exchange/public",private:"https://api.phemex.com"},www:"https://phemex.com",doc:"https://github.com/phemex/phemex-api-docs",fees:"https://phemex.com/fees-conditions",referral:"https://phemex.com/register?referralCode=EDNVJ"},timeframes:{"1m":"60","3m":"180","5m":"300","15m":"900","30m":"1800","1h":"3600","2h":"7200","3h":"10800","4h":"14400","6h":"21600","12h":"43200","1d":"86400","1w":"604800","1M":"2592000"},api:{public:{get:["cfg/v2/products","products","nomics/trades","md/kline"]},v1:{get:["md/orderbook","md/trade","md/ticker/24hr","md/ticker/24hr/all","md/spot/ticker/24hr","md/spot/ticker/24hr/all","exchange/public/products"]},private:{get:["spot/orders/active","spot/orders","spot/wallets","exchange/spot/order","exchange/spot/order/trades","accounts/accountPositions","accounts/positions","orders/activeList","exchange/order/list","exchange/order","exchange/order/trade","phemex-user/users/children","phemex-user/wallets/v2/depositAddress","exchange/margins/transfer","exchange/wallets/confirm/withdraw","exchange/wallets/withdrawList","exchange/wallets/depositList","exchange/wallets/v2/depositAddress"],post:["spot/orders","orders","positions/assign","exchange/wallets/transferOut","exchange/wallets/transferIn","exchange/margins","exchange/wallets/createWithdraw","exchange/wallets/cancelWithdraw","exchange/wallets/createWithdrawAddress"],put:["spot/orders","orders/replace","positions/leverage","positions/riskLimit"],delete:["spot/orders","orders/cancel","orders","orders/all"]}},precisionMode:I,fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},requiredCredentials:{apiKey:!0,secret:!0},exceptions:{exact:{412:k,6001:k,19999:k,10001:T,10002:b,10003:_,10004:_,10005:_,11001:m,11002:y,11003:m,11004:y,11005:m,11006:f,11007:f,11008:f,11009:f,11010:m,11011:y,11012:y,11013:y,11014:y,11015:y,11016:k,11017:f,11018:f,11019:f,11020:f,11021:f,11022:w,11023:f,11024:f,11025:k,11026:f,11027:p,11028:p,11029:f,11030:f,11031:O,11032:O,11033:T,11034:y,11035:y,11036:y,11037:y,11038:y,11039:y,11040:y,11041:y,11042:y,11043:y,11044:y,11045:y,11046:y,11047:y,11048:y,11049:y,11050:y,11051:y,11052:y,11053:y,11054:y,11055:y,11056:y,11057:y,11058:y,11059:y,11060:y,11061:_,11062:y,11063:y,11064:y,11065:y,11066:y,11067:y,11068:y,11069:f,11070:p,11071:y,11072:y,11073:y,11074:y,11075:y,11076:y,11077:y,11078:y,11079:y,11080:y,11081:y,11082:m,11083:y,11084:y,11085:T,11086:y,11087:y,11088:y,11089:y,11090:y,11091:y,11092:y,11093:y,11094:y,11095:y,11096:y,11097:k,11098:k,11099:f,11100:m,11101:m,11102:k,11103:k,11104:k,11105:m,11106:m,11107:f,11108:y,11109:y,11110:y,11111:y,11112:y,11113:k,11114:y,11115:y,30018:k,39996:x},broad:{"Failed to find api-key":v,"Missing required parameter":k,"API Signature verification failed":v}},options:{"x-phemex-request-expiry":60,createOrderByQuoteRequiresPrice:!0}})}},{key:"parseSafeFloat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(void 0===e)return e;var t=(e=e.replace(",","")).split(" ");return this.safeFloat(t,0)}},{key:"parseSwapMarket",value:function(e){var t=this.safeString(e,"symbol"),r=this.safeString(e,"baseCurrency","contractUnderlyingAssets"),i=this.safeString(e,"quoteCurrency"),n=this.safeCurrencyCode(r),a=this.safeCurrencyCode(i),s=n+"/"+a,o=this.safeStringLower(e,"type"),c=void 0,u=void 0,d=!1;this.safeString(e,"settlementCurrency")!==i&&(d=!0);var h=!d,l={amount:this.safeFloat(e,"lotSize"),price:this.safeFloat(e,"tickSize")},f=this.safeInteger(e,"priceScale"),p=this.safeInteger(e,"ratioScale"),v=this.safeInteger(e,"valueScale"),m=this.safeFloat(e,"minPriceEp"),y=this.safeFloat(e,"maxPriceEp"),g=this.safeFloat(e,"makerFeeRateEr"),b=this.safeFloat(e,"takerFeeRateEr");void 0!==g&&(u=this.fromEn(g,p,1e-8)),void 0!==b&&(c=this.fromEn(b,p,1e-8));return{id:t,symbol:s,base:n,quote:a,baseId:r,quoteId:i,info:e,type:o,spot:!1,swap:!0,linear:h,inverse:d,active:undefined,taker:c,maker:u,priceScale:f,valueScale:v,ratioScale:p,precision:l,limits:{amount:{min:l.amount,max:void 0},price:{min:this.fromEn(m,f,l.price),max:this.fromEn(y,f,l.price)},cost:{min:void 0,max:this.parseSafeFloat(this.safeString(e,"maxOrderQty"))}}}}},{key:"parseSpotMarket",value:function(e){var t=this.safeStringLower(e,"type"),r=this.safeString(e,"symbol"),i=this.safeString(e,"quoteCurrency"),n=this.safeString(e,"baseCurrency"),a=this.safeFloat(e,"defaultTakerFee"),s=this.safeFloat(e,"defaultMakerFee"),o={amount:this.parseSafeFloat(this.safeString(e,"baseTickSize")),price:this.parseSafeFloat(this.safeString(e,"quoteTickSize"))},c={amount:{min:o.amount,max:this.parseSafeFloat(this.safeString(e,"maxBaseOrderSize"))},price:{min:o.price,max:void 0},cost:{min:this.parseSafeFloat(this.safeString(e,"minOrderValue")),max:this.parseSafeFloat(this.safeString(e,"maxOrderValue"))}},u=this.safeCurrencyCode(n),d=this.safeCurrencyCode(i);return{id:r,symbol:u+"/"+d,base:u,quote:d,baseId:n,quoteId:i,info:e,type:t,spot:!0,swap:!1,linear:undefined,inverse:undefined,active:undefined,taker:a,maker:s,precision:o,priceScale:8,valueScale:8,ratioScale:8,limits:c}}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.publicGetCfgV2Products(t);case 3:return r=e.sent,e.next=6,this.v1GetExchangePublicProducts(t);case 6:for(n=e.sent,a=this.safeValue(n,"data",[]),s=this.safeValue(r,"data",{}),o=this.safeValue(s,"products",[]),c=this.safeValue(s,"riskLimits",[]),u=this.indexBy(c,"symbol"),d=this.indexBy(a,"symbol"),h=[],l=0;l<o.length;l++)f=o[l],"perpetual"===this.safeStringLower(f,"type")?(p=this.safeString(f,"symbol"),v=this.safeValue(u,p,{}),f=this.extend(f,v),m=this.safeValue(d,p,{}),f=this.extend(f,m),f=this.parseSwapMarket(f)):f=this.parseSpotMarket(f),h.push(f);return e.abrupt("return",h);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetCfgV2Products(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"currencies",[]),s={},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"currency"),d=this.safeString(c,"name"),h=this.safeCurrencyCode(u),l=this.safeInteger(c,"valueScale"),f=this.safeFloat(c,"minValueEv"),p=this.safeFloat(c,"maxValueEv"),v=void 0,m=void 0,y=void 0,void 0!==l&&(y=Math.pow(10,-l),y=parseFloat(this.decimalToPrecision(y,M,1e-8,this.precisionMode)),void 0!==f&&(v=parseFloat(this.decimalToPrecision(f*y,M,1e-8,this.precisionMode))),void 0!==p&&(m=parseFloat(this.decimalToPrecision(p*y,M,1e-8,this.precisionMode)))),s[h]={id:u,info:c,code:h,name:d,active:void 0,fee:void 0,precision:y,limits:{amount:{min:v,max:m},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}},valueScale:l};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseBidAsk",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(void 0===i)throw new g(this.id+" parseBidAsk() requires a market argument");var n=this.safeFloat(e,r);return i.spot&&(n=this.fromEv(n,i)),[this.fromEp(this.safeFloat(e,t),i),n]}},{key:"parseOrderBook",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"bids",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"asks",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0,o={timestamp:t,datetime:this.iso8601(t),nonce:void 0},c=[r,i],u=0;u<c.length;u++){for(var d=c[u],h=[],l=this.safeValue(e,d),f=0;f<l.length;f++)h.push(this.parseBidAsk(l[f],n,a,s));o[d]=h}return o[r]=this.sortBy(o[r],0,!0),o[i]=this.sortBy(o[i],0),o}},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={symbol:n.id},e.next=8,this.v1GetMdOrderbook(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"result",{}),c=this.safeValue(o,"book",{}),u=this.safeIntegerProduct(o,"timestamp",1e-6),(d=this.parseOrderBook(c,u,"bids","asks",0,1,n)).nonce=this.safeInteger(o,"sequence"),e.abrupt("return",d);case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"toEn",value:function(e,t,r){return parseInt(this.decimalToPrecision(e*Math.pow(10,t),M,r,E))}},{key:"toEv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.toEn(e,t.valueScale,0)}},{key:"toEp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.toEn(e,t.priceScale,0)}},{key:"fromEn",value:function(e,t,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return void 0===e?e:(i=void 0===i?this.precisionMode:i,parseFloat(this.decimalToPrecision(e*Math.pow(10,-t),M,r,i)))}},{key:"fromEp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.fromEn(e,t.priceScale,t.precision.price)}},{key:"fromEv",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:t.spot?this.fromEn(e,t.valueScale,t.precision.amount):this.fromEn(e,t.valueScale,1/Math.pow(10,t.valueScale))}},{key:"fromEr",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0===e||void 0===t?e:this.fromEn(e,t.ratioScale,1e-8)}},{key:"parseOHLCV",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0;return r=void 0!==t&&t.spot?this.fromEv(this.safeFloat(e,7),t):this.safeInteger(e,7),[this.safeTimestamp(e,0),this.fromEp(this.safeFloat(e,3),t),this.fromEp(this.safeFloat(e,4),t),this.fromEp(this.safeFloat(e,5),t),this.fromEp(this.safeFloat(e,6),t),r]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},o={resolution:this.timeframes[r]},c=this.parseTimeframe(r),u=this.seconds(),void 0===n){e.next=14;break}void 0===a&&(a=2e3),n=parseInt(n/1e3),o.from=n,o.to=Math.min(u,this.sum(n,c*a)),e.next=21;break;case 14:if(void 0===a){e.next=20;break}a=Math.min(a,2e3),o.from=u-c*this.sum(a,1),o.to=u,e.next=21;break;case 20:throw new g(this.id+" fetchOHLCV() requires a since argument, or a limit argument, or both");case 21:return e.next=23,this.loadMarkets();case 23:return d=this.market(t),o.symbol=d.id,e.next=27,this.publicGetMdKline(this.extend(o,s));case 27:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.safeValue(l,"rows",[]),e.abrupt("return",this.parseOHLCVs(f,d,r,n,a));case 31:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.safeIntegerProduct(e,"timestamp",1e-6),a=this.fromEp(this.safeFloat(e,"lastEp"),t),s=this.fromEp(this.safeFloat(e,"turnoverEv"),t),o=this.safeFloat(e,"volume");void 0===o&&(o=this.fromEv(this.safeFloat(e,"volumeEv")));var c=void 0;void 0!==t&&t.spot&&(c=this.vwap(o,s));var u=void 0,d=void 0,h=void 0,l=this.fromEp(this.safeFloat(e,"openEp"),t);void 0!==l&&void 0!==a&&(u=a-l,l>0&&(d=u/l*100),h=this.sum(l,a)/2);var f={symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.fromEp(this.safeFloat(e,"highEp"),t),low:this.fromEp(this.safeFloat(e,"lowEp"),t),bid:this.fromEp(this.safeFloat(e,"bidEp"),t),bidVolume:void 0,ask:this.fromEp(this.safeFloat(e,"askEp"),t),askVolume:void 0,vwap:c,open:l,close:a,last:a,previousClose:void 0,change:u,percentage:d,average:h,baseVolume:o,quoteVolume:s,info:e};return f}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},s=n.spot?"v1GetMdSpotTicker24hr":"v1GetMdTicker24hr",e.next=8,this[s](this.extend(a,r));case 8:return o=e.sent,c=this.safeValue(o,"result",{}),e.abrupt("return",this.parseTicker(c,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.v1GetMdTrade(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"result",{}),d=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=void 0,n=void 0,a=void 0,s=void 0,o=void 0,c=void 0,u=void 0,d=this.safeString(e,"symbol"),h=(t=this.safeMarket(d,t)).symbol,l=void 0,f=void 0;if(Array.isArray(e)){var p=e.length;n=this.safeIntegerProduct(e,0,1e-6),p>4&&(a=this.safeString(e,p-4)),s=this.safeStringLower(e,p-3),r=this.fromEp(this.safeFloat(e,p-2),t),i=this.fromEv(this.safeFloat(e,p-1),t),t.spot&&void 0!==r&&void 0!==i&&(o=r*i)}else{n=this.safeIntegerProduct(e,"transactTimeNs",1e-6),a=this.safeString2(e,"execId","execID"),l=this.safeString(e,"orderID"),s=this.safeStringLower(e,"side"),c=this.parseOrderType(this.safeString(e,"ordType"));var v=this.safeString(e,"execStatus");"MakerFill"===v&&(f="maker"),r=this.fromEp(this.safeFloat(e,"execPriceEp"),t),i=this.fromEv(this.safeFloat(e,"execBaseQtyEv"),t),i=this.safeFloat(e,"execQty",i),o=this.fromEv(this.safeFloat2(e,"execQuoteQtyEv","execValueEv"),t);var m=this.fromEv(this.safeFloat(e,"execFeeEv"),t);if(void 0!==m){var y=void 0,g=this.safeFloat(e,"feeRateEr");g<0?(g=Math.abs(g),y=-(y=this.fromEr(g,t))):y=this.fromEr(g,t);var b=void 0;if(t.spot)b="buy"===s?t.base:t.quote;else{var k=this.safeValue(t,"info");if(void 0!==k){var x=this.safeString(k,"settlementCurrency");b=this.safeCurrencyCode(x)}}u={cost:m,rate:y,currency:b}}}return{info:e,id:a,symbol:h,timestamp:n,datetime:this.iso8601(n),order:l,type:c,side:s,takerOrMaker:f,price:r,amount:i,cost:o,fee:u}}},{key:"parseSpotBalance",value:function(e){for(var t={info:e},r=this.safeValue(e,"data",[]),i=0;i<r.length;i++){var n=r[i],a=this.safeString(n,"currency"),s=this.safeCurrencyCode(a),o=this.safeValue(this.currencies,s,{}),c=this.safeInteger(o,"valueScale",8),u=this.account(),d=this.safeFloat(n,"balanceEv"),h=this.safeFloat(n,"lockedTradingBalanceEv"),l=this.safeFloat(n,"lockedWithdrawEv"),f=this.fromEn(d,c,c,E),p=this.fromEn(h,c,c,E),v=this.fromEn(l,c,c,E),m=this.sum(p,v);u.total=f,u.used=m,t[s]=u}return this.parseBalance(t)}},{key:"parseSwapBalance",value:function(e){var t={info:e},r=this.safeValue(e,"data",{}),i=this.safeValue(r,"account",{}),n=this.safeString(i,"currency"),a=this.safeCurrencyCode(n),s=this.currency(a),o=this.account(),c=this.safeFloat(i,"accountBalanceEv"),u=this.safeFloat(i,"totalUsedBalanceEv"),d=this.safeInteger(s,"valueScale",8);return o.total=this.fromEn(c,d,d,E),o.used=this.fromEn(u,d,d,E),t[a]=o,this.parseBalance(t)}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:if(r=this.safeString2(this.options,"defaultType","fetchBalance","spot"),n=this.safeString(t,"type",r),a="privateGetSpotWallets",s={},"swap"!==n){e.next=19;break}if(void 0===(o=this.safeString(t,"code"))){e.next=15;break}c=this.currency(o),s.currency=c.id,t=this.omit(t,"code"),e.next=18;break;case 15:if(void 0!==this.safeString(t,"currency")){e.next=18;break}throw new g(this.id+" fetchBalance() requires a code parameter or a currency parameter for "+n+" type");case 18:a="privateGetAccountsAccountPositions";case 19:return t=this.omit(t,"type"),e.next=22,this[a](this.extend(s,t));case 22:return u=e.sent,d="swap"===n?this.parseSwapBalance(u):this.parseSpotBalance(u),e.abrupt("return",d);case 25:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Created:"open",Untriggered:"open",Deactivated:"closed",Triggered:"open",Rejected:"rejected",New:"open",PartiallyFilled:"open",Filled:"closed",Canceled:"canceled"},e,e)}},{key:"parseOrderType",value:function(e){return this.safeString({Limit:"limit",Market:"market"},e,e)}},{key:"parseTimeInForce",value:function(e){return this.safeString({GoodTillCancel:"GTC",PostOnly:"PO",ImmediateOrCancel:"IOC",FillOrKill:"FOK"},e,e)}},{key:"parseSpotOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderID"),i=this.safeString(e,"clOrdID");void 0!==i&&i.length<1&&(i=void 0);var n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t),s=this.fromEp(this.safeFloat(e,"priceEp"),t);0===s&&(s=void 0);var o=this.fromEv(this.safeFloat(e,"baseQtyEv"),t),c=this.fromEv(this.safeFloat(e,"leavesBaseQtyEv"),t),u=this.fromEv(this.safeFloat(e,"cumBaseQtyEv"),t),d=this.fromEv(this.safeFloat(e,"quoteQtyEv"),t),h=this.fromEp(this.safeFloat(e,"avgPriceEp"),t),l=this.parseOrderStatus(this.safeString(e,"ordStatus")),f=this.safeStringLower(e,"side"),p=this.parseOrderType(this.safeString(e,"ordType")),v=this.safeIntegerProduct2(e,"actionTimeNs","createTimeNs",1e-6),m=void 0,y=this.fromEv(this.safeFloat(e,"cumFeeEv"),t);void 0!==y&&(m={cost:y,currency:void 0}),void 0===u&&void 0!==o&&void 0!==c&&(u=Math.min(0,o-c));var g=this.parseTimeInForce(this.safeString(e,"timeInForce")),b=this.fromEp(this.safeFloat(e,"stopPxEp",t)),k="PO"===g;return{info:e,id:r,clientOrderId:i,timestamp:v,datetime:this.iso8601(v),lastTradeTimestamp:void 0,symbol:a,type:p,timeInForce:g,postOnly:k,side:f,price:s,stopPrice:b,amount:o,cost:d,average:h,filled:u,remaining:c,status:l,fee:m,trades:void 0}}},{key:"parseSwapOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderID"),i=this.safeString(e,"clOrdID");void 0!==i&&i.length<1&&(i=void 0);var n=this.safeString(e,"symbol"),a=this.safeSymbol(n,t),s=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeStringLower(e,"side"),c=this.parseOrderType(this.safeString(e,"orderType")),u=this.fromEp(this.safeFloat(e,"priceEp"),t),d=this.safeFloat(e,"orderQty"),h=this.safeFloat(e,"cumQty"),l=this.safeFloat(e,"leavesQty"),f=this.safeIntegerProduct(e,"actionTimeNs",1e-6),p=this.safeFloat(e,"cumValue"),v=this.safeIntegerProduct(e,"transactTimeNs",1e-6);0===v&&(v=void 0);var m=this.parseTimeInForce(this.safeString(e,"timeInForce")),y=this.safeFloat(e,"stopPx"),g="PO"===m;return{info:e,id:r,clientOrderId:i,datetime:this.iso8601(f),timestamp:f,lastTradeTimestamp:v,symbol:a,type:c,timeInForce:m,postOnly:g,side:o,price:u,stopPrice:y,amount:d,filled:h,remaining:l,cost:p,average:void 0,status:s,fee:void 0,trades:void 0}}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"closedPnl"in e?this.parseSwapOrder(e,t):this.parseSpotOrder(e,t)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=m.length>4&&void 0!==m[4]?m[4]:void 0,o=m.length>5&&void 0!==m[5]?m[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),n=this.capitalize(n),r=this.capitalize(r),u={symbol:c.id,side:n,ordType:r},!c.spot){e.next=29;break}if(d=this.safeValue(o,"qtyType","ByBase"),"Market"!==r&&"Stop"!==r&&"MarketIfTouched"!==r||void 0!==s&&(d="ByQuote"),u.qtyType=d,"ByQuote"!==d){e.next=26;break}if(h=this.safeFloat(o,"cost"),o=this.omit(o,"cost"),!this.options.createOrderByQuoteRequiresPrice){e.next=22;break}if(void 0===s){e.next=20;break}h=a*s,e.next=22;break;case 20:if(void 0!==h){e.next=22;break}throw new g(this.id+" createOrder() "+d+" requires a price argument or a cost parameter");case 22:h=void 0===h?a:h,u.quoteQtyEv=this.toEp(h,c),e.next=27;break;case 26:u.baseQtyEv=this.toEv(a,c);case 27:e.next=30;break;case 29:c.swap&&(u.orderQty=parseInt(a));case 30:return"Limit"===r&&(u.priceEp=this.toEp(s,c)),void 0!==(l=this.safeFloat2(o,"stopPx","stopPrice"))&&(u.stopPxEp=this.toEp(l,c)),o=this.omit(o,["stopPx","stopPrice"]),f=c.spot?"privatePostSpotOrders":"privatePostOrders",e.next=37,this[f](this.extend(u,o));case 37:return p=e.sent,v=this.safeValue(p,"data",{}),e.abrupt("return",this.parseOrder(v,c));case 40:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={symbol:a.id},o=this.safeString2(n,"clientOrderId","clOrdID"),n=this.omit(n,["clientOrderId","clOrdID"]),void 0!==o?s.clOrdID=o:s.orderID=t,c=a.spot?"privateDeleteSpotOrders":"privateDeleteOrdersCancel",e.next=14,this[c](this.extend(s,n));case 14:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseOrder(d,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:if(n={},a=void 0,void 0===t){e.next=11;break}if((a=this.market(t)).swap){e.next=10;break}throw new S(this.id+" cancelAllOrders() supports swap market type orders only");case 10:n.symbol=a.id;case 11:return e.next=13,this.privateDeleteOrdersAll(this.extend(n,r));case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s=a.spot?"privateGetSpotOrdersActive":"privateGetExchangeOrder",o={symbol:a.id},c=this.safeString2(n,"clientOrderId","clOrdID"),n=this.omit(n,["clientOrderId","clOrdID"]),void 0!==c?o.clOrdID=c:o.orderID=t,e.next=14,this[s](this.extend(o,n));case 14:if(u=e.sent,d=this.safeValue(u,"data",{}),h=d,!Array.isArray(d)){e.next=26;break}if(!(d.length<1)){e.next=25;break}if(void 0===c){e.next=24;break}throw new b(this.id+" fetchOrder "+r+" order with clientOrderId "+c+" not found");case 24:throw new b(this.id+" fetchOrder "+r+" order with id "+t+" not found");case 25:h=this.safeValue(d,0,{});case 26:return e.abrupt("return",this.parseOrder(h,a));case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetSpotOrders":"privateGetExchangeOrderList",c={symbol:s.id},void 0!==r&&(c.start=r),void 0!==n&&(c.limit=n),e.next=15,this[o](this.extend(c,a));case 15:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetSpotOrders":"privateGetOrdersActiveList",c={symbol:s.id},e.prev=11,e.next=14,this[o](this.extend(c,a));case 14:if(u=e.sent,d=this.safeValue(u,"data",{}),!Array.isArray(d)){e.next=20;break}return e.abrupt("return",this.parseOrders(d,s,r,n));case 20:return h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 22:e.next=27;break;case 24:return e.prev=24,e.t0=e.catch(11),e.abrupt("return",[]);case 27:case"end":return e.stop()}}),e,this,[[11,24]])})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetExchangeSpotOrder":"privateGetExchangeOrderList",c={symbol:s.id},void 0!==r&&(c.start=r),void 0!==n&&(c.limit=n),e.next=15,this[o](this.extend(c,a));case 15:if(u=e.sent,d=this.safeValue(u,"data",{}),!Array.isArray(d)){e.next=21;break}return e.abrupt("return",this.parseOrders(d,s,r,n));case 21:return h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseOrders(h,s,r,n));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchClosedOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o=s.spot?"privateGetExchangeSpotOrderTrades":"privateGetExchangeOrderTrade",c={symbol:s.id},void 0!==r&&(c.start=r),s.swap&&void 0!==n&&(c.limit=n),e.next=15,this[o](this.extend(c,a));case 15:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"rows",[]),e.abrupt("return",this.parseTrades(h,s,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetPhemexUserWalletsV2DepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeString(o,"address"),u=this.safeString(o,"tag"),this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetExchangeWalletsDepositList(a);case 10:return o=e.sent,c=this.safeValue(o,"data",{}),e.abrupt("return",this.parseTransactions(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetExchangeWalletsWithdrawList(a);case 10:return o=e.sent,c=this.safeValue(o,"data",{}),e.abrupt("return",this.parseTransactions(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({Success:"ok",Succeed:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"address"),n=void 0,a=this.safeString(e,"txHash"),s=this.safeString(e,"currency"),o=(t=this.safeCurrency(s,t)).code,c=this.safeInteger2(e,"createdAt","submitedAt"),u=this.safeStringLower(e,"type"),d=this.fromEn(this.safeFloat(e,"feeEv"),t.valueScale,t.precision),h=void 0;void 0!==d&&(u="withdrawal",h={cost:d,currency:o});var l=this.parseTransactionStatus(this.safeString(e,"status")),f=this.fromEn(this.safeFloat(e,"amountEv"),t.valueScale,t.precision);return{info:e,id:r,txid:a,timestamp:c,datetime:this.iso8601(c),address:i,addressTo:i,addressFrom:void 0,tag:n,tagTo:n,tagFrom:void 0,type:u,amount:f,currency:o,status:l,updated:void 0,fee:h}}},{key:"fetchPositions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>0&&void 0!==u[0]?u[0]:void 0,t=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:if(r=this.safeString(t,"code"),n={},void 0!==r){e.next=12;break}if(void 0!==this.safeString(t,"currency")){e.next=10;break}throw new g(this.id+" fetchPositions() requires a currency parameter or a code parameter");case 10:e.next=15;break;case 12:a=this.currency(r),t=this.omit(t,"code"),n.currency=a.id;case 15:return e.next=17,this.privateGetAccountsAccountPositions(this.extend(n,t));case 17:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeValue(o,"positions",[]),e.abrupt("return",c);case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="/"+this.implodeParams(e,i),c=o,u="";if("GET"!==r&&"DELETE"!==r&&"PUT"!==r||Object.keys(s).length&&(c+="?"+(u=this.urlencodeWithArrayRepeat(s))),"private"===t){this.checkRequiredCredentials();var d=this.seconds(),h=this.safeInteger(this.options,"x-phemex-request-expiry",60),l=this.sum(d,h),f=l.toString();n={"x-phemex-access-token":this.apiKey,"x-phemex-request-expiry":f};var p="";"POST"===r&&(a=p=this.json(i),n["Content-Type"]="application/json");var v=o+u+f+p;n["x-phemex-request-signature"]=this.hmac(this.encode(v),this.encode(this.secret))}return{url:c=this.urls.api[t]+c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"error",s),d=this.safeString(u,"code"),h=this.safeString(u,"msg");if(void 0!==d&&"0"!==d){var l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new f(l)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ExchangeNotAvailable,m=f.RequestTimeout,y=f.AuthenticationError,g=f.PermissionDenied,b=f.DDoSProtection,k=f.InsufficientFunds,x=f.OrderNotFound,w=f.InvalidOrder,_=f.AccountSuspended,O=f.CancelPending,T=f.InvalidNonce,S=f.OnMaintenance,C=f.BadSymbol;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"poloniex",name:"Poloniex",countries:["US"],rateLimit:1e3,certified:!1,pro:!0,has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrder:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0,fetchTradingFees:!0,fetchTransactions:!0,fetchWithdrawals:!0,cancelAllOrders:!0,withdraw:!0},timeframes:{"5m":300,"15m":900,"30m":1800,"2h":7200,"4h":14400,"1d":86400},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766817-e9456312-5ee6-11e7-9b3c-b628ca5626a5.jpg",api:{public:"https://poloniex.com/public",private:"https://poloniex.com/tradingApi"},www:"https://www.poloniex.com",doc:"https://docs.poloniex.com",fees:"https://poloniex.com/fees",referral:"https://poloniex.com/signup?c=UBFZJRPJ"},api:{public:{get:["return24hVolume","returnChartData","returnCurrencies","returnLoanOrders","returnOrderBook","returnTicker","returnTradeHistory"]},private:{post:["buy","cancelLoanOffer","cancelOrder","cancelAllOrders","closeMarginPosition","createLoanOffer","generateNewAddress","getMarginPosition","marginBuy","marginSell","moveOrder","returnActiveLoans","returnAvailableAccountBalances","returnBalances","returnCompleteBalances","returnDepositAddresses","returnDepositsWithdrawals","returnFeeInfo","returnLendingHistory","returnMarginAccountSummary","returnOpenLoanOffers","returnOpenOrders","returnOrderTrades","returnOrderStatus","returnTradableBalances","returnTradeHistory","sell","toggleAutoRenew","transferBalance","withdraw"]}},fees:{trading:{maker:9e-4,taker:9e-4},funding:{}},limits:{amount:{min:1e-6,max:1e9},price:{min:1e-8,max:1e9},cost:{min:0,max:1e9}},precision:{amount:8,price:8},commonCurrencies:{AIR:"AirCoin",APH:"AphroditeCoin",BCC:"BTCtalkcoin",BDG:"Badgercoin",BTM:"Bitmark",CON:"Coino",GOLD:"GoldEagles",GPUC:"GPU",HOT:"Hotcoin",ITC:"Information Coin",KEY:"KEYCoin",PLX:"ParallaxCoin",REPV2:"REP",STR:"XLM",SOC:"SOCC",XAP:"API Coin",USDTTRON:"USDT",USDTETH:"USDT"},options:{limits:{cost:{min:{BTC:1e-4,ETH:1e-4,XMR:1e-4,USDT:1}}}},exceptions:{exact:{"You may only place orders that reduce your position.":w,"Invalid order number, or you are not the person who placed the order.":x,"Permission denied":g,"Connection timed out. Please try again.":m,"Internal error. Please try again.":v,"Currently in maintenance mode.":S,"Order not found, or you are not the person who placed it.":x,"Invalid API key/secret pair.":y,"Please do not make more than 8 API calls per second.":b,"Rate must be greater than zero.":w,"Invalid currency pair.":C,"Invalid currencyPair parameter.":C},broad:{"Total must be at least":w,"This account is frozen.":_,"Not enough":k,"Nonce must be greater":T,"You have already called cancelOrder or moveOrder on this order.":O,"Amount must be at least":w,"is either completed or does not exist":w,"Error pulling ":p}}})}},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o="quote",c=s[a],u=parseFloat(this.costToPrecision(e,i*c));return"sell"===r?u*=n:o="base",{type:a,currency:s[o],rate:c,cost:parseFloat(this.feeToPrecision(e,u))}}},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,"date"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"quoteVolume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={currencyPair:o.id,period:this.timeframes[r]},void 0===i?(c.end=this.seconds(),c.start=void 0===a?c.end-this.parseTimeframe("1w"):c.end-a*this.parseTimeframe(r)):(c.start=parseInt(i/1e3),void 0!==a&&(u=this.sum(c.start,a*this.parseTimeframe(r)),c.end=u)),e.next=11,this.publicGetReturnChartData(this.extend(c,s));case 11:return d=e.sent,e.abrupt("return",this.parseOHLCVs(d,o,r,i,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadMarkets",value:function(){var e=a(n.mark((function e(){var t,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]&&s[0],i=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,c(u(r.prototype),"loadMarkets",this).call(this,t,i);case 4:return a=e.sent,(void 0===this.safeValue(this.options,"currenciesByNumericId")||t)&&(this.options.currenciesByNumericId=this.indexBy(this.currencies,"numericId")),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetReturnTicker(t);case 3:for(r=e.sent,a=Object.keys(r),s=[],o=0;o<a.length;o++)c=a[o],u=r[c],d=c.split("_"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(f),v=this.safeCurrencyCode(l),m=p+"/"+v,y=this.extend(this.limits,{cost:{min:this.safeValue(this.options.limits.cost.min,v)}}),g=this.safeString(u,"isFrozen"),b="1"!==g,k=this.safeInteger(u,"id"),s.push({id:c,numericId:k,symbol:m,baseId:f,quoteId:l,base:p,quote:v,active:b,limits:y,info:u});return e.abrupt("return",s);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return r={account:"all"},e.next=6,this.privatePostReturnCompleteBalances(this.extend(r,t));case 6:for(i=e.sent,a={info:i},s=Object.keys(i),o=0;o<s.length;o++)c=s[o],u=this.safeValue(i,c,{}),d=this.safeCurrencyCode(c),(h=this.account()).free=this.safeFloat(u,"available"),h.used=this.safeFloat(u,"onOrders"),a[d]=h;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostReturnFeeInfo(t);case 5:return r=e.sent,e.abrupt("return",{info:r,maker:this.safeFloat(r,"makerFee"),taker:this.safeFloat(r,"takerFee"),withdraw:{},deposit:{}});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return a={currencyPair:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetReturnOrderBook(this.extend(a,i));case 8:return s=e.sent,(o=this.parseOrderBook(s)).nonce=this.safeInteger(s,"seq"),e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return b.length>0&&void 0!==b[0]?b[0]:void 0,t=b.length>1&&void 0!==b[1]?b[1]:void 0,r=b.length>2&&void 0!==b[2]?b[2]:{},e.next=5,this.loadMarkets();case 5:return a={currencyPair:"all"},void 0!==t&&(a.depth=t),e.next=9,this.publicGetReturnOrderBook(this.extend(a,r));case 9:for(s=e.sent,o=Object.keys(s),c={},u=0;u<o.length;u++)d=o[u],h=void 0,d in this.markets_by_id?h=this.markets_by_id[d].symbol:(l=d.split("_"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(v),y=this.safeCurrencyCode(p),h=m+"/"+y),(g=this.parseOrderBook(s[d])).nonce=this.safeInteger(s[d],"seq"),c[h]=g;return e.abrupt("return",c);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=void 0,a=void 0,s=void 0,o=this.safeFloat(e,"last"),c=this.safeFloat(e,"percentChange");return-1!==c&&(a=o-(n=o/this.sum(1,c)),s=this.sum(o,n)/2),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high24hr"),low:this.safeFloat(e,"low24hr"),bid:this.safeFloat(e,"highestBid"),bidVolume:void 0,ask:this.safeFloat(e,"lowestAsk"),askVolume:void 0,vwap:void 0,open:n,close:o,last:o,previousClose:void 0,change:a,percentage:100*c,average:s,baseVolume:this.safeFloat(e,"quoteVolume"),quoteVolume:this.safeFloat(e,"baseVolume"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:void 0,r=b.length>1&&void 0!==b[1]?b[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetReturnTicker(r);case 6:for(a=e.sent,s=Object.keys(a),o={},c=0;c<s.length;c++)u=s[c],d=void 0,h=void 0,u in this.markets_by_id?(h=this.markets_by_id[u],d=h.symbol):(l=u.split("_"),f=i(l,2),p=f[0],v=f[1],m=this.safeCurrencyCode(v),y=this.safeCurrencyCode(p),h={symbol:d=m+"/"+y}),g=a[u],o[d]=this.parseTicker(g,h);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetReturnCurrencies(t);case 3:for(r=e.sent,i=Object.keys(r),a={},s=0;s<i.length;s++)o=i[s],c=r[o],u=8,d=this.safeCurrencyCode(o),h=0===c.delisted&&!c.disabled,l=this.safeInteger(c,"id"),f=this.safeFloat(c,"txFee"),a[d]={id:o,numericId:l,code:d,info:c,name:c.name,active:h,fee:f,precision:u,limits:{amount:{min:Math.pow(10,-u),max:Math.pow(10,u)},price:{min:Math.pow(10,-u),max:Math.pow(10,u)},cost:{min:void 0,max:void 0},withdraw:{min:f,max:Math.pow(10,u)}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),e.next=6,this.publicGetReturnTicker(r);case 6:return a=e.sent,s=a[i.id],e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"globalTradeID","tradeID"),n=this.safeString(e,"orderNumber"),a=this.parse8601(this.safeString(e,"date")),s=void 0;if(!t&&"currencyPair"in e){var o=this.safeString(e,"currencyPair");if(o in this.markets_by_id)t=this.markets_by_id[o];else{var c=o.split("_"),u=i(c,2),d=u[0],h=u[1],l=this.safeCurrencyCode(h),f=this.safeCurrencyCode(d);s=l+"/"+f}}void 0===s&&void 0!==t&&(s=t.symbol);var p=this.safeString(e,"type"),v=void 0,m=this.safeFloat(e,"rate"),y=this.safeFloat(e,"total"),g=this.safeFloat(e,"amount"),b=this.safeString(e,"feeDisplay");if(void 0!==b){var k=b.split(" "),x=this.safeFloat(k,0);if(void 0!==x){var w=this.safeString(k,1),_=this.safeCurrencyCode(w),O=this.safeString(k,2);if(void 0!==O){var T=(O=O.replace("(","")).split("%");O=this.safeString(T,0),O=parseFloat(O)/100}v={cost:x,currency:_,rate:O}}}var S=void 0,C=this.safeFloat(e,"takerAdjustment");return void 0!==C&&(S="taker"),{id:r,info:e,timestamp:a,datetime:this.iso8601(a),symbol:s,order:n,type:"limit",side:p,takerOrMaker:S,price:m,amount:g,cost:y,fee:v}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currencyPair:s.id},void 0!==r&&(o.start=parseInt(r/1e3),o.end=this.seconds()),e.next=10,this.publicGetReturnTradeHistory(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:void 0,r=I.length>1&&void 0!==I[1]?I[1]:void 0,a=I.length>2&&void 0!==I[2]?I[2]:void 0,s=I.length>3&&void 0!==I[3]?I[3]:{},e.next=6,this.loadMarkets();case 6:return o=void 0,void 0!==t&&(o=this.market(t)),c=o?o.id:"all",u={currencyPair:c},void 0!==r&&(u.start=parseInt(r/1e3),u.end=this.sum(this.seconds(),1)),void 0!==a&&(u.limit=parseInt(a)),e.next=14,this.privatePostReturnTradeHistory(this.extend(u,s));case 14:if(d=e.sent,h=[],void 0!==o)h=this.parseTrades(d,o);else if(d)for(l=Object.keys(d),f=0;f<l.length;f++)if(p=l[f],v=void 0,p in this.markets_by_id)for(v=this.markets_by_id[p],m=this.parseTrades(d[p],v),y=0;y<m.length;y++)h.push(m[y]);else for(g=p.split("_"),b=i(g,2),k=b[0],x=b[1],w=this.safeCurrencyCode(x),_=this.safeCurrencyCode(k),O=w+"/"+_,T=d[p],S=0;S<T.length;S++)C={symbol:O,base:w,quote:_},h.push(this.parseTrade(T[S],C));return e.abrupt("return",this.filterBySinceLimit(h,r,a));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Open:"open","Partially filled":"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp");void 0===r&&(r=this.parse8601(this.safeString(e,"date")));var n=void 0,a=this.safeString(e,"currencyPair");if(void 0!==a)if(a in this.markets_by_id)t=this.markets_by_id[a];else{var s=a.split("_"),o=i(s,2),c=o[0],u=o[1],d=this.safeCurrencyCode(u),h=this.safeCurrencyCode(c);n=d+"/"+h}void 0===n&&void 0!==t&&(n=t.symbol);var l=void 0,f=this.safeValue(e,"resultingTrades");Array.isArray(f)||(f=this.safeValue(f,this.safeString(t,"id",a))),void 0!==f&&(l=this.parseTrades(f,t));var p=this.safeFloat2(e,"price","rate"),v=this.safeFloat(e,"amount"),m=this.safeFloat(e,"startingAmount"),y=void 0,g=0;void 0!==m?void 0!==v&&(y=m-v,void 0!==p&&(g=y*p)):m=v;var b=this.parseOrderStatus(this.safeString(e,"status")),k=void 0,x=void 0;if(void 0===y&&void 0!==l){y=0,g=0;var w=l.length;if(w>0){x=l[0].timestamp;for(var _=0;_<w;_++){var O=l[_],T=O.amount,S=O.price;y=this.sum(y,T),g=this.sum(g,S*T),x=Math.max(x,O.timestamp)}}void 0!==m&&(v=Math.max(m-y,0),y>=m&&(b="closed"))}void 0!==y&&void 0!==g&&y>0&&(k=g/y);var C=this.safeString(e,"type"),I=this.safeString(e,"side",C);C===I&&(C=void 0);var M=this.safeString(e,"orderNumber"),E=void 0,A=this.safeFloat(e,"fee");if(void 0!==A){var F=void 0;void 0!==t&&(F="buy"===I?t.base:t.quote),E={cost:A,currency:F}}var P=this.safeString(e,"clientOrderId");return{info:e,id:M,clientOrderId:P,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:x,status:b,symbol:n,type:C,timeInForce:void 0,postOnly:void 0,side:I,price:p,stopPrice:void 0,cost:g,average:k,amount:m,filled:y,remaining:v,trades:l,fee:E}}},{key:"parseOpenOrders",value:function(e,t,r){for(var i=0;i<e.length;i++){var n=e[i],a=this.extend(n,{status:"open",type:"limit",side:n.type,price:n.rate});r.push(this.parseOrder(a,t))}return r}},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:void 0,i=y.length>2&&void 0!==y[2]?y[2]:void 0,a=y.length>3&&void 0!==y[3]?y[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),o=s?s.id:"all",c={currencyPair:o},e.next=12,this.privatePostReturnOpenOrders(this.extend(c,a));case 12:if(u=e.sent,d={status:"open"},void 0!==s){e.next=21;break}for(h=Object.keys(u),l=[],f=0;f<h.length;f++)p=h[f],v=u[p],m=this.markets_by_id[p],l=this.arrayConcat(l,this.parseOrders(v,m,void 0,void 0,d));return e.abrupt("return",this.filterBySinceLimit(l,r,i));case 21:return e.abrupt("return",this.parseOrders(u,s,r,i,d));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" createOrder() does not accept market orders");case 4:return e.next=6,this.loadMarkets();case 6:return c="privatePost"+this.capitalize(i),u=this.market(t),a=this.amountToPrecision(t,a),d={currencyPair:u.id,rate:this.priceToPrecision(t,s),amount:a},void 0!==(h=this.safeString(o,"clientOrderId"))&&(d.clientOrderId=h,o=this.omit(o,"clientOrderId")),l=this.milliseconds(),e.next=15,this[c](this.extend(d,o));case 15:return f=e.sent,e.abrupt("return",this.parseOrder(this.extend({timestamp:l,status:"open",type:r,side:i,price:s,amount:a},f),u));case 17:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=a(n.mark((function e(t,r,i,a,s){var o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=h.length>5&&void 0!==h[5]?h[5]:void 0,c=h.length>6&&void 0!==h[6]?h[6]:{},e.next=4,this.loadMarkets();case 4:return o=parseFloat(o),u={orderNumber:t,rate:this.priceToPrecision(r,o)},void 0!==s&&(u.amount=this.amountToPrecision(r,s)),e.next=9,this.privatePostMoveOrder(this.extend(u,c));case 9:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n,a){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={},void 0===(a=this.safeValue(r,"clientOrderId"))?i.orderNumber=t:i.clientOrderId=a,r=this.omit(r,"clientOrderId"),e.next=10,this.privatePostCancelOrder(this.extend(i,r));case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},i={},a=void 0,void 0!==t&&(a=this.market(t),i.currencyPair=a.id),e.next=7,this.privatePostCancelAllOrders(this.extend(i,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return t=t.toString(),i={orderNumber:t},e.next=8,this.privatePostReturnOrderStatus(this.extend(i,r));case 8:if(a=e.sent,void 0!==(s=this.safeValue(a.result,t))){e.next=12;break}throw new x(this.id+" order id "+t+" not found");case 12:return e.abrupt("return",this.parseOrder(s));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderStatus",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,i=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.fetchOpenOrders(r,void 0,void 0,i);case 6:return a=e.sent,s=this.indexBy(a,"id"),e.abrupt("return",t in s?"open":"closed");case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,r=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.loadMarkets();case 6:return i={orderNumber:t},e.next=9,this.privatePostReturnOrderTrades(this.extend(i,r));case 9:return a=e.sent,e.abrupt("return",this.parseTrades(a));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return i=void 0,a=void 0,t in this.currencies?(a=this.currency(t),i=a.id):i=t,s={currency:i},e.next=9,this.privatePostGenerateNewAddress(this.extend(s,r));case 9:return o=e.sent,c=void 0,u=void 0,1===o.success&&(c=this.safeString(o,"response")),this.checkAddress(c),void 0!==a&&void 0!==(d=this.safeString(a.info,"depositAddress"))&&(u=c,c=d),e.abrupt("return",{currency:t,address:c,tag:u,info:o});case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostReturnDepositAddresses(r);case 5:return i=e.sent,a=void 0,s=void 0,t in this.currencies?(s=this.currency(t),a=s.id):a=t,o=this.safeString(i,a),c=void 0,this.checkAddress(o),void 0!==s&&void 0!==(u=this.safeString(s.info,"depositAddress"))&&(c=o,o=u),e.abrupt("return",{currency:t,address:o,tag:c,info:i});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,amount:r,address:i},void 0!==a&&(c.paymentId=a),e.next=10,this.privatePostWithdraw(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",{info:u,id:this.safeString(u,"withdrawalNumber")});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchTransactionsHelper",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:void 0,r=d.length>2&&void 0!==d[2]?d[2]:void 0,i=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=31104e3,s=this.seconds(),o=void 0!==t?parseInt(t/1e3):s-10*a,c={start:o,end:s},void 0!==r&&(c.limit=r),e.next=13,this.privatePostReturnDepositsWithdrawals(this.extend(c,i));case 13:return u=e.sent,e.abrupt("return",u);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.fetchTransactionsHelper(t,r,i,a);case 8:return s=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),c=this.safeValue(s,"withdrawals",[]),u=this.safeValue(s,"deposits",[]),d=this.parseTransactions(c,o,r,i),h=this.parseTransactions(u,o,r,i),l=this.arrayConcat(h,d),e.abrupt("return",this.filterByCurrencySinceLimit(this.sortBy(l,"timestamp"),t,r,i));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchTransactionsHelper(t,r,i,a);case 6:return s=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),c=this.safeValue(s,"withdrawals",[]),u=this.parseTransactions(c,o,r,i),e.abrupt("return",this.filterByCurrencySinceLimit(u,t,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.fetchTransactionsHelper(t,r,i,a);case 6:return s=e.sent,o=void 0,void 0!==t&&(o=this.currency(t)),c=this.safeValue(s,"deposits",[]),u=this.parseTransactions(c,o,r,i),e.abrupt("return",this.filterByCurrencySinceLimit(u,t,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({COMPLETE:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeTimestamp(e,"timestamp"),r=this.safeString(e,"currency"),i=this.safeCurrencyCode(r),n=this.safeString(e,"status","pending"),a=this.safeString(e,"txid");if(void 0!==n){var s=n.split(": "),o=s.length;n=s[0],o>1&&void 0===a&&(a=s[1]),n=this.parseTransactionStatus(n)}var c="withdrawalNumber"in e?"withdrawal":"deposit",u=this.safeString(e,"type",c),d=this.safeString2(e,"withdrawalNumber","depositNumber"),h=this.safeFloat(e,"amount"),l=this.safeString(e,"address"),f=this.safeString(e,"paymentID"),p=this.safeFloat(e,"fee",0);return"withdrawal"===u&&(h-=p),{info:e,id:d,currency:i,amount:h,address:l,tag:f,status:n,type:u,updated:void 0,txid:a,timestamp:t,datetime:this.iso8601(t),fee:{currency:i,cost:p}}}},{key:"fetchPosition",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={currencyPair:i.id},e.next=7,this.privatePostGetMarginPosition(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t],o=this.extend({command:e},i);return"public"===t?s+="?"+this.urlencode(o):(this.checkRequiredCredentials(),o.nonce=this.nonce(),a=this.urlencode(o),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}),{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"error"in s){var u=s.error,d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new p(d)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ExchangeNotAvailable,v=l.BadResponse,m=l.BadRequest,y=l.InvalidOrder,g=l.InsufficientFunds,b=l.AuthenticationError,k=l.ArgumentsRequired,x=l.InvalidAddress,w=l.RateLimitExceeded,_=l.DDoSProtection,O=l.BadSymbol,T=r(13),S=T.TRUNCATE,C=T.TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"probit",name:"ProBit",countries:["SC","KR"],rateLimit:250,has:{CORS:!0,fetchTime:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchTickers:!0,fetchTicker:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTrades:!0,fetchBalance:!0,createOrder:!0,createMarketOrder:!0,cancelOrder:!0,fetchOrder:!0,fetchOpenOrders:!0,fetchClosedOrders:!0,fetchMyTrades:!0,fetchDepositAddress:!0,withdraw:!0,signIn:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","10m":"10m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","6h":"6h","12h":"12h","1d":"1D","1w":"1W","1M":"1M"},version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/79268032-c4379480-7ea2-11ea-80b3-dd96bb29fd0d.jpg",api:{accounts:"https://accounts.probit.com",public:"https://api.probit.com/api/exchange",private:"https://api.probit.com/api/exchange"},www:"https://www.probit.com",doc:["https://docs-en.probit.com","https://docs-ko.probit.com"],fees:"https://support.probit.com/hc/en-us/articles/360020968611-Trading-Fees",referral:"https://www.probit.com/r/34608773"},api:{public:{get:["market","currency","currency_with_platform","time","ticker","order_book","trade","candle"]},private:{post:["new_order","cancel_order","withdrawal"],get:["balance","order","open_order","order_history","trade_history","deposit_address"]},accounts:{post:["token"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{UNAUTHORIZED:b,INVALID_ARGUMENT:m,TRADING_UNAVAILABLE:p,NOT_ENOUGH_BALANCE:g,NOT_ALLOWED_COMBINATION:m,INVALID_ORDER:y,RATE_LIMIT_EXCEEDED:w,MARKET_UNAVAILABLE:p,INVALID_MARKET:O,MARKET_CLOSED:O,INVALID_CURRENCY:m,TOO_MANY_OPEN_ORDERS:_,DUPLICATE_ADDRESS:x}},requiredCredentials:{apiKey:!0,secret:!0},precisionMode:C,options:{createMarketBuyOrderRequiresPrice:!0,timeInForce:{limit:"gtc",market:"ioc"}},commonCurrencies:{BTCBEAR:"BEAR",BTCBULL:"BULL",CBC:"CryptoBharatCoin",HBC:"Hybrid Bank Cash",UNI:"UNICORN Token"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetMarket(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",[]),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"id"),u=this.safeString(o,"base_currency_id"),d=this.safeString(o,"quote_currency_id"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(o,"closed",!1),v=!p,m=this.safeInteger(o,"quantity_precision"),y=this.safeInteger(o,"cost_precision"),g={amount:1/Math.pow(10,m),price:this.safeFloat(o,"price_increment"),cost:1/Math.pow(10,y)},b=this.safeFloat(o,"taker_fee_rate"),k=this.safeFloat(o,"maker_fee_rate"),a.push({id:c,info:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:v,precision:g,taker:b/100,maker:k/100,limits:{amount:{min:this.safeFloat(o,"min_quantity"),max:this.safeFloat(o,"max_quantity")},price:{min:this.safeFloat(o,"min_price"),max:this.safeFloat(o,"max_price")},cost:{min:this.safeFloat(o,"min_cost"),max:this.safeFloat(o,"max_cost")}}});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=I.length>0&&void 0!==I[0]?I[0]:{},e.next=3,this.publicGetCurrencyWithPlatform(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a={},s=0;s<n.length;s++){for(o=n[s],c=this.safeString(o,"id"),u=this.safeCurrencyCode(c),d=this.safeValue(o,"display_name"),h=this.safeString(d,"en-us"),l=this.safeValue(o,"platform",[]),f=this.sortBy(l,"priority"),p=this.safeValue(f,0,{}),v=this.safeInteger(p,"precision"),m=this.safeValue(p,"deposit_suspended"),y=this.safeValue(p,"withdrawal_suspended"),g=!(m&&y),b=this.safeValue(p,"withdrawal_fee",{}),k=[],x=0;x<b.length;x++)w=b[x],_=this.safeFloat(w,"amount"),O=this.safeInteger(w,"priority"),void 0!==_&&void 0!==O&&k.push(w);T=this.sortBy(k,"priority"),S=this.safeValue(T,0,{}),C=this.safeFloat(S,"amount"),a[u]={id:c,code:u,info:o,name:h,active:g,fee:C,precision:v,limits:{amount:{min:Math.pow(10,-v),max:Math.pow(10,v)},price:{min:Math.pow(10,-v),max:Math.pow(10,v)},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(p,"min_deposit_amount"),max:void 0},withdraw:{min:this.safeFloat(p,"min_withdrawal_amount"),max:void 0}}}}return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a={info:n},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency_id"),u=this.safeCurrencyCode(c),(d=this.account()).total=this.safeFloat(o,"total"),d.free=this.safeFloat(o,"available"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={market_id:n.id},e.next=8,this.publicGetOrderBook(this.extend(a,r));case 8:return s=e.sent,o=this.safeValue(s,"data",[]),c=this.groupBy(o,"side"),e.abrupt("return",this.parseOrderBook(c,void 0,"buy","sell","price","quantity"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return n={},void 0!==t&&(a=this.marketIds(t),n.market_ids=a.join(",")),e.next=8,this.publicGetTicker(this.extend(n,r));case 8:return s=e.sent,o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseTickers(o,t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market_ids:n.id},e.next=7,this.publicGetTicker(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),void 0!==(c=this.safeValue(o,0))){e.next=12;break}throw new v(this.id+" fetchTicker() returned an empty response");case 12:return e.abrupt("return",this.parseTicker(c,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeString(e,"market_id"),n=this.safeSymbol(i,t,"-"),a=this.safeFloat(e,"last"),s=this.safeFloat(e,"change"),o=void 0,c=void 0;void 0!==s&&void 0!==a&&(o=s/(c=a-s)*100);var u=this.safeFloat(e,"base_volume"),d=this.safeFloat(e,"quote_volume"),h=this.vwap(u,d);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:h,open:c,close:a,last:a,previousClose:void 0,change:s,percentage:o,average:void 0,baseVolume:u,quoteVolume:d,info:e}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={limit:100,start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds())},void 0!==t&&(s=this.market(t),o.market_id=s.id),void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=13,this.privateGetTradeHistory(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market_id:s.id,limit:100,start_time:"1970-01-01T00:00:00.000Z",end_time:this.iso8601(this.milliseconds())},void 0!==r&&(o.start_time=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=11,this.publicGetTrade(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"time")),i=this.safeString(e,"id"),n=void 0;if(void 0!==i){var a=i.split(":");n=this.safeString(a,0)}n=this.safeString(e,"market_id",n);var s=this.safeSymbol(n,t,"-"),o=this.safeString(e,"side"),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"quantity"),d=void 0;void 0!==c&&void 0!==u&&(d=c*u);var h=this.safeString(e,"order_id"),l=this.safeFloat(e,"fee_amount"),f=void 0;if(void 0!==l){var p=this.safeString(e,"fee_currency_id"),v=this.safeCurrencyCode(p);f={cost:l,currency:v}}return{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:s,order:h,type:void 0,side:o,takerOrMaker:void 0,price:c,amount:u,cost:d,fee:f}}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetTime(t);case 3:return r=e.sent,n=this.parse8601(this.safeString(r,"data")),e.abrupt("return",n);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"normalizeOHLCVTimestamp",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.parseTimeframe(t);if("1M"===t){var n=this.iso8601(e),a=n.split("-"),s=this.safeString(a,0),o=this.safeInteger(a,1);return r&&(o=this.sum(o,1)),s+"-"+(o=o<10?"0"+o.toString():o.toString())+"-01T00:00:00.000Z"}if("1w"===t){var c=259200,u=(e=parseInt(e/1e3))-c,d=this.integerDivide(u,i),h=this.sum(c,d*i);return r&&(h=this.sum(h,i)),this.iso8601(1e3*h)}return e=parseInt(e/1e3),e=i*parseInt(e/i),r&&(e=this.sum(e,i)),this.iso8601(1e3*e)}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=b.length>1&&void 0!==b[1]?b[1]:"1m",n=b.length>2&&void 0!==b[2]?b[2]:void 0,a=b.length>3&&void 0!==b[3]?b[3]:void 0,s=b.length>4&&void 0!==b[4]?b[4]:{},e.next=6,this.loadMarkets();case 6:if(o=this.market(t),c=this.timeframes[r],a=void 0===a?100:a,u=this.sum(a,1),u=Math.min(1e3,u),d={market_ids:o.id,interval:c,sort:"asc",limit:u},h=this.milliseconds(),l=this.parseTimeframe(r),f=n,p=h,void 0!==n){e.next=24;break}if(void 0!==a){e.next=21;break}throw new k(this.id+" fetchOHLCV() requires either a since argument or a limit argument");case 21:f=h-a*l*1e3;case 22:e.next=25;break;case 24:p=void 0===a?h:this.sum(n,this.sum(a,1)*l*1e3);case 25:return v=this.normalizeOHLCVTimestamp(f,r),m=this.normalizeOHLCVTimestamp(p,r,!0),d.start_time=v,d.end_time=m,e.next=31,this.publicGetCandle(this.extend(d,s));case 31:return y=e.sent,g=this.safeValue(y,"data",[]),e.abrupt("return",this.parseOHLCVs(g,o,r,n,a));case 34:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"start_time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"base_volume")]}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return r=this.parse8601(r),s={},o=void 0,void 0!==t&&(o=this.market(t),s.market_id=o.id),e.next=12,this.privateGetOpenOrder(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseOrders(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={start_time:this.iso8601(0),end_time:this.iso8601(this.milliseconds()),limit:100},o=void 0,void 0!==t&&(o=this.market(t),s.market_id=o.id),r&&(s.start_time=this.iso8601(r)),n&&(s.limit=n),e.next=13,this.privateGetOrderHistory(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseOrders(u,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:{},void 0!==r){e.next=4;break}throw new k(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={market_id:a.id},void 0!==(o=this.safeString2(n,"clientOrderId","client_order_id"))?s.client_order_id=o:s.order_id=t,c=this.omit(n,["clientOrderId","client_order_id"]),e.next=13,this.privateGetOrder(this.extend(s,c));case 13:return u=e.sent,d=this.safeValue(u,"data",[]),h=this.safeValue(d,0),e.abrupt("return",this.parseOrder(h,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({open:"open",cancelled:"canceled",filled:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parseOrderStatus(this.safeString(e,"status")),i=this.safeString(e,"id"),n=this.safeString(e,"type"),a=this.safeString(e,"side"),s=this.safeString(e,"market_id"),o=this.safeSymbol(s,t,"-"),c=this.parse8601(this.safeString(e,"time")),u=this.safeFloat(e,"limit_price"),d=this.safeFloat(e,"filled_quantity"),h=this.safeFloat(e,"open_quantity"),l=this.safeFloat(e,"cancelled_quantity");void 0!==l&&(h=this.sum(h,l));var f=this.safeFloat(e,"quantity",this.sum(d,h)),p=this.safeFloat2(e,"filled_cost","cost");"market"===n&&(u=void 0);var v=this.safeString(e,"client_order_id");""===v&&(v=void 0);var m=this.safeStringUpper(e,"time_in_force");return this.safeOrder({id:i,info:e,clientOrderId:v,timestamp:c,datetime:this.iso8601(c),lastTradeTimestamp:void 0,symbol:o,type:n,timeInForce:m,side:a,status:r,price:u,stopPrice:void 0,amount:f,filled:d,remaining:h,average:void 0,cost:p,fee:void 0,trades:void 0})}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,S,this.markets[e].precision.cost,this.precisionMode)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,g,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x.length>4&&void 0!==x[4]?x[4]:void 0,o=x.length>5&&void 0!==x[5]?x[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=this.safeValue(this.options,"timeInForce"),d=this.safeValue(u,r),h=this.safeString2(o,"timeInForce","time_in_force",d),l={market_id:c.id,type:r,side:n,time_in_force:h},void 0!==(f=this.safeString2(o,"clientOrderId","client_order_id"))&&(l.client_order_id=f),p=void 0,"limit"!==r){e.next=17;break}l.limit_price=this.priceToPrecision(t,s),l.quantity=this.amountToPrecision(t,a),e.next=36;break;case 17:if("market"!==r){e.next=36;break}if("buy"!==n){e.next=35;break}if(v=this.safeFloat(o,"cost"),!this.safeValue(this.options,"createMarketBuyOrderRequiresPrice",!0)){e.next=30;break}if(void 0===s){e.next=26;break}void 0===v&&(v=a*s),e.next=28;break;case 26:if(void 0!==v){e.next=28;break}throw new y(this.id+" createOrder() requires the price argument for market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false and supply the total cost value in the 'amount' argument or in the 'cost' extra parameter (the exchange-specific behaviour)");case 28:e.next=31;break;case 30:v=void 0===v?a:v;case 31:p=this.costToPrecision(t,v),l.cost=p,e.next=36;break;case 35:l.quantity=this.amountToPrecision(t,a);case 36:return m=this.omit(o,["timeInForce","time_in_force","clientOrderId","client_order_id"]),e.next=39,this.privatePostNewOrder(this.extend(l,m));case 39:return g=e.sent,b=this.safeValue(g,"data"),k=this.parseOrder(b,c),"market"===r&&"buy"===n&&(k.amount=void 0,k.cost=parseFloat(p),k.remaining=void 0),e.abrupt("return",k);case 44:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},void 0!==r){e.next=4;break}throw new k(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={market_id:a.id,order_id:t},e.next=10,this.privatePostCancelOrder(this.extend(s,n));case 10:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseOrder(c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"address"),r=this.safeString(e,"destination_tag"),i=this.safeString(e,"currency_id"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency_id:n.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data",[]),void 0!==(c=this.safeValue(o,0))){e.next=12;break}throw new x(this.id+" fetchDepositAddress returned an empty response");case 12:return e.abrupt("return",this.parseDepositAddress(c,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddresses",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.loadMarkets();case 4:if(n={},t){for(a=[],s=0;s<t.length;s++)o=this.currency(t[s]),a.push(o.id);n.currency_id=t.join(",")}return e.next=8,this.privateGetDepositAddress(this.extend(n,r));case 8:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseDepositAddresses(u));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddresses",value:function(e){for(var t={},r=0;r<e.length;r++){var i=this.parseDepositAddress(e[r]);t[i.currency]=i}return t}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),void 0===a&&(a=""),c={currency_id:o.id,address:n,destination_tag:a,amount:this.currencyToPrecision(t,r)},e.next=10,this.privatePostWithdrawal(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data"),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.safeFloat(e,"amount"),i=this.safeString(e,"address"),n=this.safeString(e,"destination_tag"),a=this.safeString(e,"hash"),s=this.parse8601(this.safeString(e,"time")),o=this.safeString(e,"type"),c=this.safeString(e,"currency_id"),u=this.safeCurrencyCode(c),d=this.parseTransactionStatus(this.safeString(e,"status")),h=this.safeFloat(e,"fee"),l=void 0;return void 0!==h&&0!==h&&(l={currency:u,cost:h}),{id:t,currency:u,amount:r,addressFrom:void 0,address:i,addressTo:i,tagFrom:void 0,tag:n,tagTo:n,status:d,type:o,txid:a,timestamp:s,datetime:this.iso8601(s),fee:l,info:e}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({requested:"pending",pending:"pending",confirming:"pending",confirmed:"pending",applying:"pending",done:"ok",cancelled:"canceled",cancelling:"canceled"},e,e)}},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/",o=this.omit(i,this.extractParams(e));if("accounts"===t){this.checkRequiredCredentials(),s+=this.implodeParams(e,i);var c=this.apiKey+":"+this.secret,u=this.stringToBase64(c);n={Authorization:"Basic "+this.decode(u),"Content-Type":"application/json"},Object.keys(o).length&&(a=this.json(o))}else if(s+=this.version+"/","public"===t)s+=this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){var d=this.milliseconds();this.checkRequiredCredentials();var h=this.safeInteger(this.options,"expires");if(void 0===h||h<d)throw new b(this.id+" access token expired, call signIn() method");var l=this.safeString(this.options,"accessToken");n={Authorization:"Bearer "+l},s+=this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),n["Content-Type"]="application/json")}return{url:s,method:r,body:a,headers:n}}},{key:"signIn",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},this.checkRequiredCredentials(),r={grant_type:"client_credentials"},e.next=5,this.accountsPostToken(this.extend(r,t));case 5:return n=e.sent,a=this.safeInteger(n,"expires_in"),s=this.safeString(n,"access_token"),this.options.accessToken=s,this.options.expires=this.sum(this.milliseconds(),1e3*a),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"errorCode"in s){var u=this.safeString(s,"errorCode"),d=this.safeString(s,"message");if(void 0!==u){var h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,h),this.throwBroadlyMatchedException(this.exceptions.exact,u,h),new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.InvalidOrder,v=l.InsufficientFunds,m=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"qtrade",name:"qTrade",countries:["US"],rateLimit:1e3,version:"v1",urls:{logo:"https://user-images.githubusercontent.com/51840849/80491487-74a99c00-896b-11ea-821e-d307e832f13e.jpg",api:"https://api.qtrade.io",www:"https://qtrade.io",doc:"https://qtrade-exchange.github.io/qtrade-docs",referral:"https://qtrade.io/?ref=BKOQWVFGRH2C"},has:{CORS:!1,fetchTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchMarkets:!0,fetchCurrencies:!0,fetchBalance:!0,fetchOrderBook:!0,fetchOrder:!0,fetchOrders:!0,fetchMyTrades:!0,fetchClosedOrders:!0,fetchOpenOrders:!0,fetchOHLCV:!0,createOrder:!0,cancelOrder:!0,createMarketOrder:!1,withdraw:!0,fetchDepositAddress:!0,fetchTransactions:!1,fetchDeposits:!0,fetchWithdrawals:!0,fetchDeposit:!0,fetchWithdrawal:!0},timeframes:{"5m":"fivemin","15m":"fifteenmin","30m":"thirtymin","1h":"onehour","2h":"twohour","4h":"fourhour","1d":"oneday"},api:{public:{get:["ticker/{market_string}","tickers","currency/{code}","currencies","common","market/{market_string}","markets","market/{market_string}/trades","orderbook/{market_string}","market/{market_string}/ohlcv/{interval}"]},private:{get:["me","balances","balances_all","market/{market_string}","orders","order/{order_id}","trades","withdraw/{withdraw_id}","withdraws","deposit/{deposit_id}","deposits","transfers"],post:["cancel_order","withdraw","deposit_address/{currency}","sell_limit","buy_limit"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:.0025,maker:0},funding:{withdraw:{}}},exceptions:{exact:{invalid_auth:m,insuff_funds:v}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"markets",[]),s=[],o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"market_string"),d=this.safeInteger(c,"id"),h=this.safeString(c,"market_currency"),l=this.safeString(c,"base_currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=f+"/"+p,m={amount:this.safeInteger(c,"market_precision"),price:this.safeInteger(c,"base_precision")},y=this.safeValue(c,"can_view",!1),g=this.safeValue(c,"can_trade",!1),b=g&&y,s.push({symbol:v,id:u,numericId:d,baseId:h,quoteId:l,base:f,quote:p,active:b,precision:m,taker:this.safeFloat(c,"taker_fee"),maker:this.safeFloat(c,"maker_fee"),limits:{amount:{min:this.safeFloat(c,"minimum_buy_value"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"currencies",[]),s={},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"code"),d=this.safeCurrencyCode(u),h=this.safeString(c,"long_name"),l=this.safeString(c,"type"),f=this.safeValue(c,"can_withdraw",!0),p=this.safeValue(c,"deposit_disabled",!1),v=this.safeValue(c,"config",{}),m=this.safeString(c,"status"),y=f&&"ok"===m&&!p,s[d]={id:u,code:d,info:c,type:l,name:h,fee:this.safeFloat(v,"withdraw_fee"),precision:this.safeInteger(c,"precision"),active:y,limits:{amount:{min:this.safeFloat(c,"minimum_order"),max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"time")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"market_volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"5m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market_string:o.id,interval:this.timeframes[r]},e.next=10,this.publicGetMarketMarketStringOhlcvInterval(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"slices",[]),e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w.length>1&&void 0!==w[1]?w[1]:void 0,r=w.length>2&&void 0!==w[2]?w[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.marketId(t),a={market_string:n},e.next=8,this.publicGetOrderbookMarketString(this.extend(a,r));case 8:for(s=e.sent,o=this.safeValue(s,"data",{}),c={},u={buy:"bids",sell:"asks"},d=Object.keys(u),h=0;h<d.length;h++){for(l=d[h],f=u[l],p=this.safeValue(o,l,{}),v=Object.keys(p),m=[],y=0;y<v.length;y++)g=v[y],b=this.safeFloat(v,y),k=this.safeFloat(p,g),m.push([b,k]);c[f]=m}return x=this.safeIntegerProduct(o,"last_change",.001),e.abrupt("return",this.parseOrderBook(c,x));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id_hr"),i=this.safeSymbol(r,t,"_"),n=this.safeIntegerProduct(e,"last_change",.001),a=this.safeFloat(e,"day_open"),s=this.safeFloat(e,"last"),o=this.safeFloat(e,"day_change"),c=void 0,u=void 0,d=this.safeFloat(e,"day_avg_price");void 0!==o&&(c=100*o,void 0!==a&&(u=o*a)),void 0===d&&void 0!==s&&void 0!==a&&(d=this.sum(s,a)/2);var h=this.safeFloat(e,"day_volume_market"),l=this.safeFloat(e,"day_volume_base"),f=this.vwap(h,l);return{symbol:i,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"day_high"),low:this.safeFloat(e,"day_low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:f,open:a,close:s,last:s,previousClose:void 0,change:u,percentage:c,average:d,baseVolume:h,quoteVolume:l,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"data",{}),s=this.safeValue(a,"markets",[]),o={},c=0;c<s.length;c++)u=this.parseTicker(s[c]),d=u.symbol,o[d]=u;return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market_string:n.id},e.next=7,this.publicGetTickerMarketString(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market_string:s.id},e.next=9,this.publicGetMarketMarketStringTrades(this.extend(o,a));case 9:return c=e.sent,u=this.safeValue(c,"data",{}),d=this.safeValue(u,"trades",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={desc:!0},o=void 0,void 0!==(c=this.safeValue(a,"market_id"))?s.market_id=c:void 0!==t&&(o=this.market(t),s.market_string=o.id),e.next=12,this.privateGetTrades(this.extend(s,a));case 12:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"trades",[]),e.abrupt("return",this.parseTrades(h,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeIntegerProduct(e,"created_at_ts",.001);void 0===i&&(i=this.parse8601(this.safeString(e,"created_at")));var n=this.safeString(e,"side"),a=this.safeString(e,"market_string"),s=this.safeSymbol(a,t,"_"),o=this.safeFloat2(e,"base_volume","base_amount"),c=this.safeFloat(e,"price"),u=this.safeFloat2(e,"market_amount","amount");void 0===o&&void 0!==u&&void 0!==c&&void 0!==c&&(o=c*u);var d=void 0,h=this.safeFloat(e,"base_fee");if(void 0!==h){var l=void 0===t?void 0:t.quote;d={currency:l,cost:h}}var f=this.safeValue(e,"taker",!0),p=f?"taker":"maker",v=this.safeString(e,"order_id"),m={id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:s,order:v,type:void 0,side:n,takerOrMaker:p,price:c,amount:u,cost:o,fee:d};return m}},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalancesAll(t);case 5:for(r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"balances",[]),s={info:r},o=0;o<a.length;o++)c=a[o],u=this.safeString(c,"currency"),d=this.safeCurrencyCode(u),(h=d in s?s[d]:this.account()).free=this.safeFloat(c,"balance"),h.used=0,s[d]=h;for(a=this.safeValue(n,"order_balances",[]),l=0;l<a.length;l++)f=a[l],p=this.safeString(f,"currency"),v=this.safeCurrencyCode(p),(m=v in s?s[v]:this.account()).used=this.safeFloat(f,"balance"),s[v]=m;return e.abrupt("return",this.parseBalance(s));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=v.length>4&&void 0!==v[4]?v[4]:void 0,o=v.length>5&&void 0!==v[5]?v[5]:{},"limit"===r){e.next=4;break}throw new p(this.id+" createOrder() allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={amount:this.amountToPrecision(t,a),market_id:c.numericId,price:this.priceToPrecision(t,s)},d="sell"===n?"privatePostSellLimit":"privatePostBuyLimit",e.next=11,this[d](this.extend(u,o));case 11:return h=e.sent,l=this.safeValue(h,"data",{}),f=this.safeValue(l,"order",{}),e.abrupt("return",this.parseOrder(f,c));case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parse8601(this.safeString(e,"created_at")),n=this.safeString(e,"order_type"),a=void 0,s=void 0;if(void 0!==n){var o=n.split("_");s=this.safeString(o,0),a=this.safeString(o,1)}var c=this.safeFloat(e,"price"),u=this.safeFloat(e,"market_amount"),d=this.safeFloat(e,"market_amount_remaining"),h=this.safeValue(e,"open",!1),l=this.safeString(e,"close_reason"),f=void 0;f=h?"open":"canceled"===l?"canceled":"closed";var p=this.safeString(e,"market_string"),v=(t=this.safeMarket(p,t,"_")).symbol,m=this.safeValue(e,"trades",[]),y=this.parseTrades(m,t,void 0,void 0,{order:r,side:s,type:a});return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,symbol:v,type:a,timeInForce:void 0,postOnly:void 0,side:s,price:c,stopPrice:void 0,average:void 0,amount:u,remaining:d,filled:void 0,status:f,fee:void 0,fees:void 0,cost:void 0,trades:y})}},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={id:parseInt(t)},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrderOrderId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"order",{}),e.abrupt("return",this.parseOrder(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==(c=this.safeValue(a,"market_id"))?s.market_id=c:void 0!==t&&(o=this.market(t),s.market_string=o.id),e.next=12,this.privateGetOrders(this.extend(s,a));case 12:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.safeValue(d,"orders",[]),e.abrupt("return",this.parseOrders(h,o,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={open:!0},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={open:!1},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0===t?void 0:t.code,i=this.safeString(e,"address"),n=void 0;if(void 0!==i){var a=i.split(":");i=this.safeString(a,0),n=this.safeString(a,1)}return this.checkAddress(i),{currency:r,address:i,tag:n,info:e}}},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostDepositAddressCurrency(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseDepositAddress(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposit",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={deposit_id:t},e.next=7,this.privateGetDepositDepositId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"deposit",{}),e.abrupt("return",this.parseTransaction(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetDeposits(a);case 10:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"deposits",[]),e.abrupt("return",this.parseTransactions(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawal",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return n={withdraw_id:t},e.next=7,this.privateGetWithdrawWithdrawId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"withdraw",{}),e.abrupt("return",this.parseTransaction(o));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.currency(t)),e.next=10,this.privateGetWithdraws(a);case 10:return o=e.sent,c=this.safeValue(o,"data",{}),u=this.safeValue(c,"withdraws",[]),e.abrupt("return",this.parseTransactions(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=this.parse8601(this.safeString(e,"created_at")),r=this.safeString(e,"id"),i=this.safeValue(e,"network_data",{}),n=this.safeValue(i,"unsigned_tx",{}),a=this.safeString(n,"from"),s=this.safeString(i,"txid"),o=this.safeString(e,"address"),c=void 0;if(void 0!==o){var u=o.split(":"),d=u.length;d>1&&(o=this.safeString(u,0),c=this.safeString(u,1))}var h=o,l=void 0,f=c,p=this.safeValue(e,"cancel_requested"),v=void 0===p?"deposit":"withdrawal",m=this.safeFloat(e,"amount"),y=this.safeString(e,"currency"),g=this.safeCurrencyCode(y),b=this.parseTransactionStatus(this.safeString(e,"status")),k=this.safeString(e,"code");p?b="canceled":void 0===b&&(b=this.parseTransactionStatus(k));var x=void 0;return{info:e,id:r,txid:s,timestamp:t,datetime:this.iso8601(t),addressFrom:a,addressTo:h,address:o,tagFrom:l,tagTo:f,tag:c,type:v,amount:m,currency:g,status:b,updated:void 0,fee:x}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({initiated:"pending",needs_create:"pending",credited:"ok",confirmed:"ok"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=4,this.loadMarkets();case 4:return o=this.currency(t),c={address:n,amount:r,currency:o.id},void 0!==a&&(c.address+=":"+a),e.next=9,this.privatePostWithdraw(this.extend(c,s));case 9:return u=e.sent,d=this.safeValue(u,"data",{}),h=this.parseTransaction(d),e.abrupt("return",this.extend(h,{currency:t,address:n,addressTo:n,tag:a,tagTo:a,amount:r}));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/";"private"===t&&(s+="user/"),s+=this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("POST"===r?a=this.json(o):Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){var c=this.milliseconds().toString(),u="POST"===r?a:"",d=[r,s,c,u,this.secret].join("\n"),h=this.hash(this.encode(d),"sha256","base64"),l=this.apiKey;"string"!==typeof l&&(l=l.toString());var f="HMAC-SHA256 "+l+":"+h;n={Authorization:f,"HMAC-Timestamp":c},"POST"===r&&(n["Content-Type"]="application/json")}return{url:s=this.urls.api+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"errors",[]);if(!(u.length<1)){for(var d=this.id+" "+a,h=0;h<u.length;h++){var l=u[h],p=this.safeString(l,"code");this.throwExactlyMatchedException(this.exceptions.exact,p,d)}throw new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(13).ROUND,p=r(10),v=p.ExchangeError,m=p.ArgumentsRequired,y=p.AuthenticationError,g=p.InsufficientFunds,b=p.InvalidOrder,k=p.OrderNotFound;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"rightbtc",name:"RightBTC",countries:["AE"],has:{cancelOrder:!0,createOrder:!0,privateAPI:!1,fetchBalance:!0,fetchClosedOrders:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:"emulated",fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},timeframes:{"1m":"min1","5m":"min5","15m":"min15","30m":"min30","1h":"hr1","1d":"day1","1w":"week"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87182092-1f372700-c2ec-11ea-8f9e-01b4d3ff8941.jpg",api:"https://www.rightbtc.com/api",www:"https://www.rightbtc.com",doc:["https://docs.rightbtc.com/api/"]},api:{public:{get:["trading_pairs","ticker/{trading_pair}","tickers","depth/{trading_pair}","depth/{trading_pair}/{count}","trades/{trading_pair}","trades/{trading_pair}/{count}","candlestick/latest/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}","candlestick/{timeSymbol}/{trading_pair}/{count}"]},trader:{get:["balance/{symbol}","balances","deposits/{asset}/{page}","withdrawals/{asset}/{page}","orderpage/{trading_pair}/{cursor}","orders/{trading_pair}/{ids}","history/{trading_pair}/{ids}","historys/{trading_pair}/{page}","trading_pairs"],post:["order"],delete:["order/{trading_pair}/{ids}"]}},fees:{trading:{maker:.001,taker:.002},funding:{withdraw:{ETP:.01,BTC:5e-4,ETH:.005,ETC:.01,STORJ:3,LTC:.01,ZEC:.001,BCC:.001,XRB:0,NXS:.1}}},commonCurrencies:{XRB:"NANO"},exceptions:{ERR_USERTOKEN_NOT_FOUND:y,ERR_ASSET_NOT_EXISTS:v,ERR_ASSET_NOT_AVAILABLE:v,ERR_BALANCE_NOT_ENOUGH:g,ERR_CREATE_ORDER:b,ERR_CANDLESTICK_DATA:v}})}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetTradingPairs(t);case 3:for(r=e.sent,i=Object.keys(r),a=[],s=0;s<i.length;s++)o=i[s],c=r[o],u=this.safeString(c,"bid_asset_symbol"),d=this.safeString(c,"ask_asset_symbol"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p={amount:this.safeInteger(c,"bid_asset_decimals"),price:this.safeInteger(c,"ask_asset_decimals")},a.push({id:o,symbol:f,base:h,quote:l,baseId:u,quoteId:d,active:!0,precision:p,limits:{amount:{min:Math.pow(10,-p.amount),max:Math.pow(10,p.price)},price:{min:Math.pow(10,-p.price),max:Math.pow(10,p.price)},cost:{min:void 0,max:void 0}},info:c});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"divideSafeFloat",value:function(e,t,r){var i=this.safeFloat(e,t);return void 0!==i?i/r:i}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=t.symbol,i=this.safeInteger(e,"date"),n=this.divideSafeFloat(e,"last",1e8),a=this.divideSafeFloat(e,"high",1e8),s=this.divideSafeFloat(e,"low",1e8),o=this.divideSafeFloat(e,"buy",1e8),c=this.divideSafeFloat(e,"sell",1e8),u=this.divideSafeFloat(e,"vol24h",1e8);return{symbol:r,timestamp:i,datetime:this.iso8601(i),high:a,low:s,bid:o,bidVolume:void 0,ask:c,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:u,quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={trading_pair:i.id},e.next=7,this.publicGetTickerTradingPair(this.extend(a,r));case 7:if(s=e.sent,void 0!==(o=this.safeValue(s,"result"))){e.next=11;break}throw new v(this.id+" fetchTicker returned an empty response for symbol "+t);case 11:return e.abrupt("return",this.parseTicker(o,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:i=e.sent,a=i.result,s={},o=0;case 10:if(!(o<a.length)){e.next=21;break}if(c=a[o],(u=c.market)in this.marketsById){e.next=15;break}return e.abrupt("continue",18);case 15:d=this.marketsById[u],h=d.symbol,s[h]=this.parseTicker(c,d);case 18:o++,e.next=10;break;case 21:return e.abrupt("return",this.filterByArray(s,"symbol",t));case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=g.length>1&&void 0!==g[1]?g[1]:void 0,a=g.length>2&&void 0!==g[2]?g[2]:{},e.next=4,this.loadMarkets();case 4:return s={trading_pair:this.marketId(t)},o="publicGetDepthTradingPair",void 0!==r&&(o+="Count",s.count=r),e.next=9,this[o](this.extend(s,a));case 9:for(c=e.sent,u={},d=["bid","ask"],h=0;h<d.length;h++)for(l=d[h],u[l]=[],f=0;f<c.result[l].length;f++)p=i(c.result[l][f],3),v=p[0],m=p[1],y=p[2],u[l].push([v/1e8,m/1e8,y/1e8]);return e.abrupt("return",this.parseOrderBook(u,void 0,"bid","ask"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"date");void 0===r&&(r=this.parse8601(this.safeString(e,"created_at")));var i=this.safeString(e,"tid");i=this.safeString(e,"trade_id",i);var n=this.safeString(e,"order_id"),a=this.divideSafeFloat(e,"price",1e8),s=this.safeFloat(e,"amount");void 0!==(s=this.safeFloat(e,"quantity",s))&&(s/=1e8);var o=this.safeString(e,"trading_pair"),c=this.safeSymbol(o,t),u=this.costToPrecision(c,a*s);u=parseFloat(u);var d=this.safeStringLower(e,"side");return"b"===d?d="buy":"s"===d&&(d="sell"),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,order:n,type:"limit",side:d,takerOrMaker:void 0,price:a,amount:s,cost:u,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={trading_pair:s.id},e.next=9,this.publicGetTradesTradingPair(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,0),parseFloat(e[2])/1e8,parseFloat(e[3])/1e8,parseFloat(e[4])/1e8,parseFloat(e[5])/1e8,parseFloat(e[1])/1e8]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:"5m",i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={trading_pair:o.id,timeSymbol:this.timeframes[r]},e.next=10,this.publicGetCandlestickTimeSymbolTradingPair(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"result",[]),e.abrupt("return",this.parseOHLCVs(d,o,r,i,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.traderGetBalances(t);case 5:for(r=e.sent,i={info:r},a=this.safeValue(r,"result",[]),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"asset"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.divideSafeFloat(o,"balance",1e8),d.used=this.divideSafeFloat(o,"frozen",1e8),i[u]=d;return e.abrupt("return",this.parseBalance(i));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=h.length>4&&void 0!==h[4]?h[4]:void 0,o=h.length>5&&void 0!==h[5]?h[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={trading_pair:c.id,quantity:parseInt(this.decimalToPrecision(1e8*a,f,0,this.precisionMode)),limit:parseInt(this.decimalToPrecision(1e8*s,f,0,this.precisionMode)),type:r.toUpperCase(),side:i.toUpperCase()},e.next=8,this.traderPostOrder(this.extend(u,o));case 8:return d=e.sent,e.abrupt("return",this.parseOrder(d));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,i=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={trading_pair:a.id,ids:t},e.next=10,this.traderDeleteOrderTradingPairIds(this.extend(s,i));case 10:return o=e.sent,e.abrupt("return",o);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({NEW:"open",TRADE:"closed",CANCEL:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString(e,"trading_pair"),a=this.safeSymbol(n,t),s=this.safeInteger(e,"created");void 0===s&&(s=this.parse8601(this.safeString(e,"created_at"))),"time"in e?s=e.time:"transactTime"in e&&(s=e.transactTime);var o=this.safeFloat2(e,"limit","price");void 0!==o&&(o/=1e8);var c=this.divideSafeFloat(e,"quantity",1e8),u=this.divideSafeFloat(e,"filled_quantity",1e8),d=this.divideSafeFloat(e,"rest",1e8),h=this.divideSafeFloat(e,"cost",1e8),l="limit",f=this.safeStringLower(e,"side"),p=this.divideSafeFloat(e,"min_fee",1e8),v=void 0;if(void 0!==p){var m=void 0;void 0!==t&&(m=t.quote),v={rate:this.safeFloat(e,"fee"),cost:p,currency:m}}var y=void 0;return this.safeOrder({info:e,id:r,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:o,stopPrice:void 0,amount:c,cost:h,filled:u,remaining:d,status:i,fee:v,trades:y,average:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new m(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={trading_pair:a.id,ids:t},e.next=10,this.traderGetOrdersTradingPairIds(this.extend(s,i));case 10:if(o=e.sent,c=this.parseOrders(o.result,a),u=this.indexBy(c,"id"),t in u){e.next=15;break}throw new k(this.id+" fetchOrder could not find order "+t.toString()+" in open orders.");case 15:return e.abrupt("return",u[t]);case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={trading_pair:s.id,cursor:0},e.next=12,this.traderGetOrderpageTradingPairCursor(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseOrders(c.result.orders,s,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},s=this.safeString(a,"ids"),void 0!==t&&void 0!==s){e.next=7;break}throw new m(this.id+" fetchOrders() requires a 'symbol' argument and an extra 'ids' parameter. The 'ids' should be an array or a string of one or more order ids separated with slashes.");case 7:return Array.isArray(s)&&(s=s.join("/")),e.next=10,this.loadMarkets();case 10:return o=this.market(t),c={trading_pair:o.id,ids:s},e.next=14,this.traderGetHistoryTradingPairIds(this.extend(c,a));case 14:return u=e.sent,e.abrupt("return",this.parseOrders(u.result,void 0,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new m(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={trading_pair:s.id,page:0},e.next=12,this.traderGetHistorysTradingPairPage(this.extend(o,a));case 12:return c=e.sent,e.abrupt("return",this.parseTrades(c.result,void 0,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.urls.api+"/"+t+"/"+this.implodeParams(e,i);return"public"===t?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(this.checkRequiredCredentials(),n={apikey:this.apiKey,signature:this.secret},"GET"===r?Object.keys(s).length&&(o+="?"+this.urlencode(s)):(a=this.json(s),n["Content-Type"]="application/json")),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"status");if(void 0!==u)if("1"!==this.safeString(u,"success")){var d=this.safeString(u,"message"),h=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions,d,h),new v(h)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.AuthenticationError,p=l.ExchangeError,v=l.BadSymbol,m=l.BadRequest,y=l.InvalidOrder,g=l.ArgumentsRequired,b=l.OrderNotFound,k=l.InsufficientFunds,x=l.DDoSProtection,w=r(13).TICK_SIZE;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"ripio",name:"Ripio",countries:["AR","BR"],rateLimit:50,version:"v1",pro:!0,has:{CORS:!1,cancelOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/94507548-a83d6a80-0218-11eb-9998-28b9cec54165.jpg",api:{public:"https://api.exchange.ripio.com/api",private:"https://api.exchange.ripio.com/api"},www:"https://exchange.ripio.com",doc:["https://exchange.ripio.com/en/api/"],fees:"https://exchange.ripio.com/en/fee"},api:{public:{get:["rate/all/","rate/{pair}/","orderbook/{pair}/","tradehistory/{pair}/","pair/","currency/","orderbook/{pair}/depth/"]},private:{get:["balances/exchange_balances/","order/{pair}/{order_id}/","order/{pair}/","trade/{pair}/"],post:["order/{pair}/","order/{pair}/{order_id}/cancel/"]}},fees:{trading:{tierBased:!0,percentage:!0,taker:0,maker:0}},precisionMode:w,requiredCredentials:{apiKey:!0,secret:!1},exceptions:{exact:{},broad:{"Authentication credentials were not provided":f,"Disabled pair":v,"Invalid order type":y,"Your balance is not enough":k,"Order couldn't be created":p,"not found":b,"Invalid pair":v,"amount must be a number":m,"Total must be at least":y,"Account not found":m,"Wrong password provided":f,"User tokens limit":x,"Something unexpected ocurred":p,account_balance:m}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetPair(t);case 3:for(r=e.sent,n=[],a=this.safeValue(r,"results",[]),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"base"),u=this.safeString(o,"quote"),d=this.safeString(o,"symbol"),h=this.safeCurrencyCode(c),l=this.safeCurrencyCode(u),f=h+"/"+l,p={amount:this.safeFloat(o,"min_amount"),price:this.safeFloat(o,"price_tick")},v={amount:{min:this.safeFloat(o,"min_amount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(o,"min_value"),max:void 0}},m=this.safeValue(o,"enabled",!0),y=this.safeValue(o,"fees",[]),g=this.safeValue(y,0,{}),b=this.safeFloat(g,"maker_fee",0),k=this.safeFloat(g,"taker_fee",0),n.push({id:d,symbol:f,base:h,quote:l,baseId:c,quoteId:u,precision:p,maker:b,taker:k,limits:v,info:o,active:m});return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetCurrency(t);case 3:for(r=e.sent,n=this.safeValue(r,"results",[]),a={},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),d=this.safeString(o,"name"),h=this.safeValue(o,"enabled",!0),l=this.safeInteger(o,"decimal_places"),a[u]={id:c,code:u,name:d,info:o,active:h,fee:void 0,precision:l,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:void 0,max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"pair"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"last_price"),s=this.safeFloat(e,"avg");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:this.safeFloat(e,"bid_volume"),ask:this.safeFloat(e,"ask"),askVolume:this.safeFloat(e,"ask_volume"),vwap:void 0,open:void 0,close:a,last:a,previousClose:void 0,change:void 0,percentage:void 0,average:s,baseVolume:void 0,quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={pair:n.id},e.next=7,this.publicGetRatePair(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetRateAll(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),c=o.symbol,a[c]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetOrderbookPair(this.extend(n,r));case 7:return a=e.sent,(s=this.parseOrderBook(a,void 0,"buy","sell","price","amount")).nonce=this.safeInteger(a,"updated_id"),e.abrupt("return",s);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"timestamp");i=this.safeTimestamp(e,"created_at",i);var n=this.safeString(e,"side"),a=this.safeString(e,"taker_side"),s=a===n?"taker":"maker";void 0!==n&&(n=n.toLowerCase());var o=this.safeFloat2(e,"price","match_price"),c=this.safeFloat2(e,"amount","exchanged"),u=void 0;void 0!==c&&void 0!==o&&(u=c*o);var d=this.safeString(e,"pair");t=this.safeMarket(d,t);var h=this.safeFloat(e,s+"_fee"),l=this.safeString(e,s),f=void 0;return void 0!==h&&(f={cost:h,currency:"buy"===n?t.base:t.quote}),{id:r,order:l,timestamp:i,datetime:this.iso8601(i),symbol:t.symbol,type:void 0,side:n,price:o,amount:c,cost:u,takerOrMaker:s,fee:f,info:e}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTradehistoryPair(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalancesExchangeBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(s,"available"),u.used=this.safeFloat(s,"locked"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u=r.toUpperCase(),d=n.toUpperCase(),h={pair:c.id,order_type:u,side:d,amount:this.amountToPrecision(t,a)},"LIMIT"===u&&(h.limit_price=this.priceToPrecision(t,s)),e.next=11,this.privatePostOrderPair(this.extend(h,o));case 11:return l=e.sent,e.abrupt("return",this.parseOrder(l,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={pair:a.id,order_id:t},e.next=10,this.privatePostOrderPairOrderIdCancel(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new g(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={pair:a.id,order_id:t},e.next=10,this.privateGetOrderPairOrderId(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o,a));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.offset=n),e.next=13,this.privateGetOrderPair(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"results",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"OPEN,PART"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"CLOS,CANC,COMP"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({OPEN:"open",PART:"open",CLOS:"canceled",CANC:"canceled",COMP:"closed"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"order_id"),i=this.safeFloat(e,"amount"),n=this.safeFloat(e,"notional"),a=this.safeStringLower(e,"order_type"),s="market"===a?"fill_price":"limit_price",o=this.safeFloat(e,s),c=this.safeStringLower(e,"side"),u=this.parseOrderStatus(this.safeString(e,"status")),d=this.safeTimestamp(e,"created_at"),h=this.safeValue(e,"fill_price"),l=this.safeFloat(e,"filled"),f=void 0,p=this.safeValue(e,"fills"),v=void 0,m=void 0;if(void 0!==p){var y=p.length;if(y>0){l=0,n=0,v=this.parseTrades(p,t,void 0,void 0,{order:r,side:c});for(var g=0;g<v.length;g++){var b=v[g];l=this.sum(b.amount,l),n=this.sum(b.cost,n),m=b.timestamp}void 0===h&&l>0&&(h=n/l)}}void 0!==l&&(void 0===n&&void 0!==o&&(n=o*l),void 0!==i&&(f=Math.max(0,i-l)));var k=this.safeString(e,"pair"),x=this.safeSymbol(k,t,"_"),w=this.safeFloat(e,"stop_price");return{id:r,clientOrderId:void 0,info:e,timestamp:d,datetime:this.iso8601(d),lastTradeTimestamp:m,symbol:x,type:a,timeInForce:void 0,postOnly:void 0,side:c,price:o,stopPrice:w,amount:i,cost:n,average:h,filled:l,remaining:f,status:u,fee:void 0,trades:v}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new g(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==n&&(o.limit=n),e.next=13,this.privateGetTradePair(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"results",{}),d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(d,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/"+this.version+"/"+this.implodeParams(e,i),o=this.urls.api[t]+s,c=this.omit(i,this.extractParams(e));return"public"===t?Object.keys(c).length&&(o+="?"+this.urlencode(c)):"private"===t&&(this.checkRequiredCredentials(),"POST"===r?a=this.json(c):Object.keys(c).length&&(o+="?"+this.urlencode(c)),n={"Content-Type":"application/json",Authorization:"Bearer "+this.apiKey}),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"detail");if(void 0!==u){var d=this.id+" "+a;this.throwBroadlyMatchedException(this.exceptions.broad,u,d)}var h=this.safeValue(s,"errors");if(void 0!==h){for(var l=this.id+" "+a,f=Object.keys(h),v=0;v<f.length;v++){var m=f[v],y=this.safeValue(h,m,[]),g=this.safeString(y,0);this.throwBroadlyMatchedException(this.exceptions.broad,g,l)}throw new p(l)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10).ArgumentsRequired;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"southxchange",name:"SouthXchange",countries:["AR"],rateLimit:1e3,has:{cancelOrder:!0,CORS:!0,createDepositAddress:!0,createOrder:!0,fetchBalance:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27838912-4f94ec8a-60f6-11e7-9e5d-bbf9bd50a559.jpg",api:"https://www.southxchange.com/api",www:"https://www.southxchange.com",doc:"https://www.southxchange.com/Home/Api"},api:{public:{get:["markets","price/{symbol}","prices","book/{symbol}","trades/{symbol}"]},private:{post:["cancelMarketOrders","cancelOrder","getOrder","generatenewaddress","listOrders","listBalances","listTransactions","placeOrder","withdraw"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.001,taker:.003}},commonCurrencies:{BHD:"Bithold",GHOST:"GHOSTPRISM",MTC:"Marinecoin",SMT:"SmartNode"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=s[0],c=s[1],u=this.safeCurrencyCode(o),d=this.safeCurrencyCode(c),h=u+"/"+d,l=o+"/"+c,n.push({id:l,symbol:h,base:u,quote:d,baseId:o,quoteId:c,active:void 0,info:s,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostListBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"Currency"),c=this.safeCurrencyCode(o),u=this.safeFloat(s,"Deposited"),d=this.safeFloat(s,"Unconfirmed"),(h=this.account()).free=this.safeFloat(s,"Available"),h.total=this.sum(u,d),n[c]=h;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={symbol:this.marketId(t)},e.next=7,this.publicGetBookSymbol(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a,void 0,"BuyOrders","SellOrders","Price","Amount"));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=void 0;t&&(i=t.symbol);var n=this.safeFloat(e,"Last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:void 0,low:void 0,bid:this.safeFloat(e,"Bid"),bidVolume:void 0,ask:this.safeFloat(e,"Ask"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:this.safeFloat(e,"Variation24Hr"),average:void 0,baseVolume:this.safeFloat(e,"Volume24Hr"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetPrices(r);case 6:for(n=e.sent,a=this.indexBy(n,"Market"),s=Object.keys(a),o={},c=0;c<s.length;c++)u=s[c],d=this.safeMarket(u),h=d.symbol,l=a[u],o[h]=this.parseTicker(l,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={symbol:n.id},e.next=7,this.publicGetPriceSymbol(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,n));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e,t){var r=this.safeTimestamp(e,"At"),i=this.safeFloat(e,"Price"),n=this.safeFloat(e,"Amount"),a=void 0;void 0!==i&&void 0!==n&&(a=i*n);var s=this.safeString(e,"Type"),o=void 0;return void 0!==t&&(o=t.symbol),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,id:void 0,order:void 0,type:void 0,side:s,price:i,takerOrMaker:void 0,amount:n,cost:a,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},e.next=9,this.publicGetTradesSymbol(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t="open",r=this.safeString(e,"ListingCurrency"),i=this.safeString(e,"ReferenceCurrency"),n=this.safeCurrencyCode(r),a=this.safeCurrencyCode(i),s=n+"/"+a,o=void 0,c=this.safeFloat(e,"LimitPrice"),u=this.safeFloat(e,"OriginalAmount"),d=this.safeFloat(e,"Amount"),h="limit",l=this.safeStringLower(e,"Type"),f=this.safeString(e,"Code");return this.safeOrder({info:e,id:f,clientOrderId:void 0,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:void 0,symbol:s,type:h,timeInForce:void 0,postOnly:void 0,side:l,price:c,stopPrice:void 0,amount:u,cost:void 0,filled:void 0,remaining:d,status:t,fee:void 0,average:void 0,trades:void 0})}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:void 0,a=c.length>3&&void 0!==c[3]?c[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,void 0!==t&&(s=this.market(t)),e.next=10,this.privatePostListOrders(a);case 10:return o=e.sent,e.abrupt("return",this.parseOrders(o,s,r,n));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},e.next=4,this.loadMarkets();case 4:return c=this.market(t),u={listingCurrency:c.base,referenceCurrency:c.quote,type:n,amount:a},"limit"===r&&(u.limitPrice=s),e.next=9,this.privatePostPlaceOrder(this.extend(u,o));case 9:return d=e.sent,h=JSON.parse(d),e.abrupt("return",{info:d,id:h});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderCode:t},e.next=7,this.privatePostCancelOrder(this.extend(n,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privatePostGeneratenewaddress(this.extend(a,r));case 7:return s=e.sent,'"'===(o=s)[0]&&'"'===(o=JSON.parse(o))[0]&&(o=JSON.parse(o)),c=o.split("|"),u=c.length,o=c[0],this.checkAddress(o),d=void 0,u>1&&(d=c[1]),e.abrupt("return",{currency:t,address:o,tag:d,info:s});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency:o.id,address:n,amount:r},void 0!==a&&(c.address=n+"|"+a),e.next=10,this.privatePostWithdraw(this.extend(c,s));case 10:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({trade:"trade",tradefee:"fee",withdraw:"transaction",deposit:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"MovementId"),i=void 0,n=void 0,a=this.safeString2(e,"TradeId","OrderCode");a=this.safeString(e,"Hash",a);var s=this.safeString(e,"Address"),o=this.safeString(e,"Type"),c=this.parseLedgerEntryType(o),u=this.safeCurrencyCode(this.safeString(e,"CurrencyCode"),t),d=this.safeFloat(e,"Amount"),h=this.safeFloat(e,"TotalBalance"),l=void 0;void 0!==d&&(void 0!==h&&(l=h-d),"withdrawal"===o?i="out":"deposit"===o?i="in":"trade"!==o&&"tradefee"!==o||(i=d<0?"out":"in",d=Math.abs(d)));var f=this.parse8601(this.safeString(e,"Date")),p=void 0,v=this.safeString(e,"Status");return{info:e,id:r,direction:i,account:n,referenceId:a,referenceAccount:s,type:c,currency:u,amount:d,before:l,after:h,status:v,timestamp:f,datetime:this.iso8601(f),fee:p}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchLedger() requires a code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),n=void 0===n?50:n,o={Currency:s.id,PageSize:n,SortField:"Date"},void 0===this.safeInteger(a,"PageIndex")&&(o.Descending=!0),e.next=15,this.privatePostListTransactions(this.extend(o,a));case 15:return c=e.sent,u=this.safeValue(c,"Result",[]),e.abrupt("return",this.parseLedger(u,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",processed:"pending",confirmed:"ok"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"MovementId"),i=this.safeFloat(e,"Amount"),n=this.safeString(e,"Address"),a=n,s=void 0,o=void 0,c=o,u=void 0,d=this.safeString(e,"Hash"),h=this.safeString(e,"Type"),l=this.parse8601(this.safeString(e,"Date")),f=this.parseTransactionStatus(this.safeString(e,"Status")),p=this.safeString(e,"CurrencyCode"),v=this.safeCurrencyCode(p,t);return{info:e,id:r,currency:v,amount:i,address:n,addressTo:a,addressFrom:s,tag:o,tagTo:c,tagFrom:u,status:f,type:h,updated:void 0,txid:d,timestamp:l,datetime:this.iso8601(l),fee:void 0}}},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new l(this.id+" fetchTransactions() requires a code argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.currency(t),n=void 0===n?50:n,o={Currency:s.id,TransactionType:"depositswithdrawals",PageSize:n,SortField:"Date"},void 0===this.safeInteger(a,"PageIndex")&&(o.Descending=!0),e.next=15,this.privatePostListTransactions(this.extend(o,a));case 15:return c=e.sent,u=this.safeValue(c,"Result",[]),e.abrupt("return",this.parseTransactions(u,s,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={TransactionType:"deposits"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={TransactionType:"withdrawals"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce();o=this.extend({key:this.apiKey,nonce:c},o),a=this.json(o),n={"Content-Type":"application/json",Hash:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ArgumentsRequired,p=l.AuthenticationError,v=l.ExchangeError,m=l.InsufficientFunds,y=l.OrderNotFound,g=l.PermissionDenied,b=l.BadRequest,k=l.DDoSProtection;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"stex",name:"STEX",countries:["EE"],rateLimit:500,certified:!1,has:{cancelAllOrders:!0,cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchFundingFees:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderTrades:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},version:"v3",urls:{logo:"https://user-images.githubusercontent.com/1294454/69680782-03fd0b80-10bd-11ea-909e-7f603500e9cc.jpg",api:"https://api3.stex.com",www:"https://www.stex.com",doc:["https://help.stex.com/en/collections/1593608-api-v3-documentation"],fees:"https://app.stex.com/en/pairs-specification",referral:"https://app.stex.com?ref=36416021"},requiredCredentials:{apiKey:!1,secret:!1,token:!0},timeframes:{"1m":"1","5m":"5","30m":"30","1h":"60","4h":"240","12h":"720","1d":"1D"},api:{public:{get:["currencies","currencies/{currencyId}","markets","pairs-groups","currency_pairs/list/{code}","currency_pairs/group/{currencyPairGroupId}","currency_pairs/{currencyPairId}","ticker","ticker/{currencyPairId}","trades/{currencyPairId}","orderbook/{currencyPairId}","chart/{currencyPairId}/{candlesType}","deposit-statuses","deposit-statuses/{statusId}","withdrawal-statuses","withdrawal-statuses/{statusId}","ping","mobile-versions"]},trading:{get:["fees/{currencyPairId}","orders","orders/{currencyPairId}","order/{orderId}"],post:["orders/{currencyPairId}"],delete:["orders","orders/{currencyPairId}","order/{orderId}"]},reports:{get:["orders","orders/{orderId}","trades/{currencyPairId}","background/{listMode}","background/{id}","background/download/{id}"],post:["background/create"],delete:["background/{id}"]},profile:{get:["info","wallets","wallets/{walletId}","wallets/address/{walletId}","deposits","deposits/{id}","withdrawals","withdrawals/{id}","notifications","favorite/currency_pairs","token-scopes"],post:["wallets/burn/{walletId}","wallets/{currencyId}","wallets/address/{walletId}","withdraw","referral/program","referral/insert/{code}","referral/bonus_transfer/{currencyId}"],put:["profile/favorite/currency_pairs/set"],delete:["profile/withdraw/{withdrawalId}"]},verification:{get:["verification/countries","verification/stex"],post:["verification/stex"]},settings:{get:["notifications/{event}","notifications"],put:["notifications","notifications/set"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.002,maker:.002}},commonCurrencies:{BC:"Bitcoin Confidential",BITS:"Bitcoinus",BITSW:"BITS",BHD:"Bithold",BTH:"Bithereum",SBTC:"SBTCT"},options:{parseOrderToPrecision:!1},exceptions:{exact:{"Wrong parameters":b,"Unauthenticated.":p,"Server Error":v,"This feature is only enabled for users verifies by Cryptonomica":g,"Too Many Attempts.":k},broad:{"Not enough":m}}})}},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n={},a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],c=this.safeString(o,"id"),u=this.safeInteger(o,"id"),d=this.safeCurrencyCode(this.safeString(o,"code")),h=this.safeInteger(o,"precision"),l=this.safeFloat(o,"withdrawal_fee_const"),f=this.safeValue(o,"active",!0),n[d]={id:c,numericId:u,code:d,info:o,type:void 0,name:this.safeString(o,"name"),active:f,fee:l,precision:h,limits:{amount:{min:Math.pow(10,-h),max:void 0},price:{min:Math.pow(10,-h),max:void 0},cost:{min:void 0,max:void 0},deposit:{min:this.safeFloat(o,"minimum_deposit_amount"),max:void 0},withdraw:{min:this.safeFloat(o,"minimum_withdrawal_amount"),max:void 0}}};return e.abrupt("return",n);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},r={code:"ALL"},e.next=4,this.publicGetCurrencyPairsListCode(this.extend(r,t));case 4:for(n=e.sent,a=[],s=this.safeValue(n,"data",[]),o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"id"),d=this.safeInteger(c,"id"),h=this.safeString(c,"currency_id"),l=this.safeString(c,"market_currency_id"),f=this.safeInteger(c,"currency_id"),p=this.safeInteger(c,"market_currency_id"),v=this.safeCurrencyCode(this.safeString(c,"currency_code")),m=this.safeCurrencyCode(this.safeString(c,"market_code")),y=v+"/"+m,g={amount:this.safeInteger(c,"currency_precision"),price:this.safeInteger(c,"market_precision")},b=this.safeValue(c,"active"),k=this.safeFloat(c,"min_buy_price"),x=this.safeFloat(c,"min_sell_price"),w=Math.max(k,x),_=this.safeFloat(c,"buy_fee_percent")/100,O=this.safeFloat(c,"sell_fee_percent")/100,T=Math.max(_,O),a.push({id:u,numericId:d,symbol:y,base:v,quote:m,baseId:h,quoteId:l,baseNumericId:f,quoteNumericId:p,info:c,active:b,maker:T,taker:T,precision:g,limits:{amount:{min:this.safeFloat(c,"min_order_amount"),max:void 0},price:{min:w,max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={currencyPairId:n.id},e.next=7,this.publicGetTickerCurrencyPairId(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetPing(t);case 3:return r=e.sent,n=this.safeValue(r,"data",{}),a=this.safeValue(n,"server_datetime",{}),e.abrupt("return",this.parse8601(this.safeString(a,"date")));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={currencyPairId:a.id},void 0!==r&&(s.limit_bids=r,s.limit_asks=r),e.next=9,this.publicGetOrderbookCurrencyPairId(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"data",{}),e.abrupt("return",this.parseOrderBook(c,void 0,"bid","ask","price","amount"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeString2(e,"id","symbol"),n=this.safeSymbol(i,t,"_"),a=this.safeFloat(e,"last"),s=this.safeFloat(e,"open"),o=void 0,c=void 0;return void 0!==a&&void 0!==s&&s>0&&(o=a-s,c=100/s*a-100),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"volumeQuote"),quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:return n=e.sent,a=this.safeValue(n,"data",[]),e.abrupt("return",this.parseTickers(a,t));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1d",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={currencyPairId:o.id,candlesType:this.timeframes[r]},void 0===a?a=100:c.limit=a,u=this.parseTimeframe(r),d=a*u,void 0===n?(c.timeEnd=this.seconds(),c.timeStart=c.timeEnd-d):(c.timeStart=parseInt(n/1e3),c.timeEnd=this.sum(c.timeStart,d)),e.next=14,this.publicGetChartCurrencyPairIdCandlesType(this.extend(c,s));case 14:return h=e.sent,l=this.safeValue(h,"data",[]),e.abrupt("return",this.parseOHLCVs(l,o,r,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeTimestamp(e,"timestamp"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"amount"),s=void 0;void 0!==n&&void 0!==a&&(s=n*a);var o=void 0;void 0===o&&void 0!==t&&(o=t.symbol);var c=this.safeStringLower2(e,"type","trade_type");return{info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,id:r,order:void 0,type:void 0,takerOrMaker:void 0,side:c,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={currencyPairId:s.id},void 0!==n&&(o.limit=n),void 0!==r&&(o.sort="ASC",o.from=parseInt(r/1e3)),e.next=11,this.publicGetTradesCurrencyPairId(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.profileGetWallets(t);case 5:for(r=e.sent,n={info:r},a=this.safeValue(r,"data",[]),s=0;s<a.length;s++)o=a[s],c=this.safeCurrencyCode(this.safeString(o,"currency_id")),(u=this.account()).free=this.safeFloat(o,"balance"),u.used=this.safeFloat(o,"frozen_balance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({PROCESSING:"open",PENDING:"open",PARTIAL:"open",FINISHED:"closed",CANCELLED:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeString2(e,"currency_pair_id","currency_pair_name"),a=this.safeSymbol(n,t,"_"),s=this.safeTimestamp(e,"timestamp"),o=this.safeFloat(e,"price"),c=this.safeFloat(e,"initial_amount"),u=this.safeFloat(e,"processed_amount"),d=void 0,h=void 0;void 0!==u&&(void 0!==c&&(d=c-u,this.options.parseOrderToPrecision&&(d=parseFloat(this.amountToPrecision(a,d))),d=Math.max(d,0)),void 0!==o&&void 0===h&&(h=o*u));var l=this.safeString(e,"original_type");"BUY"!==l&&"SELL"!==l||(l=void 0);var f=this.safeStringLower(e,"type"),p=this.safeValue(e,"trades"),v=void 0;void 0!==p&&(v=this.parseTrades(p,t,void 0,void 0,{symbol:a,order:r}));var m=this.safeFloat(e,"trigger_price"),y={info:e,id:r,clientOrderId:void 0,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:void 0,symbol:a,type:l,timeInForce:void 0,postOnly:void 0,side:f,price:o,stopPrice:m,amount:c,cost:h,average:void 0,filled:u,remaining:d,status:i,trades:v},g=this.safeValue(e,"fees");if(void 0===g)y.fee=void 0;else{var b=g.length;if(b>0){y.fees=[];for(var k=0;k<g.length;k++){var x=this.safeFloat(g[k],"amount");if(void 0!==x){var w=this.safeString(g[k],"currency_id"),_=this.safeCurrencyCode(w);y.fees.push({cost:x,currency:_})}}}else y.fee=void 0}return y}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=4;break}throw new v(this.id+" createOrder allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),"limit"===r&&(r=n),u={currencyPairId:c.id,type:r.toUpperCase(),amount:parseFloat(this.amountToPrecision(t,a)),price:parseFloat(this.priceToPrecision(t,s))},e.next=11,this.tradingPostOrdersCurrencyPairId(this.extend(u,o));case 11:return d=e.sent,h=this.safeValue(d,"data",{}),e.abrupt("return",this.parseOrder(h,c));case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},e.next=7,this.tradingGetOrderOrderId(this.extend(a,n));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),c=void 0,void 0!==r&&(c=this.market(r)),e.abrupt("return",this.parseOrder(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchClosedOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a={orderId:t},e.next=7,this.reportsGetOrdersOrderId(this.extend(a,n));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),c=void 0,void 0!==r&&(c=this.market(r)),e.abrupt("return",this.parseOrder(o,c));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,s.length>2&&void 0!==s[2]?s[2]:void 0,s.length>3&&void 0!==s[3]?s[3]:void 0,n=s.length>4&&void 0!==s[4]?s[4]:{},e.next=6,this.fetchClosedOrder(t,r,n);case 6:return a=e.sent,e.abrupt("return",a.trades);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o="tradingGetOrders",c={},void 0!==t&&(o="tradingGetOrdersCurrencyPairId",s=this.market(t),c.currencyPairId=s.id),void 0!==n&&(c.limit=n),e.next=13,this[o](this.extend(c,a));case 13:return u=e.sent,d=this.safeValue(u,"data",[]),e.abrupt("return",this.parseOrders(d,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>1&&void 0!==h[1]?h[1]:void 0,r=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return n={orderId:t},e.next=7,this.tradingDeleteOrderOrderId(this.extend(n,r));case 7:if(a=e.sent,s=this.safeValue(a,"data",{}),o=this.safeValue(s,"put_into_processing_queue",[]),c=this.safeValue(s,"not_put_into_processing_queue",[]),u=o.length,d=c.length,!(u<1)){e.next=21;break}if(!(d<1)){e.next=18;break}throw new y(this.id+" cancelOrder received an empty response: "+this.json(a));case 18:return e.abrupt("return",this.parseOrder(c[0]));case 19:e.next=26;break;case 21:if(!(d<1)){e.next=25;break}return e.abrupt("return",this.parseOrder(o[0]));case 25:throw new y(this.id+" cancelOrder received an empty response: "+this.json(a));case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return n={},a="tradingDeleteOrders",void 0!==t&&(s=this.market(t),n.currencyPairId=s.id,a="tradingDeleteOrdersCurrencyPairId"),e.next=9,this[a](this.extend(n,r));case 9:return o=e.sent,e.abrupt("return",o);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new f(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={currencyPairId:s.id},void 0!==r&&(o.timeStart=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=14,this.reportsGetTradesCurrencyPairId(this.extend(o,a));case 14:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currencyId:n.id},e.next=7,this.profilePostWalletsCurrencyId(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",{}),c=this.safeValue(o,"deposit_address",{}),u=this.safeString(c,"address"),d=this.safeString(c,"additional_address_parameter"),this.checkAddress(u),e.abrupt("return",{currency:t,address:u,tag:d,info:s});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchBalance();case 5:if(n=e.sent,a=this.safeValue(n.info,"data",[]),s=this.indexBy(a,"currency_id"),o=this.currency(t),void 0!==(c=this.safeValue(s,o.id))){e.next=12;break}throw new v(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+t+", try to call createDepositAddress() first");case 12:if(void 0!==(u=this.safeInteger(c,"id"))){e.next=15;break}throw new v(this.id+" fetchDepositAddress() could not find the wallet id for currency code "+t+", try to call createDepositAddress() first");case 15:return d={walletId:u},e.next=18,this.profileGetWalletsWalletId(this.extend(d,r));case 18:return h=e.sent,l=this.safeValue(h,"data",[]),f=this.safeValue(l,"deposit_address",{}),p=this.safeString(f,"address"),m=this.safeString(f,"additional_address_parameter"),this.checkAddress(p),e.abrupt("return",{currency:t,address:p,tag:m,info:h});case 25:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+t+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));return"public"===t?Object.keys(o).length&&(s+="?"+this.urlencode(o)):(this.checkRequiredCredentials(),n={Authorization:"Bearer "+this.token},"GET"===r||"DELETE"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):(a=this.json(o),Object.keys(o).length&&(n["Content-Type"]="application/json"))),{url:s,method:r,body:a,headers:n}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({processing:"pending","checking by system":"pending",hodl:"pending","amount too low":"failed","not confirmed":"pending","cancelled by User":"canceled",approved:"pending",finished:"ok","withdrawal error":"failed","deposit error":"failed","cancelled by admin":"canceled",awaiting:"pending"},e,e)}},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeValue(e,"withdrawal_address",{}),n=this.safeString(i,"address"),a=this.safeString(i,"additional_address_parameter"),s=this.safeString(e,"currency_id"),o=void 0;s in this.currencies_by_id?t=this.currencies_by_id[s]:o=this.commonCurrencyCode(this.safeString(e,"currency_code")),void 0===o&&void 0!==t&&(o=t.code);var c="deposit_status_id"in e?"deposit":"withdrawal",u=this.safeFloat(e,"amount"),d=this.parseTransactionStatus(this.safeStringLower(e,"status")),h=this.safeTimestamp2(e,"timestamp","created_ts"),l=this.safeTimestamp(e,"updated_ts"),f=this.safeString(e,"txid"),p=void 0,v=this.safeFloat(e,"fee");if(void 0!==v){var m=this.safeString(e,"fee_currency_id","deposit_fee_currency_id"),y=this.safeCurrencyCode(m);p={cost:v,currency:y}}return{info:e,id:r,txid:f,timestamp:h,datetime:this.iso8601(h),addressFrom:void 0,address:n,addressTo:n,tagFrom:void 0,tag:a,tagTo:a,type:c,amount:u,currency:o,status:d,updated:l,fee:p}}},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.currencyId=s.id),void 0!==n&&(o.limit=n),void 0!==r&&(o.timeStart=r),e.next=13,this.profileGetDeposits(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.currency(t),o.currencyId=s.id),void 0!==n&&(o.limit=n),void 0!==r&&(o.timeStart=r),e.next=13,this.profileGetWithdrawals(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"data",[]),e.abrupt("return",this.parseTransactions(u,t,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={currency_id:o.id,amount:parseFloat(this.currencyToPrecision(t,r)),address:n},void 0!==a&&(c.additional_address_parameter=a),e.next=10,this.profilePostWithdraw(this.extend(c,s));case 10:return u=e.sent,d=this.safeValue(u,"data",{}),e.abrupt("return",this.parseTransaction(d,o));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"fetchFundingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d.length>0&&void 0!==d[0]?d[0]:void 0,t=d.length>1&&void 0!==d[1]?d[1]:{},e.next=4,this.publicGetCurrencies(t);case 4:for(r=e.sent,n=this.safeValue(r,"data",[]),a={},s={},o=0;o<n.length;o++)c=this.safeString(n[o],"id"),u=this.safeCurrencyCode(c),a[u]=this.safeFloat(n[o],"withdrawal_fee_const"),s[u]=this.safeFloat(n[o],"deposit_fee_const");return e.abrupt("return",{withdraw:a,deposit:s,info:r});case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&!this.safeValue(s,"success",!1)){var u=this.safeString(s,"message"),d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,u,d),new v(d)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(62);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"surbitcoin",name:"SurBitcoin",countries:["VE"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991511-f0a50194-6481-11e7-99b5-8f02932424cc.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://surbitcoin.com",doc:"https://blinktrade.com/docs"},options:{brokerId:"1"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.OrderNotFound,y=l.InvalidAddress;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"therock",name:"TheRockTrading",countries:["MT"],rateLimit:1e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:"emulated",fetchWithdrawals:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766869-75057fa2-5ee9-11e7-9a6f-13e641fa4707.jpg",api:"https://api.therocktrading.com",www:"https://therocktrading.com",doc:["https://api.therocktrading.com/doc/v1/index.html","https://api.therocktrading.com/doc/"]},api:{public:{get:["funds","funds/{id}/orderbook","funds/{id}/ticker","funds/{id}/trades","funds/tickers"]},private:{get:["balances","balances/{id}","discounts","discounts/{id}","funds","funds/{id}","funds/{id}/trades","funds/{fund_id}/orders","funds/{fund_id}/orders/{id}","funds/{fund_id}/position_balances","funds/{fund_id}/positions","funds/{fund_id}/positions/{id}","transactions","transactions/{id}","withdraw_limits/{id}","withdraw_limits"],post:["atms/withdraw","funds/{fund_id}/orders"],delete:["funds/{fund_id}/orders/{id}","funds/{fund_id}/orders/remove_all"]}},fees:{trading:{maker:.002,taker:.002},funding:{tierBased:!1,percentage:!1,withdraw:{BTC:5e-4,BCH:5e-4,PPC:.02,ETH:.001,ZEC:.001,LTC:.002,EUR:2.5},deposit:{BTC:0,BCH:0,PPC:0,ETH:0,ZEC:0,LTC:0,EUR:0}}},exceptions:{exact:{"Request already running":v,"cannot specify multiple address types":v,"Currency is not included in the list":v,"Record not found":m},broad:{"before must be greater than after param":v,"must be shorter than 60 days":v,"must be a multiple of (period param) in minutes":v,"Address allocation limit reached for currency":y,"is not a valid value for param currency":v," is invalid":y}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,p,v,m,y,g,b=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=b.length>0&&void 0!==b[0]?b[0]:{},e.next=3,this.publicGetFunds(t);case 3:if(r=e.sent,n=this.safeValue(r,"funds"),a=[],void 0!==n){e.next=10;break}throw new f(this.id+" fetchMarkets got an unexpected response");case 10:for(s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"id"),u=this.safeString(o,"trade_currency"),d=this.safeString(o,"base_currency"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),p=h+"/"+l,v=this.safeFloat(o,"buy_fee"),m=this.safeFloat(o,"sell_fee"),y=Math.max(v,m),g=y/=100,a.push({id:c,symbol:p,base:h,quote:l,baseId:u,quoteId:d,info:o,active:!0,maker:g,taker:y,precision:{amount:this.safeInteger(o,"trade_currency_decimals"),price:this.safeInteger(o,"base_currency_decimals")},limits:{amount:{min:this.safeFloat(o,"minimum_quantity_offer"),max:void 0},price:{min:this.safeFloat(o,"minimum_price_offer"),max:void 0},cost:{min:void 0,max:void 0}}});case 11:return e.abrupt("return",a);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalances(t);case 5:for(r=e.sent,n=this.safeValue(r,"balances",[]),a={info:r},s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"trading_balance"),d.total=this.safeFloat(o,"balance"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:this.marketId(t)},e.next=7,this.publicGetFundsIdOrderbook(this.extend(n,r));case 7:return a=e.sent,s=this.parse8601(this.safeString(a,"date")),e.abrupt("return",this.parseOrderBook(a,s,"bids","asks","price","amount"));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(e.date),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:this.safeFloat(e,"close"),change:void 0,percentage:void 0,average:void 0,baseVolume:this.safeFloat(e,"volume_traded"),quoteVolume:this.safeFloat(e,"volume"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetFundsTickers(r);case 6:for(n=e.sent,a=this.indexBy(n.tickers,"fund_id"),s=Object.keys(a),o={},c=0;c<s.length;c++)u=s[c],d=this.safeMarket(u),h=d.symbol,l=a[u],o[h]=this.parseTicker(l,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetFundsIdTicker(this.extend({id:n.id},r));case 6:return a=e.sent,e.abrupt("return",this.parseTicker(a,n));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"fund_id"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"date")),a=this.safeString(e,"id"),s=this.safeString(e,"order_id"),o=this.safeString(e,"side"),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"amount"),d=void 0;void 0!==c&&void 0!==u&&(d=c*u);for(var h=void 0,l=void 0,f=this.safeValue(e,"transactions",[]),p=this.groupBy(f,"type"),v=this.safeValue(p,"paid_commission",[]),m=0;m<v.length;m++)void 0===l&&(l=0),l=this.sum(l,this.safeFloat(v[m],"price"));return void 0!==l&&(h={cost:l,currency:t.quote}),{info:e,id:a,order:s,timestamp:n,datetime:this.iso8601(n),symbol:i,type:void 0,side:o,takerOrMaker:void 0,price:c,amount:u,cost:d,fee:h}}},{key:"parseLedgerEntryDirection",value:function(e){return this.safeString({affiliate_earnings:"in",atm_payment:"in",bought_currency_from_fund:"out",bought_shares:"out",paid_commission:"out",paypal_payment:"in",pos_payment:"in",released_currency_to_fund:"out",rollover_commission:"out",sold_currency_to_fund:"in",sold_shares:"in",transfer_received:"in",transfer_sent:"out",withdraw:"out"},e,e)}},{key:"parseLedgerEntryType",value:function(e){return this.safeString({affiliate_earnings:"referral",atm_payment:"transaction",bought_currency_from_fund:"trade",bought_shares:"trade",paid_commission:"fee",paypal_payment:"transaction",pos_payment:"transaction",released_currency_to_fund:"trade",rollover_commission:"fee",sold_currency_to_fund:"trade",sold_shares:"trade",transfer_received:"transfer",transfer_sent:"transfer",withdraw:"transaction"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=this.safeString(e,"id"),r=void 0,i=this.safeString(e,"type"),n=this.parseLedgerEntryDirection(i);"trade"!==(i=this.parseLedgerEntryType(i))&&"fee"!==i||(r=this.safeString(e,"trade_id"));var a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a),o=this.safeFloat(e,"price"),c=this.parse8601(this.safeString(e,"date")),u="ok";return{info:e,id:t,direction:n,account:void 0,referenceId:r,referenceAccount:void 0,type:i,currency:s,amount:o,before:void 0,after:void 0,status:u,timestamp:c,datetime:this.iso8601(c),fee:void 0}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==r&&(s.after=this.iso8601(r)),e.next=12,this.privateGetTransactions(this.extend(s,a));case 12:return c=e.sent,u=this.safeValue(c,"transactions",[]),e.abrupt("return",this.parseLedger(u,o,r,n));case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionType",value:function(e){return this.safeString({withdraw:"withdrawal",atm_payment:"deposit"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"id"),r=this.parseTransactionType(this.safeString(e,"type")),i=this.safeValue(e,"transfer_detail",{}),n=this.safeString(i,"method"),a=void 0,s=void 0;void 0!==n&&"wire_transfer"!==n&&(a=this.safeString(i,"id"),s=this.safeString(i,"recipient"));var o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o),u=this.safeFloat(e,"price"),d=this.parse8601(this.safeString(e,"date")),h="ok";return{info:e,id:t,currency:c,amount:u,addressFrom:void 0,addressTo:s,address:s,tagFrom:void 0,tagTo:void 0,tag:void 0,status:h,type:r,updated:void 0,txid:a,timestamp:d,datetime:this.iso8601(d),fee:void 0}}},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"withdraw"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"atm_payment"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:void 0,n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==r&&(s.after=this.iso8601(r)),a=this.extend(s,a),e.next=13,this.privateGetTransactions(a);case 13:return c=e.sent,u=this.safeValue(c,"transactions",[]),d=["withdraw","atm_payment"],h=this.filterByArray(u,"type",d,!1),e.abrupt("return",this.parseTransactions(h,o,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({active:"open",executed:"closed",deleted:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeString(e,"fund_id"),n=this.safeSymbol(i,t),a=this.parseOrderStatus(this.safeString(e,"status")),s=this.parse8601(this.safeString(e,"date")),o=this.safeString(e,"type"),c=this.safeString(e,"side"),u=this.safeFloat(e,"amount"),d=this.safeFloat(e,"amount_unfilled"),h=void 0;void 0!==u&&void 0!==d&&(h=u-d);var l=this.safeFloat(e,"price"),f=this.safeValue(e,"trades"),p=void 0,v=void 0,m=void 0;if(void 0!==f){var y=f.length;if(y>0){f=this.parseTrades(f,t,void 0,void 0,{orderId:r}),p=0,h=0;for(var g=0;g<y;g++){var b=f[g];p=this.sum(p,b.cost),h=this.sum(h,b.amount)}h>0&&(v=p/h),m=f[y-1].timestamp}else p=0}var k=this.safeFloat(e,"conditional_price");return{id:r,clientOrderId:void 0,info:e,timestamp:s,datetime:this.iso8601(s),lastTradeTimestamp:m,status:a,symbol:n,type:o,timeInForce:void 0,postOnly:void 0,side:c,price:l,stopPrice:k,cost:p,amount:u,filled:h,average:v,remaining:d,fee:void 0,trades:f}}},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"active"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={status:"executed"},e.next=7,this.fetchOrders(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={fund_id:s.id},void 0!==r&&(o.after=this.iso8601(r)),e.next=13,this.privateGetFundsFundIdOrders(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"orders",[]),e.abrupt("return",this.parseOrders(u,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>1&&void 0!==c[1]?c[1]:void 0,n=c.length>2&&void 0!==c[2]?c[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" fetchOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return a=this.market(r),s={id:t,fund_id:a.id},e.next=10,this.privatePostFundsFundIdOrdersId(this.extend(s,n));case 10:return o=e.sent,e.abrupt("return",this.parseOrder(o));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return"market"===r&&(s=0),c={fund_id:this.marketId(t),side:n,amount:a,price:s},e.next=8,this.privatePostFundsFundIdOrders(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",this.parseOrder(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return a={id:t,fund_id:this.marketId(r)},e.next=7,this.privateDeleteFundsFundIdOrdersId(this.extend(a,n));case 7:return s=e.sent,e.abrupt("return",this.parseOrder(s));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},void 0!==t){e.next=6;break}throw new p(this.id+" fetchMyTrades() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={id:s.id},void 0!==n&&(o.per_page=n),void 0!==r&&(o.after=this.iso8601(r)),e.next=14,this.privateGetFundsIdTrades(this.extend(o,a));case 14:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,s,r,n));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={id:s.id},void 0!==n&&(o.per_page=n),void 0!==r&&(o.after=this.iso8601(r)),e.next=11,this.publicGetFundsIdTrades(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseTrades(c.trades,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(n=void 0===n?{}:n,"private"===t){if(this.checkRequiredCredentials(),Object.keys(o).length)if("POST"===r)a=this.json(o),n["Content-Type"]="application/json";else{var c=this.rawencode(o);c.length&&(s+="?"+c)}var u=this.nonce().toString(),d=u+s;n["X-TRT-KEY"]=this.apiKey,n["X-TRT-NONCE"]=u,n["X-TRT-SIGN"]=this.hmac(this.encode(d),this.encode(this.secret),"sha512")}else"public"===t&&Object.keys(o).length&&(s+="?"+this.rawencode(o));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"errors",[]),d=u.length;if(d>0){for(var h=this.id+" "+a,l=0;l<d;l++){var p=u[l],v=this.safeString(p,"message");this.throwExactlyMatchedException(this.exceptions.exact,v,h),this.throwBroadlyMatchedException(this.exceptions.broad,v,h)}throw new f(h)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.InsufficientFunds,m=f.OrderNotFound,y=f.ArgumentsRequired;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"tidebit",name:"TideBit",countries:["HK"],rateLimit:1e3,version:"v2",has:{cancelOrder:!0,CORS:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1","5m":"5","15m":"15","30m":"30","1h":"60","2h":"120","4h":"240","12h":"720","1d":"1440","3d":"4320","1w":"10080"},urls:{logo:"https://user-images.githubusercontent.com/51840849/87460811-1e690280-c616-11ea-8652-69f187305add.jpg",api:"https://www.tidebit.com",www:"https://www.tidebit.com",doc:["https://www.tidebit.com/documents/api/guide","https://www.tidebit.com/swagger/#/default"],referral:"http://bit.ly/2IX0LrM"},api:{public:{get:["markets","tickers","tickers/{market}","timestamp","trades","trades/{market}","order_book","order","k_with_pending_trades","k","depth"],post:[]},private:{get:["addresses/{address}","deposits/history","deposits/get_deposit","deposits/deposit_address","historys/orders","historys/vouchers","historys/accounts","historys/snapshots","linkage/get_status","members/me","order","orders","partners/orders/{id}/trades","referral_commissions/get_undeposited","referral_commissions/get_graph_data","trades/my","withdraws/bind_account_list","withdraws/get_withdraw_account","withdraws/fetch_bind_info"],post:["deposits/deposit_cash","favorite_markets/update","order/delete","orders","orders/multi","orders/clear","referral_commissions/deposit","withdraws/apply","withdraws/bind_bank","withdraws/bind_address"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.003,taker:.003},funding:{tierBased:!1,percentage:!0,withdraw:{}}},exceptions:{2002:v,2003:m}})}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(!("success"in(s=e.sent))){e.next=13;break}if(!s.success){e.next=13;break}return o=this.safeString(s,"address"),c=this.safeString(s,"addressTag"),e.abrupt("return",{currency:t,address:this.checkAddress(o),tag:c,info:s});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],c=this.safeString(o,"id"),u=this.safeString(o,"name"),d=u.split("/"),h=i(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),a.push({id:c,symbol:u,base:p,quote:v,baseId:l,quoteId:f,info:o,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=h.length>0&&void 0!==h[0]?h[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetMembersMe(t);case 5:for(r=e.sent,i=this.safeValue(r,"accounts"),a={info:i},s=0;s<i.length;s++)o=i[s],c=this.safeString(o,"currency"),u=this.safeCurrencyCode(c),(d=this.account()).free=this.safeFloat(o,"balance"),d.used=this.safeFloat(o,"locked"),a[u]=d;return e.abrupt("return",this.parseBalance(a));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),s.market=a.id,e.next=10,this.publicGetDepth(this.extend(s,i));case 10:return o=e.sent,c=this.safeTimestamp(o,"timestamp"),e.abrupt("return",this.parseOrderBook(o,c));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at");e=this.safeValue(e,"ticker",{});var i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),ask:this.safeFloat(e,"sell"),bidVolume:void 0,askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,change:void 0,percentage:void 0,previousClose:void 0,average:void 0,baseVolume:this.safeFloat(e,"vol"),quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTickers(r);case 6:for(i=e.sent,a=Object.keys(i),s={},o=0;o<a.length;o++)c=a[o],u=this.safeMarket(c),d=u.symbol,h=i[c],s[d]=this.parseTicker(h,u);return e.abrupt("return",this.filterByArray(s,"symbol",t));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={market:i.id},e.next=7,this.publicGetTickersMarket(this.extend(a,r));case 7:return s=e.sent,e.abrupt("return",this.parseTicker(s,i));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.parse8601(this.safeString(e,"created_at")),i=this.safeString(e,"id"),n=this.safeFloat(e,"price"),a=this.safeFloat(e,"volume"),s=this.safeFloat(e,"funds"),o=void 0;return void 0!==t&&(o=t.symbol),{id:i,info:e,timestamp:r,datetime:this.iso8601(r),symbol:o,type:void 0,side:void 0,order:void 0,takerOrMaker:void 0,price:n,amount:a,cost:s,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},e.next=9,this.publicGetTrades(this.extend(o,a));case 9:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,2),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,5)]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:"1m",i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),void 0===a&&(a=30),(c={market:o.id,period:this.timeframes[r],limit:a}).timestamp=void 0!==i?parseInt(i/1e3):18e5,e.next=12,this.publicGetK(this.extend(c,s));case 12:if("null"!==(u=e.sent)){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseOHLCVs(u,o,r,i,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({done:"closed",wait:"open",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"created_at")),a=this.parseOrderStatus(this.safeString(e,"state")),s=this.safeString(e,"id"),o=this.safeString(e,"ord_type"),c=this.safeString(e,"side"),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"volume"),h=this.safeFloat(e,"executed_volume"),l=this.safeFloat(e,"remaining_volume"),f=this.safeFloat(e,"avg_price");return this.safeOrder({id:s,clientOrderId:void 0,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,status:a,symbol:i,type:o,timeInForce:void 0,postOnly:void 0,side:c,price:u,stopPrice:void 0,amount:d,filled:h,remaining:l,cost:void 0,trades:void 0,fee:void 0,info:e,average:f})}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:return c={market:this.marketId(t),side:i,volume:a.toString(),ord_type:r},"limit"===r&&(c.price=s.toString()),e.next=8,this.privatePostOrders(this.extend(c,o));case 8:return u=e.sent,e.abrupt("return",this.parseOrder(u));case 10:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={id:t},e.next=7,this.privatePostOrderDelete(this.extend(i,r));case 7:if(a=e.sent,s=this.parseOrder(a),"closed"!==(o=this.safeString(s,"status"))&&"canceled"!==o){e.next=12;break}throw new m(this.id+" "+this.json(s));case 12:return e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),void 0!==(c=this.safeString(s,"id"))){e.next=9;break}throw new y(this.id+" withdraw() requires an extra `id` param (withdraw account id according to withdraws/bind_account_list endpoint");case 9:return u={id:c,currency_type:"coin",currency:o.id,body:r},void 0!==a&&(u.memo=a),e.next=13,this.privatePostWithdrawsApply(this.extend(u,s));case 13:return d=e.sent,e.abrupt("return",{info:d,id:void 0});case 15:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"encodeParams",value:function(e){return this.urlencode(this.keysort(e))}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s="/api/"+this.version+"/"+this.implodeParams(e,i)+".json",o=this.omit(i,this.extractParams(e)),c=this.urls.api+s;if("public"===t)Object.keys(o).length&&(c+="?"+this.urlencode(o));else{this.checkRequiredCredentials();var u=this.nonce().toString(),d=this.keysort(this.extend({access_key:this.apiKey,tonce:u},i)),h=this.urlencode(d),l=r+"|"+s+"|"+h,f=this.hmac(this.encode(l),this.encode(this.secret)),p=h+"&signature="+f;"GET"===r?c+="?"+p:(a=p,n={"Content-Type":"application/x-www-form-urlencoded"})}return{url:c,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(400===e||void 0===s){var u=this.id+" "+a;if(void 0===s)throw new p(u);var d=this.safeValue(s,"error",{}),h=this.safeString(d,"code");this.throwExactlyMatchedException(this.exceptions,h,u)}}}]),r}(l)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,y=f.InsufficientFunds,g=f.OrderNotFound,b=f.DDoSProtection,k=f.InvalidOrder,x=f.AuthenticationError;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"tidex",name:"Tidex",countries:["UK"],rateLimit:2e3,version:"3",userAgent:this.userAgents.chrome,has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/30781780-03149dc4-a12e-11e7-82bb-313b269d24d4.jpg",api:{web:"https://gate.tidex.com/api",public:"https://api.tidex.com/api/3",private:"https://api.tidex.com/tapi"},www:"https://tidex.com",doc:"https://tidex.com/exchange/public-api",referral:"https://tidex.com/exchange/?ref=57f5638d9cd7",fees:["https://tidex.com/exchange/assets-spec","https://tidex.com/exchange/pairs-spec"]},api:{web:{get:["currency","pairs","tickers","orders","ordershistory","trade-data","trade-data/{id}"]},public:{get:["info","ticker/{pair}","depth/{pair}","trades/{pair}"]},private:{post:["getInfoExt","getInfo","Trade","ActiveOrders","OrderInfo","CancelOrder","TradeHistory","CoinDepositAddress","WithdrawCoin","CreateCoupon","RedeemCoupon"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},commonCurrencies:{DSH:"DASH",EMGO:"MGO",MGO:"WMGO"},exceptions:{exact:{803:k,804:k,805:k,806:k,807:k,831:y,832:y,833:g},broad:{"Invalid pair name":p,"invalid api key":x,"invalid sign":x,"api key dont have trade permission":x,"invalid parameter":k,"invalid order":k,"Requests too often":b,"not available":m,"data unavailable":m,"external service unavailable":m}},options:{fetchTickersMaxLength:2048},orders:{}})}},{key:"fetchCurrencies",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=g.length>0&&void 0!==g[0]?g[0]:{},e.next=3,this.webGetCurrency(t);case 3:for(r=e.sent,i={},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"symbol"),c=this.safeInteger(s,"amountPoint"),u=this.safeCurrencyCode(o),d=this.safeValue(s,"visible"),h=!0===d,l=this.safeValue(s,"withdrawEnable"),f=this.safeValue(s,"depositEnable"),v=!0===f,(p=!0===l)&&v||(h=!1),m=this.safeString(s,"name"),y=this.safeFloat(s,"withdrawFee"),i[u]={id:o,code:u,name:m,active:h,precision:c,funding:{withdraw:{active:p,fee:y},deposit:{active:v,fee:0}},limits:{amount:{min:void 0,max:Math.pow(10,c)},price:{min:Math.pow(10,-c),max:Math.pow(10,c)},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(s,"withdrawMinAmount"),max:void 0},deposit:{min:this.safeFloat(s,"depositMinAmount"),max:void 0}},info:s};return e.abrupt("return",i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"calculateFee",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"taker",s=this.markets[e],o="quote",c=s[a],u=parseFloat(this.costToPrecision(e,i*c));return"sell"===r?u*=n:o="base",{type:a,currency:s[o],rate:c,cost:u}}},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=_.length>0&&void 0!==_[0]?_[0]:{},e.next=3,this.publicGetInfo(t);case 3:for(r=e.sent,a=r.pairs,s=Object.keys(a),o=[],c=0;c<s.length;c++)u=s[c],d=a[u],h=u.split("_"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f),m=this.safeCurrencyCode(p),y=v+"/"+m,g={amount:this.safeInteger(d,"decimal_places"),price:this.safeInteger(d,"decimal_places")},b={amount:{min:this.safeFloat(d,"min_amount"),max:this.safeFloat(d,"max_amount")},price:{min:this.safeFloat(d,"min_price"),max:this.safeFloat(d,"max_price")},cost:{min:this.safeFloat(d,"min_total")}},k=this.safeInteger(d,"hidden"),x=0===k,w=this.safeFloat(d,"fee"),o.push({id:u,symbol:y,base:v,quote:m,baseId:f,quoteId:p,active:x,taker:w/100,precision:g,limits:b,info:d});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfoExt(t);case 5:for(r=e.sent,i=this.safeValue(r,"return"),a={info:i},s=this.safeValue(i,"funds",{}),o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),h=this.safeValue(s,u,{}),(l=this.account()).free=this.safeFloat(h,"value"),l.used=this.safeFloat(h,"inOrders"),a[d]=l;return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepthPair(this.extend(s,i));case 9:if(o=e.sent,a.id in o){e.next=13;break}throw new p(this.id+" "+a.symbol+" order book is empty or not available");case 13:return c=o[a.id],e.abrupt("return",this.parseOrderBook(c));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=5,this.loadMarkets();case 5:if(a=void 0,void 0!==t){e.next=13;break}if(!((a=this.ids.join("-")).length>2048)){e.next=11;break}throw s=this.ids.length,new p(this.id+" has "+s.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:a=(a=this.marketIds(t)).join("-");case 15:return o={pair:a},void 0!==r&&(o.limit=r),e.next=19,this.publicGetDepthPair(this.extend(o,i));case 19:for(c=e.sent,u={},a=Object.keys(c),d=0;d<a.length;d++)h=a[d],l=this.safeSymbol(h),u[l]=this.parseOrderBook(c[h]);return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol,t.active||(r=void 0));var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:{},e.next=4,this.loadMarkets();case 4:if(i=this.ids,void 0!==t){e.next=13;break}if(a=i.length,!((i=i.join("-")).length>this.options.fetchTickersMaxLength)){e.next=11;break}throw s=this.safeInteger(this.options,"fetchTickersMaxLength",2048),new v(this.id+" has "+a.toString()+" markets exceeding max URL length for this endpoint ("+s.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join("-");case 15:return o={pair:i},e.next=18,this.publicGetTickerPair(this.extend(o,r));case 18:for(c=e.sent,u={},d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=this.safeMarket(l),p=f.symbol,u[p]=this.parseTicker(c[l],f);return e.abrupt("return",this.filterByArray(u,"symbol",t));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");"ask"===i?i="sell":"bid"===i&&(i="buy");var n=this.safeFloat2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),s=this.safeString(e,"order_id"),o=this.safeString(e,"pair"),c=this.safeSymbol(o,t),u=this.safeFloat(e,"amount"),d="limit",h=void 0,l=void 0,f=this.safeFloat(e,"commission");if(void 0!==f){var p=this.safeString(e,"commissionCurrency"),v=this.safeCurrencyCode(p);l={cost:f,currency:v}}var m=this.safeValue(e,"is_your_order");void 0!==m&&(h="taker",m&&(h="maker"),void 0===l&&(l=this.calculateFee(c,d,i,u,n,h)));var y=void 0;return void 0!==u&&void 0!==n&&(y=u*n),{id:a,order:s,timestamp:r,datetime:this.iso8601(r),symbol:c,type:d,side:i,takerOrMaker:h,price:n,amount:u,cost:y,fee:l,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTradesPair(this.extend(o,a));case 10:if(c=e.sent,!Array.isArray(c)){e.next=15;break}if(0!==c.length){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseTrades(c[s.id],s,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={pair:c.id,type:i,amount:this.amountToPrecision(t,a),rate:this.priceToPrecision(t,s)},s=parseFloat(s),a=parseFloat(a),e.next=12,this.privatePostTrade(this.extend(u,o));case 12:return d=e.sent,h=void 0,l="open",f=0,v=a,"return"in d&&("0"===(h=this.safeString(d.return,"order_id"))&&(h=this.safeString(d.return,"init_order_id"),l="closed"),f=this.safeFloat(d.return,"received",0),v=this.safeFloat(d.return,"remains",a)),m=this.milliseconds(),e.abrupt("return",{id:h,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:l,symbol:t,type:r,side:i,price:s,cost:s*f,amount:a,remaining:v,filled:f,fee:void 0,info:d,clientOrderId:void 0,average:void 0,trades:void 0});case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostCancelOrder(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeTimestamp(e,"timestamp_created"),a=this.safeString(e,"pair"),s=this.safeSymbol(a,t),o=void 0,c=void 0,u=this.safeFloat(e,"rate");"start_amount"in e?(c=this.safeFloat(e,"start_amount"),o=this.safeFloat(e,"amount")):o=this.safeFloat(e,"amount");var d=void 0;return this.safeOrder({info:e,id:r,clientOrderId:void 0,symbol:s,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,type:"limit",timeInForce:void 0,postOnly:void 0,side:this.safeString(e,"type"),price:u,stopPrice:void 0,cost:void 0,amount:c,remaining:o,filled:void 0,status:i,fee:d,average:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>1&&void 0!==c[1]?c[1]:void 0,r=c.length>2&&void 0!==c[2]?c[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostOrderInfo(this.extend(i,r));case 7:return a=e.sent,t=t.toString(),s=this.safeValue(a,"return",{}),o=this.safeValue(s,t),e.abrupt("return",this.parseOrder(this.extend({id:t},o)));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.pair=o.id),e.next=11,this.privatePostActiveOrders(this.extend(s,a));case 11:return c=e.sent,u=this.safeValue(c,"return",[]),e.abrupt("return",this.parseOrders(u,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.pair=s.id),void 0!==i&&(o.count=parseInt(i)),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=13,this.privatePostTradeHistory(this.extend(o,a));case 13:return c=e.sent,u=this.safeValue(c,"return",[]),e.abrupt("return",this.parseTrades(u,s,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={coinName:o.id,amount:parseFloat(r),address:i},void 0===a){e.next=9;break}throw new p(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");case 9:return e.next=11,this.privatePostWithdrawCoin(this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",{info:u,id:u.return.tId});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t],o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce();a=this.urlencode(this.extend({nonce:c,method:e},o));var u=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:u}}else"public"===t?(s+="/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o))):(s+="/"+this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),n={"Content-Type":"application/json"}));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"success"in s){var u=this.safeValue(s,"success",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=this.safeString(s,"code"),h=this.safeString(s,"error"),l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.PermissionDenied,v=l.ExchangeNotAvailable,m=l.InsufficientFunds,y=l.OrderNotFound,g=l.InvalidOrder,b=l.RateLimitExceeded,k=l.NotSupported,x=l.BadRequest,w=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"timex",name:"TimeX",countries:["AU"],version:"v1",rateLimit:1500,has:{cancelOrder:!0,cancelOrders:!0,CORS:!1,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFee:!0},timeframes:{"1m":"I1","5m":"I5","15m":"I15","30m":"I30","1h":"H1","2h":"H2","4h":"H4","6h":"H6","12h":"H12","1d":"D1","1w":"W1"},urls:{logo:"https://user-images.githubusercontent.com/1294454/70423869-6839ab00-1a7f-11ea-8f94-13ae72c31115.jpg",api:"https://plasma-relay-backend.timex.io",www:"https://timex.io",doc:"https://docs.timex.io",referral:"https://timex.io/?refcode=1x27vNkTbP1uwkCck"},api:{custody:{get:["credentials","credentials/h/{hash}","credentials/k/{key}","credentials/me/address","deposit-addresses","deposit-addresses/h/{hash}"]},history:{get:["orders","orders/details","orders/export/csv","trades","trades/export/csv"]},currencies:{get:["a/{address}","i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},markets:{get:["i/{id}","s/{symbol}"],post:["perform","prepare","remove/perform","s/{symbol}/remove/prepare","s/{symbol}/update/perform","s/{symbol}/update/prepare"]},public:{get:["candles","currencies","markets","orderbook","orderbook/raw","orderbook/v2","tickers","trades"]},statistics:{get:["address"]},trading:{get:["balances","fees","orders"],post:["orders","orders/json"],put:["orders","orders/json"],delete:["orders","orders/json"]},tradingview:{get:["config","history","symbol_info","time"]}},exceptions:{exact:{0:f,1:k,4e3:x,4001:x,4002:m,4003:w,4004:w,4005:x,4006:x,4007:x,4300:p,4100:w,4400:y,5001:g,5002:f,400:x,401:w,403:p,404:y,429:b,500:f,503:v},broad:{Insufficient:m}},options:{fetchTickers:{period:"1d"},fetchTrades:{sort:"timestamp,asc"},fetchMyTrades:{sort:"timestamp,asc"},fetchOpenOrders:{sort:"createdAt,asc"},fetchClosedOrders:{sort:"createdAt,asc"},defaultSort:"timestamp,asc",defaultSortOrders:"createdAt,asc"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.publicGetMarkets(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)n.push(this.parseMarket(r[a]));return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:{},e.next=3,this.publicGetCurrencies(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],n.push(this.parseCurrency(s));return e.abrupt("return",this.indexBy(n,"code"));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=4,this.loadMarkets();case 4:return n=this.safeString(this.options.fetchTickers,"period","1d"),a={period:this.timeframes[n]},e.next=8,this.publicGetTickers(this.extend(a,r));case 8:return s=e.sent,e.abrupt("return",this.parseTickers(s,t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a=this.safeString(this.options.fetchTickers,"period","1d"),s={market:n.id,period:this.timeframes[a]},e.next=8,this.publicGetTickers(this.extend(s,r));case 8:return o=e.sent,c=this.safeValue(o,0),e.abrupt("return",this.parseTicker(c,n));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetOrderbookV2(this.extend(s,n));case 9:return o=e.sent,c=this.parse8601(this.safeString(o,"timestamp")),e.abrupt("return",this.parseOrderBook(o,c,"bid","ask","price","baseTokenAmount"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o=this.safeValue(this.options,"fetchTrades",{}),c=this.safeValue(o,"sort","timestamp,asc"),u=this.safeString(a,"sort",c),d=this.omit(a,"sort"),h={market:s.id,sort:u},void 0!==r&&(h.from=this.iso8601(r)),void 0!==n&&(h.size=n),e.next=15,this.publicGetTrades(this.extend(h,d));case 15:return l=e.sent,e.abrupt("return",this.parseTrades(l,s,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>1&&void 0!==l[1]?l[1]:"1m",n=l.length>2&&void 0!==l[2]?l[2]:void 0,a=l.length>3&&void 0!==l[3]?l[3]:void 0,s=l.length>4&&void 0!==l[4]?l[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,period:this.timeframes[r]},u=this.parseTimeframe(r),void 0!==n?(c.from=this.iso8601(n),void 0!==a&&(c.till=this.iso8601(this.sum(n,this.sum(a,1)*u*1e3)))):void 0!==a?(d=this.milliseconds(),c.till=this.iso8601(d),c.from=this.iso8601(d-a*u*1e3-1)):c.till=this.iso8601(this.milliseconds()),e.next=12,this.publicGetCandles(this.extend(c,s));case 12:return h=e.sent,e.abrupt("return",this.parseOHLCVs(h,o,r,n,a));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.tradingGetBalances(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).total=this.safeFloat(s,"totalBalance"),u.used=this.safeFloat(s,"lockedBalance"),n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,y,b,k=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=k.length>4&&void 0!==k[4]?k[4]:void 0,o=k.length>5&&void 0!==k[5]?k[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u=n.toUpperCase(),d=r.toUpperCase(),h={symbol:c.id,quantity:this.amountToPrecision(t,a),side:u,orderTypes:d},l=o,"LIMIT"!==d){e.next=26;break}if(h.price=this.priceToPrecision(t,s),f=this.safeInteger(this.options,"expireIn"),p=this.safeValue(o,"expireTime"),v=this.safeValue(o,"expireIn",f),void 0===p){e.next=18;break}h.expireTime=p,e.next=23;break;case 18:if(void 0===v){e.next=22;break}h.expireIn=v,e.next=23;break;case 22:throw new g(this.id+" createOrder() method requires a expireTime or expireIn param for a "+r+" order, you can also set the expireIn exchange-wide option");case 23:l=this.omit(o,["expireTime","expireIn"]),e.next=27;break;case 26:h.price=0;case 27:return e.next=29,this.tradingPostOrders(this.extend(h,l));case 29:return m=e.sent,y=this.safeValue(m,"orders",[]),b=this.safeValue(y,0,{}),e.abrupt("return",this.parseOrder(b,c));case 33:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:void 0,c=y.length>6&&void 0!==y[6]?y[6]:{},e.next=5,this.loadMarkets();case 5:return u=this.market(r),d={id:t},void 0!==s&&(d.quantity=this.amountToPrecision(r,s)),void 0!==o&&(d.price=this.priceToPrecision(r,o)),e.next=11,this.tradingPutOrders(this.extend(d,c));case 11:if(!("unchangedOrders"in(h=e.sent))){e.next=16;break}return l=this.safeValue(h,"unchangedOrders",[]),f=this.safeString(l,0),e.abrupt("return",{id:f,info:h});case 16:return p=this.safeValue(h,"changedOrders",[]),v=this.safeValue(p,0,{}),m=this.safeValue(v,"newOrder",{}),e.abrupt("return",this.parseOrder(m,u));case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:void 0,n=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.cancelOrders([t],r,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelOrders",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={id:t},e.next=7,this.tradingDeleteOrders(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return r={orderHash:t},e.next=7,this.historyGetOrdersDetails(r);case 7:return n=e.sent,a=this.safeValue(n,"order",{}),s=this.safeValue(n,"trades",[]),e.abrupt("return",this.parseOrder(this.extend(a,{trades:s})));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeValue(this.options,"fetchOpenOrders",{}),o=this.safeValue(s,"sort","createdAt,asc"),c=this.safeString(a,"sort",o),u=this.omit(a,"sort"),d={sort:c},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==n&&(d.size=n),e.next=16,this.tradingGetOrders(this.extend(d,u));case 16:return l=e.sent,f=this.safeValue(l,"orders",[]),e.abrupt("return",this.parseOrders(f,h,r,n));case 19:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeValue(this.options,"fetchClosedOrders",{}),o=this.safeValue(s,"sort","createdAt,asc"),c=this.safeString(a,"sort",o),u=this.omit(a,"sort"),d={sort:c,side:"BUY"},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==r&&(d.from=this.iso8601(r)),void 0!==n&&(d.size=n),e.next=17,this.historyGetOrders(this.extend(d,u));case 17:return l=e.sent,f=this.safeValue(l,"orders",[]),e.abrupt("return",this.parseOrders(f,h,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:void 0,r=p.length>1&&void 0!==p[1]?p[1]:void 0,n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:{},e.next=6,this.loadMarkets();case 6:return s=this.safeValue(this.options,"fetchMyTrades",{}),o=this.safeValue(s,"sort","timestamp,asc"),c=this.safeString(a,"sort",o),u=this.omit(a,"sort"),d={sort:c},h=void 0,void 0!==t&&(h=this.market(t),d.symbol=h.id),void 0!==r&&(d.from=this.iso8601(r)),void 0!==n&&(d.size=n),e.next=17,this.historyGetTrades(this.extend(d,u));case 17:return l=e.sent,f=this.safeValue(l,"trades",[]),e.abrupt("return",this.parseTrades(f,h,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={markets:n.id},e.next=7,this.tradingGetFees(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,0,{}),e.abrupt("return",{info:s,maker:this.safeFloat(o,"fee"),taker:void 0});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseMarket",value:function(e){var t=!this.safeValue(e,"locked"),r=this.safeString(e,"symbol"),i=this.safeString(e,"baseCurrency"),n=this.safeString(e,"quoteCurrency"),a=this.safeCurrencyCode(i),s=this.safeCurrencyCode(n),o=a+"/"+s,c={amount:this.precisionFromString(this.safeString(e,"quantityIncrement")),price:this.precisionFromString(this.safeString(e,"tickSize"))},u=this.safeFloat(e,"quantityIncrement"),d=this.safeFloat(e,"baseMinSize"),h=Math.max(u,d),l=this.safeFloat(e,"tickSize"),f=this.safeFloat(e,"quoteMinSize");return{id:r,symbol:o,base:a,quote:s,baseId:i,quoteId:n,type:"spot",active:t,precision:c,limits:{amount:{min:h,max:void 0},price:{min:l,max:void 0},cost:{min:Math.max(f,h*l),max:void 0}},taker:this.safeFloat(e,"takerFee"),maker:this.safeFloat(e,"makerFee"),info:e}}},{key:"parseCurrency",value:function(e){var t=this.safeString(e,"symbol"),r=this.safeCurrencyCode(t),i=this.safeString(e,"name"),n=this.safeInteger(e,"decimals"),a=this.safeValue(e,"active"),s=this.safeString(e,"withdrawalFee"),o=this.safeInteger(e,"tradeDecimals"),c=void 0;if(void 0!==s&&void 0!==o){var u=s.length-o;if(u>0){var d=s.slice(0,u),h=s.slice(-u);c=parseFloat(d+"."+h)}else{for(var l=".",f=0;f<-u;f++)l+="0";c=parseFloat(l+s)}}return{id:r,code:r,info:e,type:void 0,name:i,active:a,fee:c,precision:n,limits:{withdraw:{min:c,max:void 0},amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0}}}}},{key:"parseTickers",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=[],i=0;i<e.length;i++)r.push(this.parseTicker(e[i]));return this.filterByArray(r,"symbol",t)}},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"market"),i=this.safeSymbol(r,t,"/"),n=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"last"),s=this.safeFloat(e,"open"),o=void 0,c=void 0;void 0!==a&&void 0!==s&&(o=a-s,c=this.sum(a,s)/2);var u=void 0;return void 0!==o&&s&&(u=o/s*100),{symbol:i,info:e,timestamp:n,datetime:this.iso8601(n),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:o,percentage:u,average:c,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"volumeQuote")}}},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"symbol"),i=this.safeSymbol(r,t),n=this.parse8601(this.safeString(e,"timestamp")),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"quantity"),o=this.safeString(e,"id"),c=this.safeStringLower2(e,"direction","side"),u=this.safeStringLower(e,"makerOrTaker"),d=void 0;void 0!==u&&(d=this.safeString(e,u+"OrderId"));var h=void 0,l=this.safeFloat(e,"fee");if(void 0!==l){var f=void 0===t?void 0:t.quote;h={cost:l,currency:f}}var p=void 0;return void 0!==a&&void 0!==s&&(p=this.costToPrecision(i,s*a)),{info:e,id:o,timestamp:n,datetime:this.iso8601(n),symbol:i,order:d,type:void 0,side:c,price:a,amount:s,cost:p,takerOrMaker:u,fee:h}}},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"timestamp")),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeStringLower(e,"type"),n=this.safeStringLower(e,"side"),a=this.safeString(e,"symbol"),s=this.safeSymbol(a,t),o=this.parse8601(this.safeString(e,"createdAt")),c=this.safeFloat(e,"price"),u=this.safeFloat(e,"quantity"),d=this.safeFloat(e,"filledQuantity"),h=this.safeFloat(e,"cancelledQuantity"),l=void 0,f=void 0;void 0!==u&&void 0!==d&&(l=Math.max(u-d,0),f=d>=u?"closed":void 0!==h&&h>0?"canceled":"open");var p=parseFloat(this.costToPrecision(s,c*d)),v=void 0,m=void 0,y=void 0,g=this.safeValue(e,"trades");if(void 0!==g&&(y=this.parseTrades(g,t,void 0,void 0,{order:r})),void 0!==y){var b=y.length;b>0&&(m=y[b-1].timestamp)}var k=this.safeString(e,"clientOrderId");return{info:e,id:r,clientOrderId:k,timestamp:o,datetime:this.iso8601(o),lastTradeTimestamp:m,symbol:s,type:i,timeInForce:void 0,postOnly:void 0,side:n,price:c,stopPrice:void 0,amount:u,cost:p,average:void 0,filled:d,remaining:l,status:f,fee:v,trades:y}}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/"+t+"/"+e;if(Object.keys(i).length&&(s+="?"+this.urlencodeWithArrayRepeat(i)),"public"!==t){this.checkRequiredCredentials();var o=this.stringToBase64(this.apiKey+":"+this.secret),c="Basic "+this.decode(o);n={authorization:c}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&e>=400){var u=this.id+" "+a,d=this.safeValue(s,"error");void 0===d&&(d=s);var h=this.safeString2(d,"code","status"),l=this.safeString2(d,"message","debugMessage");throw this.throwBroadlyMatchedException(this.exceptions.broad,l,u),this.throwExactlyMatchedException(this.exceptions.exact,h,u),this.throwExactlyMatchedException(this.exceptions.exact,l,u),new f(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadRequest,m=f.AuthenticationError,y=f.InvalidOrder,g=f.InsufficientFunds,b=f.OrderNotFound,k=f.PermissionDenied,x=f.AddressPending;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"upbit",name:"Upbit",countries:["KR"],version:"v1",rateLimit:1e3,pro:!0,has:{cancelOrder:!0,CORS:!0,createDepositAddress:!0,createMarketOrder:!0,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!1,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchOrders:!1,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!0,withdraw:!0},timeframes:{"1m":"minutes","3m":"minutes","5m":"minutes","15m":"minutes","30m":"minutes","1h":"minutes","4h":"minutes","1d":"days","1w":"weeks","1M":"months"},hostname:"api.upbit.com",urls:{logo:"https://user-images.githubusercontent.com/1294454/49245610-eeaabe00-f423-11e8-9cba-4b0aed794799.jpg",api:{public:"https://{hostname}",private:"https://{hostname}"},www:"https://upbit.com",doc:"https://docs.upbit.com/docs/%EC%9A%94%EC%B2%AD-%EC%88%98-%EC%A0%9C%ED%95%9C",fees:"https://upbit.com/service_center/guide"},api:{public:{get:["market/all","candles/{timeframe}","candles/{timeframe}/{unit}","candles/minutes/{unit}","candles/minutes/1","candles/minutes/3","candles/minutes/5","candles/minutes/15","candles/minutes/30","candles/minutes/60","candles/minutes/240","candles/days","candles/weeks","candles/months","trades/ticks","ticker","orderbook"]},private:{get:["accounts","orders/chance","order","orders","withdraws","withdraw","withdraws/chance","deposits","deposit","deposits/coin_addresses","deposits/coin_address"],post:["orders","withdraws/coin","withdraws/krw","deposits/generate_coin_address"],delete:["order"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.0025,taker:.0025},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"This key has expired.":m,"Missing request parameter error. Check the required parameters!":v,"side is missing, side does not have a valid value":y},broad:{thirdparty_agreement_required:k,out_of_scope:k,order_not_found:b,insufficient_funds:g,invalid_access_key:m,jwt_verification:m,create_ask_error:p,create_bid_error:p,volume_too_large:y,invalid_funds:y}},options:{createMarketBuyOrderRequiresPrice:!0,fetchTickersMaxLength:4096,fetchOrderBooksMaxLength:4096,tradingFeesByQuoteCurrency:{KRW:5e-4}},commonCurrencies:{TON:"Tokamak Network"}})}},{key:"fetchCurrency",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.fetchCurrencyById(i.id,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchCurrencyById",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},i={currency:t},e.next=4,this.privateGetWithdrawsChance(this.extend(i,r));case 4:return a=e.sent,s=this.safeValue(a,"member_level",{}),o=this.safeValue(a,"currency",{}),c=this.safeValue(a,"withdraw_limit",{}),u=this.safeValue(c,"can_withdraw"),d=this.safeString(o,"wallet_state"),h=this.safeValue(s,"wallet_locked"),l=this.safeValue(s,"locked"),f=!0,void 0===u||u?("working"!==d||void 0!==h&&h||void 0!==l&&l)&&(f=!1):f=!1,p=this.safeFloat(c,"onetime"),v=this.safeFloat(c,"daily",p),m=this.safeFloat(c,"remaining_daily",v),y=void 0,y=m>0?m:v,g=void 0,b=this.safeString(o,"code"),k=this.safeCurrencyCode(b),e.abrupt("return",{info:a,id:b,code:k,name:k,active:f,fee:this.safeFloat(o,"withdraw_fee"),precision:g,limits:{withdraw:{min:this.safeFloat(c,"minimum"),max:y}}});case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarket",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),e.next=6,this.fetchMarketById(i.id,r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarketById",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:{},i={market:t},e.next=4,this.privateGetOrdersChance(this.extend(i,r));case 4:return a=e.sent,s=this.safeValue(a,"market"),o=this.safeValue(s,"bid"),c=this.safeValue(s,"ask"),u=this.safeString(s,"id"),d=this.safeString(c,"currency"),h=this.safeString(o,"currency"),l=this.safeCurrencyCode(d),f=this.safeCurrencyCode(h),p=l+"/"+f,v={amount:8,price:8},m=this.safeString(s,"state"),y="active"===m,g=this.safeFloat(a,"bid_fee"),b=this.safeFloat(a,"ask_fee"),k=Math.max(g,b),e.abrupt("return",{info:a,id:u,symbol:p,base:l,quote:f,baseId:d,quoteId:h,active:y,precision:v,maker:k,taker:k,limits:{amount:{min:this.safeFloat(c,"min_total"),max:void 0},price:{min:Math.pow(10,-v.price),max:void 0},cost:{min:this.safeFloat(o,"min_total"),max:this.safeFloat(s,"max_total")}}});case 21:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=k.length>0&&void 0!==k[0]?k[0]:{},e.next=3,this.publicGetMarketAll(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],c=this.safeString(o,"market"),u=c.split("-"),d=i(u,2),h=d[0],l=d[1],f=this.safeCurrencyCode(l),p=this.safeCurrencyCode(h),v=f+"/"+p,m={amount:8,price:8},y=!0,g=this.safeFloat(this.options.tradingFeesByQuoteCurrency,p,this.fees.trading.maker),b=this.safeFloat(this.options.tradingFeesByQuoteCurrency,p,this.fees.trading.taker),a.push({id:c,symbol:v,base:f,quote:p,baseId:l,quoteId:h,active:y,info:o,precision:m,maker:g,taker:b,limits:{amount:{min:Math.pow(10,-m.amount),max:void 0},price:{min:Math.pow(10,-m.price),max:void 0},cost:{min:void 0,max:void 0}}});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAccounts(t);case 5:for(r=e.sent,i={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"currency"),c=this.safeCurrencyCode(o),(u=this.account()).free=this.safeFloat(s,"balance"),u.used=this.safeFloat(s,"locked"),i[c]=u;return e.abrupt("return",this.parseBalance(i));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:void 0,v.length>1&&void 0!==v[1]?v[1]:void 0,r=v.length>2&&void 0!==v[2]?v[2]:{},e.next=5,this.loadMarkets();case 5:if(i=void 0,void 0!==t){e.next=13;break}if(!((i=this.ids.join(",")).length>this.options.fetchOrderBooksMaxLength)){e.next=11;break}throw a=this.ids.length,new p(this.id+" has "+a.toString()+" symbols ("+i.length.toString()+" characters) exceeding max URL length ("+this.options.fetchOrderBooksMaxLength.toString()+" characters), you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join(",");case 15:return s={markets:i},e.next=18,this.publicGetOrderbook(this.extend(s,r));case 18:for(o=e.sent,c={},u=0;u<o.length;u++)d=o[u],h=this.safeString(d,"market"),l=this.safeSymbol(h,void 0,"-"),f=this.safeInteger(d,"timestamp"),c[l]={bids:this.sortBy(this.parseBidsAsks(d.orderbook_units,"bid_price","bid_size"),0,!0),asks:this.sortBy(this.parseBidsAsks(d.orderbook_units,"ask_price","ask_size"),0),timestamp:f,datetime:this.iso8601(f),nonce:void 0};return e.abrupt("return",c);case 22:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.fetchOrderBooks([t],r,i);case 4:return a=e.sent,e.abrupt("return",this.safeValue(a,t));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"trade_timestamp"),i=this.safeString2(e,"market","code"),n=this.safeSymbol(i,t,"-"),a=this.safeFloat(e,"prev_closing_price"),s=this.safeFloat(e,"trade_price"),o=this.safeFloat(e,"signed_change_price"),c=this.safeFloat(e,"signed_change_rate");return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high_price"),low:this.safeFloat(e,"low_price"),bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"opening_price"),close:s,last:s,previousClose:a,change:o,percentage:c,average:void 0,baseVolume:this.safeFloat(e,"acc_trade_volume_24h"),quoteVolume:this.safeFloat(e,"acc_trade_price_24h"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:if(i=void 0,void 0!==t){e.next=12;break}if(!((i=this.ids.join(",")).length>this.options.fetchTickersMaxLength)){e.next=10;break}throw a=this.ids.length,new p(this.id+" has "+a.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchTickers");case 10:e.next=14;break;case 12:i=(i=this.marketIds(t)).join(",");case 14:return s={markets:i},e.next=17,this.publicGetTicker(this.extend(s,r));case 17:for(o=e.sent,c={},u=0;u<o.length;u++)d=this.parseTicker(o[u]),h=d.symbol,c[h]=d;return e.abrupt("return",this.filterByArray(c,"symbol",t));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",this.safeValue(i,t));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString2(e,"sequential_id","uuid"),n=void 0,a=this.safeInteger(e,"timestamp");void 0===a&&(a=this.parse8601(this.safeString(e,"created_at")));var s=void 0,o=this.safeStringLower2(e,"ask_bid","side");"ask"===o?s="sell":"bid"===o&&(s="buy");var c=this.safeFloat(e,"funds"),u=this.safeFloat2(e,"trade_price","price"),d=this.safeFloat2(e,"trade_volume","volume");void 0===c&&void 0!==d&&void 0!==u&&(c=u*d);var h=this.safeString2(e,"market","code"),l=void 0,f=void 0,p=void 0;if(void 0!==(t=this.safeMarket(h,t)))p=t.symbol,f=t.quote;else{var v=h.split("-"),m=i(v,2),y=m[0],g=m[1],b=this.safeCurrencyCode(y),k=this.safeCurrencyCode(g);p=b+"/"+k,f=k}var x=this.safeString(e,o+"_fee");return void 0!==x&&(l={currency:f,cost:x}),{id:r,info:e,order:n,timestamp:a,datetime:this.iso8601(a),symbol:p,type:void 0,side:s,takerOrMaker:void 0,price:u,amount:d,cost:c,fee:l}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),void 0===i&&(i=200),o={market:s.id,count:i},e.next=10,this.publicGetTradesTicks(this.extend(o,a));case 10:return c=e.sent,e.abrupt("return",this.parseTrades(c,s,r,i));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.parse8601(this.safeString(e,"candle_date_time_utc")),this.safeFloat(e,"opening_price"),this.safeFloat(e,"high_price"),this.safeFloat(e,"low_price"),this.safeFloat(e,"trade_price"),this.safeFloat(e,"candle_acc_trade_volume")]}},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",i=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c=this.parseTimeframe(r),u=this.timeframes[r],void 0===a&&(a=200),d={market:o.id,timeframe:u,count:a},h="publicGetCandlesTimeframe","minutes"===u&&(l=Math.round(c/60),d.unit=l,h+="Unit"),void 0!==i&&(d.to=this.iso8601(this.sum(i,c*a*1e3))),e.next=16,this[h](this.extend(d,s));case 16:return f=e.sent,e.abrupt("return",this.parseOHLCVs(f,o,r,i,a));case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=l.length>4&&void 0!==l[4]?l[4]:void 0,o=l.length>5&&void 0!==l[5]?l[5]:{},"market"!==r){e.next=10;break}if("buy"!==i){e.next=10;break}if(!this.options.createMarketBuyOrderRequiresPrice){e.next=10;break}if(void 0!==s){e.next=9;break}throw new y(this.id+" createOrder() requires the price argument with market buy orders to calculate total order cost (amount to spend), where cost = amount * price. Supply a price argument to createOrder() call if you want the cost to be calculated for you from price and amount, or, alternatively, add .options['createMarketBuyOrderRequiresPrice'] = false to supply the cost in the amount argument (the exchange-specific behaviour)");case 9:a*=s;case 10:if(c=void 0,"buy"!==i){e.next=15;break}c="bid",e.next=20;break;case 15:if("sell"!==i){e.next=19;break}c="ask",e.next=20;break;case 19:throw new y(this.id+" createOrder allows buy or sell side only!");case 20:return e.next=22,this.loadMarkets();case 22:return u=this.market(t),d={market:u.id,side:c},"limit"===r?(d.volume=this.amountToPrecision(t,a),d.price=this.priceToPrecision(t,s),d.ord_type=r):"market"===r&&("buy"===i?(d.ord_type="price",d.price=this.priceToPrecision(t,a)):"sell"===i&&(d.ord_type=r,d.volume=this.amountToPrecision(t,a))),e.next=27,this.privatePostOrders(this.extend(d,o));case 27:return h=e.sent,e.abrupt("return",this.parseOrder(h));case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={uuid:t},e.next=7,this.privateDeleteOrder(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.limit=i),e.next=12,this.privateGetDeposits(this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==i&&(s.limit=i),e.next=12,this.privateGetWithdraws(this.extend(s,a));case 12:return c=e.sent,e.abrupt("return",this.parseTransactions(c,o,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransactionStatus",value:function(e){return this.safeString({ACCEPTED:"ok",submitting:"pending",submitted:"pending",almost_accepted:"pending",rejected:"failed",accepted:"pending",processing:"pending",done:"ok",canceled:"canceled"},e,e)}},{key:"parseTransaction",value:function(e){var t=this.safeString(e,"uuid"),r=this.safeFloat(e,"amount"),i=void 0,n=void 0,a=this.safeString(e,"txid"),s=this.parse8601(this.safeString(e,"done_at")),o=this.parse8601(this.safeString(e,"created_at",s)),c=this.safeString(e,"type");"withdraw"===c&&(c="withdrawal");var u=this.safeString(e,"currency"),d=this.safeCurrencyCode(u),h=this.parseTransactionStatus(this.safeString(e,"state")),l=this.safeFloat(e,"fee");return{info:e,id:t,currency:d,amount:r,address:i,tag:n,status:h,type:c,updated:s,txid:a,timestamp:o,datetime:this.iso8601(o),fee:{currency:d,cost:l}}}},{key:"parseOrderStatus",value:function(e){return this.safeString({wait:"open",done:"closed",cancel:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"uuid"),i=this.safeString(e,"side");i="bid"===i?"buy":"sell";var n=this.safeString(e,"ord_type"),a=this.parse8601(this.safeString(e,"created_at")),s=this.parseOrderStatus(this.safeString(e,"state")),o=void 0,c=this.safeFloat(e,"price"),u=this.safeFloat(e,"volume"),d=this.safeFloat(e,"remaining_volume"),h=this.safeFloat(e,"executed_volume"),l=void 0;"price"===n&&(n="market",l=c,c=void 0);var f=void 0,p=void 0,v=this.safeFloat(e,"paid_fee"),m=this.safeString(e,"market");t=this.safeMarket(m,t);var y=this.safeValue(e,"trades",[]),g=(y=this.parseTrades(y,t,void 0,void 0,{order:r,type:n})).length;if(g>0){o=y[g-1].timestamp;var b=!1;void 0===v&&(b=!0,v=0),l=0;for(var k=0;k<g;k++){var x=y[k];if(l=this.sum(l,x.cost),b){var w=this.safeValue(y[k],"fee",{}),_=this.safeFloat(w,"cost");void 0!==_&&(v=this.sum(v,_))}}f=l/h}void 0!==v&&(p={currency:t.quote,cost:v});var O={info:e,id:r,clientOrderId:void 0,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:o,symbol:t.symbol,type:n,timeInForce:void 0,postOnly:void 0,side:i,price:c,stopPrice:void 0,cost:l,average:f,amount:u,filled:h,remaining:d,status:s,fee:p,trades:y};return O}},{key:"fetchOrdersByState",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},e.next=6,this.loadMarkets();case 6:return o={state:t},c=void 0,void 0!==r&&(c=this.market(r),o.market=c.id),e.next=11,this.privateGetOrders(this.extend(o,s));case 11:return u=e.sent,e.abrupt("return",this.parseOrders(u,c,i,a));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("wait",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("done",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCanceledOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,i=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersByState("cancel",t,r,i,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return i={uuid:t},e.next=7,this.privateGetOrder(this.extend(i,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseDepositAddresses",value:function(e){for(var t={},r=0;r<e.length;r++){var i=this.parseDepositAddress(e[r]);t[i.currency]=i}return t}},{key:"fetchDepositAddresses",value:function(){var e=a(n.mark((function e(){var t,r,i=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.length>0&&void 0!==i[0]?i[0]:void 0,t=i.length>1&&void 0!==i[1]?i[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.privateGetDepositsCoinAddresses(t);case 6:return r=e.sent,e.abrupt("return",this.parseDepositAddresses(r));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseDepositAddress",value:function(e){var t=this.safeString(e,"deposit_address"),r=this.safeString(e,"secondary_address"),i=this.safeString(e,"currency"),n=this.safeCurrencyCode(i);return this.checkAddress(t),{currency:n,address:t,tag:r,info:e}}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),e.next=6,this.privateGetDepositsCoinAddress(this.extend({currency:i.id},r));case 6:return a=e.sent,e.abrupt("return",this.parseDepositAddress(a));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={currency:i.id},e.next=7,this.privatePostDepositsGenerateCoinAddress(this.extend(a,r));case 7:if(s=e.sent,void 0===this.safeString(s,"message")){e.next=11;break}throw new x(this.id+" is generating "+t+" deposit address, call fetchDepositAddress or createDepositAddress one more time later to retrieve the generated address");case 11:return e.abrupt("return",this.parseDepositAddress(s));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:return o=this.currency(t),c={amount:r},u="privatePostWithdraws","KRW"!==t?(u+="Coin",c.currency=o.id,c.address=i,void 0!==a&&(c.secondary_address=a)):u+="Krw",e.next=11,this[u](this.extend(c,s));case 11:return d=e.sent,e.abrupt("return",this.parseTransaction(d));case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.implodeParams(this.urls.api[t],{hostname:this.hostname});s+="/"+this.version+"/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("POST"!==r&&Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var c=this.nonce(),u={access_key:this.apiKey,nonce:c};if(Object.keys(o).length){var d=this.urlencode(o),h=this.hash(this.encode(d),"sha512");u.query_hash=h,u.query_hash_alg="SHA512"}var l=this.jwt(u,this.encode(this.secret));n={Authorization:"Bearer "+l},"GET"!==r&&"DELETE"!==r&&(a=this.json(i),n["Content-Type"]="application/json")}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeValue(s,"error");if(void 0!==u){var d=this.safeString(u,"message"),h=this.safeString(u,"name"),l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,d,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(2),n=r(4),a=r(7),s=r(3),o=r(5),c=r(6),u=r(62);e.exports=function(e){o(r,e);var t=c(r);function r(){return i(this,r),t.apply(this,arguments)}return n(r,[{key:"describe",value:function(){return this.deepExtend(a(s(r.prototype),"describe",this).call(this),{id:"vbtc",name:"VBTC",countries:["VN"],has:{CORS:!1},urls:{logo:"https://user-images.githubusercontent.com/1294454/27991481-1f53d1d8-6481-11e7-884e-21d17e7939db.jpg",api:{public:"https://api.blinktrade.com/api",private:"https://api.blinktrade.com/tapi"},www:"https://vbtc.exchange",doc:"https://blinktrade.com/docs"},options:{brokerId:"3"}})}}]),r}(u)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.OrderNotFound,v=l.InvalidOrder,m=l.BadRequest,y=l.AuthenticationError,g=l.RateLimitExceeded,b=l.RequestTimeout,k=l.BadSymbol,x=l.AddressPending,w=l.PermissionDenied,_=l.InsufficientFunds,O=r(13).ROUND;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"vcc",name:"VCC Exchange",countries:["VN"],rateLimit:1e3,version:"v3",has:{cancelAllOrders:!0,cancelOrder:!0,createOrder:!0,editOrder:!1,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrders:!1,fetchTicker:"emulated",fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!1,fetchTransactions:!0,fetchWithdrawals:!0},timeframes:{"1m":"60000","5m":"300000","15m":"900000","30m":"1800000","1h":"3600000","2h":"7200000","4h":"14400000","6h":"21600000","12h":"43200000","1d":"86400000","1w":"604800000"},urls:{logo:"https://user-images.githubusercontent.com/1294454/100545356-8427f500-326c-11eb-9539-7d338242d61b.jpg",api:{public:"https://api.vcc.exchange",private:"https://api.vcc.exchange"},www:"https://vcc.exchange",doc:["https://vcc.exchange/api"],fees:"https://support.vcc.exchange/hc/en-us/articles/360016401754",referral:"https://vcc.exchange?ref=l4xhrH"},api:{public:{get:["summary","exchange_info","assets","ticker","trades/{market_pair}","orderbook/{market_pair}","chart/bars","tick_sizes"]},private:{get:["user","balance","orders/{order_id}","orders/open","orders","orders/trades","deposit-address","transactions"],post:["orders"],put:["orders/{order_id}/cancel","orders/cancel-by-type","orders/cancel-all"]}},fees:{trading:{tierBased:!1,percentage:!0,maker:.002,taker:.002}},exceptions:{exact:{},broad:{"limit may not be greater than":m,"Insufficient balance":_,Unauthenticated:y,"signature is invalid":y,Timeout:b,"Too many requests":g,"quantity field is required":v,"price field is required":v,error_security_level:w,"pair is invalid":k,"type is invalid":v,"Data not found":p}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=w.length>0&&void 0!==w[0]?w[0]:{},e.next=3,this.publicGetExchangeInfo(t);case 3:for(r=e.sent,n=this.safeValue(r,"data"),a=this.safeValue(n,"symbols"),s=[],o=0;o<a.length;o++)c=this.safeValue(a,o),u=this.safeString(c,"symbol"),d=u.replace("/","_"),h=this.safeString(c,"coin"),l=this.safeString(c,"currency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=this.safeValue(c,"active"),m=this.safeValue(c,"precision",{}),y=this.safeValue(c,"limits",{}),g=this.safeValue(y,"amount",{}),b=this.safeValue(y,"price",{}),k=this.safeValue(y,"cost",{}),x={info:c,id:d,symbol:u,base:f,quote:p,baseId:h,quoteId:l,active:v,precision:{price:this.safeInteger(m,"price"),amount:this.safeInteger(m,"amount"),cost:this.safeInteger(m,"cost")},limits:{amount:{min:this.safeFloat(g,"min"),max:void 0},price:{min:this.safeFloat(b,"min"),max:void 0},cost:{min:this.safeFloat(k,"min"),max:void 0}}},s.push(x);return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicGetAssets(t);case 3:for(r=e.sent,n={},a=this.safeValue(r,"data"),s=Object.keys(a),o=0;o<s.length;o++)c=this.safeStringLower(s,o),u=this.safeValue(a,s[o]),d=this.safeCurrencyCode(c),h=this.safeValue(u,"can_deposit"),l=this.safeValue(u,"can_withdraw"),f=h&&l,n[d]={id:c,code:d,name:this.safeString(u,"name"),active:f,fee:this.safeFloat(u,"withdrawal_fee"),precision:this.safeInteger(u,"decimal"),limits:{withdraw:{min:this.safeFloat(u,"min_withdraw"),max:this.safeFloat(u,"max_withdraw")}}};return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFee",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a=this.extend({symbol:n.id},this.omit(r,"symbol")),e.next=7,this.privateGetTradingFeeSymbol(a);case 7:return s=e.sent,e.abrupt("return",{info:s,maker:this.safeFloat(s,"provideLiquidityRate"),taker:this.safeFloat(s,"takeLiquidityRate")});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetBalance(t);case 5:for(r=e.sent,n=this.safeValue(r,"data"),a={info:r},s=Object.keys(n),o=0;o<s.length;o++)c=s[o],u=this.safeCurrencyCode(c),d=this.safeValue(n,c),(h=this.account()).free=this.safeFloat(d,"available_balance"),h.total=this.safeFloat(d,"balance"),a[u]=h;return e.abrupt("return",this.parseBalance(a));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"time"),this.safeFloat(e,"open"),this.safeFloat(e,"high"),this.safeFloat(e,"low"),this.safeFloat(e,"close"),this.safeFloat(e,"volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.length>1&&void 0!==f[1]?f[1]:"1m",n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={coin:o.baseId,currency:o.quoteId,resolution:this.timeframes[r]},a=void 0===a?100:a,a=Math.min(100,a),u=this.parseTimeframe(r),void 0===n?(d=this.seconds(),c.to=d,c.from=d-a*u):(h=parseInt(n/1e3),c.from=h,c.to=this.sum(h,a*u)),e.next=14,this.publicGetChartBars(this.extend(c,s));case 14:return l=e.sent,e.abrupt("return",this.parseOHLCVs(l,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:if(a=this.market(t),s={market_pair:a.id,level:2},void 0===r){e.next=10;break}if(0===r||5===r||10===r||20===r||50===r||100===r||500===r){e.next=9;break}throw new m(this.id+" fetchOrderBook limit must be 0, 5, 10, 20, 50, 100, 500 if specified");case 9:s.depth=r;case 10:return e.next=12,this.publicGetOrderbookMarketPair(this.extend(s,n));case 12:return o=e.sent,c=this.safeValue(o,"data"),u=this.safeValue(c,"timestamp"),e.abrupt("return",this.parseOrderBook(c,u,"bids","asks",0,1));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=this.safeFloat(e,"base_volume"),n=this.safeFloat(e,"quote_volume"),a=this.safeFloat(e,"open_price"),s=this.safeFloat(e,"last_price"),o=void 0,c=void 0,u=void 0;void 0!==s&&void 0!==a&&(o=s-a,u=this.sum(s,a)/2,a>0&&(c=o/a*100));var d=this.vwap(i,n),h=void 0===t?void 0:t.symbol;return{symbol:h,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"max_price"),low:this.safeFloat(e,"min_price"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:d,open:a,close:s,last:s,previousClose:void 0,change:o,percentage:c,average:u,baseVolume:i,quoteVolume:n,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),e.next=6,this.publicGetTicker(r);case 6:return a=e.sent,s=this.safeValue(a,"data"),o=this.safeValue(s,n.id),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:void 0,r=l.length>1&&void 0!==l[1]?l[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a={},s=this.safeValue(n,"data"),o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=this.safeMarket(u,void 0,"_"),h=d.symbol,a[h]=this.parseTicker(s[u],d);return e.abrupt("return",this.filterByArray(a,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger2(e,"trade_timestamp","created_at"),i=this.safeStringUpper(e,"coin"),n=this.safeStringUpper(e,"currency"),a=void 0;void 0!==i&&void 0!==n&&(a=i+"_"+n);var s=(t=this.safeMarket(a,t,"_")).symbol,o=this.safeFloat(e,"price"),c=this.safeFloat2(e,"base_volume","quantity"),u=this.safeFloat2(e,"quote_volume","amount");void 0===u&&void 0!==o&&void 0!==c&&(u=o*c);var d=this.safeString2(e,"type","trade_type"),h=this.safeString2(e,"trade_id","id"),l=this.safeFloat(e,"fee"),f=void 0;return void 0!==l&&(f={cost:l,currency:t.quote}),{info:e,id:h,order:void 0,timestamp:r,datetime:this.iso8601(r),symbol:s,type:void 0,side:d,takerOrMaker:void 0,price:o,amount:c,cost:u,fee:f}}},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market_pair:s.id},void 0!==n&&(o.count=Math.min(1e3,n)),e.next=10,this.publicGetTradesMarketPair(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactions",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.currency(t),s.currency=o.id),void 0!==n&&(s.limit=Math.min(1e3,n)),void 0!==r&&(s.start=r),e.next=13,this.privateGetTransactions(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",{}),u=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTransactions(u,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"deposit"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:void 0,r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s={type:"withdraw"},e.next=7,this.fetchTransactions(t,r,n,this.extend(s,a));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.safeInteger(e,"created_at"),n=this.safeInteger(e,"updated_at"),a=this.safeString(e,"currency"),s=this.safeCurrencyCode(a,t),o=this.parseTransactionStatus(this.safeString(e,"status")),c=this.safeFloat(e,"amount");void 0!==c&&(c=Math.abs(c));var u=this.safeString(e,"blockchain_address"),d=this.safeString(e,"transaction_id"),h=this.safeString(e,"destination_tag"),l=void 0,f=this.safeFloat(e,"fee");void 0!==f&&(l={cost:f,currency:s});var p=c>0?"deposit":"withdrawal";return{info:e,id:r,txid:d,timestamp:i,datetime:this.iso8601(i),address:u,addressTo:u,addressFrom:void 0,tag:h,tagTo:h,tagFrom:void 0,type:p,amount:c,currency:s,status:o,updated:n,fee:l}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({pending:"pending",error:"failed",success:"ok",cancel:"canceled"},e,e)}},{key:"parseTransactionType",value:function(e){return this.safeString({deposit:"deposit",withdraw:"withdrawal"},e,e)}},{key:"costToPrecision",value:function(e,t){return this.decimalToPrecision(t,O,this.markets[e].precision.cost,this.precisionMode,this.paddingMode)}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=f.length>4&&void 0!==f[4]?f[4]:void 0,o=f.length>5&&void 0!==f[5]?f[5]:{},e.next=4,this.loadMarkets();case 4:if(c=this.market(t),u={coin:c.baseId,currency:c.quoteId,trade_type:n,type:r},"ceiling_market"!==r){e.next=19;break}if(void 0===(d=this.safeValue(o,"ceiling"))){e.next=12;break}u.ceiling=this.costToPrecision(t,d),e.next=17;break;case 12:if(void 0===s){e.next=16;break}u.ceiling=this.costToPrecision(t,a*s),e.next=17;break;case 16:throw new v(this.id+" createOrder() requires a price argument or a ceiling parameter for "+r+" orders");case 17:e.next=20;break;case 19:u.quantity=this.amountToPrecision(t,a);case 20:return"limit"===r&&(u.price=this.priceToPrecision(t,s)),void 0!==this.safeValue2(o,"stop_price","stopPrice")&&(u.is_stop=1,u.stop_condition="buy"===n?"le":"ge",u.stop_price=this.priceToPrecision(t,s)),o=this.omit(o,["stop_price","stopPrice"]),e.next=26,this.privatePostOrders(this.extend(u,o));case 26:return h=e.sent,l=this.safeValue(h,"data"),e.abrupt("return",this.parseOrder(l,c));case 29:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privatePutOrdersOrderIdCancel(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrder(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.length>0&&void 0!==c[0]?c[0]:void 0,t=c.length>1&&void 0!==c[1]?c[1]:{},r=this.safeString(t,"type"),n=void 0===r?"privatePutOrdersCancelAll":"privatePutOrdersCancelByType",a={},void 0!==r&&(a.type=r),e.next=8,this.loadMarkets();case 8:return e.next=10,this[n](this.extend(a,t));case 10:return s=e.sent,o=this.safeValue(s,"data",{}),o=this.safeValue(s,"data",[]),e.abrupt("return",this.parseOrders(o));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({pending:"open",stopping:"open",executing:"open",executed:"closed",canceled:"canceled"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"created_at"),i=this.safeValue(e,"updated_at"),n=this.safeStringUpper(e,"coin"),a=this.safeStringUpper(e,"currency"),s=n+"_"+a,o=(t=this.safeMarket(s,t,"_")).symbol,c=this.safeFloat(e,"quantity"),u=this.safeFloat(e,"executed_quantity"),d=this.parseOrderStatus(this.safeString(e,"status")),h=this.safeFloat(e,"ceiling"),l=this.safeString(e,"id"),f=this.safeFloat(e,"price"),p=this.safeFloat(e,"executed_price"),v=this.safeFloat(e,"remaining"),m=this.safeString(e,"type"),y=this.safeString(e,"trade_type"),g={currency:t.quote,cost:this.safeFloat(e,"fee"),rate:this.safeFloat(e,"fee_rate")},b=void 0;i!==r&&(b=i);var k=this.safeFloat(e,"stopPrice");return this.safeOrder({id:l,clientOrderId:l,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:b,status:d,symbol:o,type:m,timeInForce:void 0,postOnly:void 0,side:y,price:f,stopPrice:k,average:p,amount:c,cost:h,filled:u,remaining:v,fee:g,trades:void 0,info:e})}},{key:"fetchOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return n={order_id:t},e.next=7,this.privateGetOrdersOrderId(this.extend(n,r));case 7:return a=e.sent,s=this.safeValue(a,"data"),e.abrupt("return",this.parseOrder(s));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrdersWithMethod",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:void 0,s=h.length>4&&void 0!==h[4]?h[4]:{},e.next=6,this.loadMarkets();case 6:return o={},c=void 0,void 0!==r&&(c=this.market(r),o.coin=c.baseId,o.currency=c.quoteId),void 0!==n&&(o.start_date=n),void 0!==a&&(o.limit=Math.min(1e3,a)),e.next=13,this[t](this.extend(o,s));case 13:return u=e.sent,d=this.safeValue(u,"data",{}),d=this.safeValue(d,"data",[]),e.abrupt("return",this.parseOrders(d,c,n,a));case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrdersOpen",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchOrdersWithMethod("privateGetOrders",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return s={},o=void 0,void 0!==t&&(o=this.market(t),s.coin=o.baseId,s.currency=o.quoteId),void 0!==r&&(s.start_date=r),void 0!==n&&(s.limit=Math.min(1e3,n)),e.next=13,this.privateGetOrdersTrades(this.extend(s,a));case 13:return c=e.sent,u=this.safeValue(c,"data",{}),u=this.safeValue(u,"data",[]),e.abrupt("return",this.parseTrades(u,o,r,n));case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.currency(t),a={currency:n.id},e.next=7,this.privateGetDepositAddress(this.extend(a,r));case 7:if(s=e.sent,o=this.safeValue(s,"data"),"REQUESTED"!==this.safeString(o,"status")){e.next=12;break}throw new x(this.id+" is generating "+t+" deposit address, call fetchDepositAddress one more time later to retrieve the generated address");case 12:return c=this.safeString(o,"blockchain_address"),this.checkAddress(c),u=this.safeString(o,"blockchain_tag"),d=this.safeString(o,"currency"),e.abrupt("return",{currency:this.safeCurrencyCode(d),address:c,tag:u,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.version+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if(Object.keys(o).length&&(s+="?"+this.urlencode(o)),"private"===t){this.checkRequiredCredentials();var c=this.milliseconds().toString();"GET"!==r&&(a=this.json(o));var u=r+" "+s,d=this.hmac(this.encode(u),this.encode(this.secret),"sha256");n={Authorization:"Bearer "+this.apiKey,"Content-Type":"application/json",timestamp:c,signature:d}}return{url:s=this.urls.api[t]+"/"+s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.safeString(s,"message");if(void 0!==u){var d=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,u,d),this.throwBroadlyMatchedException(this.exceptions.broad,a,d),new f(d)}}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ArgumentsRequired,v=f.AuthenticationError,m=f.InsufficientFunds,y=f.InvalidOrder,g=f.AccountSuspended,b=f.ExchangeError,k=f.DuplicateOrderId,x=f.OrderNotFound,w=f.BadSymbol,_=f.ExchangeNotAvailable,O=f.BadRequest;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"wavesexchange",name:"Waves.Exchange",countries:["CH"],rateLimit:500,certified:!0,pro:!1,has:{cancelOrder:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchDepositAddress:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","3h":"3h","4h":"4h","6h":"6h","12h":"12h","1d":"1d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/84547058-5fb27d80-ad0b-11ea-8711-78ac8b3c7f31.jpg",api:{matcher:"http://matcher.waves.exchange",node:"https://nodes.waves.exchange",public:"https://api.wavesplatform.com/v0",private:"https://api.waves.exchange/v1",forward:"https://waves.exchange/api/v1/forward/matcher",market:"https://marketdata.wavesplatform.com/api/v1"},doc:"https://docs.waves.exchange",www:"https://waves.exchange"},api:{matcher:{get:["matcher","matcher/settings","matcher/settings/rates","matcher/balance/reserved/{publicKey}","matcher/debug/allSnashotOffsets","matcher/debug/currentOffset","matcher/debug/lastOffset","matcher/debug/oldestSnapshotOffset","matcher/orderbook","matcher/orderbook/{amountAsset}/{priceAsset}","matcher/orderbook/{baseId}/{quoteId}/publicKey/{publicKey}","matcher/orderbook/{baseId}/{quoteId}/{orderId}","matcher/orderbook/{baseId}/{quoteId}/info","matcher/orderbook/{baseId}/{quoteId}/status","matcher/orderbook/{baseId}/{quoteId}/tradeableBalance/{address}","matcher/orderbook/{publicKey}","matcher/orderbook/{publicKey}/{orderId}","matcher/orders/{address}","matcher/orders/{address}/{orderId}","matcher/transactions/{orderId}"],post:["matcher/orderbook","matcher/orderbook/market","matcher/orderbook/cancel","matcher/orderbook/{baseId}/{quoteId}/cancel","matcher/debug/saveSnapshots","matcher/orders/{address}/cancel","matcher/orders/cancel/{orderId}"],delete:["matcher/orderbook/{baseId}/{quoteId}","matcher/settings/rates/{assetId}"],put:["matcher/settings/rates/{assetId}"]},node:{get:["addresses","addresses/balance/{address}","addresses/balance/{address}/{confirmations}","addresses/balance/details/{address}","addresses/data/{address}","addresses/data/{address}/{key}","addresses/effectiveBalance/{address}","addresses/effectiveBalance/{address}/{confirmations}","addresses/publicKey/{publicKey}","addresses/scriptInfo/{address}","addresses/scriptInfo/{address}/meta","addresses/seed/{address}","addresses/seq/{from}/{to}","addresses/validate/{address}","alias/by-address/{address}","alias/by-alias/{alias}","assets/{assetId}/distribution/{height}/{limit}","assets/balance/{address}","assets/balance/{address}/{assetId}","assets/details/{assetId}","assets/nft/{address}/limit/{limit}","blockchain/rewards","blockchain/rewards/height","blocks/address/{address}/{from}/{to}/","blocks/at/{height}","blocks/delay/{signature}/{blockNum}","blocks/first","blocks/headers/last","blocks/headers/seq/{from}/{to}","blocks/height","blocks/height/{signature}","blocks/last","blocks/seq/{from}/{to}","blocks/signature/{signature}","consensus/algo","consensus/basetarget","consensus/basetarget/{blockId}","consensus/{generatingbalance}/address","consensus/generationsignature","consensus/generationsignature/{blockId}","debug/balances/history/{address}","debug/blocks/{howMany}","debug/configInfo","debug/historyInfo","debug/info","debug/minerInfo","debug/portfolios/{address}","debug/state","debug/stateChanges/address/{address}","debug/stateChanges/info/{id}","debug/stateWaves/{height}","leasing/active/{address}","node/state","node/version","peers/all","peers/blacklisted","peers/connected","peers/suspended","transactions/address/{address}/limit/{limit}","transactions/info/{id}","transactions/status","transactions/unconfirmed","transactions/unconfirmed/info/{id}","transactions/unconfirmed/size","utils/seed","utils/seed/{length}","utils/time","wallet/seed"],post:["addresses","addresses/data/{address}","addresses/sign/{address}","addresses/signText/{address}","addresses/verify/{address}","addresses/verifyText/{address}","debug/blacklist","debug/print","debug/rollback","debug/validate","node/stop","peers/clearblacklist","peers/connect","transactions/broadcast","transactions/calculateFee","tranasctions/sign","transactions/sign/{signerAddress}","tranasctions/status","utils/hash/fast","utils/hash/secure","utils/script/compileCode","utils/script/compileWithImports","utils/script/decompile","utils/script/estimate","utils/sign/{privateKey}","utils/transactionsSerialize"],delete:["addresses/{address}","debug/rollback-to/{signature}"]},public:{get:["pairs","candles/{baseId}/{quoteId}","transactions/exchange"]},private:{get:["deposit/addresses/{code}","deposit/currencies","withdraw/currencies","withdraw/addresses/{currency}/{address}"],post:["oauth2/token"]},forward:{get:["matcher/orders/{address}","matcher/orders/{address}/{orderId}"],post:["matcher/orders/{wavesAddress}/cancel"]},market:{get:["tickers"]}},options:{allowedCandles:1440,accessToken:void 0,matcherPublicKey:void 0,quotes:void 0,createOrderDefaultExpiry:24192e5,wavesAddress:void 0,withdrawFeeUSDN:7420,withdrawFeeWAVES:1e5,wavesPrecision:8},requiresEddsa:!0,exceptions:{3147270:m,112:m,4:b,13:_,14:_,3145733:g,3148040:k,3148801:v,9440512:v,9440771:w,9441026:y,9441282:y,9441286:y,9441295:y,9441540:y,9441542:y,106954752:v,106954769:v,106957828:v,106960131:v,106981137:v,9437193:x,1048577:O,1051904:v}})}},{key:"getQuotes",value:function(){var e=a(n.mark((function e(){var t,r,i,a;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.safeValue(this.options,"quotes"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.matcherGetMatcherSettings();case 7:for(r=e.sent,t={},i=this.safeValue(r,"priceAssets"),a=0;a<i.length;a++)t[i[a]]=!0;return this.options.quotes=t,e.abrupt("return",t);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.length>0&&void 0!==y[0]?y[0]:{},e.next=3,this.marketGetTickers();case 3:for(t=e.sent,r=[],a=0;a<t.length;a++)s=t[a],o=this.safeString(s,"amountAssetID"),c=this.safeString(s,"priceAssetID"),u=o+"/"+c,d=this.safeString(s,"symbol"),h=d.split("/"),l=i(h,2),f=l[0],p=l[1],v=this.safeCurrencyCode(f)+"/"+this.safeCurrencyCode(p),m={amount:this.safeInteger(s,"amountAssetDecimals"),price:this.safeInteger(s,"priceAssetDecimals")},r.push({symbol:v,id:u,base:f,quote:p,baseId:o,quoteId:c,info:s,precision:m});return e.abrupt("return",r);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s=this.extend({amountAsset:a.baseId,priceAsset:a.quoteId},i),e.next=8,this.matcherGetMatcherOrderbookAmountAssetPriceAsset(s);case 8:return o=e.sent,c=this.safeInteger(o,"timestamp"),u=this.parseOrderBookSide(this.safeValue(o,"bids"),a,r),d=this.parseOrderBookSide(this.safeValue(o,"asks"),a,r),e.abrupt("return",{bids:u,asks:d,timestamp:c,datetime:this.iso8601(c),nonce:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderBookSide",value:function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=t.precision,n=this.safeInteger(this.options,"wavesPrecision",8),a=Math.pow(10,i.amount),s=i.amount-i.price,o=Math.pow(10,n-s),c=[],u=0;u<e.length;u++){var d=e[u],h=this.safeInteger(d,"price",0)/o,l=this.safeInteger(d,"amount",0)/a;if(void 0!==r&&u>r)break;c.push([h,l])}return c}},{key:"checkRequiredKeys",value:function(){if(void 0===this.apiKey)throw new v(this.id+" requires apiKey credential");if(void 0===this.secret)throw new v(this.id+" requires secret credential");var e=void 0,t=void 0;try{e=this.base58ToBinary(this.apiKey)}catch(n){throw new v(this.id+" apiKey must be a base58 encoded public key")}try{t=this.base58ToBinary(this.secret)}catch(n){throw new v(this.id+" secret must be a base58 encoded private key")}var r=this.binaryToBase16(e),i=this.binaryToBase16(t);if(64!==r.length)throw new v(this.id+" apiKey must be a base58 encoded public key");if(64!==i.length)throw new v(this.id+" secret must be a base58 encoded private key")}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o="matcher/orders/{wavesAddress}/cancel"===e;e=this.implodeParams(e,i);var c=this.urls.api[t]+"/"+e,u=this.urlencode(s);if("private"===t||"forward"===t){n={Accept:"application/json"};var d=this.safeString(this.options,"accessToken");d&&(n.Authorization="Bearer "+d),n["content-type"]="POST"===r?"application/json":"application/x-www-form-urlencoded",o&&(a=this.json([s.orderId]),u=""),u.length>0&&(c+="?"+u)}else"matcher"===t?"POST"===r?(n={"content-type":"application/json"},a=this.json(s)):n=s:"POST"===r?(n={"content-type":"application/json"},a=this.json(s)):(n={"content-type":"application/x-www-form-urlencoded"},u.length>0&&(c+="?"+u));return{url:c,method:r,body:a,headers:n}}},{key:"getAccessToken",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.safeString(this.options,"accessToken")){e.next=17;break}return"ffffff01",604800,t=(t=this.sum(this.seconds(),604800)).toString(),i="W:"+(r="waves.exchange")+":"+t,a=this.binaryToBase16(this.stringToBinary(this.encode(i))),s="ffffff01"+a,o=this.binaryToBase16(this.base58ToBinary(this.secret)),c=this.eddsa(s,o,"ed25519"),u={grant_type:"password",scope:"general",username:this.apiKey,password:t+":"+c,client_id:r},e.next=14,this.privatePostOauth2Token(u);case 14:return d=e.sent,this.options.accessToken=this.safeString(d,"access_token"),e.abrupt("return",this.options.accessToken);case 17:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=void 0,i=this.safeString(e,"amountAsset"),n=this.safeString(e,"priceAsset"),a=void 0;if(void 0!==i&&void 0!==n){var s=i+"/"+n;if(s in this.markets_by_id)t=this.markets_by_id[s];else{var o=this.safeCurrencyCode(i),c=this.safeCurrencyCode(n);a=o+"/"+c}}void 0===a&&void 0!==t&&(a=t.symbol);var u=this.safeValue(e,"data",{}),d=this.safeFloat(u,"lastPrice"),h=this.safeFloat(u,"low"),l=this.safeFloat(u,"high"),f=this.safeFloat(u,"weightedAveragePrice"),p=this.safeFloat(u,"volume"),v=this.safeFloat(u,"quoteVolume"),m=this.safeFloat(u,"firstPrice"),y=void 0,g=void 0,b=void 0;return void 0!==d&&void 0!==m&&(y=d-m,g=this.sum(d,m)/2,m>0&&(b=y/m*100)),{symbol:a,timestamp:r,datetime:this.iso8601(r),high:l,low:h,bid:void 0,bidVolume:void 0,ask:void 0,askVolume:void 0,vwap:f,open:m,close:d,last:d,previousClose:void 0,change:y,percentage:b,average:g,baseVolume:p,quoteVolume:v,info:e}}},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.market(t),a={pairs:i.id},e.next=7,this.publicGetPairs(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"data",[]),c=this.safeValue(o,0,{}),e.abrupt("return",this.parseTicker(c,i));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOHLCV",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x.length>1&&void 0!==x[1]?x[1]:"1m",i=x.length>2&&void 0!==x[2]?x[2]:void 0,a=x.length>3&&void 0!==x[3]?x[3]:void 0,s=x.length>4&&void 0!==x[4]?x[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={baseId:o.baseId,quoteId:o.quoteId,interval:this.timeframes[r]},void 0!==i?c.timeStart=i.toString():(u=this.safeInteger(this.options,"allowedCandles",1440),d=1e3*this.parseTimeframe(r),h=Math.floor(this.milliseconds()/d)*d,l=h-(u-1)*d,c.timeStart=l.toString()),e.next=11,this.publicGetCandlesBaseIdQuoteId(this.extend(c,s));case 11:for(f=e.sent,p=this.safeValue(f,"data",[]),v=this.parseOHLCVs(p,o,r,i,a),m=void 0,y=v.length,g=0;g<v.length;g++)k=v[b=y-g-1],void 0===k[1]&&(k[1]=m,k[2]=m,k[3]=m,k[4]=m,v[b]=k),m=k[4];return e.abrupt("return",v);case 18:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeValue(e,"data",{});return[this.parse8601(this.safeString(t,"time")),this.safeFloat(t,"open"),this.safeFloat(t,"high"),this.safeFloat(t,"low"),this.safeFloat(t,"close"),this.safeFloat(t,"volume",0)]}},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d,h,l,f,p,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:{},e.next=3,this.getAccessToken();case 3:return e.next=5,this.privateGetDepositCurrencies();case 5:for(i=e.sent,a={},s=this.safeValue(i,"items",[]),o=0;o<s.length;o++)c=s[o],u=this.safeString(c,"id"),a[u]=!0;if(t in a){e.next=12;break}throw d=Object.keys(a),new b(this.id+" fetch "+t+" deposit address not supported. Currency code must be one of "+d.toString());case 12:return h=this.extend({code:t},r),e.next=15,this.privateGetDepositAddressesCode(h);case 15:return l=e.sent,f=this.safeValue(l,"deposit_addresses"),p=this.safeString(f,0),e.abrupt("return",{address:p,code:t,tag:void 0,info:l});case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getMatcherPublicKey",value:function(){var e=a(n.mark((function e(){var t,r;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.safeString(this.options,"matcherPublicKey"))){e.next=5;break}return e.abrupt("return",t);case 5:return e.next=7,this.matcherGetMatcher();case 7:return r=e.sent,this.options.matcherPublicKey=r.slice(1,r.length-1),e.abrupt("return",this.options.matcherPublicKey);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssetBytes",value:function(e){return"WAVES"===e?this.numberToBE(0,1):this.binaryConcat(this.numberToBE(1,1),this.base58ToBinary(e))}},{key:"getAssetId",value:function(e){return"WAVES"===e?"":e}},{key:"priceToPrecision",value:function(e,t){var r=this.markets[e],i=this.safeInteger(this.options,"wavesPrecision",8),n=r.precision.amount-r.precision.price;return parseInt(parseFloat(this.toWei(t,i-n)))}},{key:"amountToPrecision",value:function(e,t){return parseInt(parseFloat(this.toWei(t,this.markets[e].precision.amount)))}},{key:"currencyToPrecision",value:function(e,t){return parseInt(parseFloat(this.toWei(t,this.currencies[e].precision)))}},{key:"currencyFromPrecision",value:function(e,t){return this.fromWei(t,this.currencies[e].precision)}},{key:"priceFromPrecision",value:function(e,t){var r=this.markets[e],i=this.safeInteger(this.options,"wavesPrecision",8),n=r.precision.amount-r.precision.price;return this.fromWei(t,i-n)}},{key:"getDefaultExpiry",value:function(){var e=this.safeInteger(this.options,"createOrderDefaultExpiry");return e||(this.options.createOrderDefaultExpiry=24192e5,this.options.createOrderDefaultExpiry)}},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,p,v,y,g,b,k,x,w,_,O,T,S,C,I,M,E,A,F,P,B,R,V,L,D,q,N,G,j,U=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=U.length>4&&void 0!==U[4]?U[4]:void 0,o=U.length>5&&void 0!==U[5]?U[5]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),e.next=6,this.loadMarkets();case 6:return c=this.market(t),e.next=9,this.getMatcherPublicKey();case 9:return u=e.sent,d=this.getAssetId(c.baseId),h=this.getAssetId(c.quoteId),a=this.amountToPrecision(t,a),s=this.priceToPrecision(t,s),l="buy"===i?0:1,f=this.milliseconds(),p=this.sum(f,this.getDefaultExpiry()),e.next=19,this.matcherGetMatcherSettings();case 19:if(v=e.sent,y=this.safeValue(v,"orderFee"),g=this.safeValue(y,"dynamic"),b=this.safeInteger(g,"baseFee"),k=this.currencyFromPrecision("WAVES",b),x=this.safeValue(g,"rates"),w=Object.keys(x),_=void 0,O=void 0,!("feeAssetId"in o)){e.next=32;break}_=o.feeAssetId,e.next=56;break;case 32:if(!("feeAssetId"in this.options)){e.next=36;break}_=this.options.feeAssetId,e.next=56;break;case 36:return e.next=38,this.fetchBalance();case 38:if(!((T=e.sent).WAVES.free>k)){e.next=44;break}_="WAVES",O=b,e.next=56;break;case 44:S=0;case 45:if(!(S<w.length)){e.next=56;break}if(C=w[S],I=this.safeCurrencyCode(C),M=this.safeValue(this.safeValue(T,I,{}),"free"),E=x[C]*k,!(void 0!==M&&M>E)){e.next=53;break}return _=C,e.abrupt("break",56);case 53:S++,e.next=45;break;case 56:if(void 0!==_){e.next=58;break}throw m(this.id+" not enough funds to cover the fee, specify feeAssetId in params or options, or buy some WAVES");case 58:return void 0===O&&(A=this.safeInteger(this.options,"wavesPrecision",8),F=this.safeFloat(x,_),P=this.safeCurrencyCode(_),B=this.currency(P),R=Math.pow(10,A-B.precision),O=Math.ceil(F*b/R)),V=[this.numberToBE(3,1),this.base58ToBinary(this.apiKey),this.base58ToBinary(u),this.getAssetBytes(c.baseId),this.getAssetBytes(c.quoteId),this.numberToBE(l,1),this.numberToBE(s,8),this.numberToBE(a,8),this.numberToBE(f,8),this.numberToBE(p,8),this.numberToBE(O,8),this.getAssetBytes(_)],L=this.binaryConcatArray(V),D=this.eddsa(this.binaryToBase16(L),this.binaryToBase16(this.base58ToBinary(this.secret)),"ed25519"),q={amountAsset:d,priceAsset:h},N={senderPublicKey:this.apiKey,matcherPublicKey:u,assetPair:q,orderType:i,price:s,amount:a,timestamp:f,expiration:p,matcherFee:O,signature:D,version:3},"WAVES"!==_&&(N.matcherFeeAssetId=_),e.next=67,this.matcherPostMatcherOrderbook(N);case 67:return G=e.sent,j=this.safeValue(G,"message"),e.abrupt("return",this.parseOrder(j,c));case 70:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,d.length>2&&void 0!==d[2]?d[2]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),e.next=6,this.getAccessToken();case 6:return e.next=8,this.getWavesAddress();case 8:return i=e.sent,e.next=11,this.forwardPostMatcherOrdersWavesAddressCancel({wavesAddress:i,orderId:t});case 11:return a=e.sent,s=this.safeValue(a,"message"),o=this.safeValue(s,0),c=this.safeValue(o,0),u=this.safeString(c,"orderId"),e.abrupt("return",{info:a,id:u,clientOrderId:void 0,timestamp:void 0,datetime:void 0,lastTradeTimestamp:void 0,symbol:r,type:void 0,side:void 0,price:void 0,amount:void 0,cost:void 0,average:void 0,filled:void 0,remaining:void 0,status:void 0,fee:void 0,trades:void 0});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,v=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:void 0,r=v.length>1&&void 0!==v[1]?v[1]:void 0,i=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),void 0!==t){e.next=8;break}throw new p(this.id+" fetchOrders() requires symbol argument");case 8:return e.next=10,this.loadMarkets();case 10:return s=this.market(t),o=this.milliseconds(),c=[this.base58ToBinary(this.apiKey),this.numberToBE(o,8)],u=this.binaryConcatArray(c),d=this.binaryToBase16(this.base58ToBinary(this.secret)),h=this.eddsa(this.binaryToBase16(u),d,"ed25519"),l={Accept:"application/json",Timestamp:o.toString(),Signature:h,publicKey:this.apiKey,baseId:s.baseId,quoteId:s.quoteId},e.next=19,this.matcherGetMatcherOrderbookBaseIdQuoteIdPublicKeyPublicKey(this.extend(l,a));case 19:return f=e.sent,e.abrupt("return",this.parseOrders(f,s,r,i));case 21:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.getAccessToken();case 8:return a=void 0,void 0!==t&&(a=this.market(t)),e.next=12,this.getWavesAddress();case 12:return s=e.sent,o={address:s,activeOnly:!0},e.next=16,this.forwardGetMatcherOrdersAddress(o);case 16:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,i));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.getAccessToken();case 8:return a=void 0,void 0!==t&&(a=this.market(t)),e.next=12,this.getWavesAddress();case 12:return s=e.sent,o={address:s,closedOnly:!0},e.next=16,this.forwardGetMatcherOrdersAddress(o);case 16:return c=e.sent,e.abrupt("return",this.parseOrders(c,a,r,i));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({Cancelled:"canceled",Accepted:"open",Filled:"closed",PartiallyFilled:"open"},e,e)}},{key:"getSymbolFromAssetPair",value:function(e){var t=this.safeString(e,"amountAsset","WAVES"),r=this.safeString(e,"priceAsset","WAVES");return this.safeCurrencyCode(t)+"/"+this.safeCurrencyCode(r)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeInteger(e,"timestamp"),i=this.safeString2(e,"type","orderType"),n="limit";"type"in e&&(n=this.safeString(e,"orderType",n));var a=this.safeString(e,"id"),s=this.safeString(e,"filled"),o=this.safeString(e,"price"),c=this.safeString(e,"amount"),u=this.safeValue(e,"assetPair"),d=void 0;void 0!==u?d=this.getSymbolFromAssetPair(u):void 0!==t&&(d=t.symbol);var h=this.safeCurrencyCode(this.safeString(u,"amountAsset","WAVES"));o=this.priceFromPrecision(d,o),c=this.currencyFromPrecision(h,c);var l=void 0;void 0!==o&&void 0!==c&&(l=o*c);var f=void 0;void 0!==(s=this.currencyFromPrecision(h,s))&&void 0!==c&&(f=c-s);var p=this.priceFromPrecision(d,this.safeString(e,"avgWeighedPrice")),v=this.parseOrderStatus(this.safeString(e,"status")),m=void 0;if("type"in e){var y=this.safeCurrencyCode(this.safeString(e,"feeAsset"));m={currency:y,fee:this.currencyFromPrecision(y,this.safeInteger(e,"filledFee"))}}else{var g=this.safeCurrencyCode(this.safeString(e,"matcherFeeAssetId","WAVES"));m={currency:g,fee:this.currencyFromPrecision(g,this.safeInteger(e,"matcherFee"))}}return{info:e,id:a,clientOrderId:void 0,timestamp:r,datetime:this.iso8601(r),lastTradeTimestamp:void 0,symbol:d,type:n,timeInForce:void 0,postOnly:void 0,side:i,price:o,stopPrice:void 0,amount:c,cost:l,average:p,filled:s,remaining:f,status:v,fee:m,trades:void 0}}},{key:"getWavesAddress",value:function(){var e=a(n.mark((function e(){var t,r,i;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==(t=this.safeString(this.options,"wavesAddress"))){e.next=10;break}return r={publicKey:this.apiKey},e.next=5,this.nodeGetAddressesPublicKeyPublicKey(r);case 5:return i=e.sent,this.options.wavesAddress=this.safeString(i,"address"),e.abrupt("return",this.options.wavesAddress);case 10:return e.abrupt("return",t);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S,C,I,M,E,A=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A.length>0&&void 0!==A[0]?A[0]:{},this.checkRequiredDependencies(),this.checkRequiredKeys(),e.next=5,this.loadMarkets();case 5:return e.next=7,this.getWavesAddress();case 7:return t=e.sent,r={address:t},e.next=11,this.nodeGetAssetsBalanceAddress(r);case 11:for(i=e.sent,a=this.safeValue(i,"balances"),s={},o=0;o<a.length;o++)c=a[o],u=this.safeValue(c,"issueTransaction"),d=this.safeInteger(u,"decimals"),h=this.safeString(c,"assetId"),l=this.safeFloat(c,"balance"),f=void 0,h in this.currencies_by_id&&(f=this.safeCurrencyCode(h),s[f]=this.account(),s[f].total=this.fromWei(l,d));return p=this.milliseconds(),v=[this.base58ToBinary(this.apiKey),this.numberToBE(p,8)],m=this.binaryConcatArray(v),y=this.binaryToBase16(this.base58ToBinary(this.secret)),g=this.eddsa(this.binaryToBase16(m),y,"ed25519"),b={publicKey:this.apiKey,signature:g,timestamp:p.toString()},e.next=23,this.matcherGetMatcherBalanceReservedPublicKey(b);case 23:for(k=e.sent,x=Object.keys(k),w=0;w<x.length;w++)_=x[w],(O=this.safeCurrencyCode(_))in s||(s[O]=this.account()),T=this.safeFloat(k,_),s[O].used=this.currencyFromPrecision(O,T);return S={address:t},e.next=29,this.nodeGetAddressesBalanceAddress(S);case 29:for(C=e.sent,s.WAVES=this.safeValue(s,"WAVES",{}),s.WAVES.total=this.currencyFromPrecision("WAVES",this.safeFloat(C,"balance")),I=Object.keys(s),M=0;M<I.length;M++)E=I[M],void 0===this.safeValue(s[E],"used")&&(s[E].used=0);return e.abrupt("return",this.parseBalance(s));case 35:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,i=d.length>2&&void 0!==d[2]?d[2]:void 0,d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return a=this.market(t),e.next=9,this.getWavesAddress();case 9:return s=e.sent,o={sender:s,amountAsset:a.baseId,priceAsset:a.quoteId},e.next=13,this.publicGetTransactionsExchange(o);case 13:return c=e.sent,u=this.safeValue(c,"data"),e.abrupt("return",this.parseTrades(u,a,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return a=this.market(t),s={amountAsset:a.baseId,priceAsset:a.quoteId},void 0!==i&&(s.limit=i),void 0!==r&&(s.timeStart=r),e.next=11,this.publicGetTransactionsExchange(s);case 11:return o=e.sent,c=this.safeValue(o,"data"),e.abrupt("return",this.parseTrades(c,a,r,i));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"data"),i=this.safeString(r,"timestamp"),n=this.parse8601(i),a=this.safeString(r,"id"),s=this.safeFloat(r,"price"),o=this.safeFloat(r,"amount"),c=this.safeValue(r,"order1"),u=this.safeValue(r,"order2"),d=void 0;d=this.safeString(c,"senderPublicKey")===this.apiKey?c:u;var h=void 0,l=this.safeValue(d,"assetPair");void 0!==l?h=this.getSymbolFromAssetPair(l):void 0!==t&&(h=t.symbol);var f=this.safeString(d,"orderType"),p=this.safeString(d,"id"),v=void 0;void 0!==s&&void 0!==o&&(v=s*o);var m={cost:this.safeFloat(r,"fee"),currency:this.safeCurrencyCode(this.safeString(d,"matcherFeeAssetId","WAVES"))};return{info:e,timestamp:n,datetime:i,symbol:h,id:a,order:p,type:void 0,side:f,takerOrMaker:void 0,price:s,amount:o,cost:v,fee:m}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){var u=this.safeString(s,"error"),d=this.safeValue(s,"success",!0),h=this.safeValue(this.exceptions,u);if(void 0!==h){var l=this.safeString(s,"message");throw new h(this.id+" "+l)}if("Validation Error"===this.safeString(s,"message"))throw new O(this.id+" "+a);if(!d)throw new b(this.id+" "+a)}},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d,h,l,f,p,v,m,y,g,k,x,w,_,T,S,C,I,M,E,A,F,P,B,R,V,L,D,q,N,G=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G.length>3&&void 0!==G[3]?G[3]:void 0,G.length>4&&void 0!==G[4]?G[4]:{},"WAVES"===t){e.next=12;break}return e.next=5,this.privateGetWithdrawCurrencies();case 5:for(a=e.sent,s={},o=this.safeValue(a,"items",[]),c=0;c<o.length;c++)u=o[c],d=this.safeString(u,"id"),s[d]=!0;if(t in s){e.next=12;break}throw h=Object.keys(s),new b(this.id+" fetch "+t+" withdrawals are not supported. Currency code must be one of "+h.toString());case 12:return e.next=14,this.loadMarkets();case 14:for(l=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],f={},p=0;p<l.length;p++)v=l[p],f[v]=!0;m=!0,y=this.remove0xPrefix(i),g=y.toLowerCase(),k=0;case 21:if(!(k<g.length)){e.next=29;break}if(g[k]in f){e.next=26;break}return m=!1,e.abrupt("break",29);case 26:k++,e.next=21;break;case 29:return e.next=31,this.getAccessToken();case 31:if(x=void 0,"WAVES"!==t||m){e.next=36;break}x=i,e.next=47;break;case 36:return w={address:i,currency:t},e.next=39,this.privateGetWithdrawAddressesCurrencyAddress(w);case 39:if(_=e.sent,T=this.safeValue(_,"currency"),S=this.safeValue(T,"allowed_amount"),C=this.safeFloat(S,"min"),!(r<=C)){e.next=45;break}throw new O(this.id+" "+t+" withdraw failed, amount "+r.toString()+" must be greater than the minimum allowed amount of "+C.toString());case 45:I=this.safeValue(_,"proxy_addresses",[]),x=this.safeString(I,0);case 47:return M=this.safeInteger(this.options,"withdrawFeeWAVES",1e5),E="WAVES",A=4,F=2,P=this.currencyToPrecision(t,r),B=this.currency(t),R=this.milliseconds(),V=[this.numberToBE(4,1),this.numberToBE(2,1),this.base58ToBinary(this.apiKey),this.getAssetBytes(B.id),this.getAssetBytes(E),this.numberToBE(R,8),this.numberToBE(P,8),this.numberToBE(M,8),this.base58ToBinary(x),this.numberToBE(0,2)],L=this.binaryConcatArray(V),D=this.binaryToBase16(this.base58ToBinary(this.secret)),q=this.eddsa(this.binaryToBase16(L),D,"ed25519"),N={senderPublicKey:this.apiKey,amount:P,fee:M,type:A,version:F,attachment:"",feeAssetId:this.getAssetId(E),proofs:[q],assetId:this.getAssetId(B.id),recipient:x,timestamp:R,signature:q},e.next=61,this.nodePostTransactionsBroadcast(N);case 61:return e.abrupt("return",e.sent);case 62:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeNotAvailable,p=l.ExchangeError,v=l.DDoSProtection,m=l.BadSymbol;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"whitebit",name:"WhiteBit",version:"v2",countries:["EE"],rateLimit:500,has:{cancelOrder:!1,CORS:!1,createDepositAddress:!1,createLimitOrder:!1,createMarketOrder:!1,createOrder:!1,deposit:!1,editOrder:!1,fetchBalance:!1,fetchBidsAsks:!1,fetchCurrencies:!0,fetchMarkets:!0,fetchOHLCV:!0,fetchOrderBook:!0,fetchStatus:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTradingFees:!0,privateAPI:!1,publicAPI:!0},timeframes:{"1m":"1m","3m":"3m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","2h":"2h","4h":"4h","6h":"6h","8h":"8h","12h":"12h","1d":"1d","3d":"3d","1w":"1w","1M":"1M"},urls:{logo:"https://user-images.githubusercontent.com/1294454/66732963-8eb7dd00-ee66-11e9-849b-10d9282bb9e0.jpg",api:{web:"https://whitebit.com/",publicV2:"https://whitebit.com/api/v2/public",publicV1:"https://whitebit.com/api/v1/public"},www:"https://www.whitebit.com",doc:"https://documenter.getpostman.com/view/7473075/Szzj8dgv?version=latest",fees:"https://whitebit.com/fee-schedule",referral:"https://whitebit.com/referral/d9bdf40e-28f2-4b52-b2f9-cd1415d82963"},api:{web:{get:["v1/healthcheck"]},publicV1:{get:["markets","tickers","ticker","symbols","depth/result","history","kline"]},publicV2:{get:["markets","ticker","assets","fee","depth/{market}","trades/{market}"]}},fees:{trading:{tierBased:!1,percentage:!0,taker:.001,maker:.001}},options:{fetchTradesMethod:"fetchTradesV1"},exceptions:{exact:{503:f},broad:{"Market is not available":m}}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},e.next=3,this.publicV2GetMarkets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result"),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"name"),u=this.safeString(o,"stock"),d=this.safeString(o,"money"),h=this.safeCurrencyCode(u),l=this.safeCurrencyCode(d),f=h+"/"+l,p=this.safeValue(o,"tradesEnabled"),v={id:c,symbol:f,base:h,quote:l,baseId:u,quoteId:d,info:o,active:p,precision:{amount:this.safeInteger(o,"stockPrec"),price:this.safeInteger(o,"moneyPrec")},limits:{amount:{min:this.safeFloat(o,"minAmount"),max:void 0},price:{min:void 0,max:void 0},cost:{min:this.safeFloat(o,"minTotal"),max:void 0}}},a.push(v);return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},e.next=3,this.publicV2GetAssets(t);case 3:for(r=e.sent,n=this.safeValue(r,"result"),a=Object.keys(n),s={},o=0;o<a.length;o++)c=a[o],u=n[c],d=this.safeValue(u,"canDeposit",!0),h=this.safeValue(u,"canWithdraw",!0),l=d&&h,f=this.safeCurrencyCode(c),s[f]={id:c,code:f,info:u,name:void 0,active:l,fee:void 0,precision:void 0,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(u,"minWithdrawal"),max:this.safeFloat(u,"maxWithdrawal")}}};return e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTradingFees",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicV2GetFee(t);case 3:return r=e.sent,n=this.safeValue(r,"result"),e.abrupt("return",{maker:this.safeFloat(n,"makerFee"),taker:this.safeFloat(n,"takerFee")});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={market:n.id},e.next=7,this.publicV1GetTicker(this.extend(a,r));case 7:return s=e.sent,o=this.safeValue(s,"result",{}),e.abrupt("return",this.parseTicker(o,n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"at",this.milliseconds());e=this.safeValue(e,"ticker",e);var i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last"),a=this.safeFloat(e,"change"),s=void 0;return void 0!==a&&(s=this.numberToString(.01*a)),{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:this.safeFloat(e,"open"),close:n,last:n,previousClose:void 0,change:s,percentage:a,average:void 0,baseVolume:this.safeFloat(e,"volume"),quoteVolume:this.safeFloat(e,"deal"),info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicV1GetTickers(r);case 6:for(n=e.sent,a=this.safeValue(n,"result"),s=Object.keys(a),o={},c=0;c<s.length;c++)u=s[c],d=this.safeMarket(u),h=this.parseTicker(a[u],d),l=h.symbol,o[l]=h;return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={market:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicV2GetDepthMarket(this.extend(s,n));case 9:return o=e.sent,c=this.safeValue(o,"result",{}),u=this.parse8601(this.safeString(c,"lastUpdateTimestamp")),e.abrupt("return",this.parseOrderBook(c,u));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradesV1",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id,lastId:1},void 0!==n&&(o.limit=n),e.next=10,this.publicV1GetHistory(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTradesV2",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={market:s.id},void 0!==n&&(o.limit=n),e.next=10,this.publicV2GetTradesMarket(this.extend(o,a));case 10:return c=e.sent,u=this.safeValue(c,"result",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:void 0,n=o.length>2&&void 0!==o[2]?o[2]:void 0,a=o.length>3&&void 0!==o[3]?o[3]:{},s=this.safeString(this.options,"fetchTradesMethod","fetchTradesV2"),e.next=6,this[s](t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeValue(e,"time");r="string"===typeof r?this.parse8601(r):parseInt(1e3*r);var i=this.safeFloat(e,"price"),n=this.safeFloat2(e,"amount","volume"),a=this.safeString2(e,"id","tradeId"),s=this.safeString(e,"type");if(void 0===s){var o=this.safeValue(e,"isBuyerMaker");s=o?"buy":"sell"}var c=void 0;void 0!==t&&(c=t.symbol);var u=void 0;return void 0!==n&&void 0!==i&&(u=n*i),{info:e,timestamp:r,datetime:this.iso8601(r),symbol:c,id:a,order:void 0,type:void 0,takerOrMaker:void 0,side:s,price:i,amount:n,cost:u,fee:void 0}}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=v.length>1&&void 0!==v[1]?v[1]:"1m",n=v.length>2&&void 0!==v[2]?v[2]:void 0,a=v.length>3&&void 0!==v[3]?v[3]:void 0,s=v.length>4&&void 0!==v[4]?v[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={market:o.id,interval:this.timeframes[r]},void 0!==n&&(u=1440,void 0===a&&(a=u),a=Math.min(a,u),d=parseInt(n/1e3),h=this.parseTimeframe(r),l=this.sum(d,h*a),c.start=d,c.end=l),void 0!==a&&(c.limit=a),e.next=12,this.publicV1GetKline(this.extend(c,s));case 12:return f=e.sent,p=this.safeValue(f,"result",[]),e.abrupt("return",this.parseOHLCVs(p,o,r,n,a));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeTimestamp(e,0),this.safeFloat(e,1),this.safeFloat(e,3),this.safeFloat(e,4),this.safeFloat(e,2),this.safeFloat(e,5)]}},{key:"fetchStatus",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:{},e.next=3,this.webGetV1Healthcheck(t);case 3:return r=e.sent,n=this.safeInteger(r,"status"),a="ok",503===n&&(a="maintenance"),this.status=this.extend(this.status,{status:a,updated:this.milliseconds()}),e.abrupt("return",this.status);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"publicV1",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.omit(i,this.extractParams(e)),o=this.urls.api[t]+"/"+this.implodeParams(e,i);return Object.keys(s).length&&(o+="?"+this.urlencode(s)),{url:o,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(418===e||429===e)throw new v(this.id+" "+e.toString()+" "+t+" "+a);if(404===e)throw new p(this.id+" "+e.toString()+" endpoint not found");if(void 0!==s&&!this.safeValue(s,"success")){var u=this.id+" "+a,d=this.safeString(s,"status");throw"string"===typeof d&&this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,a,u),new p(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.NotSupported,v=l.AuthenticationError;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"xbtce",name:"xBTCe",countries:["RU"],rateLimit:2e3,version:"v1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchMarkets:!0,fetchOHLCV:!1,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0},urls:{referral:"https://xbtce.com/?agent=XX97BTCXXXG687021000B",logo:"https://user-images.githubusercontent.com/1294454/28059414-e235970c-662c-11e7-8c3a-08e31f78684b.jpg",api:"https://cryptottlivewebapi.xbtce.net:8443/api",www:"https://www.xbtce.com",doc:["https://www.xbtce.com/tradeapi","https://support.xbtce.info/Knowledgebase/Article/View/52/25/xbtce-exchange-api"]},requiredCredentials:{apiKey:!0,secret:!0,uid:!0},api:{public:{get:["currency","currency/{filter}","level2","level2/{filter}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/level2","quotehistory/{symbol}/ticks","symbol","symbol/{filter}","tick","tick/{filter}","ticker","ticker/{filter}","tradesession"]},private:{get:["tradeserverinfo","tradesession","currency","currency/{filter}","level2","level2/{filter}","symbol","symbol/{filter}","tick","tick/{filter}","account","asset","asset/{id}","position","position/{id}","trade","trade/{id}","quotehistory/{symbol}/{periodicity}/bars/ask","quotehistory/{symbol}/{periodicity}/bars/ask/info","quotehistory/{symbol}/{periodicity}/bars/bid","quotehistory/{symbol}/{periodicity}/bars/bid/info","quotehistory/{symbol}/level2","quotehistory/{symbol}/level2/info","quotehistory/{symbol}/periodicities","quotehistory/{symbol}/ticks","quotehistory/{symbol}/ticks/info","quotehistory/cache/{symbol}/{periodicity}/bars/ask","quotehistory/cache/{symbol}/{periodicity}/bars/bid","quotehistory/cache/{symbol}/level2","quotehistory/cache/{symbol}/ticks","quotehistory/symbols","quotehistory/version"],post:["trade","tradehistory"],put:["trade"],delete:["trade"]}},commonCurrencies:{DSH:"DASH"}})}},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.privateGetSymbol(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"Symbol"),c=this.safeString(s,"MarginCurrency"),u=this.safeString(s,"ProfitCurrency"),d=this.safeCurrencyCode(c),h=this.safeCurrencyCode(u),l=d+"/"+h,l=s.IsTradeAllowed?l:o,n.push({id:o,symbol:l,base:d,quote:h,baseId:c,quoteId:u,info:s,active:void 0,precision:this.precision,limits:this.limits});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privateGetAsset(t);case 5:for(r=e.sent,n={info:r},a=0;a<r.length;a++)s=r[a],o=this.safeString(s,"Currency"),c=this.safeCurrencyCode(o),u={free:this.safeFloat(s,"FreeAmount"),used:this.safeFloat(s,"LockedAmount"),total:this.safeFloat(s,"Amount")},n[c]=u;return e.abrupt("return",this.parseBalance(n));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u.length>1&&void 0!==u[1]?u[1]:void 0,r=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return n=this.market(t),a={filter:n.id},e.next=8,this.privateGetLevel2Filter(this.extend(a,r));case 8:return s=e.sent,o=s[0],c=this.safeInteger(o,"Timestamp"),e.abrupt("return",this.parseOrderBook(o,c,"Bids","Asks","Price","Volume"));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=0,i=void 0;"LastBuyTimestamp"in e&&r<e.LastBuyTimestamp&&(r=e.LastBuyTimestamp,i=e.LastBuyPrice),"LastSellTimestamp"in e&&r<e.LastSellTimestamp&&(r=e.LastSellTimestamp,i=e.LastSellPrice),r||(r=this.milliseconds());var n=void 0;return t&&(n=t.symbol),{symbol:n,timestamp:r,datetime:this.iso8601(r),high:e.DailyBestBuyPrice,low:e.DailyBestSellPrice,bid:e.BestBid,bidVolume:void 0,ask:e.BestAsk,askVolume:void 0,vwap:void 0,open:void 0,close:i,last:i,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:e.DailyTradedTotalVolume,quoteVolume:void 0,info:e}}},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetTicker(r);case 6:for(n=e.sent,a=this.indexBy(n,"Symbol"),s=Object.keys(a),o={},c=0;c<s.length;c++)u=s[c],d=void 0,h=void 0,u in this.markets_by_id?(d=this.markets_by_id[u],h=d.symbol):(l=u.slice(0,3),f=u.slice(3,6),p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),h=p+"/"+v),m=a[u],o[h]=this.parseTicker(m,d);return e.abrupt("return",this.filterByArray(o,"symbol",t));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=3,this.loadMarkets();case 3:return n=this.market(t),a={filter:n.id},e.next=7,this.publicGetTickerFilter(this.extend(a,r));case 7:if(s=e.sent,!(s.length<1)){e.next=11;break}throw new f(this.id+" fetchTicker returned empty response, xBTCe public API error");case 11:return o=this.indexBy(s,"Symbol"),c=o[n.id],e.abrupt("return",this.parseTicker(c,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.length>1&&void 0!==n[1]?n[1]:void 0,n.length>2&&void 0!==n[2]?n[2]:void 0,r=n.length>3&&void 0!==n[3]?n[3]:{},e.next=5,this.loadMarkets();case 5:return e.next=7,this.privateGetTrade(r);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){return[this.safeInteger(e,"Timestamp"),this.safeFloat(e,"Open"),this.safeFloat(e,"High"),this.safeFloat(e,"Low"),this.safeFloat(e,"Close"),this.safeFloat(e,"Volume")]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r.length>1&&void 0!==r[1]?r[1]:"1m",r.length>2&&void 0!==r[2]?r[2]:void 0,r.length>3&&void 0!==r[3]?r[3]:void 0,r.length>4&&void 0!==r[4]?r[4]:{},new p(this.id+" fetchOHLCV is disabled by the exchange");case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if("market"!==r){e.next=6;break}throw new f(this.id+" allows limit orders only");case 6:return c={pair:this.marketId(t),type:n,amount:a,rate:s},e.next=9,this.privatePostTrade(this.extend(c,o));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.Id.toString()});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={Type:"Cancel",Id:t},e.next=5,this.privateDeleteTrade(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(!this.apiKey)throw new v(this.id+" requires apiKey for all requests, their public API is always busy");if(!this.uid)throw new v(this.id+" requires uid property for authentication and trading, their public API is always busy");var s=this.urls.api+"/"+this.version;"public"===t&&(s+="/"+t),s+="/"+this.implodeParams(e,i);var o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else{this.checkRequiredCredentials(),n={"Accept-Encoding":"gzip, deflate"};var c=this.nonce().toString();"POST"===r&&(Object.keys(o).length?(n["Content-Type"]="application/json",a=this.json(o)):s+="?"+this.urlencode(o));var u=c+this.uid+this.apiKey+r+s;a&&(u+=a);var d=this.hmac(this.encode(u),this.encode(this.secret),"sha256","base64"),h=this.uid+":"+this.apiKey+":"+c+":"+d;n.Authorization="HMAC "+h}return{url:s,method:r,body:a,headers:n}}}]),r}(h)},function(e,t,r){"use strict";var i=r(8),n=r(9),a=r(2),s=r(4),o=r(7),c=r(3),u=r(5),d=r(6),h=r(11),l=r(10),f=l.ExchangeError,p=l.ArgumentsRequired,v=l.BadRequest,m=l.InsufficientFunds,y=l.InvalidAddress,g=l.BadSymbol,b=l.InvalidOrder;e.exports=function(e){u(r,e);var t=d(r);function r(){return a(this,r),t.apply(this,arguments)}return s(r,[{key:"describe",value:function(){return this.deepExtend(o(c(r.prototype),"describe",this).call(this),{id:"xena",name:"Xena Exchange",countries:["VC","UK"],rateLimit:100,certified:!0,has:{CORS:!1,cancelAllOrders:!0,cancelOrder:!0,createDepositAddress:!0,createOrder:!0,editOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchCurrencies:!0,fetchDepositAddress:!0,fetchDeposits:!0,fetchLedger:!0,fetchMarkets:!0,fetchMyTrades:!0,fetchOHLCV:!0,fetchOpenOrders:!0,fetchOrderBook:!0,fetchTicker:!0,fetchTickers:!0,fetchTime:!0,fetchTrades:!0,fetchWithdrawals:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/51840849/87489843-bb469280-c64c-11ea-91aa-69c6326506af.jpg",test:{public:"https://trading.demo.xena.io/api",private:"https://api.demo.xena.io"},api:{public:"https://trading.xena.exchange/api",private:"https://api.xena.exchange"},www:"https://xena.exchange",doc:"https://support.xena.exchange/support/solutions/44000808700",fees:"https://trading.xena.exchange/en/platform-specification/fee-schedule"},timeframes:{"1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","12h":"12h","1d":"1d","1w":"1w"},api:{public:{get:["common/currencies","common/instruments","common/features","common/commissions","common/news","market-data/candles/{marketId}/{timeframe}","market-data/market-watch","market-data/dom/{symbol}","market-data/candles/{symbol}/{timeframe}","market-data/trades/{symbol}","market-data/server-time","market-data/v2/candles/{symbol}/{timeframe}","market-data/v2/trades/{symbol}","market-data/v2/dom/{symbol}/","market-data/v2/server-time"]},private:{get:["trading/accounts/{accountId}/order","trading/accounts/{accountId}/active-orders","trading/accounts/{accountId}/last-order-statuses","trading/accounts/{accountId}/positions","trading/accounts/{accountId}/positions-history","trading/accounts/{accountId}/margin-requirements","trading/accounts","trading/accounts/{accountId}/balance","trading/accounts/{accountId}/trade-history","transfers/accounts","transfers/accounts/{accountId}","transfers/accounts/{accountId}/deposit-address/{currency}","transfers/accounts/{accountId}/deposits","transfers/accounts/{accountId}/trusted-addresses","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/balance-history"],post:["trading/order/new","trading/order/heartbeat","trading/order/cancel","trading/order/mass-cancel","trading/order/replace","trading/position/maintenance","transfers/accounts/{accountId}/withdrawals","transfers/accounts/{accountId}/deposit-address/{currency}"]}},fees:{trading:{maker:5e-4,taker:.001,tierBased:!0,percentage:!0},funding:{tierBased:!1,percentage:!1,withdraw:{},deposit:{}}},exceptions:{exact:{"Validation failed":v,"Unknown derivative symbol":g,"Unknown account":v,"Wrong TransactTime":v,"ClOrdId is empty":v},broad:{"Invalid aggregation ratio or depth":v,address:y,"Money not enough":m,"parse error":v,"Not enough":m}},options:{defaultType:"margin",accountId:void 0}})}},{key:"fetchTime",value:function(){var e=n(i.mark((function e(){var t,r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},e.next=3,this.publicGetMarketDataV2ServerTime(t);case 3:return r=e.sent,n=this.safeInteger(r,"transactTime"),e.abrupt("return",parseInt(n/1e6));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=T.length>0&&void 0!==T[0]?T[0]:{},e.next=3,this.publicGetCommonInstruments(t);case 3:for(r=e.sent,n=[],a=0;a<r.length;a++)s=r[a],o=this.safeStringLower(s,"type"),c=this.safeString(s,"symbol"),u=this.safeString(s,"id"),d=this.safeString(s,"marginType"),h=this.safeString(s,"baseCurrency"),l=this.safeString(s,"quoteCurrency"),f=this.safeCurrencyCode(h),p=this.safeCurrencyCode(l),v=c,"margin"===o&&("XenaFuture"===d?o="future":"XenaListedPerpetual"===d&&(o="swap",v=f+"/"+p)),m="future"===o,y="swap"===o,g=this.safeInteger2(s,"tickSize","pricePrecision"),b={price:g,amount:0},k=this.safeFloat(s,"maxOrderQty"),x=this.safeFloat(s,"minOrderQuantity"),w={amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:x,max:k}},_=this.safeValue(s,"enabled",!1),O=this.safeValue(s,"inverse",!1),n.push({id:c,symbol:v,base:f,quote:p,baseId:h,quoteId:l,numericId:u,active:_,type:o,spot:!1,future:m,swap:y,inverse:O,precision:b,limits:w,info:s});return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchCurrencies",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f,p,v=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=v.length>0&&void 0!==v[0]?v[0]:{},e.next=3,this.publicGetCommonCurrencies(t);case 3:for(r=e.sent,n=Object.keys(r),a={},s=0;s<n.length;s++)o=n[s],c=r[o],u=this.safeCurrencyCode(o),d=this.safeString(c,"title"),h=this.safeInteger(c,"precision"),l=this.safeValue(c,"enabled"),f=!0===l,p=this.safeValue(c,"withdraw",{}),a[u]={id:o,code:u,info:c,name:d,active:f,fee:this.safeFloat(p,"commission"),precision:h,limits:{amount:{min:void 0,max:void 0},price:{min:void 0,max:void 0},cost:{min:void 0,max:void 0},withdraw:{min:this.safeFloat(p,"minAmount"),max:void 0}}};return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.milliseconds(),i=this.safeString(e,"symbol"),n=this.safeSymbol(i,t),a=this.safeFloat(e,"lastPx"),s=this.safeFloat(e,"firstPx"),o=void 0,c=void 0,u=void 0;void 0!==a&&void 0!==s&&(c=a-s,u=this.sum(a,s)/2,s>0&&(o=c/s*100));var d=this.safeFloat(e,"buyVolume"),h=this.safeFloat(e,"sellVolume"),l=this.sum(d,h);return{symbol:n,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"highPx"),low:this.safeFloat(e,"lowPx"),bid:this.safeFloat(e,"bid"),bidVolume:void 0,ask:this.safeFloat(e,"ask"),askVolume:void 0,vwap:void 0,open:s,close:a,last:a,previousClose:void 0,change:c,percentage:o,average:u,baseVolume:l,quoteVolume:void 0,info:e}}},{key:"fetchTicker",value:function(){var e=n(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.fetchTickers(void 0,r);case 5:if(n=e.sent,!(t in n)){e.next=8;break}return e.abrupt("return",n[t]);case 8:throw new g(this.id+" fetchTicker could not find a ticker with symbol "+t);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTickers",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.publicGetMarketDataMarketWatch(r);case 6:for(n=e.sent,a={},s=0;s<n.length;s++)o=this.parseTicker(n[s]),c=o.symbol,a[c]=o;return e.abrupt("return",this.filterByArray(a,"symbol",t));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:void 0,n=h.length>2&&void 0!==h[2]?h[2]:{},e.next=4,this.loadMarkets();case 4:return a={symbol:this.marketId(t)},void 0!==r&&(a.depth=r),e.next=8,this.publicGetMarketDataV2DomSymbol(this.extend(a,n));case 8:return s=e.sent,o=this.safeValue(s,"mdEntry",[]),c=this.groupBy(o,"mdEntryType"),u=this.safeInteger(s,"lastUpdateTime"),d=parseInt(u/1e6),e.abrupt("return",this.parseOrderBook(c,d,"0","1","mdEntryPx","mdEntrySize"));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchAccounts",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=l.length>0&&void 0!==l[0]?l[0]:{},e.next=3,this.privateGetTradingAccounts(t);case 3:for(r=e.sent,n=this.safeValue(r,"accounts"),a=[],s=0;s<n.length;s++)o=n[s],c=this.safeString(o,"id"),u=this.safeString(o,"currency"),d=this.safeCurrencyCode(u),h=this.safeStringLower(o,"kind"),a.push({id:c,type:h,currency:d,info:o});return e.abrupt("return",a);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"findAccountByType",value:function(){var e=n(i.mark((function e(t){var r,n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.groupBy(this.accounts,"type"),void 0!==(n=this.safeValue(r,t))){e.next=8;break}throw new f(this.id+" findAccountByType() could not find an accountId with type '"+t+"', specify the 'accountId' parameter instead");case 8:if(!(n.length>1)){e.next=11;break}throw new f(this.id+" findAccountByType() found more than one accountId with type '"+t+"', specify the 'accountId' parameter instead");case 11:return e.abrupt("return",n[0]);case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountId",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadMarkets();case 2:return e.next=4,this.loadAccounts();case 4:if(r=this.safeString(this.options,"accountId"),void 0===(n=this.safeString(t,"accountId",r))){e.next=8;break}return e.abrupt("return",n);case 8:if(a=this.safeString(this.options,"defaultType","margin"),s=this.safeString(t,"type",a),t=this.omit(t,"type"),void 0!==s){e.next=13;break}throw new p(this.id+" requires an 'accountId' parameter or a 'type' parameter ('spot' or 'margin')");case 13:return e.next=15,this.findAccountByType(s);case 15:return o=e.sent,e.abrupt("return",o.id);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return e.next=7,this.getAccountId(t);case 7:return r=e.sent,n={accountId:r},e.next=11,this.privateGetTradingAccountsAccountIdBalance(this.extend(n,t));case 11:for(a=e.sent,s={info:a},o=this.safeValue(a,"balances",[]),c=0;c<o.length;c++)u=o[c],d=this.safeString(u,"currency"),h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeFloat(u,"available"),l.used=this.safeFloat(u,"onHold"),s[h]=l;return e.abrupt("return",this.parseBalance(s));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"tradeId"),i=this.safeInteger(e,"transactTime");void 0!==i&&(i=parseInt(i/1e6));var n=this.safeStringLower2(e,"side","aggressorSide");"1"===n?n="buy":"2"===n&&(n="sell");var a=this.safeString(e,"orderId"),s=this.safeString(e,"symbol"),o=this.safeSymbol(s,t),c=this.safeFloat2(e,"lastPx","mdEntryPx"),u=this.safeFloat2(e,"lastQty","mdEntrySize"),d=void 0;void 0!==c&&void 0!==u&&(d=c*u);var h=void 0,l=this.safeFloat(e,"commission");if(void 0!==l){var f=this.safeString(e,"commCurrency"),p=this.safeCurrencyCode(f),v=this.safeFloat(e,"commRate");h={cost:l,rate:v,currency:p}}return{id:r,info:e,timestamp:i,datetime:this.iso8601(i),symbol:o,type:void 0,order:a,side:n,takerOrMaker:void 0,price:c,amount:u,cost:d,fee:h}}},{key:"fetchMyTrades",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},c=void 0,void 0!==t&&(c=this.market(t),o.symbol=c.id),void 0!==r&&(o.from=1e6*r),void 0!==n&&(o.limit=n),e.next=18,this.privateGetTradingAccountsAccountIdTradeHistory(this.extend(o,a));case 18:return u=e.sent,e.abrupt("return",this.parseTrades(u,c,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseOHLCV",value:function(e){var t=this.safeInteger(e,"transactTime"),r=parseInt(t/1e6),i=this.safeFloat(e,"buyVolume"),n=this.safeFloat(e,"sellVolume"),a=this.sum(i,n);return[r,this.safeFloat(e,"firstPx"),this.safeFloat(e,"highPx"),this.safeFloat(e,"lowPx"),this.safeFloat(e,"lastPx"),a]}},{key:"fetchOHLCV",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f,p=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=p.length>1&&void 0!==p[1]?p[1]:"1m",n=p.length>2&&void 0!==p[2]?p[2]:void 0,a=p.length>3&&void 0!==p[3]?p[3]:void 0,s=p.length>4&&void 0!==p[4]?p[4]:{},e.next=6,this.loadMarkets();case 6:return o=this.market(t),c={symbol:o.id,timeframe:this.timeframes[r]},u=this.parseTimeframe(r),d=1e3*u,void 0!==n?(c.from=1e6*n,void 0!==a&&(c.to=1e6*this.sum(n,a*d))):(h=this.milliseconds(),void 0!==a&&(c.from=1e6*(h-a*d))),e.next=13,this.publicGetMarketDataV2CandlesSymbolTimeframe(this.extend(c,s));case 13:return l=e.sent,f=this.safeValue(l,"mdEntry",[]),e.abrupt("return",this.parseOHLCVs(f,o,r,n,a));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTrades",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={symbol:s.id},void 0!==r&&(o.from=this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=11,this.publicGetMarketDataV2TradesSymbol(this.extend(o,a));case 11:return c=e.sent,u=this.safeValue(c,"mdEntry",[]),e.abrupt("return",this.parseTrades(u,s,r,n));case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({A:"open",0:"open",1:"open",2:"closed",6:"canceled",4:"canceled",E:"open",8:"rejected"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"orderId"),i=this.safeString(e,"clOrdId"),n=this.safeInteger(e,"transactTime"),a=parseInt(n/1e6),s=this.parseOrderStatus(this.safeString(e,"ordStatus")),o=this.safeString(e,"symbol"),c=this.safeSymbol(o,t),u=this.safeFloat(e,"price"),d=this.safeFloat(e,"orderQty"),h=this.safeFloat(e,"cumQty"),l=this.safeFloat(e,"leavesQty"),f=this.safeStringLower(e,"side");"1"===f?f="buy":"1"===f&&(f="sell");var p=this.safeStringLower(e,"ordType");return"1"===p?p="market":"2"===p?p="limit":"3"===p?p="stop":"4"===p&&(p="stop-limit"),this.safeOrder({id:r,clientOrderId:i,info:e,timestamp:a,datetime:this.iso8601(a),lastTradeTimestamp:void 0,symbol:c,type:p,timeInForce:void 0,postOnly:void 0,side:f,price:u,stopPrice:void 0,amount:d,cost:void 0,average:void 0,filled:h,remaining:l,status:s,fee:void 0,trades:void 0})}},{key:"createOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,p,v,m,y,g=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=g.length>4&&void 0!==g[4]?g[4]:void 0,o=g.length>5&&void 0!==g[5]?g[5]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return e.next=8,this.getAccountId(o);case 8:if(c=e.sent,u={market:"1",limit:"2",stop:"3","stop-limit":"4"},void 0!==(d=this.safeString(u,r))){e.next=13;break}throw new b(this.id+" createOrder does not support order type "+r+", supported order types are market, limit, stop, stop-limit");case 13:if(h={buy:"1",sell:"2"},void 0!==(l=this.safeString(h,n))){e.next=17;break}throw new b(this.id+" createOrder does not support order side "+n+", supported order sides are buy, sell");case 17:if(f=this.market(t),p={account:parseInt(c),symbol:f.id,ordType:d,side:l,orderQty:this.amountToPrecision(t,a),transactTime:1e6*this.milliseconds()},"limit"!==r&&"stop-limit"!==r){e.next=23;break}if(void 0!==s){e.next=22;break}throw new b(this.id+" createOrder() requires a price argument for order type "+r);case 22:p.price=this.priceToPrecision(t,s);case 23:if("stop"!==r&&"stop-limit"!==r){e.next=29;break}if(void 0!==(v=this.safeFloat(o,"stopPx"))){e.next=27;break}throw new b(this.id+" createOrder() requires a stopPx param for order type "+r);case 27:p.stopPx=this.priceToPrecision(t,v),o=this.omit(o,"stopPx");case 29:return void 0!==(m=this.safeString2(o,"clientOrderId","clOrdId",this.uuid()))&&(p.clOrdId=m,o=this.omit(o,["clientOrderId","clOrdId"])),e.next=33,this.privatePostTradingOrderNew(this.extend(p,o));case 33:return y=e.sent,e.abrupt("return",this.parseOrder(y,f));case 35:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"editOrder",value:function(){var e=n(i.mark((function e(t,r,n,a){var s,o,c,u,d,h,l,f,v,m,y=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:void 0,c=y.length>6&&void 0!==y[6]?y[6]:{},void 0!==r){e.next=5;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 5:return e.next=7,this.loadMarkets();case 7:return e.next=9,this.loadAccounts();case 9:return e.next=11,this.getAccountId(c);case 11:return u=e.sent,d=this.market(r),h={account:parseInt(u),clOrdId:this.uuid(),symbol:d.id,transactTime:1e6*this.milliseconds()},void 0!==(l=this.safeString2(c,"clientOrderId","origClOrdId"))?(h.origClOrdId=l,c=this.omit(c,["clientOrderId","origClOrdId"])):h.orderId=t,void 0!==s&&(h.orderQty=this.amountToPrecision(r,s)),void 0!==o&&(h.price=this.priceToPrecision(r,o)),void 0!==(f=this.safeFloat(c,"stopPx"))&&(h.stopPx=this.priceToPrecision(r,f),c=this.omit(c,"stopPx")),void 0!==(v=this.safeFloat(c,"capPrice"))&&(h.capPrice=this.priceToPrecision(r,v),c=this.omit(c,"capPrice")),e.next=24,this.privatePostTradingOrderReplace(this.extend(h,c));case 24:return m=e.sent,e.abrupt("return",this.parseOrder(m,d));case 26:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:{},void 0!==r){e.next=4;break}throw new p(this.id+" cancelOrder() requires a symbol argument");case 4:return e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(n);case 10:return a=e.sent,s=this.safeString2(n,"clientOrderId","origClOrdId"),n=this.omit(n,["clientOrderId","origClOrdId"]),o=this.market(r),c={account:parseInt(a),symbol:o.id,clOrdId:this.uuid(),transactTime:1e6*this.milliseconds()},void 0!==s?c.origClOrdId=s:c.orderId=t,e.next=18,this.privatePostTradingOrderCancel(this.extend(c,n));case 18:return u=e.sent,e.abrupt("return",this.parseOrder(u,o));case 20:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"cancelAllOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:void 0,r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=4,this.loadMarkets();case 4:return e.next=6,this.loadAccounts();case 6:return e.next=8,this.getAccountId(r);case 8:return n=e.sent,a={account:parseInt(n),clOrdId:this.uuid()},void 0!==t?(s=this.market(t),a.symbol=s.id,a.massCancelRequestType="1"):a.massCancelRequestType="7",e.next=13,this.privatePostTradingOrderMassCancel(this.extend(a,r));case 13:return o=e.sent,e.abrupt("return",o);case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},c=void 0,void 0!==t&&(c=this.market(t),o.symbol=c.id),e.next=16,this.privateGetTradingAccountsAccountIdActiveOrders(this.extend(o,a));case 16:return u=e.sent,e.abrupt("return",this.parseOrders(u,c,r,n));case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},c=void 0,void 0!==t&&(c=this.market(t),o.symbol=c.id),void 0!==r&&(o.from=1e6*this.iso8601(r)),void 0!==n&&(o.limit=n),e.next=18,this.privateGetTradingAccountsAccountIdLastOrderStatuses(this.extend(o,a));case 18:return u=e.sent,e.abrupt("return",this.parseOrders(u,c,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return e.next=7,this.getAccountId(r);case 7:return n=e.sent,a=this.currency(t),s={accountId:n,currency:a.id},e.next=12,this.privatePostTransfersAccountsAccountIdDepositAddressCurrency(this.extend(s,r));case 12:return o=e.sent,c=this.safeValue(o,"address"),u=void 0,this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.loadAccounts();case 5:return e.next=7,this.getAccountId(r);case 7:return n=e.sent,a=this.currency(t),s={accountId:n,currency:a.id},e.next=12,this.privateGetTransfersAccountsAccountIdDepositAddressCurrency(this.extend(s,r));case 12:return o=e.sent,c=this.safeValue(o,"address"),u=void 0,this.checkAddress(c),e.abrupt("return",{currency:t,address:c,tag:u,info:o});case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTransactionsByType",value:function(){var e=n(i.mark((function e(t){var r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f.length>1&&void 0!==f[1]?f[1]:void 0,n=f.length>2&&void 0!==f[2]?f[2]:void 0,a=f.length>3&&void 0!==f[3]?f[3]:void 0,s=f.length>4&&void 0!==f[4]?f[4]:{},void 0!==r){e.next=6;break}throw new p(this.id+" fetchTransactions() requires a currency `code` argument");case 6:return e.next=8,this.loadMarkets();case 8:return e.next=10,this.loadAccounts();case 10:return e.next=12,this.getAccountId(s);case 12:return o=e.sent,c=this.currency(r),u={currency:c.id,accountId:o},void 0!==n&&(u.since=parseInt(n/1e3)),d="privateGetTransfersAccountsAccountId"+this.capitalize(t),e.next=19,this[d](this.extend(u,s));case 19:return h=e.sent,l=this.safeValue(h,t,[]),e.abrupt("return",this.parseTransactions(l,c,n,a));case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchWithdrawals",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("withdrawals",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchDeposits",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:void 0,r=s.length>1&&void 0!==s[1]?s[1]:void 0,n=s.length>2&&void 0!==s[2]?s[2]:void 0,a=s.length>3&&void 0!==s[3]?s[3]:{},e.next=6,this.fetchTransactionsByType("deposits",t,r,n,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTransaction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"withdrawalRequestId"),i=void 0===r?"deposit":"withdrawal",n=this.safeInteger(e,"lastUpdated");void 0!==n&&(n=parseInt(n/1e6));var a=void 0,s=this.safeString(e,"txId"),o=this.safeString(e,"currency"),c=this.safeCurrencyCode(o,t),u=this.safeString(e,"address"),d=void 0,h=u,l=this.safeFloat(e,"amount"),f=this.parseTransactionStatus(this.safeString(e,"status")),p=void 0;return{info:e,id:r,txid:s,timestamp:a,datetime:this.iso8601(a),addressFrom:d,addressTo:h,address:u,tagFrom:void 0,tagTo:void 0,tag:void 0,type:i,amount:l,currency:c,status:f,updated:n,fee:p}}},{key:"parseTransactionStatus",value:function(e){return this.safeString({1:"pending",2:"ok",3:"failed",4:"failed",5:"pending",100:"pending",101:"pending",102:"pending",103:"pending"},e,e)}},{key:"withdraw",value:function(){var e=n(i.mark((function e(t,r,n){var a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h.length>3&&void 0!==h[3]?h[3]:void 0,a=h.length>4&&void 0!==h[4]?h[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:return e.next=7,this.loadAccounts();case 7:return e.next=9,this.getAccountId(a);case 9:return s=e.sent,o=this.currency(t),c=(c=(c=this.uuid()).split("-")).join(""),u={currency:o.id,accountId:s,amount:this.currencyToPrecision(t,r),address:n,id:c},e.next=17,this.privatePostTransfersAccountsAccountIdWithdrawals(this.extend(u,a));case 17:return d=e.sent,e.abrupt("return",this.parseTransaction(d,o));case 19:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"parseLedgerEntryType",value:function(e){return this.safeString({deposit:"transaction",withdrawal:"transaction","internal deposit":"transfer","internal withdrawal":"transfer",rebate:"rebate",reward:"reward"},e,e)}},{key:"parseLedgerEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=void 0,n=this.safeString(e,"accountId"),a=void 0,s=void 0,o=this.parseLedgerEntryType(this.safeString(e,"kind")),c=this.safeCurrencyCode(this.safeString(e,"currency"),t),u=this.safeFloat(e,"amount");u<0?(i="out",u=Math.abs(u)):i="in";var d=this.safeInteger(e,"ts");void 0!==d&&(d=parseInt(d/1e6));var h={cost:this.safeFloat(e,"commission"),currency:c},l=void 0,f=this.safeFloat(e,"balance"),p="ok";return{info:e,id:r,direction:i,account:n,referenceId:a,referenceAccount:s,type:o,currency:c,amount:u,before:l,after:f,status:p,timestamp:d,datetime:this.iso8601(d),fee:h}}},{key:"fetchLedger",value:function(){var e=n(i.mark((function e(){var t,r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d.length>0&&void 0!==d[0]?d[0]:void 0,r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=6,this.loadMarkets();case 6:return e.next=8,this.loadAccounts();case 8:return e.next=10,this.getAccountId(a);case 10:return s=e.sent,o={accountId:s},c=void 0,void 0!==t&&(c=this.currency(t),o.symbol=c.id),void 0!==r&&(o.from=1e6*r),void 0!==n&&(o.limit=n),e.next=18,this.privateGetTransfersAccountsAccountIdBalanceHistory(this.extend(o,a));case 18:return u=e.sent,e.abrupt("return",this.parseLedger(u,c,r,n));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){return this.milliseconds()}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t]+"/"+this.implodeParams(e,i),o=this.omit(i,this.extractParams(e));if("public"===t)Object.keys(o).length&&(s+="?"+this.urlencode(o));else if("private"===t){this.checkRequiredCredentials();var c=this.nonce();c=c.toString();var u="AUTH"+(c+="000000"),d=this.secret.slice(14,78),h=this.ecdsa(u,d,"p256","sha256"),l=h.r+h.s;n={"X-AUTH-API-KEY":this.apiKey,"X-AUTH-API-PAYLOAD":u,"X-AUTH-API-SIGNATURE":l,"X-AUTH-API-NONCE":c},"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):"POST"===r&&(a=this.json(o),n["Content-Type"]="application/json")}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&e>=400){var u=this.id+" "+this.json(s),d=this.safeString(s,"error"),h=this.exceptions.exact;if(d in h)throw new h[d](u);var l=this.exceptions.broad,p=this.findBroadlyMatchedKey(l,a);if(void 0!==p)throw new l[p](u);throw new f(u)}}}]),r}(h)},function(e,t,r){"use strict";var i=r(16),n=r(8),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.ArgumentsRequired,m=f.ExchangeNotAvailable,y=f.InvalidNonce,g=f.InsufficientFunds,b=f.OrderNotFound,k=f.DDoSProtection,x=f.InvalidOrder,w=f.AuthenticationError,_=f.RateLimitExceeded;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"yobit",name:"YoBit",countries:["RU"],rateLimit:3e3,version:"3",has:{cancelOrder:!0,CORS:!1,createDepositAddress:!0,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchDepositAddress:!0,fetchDeposits:!1,fetchMarkets:!0,fetchMyTrades:!0,fetchOpenOrders:!0,fetchOrder:!0,fetchOrderBook:!0,fetchOrderBooks:!0,fetchTicker:!0,fetchTickers:!0,fetchTrades:!0,fetchTransactions:!1,fetchWithdrawals:!1,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766910-cdcbfdae-5eea-11e7-9859-03fea873272d.jpg",api:{public:"https://yobit.net/api",private:"https://yobit.net/tapi"},www:"https://www.yobit.net",doc:"https://www.yobit.net/en/api/",fees:"https://www.yobit.net/en/fees/"},api:{public:{get:["depth/{pair}","info","ticker/{pair}","trades/{pair}"]},private:{post:["ActiveOrders","CancelOrder","GetDepositAddress","getInfo","OrderInfo","Trade","TradeHistory","WithdrawCoinsToAddress"]}},fees:{trading:{maker:.002,taker:.002},funding:{withdraw:{}}},commonCurrencies:{AIR:"AirCoin",ANI:"ANICoin",ANT:"AntsCoin",ATMCHA:"ATM",ASN:"Ascension",AST:"Astral",ATM:"Autumncoin",BCC:"BCH",BCS:"BitcoinStake",BITS:"Bitstar",BLN:"Bulleon",BOT:"BOTcoin",BON:"BONES",BPC:"BitcoinPremium",BTS:"Bitshares2",CAT:"BitClave",CBC:"CryptoBossCoin",CMT:"CometCoin",COV:"Coven Coin",COVX:"COV",CPC:"Capricoin",CREDIT:"Creditbit",CS:"CryptoSpots",DCT:"Discount",DFT:"DraftCoin",DGD:"DarkGoldCoin",DIRT:"DIRTY",DROP:"FaucetCoin",DSH:"DASH",EKO:"EkoCoin",ENTER:"ENTRC",EPC:"ExperienceCoin",ESC:"EdwardSnowden",EUROPE:"EUROP",EXT:"LifeExtension",FUNK:"FUNKCoin",GCC:"GlobalCryptocurrency",GEN:"Genstake",GENE:"Genesiscoin",GOLD:"GoldMint",GOT:"Giotto Coin",HTML5:"HTML",HYPERX:"HYPER",ICN:"iCoin",INSANE:"INSN",JNT:"JointCoin",JPC:"JupiterCoin",KNC:"KingN Coin",LBTCX:"LiteBitcoin",LIZI:"LiZi",LOC:"LocoCoin",LOCX:"LOC",LUNYR:"LUN",LUN:"LunarCoin",MASK:"Yobit MASK",MDT:"Midnight",NAV:"NavajoCoin",NBT:"NiceBytes",OMG:"OMGame",PAC:"$PAC",PLAY:"PlayCoin",PIVX:"Darknet",PRS:"PRE",PUTIN:"PutinCoin",STK:"StakeCoin",SUB:"Subscriptio",PAY:"EPAY",PLC:"Platin Coin",RCN:"RCoin",REP:"Republicoin",RUR:"RUB",SBTC:"Super Bitcoin",TTC:"TittieCoin",UNI:"Universe",UST:"Uservice",VOL:"VolumeCoin",XIN:"XINCoin",XRA:"Ratecoin"},options:{fetchOrdersRequiresSymbol:!0,fetchTickersMaxLength:512},exceptions:{exact:{803:x,804:x,805:x,806:x,807:x,831:g,832:g,833:b},broad:{"Invalid pair name":p,"invalid api key":w,"invalid sign":w,"api key dont have trade permission":w,"invalid parameter":x,"invalid order":x,"The given order has already been cancelled":x,"Requests too often":k,"not available":m,"data unavailable":m,"external service unavailable":m,"Total transaction amount":x,"The given order has already been closed and cannot be cancelled":x,"Insufficient funds":g,"invalid key":w,"invalid nonce":y,"Total order amount is less than minimal amount":x,"Rate Limited":_}},orders:{}})}},{key:"fetchBalance",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,i=this.safeValue(r,"return",{}),a={info:r},s=this.safeValue(i,"funds",{}),o=this.safeValue(i,"funds_incl_orders",{}),c=Object.keys(this.extend(s,o)),u=0;u<c.length;u++)d=c[u],h=this.safeCurrencyCode(d),(l=this.account()).free=this.safeFloat(s,d),l.total=this.safeFloat(o,d),a[h]=l;return e.abrupt("return",this.parseBalance(a));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMarkets",value:function(){var e=a(n.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x,w,_,O,T,S=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.length>0&&void 0!==S[0]?S[0]:{},e.next=3,this.publicGetInfo(t);case 3:for(r=e.sent,a=this.safeValue(r,"pairs"),s=Object.keys(a),o=[],c=0;c<s.length;c++)u=s[c],d=a[u],h=u.split("_"),l=i(h,2),f=l[0],p=l[1],v=f.toUpperCase(),m=p.toUpperCase(),v=this.safeCurrencyCode(v),m=this.safeCurrencyCode(m),y=v+"/"+m,g={amount:this.safeInteger(d,"decimal_places"),price:this.safeInteger(d,"decimal_places")},b={min:this.safeFloat(d,"min_amount"),max:this.safeFloat(d,"max_amount")},k={min:this.safeFloat(d,"min_price"),max:this.safeFloat(d,"max_price")},x={min:this.safeFloat(d,"min_total")},w={amount:b,price:k,cost:x},_=this.safeInteger(d,"hidden"),O=0===_,T=this.safeFloat(d,"fee"),o.push({id:u,symbol:y,base:v,quote:m,baseId:f,quoteId:p,active:O,taker:T/100,precision:g,limits:w,info:d});return e.abrupt("return",o);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:{},e.next=4,this.loadMarkets();case 4:return a=this.market(t),s={pair:a.id},void 0!==r&&(s.limit=r),e.next=9,this.publicGetDepthPair(this.extend(s,i));case 9:if(o=e.sent,a.id in o){e.next=13;break}throw new p(this.id+" "+a.symbol+" order book is empty or not available");case 13:return c=o[a.id],e.abrupt("return",this.parseOrderBook(c));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOrderBooks",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:void 0,r=f.length>1&&void 0!==f[1]?f[1]:void 0,i=f.length>2&&void 0!==f[2]?f[2]:{},e.next=5,this.loadMarkets();case 5:if(a=void 0,void 0!==t){e.next=13;break}if(!((a=this.ids.join("-")).length>2048)){e.next=11;break}throw s=this.ids.length,new p(this.id+" has "+s.toString()+" symbols exceeding max URL length, you are required to specify a list of symbols in the first argument to fetchOrderBooks");case 11:e.next=15;break;case 13:a=(a=this.marketIds(t)).join("-");case 15:return o={pair:a},void 0!==r&&(o.limit=r),e.next=19,this.publicGetDepthPair(this.extend(o,i));case 19:for(c=e.sent,u={},a=Object.keys(c),d=0;d<a.length;d++)h=a[d],l=this.safeSymbol(h),u[l]=this.parseOrderBook(c[h]);return e.abrupt("return",u);case 24:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"parseTicker",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"updated"),i=void 0;void 0!==t&&(i=t.symbol);var n=this.safeFloat(e,"last");return{symbol:i,timestamp:r,datetime:this.iso8601(r),high:this.safeFloat(e,"high"),low:this.safeFloat(e,"low"),bid:this.safeFloat(e,"buy"),bidVolume:void 0,ask:this.safeFloat(e,"sell"),askVolume:void 0,vwap:void 0,open:void 0,close:n,last:n,previousClose:void 0,change:void 0,percentage:void 0,average:this.safeFloat(e,"avg"),baseVolume:this.safeFloat(e,"vol_cur"),quoteVolume:this.safeFloat(e,"vol"),info:e}}},{key:"fetchTickers",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.length>0&&void 0!==y[0]?y[0]:void 0,r=y.length>1&&void 0!==y[1]?y[1]:{},e.next=4,this.loadMarkets();case 4:if(i=this.ids,void 0!==t){e.next=13;break}if(a=i.length,i=i.join("-"),s=this.safeInteger(this.options,"fetchTickersMaxLength",2048),!(i.length>this.options.fetchTickersMaxLength)){e.next=11;break}throw new v(this.id+" has "+a.toString()+" markets exceeding max URL length for this endpoint ("+s.toString()+" characters), please, specify a list of symbols of interest in the first argument to fetchTickers");case 11:e.next=15;break;case 13:i=(i=this.marketIds(t)).join("-");case 15:return o={pair:i},e.next=18,this.publicGetTickerPair(this.extend(o,r));case 18:for(c=e.sent,u={},d=Object.keys(c),h=0;h<d.length;h++)l=d[h],f=c[l],p=this.safeMarket(l),m=p.symbol,u[m]=this.parseTicker(f,p);return e.abrupt("return",this.filterByArray(u,"symbol",t));case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:{},e.next=3,this.fetchTickers([t],r);case 3:return i=e.sent,e.abrupt("return",i[t]);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeTimestamp(e,"timestamp"),i=this.safeString(e,"type");"ask"===i?i="sell":"bid"===i&&(i="buy");var n=this.safeFloat2(e,"rate","price"),a=this.safeString2(e,"trade_id","tid"),s=this.safeString(e,"order_id"),o=this.safeString(e,"pair"),c=this.safeSymbol(o,t),u=this.safeFloat(e,"amount"),d="limit",h=void 0,l=this.safeFloat(e,"commission");if(void 0!==l){var f=this.safeString(e,"commissionCurrency"),p=this.safeCurrencyCode(f);h={cost:l,currency:p}}var v=this.safeValue(e,"is_your_order");void 0!==v&&void 0===h&&(h=this.calculateFee(c,d,i,u,n,"taker"));var m=void 0;return void 0!==u&&void 0!==n&&(m=u*n),{id:a,order:s,timestamp:r,datetime:this.iso8601(r),symbol:c,type:d,side:i,takerOrMaker:void 0,price:n,amount:u,cost:m,fee:h,info:e}}},{key:"fetchTrades",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c,u=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>1&&void 0!==u[1]?u[1]:void 0,i=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},void 0!==i&&(o.limit=i),e.next=10,this.publicGetTradesPair(this.extend(o,a));case 10:if(c=e.sent,!Array.isArray(c)){e.next=15;break}if(0!==c.length){e.next=15;break}return e.abrupt("return",[]);case 15:return e.abrupt("return",this.parseTrades(c[s.id],s,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(n.mark((function e(t,r,i,a){var s,o,c,u,d,h,l,f,v,m,y=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=y.length>4&&void 0!==y[4]?y[4]:void 0,o=y.length>5&&void 0!==y[5]?y[5]:{},"market"!==r){e.next=4;break}throw new p(this.id+" allows limit orders only");case 4:return e.next=6,this.loadMarkets();case 6:return c=this.market(t),u={pair:c.id,type:i,amount:this.amountToPrecision(t,a),rate:this.priceToPrecision(t,s)},s=parseFloat(s),a=parseFloat(a),e.next=12,this.privatePostTrade(this.extend(u,o));case 12:return d=e.sent,h=void 0,l="open",f=0,v=a,"return"in d&&("0"===(h=this.safeString(d.return,"order_id"))&&(h=this.safeString(d.return,"init_order_id"),l="closed"),f=this.safeFloat(d.return,"received",0),v=this.safeFloat(d.return,"remains",a)),m=this.milliseconds(),e.abrupt("return",{id:h,timestamp:m,datetime:this.iso8601(m),lastTradeTimestamp:void 0,status:l,symbol:t,type:r,side:i,price:s,cost:s*f,amount:a,remaining:v,filled:f,fee:void 0,info:d,clientOrderId:void 0,average:void 0,trades:void 0});case 20:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostCancelOrder(this.extend(i,r));case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrderStatus",value:function(e){return this.safeString({0:"open",1:"closed",2:"canceled",3:"open"},e,e)}},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"id"),i=this.parseOrderStatus(this.safeString(e,"status")),n=this.safeTimestamp(e,"timestamp_created"),a=this.safeString(e,"pair"),s=this.safeSymbol(a,t),o=this.safeFloat(e,"amount"),c=this.safeFloat(e,"start_amount"),u=this.safeFloat(e,"rate"),d=void 0,h="limit",l=this.safeString(e,"type");return this.safeOrder({info:e,id:r,clientOrderId:void 0,symbol:s,timestamp:n,datetime:this.iso8601(n),lastTradeTimestamp:void 0,type:h,timeInForce:void 0,postOnly:void 0,side:l,price:u,stopPrice:void 0,cost:void 0,amount:c,remaining:o,filled:void 0,status:i,fee:d,average:void 0,trades:void 0})}},{key:"fetchOrder",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o.length>1&&void 0!==o[1]?o[1]:void 0,r=o.length>2&&void 0!==o[2]?o[2]:{},e.next=4,this.loadMarkets();case 4:return i={order_id:parseInt(t)},e.next=7,this.privatePostOrderInfo(this.extend(i,r));case 7:return a=e.sent,t=t.toString(),s=this.safeValue(a,"return",{}),e.abrupt("return",this.parseOrder(this.extend({id:t},s[t])));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchOpenOrders",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.length>0&&void 0!==h[0]?h[0]:void 0,r=h.length>1&&void 0!==h[1]?h[1]:void 0,i=h.length>2&&void 0!==h[2]?h[2]:void 0,a=h.length>3&&void 0!==h[3]?h[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchOpenOrders() requires a symbol argument");case 6:return e.next=8,this.loadMarkets();case 8:return s={},o=void 0,void 0!==t&&(c=this.market(t),s.pair=c.id),e.next=13,this.privatePostActiveOrders(this.extend(s,a));case 13:return u=e.sent,d=this.safeValue(u,"return",[]),e.abrupt("return",this.parseOrders(d,o,r,i));case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchMyTrades",value:function(){var e=a(n.mark((function e(){var t,r,i,a,s,o,c,u,d,h,l,f,p,m=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.length>0&&void 0!==m[0]?m[0]:void 0,r=m.length>1&&void 0!==m[1]?m[1]:void 0,i=m.length>2&&void 0!==m[2]?m[2]:void 0,a=m.length>3&&void 0!==m[3]?m[3]:{},void 0!==t){e.next=6;break}throw new v(this.id+" fetchMyTrades() requires a `symbol` argument");case 6:return e.next=8,this.loadMarkets();case 8:return s=this.market(t),o={pair:s.id},void 0!==i&&(o.count=parseInt(i)),void 0!==r&&(o.since=parseInt(r/1e3)),e.next=14,this.privatePostTradeHistory(this.extend(o,a));case 14:for(c=e.sent,u=this.safeValue(c,"return",{}),d=Object.keys(u),h=[],l=0;l<d.length;l++)f=d[l],p=this.parseTrade(this.extend(u[f],{trade_id:f}),s),h.push(p);return e.abrupt("return",this.filterBySymbolSinceLimit(h,t,r,i));case 20:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>1&&void 0!==o[1]?o[1]:{},i={need_new:1},e.next=4,this.fetchDepositAddress(t,this.extend(i,r));case 4:return a=e.sent,s=this.safeString(a,"address"),this.checkAddress(s),e.abrupt("return",{currency:t,address:s,tag:void 0,info:a.info});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchDepositAddress",value:function(){var e=a(n.mark((function e(t){var r,i,a,s,o,c=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>1&&void 0!==c[1]?c[1]:{},e.next=3,this.loadMarkets();case 3:return i=this.currency(t),a={coinName:i.id,need_new:0},e.next=7,this.privatePostGetDepositAddress(this.extend(a,r));case 7:return s=e.sent,o=this.safeString(s.return,"address"),this.checkAddress(o),e.abrupt("return",{currency:t,address:o,tag:void 0,info:s});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(n.mark((function e(t,r,i){var a,s,o,c,u,d=arguments;return n.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(i),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),c={coinName:o.id,amount:r,address:i},void 0===a){e.next=9;break}throw new p(this.id+" withdraw() does not support the tag argument yet due to a lack of docs on withdrawing with tag/memo on behalf of the exchange.");case 9:return e.next=11,this.privatePostWithdrawCoinsToAddress(this.extend(c,s));case 11:return u=e.sent,e.abrupt("return",{info:u,id:void 0});case 13:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api[t],o=this.omit(i,this.extractParams(e));if("private"===t){this.checkRequiredCredentials();var c=this.nonce();a=this.urlencode(this.extend({nonce:c,method:e},o));var u=this.hmac(this.encode(a),this.encode(this.secret),"sha512");n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:u}}else"public"===t?(s+="/"+this.version+"/"+this.implodeParams(e,i),Object.keys(o).length&&(s+="?"+this.urlencode(o))):(s+="/"+this.implodeParams(e,i),"GET"===r?Object.keys(o).length&&(s+="?"+this.urlencode(o)):Object.keys(o).length&&(a=this.json(o),n={"Content-Type":"application/json"}));return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s&&"success"in s){var u=this.safeValue(s,"success",!1);if("string"===typeof u&&(u="true"===u||"1"===u),!u){var d=this.safeString(s,"code"),h=this.safeString(s,"error"),l=this.id+" "+a;throw this.throwExactlyMatchedException(this.exceptions.exact,d,l),this.throwExactlyMatchedException(this.exceptions.exact,h,l),this.throwBroadlyMatchedException(this.exceptions.broad,h,l),new p(l)}}}}]),r}(l)},function(e,t,r){"use strict";var i=r(8),n=r(16),a=r(9),s=r(2),o=r(4),c=r(7),u=r(3),d=r(5),h=r(6),l=r(11),f=r(10),p=f.ExchangeError,v=f.BadRequest;e.exports=function(e){d(r,e);var t=h(r);function r(){return s(this,r),t.apply(this,arguments)}return o(r,[{key:"describe",value:function(){return this.deepExtend(c(u(r.prototype),"describe",this).call(this),{id:"zaif",name:"Zaif",countries:["JP"],rateLimit:2e3,version:"1",has:{cancelOrder:!0,CORS:!1,createMarketOrder:!1,createOrder:!0,fetchBalance:!0,fetchClosedOrders:!0,fetchMarkets:!0,fetchOrderBook:!0,fetchOpenOrders:!0,fetchTicker:!0,fetchTrades:!0,withdraw:!0},urls:{logo:"https://user-images.githubusercontent.com/1294454/27766927-39ca2ada-5eeb-11e7-972f-1b4199518ca6.jpg",api:"https://api.zaif.jp",www:"https://zaif.jp",doc:["https://techbureau-api-document.readthedocs.io/ja/latest/index.html","https://corp.zaif.jp/api-docs","https://corp.zaif.jp/api-docs/api_links","https://www.npmjs.com/package/zaif.jp","https://github.com/you21979/node-zaif"],fees:"https://zaif.jp/fee?lang=en"},fees:{trading:{percentage:!0,taker:.001,maker:0}},api:{public:{get:["depth/{pair}","currencies/{pair}","currencies/all","currency_pairs/{pair}","currency_pairs/all","last_price/{pair}","ticker/{pair}","trades/{pair}"]},private:{post:["active_orders","cancel_order","deposit_history","get_id_info","get_info","get_info2","get_personal_info","trade","trade_history","withdraw","withdraw_history"]},ecapi:{post:["createInvoice","getInvoice","getInvoiceIdsByOrderNumber","cancelInvoice"]},tlapi:{post:["get_positions","position_history","active_positions","create_position","change_position","cancel_position"]},fapi:{get:["groups/{group_id}","last_price/{group_id}/{pair}","ticker/{group_id}/{pair}","trades/{group_id}/{pair}","depth/{group_id}/{pair}"]}},options:{fees:{"BTC/JPY":{maker:0,taker:0},"BCH/JPY":{maker:0,taker:.003},"BCH/BTC":{maker:0,taker:.003},"PEPECASH/JPY":{maker:0,taker:1e-4},"PEPECASH/BT":{maker:0,taker:1e-4}}},exceptions:{exact:{"unsupported currency_pair":v},broad:{}}})}},{key:"fetchMarkets",value:function(){var e=a(i.mark((function e(){var t,r,a,s,o,c,u,d,h,l,f,p,v,m,y,g,b,k,x=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},e.next=3,this.publicGetCurrencyPairsAll(t);case 3:for(r=e.sent,a=[],s=0;s<r.length;s++)o=r[s],c=this.safeString(o,"currency_pair"),u=this.safeString(o,"name"),d=u.split("/"),h=n(d,2),l=h[0],f=h[1],p=this.safeCurrencyCode(l),v=this.safeCurrencyCode(f),m=p+"/"+v,y={amount:-Math.log10(this.safeFloat(o,"item_unit_step")),price:this.safeInteger(o,"aux_unit_point")},g=this.safeValue(this.options.fees,m,this.fees.trading),b=g.taker,k=g.maker,a.push({id:c,symbol:m,base:p,quote:v,baseId:l,quoteId:f,active:!0,precision:y,taker:b,maker:k,limits:{amount:{min:this.safeFloat(o,"item_unit_min"),max:void 0},price:{min:this.safeFloat(o,"aux_unit_min"),max:void 0},cost:{min:void 0,max:void 0}},info:o});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchBalance",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u,d,h,l,f=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:{},e.next=3,this.loadMarkets();case 3:return e.next=5,this.privatePostGetInfo(t);case 5:for(r=e.sent,n=this.safeValue(r,"return",{}),a={info:r},s=this.safeValue(n,"funds",{}),o=Object.keys(s),c=0;c<o.length;c++)u=o[c],d=this.safeCurrencyCode(u),h=this.safeValue(s,u),l={free:h,used:0,total:h},"deposit"in n&&u in n.deposit&&(l.total=this.safeFloat(n.deposit,u),l.used=l.total-l.free),a[d]=l;return e.abrupt("return",this.parseBalance(a));case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchOrderBook",value:function(){var e=a(i.mark((function e(t){var r,n,a,s=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s.length>1&&void 0!==s[1]?s[1]:void 0,r=s.length>2&&void 0!==s[2]?s[2]:{},e.next=4,this.loadMarkets();case 4:return n={pair:this.marketId(t)},e.next=7,this.publicGetDepthPair(this.extend(n,r));case 7:return a=e.sent,e.abrupt("return",this.parseOrderBook(a));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fetchTicker",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d,h=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]?h[1]:{},e.next=3,this.loadMarkets();case 3:return n={pair:this.marketId(t)},e.next=6,this.publicGetTickerPair(this.extend(n,r));case 6:return a=e.sent,s=this.milliseconds(),o=this.safeFloat(a,"vwap"),c=this.safeFloat(a,"volume"),u=void 0,void 0!==c&&void 0!==o&&(u=c*o),d=this.safeFloat(a,"last"),e.abrupt("return",{symbol:t,timestamp:s,datetime:this.iso8601(s),high:this.safeFloat(a,"high"),low:this.safeFloat(a,"low"),bid:this.safeFloat(a,"bid"),bidVolume:void 0,ask:this.safeFloat(a,"ask"),askVolume:void 0,vwap:o,open:void 0,close:d,last:d,previousClose:void 0,change:void 0,percentage:void 0,average:void 0,baseVolume:c,quoteVolume:u,info:a});case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseTrade",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"trade_type");r="bid"===r?"buy":"sell";var i=this.safeTimestamp(e,"date"),n=this.safeString2(e,"id","tid"),a=this.safeFloat(e,"price"),s=this.safeFloat(e,"amount"),o=void 0;void 0!==a&&void 0!==s&&(o=s*a);var c=this.safeString(e,"currency_pair"),u=this.safeSymbol(c,t,"_");return{id:n,info:e,timestamp:i,datetime:this.iso8601(i),symbol:u,type:void 0,side:r,order:void 0,takerOrMaker:void 0,price:a,amount:s,cost:o,fee:void 0}}},{key:"fetchTrades",value:function(){var e=a(i.mark((function e(t){var r,n,a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=d.length>1&&void 0!==d[1]?d[1]:void 0,n=d.length>2&&void 0!==d[2]?d[2]:void 0,a=d.length>3&&void 0!==d[3]?d[3]:{},e.next=5,this.loadMarkets();case 5:return s=this.market(t),o={pair:s.id},e.next=9,this.publicGetTradesPair(this.extend(o,a));case 9:return c=e.sent,1===c.length&&(u=c[0],Object.keys(u).length||(c=[])),e.abrupt("return",this.parseTrades(c,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createOrder",value:function(){var e=a(i.mark((function e(t,r,n,a){var s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=d.length>4&&void 0!==d[4]?d[4]:void 0,o=d.length>5&&void 0!==d[5]?d[5]:{},e.next=4,this.loadMarkets();case 4:if("limit"===r){e.next=6;break}throw new p(this.id+" allows limit orders only");case 6:return c={currency_pair:this.marketId(t),action:"buy"===n?"bid":"ask",amount:a,price:s},e.next=9,this.privatePostTrade(this.extend(c,o));case 9:return u=e.sent,e.abrupt("return",{info:u,id:u.return.order_id.toString()});case 11:case"end":return e.stop()}}),e,this)})));return function(t,r,i,n){return e.apply(this,arguments)}}()},{key:"cancelOrder",value:function(){var e=a(i.mark((function e(t){var r,n,a=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.length>1&&void 0!==a[1]?a[1]:void 0,r=a.length>2&&void 0!==a[2]?a[2]:{},n={order_id:t},e.next=5,this.privatePostCancelOrder(this.extend(n,r));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"parseOrder",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=this.safeString(e,"action");r="bid"===r?"buy":"sell";var i=this.safeTimestamp(e,"timestamp"),n=this.safeString(e,"currency_pair"),a=this.safeSymbol(n,t,"_"),s=this.safeFloat(e,"price"),o=this.safeFloat(e,"amount"),c=this.safeString(e,"id");return this.safeOrder({id:c,clientOrderId:void 0,timestamp:i,datetime:this.iso8601(i),lastTradeTimestamp:void 0,status:"open",symbol:a,type:"limit",timeInForce:void 0,postOnly:void 0,side:r,price:s,stopPrice:void 0,cost:void 0,amount:o,filled:void 0,remaining:void 0,trades:void 0,fee:void 0,info:e,average:void 0})}},{key:"fetchOpenOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.currency_pair=s.id),e.next=11,this.privatePostActiveOrders(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c.return,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchClosedOrders",value:function(){var e=a(i.mark((function e(){var t,r,n,a,s,o,c,u=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=u.length>0&&void 0!==u[0]?u[0]:void 0,r=u.length>1&&void 0!==u[1]?u[1]:void 0,n=u.length>2&&void 0!==u[2]?u[2]:void 0,a=u.length>3&&void 0!==u[3]?u[3]:{},e.next=6,this.loadMarkets();case 6:return s=void 0,o={},void 0!==t&&(s=this.market(t),o.currency_pair=s.id),e.next=11,this.privatePostTradeHistory(this.extend(o,a));case 11:return c=e.sent,e.abrupt("return",this.parseOrders(c.return,s,r,n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"withdraw",value:function(){var e=a(i.mark((function e(t,r,n){var a,s,o,c,u,d=arguments;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=d.length>3&&void 0!==d[3]?d[3]:void 0,s=d.length>4&&void 0!==d[4]?d[4]:{},this.checkAddress(n),e.next=5,this.loadMarkets();case 5:if(o=this.currency(t),"JPY"!==t){e.next=8;break}throw new p(this.id+" withdraw() does not allow "+t+" withdrawals");case 8:return c={currency:o.id,amount:r,address:n},void 0!==a&&(c.message=a),e.next=12,this.privatePostWithdraw(this.extend(c,s));case 12:return u=e.sent,e.abrupt("return",{info:u,id:u.return.txid,fee:u.return.fee});case 14:case"end":return e.stop()}}),e,this)})));return function(t,r,i){return e.apply(this,arguments)}}()},{key:"nonce",value:function(){var e=parseFloat(this.milliseconds()/1e3);return e.toFixed(8)}},{key:"sign",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"public",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0,s=this.urls.api+"/";if("public"===t)s+="api/"+this.version+"/"+this.implodeParams(e,i);else if("fapi"===t)s+="fapi/"+this.version+"/"+this.implodeParams(e,i);else{this.checkRequiredCredentials(),s+="ecapi"===t?"ecapi":"tlapi"===t?"tlapi":"tapi";var o=this.nonce();a=this.urlencode(this.extend({method:e,nonce:o},i)),n={"Content-Type":"application/x-www-form-urlencoded",Key:this.apiKey,Sign:this.hmac(this.encode(a),this.encode(this.secret),"sha512")}}return{url:s,method:r,body:a,headers:n}}},{key:"handleErrors",value:function(e,t,r,i,n,a,s,o,c){if(void 0!==s){var u=this.id+" "+a,d=this.safeString(s,"error");if(void 0!==d)throw this.throwExactlyMatchedException(this.exceptions.exact,d,u),this.throwBroadlyMatchedException(this.exceptions.broad,d,u),new p(u);if(!this.safeValue(s,"success",!0))throw new p(u)}}}]),r}(l)},,,function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));function i(e,t,r){if(void 0===r&&(r=Error),!e)throw new r(t)}},function(e,t,r){"use strict";r.d(t,"a",(function(){return h}));var i=r(22),n=r(63),a=r(45),s=r.n(a),o=r(84);function c(e,t){return t?Object.keys(e).reduce((function(r,n){var a,s;return r[n]=(a=e[n],(s=t[n])?Object(i.a)(Object(i.a)(Object(i.a)({},a||{}),s||{}),Object.keys(a).reduce((function(e,t){return e[t]=Object(i.a)(Object(i.a)({},a[t]),s[t]||{}),e}),{})):a),r}),Object(i.a)({},e)):e}function u(e){return{create:function(){return{has:function(t){return t in e},get:function(t){return e[t]},set:function(t,r){e[t]=r}}}}}var d=s.a||a;var h=function(){function e(t,r,n,a){var s,h=this;if(void 0===r&&(r=e.defaultLocale),this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(e){var t=h.formatToParts(e);if(1===t.length)return t[0].value;var r=t.reduce((function(e,t){return e.length&&t.type===o.a.literal&&"string"===typeof e[e.length-1]?e[e.length-1]+=t.value:e.push(t.value),e}),[]);return r.length<=1?r[0]||"":r},this.formatToParts=function(e){return Object(o.b)(h.ast,h.locales,h.formatters,h.formats,e,void 0,h.message)},this.resolvedOptions=function(){return{locale:Intl.NumberFormat.supportedLocalesOf(h.locales)[0]}},this.getAst=function(){return h.ast},"string"===typeof t){if(this.message=t,!e.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");this.ast=e.__parse(t,{normalizeHashtagInPlural:!1,ignoreTag:null===a||void 0===a?void 0:a.ignoreTag})}else this.ast=t;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=c(e.formats,n),this.locales=r,this.formatters=a&&a.formatters||(void 0===(s=this.formatterCache)&&(s={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:d((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.NumberFormat).bind.apply(e,Object(i.c)([void 0],t)))}),{cache:u(s.number),strategy:d.strategies.variadic}),getDateTimeFormat:d((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.DateTimeFormat).bind.apply(e,Object(i.c)([void 0],t)))}),{cache:u(s.dateTime),strategy:d.strategies.variadic}),getPluralRules:d((function(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new((e=Intl.PluralRules).bind.apply(e,Object(i.c)([void 0],t)))}),{cache:u(s.pluralRules),strategy:d.strategies.variadic})})}return Object.defineProperty(e,"defaultLocale",{get:function(){return e.memoizedDefaultLocale||(e.memoizedDefaultLocale=(new Intl.NumberFormat).resolvedOptions().locale),e.memoizedDefaultLocale},enumerable:!1,configurable:!0}),e.memoizedDefaultLocale=null,e.__parse=n.a,e.formats={number:{currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},e}()},,function(e,t,r){"use strict";var i=r(20),n=r(1),a=r(141),s=r(26);var o=n.memo((function(e){var t=Object(a.a)(),r=t.formatMessage,s=t.textComponent,o=void 0===s?n.Fragment:s,c=e.id,u=e.description,d=e.defaultMessage,h=e.values,l=e.children,f=e.tagName,p=void 0===f?o:f,v=r({id:c,description:u,defaultMessage:d},h,{ignoreTag:e.ignoreTag});return Array.isArray(v)||(v=[v]),"function"===typeof l?l(v):p?n.createElement.apply(n,Object(i.d)([p,null],v)):n.createElement(n.Fragment,null,v)}),(function(e,t){var r=e.values,n=Object(i.c)(e,["values"]),a=t.values,o=Object(i.c)(t,["values"]);return Object(s.d)(a,r)&&Object(s.d)(n,o)}));o.displayName="FormattedMessage",t.a=o},function(e,t,r){"use strict";var i=r(20),n=r(1),a=r(65),s=r(26),o=r(15),c=r(386),u=r(387),d=r(14),h=r(17);function l(e,t){return Object.keys(e).reduce((function(r,i){return r[i]=Object(o.a)({timeZone:t},e[i]),r}),{})}function f(e,t){return Object.keys(Object(o.a)(Object(o.a)({},e),t)).reduce((function(r,i){return r[i]=Object(o.a)(Object(o.a)({},e[i]||{}),t[i]||{}),r}),{})}function p(e,t){if(!t)return e;var r=u.a.formats;return Object(o.a)(Object(o.a)(Object(o.a)({},r),e),{date:f(l(r.date,t),l(e.date||{},t)),time:f(l(r.time,t),l(e.time||{},t))})}function v(e,t,r,i,n){var a=e.locale,s=e.formats,u=e.messages,l=e.defaultLocale,f=e.defaultFormats,v=e.onError,m=e.timeZone,y=e.defaultRichTextElements;void 0===r&&(r={id:""});var g=r.id,b=r.defaultMessage;Object(c.a)(!!g,"[@formatjs/intl] An `id` must be provided to format a message.");var k=String(g),x=u&&Object.prototype.hasOwnProperty.call(u,k)&&u[k];if(Array.isArray(x)&&1===x.length&&x[0].type===h.b.literal)return x[0].value;if(!i&&x&&"string"===typeof x&&!y)return x.replace(/'\{(.*?)\}'/gi,"{$1}");if(i=Object(o.a)(Object(o.a)({},y),i||{}),s=p(s,m),f=p(f,m),!x){if((!b||a&&a.toLowerCase()!==l.toLowerCase())&&v(new d.f(r,a)),b)try{return t.getMessageFormat(b,l,f,n).format(i)}catch(w){return v(new d.d('Error formatting default message for: "'+k+'", rendering default message verbatim',a,r,w)),"string"===typeof b?b:k}return k}try{return t.getMessageFormat(x,a,s,Object(o.a)({formatters:t},n||{})).format(i)}catch(w){v(new d.d('Error formatting message: "'+k+'", using '+(b?"default message":"id")+" as fallback.",a,r,w))}if(b)try{return t.getMessageFormat(b,l,f,n).format(i)}catch(w){v(new d.d('Error formatting the default message for: "'+k+'", rendering message verbatim',a,r,w))}return"string"===typeof x?x:"string"===typeof b?b:k}var m=r(18),y=["localeMatcher","style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay"];function g(e,t,r){var i=e.locale,n=e.formats,a=e.onError;void 0===r&&(r={});var s=r.format,o=s&&Object(m.e)(n,"number",s,a)||{};return t(i,Object(m.d)(r,y,o))}function b(e,t,r,i){void 0===i&&(i={});try{return g(e,t,i).format(r)}catch(n){e.onError(new d.a(d.b.FORMAT_ERROR,"Error formatting number.",n))}return String(r)}function k(e,t,r,i){void 0===i&&(i={});try{return g(e,t,i).formatToParts(r)}catch(n){e.onError(new d.a(d.b.FORMAT_ERROR,"Error formatting number.",n))}return[]}var x=r(38),w=["numeric","style"];function _(e,t,r,i,n){void 0===n&&(n={}),i||(i="second"),Intl.RelativeTimeFormat||e.onError(new x.b('Intl.RelativeTimeFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-relativetimeformat"\n',x.a.MISSING_INTL_API));try{return function(e,t,r){var i=e.locale,n=e.formats,a=e.onError;void 0===r&&(r={});var s=r.format,o=!!s&&Object(m.e)(n,"relative",s,a)||{};return t(i,Object(m.d)(r,w,o))}(e,t,n).format(r,i)}catch(a){e.onError(new d.d("Error formatting relative time.",a))}return String(r)}var O=["localeMatcher","formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem"];function T(e,t,r,i){var n=e.locale,a=e.formats,s=e.onError,c=e.timeZone;void 0===i&&(i={});var u=i.format,d=Object(o.a)(Object(o.a)({},c&&{timeZone:c}),u&&Object(m.e)(a,t,u,s)),h=Object(m.d)(i,O,d);return"time"!==t||h.hour||h.minute||h.second||h.timeStyle||h.dateStyle||(h=Object(o.a)(Object(o.a)({},h),{hour:"numeric",minute:"numeric"})),r(n,h)}function S(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],a=r[1],s=void 0===a?{}:a,o="string"===typeof n?new Date(n||0):n;try{return T(e,"date",t,s).format(o)}catch(c){e.onError(new d.a(d.b.FORMAT_ERROR,"Error formatting date.",c))}return String(o)}function C(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],a=r[1],s=void 0===a?{}:a,o="string"===typeof n?new Date(n||0):n;try{return T(e,"time",t,s).format(o)}catch(c){e.onError(new d.a(d.b.FORMAT_ERROR,"Error formatting time.",c))}return String(o)}function I(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],a=r[1],s=r[2],o=void 0===s?{}:s,c=e.timeZone,u=e.locale,h=e.onError,l=Object(m.d)(o,O,c?{timeZone:c}:{});try{return t(u,l).formatRange(n,a)}catch(f){h(new d.a(d.b.FORMAT_ERROR,"Error formatting date time range.",f))}return String(n)}function M(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],a=r[1],s=void 0===a?{}:a,o="string"===typeof n?new Date(n||0):n;try{return T(e,"date",t,s).formatToParts(o)}catch(c){e.onError(new d.a(d.b.FORMAT_ERROR,"Error formatting date.",c))}return[]}function E(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],a=r[1],s=void 0===a?{}:a,o="string"===typeof n?new Date(n||0):n;try{return T(e,"time",t,s).formatToParts(o)}catch(c){e.onError(new d.a(d.b.FORMAT_ERROR,"Error formatting time.",c))}return[]}var A=["localeMatcher","type"];function F(e,t,r,i){var n=e.locale,a=e.onError;void 0===i&&(i={}),Intl.PluralRules||a(new x.b('Intl.PluralRules is not available in this environment.\nTry polyfilling it using "@formatjs/intl-pluralrules"\n',x.a.MISSING_INTL_API));var s=Object(m.d)(i,A);try{return t(n,s).select(r)}catch(o){a(new d.d("Error formatting plural.",o))}return"other"}var P=["localeMatcher","type","style"],B=Date.now();function R(e,t,r,i){var n=e.locale,a=e.onError;void 0===i&&(i={}),Intl.ListFormat||a(new x.b('Intl.ListFormat is not available in this environment.\nTry polyfilling it using "@formatjs/intl-listformat"\n',x.a.MISSING_INTL_API));var s=Object(m.d)(i,P);try{var o={},c=r.map((function(e,t){if("object"===typeof e){var r=function(e){return B+"_"+e+"_"+B}(t);return o[r]=e,r}return String(e)}));return Object.keys(o).length?t(n,s).formatToParts(c).reduce((function(e,t){var r=t.value;return o[r]?e.push(o[r]):"string"===typeof e[e.length-1]?e[e.length-1]+=r:e.push(r),e}),[]):t(n,s).format(c)}catch(u){a(new d.a(d.b.FORMAT_ERROR,"Error formatting list.",u))}return r}var V=["localeMatcher","style","type","fallback"];function L(e,t,r,i){var n=e.locale,a=e.onError;Intl.DisplayNames||a(new x.b('Intl.DisplayNames is not available in this environment.\nTry polyfilling it using "@formatjs/intl-displaynames"\n',x.a.MISSING_INTL_API));var s=Object(m.d)(i,V);try{return t(n,s).of(r)}catch(o){a(new d.a(d.b.FORMAT_ERROR,"Error formatting display name.",o))}}function D(e){var t;e.defaultRichTextElements&&"string"===typeof((t=e.messages||{})?t[Object.keys(t)[0]]:void 0)&&console.warn('[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. \nPlease consider using "@formatjs/cli" to pre-compile your messages for performance.\nFor more details see https://formatjs.io/docs/getting-started/message-distribution')}var q=r(84);function N(e){return{locale:e.locale,timeZone:e.timeZone,formats:e.formats,textComponent:e.textComponent,messages:e.messages,defaultLocale:e.defaultLocale,defaultFormats:e.defaultFormats,onError:e.onError,wrapRichTextChunksInFragment:e.wrapRichTextChunksInFragment,defaultRichTextElements:e.defaultRichTextElements}}function G(e){return e?Object.keys(e).reduce((function(t,r){var i=e[r];return t[r]=Object(q.c)(i)?Object(s.b)(i):i,t}),{}):e}var j=function(e,t,r,a){for(var s=[],o=4;o<arguments.length;o++)s[o-4]=arguments[o];var c=G(a),u=v.apply(void 0,Object(i.d)([e,t,r,c],s));return Array.isArray(u)?n.Children.toArray(u):u},U=function(e,t){var r=e.defaultRichTextElements,n=Object(i.c)(e,["defaultRichTextElements"]),a=G(r),c=function(e,t){var r=Object(m.b)(t),i=Object(o.a)(Object(o.a)({},m.a),e),n=i.locale,a=i.defaultLocale,s=i.onError;return n?!Intl.NumberFormat.supportedLocalesOf(n).length&&s?s(new d.e('Missing locale data for locale: "'+n+'" in Intl.NumberFormat. Using default locale: "'+a+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):!Intl.DateTimeFormat.supportedLocalesOf(n).length&&s&&s(new d.e('Missing locale data for locale: "'+n+'" in Intl.DateTimeFormat. Using default locale: "'+a+'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details')):(s&&s(new d.c('"locale" was not configured, using "'+a+'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details')),i.locale=i.defaultLocale||"en"),D(i),Object(o.a)(Object(o.a)({},i),{formatters:r,formatNumber:b.bind(null,i,r.getNumberFormat),formatNumberToParts:k.bind(null,i,r.getNumberFormat),formatRelativeTime:_.bind(null,i,r.getRelativeTimeFormat),formatDate:S.bind(null,i,r.getDateTimeFormat),formatDateToParts:M.bind(null,i,r.getDateTimeFormat),formatTime:C.bind(null,i,r.getDateTimeFormat),formatDateTimeRange:I.bind(null,i,r.getDateTimeFormat),formatTimeToParts:E.bind(null,i,r.getDateTimeFormat),formatPlural:F.bind(null,i,r.getPluralRules),formatMessage:v.bind(null,i,r),formatList:R.bind(null,i,r.getListFormat),formatDisplayName:L.bind(null,i,r.getDisplayNames)})}(Object(i.a)(Object(i.a)(Object(i.a)({},s.a),n),{defaultRichTextElements:a}),t);return Object(i.a)(Object(i.a)({},c),{formatMessage:j.bind(null,{locale:c.locale,timeZone:c.timeZone,formats:c.formats,defaultLocale:c.defaultLocale,defaultFormats:c.defaultFormats,messages:c.messages,onError:c.onError,defaultRichTextElements:a},c.formatters)})},H=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cache=Object(m.c)(),t.state={cache:t.cache,intl:U(N(t.props),t.cache),prevConfig:N(t.props)},t}return Object(i.b)(t,e),t.getDerivedStateFromProps=function(e,t){var r=t.prevConfig,i=t.cache,n=N(e);return Object(s.d)(r,n)?null:{intl:U(n,i),prevConfig:n}},t.prototype.render=function(){return Object(s.c)(this.state.intl),n.createElement(a.b,{value:this.state.intl},this.props.children)},t.displayName="IntlProvider",t.defaultProps=s.a,t}(n.PureComponent);t.a=H}]]);
//# sourceMappingURL=2.b4f9cd02.chunk.js.map